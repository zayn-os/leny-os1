var Q8=Object.defineProperty;var Z8=(t,e,n)=>e in t?Q8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rb=(t,e,n)=>Z8(t,typeof e!="symbol"?e+"":e,n);function eF(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jb={exports:{}},jf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function tF(){if(P2)return jf;P2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var u in r)u!=="key"&&(s[u]=r[u])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return jf.Fragment=e,jf.jsx=n,jf.jsxs=n,jf}var M2;function nF(){return M2||(M2=1,jb.exports=tF()),jb.exports}var l=nF(),Pb={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function iF(){if(D2)return Je;D2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function b(K){return K===null||typeof K!="object"?null:(K=y&&K[y]||K["@@iterator"],typeof K=="function"?K:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,E={};function R(K,te,ge){this.props=K,this.context=te,this.refs=E,this.updater=ge||S}R.prototype.isReactComponent={},R.prototype.setState=function(K,te){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,te,"setState")},R.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function U(){}U.prototype=R.prototype;function j(K,te,ge){this.props=K,this.context=te,this.refs=E,this.updater=ge||S}var B=j.prototype=new U;B.constructor=j,N(B,R.prototype),B.isPureReactComponent=!0;var O=Array.isArray;function P(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function M(K,te,ge){var Z=ge.ref;return{$$typeof:t,type:K,key:te,ref:Z!==void 0?Z:null,props:ge}}function H(K,te){return M(K.type,te,K.props)}function F(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function D(K){var te={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ge){return te[ge]})}var z=/\/+/g;function $(K,te){return typeof K=="object"&&K!==null&&K.key!=null?D(""+K.key):te.toString(36)}function Y(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(P,P):(K.status="pending",K.then(function(te){K.status==="pending"&&(K.status="fulfilled",K.value=te)},function(te){K.status==="pending"&&(K.status="rejected",K.reason=te)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function W(K,te,ge,Z,he){var Ne=typeof K;(Ne==="undefined"||Ne==="boolean")&&(K=null);var pe=!1;if(K===null)pe=!0;else switch(Ne){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(K.$$typeof){case t:case e:pe=!0;break;case p:return pe=K._init,W(pe(K._payload),te,ge,Z,he)}}if(pe)return he=he(K),pe=Z===""?"."+$(K,0):Z,O(he)?(ge="",pe!=null&&(ge=pe.replace(z,"$&/")+"/"),W(he,te,ge,"",function(Re){return Re})):he!=null&&(F(he)&&(he=H(he,ge+(he.key==null||K&&K.key===he.key?"":(""+he.key).replace(z,"$&/")+"/")+pe)),te.push(he)),1;pe=0;var ue=Z===""?".":Z+":";if(O(K))for(var re=0;re<K.length;re++)Z=K[re],Ne=ue+$(Z,re),pe+=W(Z,te,ge,Ne,he);else if(re=b(K),typeof re=="function")for(K=re.call(K),re=0;!(Z=K.next()).done;)Z=Z.value,Ne=ue+$(Z,re++),pe+=W(Z,te,ge,Ne,he);else if(Ne==="object"){if(typeof K.then=="function")return W(Y(K),te,ge,Z,he);throw te=String(K),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return pe}function X(K,te,ge){if(K==null)return K;var Z=[],he=0;return W(K,Z,"","",function(Ne){return te.call(ge,Ne,he++)}),Z}function oe(K){if(K._status===-1){var te=K._result;te=te(),te.then(function(ge){(K._status===0||K._status===-1)&&(K._status=1,K._result=ge)},function(ge){(K._status===0||K._status===-1)&&(K._status=2,K._result=ge)}),K._status===-1&&(K._status=0,K._result=te)}if(K._status===1)return K._result.default;throw K._result}var ve=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Ee={map:X,forEach:function(K,te,ge){X(K,function(){te.apply(this,arguments)},ge)},count:function(K){var te=0;return X(K,function(){te++}),te},toArray:function(K){return X(K,function(te){return te})||[]},only:function(K){if(!F(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Je.Activity=m,Je.Children=Ee,Je.Component=R,Je.Fragment=n,Je.Profiler=r,Je.PureComponent=j,Je.StrictMode=i,Je.Suspense=f,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Je.__COMPILER_RUNTIME={__proto__:null,c:function(K){return I.H.useMemoCache(K)}},Je.cache=function(K){return function(){return K.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(K,te,ge){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Z=N({},K.props),he=K.key;if(te!=null)for(Ne in te.key!==void 0&&(he=""+te.key),te)!A.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(Z[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)Z.children=ge;else if(1<Ne){for(var pe=Array(Ne),ue=0;ue<Ne;ue++)pe[ue]=arguments[ue+2];Z.children=pe}return M(K.type,he,Z)},Je.createContext=function(K){return K={$$typeof:a,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},Je.createElement=function(K,te,ge){var Z,he={},Ne=null;if(te!=null)for(Z in te.key!==void 0&&(Ne=""+te.key),te)A.call(te,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(he[Z]=te[Z]);var pe=arguments.length-2;if(pe===1)he.children=ge;else if(1<pe){for(var ue=Array(pe),re=0;re<pe;re++)ue[re]=arguments[re+2];he.children=ue}if(K&&K.defaultProps)for(Z in pe=K.defaultProps,pe)he[Z]===void 0&&(he[Z]=pe[Z]);return M(K,Ne,he)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(K){return{$$typeof:u,render:K}},Je.isValidElement=F,Je.lazy=function(K){return{$$typeof:p,_payload:{_status:-1,_result:K},_init:oe}},Je.memo=function(K,te){return{$$typeof:d,type:K,compare:te===void 0?null:te}},Je.startTransition=function(K){var te=I.T,ge={};I.T=ge;try{var Z=K(),he=I.S;he!==null&&he(ge,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(P,ve)}catch(Ne){ve(Ne)}finally{te!==null&&ge.types!==null&&(te.types=ge.types),I.T=te}},Je.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Je.use=function(K){return I.H.use(K)},Je.useActionState=function(K,te,ge){return I.H.useActionState(K,te,ge)},Je.useCallback=function(K,te){return I.H.useCallback(K,te)},Je.useContext=function(K){return I.H.useContext(K)},Je.useDebugValue=function(){},Je.useDeferredValue=function(K,te){return I.H.useDeferredValue(K,te)},Je.useEffect=function(K,te){return I.H.useEffect(K,te)},Je.useEffectEvent=function(K){return I.H.useEffectEvent(K)},Je.useId=function(){return I.H.useId()},Je.useImperativeHandle=function(K,te,ge){return I.H.useImperativeHandle(K,te,ge)},Je.useInsertionEffect=function(K,te){return I.H.useInsertionEffect(K,te)},Je.useLayoutEffect=function(K,te){return I.H.useLayoutEffect(K,te)},Je.useMemo=function(K,te){return I.H.useMemo(K,te)},Je.useOptimistic=function(K,te){return I.H.useOptimistic(K,te)},Je.useReducer=function(K,te,ge){return I.H.useReducer(K,te,ge)},Je.useRef=function(K){return I.H.useRef(K)},Je.useState=function(K){return I.H.useState(K)},Je.useSyncExternalStore=function(K,te,ge){return I.H.useSyncExternalStore(K,te,ge)},Je.useTransition=function(){return I.H.useTransition()},Je.version="19.2.4",Je}var O2;function id(){return O2||(O2=1,Pb.exports=iF()),Pb.exports}var C=id();const VO=Fo(C),rF=eF({__proto__:null,default:VO},[C]);var Mb={exports:{}},Pf={},Db={exports:{}},Ob={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2;function sF(){return L2||(L2=1,(function(t){function e(W,X){var oe=W.length;W.push(X);e:for(;0<oe;){var ve=oe-1>>>1,Ee=W[ve];if(0<r(Ee,X))W[ve]=X,W[oe]=Ee,oe=ve;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var X=W[0],oe=W.pop();if(oe!==X){W[0]=oe;e:for(var ve=0,Ee=W.length,K=Ee>>>1;ve<K;){var te=2*(ve+1)-1,ge=W[te],Z=te+1,he=W[Z];if(0>r(ge,oe))Z<Ee&&0>r(he,ge)?(W[ve]=he,W[Z]=oe,ve=Z):(W[ve]=ge,W[te]=oe,ve=te);else if(Z<Ee&&0>r(he,oe))W[ve]=he,W[Z]=oe,ve=Z;else break e}}return X}function r(W,X){var oe=W.sortIndex-X.sortIndex;return oe!==0?oe:W.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var f=[],d=[],p=1,m=null,y=3,b=!1,S=!1,N=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function B(W){for(var X=n(d);X!==null;){if(X.callback===null)i(d);else if(X.startTime<=W)i(d),X.sortIndex=X.expirationTime,e(f,X);else break;X=n(d)}}function O(W){if(N=!1,B(W),!S)if(n(f)!==null)S=!0,P||(P=!0,D());else{var X=n(d);X!==null&&Y(O,X.startTime-W)}}var P=!1,I=-1,A=5,M=-1;function H(){return E?!0:!(t.unstable_now()-M<A)}function F(){if(E=!1,P){var W=t.unstable_now();M=W;var X=!0;try{e:{S=!1,N&&(N=!1,U(I),I=-1),b=!0;var oe=y;try{t:{for(B(W),m=n(f);m!==null&&!(m.expirationTime>W&&H());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,y=m.priorityLevel;var Ee=ve(m.expirationTime<=W);if(W=t.unstable_now(),typeof Ee=="function"){m.callback=Ee,B(W),X=!0;break t}m===n(f)&&i(f),B(W)}else i(f);m=n(f)}if(m!==null)X=!0;else{var K=n(d);K!==null&&Y(O,K.startTime-W),X=!1}}break e}finally{m=null,y=oe,b=!1}X=void 0}}finally{X?D():P=!1}}}var D;if(typeof j=="function")D=function(){j(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=F,D=function(){$.postMessage(null)}}else D=function(){R(F,0)};function Y(W,X){I=R(function(){W(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(W){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var oe=y;y=X;try{return W()}finally{y=oe}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var oe=y;y=W;try{return X()}finally{y=oe}},t.unstable_scheduleCallback=function(W,X,oe){var ve=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ve+oe:ve):oe=ve,W){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=oe+Ee,W={id:p++,callback:X,priorityLevel:W,startTime:oe,expirationTime:Ee,sortIndex:-1},oe>ve?(W.sortIndex=oe,e(d,W),n(f)===null&&W===n(d)&&(N?(U(I),I=-1):N=!0,Y(O,oe-ve))):(W.sortIndex=Ee,e(f,W),S||b||(S=!0,P||(P=!0,D()))),W},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(W){var X=y;return function(){var oe=y;y=X;try{return W.apply(this,arguments)}finally{y=oe}}}})(Ob)),Ob}var z2;function oF(){return z2||(z2=1,Db.exports=sF()),Db.exports}var Lb={exports:{}},si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2;function aF(){if(U2)return si;U2=1;var t=id();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(f,d,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:f,containerInfo:d,implementation:p}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,si.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(f,d,null,p)},si.flushSync=function(f){var d=a.T,p=i.p;try{if(a.T=null,i.p=2,f)return f()}finally{a.T=d,i.p=p,i.d.f()}},si.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},si.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},si.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,m=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):p==="script"&&i.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},si.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},si.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,m=u(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},si.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},si.requestFormReset=function(f){i.d.r(f)},si.unstable_batchedUpdates=function(f,d){return f(d)},si.useFormState=function(f,d,p){return a.H.useFormState(f,d,p)},si.useFormStatus=function(){return a.H.useHostTransitionStatus()},si.version="19.2.4",si}var V2;function FO(){if(V2)return Lb.exports;V2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lb.exports=aF(),Lb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2;function lF(){if(F2)return Pf;F2=1;var t=oF(),e=id(),n=FO();function i(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function f(o){if(s(o)!==o)throw Error(i(188))}function d(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(i(188));return c!==o?null:o}for(var h=o,g=c;;){var w=h.return;if(w===null)break;var T=w.alternate;if(T===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===h)return f(w),o;if(T===g)return f(w),c;T=T.sibling}throw Error(i(188))}if(h.return!==g.return)h=w,g=T;else{for(var L=!1,q=w.child;q;){if(q===h){L=!0,h=w,g=T;break}if(q===g){L=!0,g=w,h=T;break}q=q.sibling}if(!L){for(q=T.child;q;){if(q===h){L=!0,h=T,g=w;break}if(q===g){L=!0,g=T,h=w;break}q=q.sibling}if(!L)throw Error(i(189))}}if(h.alternate!==g)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:c}function p(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=p(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),j=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function D(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function $(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case N:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case j:return o.displayName||"Context";case U:return(o._context.displayName||"Context")+".Consumer";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return c=o.displayName||null,c!==null?c:$(o.type)||"Memo";case A:c=o._payload,o=o._init;try{return $(o(c))}catch{}}return null}var Y=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ve=[],Ee=-1;function K(o){return{current:o}}function te(o){0>Ee||(o.current=ve[Ee],ve[Ee]=null,Ee--)}function ge(o,c){Ee++,ve[Ee]=o.current,o.current=c}var Z=K(null),he=K(null),Ne=K(null),pe=K(null);function ue(o,c){switch(ge(Ne,c),ge(he,o),ge(Z,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?n2(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=n2(c),o=i2(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}te(Z),ge(Z,o)}function re(){te(Z),te(he),te(Ne)}function Re(o){o.memoizedState!==null&&ge(pe,o);var c=Z.current,h=i2(c,o.type);c!==h&&(ge(he,o),ge(Z,h))}function $e(o){he.current===o&&(te(Z),te(he)),pe.current===o&&(te(pe),Af._currentValue=oe)}var Se,Bt;function Xe(o){if(Se===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);Se=c&&c[1]||"",Bt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+o+Bt}var we=!1;function Ue(o,c){if(!o||we)return"";we=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(de){var le=de}Reflect.construct(o,[],xe)}else{try{xe.call()}catch(de){le=de}o.call(xe.prototype)}}else{try{throw Error()}catch(de){le=de}(xe=o())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(de){if(de&&le&&typeof de.stack=="string")return[de.stack,le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),L=T[0],q=T[1];if(L&&q){var J=L.split(`
`),ae=q.split(`
`);for(w=g=0;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;for(;w<ae.length&&!ae[w].includes("DetermineComponentFrameRoot");)w++;if(g===J.length||w===ae.length)for(g=J.length-1,w=ae.length-1;1<=g&&0<=w&&J[g]!==ae[w];)w--;for(;1<=g&&0<=w;g--,w--)if(J[g]!==ae[w]){if(g!==1||w!==1)do if(g--,w--,0>w||J[g]!==ae[w]){var me=`
`+J[g].replace(" at new "," at ");return o.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",o.displayName)),me}while(1<=g&&0<=w);break}}}finally{we=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Xe(h):""}function Ke(o,c){switch(o.tag){case 26:case 27:case 5:return Xe(o.type);case 16:return Xe("Lazy");case 13:return o.child!==c&&c!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Ue(o.type,!1);case 11:return Ue(o.type.render,!1);case 1:return Ue(o.type,!0);case 31:return Xe("Activity");default:return""}}function Mr(o){try{var c="",h=null;do c+=Ke(o,h),h=o,o=o.return;while(o);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var $t=Object.prototype.hasOwnProperty,gn=t.unstable_scheduleCallback,Zo=t.unstable_cancelCallback,Pv=t.unstable_shouldYield,vp=t.unstable_requestPaint,mi=t.unstable_now,ul=t.unstable_getCurrentPriorityLevel,Id=t.unstable_ImmediatePriority,Rd=t.unstable_UserBlockingPriority,ea=t.unstable_NormalPriority,Mv=t.unstable_LowPriority,xp=t.unstable_IdlePriority,bp=t.log,_p=t.unstable_setDisableYieldValue,Dr=null,Hn=null;function sr(o){if(typeof bp=="function"&&_p(o),Hn&&typeof Hn.setStrictMode=="function")try{Hn.setStrictMode(Dr,o)}catch{}}var Zt=Math.clz32?Math.clz32:Sp,wp=Math.log,Ac=Math.LN2;function Sp(o){return o>>>=0,o===0?32:31-(wp(o)/Ac|0)|0}var us=256,dl=262144,sn=4194304;function ds(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function fs(o,c,h){var g=o.pendingLanes;if(g===0)return 0;var w=0,T=o.suspendedLanes,L=o.pingedLanes;o=o.warmLanes;var q=g&134217727;return q!==0?(g=q&~T,g!==0?w=ds(g):(L&=q,L!==0?w=ds(L):h||(h=q&~o,h!==0&&(w=ds(h))))):(q=g&~T,q!==0?w=ds(q):L!==0?w=ds(L):h||(h=g&~o,h!==0&&(w=ds(h)))),w===0?0:c!==0&&c!==w&&(c&T)===0&&(T=w&-w,h=c&-c,T>=h||T===32&&(h&4194048)!==0)?c:w}function Or(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Dv(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tp(){var o=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),o}function hs(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function fl(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ov(o,c,h,g,w,T){var L=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var q=o.entanglements,J=o.expirationTimes,ae=o.hiddenUpdates;for(h=L&~h;0<h;){var me=31-Zt(h),xe=1<<me;q[me]=0,J[me]=-1;var le=ae[me];if(le!==null)for(ae[me]=null,me=0;me<le.length;me++){var de=le[me];de!==null&&(de.lane&=-536870913)}h&=~xe}g!==0&&hl(o,g,0),T!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=T&~(L&~c))}function hl(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-Zt(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|h&261930}function jd(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-Zt(h),w=1<<g;w&c|o[g]&c&&(o[g]|=c),h&=~w}}function Pd(o,c){var h=c&-c;return h=(h&42)!==0?1:pl(h),(h&(o.suspendedLanes|c))!==0?0:h}function pl(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function no(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ep(){var o=X.p;return o!==0?o:(o=window.event,o===void 0?32:N2(o.type))}function Lr(o,c){var h=X.p;try{return X.p=o,c()}finally{X.p=h}}var zr=Math.random().toString(36).slice(2),on="__reactFiber$"+zr,Nn="__reactProps$"+zr,ps="__reactContainer$"+zr,kc="__reactEvents$"+zr,Lv="__reactListeners$"+zr,Np="__reactHandles$"+zr,Cp="__reactResources$"+zr,ms="__reactMarker$"+zr;function Ic(o){delete o[on],delete o[Nn],delete o[kc],delete o[Lv],delete o[Np]}function gs(o){var c=o[on];if(c)return c;for(var h=o.parentNode;h;){if(c=h[ps]||h[on]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=u2(o);o!==null;){if(h=o[on])return h;o=u2(o)}return c}o=h,h=o.parentNode}return null}function or(o){if(o=o[on]||o[ps]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function Ui(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(i(33))}function ys(o){var c=o[Cp];return c||(c=o[Cp]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function an(o){o[ms]=!0}var Md=new Set,Dd={};function vs(o,c){xs(o,c),xs(o+"Capture",c)}function xs(o,c){for(Dd[o]=c,o=0;o<c.length;o++)Md.add(c[o])}var Od=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ld={},zd={};function Ap(o){return $t.call(zd,o)?!0:$t.call(Ld,o)?!1:Od.test(o)?zd[o]=!0:(Ld[o]=!0,!1)}function Rc(o,c,h){if(Ap(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function Vi(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function ln(o,c,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+g)}}function Cn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ta(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ud(o,c,h){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var w=g.get,T=g.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(L){h=""+L,T.call(this,L)}}),Object.defineProperty(o,c,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(L){h=""+L},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function St(o){if(!o._valueTracker){var c=ta(o)?"checked":"value";o._valueTracker=Ud(o,c,""+o[c])}}function ml(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=ta(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function bs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var gl=/[\n"\\]/g;function Ei(o){return o.replace(gl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function jc(o,c,h,g,w,T,L,q){o.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.type=L:o.removeAttribute("type"),c!=null?L==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Cn(c)):o.value!==""+Cn(c)&&(o.value=""+Cn(c)):L!=="submit"&&L!=="reset"||o.removeAttribute("value"),c!=null?Vd(o,L,Cn(c)):h!=null?Vd(o,L,Cn(h)):g!=null&&o.removeAttribute("value"),w==null&&T!=null&&(o.defaultChecked=!!T),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.name=""+Cn(q):o.removeAttribute("name")}function kp(o,c,h,g,w,T,L,q){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),c!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||c!=null)){St(o);return}h=h!=null?""+Cn(h):"",c=c!=null?""+Cn(c):h,q||c===o.value||(o.value=c),o.defaultValue=c}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=q?o.checked:!!g,o.defaultChecked=!!g,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.name=L),St(o)}function Vd(o,c,h){c==="number"&&bs(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function na(o,c,h,g){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Cn(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function Ip(o,c,h){if(c!=null&&(c=""+Cn(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+Cn(h):""}function ia(o,c,h,g){if(c==null){if(g!=null){if(h!=null)throw Error(i(92));if(Y(g)){if(1<g.length)throw Error(i(93));g=g[0]}h=g}h==null&&(h=""),c=h}h=Cn(c),o.defaultValue=h,g=o.textContent,g===h&&g!==""&&g!==null&&(o.value=g),St(o)}function Ni(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Rp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fd(o,c,h){var g=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,h):typeof h!="number"||h===0||Rp.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function Hd(o,c,h){if(c!=null&&typeof c!="object")throw Error(i(62));if(o=o.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var w in c)g=c[w],c.hasOwnProperty(w)&&h[w]!==g&&Fd(o,w,g)}else for(var T in c)c.hasOwnProperty(T)&&Fd(o,T,c[T])}function Pc(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ra=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mc(o){return ra.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Ur(){}var Bd=null;function ar(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var sa=null,_s=null;function yl(o){var c=or(o);if(c&&(o=c.stateNode)){var h=o[Nn]||null;e:switch(o=c.stateNode,c.type){case"input":if(jc(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ei(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var w=g[Nn]||null;if(!w)throw Error(i(90));jc(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<h.length;c++)g=h[c],g.form===o.form&&ml(g)}break e;case"textarea":Ip(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&na(o,!!h.multiple,c,!1)}}}var Dc=!1;function oa(o,c,h){if(Dc)return o(c,h);Dc=!0;try{var g=o(c);return g}finally{if(Dc=!1,(sa!==null||_s!==null)&&(Em(),sa&&(c=sa,o=_s,_s=sa=null,yl(c),o)))for(c=0;c<o.length;c++)yl(o[c])}}function Vr(o,c){var h=o.stateNode;if(h===null)return null;var g=h[Nn]||null;if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,c,typeof h));return h}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vl=!1;if(lr)try{var Ct={};Object.defineProperty(Ct,"passive",{get:function(){vl=!0}}),window.addEventListener("test",Ct,Ct),window.removeEventListener("test",Ct,Ct)}catch{vl=!1}var ws=null,$d=null,xl=null;function qd(){if(xl)return xl;var o,c=$d,h=c.length,g,w="value"in ws?ws.value:ws.textContent,T=w.length;for(o=0;o<h&&c[o]===w[o];o++);var L=h-o;for(g=1;g<=L&&c[h-g]===w[T-g];g++);return xl=w.slice(o,1<g?1-g:void 0)}function bl(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function io(){return!0}function Fr(){return!1}function Bn(o){function c(h,g,w,T,L){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(h=o[q],this[q]=h?h(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?io:Fr,this.isPropagationStopped=Fr,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),c}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Bn(ro),aa=m({},ro,{view:0,detail:0}),Gd=Bn(aa),la,Oc,Ts,Lc=m({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ts&&(Ts&&o.type==="mousemove"?(la=o.screenX-Ts.screenX,Oc=o.screenY-Ts.screenY):Oc=la=0,Ts=o),la)},movementY:function(o){return"movementY"in o?o.movementY:Oc}}),Kd=Bn(Lc),_l=m({},Lc,{dataTransfer:0}),Pp=Bn(_l),Mp=m({},aa,{relatedTarget:0}),wl=Bn(Mp),Yd=m({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),Dp=Bn(Yd),zc=m({},ro,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Op=Bn(zc),Lp=m({},ro,{data:0}),Es=Bn(Lp),zp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fp(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Vp[o])?!!c[o]:!1}function ca(){return Fp}var gi=m({},aa,{key:function(o){if(o.key){var c=zp[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=bl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Up[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(o){return o.type==="keypress"?bl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?bl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Hp=Bn(gi),Bp=m({},Lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),so=Bn(Bp),_=m({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),k=Bn(_),V=m({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=Bn(V),ie=m({},Lc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=Bn(ie),Ce=m({},ro,{newState:0,oldState:0}),Ze=Bn(Ce),en=[9,13,27,32],yt=lr&&"CompositionEvent"in window,zt=null;lr&&"documentMode"in document&&(zt=document.documentMode);var cr=lr&&"TextEvent"in window&&!zt,Ns=lr&&(!yt||zt&&8<zt&&11>=zt),Hr=" ",Br=!1;function Sl(o,c){switch(o){case"keyup":return en.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Vc=!1;function w9(o,c){switch(o){case"compositionend":return Uc(c);case"keypress":return c.which!==32?null:(Br=!0,Hr);case"textInput":return o=c.data,o===Hr&&Br?null:o;default:return null}}function S9(o,c){if(Vc)return o==="compositionend"||!yt&&Sl(o,c)?(o=qd(),xl=$d=ws=null,Vc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ns&&c.locale!=="ko"?null:c.data;default:return null}}var T9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hN(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!T9[o.type]:c==="textarea"}function pN(o,c,h,g){sa?_s?_s.push(g):_s=[g]:sa=g,c=jm(c,"onChange"),0<c.length&&(h=new Ss("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Wd=null,Xd=null;function E9(o){XA(o,0)}function $p(o){var c=Ui(o);if(ml(c))return o}function mN(o,c){if(o==="change")return c}var gN=!1;if(lr){var zv;if(lr){var Uv="oninput"in document;if(!Uv){var yN=document.createElement("div");yN.setAttribute("oninput","return;"),Uv=typeof yN.oninput=="function"}zv=Uv}else zv=!1;gN=zv&&(!document.documentMode||9<document.documentMode)}function vN(){Wd&&(Wd.detachEvent("onpropertychange",xN),Xd=Wd=null)}function xN(o){if(o.propertyName==="value"&&$p(Xd)){var c=[];pN(c,Xd,o,ar(o)),oa(E9,c)}}function N9(o,c,h){o==="focusin"?(vN(),Wd=c,Xd=h,Wd.attachEvent("onpropertychange",xN)):o==="focusout"&&vN()}function C9(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $p(Xd)}function A9(o,c){if(o==="click")return $p(c)}function k9(o,c){if(o==="input"||o==="change")return $p(c)}function I9(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Fi=typeof Object.is=="function"?Object.is:I9;function Jd(o,c){if(Fi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!$t.call(c,w)||!Fi(o[w],c[w]))return!1}return!0}function bN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function _N(o,c){var h=bN(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=bN(h)}}function wN(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?wN(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function SN(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=bs(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=bs(o.document)}return c}function Vv(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var R9=lr&&"documentMode"in document&&11>=document.documentMode,Fc=null,Fv=null,Qd=null,Hv=!1;function TN(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Hv||Fc==null||Fc!==bs(g)||(g=Fc,"selectionStart"in g&&Vv(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Qd&&Jd(Qd,g)||(Qd=g,g=jm(Fv,"onSelect"),0<g.length&&(c=new Ss("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Fc)))}function Tl(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Hc={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},Bv={},EN={};lr&&(EN=document.createElement("div").style,"AnimationEvent"in window||(delete Hc.animationend.animation,delete Hc.animationiteration.animation,delete Hc.animationstart.animation),"TransitionEvent"in window||delete Hc.transitionend.transition);function El(o){if(Bv[o])return Bv[o];if(!Hc[o])return o;var c=Hc[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in EN)return Bv[o]=c[h];return o}var NN=El("animationend"),CN=El("animationiteration"),AN=El("animationstart"),j9=El("transitionrun"),P9=El("transitionstart"),M9=El("transitioncancel"),kN=El("transitionend"),IN=new Map,$v="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$v.push("scrollEnd");function $r(o,c){IN.set(o,c),vs(c,[o])}var qp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ur=[],Bc=0,qv=0;function Gp(){for(var o=Bc,c=qv=Bc=0;c<o;){var h=ur[c];ur[c++]=null;var g=ur[c];ur[c++]=null;var w=ur[c];ur[c++]=null;var T=ur[c];if(ur[c++]=null,g!==null&&w!==null){var L=g.pending;L===null?w.next=w:(w.next=L.next,L.next=w),g.pending=w}T!==0&&RN(h,w,T)}}function Kp(o,c,h,g){ur[Bc++]=o,ur[Bc++]=c,ur[Bc++]=h,ur[Bc++]=g,qv|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function Gv(o,c,h,g){return Kp(o,c,h,g),Yp(o)}function Nl(o,c){return Kp(o,null,null,c),Yp(o)}function RN(o,c,h){o.lanes|=h;var g=o.alternate;g!==null&&(g.lanes|=h);for(var w=!1,T=o.return;T!==null;)T.childLanes|=h,g=T.alternate,g!==null&&(g.childLanes|=h),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(w=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,w&&c!==null&&(w=31-Zt(h),o=T.hiddenUpdates,g=o[w],g===null?o[w]=[c]:g.push(c),c.lane=h|536870912),T):null}function Yp(o){if(50<_f)throw _f=0,tb=null,Error(i(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var $c={};function D9(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(o,c,h,g){return new D9(o,c,h,g)}function Kv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function oo(o,c){var h=o.alternate;return h===null?(h=Hi(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function jN(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Wp(o,c,h,g,w,T){var L=0;if(g=o,typeof o=="function")Kv(o)&&(L=1);else if(typeof o=="string")L=V8(o,h,Z.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=Hi(31,h,c,w),o.elementType=M,o.lanes=T,o;case N:return Cl(h.children,w,T,c);case E:L=8,w|=24;break;case R:return o=Hi(12,h,c,w|2),o.elementType=R,o.lanes=T,o;case O:return o=Hi(13,h,c,w),o.elementType=O,o.lanes=T,o;case P:return o=Hi(19,h,c,w),o.elementType=P,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case j:L=10;break e;case U:L=9;break e;case B:L=11;break e;case I:L=14;break e;case A:L=16,g=null;break e}L=29,h=Error(i(130,o===null?"null":typeof o,"")),g=null}return c=Hi(L,h,c,w),c.elementType=o,c.type=g,c.lanes=T,c}function Cl(o,c,h,g){return o=Hi(7,o,g,c),o.lanes=h,o}function Yv(o,c,h){return o=Hi(6,o,null,c),o.lanes=h,o}function PN(o){var c=Hi(18,null,null,0);return c.stateNode=o,c}function Wv(o,c,h){return c=Hi(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var MN=new WeakMap;function dr(o,c){if(typeof o=="object"&&o!==null){var h=MN.get(o);return h!==void 0?h:(c={value:o,source:c,stack:Mr(c)},MN.set(o,c),c)}return{value:o,source:c,stack:Mr(c)}}var qc=[],Gc=0,Xp=null,Zd=0,fr=[],hr=0,ua=null,Cs=1,As="";function ao(o,c){qc[Gc++]=Zd,qc[Gc++]=Xp,Xp=o,Zd=c}function DN(o,c,h){fr[hr++]=Cs,fr[hr++]=As,fr[hr++]=ua,ua=o;var g=Cs;o=As;var w=32-Zt(g)-1;g&=~(1<<w),h+=1;var T=32-Zt(c)+w;if(30<T){var L=w-w%5;T=(g&(1<<L)-1).toString(32),g>>=L,w-=L,Cs=1<<32-Zt(c)+w|h<<w|g,As=T+o}else Cs=1<<T|h<<w|g,As=o}function Xv(o){o.return!==null&&(ao(o,1),DN(o,1,0))}function Jv(o){for(;o===Xp;)Xp=qc[--Gc],qc[Gc]=null,Zd=qc[--Gc],qc[Gc]=null;for(;o===ua;)ua=fr[--hr],fr[hr]=null,As=fr[--hr],fr[hr]=null,Cs=fr[--hr],fr[hr]=null}function ON(o,c){fr[hr++]=Cs,fr[hr++]=As,fr[hr++]=ua,Cs=c.id,As=c.overflow,ua=o}var $n=null,Pt=null,ct=!1,da=null,pr=!1,Qv=Error(i(519));function fa(o){var c=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ef(dr(c,o)),Qv}function LN(o){var c=o.stateNode,h=o.type,g=o.memoizedProps;switch(c[on]=o,c[Nn]=g,h){case"dialog":it("cancel",c),it("close",c);break;case"iframe":case"object":case"embed":it("load",c);break;case"video":case"audio":for(h=0;h<Sf.length;h++)it(Sf[h],c);break;case"source":it("error",c);break;case"img":case"image":case"link":it("error",c),it("load",c);break;case"details":it("toggle",c);break;case"input":it("invalid",c),kp(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":it("invalid",c);break;case"textarea":it("invalid",c),ia(c,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||g.suppressHydrationWarning===!0||e2(c.textContent,h)?(g.popover!=null&&(it("beforetoggle",c),it("toggle",c)),g.onScroll!=null&&it("scroll",c),g.onScrollEnd!=null&&it("scrollend",c),g.onClick!=null&&(c.onclick=Ur),c=!0):c=!1,c||fa(o,!0)}function zN(o){for($n=o.return;$n;)switch($n.tag){case 5:case 31:case 13:pr=!1;return;case 27:case 3:pr=!0;return;default:$n=$n.return}}function Kc(o){if(o!==$n)return!1;if(!ct)return zN(o),ct=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||gb(o.type,o.memoizedProps)),h=!h),h&&Pt&&fa(o),zN(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Pt=c2(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Pt=c2(o)}else c===27?(c=Pt,Na(o.type)?(o=_b,_b=null,Pt=o):Pt=c):Pt=$n?gr(o.stateNode.nextSibling):null;return!0}function Al(){Pt=$n=null,ct=!1}function Zv(){var o=da;return o!==null&&(Ii===null?Ii=o:Ii.push.apply(Ii,o),da=null),o}function ef(o){da===null?da=[o]:da.push(o)}var ex=K(null),kl=null,lo=null;function ha(o,c,h){ge(ex,c._currentValue),c._currentValue=h}function co(o){o._currentValue=ex.current,te(ex)}function tx(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function nx(o,c,h,g){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var T=w.dependencies;if(T!==null){var L=w.child;T=T.firstContext;e:for(;T!==null;){var q=T;T=w;for(var J=0;J<c.length;J++)if(q.context===c[J]){T.lanes|=h,q=T.alternate,q!==null&&(q.lanes|=h),tx(T.return,h,o),g||(L=null);break e}T=q.next}}else if(w.tag===18){if(L=w.return,L===null)throw Error(i(341));L.lanes|=h,T=L.alternate,T!==null&&(T.lanes|=h),tx(L,h,o),L=null}else L=w.child;if(L!==null)L.return=w;else for(L=w;L!==null;){if(L===o){L=null;break}if(w=L.sibling,w!==null){w.return=L.return,L=w;break}L=L.return}w=L}}function Yc(o,c,h,g){o=null;for(var w=c,T=!1;w!==null;){if(!T){if((w.flags&524288)!==0)T=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var L=w.alternate;if(L===null)throw Error(i(387));if(L=L.memoizedProps,L!==null){var q=w.type;Fi(w.pendingProps.value,L.value)||(o!==null?o.push(q):o=[q])}}else if(w===pe.current){if(L=w.alternate,L===null)throw Error(i(387));L.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(Af):o=[Af])}w=w.return}o!==null&&nx(c,o,h,g),c.flags|=262144}function Jp(o){for(o=o.firstContext;o!==null;){if(!Fi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Il(o){kl=o,lo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function qn(o){return UN(kl,o)}function Qp(o,c){return kl===null&&Il(o),UN(o,c)}function UN(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},lo===null){if(o===null)throw Error(i(308));lo=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else lo=lo.next=c;return h}var O9=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},L9=t.unstable_scheduleCallback,z9=t.unstable_NormalPriority,cn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ix(){return{controller:new O9,data:new Map,refCount:0}}function tf(o){o.refCount--,o.refCount===0&&L9(z9,function(){o.controller.abort()})}var nf=null,rx=0,Wc=0,Xc=null;function U9(o,c){if(nf===null){var h=nf=[];rx=0,Wc=ab(),Xc={status:"pending",value:void 0,then:function(g){h.push(g)}}}return rx++,c.then(VN,VN),c}function VN(){if(--rx===0&&nf!==null){Xc!==null&&(Xc.status="fulfilled");var o=nf;nf=null,Wc=0,Xc=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function V9(o,c){var h=[],g={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var w=0;w<h.length;w++)(0,h[w])(c)},function(w){for(g.status="rejected",g.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),g}var FN=W.S;W.S=function(o,c){TA=mi(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&U9(o,c),FN!==null&&FN(o,c)};var Rl=K(null);function sx(){var o=Rl.current;return o!==null?o:Rt.pooledCache}function Zp(o,c){c===null?ge(Rl,Rl.current):ge(Rl,c.pool)}function HN(){var o=sx();return o===null?null:{parent:cn._currentValue,pool:o}}var Jc=Error(i(460)),ox=Error(i(474)),em=Error(i(542)),tm={then:function(){}};function BN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function $N(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(Ur,Ur),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,GN(o),o;default:if(typeof c.status=="string")c.then(Ur,Ur);else{if(o=Rt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=g}},function(g){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,GN(o),o}throw Pl=c,Jc}}function jl(o){try{var c=o._init;return c(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Pl=h,Jc):h}}var Pl=null;function qN(){if(Pl===null)throw Error(i(459));var o=Pl;return Pl=null,o}function GN(o){if(o===Jc||o===em)throw Error(i(483))}var Qc=null,rf=0;function nm(o){var c=rf;return rf+=1,Qc===null&&(Qc=[]),$N(Qc,o,c)}function sf(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function im(o,c){throw c.$$typeof===y?Error(i(525)):(o=Object.prototype.toString.call(c),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function KN(o){function c(ne,Q){if(o){var se=ne.deletions;se===null?(ne.deletions=[Q],ne.flags|=16):se.push(Q)}}function h(ne,Q){if(!o)return null;for(;Q!==null;)c(ne,Q),Q=Q.sibling;return null}function g(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function w(ne,Q){return ne=oo(ne,Q),ne.index=0,ne.sibling=null,ne}function T(ne,Q,se){return ne.index=se,o?(se=ne.alternate,se!==null?(se=se.index,se<Q?(ne.flags|=67108866,Q):se):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function L(ne){return o&&ne.alternate===null&&(ne.flags|=67108866),ne}function q(ne,Q,se,ye){return Q===null||Q.tag!==6?(Q=Yv(se,ne.mode,ye),Q.return=ne,Q):(Q=w(Q,se),Q.return=ne,Q)}function J(ne,Q,se,ye){var Le=se.type;return Le===N?me(ne,Q,se.props.children,ye,se.key):Q!==null&&(Q.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===A&&jl(Le)===Q.type)?(Q=w(Q,se.props),sf(Q,se),Q.return=ne,Q):(Q=Wp(se.type,se.key,se.props,null,ne.mode,ye),sf(Q,se),Q.return=ne,Q)}function ae(ne,Q,se,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==se.containerInfo||Q.stateNode.implementation!==se.implementation?(Q=Wv(se,ne.mode,ye),Q.return=ne,Q):(Q=w(Q,se.children||[]),Q.return=ne,Q)}function me(ne,Q,se,ye,Le){return Q===null||Q.tag!==7?(Q=Cl(se,ne.mode,ye,Le),Q.return=ne,Q):(Q=w(Q,se),Q.return=ne,Q)}function xe(ne,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Yv(""+Q,ne.mode,se),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return se=Wp(Q.type,Q.key,Q.props,null,ne.mode,se),sf(se,Q),se.return=ne,se;case S:return Q=Wv(Q,ne.mode,se),Q.return=ne,Q;case A:return Q=jl(Q),xe(ne,Q,se)}if(Y(Q)||D(Q))return Q=Cl(Q,ne.mode,se,null),Q.return=ne,Q;if(typeof Q.then=="function")return xe(ne,nm(Q),se);if(Q.$$typeof===j)return xe(ne,Qp(ne,Q),se);im(ne,Q)}return null}function le(ne,Q,se,ye){var Le=Q!==null?Q.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Le!==null?null:q(ne,Q,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Le?J(ne,Q,se,ye):null;case S:return se.key===Le?ae(ne,Q,se,ye):null;case A:return se=jl(se),le(ne,Q,se,ye)}if(Y(se)||D(se))return Le!==null?null:me(ne,Q,se,ye,null);if(typeof se.then=="function")return le(ne,Q,nm(se),ye);if(se.$$typeof===j)return le(ne,Q,Qp(ne,se),ye);im(ne,se)}return null}function de(ne,Q,se,ye,Le){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ne=ne.get(se)||null,q(Q,ne,""+ye,Le);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return ne=ne.get(ye.key===null?se:ye.key)||null,J(Q,ne,ye,Le);case S:return ne=ne.get(ye.key===null?se:ye.key)||null,ae(Q,ne,ye,Le);case A:return ye=jl(ye),de(ne,Q,se,ye,Le)}if(Y(ye)||D(ye))return ne=ne.get(se)||null,me(Q,ne,ye,Le,null);if(typeof ye.then=="function")return de(ne,Q,se,nm(ye),Le);if(ye.$$typeof===j)return de(ne,Q,se,Qp(Q,ye),Le);im(Q,ye)}return null}function Pe(ne,Q,se,ye){for(var Le=null,ft=null,Me=Q,tt=Q=0,st=null;Me!==null&&tt<se.length;tt++){Me.index>tt?(st=Me,Me=null):st=Me.sibling;var ht=le(ne,Me,se[tt],ye);if(ht===null){Me===null&&(Me=st);break}o&&Me&&ht.alternate===null&&c(ne,Me),Q=T(ht,Q,tt),ft===null?Le=ht:ft.sibling=ht,ft=ht,Me=st}if(tt===se.length)return h(ne,Me),ct&&ao(ne,tt),Le;if(Me===null){for(;tt<se.length;tt++)Me=xe(ne,se[tt],ye),Me!==null&&(Q=T(Me,Q,tt),ft===null?Le=Me:ft.sibling=Me,ft=Me);return ct&&ao(ne,tt),Le}for(Me=g(Me);tt<se.length;tt++)st=de(Me,ne,tt,se[tt],ye),st!==null&&(o&&st.alternate!==null&&Me.delete(st.key===null?tt:st.key),Q=T(st,Q,tt),ft===null?Le=st:ft.sibling=st,ft=st);return o&&Me.forEach(function(Ra){return c(ne,Ra)}),ct&&ao(ne,tt),Le}function Fe(ne,Q,se,ye){if(se==null)throw Error(i(151));for(var Le=null,ft=null,Me=Q,tt=Q=0,st=null,ht=se.next();Me!==null&&!ht.done;tt++,ht=se.next()){Me.index>tt?(st=Me,Me=null):st=Me.sibling;var Ra=le(ne,Me,ht.value,ye);if(Ra===null){Me===null&&(Me=st);break}o&&Me&&Ra.alternate===null&&c(ne,Me),Q=T(Ra,Q,tt),ft===null?Le=Ra:ft.sibling=Ra,ft=Ra,Me=st}if(ht.done)return h(ne,Me),ct&&ao(ne,tt),Le;if(Me===null){for(;!ht.done;tt++,ht=se.next())ht=xe(ne,ht.value,ye),ht!==null&&(Q=T(ht,Q,tt),ft===null?Le=ht:ft.sibling=ht,ft=ht);return ct&&ao(ne,tt),Le}for(Me=g(Me);!ht.done;tt++,ht=se.next())ht=de(Me,ne,tt,ht.value,ye),ht!==null&&(o&&ht.alternate!==null&&Me.delete(ht.key===null?tt:ht.key),Q=T(ht,Q,tt),ft===null?Le=ht:ft.sibling=ht,ft=ht);return o&&Me.forEach(function(J8){return c(ne,J8)}),ct&&ao(ne,tt),Le}function It(ne,Q,se,ye){if(typeof se=="object"&&se!==null&&se.type===N&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Le=se.key;Q!==null;){if(Q.key===Le){if(Le=se.type,Le===N){if(Q.tag===7){h(ne,Q.sibling),ye=w(Q,se.props.children),ye.return=ne,ne=ye;break e}}else if(Q.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===A&&jl(Le)===Q.type){h(ne,Q.sibling),ye=w(Q,se.props),sf(ye,se),ye.return=ne,ne=ye;break e}h(ne,Q);break}else c(ne,Q);Q=Q.sibling}se.type===N?(ye=Cl(se.props.children,ne.mode,ye,se.key),ye.return=ne,ne=ye):(ye=Wp(se.type,se.key,se.props,null,ne.mode,ye),sf(ye,se),ye.return=ne,ne=ye)}return L(ne);case S:e:{for(Le=se.key;Q!==null;){if(Q.key===Le)if(Q.tag===4&&Q.stateNode.containerInfo===se.containerInfo&&Q.stateNode.implementation===se.implementation){h(ne,Q.sibling),ye=w(Q,se.children||[]),ye.return=ne,ne=ye;break e}else{h(ne,Q);break}else c(ne,Q);Q=Q.sibling}ye=Wv(se,ne.mode,ye),ye.return=ne,ne=ye}return L(ne);case A:return se=jl(se),It(ne,Q,se,ye)}if(Y(se))return Pe(ne,Q,se,ye);if(D(se)){if(Le=D(se),typeof Le!="function")throw Error(i(150));return se=Le.call(se),Fe(ne,Q,se,ye)}if(typeof se.then=="function")return It(ne,Q,nm(se),ye);if(se.$$typeof===j)return It(ne,Q,Qp(ne,se),ye);im(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Q!==null&&Q.tag===6?(h(ne,Q.sibling),ye=w(Q,se),ye.return=ne,ne=ye):(h(ne,Q),ye=Yv(se,ne.mode,ye),ye.return=ne,ne=ye),L(ne)):h(ne,Q)}return function(ne,Q,se,ye){try{rf=0;var Le=It(ne,Q,se,ye);return Qc=null,Le}catch(Me){if(Me===Jc||Me===em)throw Me;var ft=Hi(29,Me,null,ne.mode);return ft.lanes=ye,ft.return=ne,ft}finally{}}}var Ml=KN(!0),YN=KN(!1),pa=!1;function ax(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lx(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ma(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ga(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(vt&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,c=Yp(o),RN(o,null,h),c}return Kp(o,g,c,h),Yp(o)}function of(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,jd(o,h)}}function cx(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var L={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?w=T=L:T=T.next=L,h=h.next}while(h!==null);T===null?w=T=c:T=T.next=c}else w=T=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var ux=!1;function af(){if(ux){var o=Xc;if(o!==null)throw o}}function lf(o,c,h,g){ux=!1;var w=o.updateQueue;pa=!1;var T=w.firstBaseUpdate,L=w.lastBaseUpdate,q=w.shared.pending;if(q!==null){w.shared.pending=null;var J=q,ae=J.next;J.next=null,L===null?T=ae:L.next=ae,L=J;var me=o.alternate;me!==null&&(me=me.updateQueue,q=me.lastBaseUpdate,q!==L&&(q===null?me.firstBaseUpdate=ae:q.next=ae,me.lastBaseUpdate=J))}if(T!==null){var xe=w.baseState;L=0,me=ae=J=null,q=T;do{var le=q.lane&-536870913,de=le!==q.lane;if(de?(rt&le)===le:(g&le)===le){le!==0&&le===Wc&&(ux=!0),me!==null&&(me=me.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Pe=o,Fe=q;le=c;var It=h;switch(Fe.tag){case 1:if(Pe=Fe.payload,typeof Pe=="function"){xe=Pe.call(It,xe,le);break e}xe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Fe.payload,le=typeof Pe=="function"?Pe.call(It,xe,le):Pe,le==null)break e;xe=m({},xe,le);break e;case 2:pa=!0}}le=q.callback,le!==null&&(o.flags|=64,de&&(o.flags|=8192),de=w.callbacks,de===null?w.callbacks=[le]:de.push(le))}else de={lane:le,tag:q.tag,payload:q.payload,callback:q.callback,next:null},me===null?(ae=me=de,J=xe):me=me.next=de,L|=le;if(q=q.next,q===null){if(q=w.shared.pending,q===null)break;de=q,q=de.next,de.next=null,w.lastBaseUpdate=de,w.shared.pending=null}}while(!0);me===null&&(J=xe),w.baseState=J,w.firstBaseUpdate=ae,w.lastBaseUpdate=me,T===null&&(w.shared.lanes=0),_a|=L,o.lanes=L,o.memoizedState=xe}}function WN(o,c){if(typeof o!="function")throw Error(i(191,o));o.call(c)}function XN(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)WN(h[o],c)}var Zc=K(null),rm=K(0);function JN(o,c){o=xo,ge(rm,o),ge(Zc,c),xo=o|c.baseLanes}function dx(){ge(rm,xo),ge(Zc,Zc.current)}function fx(){xo=rm.current,te(Zc),te(rm)}var Bi=K(null),mr=null;function ya(o){var c=o.alternate;ge(tn,tn.current&1),ge(Bi,o),mr===null&&(c===null||Zc.current!==null||c.memoizedState!==null)&&(mr=o)}function hx(o){ge(tn,tn.current),ge(Bi,o),mr===null&&(mr=o)}function QN(o){o.tag===22?(ge(tn,tn.current),ge(Bi,o),mr===null&&(mr=o)):va()}function va(){ge(tn,tn.current),ge(Bi,Bi.current)}function $i(o){te(Bi),mr===o&&(mr=null),te(tn)}var tn=K(0);function sm(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||xb(h)||bb(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var uo=0,et=null,At=null,un=null,om=!1,eu=!1,Dl=!1,am=0,cf=0,tu=null,F9=0;function Kt(){throw Error(i(321))}function px(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Fi(o[h],c[h]))return!1;return!0}function mx(o,c,h,g,w,T){return uo=T,et=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,W.H=o===null||o.memoizedState===null?DC:Ix,Dl=!1,T=h(g,w),Dl=!1,eu&&(T=eC(c,h,g,w)),ZN(o),T}function ZN(o){W.H=ff;var c=At!==null&&At.next!==null;if(uo=0,un=At=et=null,om=!1,cf=0,tu=null,c)throw Error(i(300));o===null||dn||(o=o.dependencies,o!==null&&Jp(o)&&(dn=!0))}function eC(o,c,h,g){et=o;var w=0;do{if(eu&&(tu=null),cf=0,eu=!1,25<=w)throw Error(i(301));if(w+=1,un=At=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}W.H=OC,T=c(h,g)}while(eu);return T}function H9(){var o=W.H,c=o.useState()[0];return c=typeof c.then=="function"?uf(c):c,o=o.useState()[0],(At!==null?At.memoizedState:null)!==o&&(et.flags|=1024),c}function gx(){var o=am!==0;return am=0,o}function yx(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function vx(o){if(om){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}om=!1}uo=0,un=At=et=null,eu=!1,cf=am=0,tu=null}function yi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?et.memoizedState=un=o:un=un.next=o,un}function nn(){if(At===null){var o=et.alternate;o=o!==null?o.memoizedState:null}else o=At.next;var c=un===null?et.memoizedState:un.next;if(c!==null)un=c,At=o;else{if(o===null)throw et.alternate===null?Error(i(467)):Error(i(310));At=o,o={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},un===null?et.memoizedState=un=o:un=un.next=o}return un}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uf(o){var c=cf;return cf+=1,tu===null&&(tu=[]),o=$N(tu,o,c),c=et,(un===null?c.memoizedState:un.next)===null&&(c=c.alternate,W.H=c===null||c.memoizedState===null?DC:Ix),o}function cm(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return uf(o);if(o.$$typeof===j)return qn(o)}throw Error(i(438,String(o)))}function xx(o){var c=null,h=et.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var g=et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=lm(),et.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),g=0;g<o;g++)h[g]=H;return c.index++,h}function fo(o,c){return typeof c=="function"?c(o):c}function um(o){var c=nn();return bx(c,At,o)}function bx(o,c,h){var g=o.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=h;var w=o.baseQueue,T=g.pending;if(T!==null){if(w!==null){var L=w.next;w.next=T.next,T.next=L}c.baseQueue=w=T,g.pending=null}if(T=o.baseState,w===null)o.memoizedState=T;else{c=w.next;var q=L=null,J=null,ae=c,me=!1;do{var xe=ae.lane&-536870913;if(xe!==ae.lane?(rt&xe)===xe:(uo&xe)===xe){var le=ae.revertLane;if(le===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),xe===Wc&&(me=!0);else if((uo&le)===le){ae=ae.next,le===Wc&&(me=!0);continue}else xe={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},J===null?(q=J=xe,L=T):J=J.next=xe,et.lanes|=le,_a|=le;xe=ae.action,Dl&&h(T,xe),T=ae.hasEagerState?ae.eagerState:h(T,xe)}else le={lane:xe,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},J===null?(q=J=le,L=T):J=J.next=le,et.lanes|=xe,_a|=xe;ae=ae.next}while(ae!==null&&ae!==c);if(J===null?L=T:J.next=q,!Fi(T,o.memoizedState)&&(dn=!0,me&&(h=Xc,h!==null)))throw h;o.memoizedState=T,o.baseState=L,o.baseQueue=J,g.lastRenderedState=T}return w===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function _x(o){var c=nn(),h=c.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var g=h.dispatch,w=h.pending,T=c.memoizedState;if(w!==null){h.pending=null;var L=w=w.next;do T=o(T,L.action),L=L.next;while(L!==w);Fi(T,c.memoizedState)||(dn=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),h.lastRenderedState=T}return[T,g]}function tC(o,c,h){var g=et,w=nn(),T=ct;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=c();var L=!Fi((At||w).memoizedState,h);if(L&&(w.memoizedState=h,dn=!0),w=w.queue,Tx(rC.bind(null,g,w,o),[o]),w.getSnapshot!==c||L||un!==null&&un.memoizedState.tag&1){if(g.flags|=2048,nu(9,{destroy:void 0},iC.bind(null,g,w,h,c),null),Rt===null)throw Error(i(349));T||(uo&127)!==0||nC(g,c,h)}return h}function nC(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=et.updateQueue,c===null?(c=lm(),et.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function iC(o,c,h,g){c.value=h,c.getSnapshot=g,sC(c)&&oC(o)}function rC(o,c,h){return h(function(){sC(c)&&oC(o)})}function sC(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Fi(o,h)}catch{return!0}}function oC(o){var c=Nl(o,2);c!==null&&Ri(c,o,2)}function wx(o){var c=yi();if(typeof o=="function"){var h=o;if(o=h(),Dl){sr(!0);try{h()}finally{sr(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:o},c}function aC(o,c,h,g){return o.baseState=h,bx(o,At,typeof g=="function"?g:fo)}function B9(o,c,h,g,w){if(hm(o))throw Error(i(485));if(o=c.action,o!==null){var T={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){T.listeners.push(L)}};W.T!==null?h(!0):T.isTransition=!1,g(T),h=c.pending,h===null?(T.next=c.pending=T,lC(c,T)):(T.next=h.next,c.pending=h.next=T)}}function lC(o,c){var h=c.action,g=c.payload,w=o.state;if(c.isTransition){var T=W.T,L={};W.T=L;try{var q=h(w,g),J=W.S;J!==null&&J(L,q),cC(o,c,q)}catch(ae){Sx(o,c,ae)}finally{T!==null&&L.types!==null&&(T.types=L.types),W.T=T}}else try{T=h(w,g),cC(o,c,T)}catch(ae){Sx(o,c,ae)}}function cC(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){uC(o,c,g)},function(g){return Sx(o,c,g)}):uC(o,c,h)}function uC(o,c,h){c.status="fulfilled",c.value=h,dC(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,lC(o,h)))}function Sx(o,c,h){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=h,dC(c),c=c.next;while(c!==g)}o.action=null}function dC(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function fC(o,c){return c}function hC(o,c){if(ct){var h=Rt.formState;if(h!==null){e:{var g=et;if(ct){if(Pt){t:{for(var w=Pt,T=pr;w.nodeType!==8;){if(!T){w=null;break t}if(w=gr(w.nextSibling),w===null){w=null;break t}}T=w.data,w=T==="F!"||T==="F"?w:null}if(w){Pt=gr(w.nextSibling),g=w.data==="F!";break e}}fa(g)}g=!1}g&&(c=h[0])}}return h=yi(),h.memoizedState=h.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fC,lastRenderedState:c},h.queue=g,h=jC.bind(null,et,g),g.dispatch=h,g=wx(!1),T=kx.bind(null,et,!1,g.queue),g=yi(),w={state:c,dispatch:null,action:o,pending:null},g.queue=w,h=B9.bind(null,et,w,T,h),w.dispatch=h,g.memoizedState=o,[c,h,!1]}function pC(o){var c=nn();return mC(c,At,o)}function mC(o,c,h){if(c=bx(o,c,fC)[0],o=um(fo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=uf(c)}catch(L){throw L===Jc?em:L}else g=c;c=nn();var w=c.queue,T=w.dispatch;return h!==c.memoizedState&&(et.flags|=2048,nu(9,{destroy:void 0},$9.bind(null,w,h),null)),[g,T,o]}function $9(o,c){o.action=c}function gC(o){var c=nn(),h=At;if(h!==null)return mC(c,h,o);nn(),c=c.memoizedState,h=nn();var g=h.queue.dispatch;return h.memoizedState=o,[c,g,!1]}function nu(o,c,h,g){return o={tag:o,create:h,deps:g,inst:c,next:null},c=et.updateQueue,c===null&&(c=lm(),et.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o),o}function yC(){return nn().memoizedState}function dm(o,c,h,g){var w=yi();et.flags|=o,w.memoizedState=nu(1|c,{destroy:void 0},h,g===void 0?null:g)}function fm(o,c,h,g){var w=nn();g=g===void 0?null:g;var T=w.memoizedState.inst;At!==null&&g!==null&&px(g,At.memoizedState.deps)?w.memoizedState=nu(c,T,h,g):(et.flags|=o,w.memoizedState=nu(1|c,T,h,g))}function vC(o,c){dm(8390656,8,o,c)}function Tx(o,c){fm(2048,8,o,c)}function q9(o){et.flags|=4;var c=et.updateQueue;if(c===null)c=lm(),et.updateQueue=c,c.events=[o];else{var h=c.events;h===null?c.events=[o]:h.push(o)}}function xC(o){var c=nn().memoizedState;return q9({ref:c,nextImpl:o}),function(){if((vt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}function bC(o,c){return fm(4,2,o,c)}function _C(o,c){return fm(4,4,o,c)}function wC(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function SC(o,c,h){h=h!=null?h.concat([o]):null,fm(4,4,wC.bind(null,c,o),h)}function Ex(){}function TC(o,c){var h=nn();c=c===void 0?null:c;var g=h.memoizedState;return c!==null&&px(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function EC(o,c){var h=nn();c=c===void 0?null:c;var g=h.memoizedState;if(c!==null&&px(c,g[1]))return g[0];if(g=o(),Dl){sr(!0);try{o()}finally{sr(!1)}}return h.memoizedState=[g,c],g}function Nx(o,c,h){return h===void 0||(uo&1073741824)!==0&&(rt&261930)===0?o.memoizedState=c:(o.memoizedState=h,o=NA(),et.lanes|=o,_a|=o,h)}function NC(o,c,h,g){return Fi(h,c)?h:Zc.current!==null?(o=Nx(o,h,g),Fi(o,c)||(dn=!0),o):(uo&42)===0||(uo&1073741824)!==0&&(rt&261930)===0?(dn=!0,o.memoizedState=h):(o=NA(),et.lanes|=o,_a|=o,c)}function CC(o,c,h,g,w){var T=X.p;X.p=T!==0&&8>T?T:8;var L=W.T,q={};W.T=q,kx(o,!1,c,h);try{var J=w(),ae=W.S;if(ae!==null&&ae(q,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var me=V9(J,g);df(o,c,me,Ki(o))}else df(o,c,g,Ki(o))}catch(xe){df(o,c,{then:function(){},status:"rejected",reason:xe},Ki())}finally{X.p=T,L!==null&&q.types!==null&&(L.types=q.types),W.T=L}}function G9(){}function Cx(o,c,h,g){if(o.tag!==5)throw Error(i(476));var w=AC(o).queue;CC(o,w,c,oe,h===null?G9:function(){return kC(o),h(g)})}function AC(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:oe},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function kC(o){var c=AC(o);c.next===null&&(c=o.alternate.memoizedState),df(o,c.next.queue,{},Ki())}function Ax(){return qn(Af)}function IC(){return nn().memoizedState}function RC(){return nn().memoizedState}function K9(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=Ki();o=ma(h);var g=ga(c,o,h);g!==null&&(Ri(g,c,h),of(g,c,h)),c={cache:ix()},o.payload=c;return}c=c.return}}function Y9(o,c,h){var g=Ki();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},hm(o)?PC(c,h):(h=Gv(o,c,h,g),h!==null&&(Ri(h,o,g),MC(h,c,g)))}function jC(o,c,h){var g=Ki();df(o,c,h,g)}function df(o,c,h,g){var w={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(hm(o))PC(c,w);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var L=c.lastRenderedState,q=T(L,h);if(w.hasEagerState=!0,w.eagerState=q,Fi(q,L))return Kp(o,c,w,0),Rt===null&&Gp(),!1}catch{}finally{}if(h=Gv(o,c,w,g),h!==null)return Ri(h,o,g),MC(h,c,g),!0}return!1}function kx(o,c,h,g){if(g={lane:2,revertLane:ab(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},hm(o)){if(c)throw Error(i(479))}else c=Gv(o,h,g,2),c!==null&&Ri(c,o,2)}function hm(o){var c=o.alternate;return o===et||c!==null&&c===et}function PC(o,c){eu=om=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function MC(o,c,h){if((h&4194048)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,jd(o,h)}}var ff={readContext:qn,use:cm,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};ff.useEffectEvent=Kt;var DC={readContext:qn,use:cm,useCallback:function(o,c){return yi().memoizedState=[o,c===void 0?null:c],o},useContext:qn,useEffect:vC,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,dm(4194308,4,wC.bind(null,c,o),h)},useLayoutEffect:function(o,c){return dm(4194308,4,o,c)},useInsertionEffect:function(o,c){dm(4,2,o,c)},useMemo:function(o,c){var h=yi();c=c===void 0?null:c;var g=o();if(Dl){sr(!0);try{o()}finally{sr(!1)}}return h.memoizedState=[g,c],g},useReducer:function(o,c,h){var g=yi();if(h!==void 0){var w=h(c);if(Dl){sr(!0);try{h(c)}finally{sr(!1)}}}else w=c;return g.memoizedState=g.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},g.queue=o,o=o.dispatch=Y9.bind(null,et,o),[g.memoizedState,o]},useRef:function(o){var c=yi();return o={current:o},c.memoizedState=o},useState:function(o){o=wx(o);var c=o.queue,h=jC.bind(null,et,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Ex,useDeferredValue:function(o,c){var h=yi();return Nx(h,o,c)},useTransition:function(){var o=wx(!1);return o=CC.bind(null,et,o.queue,!0,!1),yi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var g=et,w=yi();if(ct){if(h===void 0)throw Error(i(407));h=h()}else{if(h=c(),Rt===null)throw Error(i(349));(rt&127)!==0||nC(g,c,h)}w.memoizedState=h;var T={value:h,getSnapshot:c};return w.queue=T,vC(rC.bind(null,g,T,o),[o]),g.flags|=2048,nu(9,{destroy:void 0},iC.bind(null,g,T,h,c),null),h},useId:function(){var o=yi(),c=Rt.identifierPrefix;if(ct){var h=As,g=Cs;h=(g&~(1<<32-Zt(g)-1)).toString(32)+h,c="_"+c+"R_"+h,h=am++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=F9++,c="_"+c+"r_"+h.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:Ax,useFormState:hC,useActionState:hC,useOptimistic:function(o){var c=yi();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=kx.bind(null,et,!0,h),h.dispatch=c,[o,c]},useMemoCache:xx,useCacheRefresh:function(){return yi().memoizedState=K9.bind(null,et)},useEffectEvent:function(o){var c=yi(),h={impl:o};return c.memoizedState=h,function(){if((vt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Ix={readContext:qn,use:cm,useCallback:TC,useContext:qn,useEffect:Tx,useImperativeHandle:SC,useInsertionEffect:bC,useLayoutEffect:_C,useMemo:EC,useReducer:um,useRef:yC,useState:function(){return um(fo)},useDebugValue:Ex,useDeferredValue:function(o,c){var h=nn();return NC(h,At.memoizedState,o,c)},useTransition:function(){var o=um(fo)[0],c=nn().memoizedState;return[typeof o=="boolean"?o:uf(o),c]},useSyncExternalStore:tC,useId:IC,useHostTransitionStatus:Ax,useFormState:pC,useActionState:pC,useOptimistic:function(o,c){var h=nn();return aC(h,At,o,c)},useMemoCache:xx,useCacheRefresh:RC};Ix.useEffectEvent=xC;var OC={readContext:qn,use:cm,useCallback:TC,useContext:qn,useEffect:Tx,useImperativeHandle:SC,useInsertionEffect:bC,useLayoutEffect:_C,useMemo:EC,useReducer:_x,useRef:yC,useState:function(){return _x(fo)},useDebugValue:Ex,useDeferredValue:function(o,c){var h=nn();return At===null?Nx(h,o,c):NC(h,At.memoizedState,o,c)},useTransition:function(){var o=_x(fo)[0],c=nn().memoizedState;return[typeof o=="boolean"?o:uf(o),c]},useSyncExternalStore:tC,useId:IC,useHostTransitionStatus:Ax,useFormState:gC,useActionState:gC,useOptimistic:function(o,c){var h=nn();return At!==null?aC(h,At,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:xx,useCacheRefresh:RC};OC.useEffectEvent=xC;function Rx(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:m({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var jx={enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Ki(),w=ma(g);w.payload=c,h!=null&&(w.callback=h),c=ga(o,w,g),c!==null&&(Ri(c,o,g),of(c,o,g))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Ki(),w=ma(g);w.tag=1,w.payload=c,h!=null&&(w.callback=h),c=ga(o,w,g),c!==null&&(Ri(c,o,g),of(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Ki(),g=ma(h);g.tag=2,c!=null&&(g.callback=c),c=ga(o,g,h),c!==null&&(Ri(c,o,h),of(c,o,h))}};function LC(o,c,h,g,w,T,L){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,T,L):c.prototype&&c.prototype.isPureReactComponent?!Jd(h,g)||!Jd(w,T):!0}function zC(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&jx.enqueueReplaceState(c,c.state,null)}function Ol(o,c){var h=c;if("ref"in c){h={};for(var g in c)g!=="ref"&&(h[g]=c[g])}if(o=o.defaultProps){h===c&&(h=m({},h));for(var w in o)h[w]===void 0&&(h[w]=o[w])}return h}function UC(o){qp(o)}function VC(o){console.error(o)}function FC(o){qp(o)}function pm(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function HC(o,c,h){try{var g=o.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Px(o,c,h){return h=ma(h),h.tag=3,h.payload={element:null},h.callback=function(){pm(o,c)},h}function BC(o){return o=ma(o),o.tag=3,o}function $C(o,c,h,g){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var T=g.value;o.payload=function(){return w(T)},o.callback=function(){HC(c,h,g)}}var L=h.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(o.callback=function(){HC(c,h,g),typeof w!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var q=g.stack;this.componentDidCatch(g.value,{componentStack:q!==null?q:""})})}function W9(o,c,h,g,w){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=h.alternate,c!==null&&Yc(c,h,w,!0),h=Bi.current,h!==null){switch(h.tag){case 31:case 13:return mr===null?Nm():h.alternate===null&&Yt===0&&(Yt=3),h.flags&=-257,h.flags|=65536,h.lanes=w,g===tm?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([g]):c.add(g),rb(o,g,w)),!1;case 22:return h.flags|=65536,g===tm?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([g]):h.add(g)),rb(o,g,w)),!1}throw Error(i(435,h.tag))}return rb(o,g,w),Nm(),!1}if(ct)return c=Bi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,g!==Qv&&(o=Error(i(422),{cause:g}),ef(dr(o,h)))):(g!==Qv&&(c=Error(i(423),{cause:g}),ef(dr(c,h))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,g=dr(g,h),w=Px(o.stateNode,g,w),cx(o,w),Yt!==4&&(Yt=2)),!1;var T=Error(i(520),{cause:g});if(T=dr(T,h),bf===null?bf=[T]:bf.push(T),Yt!==4&&(Yt=2),c===null)return!0;g=dr(g,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=w&-w,h.lanes|=o,o=Px(h.stateNode,g,o),cx(h,o),!1;case 1:if(c=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(wa===null||!wa.has(T))))return h.flags|=65536,w&=-w,h.lanes|=w,w=BC(w),$C(w,o,h,g),cx(h,w),!1}h=h.return}while(h!==null);return!1}var Mx=Error(i(461)),dn=!1;function Gn(o,c,h,g){c.child=o===null?YN(c,null,h,g):Ml(c,o.child,h,g)}function qC(o,c,h,g,w){h=h.render;var T=c.ref;if("ref"in g){var L={};for(var q in g)q!=="ref"&&(L[q]=g[q])}else L=g;return Il(c),g=mx(o,c,h,L,T,w),q=gx(),o!==null&&!dn?(yx(o,c,w),ho(o,c,w)):(ct&&q&&Xv(c),c.flags|=1,Gn(o,c,g,w),c.child)}function GC(o,c,h,g,w){if(o===null){var T=h.type;return typeof T=="function"&&!Kv(T)&&T.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=T,KC(o,c,T,g,w)):(o=Wp(h.type,null,g,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(T=o.child,!Hx(o,w)){var L=T.memoizedProps;if(h=h.compare,h=h!==null?h:Jd,h(L,g)&&o.ref===c.ref)return ho(o,c,w)}return c.flags|=1,o=oo(T,g),o.ref=c.ref,o.return=c,c.child=o}function KC(o,c,h,g,w){if(o!==null){var T=o.memoizedProps;if(Jd(T,g)&&o.ref===c.ref)if(dn=!1,c.pendingProps=g=T,Hx(o,w))(o.flags&131072)!==0&&(dn=!0);else return c.lanes=o.lanes,ho(o,c,w)}return Dx(o,c,h,g,w)}function YC(o,c,h,g){var w=g.children,T=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((c.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,o!==null){for(g=c.child=o.child,w=0;g!==null;)w=w|g.lanes|g.childLanes,g=g.sibling;g=w&~T}else g=0,c.child=null;return WC(o,c,T,h,g)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Zp(c,T!==null?T.cachePool:null),T!==null?JN(c,T):dx(),QN(c);else return g=c.lanes=536870912,WC(o,c,T!==null?T.baseLanes|h:h,h,g)}else T!==null?(Zp(c,T.cachePool),JN(c,T),va(),c.memoizedState=null):(o!==null&&Zp(c,null),dx(),va());return Gn(o,c,w,h),c.child}function hf(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function WC(o,c,h,g,w){var T=sx();return T=T===null?null:{parent:cn._currentValue,pool:T},c.memoizedState={baseLanes:h,cachePool:T},o!==null&&Zp(c,null),dx(),QN(c),o!==null&&Yc(o,c,g,!0),c.childLanes=w,null}function mm(o,c){return c=ym({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function XC(o,c,h){return Ml(c,o.child,null,h),o=mm(c,c.pendingProps),o.flags|=2,$i(c),c.memoizedState=null,o}function X9(o,c,h){var g=c.pendingProps,w=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(ct){if(g.mode==="hidden")return o=mm(c,g),c.lanes=536870912,hf(null,o);if(hx(c),(o=Pt)?(o=l2(o,pr),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:ua!==null?{id:Cs,overflow:As}:null,retryLane:536870912,hydrationErrors:null},h=PN(o),h.return=c,c.child=h,$n=c,Pt=null)):o=null,o===null)throw fa(c);return c.lanes=536870912,null}return mm(c,g)}var T=o.memoizedState;if(T!==null){var L=T.dehydrated;if(hx(c),w)if(c.flags&256)c.flags&=-257,c=XC(o,c,h);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(i(558));else if(dn||Yc(o,c,h,!1),w=(h&o.childLanes)!==0,dn||w){if(g=Rt,g!==null&&(L=Pd(g,h),L!==0&&L!==T.retryLane))throw T.retryLane=L,Nl(o,L),Ri(g,o,L),Mx;Nm(),c=XC(o,c,h)}else o=T.treeContext,Pt=gr(L.nextSibling),$n=c,ct=!0,da=null,pr=!1,o!==null&&ON(c,o),c=mm(c,g),c.flags|=4096;return c}return o=oo(o.child,{mode:g.mode,children:g.children}),o.ref=c.ref,c.child=o,o.return=c,o}function gm(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function Dx(o,c,h,g,w){return Il(c),h=mx(o,c,h,g,void 0,w),g=gx(),o!==null&&!dn?(yx(o,c,w),ho(o,c,w)):(ct&&g&&Xv(c),c.flags|=1,Gn(o,c,h,w),c.child)}function JC(o,c,h,g,w,T){return Il(c),c.updateQueue=null,h=eC(c,g,h,w),ZN(o),g=gx(),o!==null&&!dn?(yx(o,c,T),ho(o,c,T)):(ct&&g&&Xv(c),c.flags|=1,Gn(o,c,h,T),c.child)}function QC(o,c,h,g,w){if(Il(c),c.stateNode===null){var T=$c,L=h.contextType;typeof L=="object"&&L!==null&&(T=qn(L)),T=new h(g,T),c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=jx,c.stateNode=T,T._reactInternals=c,T=c.stateNode,T.props=g,T.state=c.memoizedState,T.refs={},ax(c),L=h.contextType,T.context=typeof L=="object"&&L!==null?qn(L):$c,T.state=c.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(Rx(c,h,L,g),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(L=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),L!==T.state&&jx.enqueueReplaceState(T,T.state,null),lf(c,g,T,w),af(),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){T=c.stateNode;var q=c.memoizedProps,J=Ol(h,q);T.props=J;var ae=T.context,me=h.contextType;L=$c,typeof me=="object"&&me!==null&&(L=qn(me));var xe=h.getDerivedStateFromProps;me=typeof xe=="function"||typeof T.getSnapshotBeforeUpdate=="function",q=c.pendingProps!==q,me||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(q||ae!==L)&&zC(c,T,g,L),pa=!1;var le=c.memoizedState;T.state=le,lf(c,g,T,w),af(),ae=c.memoizedState,q||le!==ae||pa?(typeof xe=="function"&&(Rx(c,h,xe,g),ae=c.memoizedState),(J=pa||LC(c,h,J,g,le,ae,L))?(me||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(c.flags|=4194308)):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=ae),T.props=g,T.state=ae,T.context=L,g=J):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{T=c.stateNode,lx(o,c),L=c.memoizedProps,me=Ol(h,L),T.props=me,xe=c.pendingProps,le=T.context,ae=h.contextType,J=$c,typeof ae=="object"&&ae!==null&&(J=qn(ae)),q=h.getDerivedStateFromProps,(ae=typeof q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==xe||le!==J)&&zC(c,T,g,J),pa=!1,le=c.memoizedState,T.state=le,lf(c,g,T,w),af();var de=c.memoizedState;L!==xe||le!==de||pa||o!==null&&o.dependencies!==null&&Jp(o.dependencies)?(typeof q=="function"&&(Rx(c,h,q,g),de=c.memoizedState),(me=pa||LC(c,h,me,g,le,de,J)||o!==null&&o.dependencies!==null&&Jp(o.dependencies))?(ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,de,J),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,de,J)),typeof T.componentDidUpdate=="function"&&(c.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===o.memoizedProps&&le===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&le===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=de),T.props=g,T.state=de,T.context=J,g=me):(typeof T.componentDidUpdate!="function"||L===o.memoizedProps&&le===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&le===o.memoizedState||(c.flags|=1024),g=!1)}return T=g,gm(o,c),g=(c.flags&128)!==0,T||g?(T=c.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:T.render(),c.flags|=1,o!==null&&g?(c.child=Ml(c,o.child,null,w),c.child=Ml(c,null,h,w)):Gn(o,c,h,w),c.memoizedState=T.state,o=c.child):o=ho(o,c,w),o}function ZC(o,c,h,g){return Al(),c.flags|=256,Gn(o,c,h,g),c.child}var Ox={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lx(o){return{baseLanes:o,cachePool:HN()}}function zx(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=Gi),o}function eA(o,c,h){var g=c.pendingProps,w=!1,T=(c.flags&128)!==0,L;if((L=T)||(L=o!==null&&o.memoizedState===null?!1:(tn.current&2)!==0),L&&(w=!0,c.flags&=-129),L=(c.flags&32)!==0,c.flags&=-33,o===null){if(ct){if(w?ya(c):va(),(o=Pt)?(o=l2(o,pr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:ua!==null?{id:Cs,overflow:As}:null,retryLane:536870912,hydrationErrors:null},h=PN(o),h.return=c,c.child=h,$n=c,Pt=null)):o=null,o===null)throw fa(c);return bb(o)?c.lanes=32:c.lanes=536870912,null}var q=g.children;return g=g.fallback,w?(va(),w=c.mode,q=ym({mode:"hidden",children:q},w),g=Cl(g,w,h,null),q.return=c,g.return=c,q.sibling=g,c.child=q,g=c.child,g.memoizedState=Lx(h),g.childLanes=zx(o,L,h),c.memoizedState=Ox,hf(null,g)):(ya(c),Ux(c,q))}var J=o.memoizedState;if(J!==null&&(q=J.dehydrated,q!==null)){if(T)c.flags&256?(ya(c),c.flags&=-257,c=Vx(o,c,h)):c.memoizedState!==null?(va(),c.child=o.child,c.flags|=128,c=null):(va(),q=g.fallback,w=c.mode,g=ym({mode:"visible",children:g.children},w),q=Cl(q,w,h,null),q.flags|=2,g.return=c,q.return=c,g.sibling=q,c.child=g,Ml(c,o.child,null,h),g=c.child,g.memoizedState=Lx(h),g.childLanes=zx(o,L,h),c.memoizedState=Ox,c=hf(null,g));else if(ya(c),bb(q)){if(L=q.nextSibling&&q.nextSibling.dataset,L)var ae=L.dgst;L=ae,g=Error(i(419)),g.stack="",g.digest=L,ef({value:g,source:null,stack:null}),c=Vx(o,c,h)}else if(dn||Yc(o,c,h,!1),L=(h&o.childLanes)!==0,dn||L){if(L=Rt,L!==null&&(g=Pd(L,h),g!==0&&g!==J.retryLane))throw J.retryLane=g,Nl(o,g),Ri(L,o,g),Mx;xb(q)||Nm(),c=Vx(o,c,h)}else xb(q)?(c.flags|=192,c.child=o.child,c=null):(o=J.treeContext,Pt=gr(q.nextSibling),$n=c,ct=!0,da=null,pr=!1,o!==null&&ON(c,o),c=Ux(c,g.children),c.flags|=4096);return c}return w?(va(),q=g.fallback,w=c.mode,J=o.child,ae=J.sibling,g=oo(J,{mode:"hidden",children:g.children}),g.subtreeFlags=J.subtreeFlags&65011712,ae!==null?q=oo(ae,q):(q=Cl(q,w,h,null),q.flags|=2),q.return=c,g.return=c,g.sibling=q,c.child=g,hf(null,g),g=c.child,q=o.child.memoizedState,q===null?q=Lx(h):(w=q.cachePool,w!==null?(J=cn._currentValue,w=w.parent!==J?{parent:J,pool:J}:w):w=HN(),q={baseLanes:q.baseLanes|h,cachePool:w}),g.memoizedState=q,g.childLanes=zx(o,L,h),c.memoizedState=Ox,hf(o.child,g)):(ya(c),h=o.child,o=h.sibling,h=oo(h,{mode:"visible",children:g.children}),h.return=c,h.sibling=null,o!==null&&(L=c.deletions,L===null?(c.deletions=[o],c.flags|=16):L.push(o)),c.child=h,c.memoizedState=null,h)}function Ux(o,c){return c=ym({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function ym(o,c){return o=Hi(22,o,null,c),o.lanes=0,o}function Vx(o,c,h){return Ml(c,o.child,null,h),o=Ux(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function tA(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),tx(o.return,c,h)}function Fx(o,c,h,g,w,T){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w,treeForkCount:T}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=g,L.tail=h,L.tailMode=w,L.treeForkCount=T)}function nA(o,c,h){var g=c.pendingProps,w=g.revealOrder,T=g.tail;g=g.children;var L=tn.current,q=(L&2)!==0;if(q?(L=L&1|2,c.flags|=128):L&=1,ge(tn,L),Gn(o,c,g,h),g=ct?Zd:0,!q&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&tA(o,h,c);else if(o.tag===19)tA(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&sm(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),Fx(c,!1,w,h,T,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&sm(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}Fx(c,!0,h,null,T,g);break;case"together":Fx(c,!1,null,null,void 0,g);break;default:c.memoizedState=null}return c.child}function ho(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),_a|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(Yc(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(i(153));if(c.child!==null){for(o=c.child,h=oo(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=oo(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function Hx(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Jp(o)))}function J9(o,c,h){switch(c.tag){case 3:ue(c,c.stateNode.containerInfo),ha(c,cn,o.memoizedState.cache),Al();break;case 27:case 5:Re(c);break;case 4:ue(c,c.stateNode.containerInfo);break;case 10:ha(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,hx(c),null;break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(ya(c),c.flags|=128,null):(h&c.child.childLanes)!==0?eA(o,c,h):(ya(c),o=ho(o,c,h),o!==null?o.sibling:null);ya(c);break;case 19:var w=(o.flags&128)!==0;if(g=(h&c.childLanes)!==0,g||(Yc(o,c,h,!1),g=(h&c.childLanes)!==0),w){if(g)return nA(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ge(tn,tn.current),g)break;return null;case 22:return c.lanes=0,YC(o,c,h,c.pendingProps);case 24:ha(c,cn,o.memoizedState.cache)}return ho(o,c,h)}function iA(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)dn=!0;else{if(!Hx(o,h)&&(c.flags&128)===0)return dn=!1,J9(o,c,h);dn=(o.flags&131072)!==0}else dn=!1,ct&&(c.flags&1048576)!==0&&DN(c,Zd,c.index);switch(c.lanes=0,c.tag){case 16:e:{var g=c.pendingProps;if(o=jl(c.elementType),c.type=o,typeof o=="function")Kv(o)?(g=Ol(o,g),c.tag=1,c=QC(null,c,o,g,h)):(c.tag=0,c=Dx(null,c,o,g,h));else{if(o!=null){var w=o.$$typeof;if(w===B){c.tag=11,c=qC(null,c,o,g,h);break e}else if(w===I){c.tag=14,c=GC(null,c,o,g,h);break e}}throw c=$(o)||o,Error(i(306,c,""))}}return c;case 0:return Dx(o,c,c.type,c.pendingProps,h);case 1:return g=c.type,w=Ol(g,c.pendingProps),QC(o,c,g,w,h);case 3:e:{if(ue(c,c.stateNode.containerInfo),o===null)throw Error(i(387));g=c.pendingProps;var T=c.memoizedState;w=T.element,lx(o,c),lf(c,g,null,h);var L=c.memoizedState;if(g=L.cache,ha(c,cn,g),g!==T.cache&&nx(c,[cn],h,!0),af(),g=L.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:L.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=ZC(o,c,g,h);break e}else if(g!==w){w=dr(Error(i(424)),c),ef(w),c=ZC(o,c,g,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Pt=gr(o.firstChild),$n=c,ct=!0,da=null,pr=!0,h=YN(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Al(),g===w){c=ho(o,c,h);break e}Gn(o,c,g,h)}c=c.child}return c;case 26:return gm(o,c),o===null?(h=p2(c.type,null,c.pendingProps,null))?c.memoizedState=h:ct||(h=c.type,o=c.pendingProps,g=Pm(Ne.current).createElement(h),g[on]=c,g[Nn]=o,Kn(g,h,o),an(g),c.stateNode=g):c.memoizedState=p2(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Re(c),o===null&&ct&&(g=c.stateNode=d2(c.type,c.pendingProps,Ne.current),$n=c,pr=!0,w=Pt,Na(c.type)?(_b=w,Pt=gr(g.firstChild)):Pt=w),Gn(o,c,c.pendingProps.children,h),gm(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&ct&&((w=g=Pt)&&(g=C8(g,c.type,c.pendingProps,pr),g!==null?(c.stateNode=g,$n=c,Pt=gr(g.firstChild),pr=!1,w=!0):w=!1),w||fa(c)),Re(c),w=c.type,T=c.pendingProps,L=o!==null?o.memoizedProps:null,g=T.children,gb(w,T)?g=null:L!==null&&gb(w,L)&&(c.flags|=32),c.memoizedState!==null&&(w=mx(o,c,H9,null,null,h),Af._currentValue=w),gm(o,c),Gn(o,c,g,h),c.child;case 6:return o===null&&ct&&((o=h=Pt)&&(h=A8(h,c.pendingProps,pr),h!==null?(c.stateNode=h,$n=c,Pt=null,o=!0):o=!1),o||fa(c)),null;case 13:return eA(o,c,h);case 4:return ue(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Ml(c,null,g,h):Gn(o,c,g,h),c.child;case 11:return qC(o,c,c.type,c.pendingProps,h);case 7:return Gn(o,c,c.pendingProps,h),c.child;case 8:return Gn(o,c,c.pendingProps.children,h),c.child;case 12:return Gn(o,c,c.pendingProps.children,h),c.child;case 10:return g=c.pendingProps,ha(c,c.type,g.value),Gn(o,c,g.children,h),c.child;case 9:return w=c.type._context,g=c.pendingProps.children,Il(c),w=qn(w),g=g(w),c.flags|=1,Gn(o,c,g,h),c.child;case 14:return GC(o,c,c.type,c.pendingProps,h);case 15:return KC(o,c,c.type,c.pendingProps,h);case 19:return nA(o,c,h);case 31:return X9(o,c,h);case 22:return YC(o,c,h,c.pendingProps);case 24:return Il(c),g=qn(cn),o===null?(w=sx(),w===null&&(w=Rt,T=ix(),w.pooledCache=T,T.refCount++,T!==null&&(w.pooledCacheLanes|=h),w=T),c.memoizedState={parent:g,cache:w},ax(c),ha(c,cn,w)):((o.lanes&h)!==0&&(lx(o,c),lf(c,null,null,h),af()),w=o.memoizedState,T=c.memoizedState,w.parent!==g?(w={parent:g,cache:g},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),ha(c,cn,g)):(g=T.cache,ha(c,cn,g),g!==w.cache&&nx(c,[cn],h,!0))),Gn(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function po(o){o.flags|=4}function Bx(o,c,h,g,w){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(w&335544128)===w)if(o.stateNode.complete)o.flags|=8192;else if(IA())o.flags|=8192;else throw Pl=tm,ox}else o.flags&=-16777217}function rA(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!x2(c))if(IA())o.flags|=8192;else throw Pl=tm,ox}function vm(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?Tp():536870912,o.lanes|=c,ou|=c)}function pf(o,c){if(!ct)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Mt(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&65011712,g|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function Q9(o,c,h){var g=c.pendingProps;switch(Jv(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(c),null;case 1:return Mt(c),null;case 3:return h=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),co(cn),re(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Kc(c)?po(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Zv())),Mt(c),null;case 26:var w=c.type,T=c.memoizedState;return o===null?(po(c),T!==null?(Mt(c),rA(c,T)):(Mt(c),Bx(c,w,null,g,h))):T?T!==o.memoizedState?(po(c),Mt(c),rA(c,T)):(Mt(c),c.flags&=-16777217):(o=o.memoizedProps,o!==g&&po(c),Mt(c),Bx(c,w,o,g,h)),null;case 27:if($e(c),h=Ne.current,w=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&po(c);else{if(!g){if(c.stateNode===null)throw Error(i(166));return Mt(c),null}o=Z.current,Kc(c)?LN(c):(o=d2(w,g,h),c.stateNode=o,po(c))}return Mt(c),null;case 5:if($e(c),w=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&po(c);else{if(!g){if(c.stateNode===null)throw Error(i(166));return Mt(c),null}if(T=Z.current,Kc(c))LN(c);else{var L=Pm(Ne.current);switch(T){case 1:T=L.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:T=L.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":T=L.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":T=L.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":T=L.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?L.createElement("select",{is:g.is}):L.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?L.createElement(w,{is:g.is}):L.createElement(w)}}T[on]=c,T[Nn]=g;e:for(L=c.child;L!==null;){if(L.tag===5||L.tag===6)T.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===c)break e;for(;L.sibling===null;){if(L.return===null||L.return===c)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}c.stateNode=T;e:switch(Kn(T,w,g),w){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&po(c)}}return Mt(c),Bx(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,h),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&po(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(i(166));if(o=Ne.current,Kc(c)){if(o=c.stateNode,h=c.memoizedProps,g=null,w=$n,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}o[on]=c,o=!!(o.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||e2(o.nodeValue,h)),o||fa(c,!0)}else o=Pm(o).createTextNode(g),o[on]=c,c.stateNode=o}return Mt(c),null;case 31:if(h=c.memoizedState,o===null||o.memoizedState!==null){if(g=Kc(c),h!==null){if(o===null){if(!g)throw Error(i(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[on]=c}else Al(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Mt(c),o=!1}else h=Zv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return c.flags&256?($i(c),c):($i(c),null);if((c.flags&128)!==0)throw Error(i(558))}return Mt(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=Kc(c),g!==null&&g.dehydrated!==null){if(o===null){if(!w)throw Error(i(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));w[on]=c}else Al(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Mt(c),w=!1}else w=Zv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?($i(c),c):($i(c),null)}return $i(c),(c.flags&128)!==0?(c.lanes=h,c):(h=g!==null,o=o!==null&&o.memoizedState!==null,h&&(g=c.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==w&&(g.flags|=2048)),h!==o&&h&&(c.child.flags|=8192),vm(c,c.updateQueue),Mt(c),null);case 4:return re(),o===null&&db(c.stateNode.containerInfo),Mt(c),null;case 10:return co(c.type),Mt(c),null;case 19:if(te(tn),g=c.memoizedState,g===null)return Mt(c),null;if(w=(c.flags&128)!==0,T=g.rendering,T===null)if(w)pf(g,!1);else{if(Yt!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(T=sm(o),T!==null){for(c.flags|=128,pf(g,!1),o=T.updateQueue,c.updateQueue=o,vm(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)jN(h,o),h=h.sibling;return ge(tn,tn.current&1|2),ct&&ao(c,g.treeForkCount),c.child}o=o.sibling}g.tail!==null&&mi()>Sm&&(c.flags|=128,w=!0,pf(g,!1),c.lanes=4194304)}else{if(!w)if(o=sm(T),o!==null){if(c.flags|=128,w=!0,o=o.updateQueue,c.updateQueue=o,vm(c,o),pf(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!ct)return Mt(c),null}else 2*mi()-g.renderingStartTime>Sm&&h!==536870912&&(c.flags|=128,w=!0,pf(g,!1),c.lanes=4194304);g.isBackwards?(T.sibling=c.child,c.child=T):(o=g.last,o!==null?o.sibling=T:c.child=T,g.last=T)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=mi(),o.sibling=null,h=tn.current,ge(tn,w?h&1|2:h&1),ct&&ao(c,g.treeForkCount),o):(Mt(c),null);case 22:case 23:return $i(c),fx(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(h&536870912)!==0&&(c.flags&128)===0&&(Mt(c),c.subtreeFlags&6&&(c.flags|=8192)):Mt(c),h=c.updateQueue,h!==null&&vm(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048),o!==null&&te(Rl),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),co(cn),Mt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function Z9(o,c){switch(Jv(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return co(cn),re(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return $e(c),null;case 31:if(c.memoizedState!==null){if($i(c),c.alternate===null)throw Error(i(340));Al()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if($i(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Al()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return te(tn),null;case 4:return re(),null;case 10:return co(c.type),null;case 22:case 23:return $i(c),fx(),o!==null&&te(Rl),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return co(cn),null;case 25:return null;default:return null}}function sA(o,c){switch(Jv(c),c.tag){case 3:co(cn),re();break;case 26:case 27:case 5:$e(c);break;case 4:re();break;case 31:c.memoizedState!==null&&$i(c);break;case 13:$i(c);break;case 19:te(tn);break;case 10:co(c.type);break;case 22:case 23:$i(c),fx(),o!==null&&te(Rl);break;case 24:co(cn)}}function mf(o,c){try{var h=c.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next;h=w;do{if((h.tag&o)===o){g=void 0;var T=h.create,L=h.inst;g=T(),L.destroy=g}h=h.next}while(h!==w)}}catch(q){Et(c,c.return,q)}}function xa(o,c,h){try{var g=c.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var T=w.next;g=T;do{if((g.tag&o)===o){var L=g.inst,q=L.destroy;if(q!==void 0){L.destroy=void 0,w=c;var J=h,ae=q;try{ae()}catch(me){Et(w,J,me)}}}g=g.next}while(g!==T)}}catch(me){Et(c,c.return,me)}}function oA(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{XN(c,h)}catch(g){Et(o,o.return,g)}}}function aA(o,c,h){h.props=Ol(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(g){Et(o,c,g)}}function gf(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof h=="function"?o.refCleanup=h(g):h.current=g}}catch(w){Et(o,c,w)}}function ks(o,c){var h=o.ref,g=o.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(w){Et(o,c,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){Et(o,c,w)}else h.current=null}function lA(o){var c=o.type,h=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(w){Et(o,o.return,w)}}function $x(o,c,h){try{var g=o.stateNode;_8(g,o.type,h,c),g[Nn]=c}catch(w){Et(o,o.return,w)}}function cA(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Na(o.type)||o.tag===4}function qx(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||cA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Na(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Gx(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Ur));else if(g!==4&&(g===27&&Na(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(Gx(o,c,h),o=o.sibling;o!==null;)Gx(o,c,h),o=o.sibling}function xm(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(g===27&&Na(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(xm(o,c,h),o=o.sibling;o!==null;)xm(o,c,h),o=o.sibling}function uA(o){var c=o.stateNode,h=o.memoizedProps;try{for(var g=o.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);Kn(c,g,h),c[on]=o,c[Nn]=h}catch(T){Et(o,o.return,T)}}var mo=!1,fn=!1,Kx=!1,dA=typeof WeakSet=="function"?WeakSet:Set,An=null;function e8(o,c){if(o=o.containerInfo,pb=Vm,o=SN(o),Vv(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var L=0,q=-1,J=-1,ae=0,me=0,xe=o,le=null;t:for(;;){for(var de;xe!==h||w!==0&&xe.nodeType!==3||(q=L+w),xe!==T||g!==0&&xe.nodeType!==3||(J=L+g),xe.nodeType===3&&(L+=xe.nodeValue.length),(de=xe.firstChild)!==null;)le=xe,xe=de;for(;;){if(xe===o)break t;if(le===h&&++ae===w&&(q=L),le===T&&++me===g&&(J=L),(de=xe.nextSibling)!==null)break;xe=le,le=xe.parentNode}xe=de}h=q===-1||J===-1?null:{start:q,end:J}}else h=null}h=h||{start:0,end:0}}else h=null;for(mb={focusedElem:o,selectionRange:h},Vm=!1,An=c;An!==null;)if(c=An,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,An=o;else for(;An!==null;){switch(c=An,T=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)w=o[h],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,h=c,w=T.memoizedProps,T=T.memoizedState,g=h.stateNode;try{var Pe=Ol(h.type,w);o=g.getSnapshotBeforeUpdate(Pe,T),g.__reactInternalSnapshotBeforeUpdate=o}catch(Fe){Et(h,h.return,Fe)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)vb(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":vb(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=c.sibling,o!==null){o.return=c.return,An=o;break}An=c.return}}function fA(o,c,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:yo(o,h),g&4&&mf(5,h);break;case 1:if(yo(o,h),g&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(L){Et(h,h.return,L)}else{var w=Ol(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(w,c,o.__reactInternalSnapshotBeforeUpdate)}catch(L){Et(h,h.return,L)}}g&64&&oA(h),g&512&&gf(h,h.return);break;case 3:if(yo(o,h),g&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{XN(o,c)}catch(L){Et(h,h.return,L)}}break;case 27:c===null&&g&4&&uA(h);case 26:case 5:yo(o,h),c===null&&g&4&&lA(h),g&512&&gf(h,h.return);break;case 12:yo(o,h);break;case 31:yo(o,h),g&4&&mA(o,h);break;case 13:yo(o,h),g&4&&gA(o,h),g&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=c8.bind(null,h),k8(o,h))));break;case 22:if(g=h.memoizedState!==null||mo,!g){c=c!==null&&c.memoizedState!==null||fn,w=mo;var T=fn;mo=g,(fn=c)&&!T?vo(o,h,(h.subtreeFlags&8772)!==0):yo(o,h),mo=w,fn=T}break;case 30:break;default:yo(o,h)}}function hA(o){var c=o.alternate;c!==null&&(o.alternate=null,hA(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Ic(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ut=null,Ci=!1;function go(o,c,h){for(h=h.child;h!==null;)pA(o,c,h),h=h.sibling}function pA(o,c,h){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Dr,h)}catch{}switch(h.tag){case 26:fn||ks(h,c),go(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||ks(h,c);var g=Ut,w=Ci;Na(h.type)&&(Ut=h.stateNode,Ci=!1),go(o,c,h),Ef(h.stateNode),Ut=g,Ci=w;break;case 5:fn||ks(h,c);case 6:if(g=Ut,w=Ci,Ut=null,go(o,c,h),Ut=g,Ci=w,Ut!==null)if(Ci)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(h.stateNode)}catch(T){Et(h,c,T)}else try{Ut.removeChild(h.stateNode)}catch(T){Et(h,c,T)}break;case 18:Ut!==null&&(Ci?(o=Ut,o2(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),pu(o)):o2(Ut,h.stateNode));break;case 4:g=Ut,w=Ci,Ut=h.stateNode.containerInfo,Ci=!0,go(o,c,h),Ut=g,Ci=w;break;case 0:case 11:case 14:case 15:xa(2,h,c),fn||xa(4,h,c),go(o,c,h);break;case 1:fn||(ks(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"&&aA(h,c,g)),go(o,c,h);break;case 21:go(o,c,h);break;case 22:fn=(g=fn)||h.memoizedState!==null,go(o,c,h),fn=g;break;default:go(o,c,h)}}function mA(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{pu(o)}catch(h){Et(c,c.return,h)}}}function gA(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{pu(o)}catch(h){Et(c,c.return,h)}}function t8(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new dA),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new dA),c;default:throw Error(i(435,o.tag))}}function bm(o,c){var h=t8(o);c.forEach(function(g){if(!h.has(g)){h.add(g);var w=u8.bind(null,o,g);g.then(w,w)}})}function Ai(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g],T=o,L=c,q=L;e:for(;q!==null;){switch(q.tag){case 27:if(Na(q.type)){Ut=q.stateNode,Ci=!1;break e}break;case 5:Ut=q.stateNode,Ci=!1;break e;case 3:case 4:Ut=q.stateNode.containerInfo,Ci=!0;break e}q=q.return}if(Ut===null)throw Error(i(160));pA(T,L,w),Ut=null,Ci=!1,T=w.alternate,T!==null&&(T.return=null),w.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)yA(c,o),c=c.sibling}var qr=null;function yA(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ai(c,o),ki(o),g&4&&(xa(3,o,o.return),mf(3,o),xa(5,o,o.return));break;case 1:Ai(c,o),ki(o),g&512&&(fn||h===null||ks(h,h.return)),g&64&&mo&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var w=qr;if(Ai(c,o),ki(o),g&512&&(fn||h===null||ks(h,h.return)),g&4){var T=h!==null?h.memoizedState:null;if(g=o.memoizedState,h===null)if(g===null)if(o.stateNode===null){e:{g=o.type,h=o.memoizedProps,w=w.ownerDocument||w;t:switch(g){case"title":T=w.getElementsByTagName("title")[0],(!T||T[ms]||T[on]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=w.createElement(g),w.head.insertBefore(T,w.querySelector("head > title"))),Kn(T,g,h),T[on]=o,an(T),g=T;break e;case"link":var L=y2("link","href",w).get(g+(h.href||""));if(L){for(var q=0;q<L.length;q++)if(T=L[q],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){L.splice(q,1);break t}}T=w.createElement(g),Kn(T,g,h),w.head.appendChild(T);break;case"meta":if(L=y2("meta","content",w).get(g+(h.content||""))){for(q=0;q<L.length;q++)if(T=L[q],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){L.splice(q,1);break t}}T=w.createElement(g),Kn(T,g,h),w.head.appendChild(T);break;default:throw Error(i(468,g))}T[on]=o,an(T),g=T}o.stateNode=g}else v2(w,o.type,o.stateNode);else o.stateNode=g2(w,g,o.memoizedProps);else T!==g?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,g===null?v2(w,o.type,o.stateNode):g2(w,g,o.memoizedProps)):g===null&&o.stateNode!==null&&$x(o,o.memoizedProps,h.memoizedProps)}break;case 27:Ai(c,o),ki(o),g&512&&(fn||h===null||ks(h,h.return)),h!==null&&g&4&&$x(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Ai(c,o),ki(o),g&512&&(fn||h===null||ks(h,h.return)),o.flags&32){w=o.stateNode;try{Ni(w,"")}catch(Pe){Et(o,o.return,Pe)}}g&4&&o.stateNode!=null&&(w=o.memoizedProps,$x(o,w,h!==null?h.memoizedProps:w)),g&1024&&(Kx=!0);break;case 6:if(Ai(c,o),ki(o),g&4){if(o.stateNode===null)throw Error(i(162));g=o.memoizedProps,h=o.stateNode;try{h.nodeValue=g}catch(Pe){Et(o,o.return,Pe)}}break;case 3:if(Om=null,w=qr,qr=Mm(c.containerInfo),Ai(c,o),qr=w,ki(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{pu(c.containerInfo)}catch(Pe){Et(o,o.return,Pe)}Kx&&(Kx=!1,vA(o));break;case 4:g=qr,qr=Mm(o.stateNode.containerInfo),Ai(c,o),ki(o),qr=g;break;case 12:Ai(c,o),ki(o);break;case 31:Ai(c,o),ki(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,bm(o,g)));break;case 13:Ai(c,o),ki(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(wm=mi()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,bm(o,g)));break;case 22:w=o.memoizedState!==null;var J=h!==null&&h.memoizedState!==null,ae=mo,me=fn;if(mo=ae||w,fn=me||J,Ai(c,o),fn=me,mo=ae,ki(o),g&8192)e:for(c=o.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(h===null||J||mo||fn||Ll(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){J=h=c;try{if(T=J.stateNode,w)L=T.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{q=J.stateNode;var xe=J.memoizedProps.style,le=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;q.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Pe){Et(J,J.return,Pe)}}}else if(c.tag===6){if(h===null){J=c;try{J.stateNode.nodeValue=w?"":J.memoizedProps}catch(Pe){Et(J,J.return,Pe)}}}else if(c.tag===18){if(h===null){J=c;try{var de=J.stateNode;w?a2(de,!0):a2(J.stateNode,!1)}catch(Pe){Et(J,J.return,Pe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,bm(o,h))));break;case 19:Ai(c,o),ki(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,bm(o,g)));break;case 30:break;case 21:break;default:Ai(c,o),ki(o)}}function ki(o){var c=o.flags;if(c&2){try{for(var h,g=o.return;g!==null;){if(cA(g)){h=g;break}g=g.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var w=h.stateNode,T=qx(o);xm(o,T,w);break;case 5:var L=h.stateNode;h.flags&32&&(Ni(L,""),h.flags&=-33);var q=qx(o);xm(o,q,L);break;case 3:case 4:var J=h.stateNode.containerInfo,ae=qx(o);Gx(o,ae,J);break;default:throw Error(i(161))}}catch(me){Et(o,o.return,me)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function vA(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;vA(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function yo(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)fA(o,c.alternate,c),c=c.sibling}function Ll(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:xa(4,c,c.return),Ll(c);break;case 1:ks(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&aA(c,c.return,h),Ll(c);break;case 27:Ef(c.stateNode);case 26:case 5:ks(c,c.return),Ll(c);break;case 22:c.memoizedState===null&&Ll(c);break;case 30:Ll(c);break;default:Ll(c)}o=o.sibling}}function vo(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,w=o,T=c,L=T.flags;switch(T.tag){case 0:case 11:case 15:vo(w,T,h),mf(4,T);break;case 1:if(vo(w,T,h),g=T,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ae){Et(g,g.return,ae)}if(g=T,w=g.updateQueue,w!==null){var q=g.stateNode;try{var J=w.shared.hiddenCallbacks;if(J!==null)for(w.shared.hiddenCallbacks=null,w=0;w<J.length;w++)WN(J[w],q)}catch(ae){Et(g,g.return,ae)}}h&&L&64&&oA(T),gf(T,T.return);break;case 27:uA(T);case 26:case 5:vo(w,T,h),h&&g===null&&L&4&&lA(T),gf(T,T.return);break;case 12:vo(w,T,h);break;case 31:vo(w,T,h),h&&L&4&&mA(w,T);break;case 13:vo(w,T,h),h&&L&4&&gA(w,T);break;case 22:T.memoizedState===null&&vo(w,T,h),gf(T,T.return);break;case 30:break;default:vo(w,T,h)}c=c.sibling}}function Yx(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&tf(h))}function Wx(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&tf(o))}function Gr(o,c,h,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)xA(o,c,h,g),c=c.sibling}function xA(o,c,h,g){var w=c.flags;switch(c.tag){case 0:case 11:case 15:Gr(o,c,h,g),w&2048&&mf(9,c);break;case 1:Gr(o,c,h,g);break;case 3:Gr(o,c,h,g),w&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&tf(o)));break;case 12:if(w&2048){Gr(o,c,h,g),o=c.stateNode;try{var T=c.memoizedProps,L=T.id,q=T.onPostCommit;typeof q=="function"&&q(L,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(J){Et(c,c.return,J)}}else Gr(o,c,h,g);break;case 31:Gr(o,c,h,g);break;case 13:Gr(o,c,h,g);break;case 23:break;case 22:T=c.stateNode,L=c.alternate,c.memoizedState!==null?T._visibility&2?Gr(o,c,h,g):yf(o,c):T._visibility&2?Gr(o,c,h,g):(T._visibility|=2,iu(o,c,h,g,(c.subtreeFlags&10256)!==0||!1)),w&2048&&Yx(L,c);break;case 24:Gr(o,c,h,g),w&2048&&Wx(c.alternate,c);break;default:Gr(o,c,h,g)}}function iu(o,c,h,g,w){for(w=w&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var T=o,L=c,q=h,J=g,ae=L.flags;switch(L.tag){case 0:case 11:case 15:iu(T,L,q,J,w),mf(8,L);break;case 23:break;case 22:var me=L.stateNode;L.memoizedState!==null?me._visibility&2?iu(T,L,q,J,w):yf(T,L):(me._visibility|=2,iu(T,L,q,J,w)),w&&ae&2048&&Yx(L.alternate,L);break;case 24:iu(T,L,q,J,w),w&&ae&2048&&Wx(L.alternate,L);break;default:iu(T,L,q,J,w)}c=c.sibling}}function yf(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,g=c,w=g.flags;switch(g.tag){case 22:yf(h,g),w&2048&&Yx(g.alternate,g);break;case 24:yf(h,g),w&2048&&Wx(g.alternate,g);break;default:yf(h,g)}c=c.sibling}}var vf=8192;function ru(o,c,h){if(o.subtreeFlags&vf)for(o=o.child;o!==null;)bA(o,c,h),o=o.sibling}function bA(o,c,h){switch(o.tag){case 26:ru(o,c,h),o.flags&vf&&o.memoizedState!==null&&F8(h,qr,o.memoizedState,o.memoizedProps);break;case 5:ru(o,c,h);break;case 3:case 4:var g=qr;qr=Mm(o.stateNode.containerInfo),ru(o,c,h),qr=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=vf,vf=16777216,ru(o,c,h),vf=g):ru(o,c,h));break;default:ru(o,c,h)}}function _A(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function xf(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];An=g,SA(g,o)}_A(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wA(o),o=o.sibling}function wA(o){switch(o.tag){case 0:case 11:case 15:xf(o),o.flags&2048&&xa(9,o,o.return);break;case 3:xf(o);break;case 12:xf(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,_m(o)):xf(o);break;default:xf(o)}}function _m(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];An=g,SA(g,o)}_A(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:xa(8,c,c.return),_m(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,_m(c));break;default:_m(c)}o=o.sibling}}function SA(o,c){for(;An!==null;){var h=An;switch(h.tag){case 0:case 11:case 15:xa(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:tf(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,An=g;else e:for(h=o;An!==null;){g=An;var w=g.sibling,T=g.return;if(hA(g),g===h){An=null;break e}if(w!==null){w.return=T,An=w;break e}An=T}}}var n8={getCacheForType:function(o){var c=qn(cn),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h},cacheSignal:function(){return qn(cn).controller.signal}},i8=typeof WeakMap=="function"?WeakMap:Map,vt=0,Rt=null,nt=null,rt=0,Tt=0,qi=null,ba=!1,su=!1,Xx=!1,xo=0,Yt=0,_a=0,zl=0,Jx=0,Gi=0,ou=0,bf=null,Ii=null,Qx=!1,wm=0,TA=0,Sm=1/0,Tm=null,wa=null,yn=0,Sa=null,au=null,bo=0,Zx=0,eb=null,EA=null,_f=0,tb=null;function Ki(){return(vt&2)!==0&&rt!==0?rt&-rt:W.T!==null?ab():Ep()}function NA(){if(Gi===0)if((rt&536870912)===0||ct){var o=dl;dl<<=1,(dl&3932160)===0&&(dl=262144),Gi=o}else Gi=536870912;return o=Bi.current,o!==null&&(o.flags|=32),Gi}function Ri(o,c,h){(o===Rt&&(Tt===2||Tt===9)||o.cancelPendingCommit!==null)&&(lu(o,0),Ta(o,rt,Gi,!1)),fl(o,h),((vt&2)===0||o!==Rt)&&(o===Rt&&((vt&2)===0&&(zl|=h),Yt===4&&Ta(o,rt,Gi,!1)),Is(o))}function CA(o,c,h){if((vt&6)!==0)throw Error(i(327));var g=!h&&(c&127)===0&&(c&o.expiredLanes)===0||Or(o,c),w=g?o8(o,c):ib(o,c,!0),T=g;do{if(w===0){su&&!g&&Ta(o,c,0,!1);break}else{if(h=o.current.alternate,T&&!r8(h)){w=ib(o,c,!1),T=!1;continue}if(w===2){if(T=c,o.errorRecoveryDisabledLanes&T)var L=0;else L=o.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){c=L;e:{var q=o;w=bf;var J=q.current.memoizedState.isDehydrated;if(J&&(lu(q,L).flags|=256),L=ib(q,L,!1),L!==2){if(Xx&&!J){q.errorRecoveryDisabledLanes|=T,zl|=T,w=4;break e}T=Ii,Ii=w,T!==null&&(Ii===null?Ii=T:Ii.push.apply(Ii,T))}w=L}if(T=!1,w!==2)continue}}if(w===1){lu(o,0),Ta(o,c,0,!0);break}e:{switch(g=o,T=w,T){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Ta(g,c,Gi,!ba);break e;case 2:Ii=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(w=wm+300-mi(),10<w)){if(Ta(g,c,Gi,!ba),fs(g,0,!0)!==0)break e;bo=c,g.timeoutHandle=r2(AA.bind(null,g,h,Ii,Tm,Qx,c,Gi,zl,ou,ba,T,"Throttled",-0,0),w);break e}AA(g,h,Ii,Tm,Qx,c,Gi,zl,ou,ba,T,null,-0,0)}}break}while(!0);Is(o)}function AA(o,c,h,g,w,T,L,q,J,ae,me,xe,le,de){if(o.timeoutHandle=-1,xe=c.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ur},bA(c,T,xe);var Pe=(T&62914560)===T?wm-mi():(T&4194048)===T?TA-mi():0;if(Pe=H8(xe,Pe),Pe!==null){bo=T,o.cancelPendingCommit=Pe(OA.bind(null,o,c,T,h,g,w,L,q,J,me,xe,null,le,de)),Ta(o,T,L,!ae);return}}OA(o,c,T,h,g,w,L,q,J)}function r8(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var w=h[g],T=w.getSnapshot;w=w.value;try{if(!Fi(T(),w))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ta(o,c,h,g){c&=~Jx,c&=~zl,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var w=c;0<w;){var T=31-Zt(w),L=1<<T;g[T]=-1,w&=~L}h!==0&&hl(o,h,c)}function Em(){return(vt&6)===0?(wf(0),!1):!0}function nb(){if(nt!==null){if(Tt===0)var o=nt.return;else o=nt,lo=kl=null,vx(o),Qc=null,rf=0,o=nt;for(;o!==null;)sA(o.alternate,o),o=o.return;nt=null}}function lu(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,T8(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),bo=0,nb(),Rt=o,nt=h=oo(o.current,null),rt=c,Tt=0,qi=null,ba=!1,su=Or(o,c),Xx=!1,ou=Gi=Jx=zl=_a=Yt=0,Ii=bf=null,Qx=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var w=31-Zt(g),T=1<<w;c|=o[w],g&=~T}return xo=c,Gp(),h}function kA(o,c){et=null,W.H=ff,c===Jc||c===em?(c=qN(),Tt=3):c===ox?(c=qN(),Tt=4):Tt=c===Mx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,qi=c,nt===null&&(Yt=1,pm(o,dr(c,o.current)))}function IA(){var o=Bi.current;return o===null?!0:(rt&4194048)===rt?mr===null:(rt&62914560)===rt||(rt&536870912)!==0?o===mr:!1}function RA(){var o=W.H;return W.H=ff,o===null?ff:o}function jA(){var o=W.A;return W.A=n8,o}function Nm(){Yt=4,ba||(rt&4194048)!==rt&&Bi.current!==null||(su=!0),(_a&134217727)===0&&(zl&134217727)===0||Rt===null||Ta(Rt,rt,Gi,!1)}function ib(o,c,h){var g=vt;vt|=2;var w=RA(),T=jA();(Rt!==o||rt!==c)&&(Tm=null,lu(o,c)),c=!1;var L=Yt;e:do try{if(Tt!==0&&nt!==null){var q=nt,J=qi;switch(Tt){case 8:nb(),L=6;break e;case 3:case 2:case 9:case 6:Bi.current===null&&(c=!0);var ae=Tt;if(Tt=0,qi=null,cu(o,q,J,ae),h&&su){L=0;break e}break;default:ae=Tt,Tt=0,qi=null,cu(o,q,J,ae)}}s8(),L=Yt;break}catch(me){kA(o,me)}while(!0);return c&&o.shellSuspendCounter++,lo=kl=null,vt=g,W.H=w,W.A=T,nt===null&&(Rt=null,rt=0,Gp()),L}function s8(){for(;nt!==null;)PA(nt)}function o8(o,c){var h=vt;vt|=2;var g=RA(),w=jA();Rt!==o||rt!==c?(Tm=null,Sm=mi()+500,lu(o,c)):su=Or(o,c);e:do try{if(Tt!==0&&nt!==null){c=nt;var T=qi;t:switch(Tt){case 1:Tt=0,qi=null,cu(o,c,T,1);break;case 2:case 9:if(BN(T)){Tt=0,qi=null,MA(c);break}c=function(){Tt!==2&&Tt!==9||Rt!==o||(Tt=7),Is(o)},T.then(c,c);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:BN(T)?(Tt=0,qi=null,MA(c)):(Tt=0,qi=null,cu(o,c,T,7));break;case 5:var L=null;switch(nt.tag){case 26:L=nt.memoizedState;case 5:case 27:var q=nt;if(L?x2(L):q.stateNode.complete){Tt=0,qi=null;var J=q.sibling;if(J!==null)nt=J;else{var ae=q.return;ae!==null?(nt=ae,Cm(ae)):nt=null}break t}}Tt=0,qi=null,cu(o,c,T,5);break;case 6:Tt=0,qi=null,cu(o,c,T,6);break;case 8:nb(),Yt=6;break e;default:throw Error(i(462))}}a8();break}catch(me){kA(o,me)}while(!0);return lo=kl=null,W.H=g,W.A=w,vt=h,nt!==null?0:(Rt=null,rt=0,Gp(),Yt)}function a8(){for(;nt!==null&&!Pv();)PA(nt)}function PA(o){var c=iA(o.alternate,o,xo);o.memoizedProps=o.pendingProps,c===null?Cm(o):nt=c}function MA(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=JC(h,c,c.pendingProps,c.type,void 0,rt);break;case 11:c=JC(h,c,c.pendingProps,c.type.render,c.ref,rt);break;case 5:vx(c);default:sA(h,c),c=nt=jN(c,xo),c=iA(h,c,xo)}o.memoizedProps=o.pendingProps,c===null?Cm(o):nt=c}function cu(o,c,h,g){lo=kl=null,vx(c),Qc=null,rf=0;var w=c.return;try{if(W9(o,w,c,h,rt)){Yt=1,pm(o,dr(h,o.current)),nt=null;return}}catch(T){if(w!==null)throw nt=w,T;Yt=1,pm(o,dr(h,o.current)),nt=null;return}c.flags&32768?(ct||g===1?o=!0:su||(rt&536870912)!==0?o=!1:(ba=o=!0,(g===2||g===9||g===3||g===6)&&(g=Bi.current,g!==null&&g.tag===13&&(g.flags|=16384))),DA(c,o)):Cm(c)}function Cm(o){var c=o;do{if((c.flags&32768)!==0){DA(c,ba);return}o=c.return;var h=Q9(c.alternate,c,xo);if(h!==null){nt=h;return}if(c=c.sibling,c!==null){nt=c;return}nt=c=o}while(c!==null);Yt===0&&(Yt=5)}function DA(o,c){do{var h=Z9(o.alternate,o);if(h!==null){h.flags&=32767,nt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){nt=o;return}nt=o=h}while(o!==null);Yt=6,nt=null}function OA(o,c,h,g,w,T,L,q,J){o.cancelPendingCommit=null;do Am();while(yn!==0);if((vt&6)!==0)throw Error(i(327));if(c!==null){if(c===o.current)throw Error(i(177));if(T=c.lanes|c.childLanes,T|=qv,Ov(o,h,T,L,q,J),o===Rt&&(nt=Rt=null,rt=0),au=c,Sa=o,bo=h,Zx=T,eb=w,EA=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,d8(ea,function(){return FA(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=W.T,W.T=null,w=X.p,X.p=2,L=vt,vt|=4;try{e8(o,c,h)}finally{vt=L,X.p=w,W.T=g}}yn=1,LA(),zA(),UA()}}function LA(){if(yn===1){yn=0;var o=Sa,c=au,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var g=X.p;X.p=2;var w=vt;vt|=4;try{yA(c,o);var T=mb,L=SN(o.containerInfo),q=T.focusedElem,J=T.selectionRange;if(L!==q&&q&&q.ownerDocument&&wN(q.ownerDocument.documentElement,q)){if(J!==null&&Vv(q)){var ae=J.start,me=J.end;if(me===void 0&&(me=ae),"selectionStart"in q)q.selectionStart=ae,q.selectionEnd=Math.min(me,q.value.length);else{var xe=q.ownerDocument||document,le=xe&&xe.defaultView||window;if(le.getSelection){var de=le.getSelection(),Pe=q.textContent.length,Fe=Math.min(J.start,Pe),It=J.end===void 0?Fe:Math.min(J.end,Pe);!de.extend&&Fe>It&&(L=It,It=Fe,Fe=L);var ne=_N(q,Fe),Q=_N(q,It);if(ne&&Q&&(de.rangeCount!==1||de.anchorNode!==ne.node||de.anchorOffset!==ne.offset||de.focusNode!==Q.node||de.focusOffset!==Q.offset)){var se=xe.createRange();se.setStart(ne.node,ne.offset),de.removeAllRanges(),Fe>It?(de.addRange(se),de.extend(Q.node,Q.offset)):(se.setEnd(Q.node,Q.offset),de.addRange(se))}}}}for(xe=[],de=q;de=de.parentNode;)de.nodeType===1&&xe.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<xe.length;q++){var ye=xe[q];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Vm=!!pb,mb=pb=null}finally{vt=w,X.p=g,W.T=h}}o.current=c,yn=2}}function zA(){if(yn===2){yn=0;var o=Sa,c=au,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var g=X.p;X.p=2;var w=vt;vt|=4;try{fA(o,c.alternate,c)}finally{vt=w,X.p=g,W.T=h}}yn=3}}function UA(){if(yn===4||yn===3){yn=0,vp();var o=Sa,c=au,h=bo,g=EA;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?yn=5:(yn=0,au=Sa=null,VA(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(wa=null),no(h),c=c.stateNode,Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Dr,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=W.T,w=X.p,X.p=2,W.T=null;try{for(var T=o.onRecoverableError,L=0;L<g.length;L++){var q=g[L];T(q.value,{componentStack:q.stack})}}finally{W.T=c,X.p=w}}(bo&3)!==0&&Am(),Is(o),w=o.pendingLanes,(h&261930)!==0&&(w&42)!==0?o===tb?_f++:(_f=0,tb=o):_f=0,wf(0)}}function VA(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,tf(c)))}function Am(){return LA(),zA(),UA(),FA()}function FA(){if(yn!==5)return!1;var o=Sa,c=Zx;Zx=0;var h=no(bo),g=W.T,w=X.p;try{X.p=32>h?32:h,W.T=null,h=eb,eb=null;var T=Sa,L=bo;if(yn=0,au=Sa=null,bo=0,(vt&6)!==0)throw Error(i(331));var q=vt;if(vt|=4,wA(T.current),xA(T,T.current,L,h),vt=q,wf(0,!1),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Dr,T)}catch{}return!0}finally{X.p=w,W.T=g,VA(o,c)}}function HA(o,c,h){c=dr(h,c),c=Px(o.stateNode,c,2),o=ga(o,c,2),o!==null&&(fl(o,2),Is(o))}function Et(o,c,h){if(o.tag===3)HA(o,o,h);else for(;c!==null;){if(c.tag===3){HA(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(wa===null||!wa.has(g))){o=dr(h,o),h=BC(2),g=ga(c,h,2),g!==null&&($C(h,g,c,o),fl(g,2),Is(g));break}}c=c.return}}function rb(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new i8;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(Xx=!0,w.add(h),o=l8.bind(null,o,c,h),c.then(o,o))}function l8(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Rt===o&&(rt&h)===h&&(Yt===4||Yt===3&&(rt&62914560)===rt&&300>mi()-wm?(vt&2)===0&&lu(o,0):Jx|=h,ou===rt&&(ou=0)),Is(o)}function BA(o,c){c===0&&(c=Tp()),o=Nl(o,c),o!==null&&(fl(o,c),Is(o))}function c8(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),BA(o,h)}function u8(o,c){var h=0;switch(o.tag){case 31:case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(c),BA(o,h)}function d8(o,c){return gn(o,c)}var km=null,uu=null,sb=!1,Im=!1,ob=!1,Ea=0;function Is(o){o!==uu&&o.next===null&&(uu===null?km=uu=o:uu=uu.next=o),Im=!0,sb||(sb=!0,h8())}function wf(o,c){if(!ob&&Im){ob=!0;do for(var h=!1,g=km;g!==null;){if(o!==0){var w=g.pendingLanes;if(w===0)var T=0;else{var L=g.suspendedLanes,q=g.pingedLanes;T=(1<<31-Zt(42|o)+1)-1,T&=w&~(L&~q),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,KA(g,T))}else T=rt,T=fs(g,g===Rt?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Or(g,T)||(h=!0,KA(g,T));g=g.next}while(h);ob=!1}}function f8(){$A()}function $A(){Im=sb=!1;var o=0;Ea!==0&&S8()&&(o=Ea);for(var c=mi(),h=null,g=km;g!==null;){var w=g.next,T=qA(g,c);T===0?(g.next=null,h===null?km=w:h.next=w,w===null&&(uu=h)):(h=g,(o!==0||(T&3)!==0)&&(Im=!0)),g=w}yn!==0&&yn!==5||wf(o),Ea!==0&&(Ea=0)}function qA(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var L=31-Zt(T),q=1<<L,J=w[L];J===-1?((q&h)===0||(q&g)!==0)&&(w[L]=Dv(q,c)):J<=c&&(o.expiredLanes|=q),T&=~q}if(c=Rt,h=rt,h=fs(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,h===0||o===c&&(Tt===2||Tt===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Zo(g),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Or(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(g!==null&&Zo(g),no(h)){case 2:case 8:h=Rd;break;case 32:h=ea;break;case 268435456:h=xp;break;default:h=ea}return g=GA.bind(null,o),h=gn(h,g),o.callbackPriority=c,o.callbackNode=h,c}return g!==null&&g!==null&&Zo(g),o.callbackPriority=2,o.callbackNode=null,2}function GA(o,c){if(yn!==0&&yn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Am()&&o.callbackNode!==h)return null;var g=rt;return g=fs(o,o===Rt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(CA(o,g,c),qA(o,mi()),o.callbackNode!=null&&o.callbackNode===h?GA.bind(null,o):null)}function KA(o,c){if(Am())return null;CA(o,c,!0)}function h8(){E8(function(){(vt&6)!==0?gn(Id,f8):$A()})}function ab(){if(Ea===0){var o=Wc;o===0&&(o=us,us<<=1,(us&261888)===0&&(us=256)),Ea=o}return Ea}function YA(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Mc(""+o)}function WA(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function p8(o,c,h,g,w){if(c==="submit"&&h&&h.stateNode===w){var T=YA((w[Nn]||null).action),L=g.submitter;L&&(c=(c=L[Nn]||null)?YA(c.formAction):L.getAttribute("formAction"),c!==null&&(T=c,L=null));var q=new Ss("action","action",null,g,w);o.push({event:q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Ea!==0){var J=L?WA(w,L):new FormData(w);Cx(h,{pending:!0,data:J,method:w.method,action:T},null,J)}}else typeof T=="function"&&(q.preventDefault(),J=L?WA(w,L):new FormData(w),Cx(h,{pending:!0,data:J,method:w.method,action:T},T,J))},currentTarget:w}]})}}for(var lb=0;lb<$v.length;lb++){var cb=$v[lb],m8=cb.toLowerCase(),g8=cb[0].toUpperCase()+cb.slice(1);$r(m8,"on"+g8)}$r(NN,"onAnimationEnd"),$r(CN,"onAnimationIteration"),$r(AN,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(j9,"onTransitionRun"),$r(P9,"onTransitionStart"),$r(M9,"onTransitionCancel"),$r(kN,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sf));function XA(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],w=g.event;g=g.listeners;e:{var T=void 0;if(c)for(var L=g.length-1;0<=L;L--){var q=g[L],J=q.instance,ae=q.currentTarget;if(q=q.listener,J!==T&&w.isPropagationStopped())break e;T=q,w.currentTarget=ae;try{T(w)}catch(me){qp(me)}w.currentTarget=null,T=J}else for(L=0;L<g.length;L++){if(q=g[L],J=q.instance,ae=q.currentTarget,q=q.listener,J!==T&&w.isPropagationStopped())break e;T=q,w.currentTarget=ae;try{T(w)}catch(me){qp(me)}w.currentTarget=null,T=J}}}}function it(o,c){var h=c[kc];h===void 0&&(h=c[kc]=new Set);var g=o+"__bubble";h.has(g)||(JA(c,o,2,!1),h.add(g))}function ub(o,c,h){var g=0;c&&(g|=4),JA(h,o,g,c)}var Rm="_reactListening"+Math.random().toString(36).slice(2);function db(o){if(!o[Rm]){o[Rm]=!0,Md.forEach(function(h){h!=="selectionchange"&&(y8.has(h)||ub(h,!1,o),ub(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Rm]||(c[Rm]=!0,ub("selectionchange",!1,c))}}function JA(o,c,h,g){switch(N2(c)){case 2:var w=q8;break;case 8:w=G8;break;default:w=Nb}h=w.bind(null,c,h,o),w=void 0,!vl||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function fb(o,c,h,g,w){var T=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var L=g.tag;if(L===3||L===4){var q=g.stateNode.containerInfo;if(q===w)break;if(L===4)for(L=g.return;L!==null;){var J=L.tag;if((J===3||J===4)&&L.stateNode.containerInfo===w)return;L=L.return}for(;q!==null;){if(L=gs(q),L===null)return;if(J=L.tag,J===5||J===6||J===26||J===27){g=T=L;continue e}q=q.parentNode}}g=g.return}oa(function(){var ae=T,me=ar(h),xe=[];e:{var le=IN.get(o);if(le!==void 0){var de=Ss,Pe=o;switch(o){case"keypress":if(bl(h)===0)break e;case"keydown":case"keyup":de=Hp;break;case"focusin":Pe="focus",de=wl;break;case"focusout":Pe="blur",de=wl;break;case"beforeblur":case"afterblur":de=wl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Pp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=k;break;case NN:case CN:case AN:de=Dp;break;case kN:de=G;break;case"scroll":case"scrollend":de=Gd;break;case"wheel":de=ce;break;case"copy":case"cut":case"paste":de=Op;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=so;break;case"toggle":case"beforetoggle":de=Ze}var Fe=(c&4)!==0,It=!Fe&&(o==="scroll"||o==="scrollend"),ne=Fe?le!==null?le+"Capture":null:le;Fe=[];for(var Q=ae,se;Q!==null;){var ye=Q;if(se=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||se===null||ne===null||(ye=Vr(Q,ne),ye!=null&&Fe.push(Tf(Q,ye,se))),It)break;Q=Q.return}0<Fe.length&&(le=new de(le,Pe,null,h,me),xe.push({event:le,listeners:Fe}))}}if((c&7)===0){e:{if(le=o==="mouseover"||o==="pointerover",de=o==="mouseout"||o==="pointerout",le&&h!==Bd&&(Pe=h.relatedTarget||h.fromElement)&&(gs(Pe)||Pe[ps]))break e;if((de||le)&&(le=me.window===me?me:(le=me.ownerDocument)?le.defaultView||le.parentWindow:window,de?(Pe=h.relatedTarget||h.toElement,de=ae,Pe=Pe?gs(Pe):null,Pe!==null&&(It=s(Pe),Fe=Pe.tag,Pe!==It||Fe!==5&&Fe!==27&&Fe!==6)&&(Pe=null)):(de=null,Pe=ae),de!==Pe)){if(Fe=Kd,ye="onMouseLeave",ne="onMouseEnter",Q="mouse",(o==="pointerout"||o==="pointerover")&&(Fe=so,ye="onPointerLeave",ne="onPointerEnter",Q="pointer"),It=de==null?le:Ui(de),se=Pe==null?le:Ui(Pe),le=new Fe(ye,Q+"leave",de,h,me),le.target=It,le.relatedTarget=se,ye=null,gs(me)===ae&&(Fe=new Fe(ne,Q+"enter",Pe,h,me),Fe.target=se,Fe.relatedTarget=It,ye=Fe),It=ye,de&&Pe)t:{for(Fe=v8,ne=de,Q=Pe,se=0,ye=ne;ye;ye=Fe(ye))se++;ye=0;for(var Le=Q;Le;Le=Fe(Le))ye++;for(;0<se-ye;)ne=Fe(ne),se--;for(;0<ye-se;)Q=Fe(Q),ye--;for(;se--;){if(ne===Q||Q!==null&&ne===Q.alternate){Fe=ne;break t}ne=Fe(ne),Q=Fe(Q)}Fe=null}else Fe=null;de!==null&&QA(xe,le,de,Fe,!1),Pe!==null&&It!==null&&QA(xe,It,Pe,Fe,!0)}}e:{if(le=ae?Ui(ae):window,de=le.nodeName&&le.nodeName.toLowerCase(),de==="select"||de==="input"&&le.type==="file")var ft=mN;else if(hN(le))if(gN)ft=k9;else{ft=C9;var Me=N9}else de=le.nodeName,!de||de.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ae&&Pc(ae.elementType)&&(ft=mN):ft=A9;if(ft&&(ft=ft(o,ae))){pN(xe,ft,h,me);break e}Me&&Me(o,le,ae),o==="focusout"&&ae&&le.type==="number"&&ae.memoizedProps.value!=null&&Vd(le,"number",le.value)}switch(Me=ae?Ui(ae):window,o){case"focusin":(hN(Me)||Me.contentEditable==="true")&&(Fc=Me,Fv=ae,Qd=null);break;case"focusout":Qd=Fv=Fc=null;break;case"mousedown":Hv=!0;break;case"contextmenu":case"mouseup":case"dragend":Hv=!1,TN(xe,h,me);break;case"selectionchange":if(R9)break;case"keydown":case"keyup":TN(xe,h,me)}var tt;if(yt)e:{switch(o){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Vc?Sl(o,h)&&(st="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(st="onCompositionStart");st&&(Ns&&h.locale!=="ko"&&(Vc||st!=="onCompositionStart"?st==="onCompositionEnd"&&Vc&&(tt=qd()):(ws=me,$d="value"in ws?ws.value:ws.textContent,Vc=!0)),Me=jm(ae,st),0<Me.length&&(st=new Es(st,o,null,h,me),xe.push({event:st,listeners:Me}),tt?st.data=tt:(tt=Uc(h),tt!==null&&(st.data=tt)))),(tt=cr?w9(o,h):S9(o,h))&&(st=jm(ae,"onBeforeInput"),0<st.length&&(Me=new Es("onBeforeInput","beforeinput",null,h,me),xe.push({event:Me,listeners:st}),Me.data=tt)),p8(xe,o,ae,h,me)}XA(xe,c)})}function Tf(o,c,h){return{instance:o,listener:c,currentTarget:h}}function jm(o,c){for(var h=c+"Capture",g=[];o!==null;){var w=o,T=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||T===null||(w=Vr(o,h),w!=null&&g.unshift(Tf(o,w,T)),w=Vr(o,c),w!=null&&g.push(Tf(o,w,T))),o.tag===3)return g;o=o.return}return[]}function v8(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function QA(o,c,h,g,w){for(var T=c._reactName,L=[];h!==null&&h!==g;){var q=h,J=q.alternate,ae=q.stateNode;if(q=q.tag,J!==null&&J===g)break;q!==5&&q!==26&&q!==27||ae===null||(J=ae,w?(ae=Vr(h,T),ae!=null&&L.unshift(Tf(h,ae,J))):w||(ae=Vr(h,T),ae!=null&&L.push(Tf(h,ae,J)))),h=h.return}L.length!==0&&o.push({event:c,listeners:L})}var x8=/\r\n?/g,b8=/\u0000|\uFFFD/g;function ZA(o){return(typeof o=="string"?o:""+o).replace(x8,`
`).replace(b8,"")}function e2(o,c){return c=ZA(c),ZA(o)===c}function kt(o,c,h,g,w,T){switch(h){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||Ni(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&Ni(o,""+g);break;case"className":Vi(o,"class",g);break;case"tabIndex":Vi(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(o,h,g);break;case"style":Hd(o,g,T);break;case"data":if(c!=="object"){Vi(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=Mc(""+g),o.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(c!=="input"&&kt(o,c,"name",w.name,w,null),kt(o,c,"formEncType",w.formEncType,w,null),kt(o,c,"formMethod",w.formMethod,w,null),kt(o,c,"formTarget",w.formTarget,w,null)):(kt(o,c,"encType",w.encType,w,null),kt(o,c,"method",w.method,w,null),kt(o,c,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=Mc(""+g),o.setAttribute(h,g);break;case"onClick":g!=null&&(o.onclick=Ur);break;case"onScroll":g!=null&&it("scroll",o);break;case"onScrollEnd":g!=null&&it("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(h=g.__html,h!=null){if(w.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}h=Mc(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""+g):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":g===!0?o.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,g):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(h,g):o.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(h):o.setAttribute(h,g);break;case"popover":it("beforetoggle",o),it("toggle",o),Rc(o,"popover",g);break;case"xlinkActuate":ln(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ln(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ln(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ln(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ln(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ln(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ln(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ln(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ln(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Rc(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=jp.get(h)||h,Rc(o,h,g))}}function hb(o,c,h,g,w,T){switch(h){case"style":Hd(o,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(h=g.__html,h!=null){if(w.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof g=="string"?Ni(o,g):(typeof g=="number"||typeof g=="bigint")&&Ni(o,""+g);break;case"onScroll":g!=null&&it("scroll",o);break;case"onScrollEnd":g!=null&&it("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dd.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),c=h.slice(2,w?h.length-7:void 0),T=o[Nn]||null,T=T!=null?T[h]:null,typeof T=="function"&&o.removeEventListener(c,T,w),typeof g=="function")){typeof T!="function"&&T!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,g,w);break e}h in o?o[h]=g:g===!0?o.setAttribute(h,""):Rc(o,h,g)}}}function Kn(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",o),it("load",o);var g=!1,w=!1,T;for(T in h)if(h.hasOwnProperty(T)){var L=h[T];if(L!=null)switch(T){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:kt(o,c,T,L,h,null)}}w&&kt(o,c,"srcSet",h.srcSet,h,null),g&&kt(o,c,"src",h.src,h,null);return;case"input":it("invalid",o);var q=T=L=w=null,J=null,ae=null;for(g in h)if(h.hasOwnProperty(g)){var me=h[g];if(me!=null)switch(g){case"name":w=me;break;case"type":L=me;break;case"checked":J=me;break;case"defaultChecked":ae=me;break;case"value":T=me;break;case"defaultValue":q=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,c));break;default:kt(o,c,g,me,h,null)}}kp(o,T,q,J,ae,L,w,!1);return;case"select":it("invalid",o),g=L=T=null;for(w in h)if(h.hasOwnProperty(w)&&(q=h[w],q!=null))switch(w){case"value":T=q;break;case"defaultValue":L=q;break;case"multiple":g=q;default:kt(o,c,w,q,h,null)}c=T,h=L,o.multiple=!!g,c!=null?na(o,!!g,c,!1):h!=null&&na(o,!!g,h,!0);return;case"textarea":it("invalid",o),T=w=g=null;for(L in h)if(h.hasOwnProperty(L)&&(q=h[L],q!=null))switch(L){case"value":g=q;break;case"defaultValue":w=q;break;case"children":T=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:kt(o,c,L,q,h,null)}ia(o,g,w,T);return;case"option":for(J in h)if(h.hasOwnProperty(J)&&(g=h[J],g!=null))switch(J){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:kt(o,c,J,g,h,null)}return;case"dialog":it("beforetoggle",o),it("toggle",o),it("cancel",o),it("close",o);break;case"iframe":case"object":it("load",o);break;case"video":case"audio":for(g=0;g<Sf.length;g++)it(Sf[g],o);break;case"image":it("error",o),it("load",o);break;case"details":it("toggle",o);break;case"embed":case"source":case"link":it("error",o),it("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in h)if(h.hasOwnProperty(ae)&&(g=h[ae],g!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:kt(o,c,ae,g,h,null)}return;default:if(Pc(c)){for(me in h)h.hasOwnProperty(me)&&(g=h[me],g!==void 0&&hb(o,c,me,g,h,void 0));return}}for(q in h)h.hasOwnProperty(q)&&(g=h[q],g!=null&&kt(o,c,q,g,h,null))}function _8(o,c,h,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,T=null,L=null,q=null,J=null,ae=null,me=null;for(de in h){var xe=h[de];if(h.hasOwnProperty(de)&&xe!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":J=xe;default:g.hasOwnProperty(de)||kt(o,c,de,null,g,xe)}}for(var le in g){var de=g[le];if(xe=h[le],g.hasOwnProperty(le)&&(de!=null||xe!=null))switch(le){case"type":T=de;break;case"name":w=de;break;case"checked":ae=de;break;case"defaultChecked":me=de;break;case"value":L=de;break;case"defaultValue":q=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,c));break;default:de!==xe&&kt(o,c,le,de,g,xe)}}jc(o,L,q,J,ae,me,T,w);return;case"select":de=L=q=le=null;for(T in h)if(J=h[T],h.hasOwnProperty(T)&&J!=null)switch(T){case"value":break;case"multiple":de=J;default:g.hasOwnProperty(T)||kt(o,c,T,null,g,J)}for(w in g)if(T=g[w],J=h[w],g.hasOwnProperty(w)&&(T!=null||J!=null))switch(w){case"value":le=T;break;case"defaultValue":q=T;break;case"multiple":L=T;default:T!==J&&kt(o,c,w,T,g,J)}c=q,h=L,g=de,le!=null?na(o,!!h,le,!1):!!g!=!!h&&(c!=null?na(o,!!h,c,!0):na(o,!!h,h?[]:"",!1));return;case"textarea":de=le=null;for(q in h)if(w=h[q],h.hasOwnProperty(q)&&w!=null&&!g.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:kt(o,c,q,null,g,w)}for(L in g)if(w=g[L],T=h[L],g.hasOwnProperty(L)&&(w!=null||T!=null))switch(L){case"value":le=w;break;case"defaultValue":de=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:w!==T&&kt(o,c,L,w,g,T)}Ip(o,le,de);return;case"option":for(var Pe in h)if(le=h[Pe],h.hasOwnProperty(Pe)&&le!=null&&!g.hasOwnProperty(Pe))switch(Pe){case"selected":o.selected=!1;break;default:kt(o,c,Pe,null,g,le)}for(J in g)if(le=g[J],de=h[J],g.hasOwnProperty(J)&&le!==de&&(le!=null||de!=null))switch(J){case"selected":o.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:kt(o,c,J,le,g,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in h)le=h[Fe],h.hasOwnProperty(Fe)&&le!=null&&!g.hasOwnProperty(Fe)&&kt(o,c,Fe,null,g,le);for(ae in g)if(le=g[ae],de=h[ae],g.hasOwnProperty(ae)&&le!==de&&(le!=null||de!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,c));break;default:kt(o,c,ae,le,g,de)}return;default:if(Pc(c)){for(var It in h)le=h[It],h.hasOwnProperty(It)&&le!==void 0&&!g.hasOwnProperty(It)&&hb(o,c,It,void 0,g,le);for(me in g)le=g[me],de=h[me],!g.hasOwnProperty(me)||le===de||le===void 0&&de===void 0||hb(o,c,me,le,g,de);return}}for(var ne in h)le=h[ne],h.hasOwnProperty(ne)&&le!=null&&!g.hasOwnProperty(ne)&&kt(o,c,ne,null,g,le);for(xe in g)le=g[xe],de=h[xe],!g.hasOwnProperty(xe)||le===de||le==null&&de==null||kt(o,c,xe,le,g,de)}function t2(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w8(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var w=h[g],T=w.transferSize,L=w.initiatorType,q=w.duration;if(T&&q&&t2(L)){for(L=0,q=w.responseEnd,g+=1;g<h.length;g++){var J=h[g],ae=J.startTime;if(ae>q)break;var me=J.transferSize,xe=J.initiatorType;me&&t2(xe)&&(J=J.responseEnd,L+=me*(J<q?1:(q-ae)/(J-ae)))}if(--g,c+=8*(T+L)/(w.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var pb=null,mb=null;function Pm(o){return o.nodeType===9?o:o.ownerDocument}function n2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i2(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function gb(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var yb=null;function S8(){var o=window.event;return o&&o.type==="popstate"?o===yb?!1:(yb=o,!0):(yb=null,!1)}var r2=typeof setTimeout=="function"?setTimeout:void 0,T8=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,E8=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(o){return s2.resolve(null).then(o).catch(N8)}:r2;function N8(o){setTimeout(function(){throw o})}function Na(o){return o==="head"}function o2(o,c){var h=c,g=0;do{var w=h.nextSibling;if(o.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"||h==="/&"){if(g===0){o.removeChild(w),pu(c);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")Ef(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Ef(h);for(var T=h.firstChild;T;){var L=T.nextSibling,q=T.nodeName;T[ms]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=L}}else h==="body"&&Ef(o.ownerDocument.body);h=w}while(h);pu(c)}function a2(o,c){var h=o;o=0;do{var g=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=g}while(h)}function vb(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":vb(h),Ic(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function C8(o,c,h,g){for(;o.nodeType===1;){var w=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[ms])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var T=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=gr(o.nextSibling),o===null)break}return null}function A8(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=gr(o.nextSibling),o===null))return null;return o}function l2(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=gr(o.nextSibling),o===null))return null;return o}function xb(o){return o.data==="$?"||o.data==="$~"}function bb(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function k8(o,c){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||h.readyState!=="loading")c();else{var g=function(){c(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function gr(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var _b=null;function c2(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(c===0)return gr(o.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}o=o.nextSibling}return null}function u2(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return o;c--}else h!=="/$"&&h!=="/&"||c++}o=o.previousSibling}return null}function d2(o,c,h){switch(c=Pm(h),o){case"html":if(o=c.documentElement,!o)throw Error(i(452));return o;case"head":if(o=c.head,!o)throw Error(i(453));return o;case"body":if(o=c.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Ef(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Ic(o)}var yr=new Map,f2=new Set;function Mm(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var _o=X.d;X.d={f:I8,r:R8,D:j8,C:P8,L:M8,m:D8,X:L8,S:O8,M:z8};function I8(){var o=_o.f(),c=Em();return o||c}function R8(o){var c=or(o);c!==null&&c.tag===5&&c.type==="form"?kC(c):_o.r(o)}var du=typeof document>"u"?null:document;function h2(o,c,h){var g=du;if(g&&typeof c=="string"&&c){var w=Ei(c);w='link[rel="'+o+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),f2.has(w)||(f2.add(w),o={rel:o,crossOrigin:h,href:c},g.querySelector(w)===null&&(c=g.createElement("link"),Kn(c,"link",o),an(c),g.head.appendChild(c)))}}function j8(o){_o.D(o),h2("dns-prefetch",o,null)}function P8(o,c){_o.C(o,c),h2("preconnect",o,c)}function M8(o,c,h){_o.L(o,c,h);var g=du;if(g&&o&&c){var w='link[rel="preload"][as="'+Ei(c)+'"]';c==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+Ei(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+Ei(h.imageSizes)+'"]')):w+='[href="'+Ei(o)+'"]';var T=w;switch(c){case"style":T=fu(o);break;case"script":T=hu(o)}yr.has(T)||(o=m({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),yr.set(T,o),g.querySelector(w)!==null||c==="style"&&g.querySelector(Nf(T))||c==="script"&&g.querySelector(Cf(T))||(c=g.createElement("link"),Kn(c,"link",o),an(c),g.head.appendChild(c)))}}function D8(o,c){_o.m(o,c);var h=du;if(h&&o){var g=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+Ei(g)+'"][href="'+Ei(o)+'"]',T=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=hu(o)}if(!yr.has(T)&&(o=m({rel:"modulepreload",href:o},c),yr.set(T,o),h.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Cf(T)))return}g=h.createElement("link"),Kn(g,"link",o),an(g),h.head.appendChild(g)}}}function O8(o,c,h){_o.S(o,c,h);var g=du;if(g&&o){var w=ys(g).hoistableStyles,T=fu(o);c=c||"default";var L=w.get(T);if(!L){var q={loading:0,preload:null};if(L=g.querySelector(Nf(T)))q.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},h),(h=yr.get(T))&&wb(o,h);var J=L=g.createElement("link");an(J),Kn(J,"link",o),J._p=new Promise(function(ae,me){J.onload=ae,J.onerror=me}),J.addEventListener("load",function(){q.loading|=1}),J.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Dm(L,c,g)}L={type:"stylesheet",instance:L,count:1,state:q},w.set(T,L)}}}function L8(o,c){_o.X(o,c);var h=du;if(h&&o){var g=ys(h).hoistableScripts,w=hu(o),T=g.get(w);T||(T=h.querySelector(Cf(w)),T||(o=m({src:o,async:!0},c),(c=yr.get(w))&&Sb(o,c),T=h.createElement("script"),an(T),Kn(T,"link",o),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(w,T))}}function z8(o,c){_o.M(o,c);var h=du;if(h&&o){var g=ys(h).hoistableScripts,w=hu(o),T=g.get(w);T||(T=h.querySelector(Cf(w)),T||(o=m({src:o,async:!0,type:"module"},c),(c=yr.get(w))&&Sb(o,c),T=h.createElement("script"),an(T),Kn(T,"link",o),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(w,T))}}function p2(o,c,h,g){var w=(w=Ne.current)?Mm(w):null;if(!w)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=fu(h.href),h=ys(w).hoistableStyles,g=h.get(c),g||(g={type:"style",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=fu(h.href);var T=ys(w).hoistableStyles,L=T.get(o);if(L||(w=w.ownerDocument||w,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,L),(T=w.querySelector(Nf(o)))&&!T._p&&(L.instance=T,L.state.loading=5),yr.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},yr.set(o,h),T||U8(w,o,h,L.state))),c&&g===null)throw Error(i(528,""));return L}if(c&&g!==null)throw Error(i(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=hu(h),h=ys(w).hoistableScripts,g=h.get(c),g||(g={type:"script",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function fu(o){return'href="'+Ei(o)+'"'}function Nf(o){return'link[rel="stylesheet"]['+o+"]"}function m2(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function U8(o,c,h,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Kn(c,"link",h),an(c),o.head.appendChild(c))}function hu(o){return'[src="'+Ei(o)+'"]'}function Cf(o){return"script[async]"+o}function g2(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+Ei(h.href)+'"]');if(g)return c.instance=g,an(g),g;var w=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),an(g),Kn(g,"style",w),Dm(g,h.precedence,o),c.instance=g;case"stylesheet":w=fu(h.href);var T=o.querySelector(Nf(w));if(T)return c.state.loading|=4,c.instance=T,an(T),T;g=m2(h),(w=yr.get(w))&&wb(g,w),T=(o.ownerDocument||o).createElement("link"),an(T);var L=T;return L._p=new Promise(function(q,J){L.onload=q,L.onerror=J}),Kn(T,"link",g),c.state.loading|=4,Dm(T,h.precedence,o),c.instance=T;case"script":return T=hu(h.src),(w=o.querySelector(Cf(T)))?(c.instance=w,an(w),w):(g=h,(w=yr.get(T))&&(g=m({},h),Sb(g,w)),o=o.ownerDocument||o,w=o.createElement("script"),an(w),Kn(w,"link",g),o.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,Dm(g,h.precedence,o));return c.instance}function Dm(o,c,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,T=w,L=0;L<g.length;L++){var q=g[L];if(q.dataset.precedence===c)T=q;else if(T!==w)break}T?T.parentNode.insertBefore(o,T.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function wb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Sb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Om=null;function y2(o,c,h){if(Om===null){var g=new Map,w=Om=new Map;w.set(h,g)}else w=Om,g=w.get(h),g||(g=new Map,w.set(h,g));if(g.has(o))return g;for(g.set(o,null),h=h.getElementsByTagName(o),w=0;w<h.length;w++){var T=h[w];if(!(T[ms]||T[on]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var L=T.getAttribute(c)||"";L=o+L;var q=g.get(L);q?q.push(T):g.set(L,[T])}}return g}function v2(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function V8(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function x2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function F8(o,c,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var w=fu(g.href),T=c.querySelector(Nf(w));if(T){c=T._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=Lm.bind(o),c.then(o,o)),h.state.loading|=4,h.instance=T,an(T);return}T=c.ownerDocument||c,g=m2(g),(w=yr.get(w))&&wb(g,w),T=T.createElement("link"),an(T);var L=T;L._p=new Promise(function(q,J){L.onload=q,L.onerror=J}),Kn(T,"link",g),h.instance=T}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=Lm.bind(o),c.addEventListener("load",h),c.addEventListener("error",h))}}var Tb=0;function H8(o,c){return o.stylesheets&&o.count===0&&Um(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var g=setTimeout(function(){if(o.stylesheets&&Um(o,o.stylesheets),o.unsuspend){var T=o.unsuspend;o.unsuspend=null,T()}},6e4+c);0<o.imgBytes&&Tb===0&&(Tb=62500*w8());var w=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Um(o,o.stylesheets),o.unsuspend)){var T=o.unsuspend;o.unsuspend=null,T()}},(o.imgBytes>Tb?50:800)+c);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(w)}}:null}function Lm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var zm=null;function Um(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,zm=new Map,c.forEach(B8,o),zm=null,Lm.call(o))}function B8(o,c){if(!(c.state.loading&4)){var h=zm.get(o);if(h)var g=h.get(null);else{h=new Map,zm.set(o,h);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<w.length;T++){var L=w[T];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(h.set(L.dataset.precedence,L),g=L)}g&&h.set(null,g)}w=c.instance,L=w.getAttribute("data-precedence"),T=h.get(L)||g,T===g&&h.set(null,w),h.set(L,w),this.count++,g=Lm.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),T?T.parentNode.insertBefore(w,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),c.state.loading|=4}}var Af={$$typeof:j,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function $8(o,c,h,g,w,T,L,q,J){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hs(0),this.hiddenUpdates=hs(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=T,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function b2(o,c,h,g,w,T,L,q,J,ae,me,xe){return o=new $8(o,c,h,L,J,ae,me,xe,q),c=1,T===!0&&(c|=24),T=Hi(3,null,null,c),o.current=T,T.stateNode=o,c=ix(),c.refCount++,o.pooledCache=c,c.refCount++,T.memoizedState={element:g,isDehydrated:h,cache:c},ax(T),o}function _2(o){return o?(o=$c,o):$c}function w2(o,c,h,g,w,T){w=_2(w),g.context===null?g.context=w:g.pendingContext=w,g=ma(c),g.payload={element:h},T=T===void 0?null:T,T!==null&&(g.callback=T),h=ga(o,g,c),h!==null&&(Ri(h,o,c),of(h,o,c))}function S2(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Eb(o,c){S2(o,c),(o=o.alternate)&&S2(o,c)}function T2(o){if(o.tag===13||o.tag===31){var c=Nl(o,67108864);c!==null&&Ri(c,o,67108864),Eb(o,67108864)}}function E2(o){if(o.tag===13||o.tag===31){var c=Ki();c=pl(c);var h=Nl(o,c);h!==null&&Ri(h,o,c),Eb(o,c)}}var Vm=!0;function q8(o,c,h,g){var w=W.T;W.T=null;var T=X.p;try{X.p=2,Nb(o,c,h,g)}finally{X.p=T,W.T=w}}function G8(o,c,h,g){var w=W.T;W.T=null;var T=X.p;try{X.p=8,Nb(o,c,h,g)}finally{X.p=T,W.T=w}}function Nb(o,c,h,g){if(Vm){var w=Cb(g);if(w===null)fb(o,c,g,Fm,h),C2(o,g);else if(Y8(w,o,c,h,g))g.stopPropagation();else if(C2(o,g),c&4&&-1<K8.indexOf(o)){for(;w!==null;){var T=or(w);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var L=ds(T.pendingLanes);if(L!==0){var q=T;for(q.pendingLanes|=2,q.entangledLanes|=2;L;){var J=1<<31-Zt(L);q.entanglements[1]|=J,L&=~J}Is(T),(vt&6)===0&&(Sm=mi()+500,wf(0))}}break;case 31:case 13:q=Nl(T,2),q!==null&&Ri(q,T,2),Em(),Eb(T,2)}if(T=Cb(g),T===null&&fb(o,c,g,Fm,h),T===w)break;w=T}w!==null&&g.stopPropagation()}else fb(o,c,g,null,h)}}function Cb(o){return o=ar(o),Ab(o)}var Fm=null;function Ab(o){if(Fm=null,o=gs(o),o!==null){var c=s(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=a(c),o!==null)return o;o=null}else if(h===31){if(o=u(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Fm=o,null}function N2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ul()){case Id:return 2;case Rd:return 8;case ea:case Mv:return 32;case xp:return 268435456;default:return 32}default:return 32}}var kb=!1,Ca=null,Aa=null,ka=null,kf=new Map,If=new Map,Ia=[],K8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C2(o,c){switch(o){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":kf.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":If.delete(c.pointerId)}}function Rf(o,c,h,g,w,T){return o===null||o.nativeEvent!==T?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:T,targetContainers:[w]},c!==null&&(c=or(c),c!==null&&T2(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function Y8(o,c,h,g,w){switch(c){case"focusin":return Ca=Rf(Ca,o,c,h,g,w),!0;case"dragenter":return Aa=Rf(Aa,o,c,h,g,w),!0;case"mouseover":return ka=Rf(ka,o,c,h,g,w),!0;case"pointerover":var T=w.pointerId;return kf.set(T,Rf(kf.get(T)||null,o,c,h,g,w)),!0;case"gotpointercapture":return T=w.pointerId,If.set(T,Rf(If.get(T)||null,o,c,h,g,w)),!0}return!1}function A2(o){var c=gs(o.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=a(h),c!==null){o.blockedOn=c,Lr(o.priority,function(){E2(h)});return}}else if(c===31){if(c=u(h),c!==null){o.blockedOn=c,Lr(o.priority,function(){E2(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Hm(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Cb(o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Bd=g,h.target.dispatchEvent(g),Bd=null}else return c=or(h),c!==null&&T2(c),o.blockedOn=h,!1;c.shift()}return!0}function k2(o,c,h){Hm(o)&&h.delete(c)}function W8(){kb=!1,Ca!==null&&Hm(Ca)&&(Ca=null),Aa!==null&&Hm(Aa)&&(Aa=null),ka!==null&&Hm(ka)&&(ka=null),kf.forEach(k2),If.forEach(k2)}function Bm(o,c){o.blockedOn===c&&(o.blockedOn=null,kb||(kb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,W8)))}var $m=null;function I2(o){$m!==o&&($m=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$m===o&&($m=null);for(var c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],w=o[c+2];if(typeof g!="function"){if(Ab(g||h)===null)continue;break}var T=or(h);T!==null&&(o.splice(c,3),c-=3,Cx(T,{pending:!0,data:w,method:h.method,action:g},g,w))}}))}function pu(o){function c(J){return Bm(J,o)}Ca!==null&&Bm(Ca,o),Aa!==null&&Bm(Aa,o),ka!==null&&Bm(ka,o),kf.forEach(c),If.forEach(c);for(var h=0;h<Ia.length;h++){var g=Ia[h];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Ia.length&&(h=Ia[0],h.blockedOn===null);)A2(h),h.blockedOn===null&&Ia.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var w=h[g],T=h[g+1],L=w[Nn]||null;if(typeof T=="function")L||I2(h);else if(L){var q=null;if(T&&T.hasAttribute("formAction")){if(w=T,L=T[Nn]||null)q=L.formAction;else if(Ab(w)!==null)continue}else q=L.action;typeof q=="function"?h[g+1]=q:(h.splice(g,3),g-=3),I2(h)}}}function R2(){function o(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(L){return w=L})},focusReset:"manual",scroll:"manual"})}function c(){w!==null&&(w(),w=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,w=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),w!==null&&(w(),w=null)}}}function Ib(o){this._internalRoot=o}qm.prototype.render=Ib.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(i(409));var h=c.current,g=Ki();w2(h,g,o,c,null,null)},qm.prototype.unmount=Ib.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;w2(o.current,2,null,o,null,null),Em(),c[ps]=null}};function qm(o){this._internalRoot=o}qm.prototype.unstable_scheduleHydration=function(o){if(o){var c=Ep();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Ia.length&&c!==0&&c<Ia[h].priority;h++);Ia.splice(h,0,o),h===0&&A2(o)}};var j2=e.version;if(j2!=="19.2.4")throw Error(i(527,j2,"19.2.4"));X.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(c),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var X8={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gm.isDisabled&&Gm.supportsFiber)try{Dr=Gm.inject(X8),Hn=Gm}catch{}}return Pf.createRoot=function(o,c){if(!r(o))throw Error(i(299));var h=!1,g="",w=UC,T=VC,L=FC;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError)),c=b2(o,1,!1,null,null,h,g,null,w,T,L,R2),o[ps]=c.current,db(o),new Ib(c)},Pf.hydrateRoot=function(o,c,h){if(!r(o))throw Error(i(299));var g=!1,w="",T=UC,L=VC,q=FC,J=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(q=h.onRecoverableError),h.formState!==void 0&&(J=h.formState)),c=b2(o,1,!0,c,h??null,g,w,J,T,L,q,R2),c.context=_2(null),h=c.current,g=Ki(),g=pl(g),w=ma(g),w.callback=null,ga(h,w,g),h=g,c.current.lanes=h,fl(c,h),Is(c),o[ps]=c.current,db(o),new qm(c)},Pf.version="19.2.4",Pf}var H2;function cF(){if(H2)return Mb.exports;H2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mb.exports=lF(),Mb.exports}var uF=cF(),Ge=(t=>(t.EASY="easy",t.NORMAL="normal",t.HARD="hard",t))(Ge||{}),Mn=(t=>(t.EASY="easy",t.NORMAL="normal",t.HARD="hard",t))(Mn||{}),ee=(t=>(t.STR="STR",t.INT="INT",t.DIS="DIS",t.HEA="HEA",t.CRT="CRT",t.SPR="SPR",t.REL="REL",t.FIN="FIN",t))(ee||{});const Wi={[Ge.EASY]:"border-life-easy text-life-easy",[Ge.NORMAL]:"border-life-normal text-life-normal",[Ge.HARD]:"border-life-hard text-life-hard"},Bh={[Ge.EASY]:"bg-life-easy/10",[Ge.NORMAL]:"bg-life-normal/10",[Ge.HARD]:"bg-life-hard/10"},xt={[ee.STR]:"#ef4444",[ee.INT]:"#a855f7",[ee.DIS]:"#60a5fa",[ee.HEA]:"#10b981",[ee.CRT]:"#e879f9",[ee.SPR]:"#f43f5e",[ee.REL]:"#fbbf24",[ee.FIN]:"#14b8a6"},_S={[Mn.EASY]:300,[Mn.NORMAL]:400,[Mn.HARD]:500},dF={7:300,21:1e3,50:2500,100:5e3},fF={[Ge.EASY]:{xp:20,gold:10},[Ge.NORMAL]:{xp:50,gold:30},[Ge.HARD]:{xp:100,gold:100}},hF={[Ge.EASY]:{xp:50,gold:20,stat:2},[Ge.NORMAL]:{xp:30,gold:10,stat:1},[Ge.HARD]:{xp:10,gold:0,stat:0}},U_=[{id:"standard",name:"Shadow Protocol",colors:{"--color-life-black":"#0a0a0a","--color-life-paper":"#121212","--color-life-gold":"#fbbf24","--color-life-text":"#e5e5e5"}},{id:"zayn",name:"Zayn Protocol",colors:{"--color-life-black":"#0a0a0a","--color-life-paper":"#121212","--color-life-gold":"#fbbf24","--color-life-text":"#e5e5e5","--color-life-muted":"#525252","--color-life-crimson":"#dc2626","--color-life-diamond":"#60a5fa","--color-life-hard":"#ef4444"}},{id:"grey",name:"Zenith Grey",colors:{"--color-life-black":"#18181b","--color-life-paper":"#27272a","--color-life-gold":"#a1a1aa","--color-life-text":"#f4f4f5"}},{id:"gold",name:"Midas Touch",colors:{"--color-life-black":"#1a1200","--color-life-paper":"#261a00","--color-life-gold":"#ffd700","--color-life-text":"#fffae6"},customCss:`
            /* Royal Fonts & Shapes */
            @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap');
            
            body { 
                font-family: 'Cinzel', serif !important; 
            }
            .rounded-xl, .rounded-lg, .rounded-2xl {
                border-radius: 2px !important;
                border: 1px double #ffd700 !important;
            }
            .bg-life-gold {
                background: linear-gradient(135deg, #ffd700 0%, #b8860b 100%) !important;
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            }
        `},{id:"light",name:"Light Protocol",colors:{"--color-life-black":"#f3f4f6","--color-life-paper":"#ffffff","--color-life-gold":"#d97706","--color-life-text":"#111827"}},{id:"crimson",name:"Crimson Ops",colors:{"--color-life-black":"#1a0505","--color-life-paper":"#2b0a0a","--color-life-gold":"#ef4444","--color-life-text":"#fecaca"}},{id:"sunset",name:"Sunset Drive",colors:{"--color-life-black":"#2e1065","--color-life-paper":"#4c1d95","--color-life-gold":"#f472b6","--color-life-text":"#fae8ff"}},{id:"mint",name:"Mint Protocol",colors:{"--color-life-black":"#f0fdf4","--color-life-paper":"#dcfce7","--color-life-gold":"#16a34a","--color-life-text":"#064e3b"}},{id:"azure",name:"Azure Citadel",colors:{"--color-life-black":"#082f49","--color-life-paper":"#0c4a6e","--color-life-gold":"#38bdf8","--color-life-text":"#f0f9ff"}},{id:"toxic",name:"Toxic Grid",colors:{"--color-life-black":"#052e16","--color-life-paper":"#064e3b","--color-life-gold":"#a3e635","--color-life-text":"#ecfccb"}},{id:"cyberpunk",name:"Neon City",colors:{"--color-life-black":"#020617","--color-life-paper":"#0f172a","--color-life-gold":"#22d3ee","--color-life-text":"#e0f2fe"},customCss:`
            /* Cyberpunk Aesthetics */
            @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
            
            body { 
                font-family: 'Share Tech Mono', monospace !important; 
                letter-spacing: 0.5px;
            }
            
            /* Hard Corners */
            .rounded-xl, .rounded-lg, .rounded-2xl, .rounded-full, .rounded-md, button {
                border-radius: 0px !important;
                clip-path: polygon(
                    0 0, 
                    100% 0, 
                    100% calc(100% - 10px), 
                    calc(100% - 10px) 100%, 
                    0 100%
                );
            }
            
            /* Neon Borders */
            .border {
                border-color: rgba(34, 211, 238, 0.4) !important;
            }
            
            /* Icons Glow */
            svg {
                filter: drop-shadow(0 0 2px currentColor);
            }
            
            .bg-life-gold {
                box-shadow: 0 0 15px #22d3ee, inset 0 0 10px rgba(0,0,0,0.5);
            }
        `},{id:"gamify",name:"Super Duo",colors:{"--color-life-black":"#ffffff","--color-life-paper":"#f3f4f6","--color-life-gold":"#58cc02","--color-life-text":"#3c3c3c"},customCss:`
            /* Bubbly UI */
            @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
            
            body { font-family: 'Nunito', sans-serif !important; }
            
            .rounded-xl, .rounded-lg {
                border-radius: 20px !important;
            }
            
            /* 3D Buttons */
            button, .bg-life-paper {
                border-bottom-width: 4px !important;
                border-color: rgba(0,0,0,0.1) !important;
                transition: transform 0.1s;
            }
            
            button:active {
                transform: translateY(4px);
                border-bottom-width: 0px !important;
            }
            
            .bg-life-gold {
                border-color: #46a302 !important; /* Darker Green Border */
            }
        `},{id:"gamify_purple",name:"Super Duo Dark",colors:{"--color-life-black":"#13111C","--color-life-paper":"#1F1C2E","--color-life-gold":"#9333ea","--color-life-text":"#E9D5FF"},customCss:`
            /* Bubbly Dark UI */
            @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
            
            body { font-family: 'Nunito', sans-serif !important; }
            
            .rounded-xl, .rounded-lg {
                border-radius: 20px !important;
            }
            
            /* 3D Buttons */
            button, .bg-life-paper {
                border-bottom-width: 4px !important;
                border-color: rgba(0,0,0,0.4) !important;
                transition: transform 0.1s;
            }
            
            button:active {
                transform: translateY(4px);
                border-bottom-width: 0px !important;
            }
        `}],Yf={user:{name:"Shadow Walker",title:"Initiate",level:1,currentXP:0,targetXP:1e3,gold:450,honor:100,honorDailyLog:{},streak:0,shields:1,inventory:[],equippedItems:[],hasOnboarded:!1,purchaseHistory:[],badges:[],badgeTiers:{},badgeHistory:{},featuredBadges:[],dailyXP:0,dailyTarget:_S[Mn.NORMAL],currentMode:Mn.NORMAL,pendingMode:Mn.NORMAL,lastProcessedDate:new Date().toISOString(),consecutiveShields:0,streakHistory:{},metrics:{totalTasksCompleted:0,tasksByDifficulty:{[Ge.EASY]:0,[Ge.NORMAL]:0,[Ge.HARD]:0},totalRaidsWon:0,raidsByDifficulty:{[Ge.EASY]:0,[Ge.NORMAL]:0,[Ge.HARD]:0},totalGoldEarned:450,totalXPEarned:0,highestStreak:0,habitsFixed:0,shieldsUsed:0,resetsCount:0},unlockedThemes:U_,stats:{[ee.STR]:1,[ee.INT]:1,[ee.DIS]:1,[ee.HEA]:1,[ee.CRT]:1,[ee.SPR]:1,[ee.REL]:1,[ee.FIN]:1},lastOnline:new Date().toISOString(),preferences:{soundEnabled:!0,deviceNotificationsEnabled:!1,theme:"standard",showHighlights:!0,showCampaignUI:!0,unlockAllWeeks:!1,showCalendarSync:!0,statsViewMode:"radar",enableRefiner:!0,copyIncludesHistory:!0,dayStartHour:4,apiKeys:{discussion:"",tasks:"",habits:"",raids:"",themes:"",monitoring:"",refiner:""}}},badgesRegistry:[],ui:{currentView:"tasks",activeModal:"none",modalQueue:[],toasts:[],systemLogs:[],debugDate:null,focusSession:null,habitsViewMode:"list",tasksViewMode:"missions"}},pF="LIFE_OS_V1_DATA",mF="modulepreload",gF=function(t){return"/leny-os1/"+t},B2={},wS=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let a=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=a(n.map(d=>{if(d=gF(d),d in B2)return;B2[d]=!0;const p=d.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":mF,p||(y.as="script"),y.crossOrigin="",y.href=d,f&&y.setAttribute("nonce",f),document.head.appendChild(y),p)return new Promise((b,S)=>{y.addEventListener("load",b),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return r.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Hu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Hu||(Hu={}));class zb extends Error{constructor(e,n,i){super(e),this.message=e,this.code=n,this.data=i}}const yF=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},vF=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},i=n.Plugins=n.Plugins||{},r=()=>e!==null?e.name:yF(t),s=()=>r()!=="web",a=m=>{const y=d.get(m);return!!(y!=null&&y.platforms.has(r())||u(m))},u=m=>{var y;return(y=n.PluginHeaders)===null||y===void 0?void 0:y.find(b=>b.name===m)},f=m=>t.console.error(m),d=new Map,p=(m,y={})=>{const b=d.get(m);if(b)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),b.proxy;const S=r(),N=u(m);let E;const R=async()=>(!E&&S in y?E=typeof y[S]=="function"?E=await y[S]():E=y[S]:e!==null&&!E&&"web"in y&&(E=typeof y.web=="function"?E=await y.web():E=y.web),E),U=(A,M)=>{var H,F;if(N){const D=N==null?void 0:N.methods.find(z=>M===z.name);if(D)return D.rtype==="promise"?z=>n.nativePromise(m,M.toString(),z):(z,$)=>n.nativeCallback(m,M.toString(),z,$);if(A)return(H=A[M])===null||H===void 0?void 0:H.bind(A)}else{if(A)return(F=A[M])===null||F===void 0?void 0:F.bind(A);throw new zb(`"${m}" plugin is not implemented on ${S}`,Hu.Unimplemented)}},j=A=>{let M;const H=(...F)=>{const D=R().then(z=>{const $=U(z,A);if($){const Y=$(...F);return M=Y==null?void 0:Y.remove,Y}else throw new zb(`"${m}.${A}()" is not implemented on ${S}`,Hu.Unimplemented)});return A==="addListener"&&(D.remove=async()=>M()),D};return H.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(H,"name",{value:A,writable:!1,configurable:!1}),H},B=j("addListener"),O=j("removeListener"),P=(A,M)=>{const H=B({eventName:A},M),F=async()=>{const z=await H;O({eventName:A,callbackId:z},M)},D=new Promise(z=>H.then(()=>z({remove:F})));return D.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},D},I=new Proxy({},{get(A,M){switch(M){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?P:B;case"removeListener":return O;default:return j(M)}}});return i[m]=I,d.set(m,{name:m,proxy:I,platforms:new Set([...Object.keys(y),...N?[S]:[]])}),I};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=r,n.handleError=f,n.isNativePlatform=s,n.isPluginAvailable=a,n.registerPlugin=p,n.Exception=zb,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},xF=t=>t.Capacitor=vF(t),qs=xF(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),rd=qs.registerPlugin;class SS{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),i&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,i){const r=this.listeners[e];if(!r){if(i){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}r.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(e="not implemented"){return new qs.Exception(e,Hu.Unimplemented)}unavailable(e="not available"){return new qs.Exception(e,Hu.Unavailable)}async removeListener(e,n){const i=this.listeners[e];if(!i)return;const r=i.indexOf(n);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(i=>{this.notifyListeners(e,i)}))}}const $2=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),q2=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class bF extends SS{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[r,s]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=q2(r).trim(),s=q2(s).trim(),n[r]=s}),n}async setCookie(e){try{const n=$2(e.key),i=$2(e.value),r=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${i||""}${r}; path=${s}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}rd("CapacitorCookies",{web:()=>new bF});const _F=async t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},i.onerror=r=>n(r),i.readAsDataURL(t)}),wF=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(r=>r.toLocaleLowerCase()).reduce((r,s,a)=>(r[s]=t[e[a]],r),{})},SF=(t,e=!0)=>t?Object.entries(t).reduce((i,r)=>{const[s,a]=r;let u,f;return Array.isArray(a)?(f="",a.forEach(d=>{u=e?encodeURIComponent(d):d,f+=`${s}=${u}&`}),f.slice(0,-1)):(u=e?encodeURIComponent(a):a,f=`${s}=${u}`),`${i}&${f}`},"").substr(1):null,TF=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),r=wF(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(t.data||{}))s.set(a,u);n.body=s.toString()}else if(r.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((u,f)=>{s.append(f,u)});else for(const u of Object.keys(t.data))s.append(u,t.data[u]);n.body=s;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(r.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class EF extends SS{async request(e){const n=TF(e,e.webFetchExtra),i=SF(e.params,e.shouldEncodeUrlParams),r=i?`${e.url}?${i}`:e.url,s=await fetch(r,n),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let f,d;switch(u){case"arraybuffer":case"blob":d=await s.blob(),f=await _F(d);break;case"json":f=await s.json();break;case"document":case"text":default:f=await s.text()}const p={};return s.headers.forEach((m,y)=>{p[y]=m}),{data:f,headers:p,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}rd("CapacitorHttp",{web:()=>new EF});var G2;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(G2||(G2={}));var K2;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(K2||(K2={}));class NF extends SS{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}rd("SystemBars",{web:()=>new NF});const Ub=rd("App",{web:()=>wS(()=>import("./web-Co84FGVi.js"),[]).then(t=>new t.AppWeb)}),CF=(t,e)=>{const n=C.useRef(t);C.useEffect(()=>{n.current=t},[t]),C.useEffect(()=>((async()=>{try{await Ub.addListener("backButton",({canGoBack:r})=>{const s=n.current,{ui:a}=s;if(a.focusSession){e(u=>({...u,ui:{...u.ui,focusSession:null}}));return}if(a.activeModal!=="none"){e(u=>({...u,ui:{...u.ui,activeModal:"none",modalData:void 0}}));return}if(a.currentView!=="tasks"){e(u=>({...u,ui:{...u.ui,currentView:"tasks"}}));return}Ub.exitApp()})}catch(r){console.warn("Native back button listener failed",r)}})(),()=>{Ub.removeAllListeners()}),[]),C.useEffect(()=>{const i=r=>{e(s=>s.ui.activeModal!=="none"?{...s,ui:{...s.ui,activeModal:"none",modalData:void 0}}:r.state&&r.state.view?{...s,ui:{...s.ui,currentView:r.state.view}}:s)};return window.addEventListener("popstate",i),window.history.replaceState({view:t.ui.currentView},""),()=>window.removeEventListener("popstate",i)},[])},AF=()=>{};var Y2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kF=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],u=t[n++],f=((r&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},BO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,u=a?t[r+1]:0,f=r+2<t.length,d=f?t[r+2]:0,p=s>>2,m=(s&3)<<4|u>>4;let y=(u&15)<<2|d>>6,b=d&63;f||(b=64,a||(y=64)),i.push(n[p],n[m],n[y],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||u==null||d==null||m==null)throw new IF;const y=s<<2|u>>4;if(i.push(y),d!==64){const b=u<<4&240|d>>2;if(i.push(b),m!==64){const S=d<<6&192|m;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RF=function(t){const e=HO(t);return BO.encodeByteArray(e,!0)},Yg=function(t){return RF(t).replace(/\./g,"")},$O=function(t){try{return BO.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=()=>jF().__FIREBASE_DEFAULTS__,MF=()=>{if(typeof process>"u"||typeof Y2>"u")return;const t=Y2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$O(t[1]);return e&&JSON.parse(e)},yy=()=>{try{return AF()||PF()||MF()||DF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qO=t=>{var e,n;return(n=(e=yy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OF=t=>{const e=qO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},GO=()=>{var t;return(t=yy())==null?void 0:t.config},KO=t=>{var e;return(e=yy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YO(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yg(JSON.stringify(n)),Yg(JSON.stringify(a)),""].join(".")}const ih={};function UF(){const t={prod:[],emulator:[]};for(const e of Object.keys(ih))ih[e]?t.emulator.push(e):t.prod.push(e);return t}function VF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let W2=!1;function WO(t,e){if(typeof window>"u"||typeof document>"u"||!sd(window.location.host)||ih[t]===e||ih[t]||W2)return;ih[t]=e;function n(y){return`__firebase__banner__${y}`}const i="__firebase__banner",s=UF().prod.length>0;function a(){const y=document.getElementById(i);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{W2=!0,a()},y}function p(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=VF(i),b=n("text"),S=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),E=document.getElementById(N)||document.createElement("a"),R=n("preprendIcon"),U=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const j=y.element;u(j),p(E,N);const B=d();f(U,R),j.append(U,S,E,B),document.body.appendChild(j)}s?(S.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(di())}function HF(){var e;const t=(e=yy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $F(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GF(){const t=di();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KF(){return!HF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YF(){try{return typeof indexedDB=="object"}catch{return!1}}function WF(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="FirebaseError";class Ho extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=XF,Object.setPrototypeOf(this,Ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$h.prototype.create)}}class $h{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?JF(s,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Ho(r,u,i)}}function JF(t,e){return t.replace(QF,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const QF=/\{\$([^}]+)}/g;function ZF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(X2(s)&&X2(a)){if(!sc(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function X2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function eH(t,e){const n=new tH(t,e);return n.subscribe.bind(n)}class tH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");nH(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Vb),r.error===void 0&&(r.error=Vb),r.complete===void 0&&(r.complete=Vb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){return t&&t._delegate?t._delegate:t}class oc{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iH=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new LF;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sH(e))try{this.getOrInitializeService({instanceIdentifier:Hl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Hl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hl){return this.instances.has(e)}getOptions(e=Hl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rH(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hl){return this.component?this.component.multipleInstances?e:Hl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rH(t){return t===Hl?void 0:t}function sH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const aH={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},lH=ot.INFO,cH={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},uH=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=cH[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class TS{constructor(e){this.name=e,this._logLevel=lH,this._logHandler=uH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const dH=(t,e)=>e.some(n=>t instanceof n);let J2,Q2;function fH(){return J2||(J2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hH(){return Q2||(Q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XO=new WeakMap,V_=new WeakMap,JO=new WeakMap,Fb=new WeakMap,ES=new WeakMap;function pH(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ba(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&XO.set(n,t)}).catch(()=>{}),ES.set(e,t),e}function mH(t){if(V_.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});V_.set(t,e)}let F_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return V_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ba(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gH(t){F_=t(F_)}function yH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Hb(this),e,...n);return JO.set(i,e.sort?e.sort():[e]),Ba(i)}:hH().includes(t)?function(...e){return t.apply(Hb(this),e),Ba(XO.get(this))}:function(...e){return Ba(t.apply(Hb(this),e))}}function vH(t){return typeof t=="function"?yH(t):(t instanceof IDBTransaction&&mH(t),dH(t,fH())?new Proxy(t,F_):t)}function Ba(t){if(t instanceof IDBRequest)return pH(t);if(Fb.has(t))return Fb.get(t);const e=vH(t);return e!==t&&(Fb.set(t,e),ES.set(e,t)),e}const Hb=t=>ES.get(t);function xH(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),u=Ba(a);return i&&a.addEventListener("upgradeneeded",f=>{i(Ba(a.result),f.oldVersion,f.newVersion,Ba(a.transaction),f)}),n&&a.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{s&&f.addEventListener("close",()=>s()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const bH=["get","getKey","getAll","getAllKeys","count"],_H=["put","add","delete","clear"],Bb=new Map;function Z2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bb.get(e))return Bb.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_H.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||bH.includes(n)))return;const s=async function(a,...u){const f=this.transaction(a,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&f.done]))[0]};return Bb.set(e,s),s}gH(t=>({...t,get:(e,n,i)=>Z2(e,n)||t.get(e,n,i),has:(e,n)=>!!Z2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SH(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function SH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const H_="@firebase/app",ek="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new TS("@firebase/app"),TH="@firebase/app-compat",EH="@firebase/analytics-compat",NH="@firebase/analytics",CH="@firebase/app-check-compat",AH="@firebase/app-check",kH="@firebase/auth",IH="@firebase/auth-compat",RH="@firebase/database",jH="@firebase/data-connect",PH="@firebase/database-compat",MH="@firebase/functions",DH="@firebase/functions-compat",OH="@firebase/installations",LH="@firebase/installations-compat",zH="@firebase/messaging",UH="@firebase/messaging-compat",VH="@firebase/performance",FH="@firebase/performance-compat",HH="@firebase/remote-config",BH="@firebase/remote-config-compat",$H="@firebase/storage",qH="@firebase/storage-compat",GH="@firebase/firestore",KH="@firebase/ai",YH="@firebase/firestore-compat",WH="firebase",XH="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="[DEFAULT]",JH={[H_]:"fire-core",[TH]:"fire-core-compat",[NH]:"fire-analytics",[EH]:"fire-analytics-compat",[AH]:"fire-app-check",[CH]:"fire-app-check-compat",[kH]:"fire-auth",[IH]:"fire-auth-compat",[RH]:"fire-rtdb",[jH]:"fire-data-connect",[PH]:"fire-rtdb-compat",[MH]:"fire-fn",[DH]:"fire-fn-compat",[OH]:"fire-iid",[LH]:"fire-iid-compat",[zH]:"fire-fcm",[UH]:"fire-fcm-compat",[VH]:"fire-perf",[FH]:"fire-perf-compat",[HH]:"fire-rc",[BH]:"fire-rc-compat",[$H]:"fire-gcs",[qH]:"fire-gcs-compat",[GH]:"fire-fst",[YH]:"fire-fst-compat",[KH]:"fire-vertex","fire-js":"fire-js",[WH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map,QH=new Map,$_=new Map;function tk(t,e){try{t.container.addComponent(e)}catch(n){Io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bu(t){const e=t.name;if($_.has(e))return Io.debug(`There were multiple attempts to register component ${e}.`),!1;$_.set(e,t);for(const n of Wg.values())tk(n,t);for(const n of QH.values())tk(n,t);return!0}function NS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$a=new $h("app","Firebase",ZH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $a.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=XH;function QO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:B_,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw $a.create("bad-app-name",{appName:String(r)});if(n||(n=GO()),!n)throw $a.create("no-options");const s=Wg.get(r);if(s){if(sc(n,s.options)&&sc(i,s.config))return s;throw $a.create("duplicate-app",{appName:r})}const a=new oH(r);for(const f of $_.values())a.addComponent(f);const u=new eB(n,i,a);return Wg.set(r,u),u}function ZO(t=B_){const e=Wg.get(t);if(!e&&t===B_&&GO())return QO();if(!e)throw $a.create("no-app",{appName:t});return e}function qa(t,e,n){let i=JH[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Io.warn(a.join(" "));return}Bu(new oc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="firebase-heartbeat-database",nB=1,fh="firebase-heartbeat-store";let $b=null;function e5(){return $b||($b=xH(tB,nB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fh)}catch(n){console.warn(n)}}}}).catch(t=>{throw $a.create("idb-open",{originalErrorMessage:t.message})})),$b}async function iB(t){try{const n=(await e5()).transaction(fh),i=await n.objectStore(fh).get(t5(t));return await n.done,i}catch(e){if(e instanceof Ho)Io.warn(e.message);else{const n=$a.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Io.warn(n.message)}}}async function nk(t,e){try{const i=(await e5()).transaction(fh,"readwrite");await i.objectStore(fh).put(e,t5(t)),await i.done}catch(n){if(n instanceof Ho)Io.warn(n.message);else{const i=$a.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Io.warn(i.message)}}}function t5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=1024,sB=30;class oB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lB(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ik();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>sB){const a=cB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Io.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ik(),{heartbeatsToSend:i,unsentEntries:r}=aB(this._heartbeatsCache.heartbeats),s=Yg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Io.warn(n),""}}}function ik(){return new Date().toISOString().substring(0,10)}function aB(t,e=rB){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),rk(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),rk(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class lB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YF()?WF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rk(t){return Yg(JSON.stringify({version:2,heartbeats:t})).length}function cB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t){Bu(new oc("platform-logger",e=>new wH(e),"PRIVATE")),Bu(new oc("heartbeat",e=>new oB(e),"PRIVATE")),qa(H_,ek,t),qa(H_,ek,"esm2020"),qa("fire-js","")}uB("");var dB="firebase",fB="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qa(dB,fB,"app");function n5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hB=n5,i5=new $h("auth","Firebase",n5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new TS("@firebase/auth");function pB(t,...e){Xg.logLevel<=ot.WARN&&Xg.warn(`Auth (${od}): ${t}`,...e)}function Ng(t,...e){Xg.logLevel<=ot.ERROR&&Xg.error(`Auth (${od}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,...e){throw AS(t,...e)}function ts(t,...e){return AS(t,...e)}function CS(t,e,n){const i={...hB(),[e]:n};return new $h("auth","Firebase",i).create(e,{appName:t.name})}function Jl(t){return CS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r5(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Gs(t,"argument-error"),CS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function AS(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return i5.create(t,...e)}function qe(t,e,...n){if(!t)throw AS(e,...n)}function To(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ng(e),new Error(e)}function Ro(t,e){t||To(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function mB(){return sk()==="http:"||sk()==="https:"}function sk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mB()||$F()||"connection"in navigator)?navigator.onLine:!0}function yB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ro(n>e,"Short delay should be less than long delay!"),this.isMobile=FF()||qF()}get(){return gB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e){Ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bB=new Gh(3e4,6e4);function IS(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ad(t,e,n,i,r={}){return o5(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const u=qh({key:t.config.apiKey,...a}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:f,...s};return BF()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&sd(t.emulatorConfig.host)&&(d.credentials="include"),s5.fetch()(await a5(t,t.config.apiHost,n,u),d)})}async function o5(t,e,n){t._canInitEmulator=!1;const i={...vB,...e};try{const r=new wB(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Ym(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ym(t,"credential-already-in-use",a);if(f==="EMAIL_EXISTS")throw Ym(t,"email-already-in-use",a);if(f==="USER_DISABLED")throw Ym(t,"user-disabled",a);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw CS(t,p,d);Gs(t,p)}}catch(r){if(r instanceof Ho)throw r;Gs(t,"network-request-failed",{message:String(r)})}}async function _B(t,e,n,i,r={}){const s=await ad(t,e,n,i,r);return"mfaPendingCredential"in s&&Gs(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function a5(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?kS(t.config,r):`${t.config.apiScheme}://${r}`;return xB.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class wB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ts(this.auth,"network-request-failed")),bB.get())})}}function Ym(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ts(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e){return ad(t,"POST","/v1/accounts:delete",e)}async function Jg(t,e){return ad(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TB(t,e=!1){const n=Zi(t),i=await n.getIdToken(e),r=RS(i);qe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:rh(qb(r.auth_time)),issuedAtTime:rh(qb(r.iat)),expirationTime:rh(qb(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qb(t){return Number(t)*1e3}function RS(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ng("JWT malformed, contained fewer than 3 sections"),null;try{const r=$O(n);return r?JSON.parse(r):(Ng("Failed to decode base64 JWT payload"),null)}catch(r){return Ng("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ok(t){const e=RS(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ho&&EB(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function EB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rh(this.lastLoginAt),this.creationTime=rh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(t){var m;const e=t.auth,n=await t.getIdToken(),i=await hh(t,Jg(e,{idToken:n}));qe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(m=r.providerUserInfo)!=null&&m.length?l5(r.providerUserInfo):[],a=AB(t.providerData,s),u=t.isAnonymous,f=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),d=u?f:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new G_(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function CB(t){const e=Zi(t);await Qg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AB(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function l5(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t,e){const n=await o5(t,{},async()=>{const i=qh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await a5(t,r,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return t.emulatorConfig&&sd(t.emulatorConfig.host)&&(f.credentials="include"),s5.fetch()(a,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IB(t,e){return ad(t,"POST","/v2/accounts:revokeToken",IS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ok(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const n=ok(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await kB(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Pu;return i&&(qe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(qe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(qe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pu,this.toJSON())}_performRefresh(){return To("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jr{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new NB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new G_(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await hh(this,this.stsTokenManager.getToken(this.auth,e));return qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TB(this,e)}reload(){return CB(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Qg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(Jl(this.auth));const e=await this.getIdToken();return await hh(this,SB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,f=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:b,providerData:S,stsTokenManager:N}=n;qe(m&&N,e,"internal-error");const E=Pu.fromJSON(this.name,N);qe(typeof m=="string",e,"internal-error"),ja(i,e.name),ja(r,e.name),qe(typeof y=="boolean",e,"internal-error"),qe(typeof b=="boolean",e,"internal-error"),ja(s,e.name),ja(a,e.name),ja(u,e.name),ja(f,e.name),ja(d,e.name),ja(p,e.name);const R=new Jr({uid:m,auth:e,email:r,emailVerified:y,displayName:i,isAnonymous:b,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:E,createdAt:d,lastLoginAt:p});return S&&Array.isArray(S)&&(R.providerData=S.map(U=>({...U}))),f&&(R._redirectEventId=f),R}static async _fromIdTokenResponse(e,n,i=!1){const r=new Pu;r.updateFromServerResponse(n);const s=new Jr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Qg(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];qe(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?l5(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),u=new Pu;u.updateFromIdToken(i);const f=new Jr({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new G_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Map;function Eo(t){Ro(t instanceof Function,"Expected a class definition");let e=ak.get(t);return e?(Ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ak.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c5.type="NONE";const lk=c5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e,n){return`firebase:${t}:${e}:${n}`}class Mu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Cg(this.userKey,r.apiKey,s),this.fullPersistenceKey=Cg("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jg(this.auth,{idToken:e}).catch(()=>{});return n?Jr._fromGetAccountInfoResponse(this.auth,n,e):null}return Jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Mu(Eo(lk),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||Eo(lk);const a=Cg(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(a);if(p){let m;if(typeof p=="string"){const y=await Jg(e,{idToken:p}).catch(()=>{});if(!y)break;m=await Jr._fromGetAccountInfoResponse(e,y,p)}else m=Jr._fromJSON(e,p);d!==s&&(u=m),s=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new Mu(s,e,i):(s=f[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Mu(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m5(e))return"Blackberry";if(g5(e))return"Webos";if(d5(e))return"Safari";if((e.includes("chrome/")||f5(e))&&!e.includes("edge/"))return"Chrome";if(p5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function u5(t=di()){return/firefox\//i.test(t)}function d5(t=di()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f5(t=di()){return/crios\//i.test(t)}function h5(t=di()){return/iemobile/i.test(t)}function p5(t=di()){return/android/i.test(t)}function m5(t=di()){return/blackberry/i.test(t)}function g5(t=di()){return/webos/i.test(t)}function jS(t=di()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RB(t=di()){var e;return jS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function jB(){return GF()&&document.documentMode===10}function y5(t=di()){return jS(t)||p5(t)||g5(t)||m5(t)||/windows phone/i.test(t)||h5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t,e=[]){let n;switch(t){case"Browser":n=ck(di());break;case"Worker":n=`${ck(di())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${od}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,u)=>{try{const f=e(s);a(f)}catch(f){u(f)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t,e={}){return ad(t,"GET","/v2/passwordPolicy",IS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=6;class OB{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uk(this),this.idTokenSubscription=new uk(this),this.beforeStateQueue=new PB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Eo(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Mu.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jg(this,{idToken:e}),i=await Jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Kr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,u=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!a||a===u)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(Jl(this));const n=e?Zi(e):null;return n&&qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(Jl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(Jl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MB(this),n=new OB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $h("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await IB(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Eo(e)||this._popupRedirectResolver;qe(n,this,"argument-error"),this.redirectPersistenceManager=await Mu.create(this,[Eo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,r);return()=>{a=!0,f()}}else{const f=e.addObserver(n);return()=>{a=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&pB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vy(t){return Zi(t)}class uk{constructor(e){this.auth=e,this.observer=null,this.addObserver=eH(n=>this.observer=n)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zB(t){PS=t}function UB(t){return PS.loadJS(t)}function VB(){return PS.gapiScript}function FB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t,e){const n=NS(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(sc(s,e??{}))return r;Gs(r,"already-initialized")}return n.initialize({options:e})}function BB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function $B(t,e,n){const i=vy(t);qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=x5(e),{host:a,port:u}=qB(e),f=u===null?"":`:${u}`,d={url:`${s}//${a}${f}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),qe(sc(d,i.config.emulator)&&sc(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,sd(a)?(YO(`${s}//${a}${f}`),WO("Auth",!0)):GB()}function x5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qB(t){const e=x5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:dk(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:dk(a)}}}function dk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,n){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t,e){return _B(t,"POST","/v1/accounts:signInWithIdp",IS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="http://localhost";class ac extends b5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ac(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new ac(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Du(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Du(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Du(e,n)}buildRequest(){const e={requestUri:KB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends xy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Kh{constructor(){super("facebook.com")}static credential(e){return ac._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Da.credential(e.oauthAccessToken)}catch{return null}}}Da.FACEBOOK_SIGN_IN_METHOD="facebook.com";Da.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Kh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ac._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Os.credential(n,i)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Kh{constructor(){super("github.com")}static credential(e){return ac._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oa.credential(e.oauthAccessToken)}catch{return null}}}Oa.GITHUB_SIGN_IN_METHOD="github.com";Oa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Kh{constructor(){super("twitter.com")}static credential(e,n){return ac._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return La.credential(n,i)}catch{return null}}}La.TWITTER_SIGN_IN_METHOD="twitter.com";La.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Jr._fromIdTokenResponse(e,i,r),a=fk(i);return new $u({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=fk(i);return new $u({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function fk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Ho{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Zg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Zg(e,n,i,r)}}function _5(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zg._fromErrorAndOperation(t,s,e,i):s})}async function YB(t,e,n=!1){const i=await hh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $u._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e,n=!1){const{auth:i}=t;if(Kr(i.app))return Promise.reject(Jl(i));const r="reauthenticate";try{const s=await hh(t,_5(i,r,e,t),n);qe(s.idToken,i,"internal-error");const a=RS(s.idToken);qe(a,i,"internal-error");const{sub:u}=a;return qe(t.uid===u,i,"user-mismatch"),$u._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gs(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,e,n=!1){if(Kr(t.app))return Promise.reject(Jl(t));const i="signIn",r=await _5(t,i,e),s=await $u._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function JB(t,e,n,i){return Zi(t).onIdTokenChanged(e,n,i)}function QB(t,e,n){return Zi(t).beforeAuthStateChanged(e,n)}function MS(t,e,n,i){return Zi(t).onAuthStateChanged(e,n,i)}function ZB(t){return Zi(t).signOut()}const e0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(e0,"1"),this.storage.removeItem(e0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=1e3,t$=10;class S5 extends w5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,f)=>{this.notifyListeners(a,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);jB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,t$):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},e$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S5.type="LOCAL";const n$=S5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5 extends w5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T5.type="SESSION";const E5=T5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new by(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async d=>d(n.origin,s)),f=await i$(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}by.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((u,f)=>{const d=DS("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(y.data.response);break;default:clearTimeout(p),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return window}function s$(t){Vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function o$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function l$(){return N5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="firebaseLocalStorageDb",c$=1,t0="firebaseLocalStorage",A5="fbase_key";class Yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _y(t,e){return t.transaction([t0],e?"readwrite":"readonly").objectStore(t0)}function u$(){const t=indexedDB.deleteDatabase(C5);return new Yh(t).toPromise()}function K_(){const t=indexedDB.open(C5,c$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(t0,{keyPath:A5})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(t0)?e(i):(i.close(),await u$(),e(await K_()))})})}async function hk(t,e,n){const i=_y(t,!0).put({[A5]:e,value:n});return new Yh(i).toPromise()}async function d$(t,e){const n=_y(t,!1).get(e),i=await new Yh(n).toPromise();return i===void 0?null:i.value}function pk(t,e){const n=_y(t,!0).delete(e);return new Yh(n).toPromise()}const f$=800,h$=3;class k5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>h$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=by._getInstance(l$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await o$(),!this.activeServiceWorker)return;this.sender=new r$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await K_();return await hk(e,e0,"1"),await pk(e,e0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>hk(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>d$(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=_y(r,!1).getAll();return new Yh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k5.type="LOCAL";const p$=k5;new Gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t,e){return e?Eo(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends b5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m$(t){return XB(t.auth,new LS(t),t.bypassAuthState)}function g$(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),WB(n,new LS(t),t.bypassAuthState)}async function y$(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),YB(n,new LS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m$;case"linkViaPopup":case"linkViaRedirect":return y$;case"reauthViaPopup":case"reauthViaRedirect":return g$;default:Gs(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$=new Gh(2e3,1e4);async function R5(t,e,n){if(Kr(t.app))return Promise.reject(ts(t,"operation-not-supported-in-this-environment"));const i=vy(t);r5(t,e,xy);const r=OS(i,n);return new Ua(i,"signInViaPopup",e,r).executeNotNull()}async function x$(t,e,n){const i=Zi(t);r5(i.auth,e,xy);const r=OS(i.auth,n);return new Ua(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Ua extends I5{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const e=DS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v$.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="pendingRedirect",Ag=new Map;class _$ extends I5{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ag.get(this.auth._key());if(!e){try{const i=await w$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ag.set(this.auth._key(),e)}return this.bypassAuthState||Ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w$(t,e){const n=E$(e),i=T$(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function S$(t,e){Ag.set(t._key(),e)}function T$(t){return Eo(t._redirectPersistence)}function E$(t){return Cg(b$,t.config.apiKey,t.name)}async function N$(t,e,n=!1){if(Kr(t.app))return Promise.reject(Jl(t));const i=vy(t),r=OS(i,e),a=await new _$(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=600*1e3;class A${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!j5(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ts(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C$&&this.cachedEventUids.clear(),this.cachedEventUids.has(mk(e))}saveEventToCache(e){this.cachedEventUids.add(mk(e)),this.lastProcessedEventTime=Date.now()}}function mk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j5({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j5(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I$(t,e={}){return ad(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j$=/^https?/;async function P$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I$(t);for(const n of e)try{if(M$(n))return}catch{}Gs(t,"unauthorized-domain")}function M$(t){const e=q_(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!j$.test(n))return!1;if(R$.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=new Gh(3e4,6e4);function gk(){const t=Vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function O$(t){return new Promise((e,n)=>{var r,s,a;function i(){gk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gk(),n(ts(t,"network-request-failed"))},timeout:D$.get()})}if((s=(r=Vs().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Vs().gapi)!=null&&a.load)i();else{const u=FB("iframefcb");return Vs()[u]=()=>{gapi.load?i():n(ts(t,"network-request-failed"))},UB(`${VB()}?onload=${u}`).catch(f=>n(f))}}).catch(e=>{throw kg=null,e})}let kg=null;function L$(t){return kg=kg||O$(t),kg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=new Gh(5e3,15e3),U$="__/auth/iframe",V$="emulator/auth/iframe",F$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B$(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kS(e,V$):`https://${t.config.authDomain}/${U$}`,i={apiKey:e.apiKey,appName:t.name,v:od},r=H$.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${qh(i).slice(1)}`}async function $$(t){const e=await L$(t),n=Vs().gapi;return qe(n,t,"internal-error"),e.open({where:document.body,url:B$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F$,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=ts(t,"network-request-failed"),u=Vs().setTimeout(()=>{s(a)},z$.get());function f(){Vs().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G$=500,K$=600,Y$="_blank",W$="http://localhost";class yk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X$(t,e,n,i=G$,r=K$){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f={...q$,width:i.toString(),height:r.toString(),top:s,left:a},d=di().toLowerCase();n&&(u=f5(d)?Y$:n),u5(d)&&(e=e||W$,f.scrollbars="yes");const p=Object.entries(f).reduce((y,[b,S])=>`${y}${b}=${S},`,"");if(RB(d)&&u!=="_self")return J$(e||"",u),new yk(null);const m=window.open(e||"",u,p);qe(m,t,"popup-blocked");try{m.focus()}catch{}return new yk(m)}function J$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$="__/auth/handler",Z$="emulator/auth/handler",eq=encodeURIComponent("fac");async function vk(t,e,n,i,r,s){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:od,eventId:r};if(e instanceof xy){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ZF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof Kh){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await t._getAppCheckToken(),d=f?`#${eq}=${encodeURIComponent(f)}`:"";return`${tq(t)}?${qh(u).slice(1)}${d}`}function tq({config:t}){return t.emulator?kS(t,Z$):`https://${t.authDomain}/${Q$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="webStorageSupport";class nq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E5,this._completeRedirectFn=N$,this._overrideRedirectResult=S$}async _openPopup(e,n,i,r){var a;Ro((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await vk(e,n,i,q_(),r);return X$(e,s,DS())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await vk(e,n,i,q_(),r);return s$(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ro(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await $$(e),i=new A$(e);return n.register("authEvent",r=>(qe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gb,{type:Gb},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[Gb];s!==void 0&&n(!!s),Gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=P$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y5()||d5()||jS()}}const iq=nq;var xk="@firebase/auth",bk="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oq(t){Bu(new oc("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;qe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v5(t)},d=new LB(i,r,s,f);return BB(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Bu(new oc("auth-internal",e=>{const n=vy(e.getProvider("auth").getImmediate());return(i=>new rq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qa(xk,bk,sq(t)),qa(xk,bk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq=300,lq=KO("authIdTokenMaxAge")||aq;let _k=null;const cq=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>lq)return;const r=n==null?void 0:n.token;_k!==r&&(_k=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function uq(t=ZO()){const e=NS(t,"auth");if(e.isInitialized())return e.getImmediate();const n=HB(t,{popupRedirectResolver:iq,persistence:[p$,n$,E5]}),i=KO("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=cq(s.toString());QB(n,a,()=>a(n.currentUser)),JB(n,u=>a(u))}}const r=qO("auth");return r&&$B(n,`http://${r}`),n}function dq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}zB({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=ts("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",dq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oq("Browser");var wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ga,P5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function M(){}M.prototype=A.prototype,I.F=A.prototype,I.prototype=new M,I.prototype.constructor=I,I.D=function(H,F,D){for(var z=Array(arguments.length-2),$=2;$<arguments.length;$++)z[$-2]=arguments[$];return A.prototype[F].apply(H,z)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,A,M){M||(M=0);const H=Array(16);if(typeof A=="string")for(var F=0;F<16;++F)H[F]=A.charCodeAt(M++)|A.charCodeAt(M++)<<8|A.charCodeAt(M++)<<16|A.charCodeAt(M++)<<24;else for(F=0;F<16;++F)H[F]=A[M++]|A[M++]<<8|A[M++]<<16|A[M++]<<24;A=I.g[0],M=I.g[1],F=I.g[2];let D=I.g[3],z;z=A+(D^M&(F^D))+H[0]+3614090360&4294967295,A=M+(z<<7&4294967295|z>>>25),z=D+(F^A&(M^F))+H[1]+3905402710&4294967295,D=A+(z<<12&4294967295|z>>>20),z=F+(M^D&(A^M))+H[2]+606105819&4294967295,F=D+(z<<17&4294967295|z>>>15),z=M+(A^F&(D^A))+H[3]+3250441966&4294967295,M=F+(z<<22&4294967295|z>>>10),z=A+(D^M&(F^D))+H[4]+4118548399&4294967295,A=M+(z<<7&4294967295|z>>>25),z=D+(F^A&(M^F))+H[5]+1200080426&4294967295,D=A+(z<<12&4294967295|z>>>20),z=F+(M^D&(A^M))+H[6]+2821735955&4294967295,F=D+(z<<17&4294967295|z>>>15),z=M+(A^F&(D^A))+H[7]+4249261313&4294967295,M=F+(z<<22&4294967295|z>>>10),z=A+(D^M&(F^D))+H[8]+1770035416&4294967295,A=M+(z<<7&4294967295|z>>>25),z=D+(F^A&(M^F))+H[9]+2336552879&4294967295,D=A+(z<<12&4294967295|z>>>20),z=F+(M^D&(A^M))+H[10]+4294925233&4294967295,F=D+(z<<17&4294967295|z>>>15),z=M+(A^F&(D^A))+H[11]+2304563134&4294967295,M=F+(z<<22&4294967295|z>>>10),z=A+(D^M&(F^D))+H[12]+1804603682&4294967295,A=M+(z<<7&4294967295|z>>>25),z=D+(F^A&(M^F))+H[13]+4254626195&4294967295,D=A+(z<<12&4294967295|z>>>20),z=F+(M^D&(A^M))+H[14]+2792965006&4294967295,F=D+(z<<17&4294967295|z>>>15),z=M+(A^F&(D^A))+H[15]+1236535329&4294967295,M=F+(z<<22&4294967295|z>>>10),z=A+(F^D&(M^F))+H[1]+4129170786&4294967295,A=M+(z<<5&4294967295|z>>>27),z=D+(M^F&(A^M))+H[6]+3225465664&4294967295,D=A+(z<<9&4294967295|z>>>23),z=F+(A^M&(D^A))+H[11]+643717713&4294967295,F=D+(z<<14&4294967295|z>>>18),z=M+(D^A&(F^D))+H[0]+3921069994&4294967295,M=F+(z<<20&4294967295|z>>>12),z=A+(F^D&(M^F))+H[5]+3593408605&4294967295,A=M+(z<<5&4294967295|z>>>27),z=D+(M^F&(A^M))+H[10]+38016083&4294967295,D=A+(z<<9&4294967295|z>>>23),z=F+(A^M&(D^A))+H[15]+3634488961&4294967295,F=D+(z<<14&4294967295|z>>>18),z=M+(D^A&(F^D))+H[4]+3889429448&4294967295,M=F+(z<<20&4294967295|z>>>12),z=A+(F^D&(M^F))+H[9]+568446438&4294967295,A=M+(z<<5&4294967295|z>>>27),z=D+(M^F&(A^M))+H[14]+3275163606&4294967295,D=A+(z<<9&4294967295|z>>>23),z=F+(A^M&(D^A))+H[3]+4107603335&4294967295,F=D+(z<<14&4294967295|z>>>18),z=M+(D^A&(F^D))+H[8]+1163531501&4294967295,M=F+(z<<20&4294967295|z>>>12),z=A+(F^D&(M^F))+H[13]+2850285829&4294967295,A=M+(z<<5&4294967295|z>>>27),z=D+(M^F&(A^M))+H[2]+4243563512&4294967295,D=A+(z<<9&4294967295|z>>>23),z=F+(A^M&(D^A))+H[7]+1735328473&4294967295,F=D+(z<<14&4294967295|z>>>18),z=M+(D^A&(F^D))+H[12]+2368359562&4294967295,M=F+(z<<20&4294967295|z>>>12),z=A+(M^F^D)+H[5]+4294588738&4294967295,A=M+(z<<4&4294967295|z>>>28),z=D+(A^M^F)+H[8]+2272392833&4294967295,D=A+(z<<11&4294967295|z>>>21),z=F+(D^A^M)+H[11]+1839030562&4294967295,F=D+(z<<16&4294967295|z>>>16),z=M+(F^D^A)+H[14]+4259657740&4294967295,M=F+(z<<23&4294967295|z>>>9),z=A+(M^F^D)+H[1]+2763975236&4294967295,A=M+(z<<4&4294967295|z>>>28),z=D+(A^M^F)+H[4]+1272893353&4294967295,D=A+(z<<11&4294967295|z>>>21),z=F+(D^A^M)+H[7]+4139469664&4294967295,F=D+(z<<16&4294967295|z>>>16),z=M+(F^D^A)+H[10]+3200236656&4294967295,M=F+(z<<23&4294967295|z>>>9),z=A+(M^F^D)+H[13]+681279174&4294967295,A=M+(z<<4&4294967295|z>>>28),z=D+(A^M^F)+H[0]+3936430074&4294967295,D=A+(z<<11&4294967295|z>>>21),z=F+(D^A^M)+H[3]+3572445317&4294967295,F=D+(z<<16&4294967295|z>>>16),z=M+(F^D^A)+H[6]+76029189&4294967295,M=F+(z<<23&4294967295|z>>>9),z=A+(M^F^D)+H[9]+3654602809&4294967295,A=M+(z<<4&4294967295|z>>>28),z=D+(A^M^F)+H[12]+3873151461&4294967295,D=A+(z<<11&4294967295|z>>>21),z=F+(D^A^M)+H[15]+530742520&4294967295,F=D+(z<<16&4294967295|z>>>16),z=M+(F^D^A)+H[2]+3299628645&4294967295,M=F+(z<<23&4294967295|z>>>9),z=A+(F^(M|~D))+H[0]+4096336452&4294967295,A=M+(z<<6&4294967295|z>>>26),z=D+(M^(A|~F))+H[7]+1126891415&4294967295,D=A+(z<<10&4294967295|z>>>22),z=F+(A^(D|~M))+H[14]+2878612391&4294967295,F=D+(z<<15&4294967295|z>>>17),z=M+(D^(F|~A))+H[5]+4237533241&4294967295,M=F+(z<<21&4294967295|z>>>11),z=A+(F^(M|~D))+H[12]+1700485571&4294967295,A=M+(z<<6&4294967295|z>>>26),z=D+(M^(A|~F))+H[3]+2399980690&4294967295,D=A+(z<<10&4294967295|z>>>22),z=F+(A^(D|~M))+H[10]+4293915773&4294967295,F=D+(z<<15&4294967295|z>>>17),z=M+(D^(F|~A))+H[1]+2240044497&4294967295,M=F+(z<<21&4294967295|z>>>11),z=A+(F^(M|~D))+H[8]+1873313359&4294967295,A=M+(z<<6&4294967295|z>>>26),z=D+(M^(A|~F))+H[15]+4264355552&4294967295,D=A+(z<<10&4294967295|z>>>22),z=F+(A^(D|~M))+H[6]+2734768916&4294967295,F=D+(z<<15&4294967295|z>>>17),z=M+(D^(F|~A))+H[13]+1309151649&4294967295,M=F+(z<<21&4294967295|z>>>11),z=A+(F^(M|~D))+H[4]+4149444226&4294967295,A=M+(z<<6&4294967295|z>>>26),z=D+(M^(A|~F))+H[11]+3174756917&4294967295,D=A+(z<<10&4294967295|z>>>22),z=F+(A^(D|~M))+H[2]+718787259&4294967295,F=D+(z<<15&4294967295|z>>>17),z=M+(D^(F|~A))+H[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(F+(z<<21&4294967295|z>>>11))&4294967295,I.g[2]=I.g[2]+F&4294967295,I.g[3]=I.g[3]+D&4294967295}i.prototype.v=function(I,A){A===void 0&&(A=I.length);const M=A-this.blockSize,H=this.C;let F=this.h,D=0;for(;D<A;){if(F==0)for(;D<=M;)r(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<A;)if(H[F++]=I.charCodeAt(D++),F==this.blockSize){r(this,H),F=0;break}}else for(;D<A;)if(H[F++]=I[D++],F==this.blockSize){r(this,H),F=0;break}}this.h=F,this.o+=A},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var M=I.length-8;M<I.length;++M)I[M]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,M=0;M<4;++M)for(let H=0;H<32;H+=8)I[A++]=this.g[M]>>>H&255;return I};function s(I,A){var M=u;return Object.prototype.hasOwnProperty.call(M,I)?M[I]:M[I]=A(I)}function a(I,A){this.h=A;const M=[];let H=!0;for(let F=I.length-1;F>=0;F--){const D=I[F]|0;H&&D==A||(M[F]=D,H=!1)}this.g=M}var u={};function f(I){return-128<=I&&I<128?s(I,function(A){return new a([A|0],A<0?-1:0)}):new a([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return m;if(I<0)return E(d(-I));const A=[];let M=1;for(let H=0;I>=M;H++)A[H]=I/M|0,M*=4294967296;return new a(A,0)}function p(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return E(p(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=d(Math.pow(A,8));let H=m;for(let D=0;D<I.length;D+=8){var F=Math.min(8,I.length-D);const z=parseInt(I.substring(D,D+F),A);F<8?(F=d(Math.pow(A,F)),H=H.j(F).add(d(z))):(H=H.j(M),H=H.add(d(z)))}return H}var m=f(0),y=f(1),b=f(16777216);t=a.prototype,t.m=function(){if(N(this))return-E(this).m();let I=0,A=1;for(let M=0;M<this.g.length;M++){const H=this.i(M);I+=(H>=0?H:4294967296+H)*A,A*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(N(this))return"-"+E(this).toString(I);const A=d(Math.pow(I,6));var M=this;let H="";for(;;){const F=B(M,A).g;M=R(M,F.j(A));let D=((M.g.length>0?M.g[0]:M.h)>>>0).toString(I);if(M=F,S(M))return D+H;for(;D.length<6;)D="0"+D;H=D+H}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=R(this,I),N(I)?-1:S(I)?0:1};function E(I){const A=I.g.length,M=[];for(let H=0;H<A;H++)M[H]=~I.g[H];return new a(M,~I.h).add(y)}t.abs=function(){return N(this)?E(this):this},t.add=function(I){const A=Math.max(this.g.length,I.g.length),M=[];let H=0;for(let F=0;F<=A;F++){let D=H+(this.i(F)&65535)+(I.i(F)&65535),z=(D>>>16)+(this.i(F)>>>16)+(I.i(F)>>>16);H=z>>>16,D&=65535,z&=65535,M[F]=z<<16|D}return new a(M,M[M.length-1]&-2147483648?-1:0)};function R(I,A){return I.add(E(A))}t.j=function(I){if(S(this)||S(I))return m;if(N(this))return N(I)?E(this).j(E(I)):E(E(this).j(I));if(N(I))return E(this.j(E(I)));if(this.l(b)<0&&I.l(b)<0)return d(this.m()*I.m());const A=this.g.length+I.g.length,M=[];for(var H=0;H<2*A;H++)M[H]=0;for(H=0;H<this.g.length;H++)for(let F=0;F<I.g.length;F++){const D=this.i(H)>>>16,z=this.i(H)&65535,$=I.i(F)>>>16,Y=I.i(F)&65535;M[2*H+2*F]+=z*Y,U(M,2*H+2*F),M[2*H+2*F+1]+=D*Y,U(M,2*H+2*F+1),M[2*H+2*F+1]+=z*$,U(M,2*H+2*F+1),M[2*H+2*F+2]+=D*$,U(M,2*H+2*F+2)}for(I=0;I<A;I++)M[I]=M[2*I+1]<<16|M[2*I];for(I=A;I<2*A;I++)M[I]=0;return new a(M,0)};function U(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function j(I,A){this.g=I,this.h=A}function B(I,A){if(S(A))throw Error("division by zero");if(S(I))return new j(m,m);if(N(I))return A=B(E(I),A),new j(E(A.g),E(A.h));if(N(A))return A=B(I,E(A)),new j(E(A.g),A.h);if(I.g.length>30){if(N(I)||N(A))throw Error("slowDivide_ only works with positive integers.");for(var M=y,H=A;H.l(I)<=0;)M=O(M),H=O(H);var F=P(M,1),D=P(H,1);for(H=P(H,2),M=P(M,2);!S(H);){var z=D.add(H);z.l(I)<=0&&(F=F.add(M),D=z),H=P(H,1),M=P(M,1)}return A=R(I,F.j(A)),new j(F,A)}for(F=m;I.l(A)>=0;){for(M=Math.max(1,Math.floor(I.m()/A.m())),H=Math.ceil(Math.log(M)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),D=d(M),z=D.j(A);N(z)||z.l(I)>0;)M-=H,D=d(M),z=D.j(A);S(D)&&(D=y),F=F.add(D),I=R(I,z)}return new j(F,I)}t.B=function(I){return B(this,I).h},t.and=function(I){const A=Math.max(this.g.length,I.g.length),M=[];for(let H=0;H<A;H++)M[H]=this.i(H)&I.i(H);return new a(M,this.h&I.h)},t.or=function(I){const A=Math.max(this.g.length,I.g.length),M=[];for(let H=0;H<A;H++)M[H]=this.i(H)|I.i(H);return new a(M,this.h|I.h)},t.xor=function(I){const A=Math.max(this.g.length,I.g.length),M=[];for(let H=0;H<A;H++)M[H]=this.i(H)^I.i(H);return new a(M,this.h^I.h)};function O(I){const A=I.g.length+1,M=[];for(let H=0;H<A;H++)M[H]=I.i(H)<<1|I.i(H-1)>>>31;return new a(M,I.h)}function P(I,A){const M=A>>5;A%=32;const H=I.g.length-M,F=[];for(let D=0;D<H;D++)F[D]=A>0?I.i(D+M)>>>A|I.i(D+M+1)<<32-A:I.i(D+M);return new a(F,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,P5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ga=a}).apply(typeof wk<"u"?wk:typeof self<"u"?self:typeof window<"u"?window:{});var Wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M5,Wf,D5,Ig,Y_,O5,L5,z5;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wm=="object"&&Wm];for(var k=0;k<_.length;++k){var V=_[k];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var i=n(this);function r(_,k){if(k)e:{var V=i;_=_.split(".");for(var G=0;G<_.length-1;G++){var ie=_[G];if(!(ie in V))break e;V=V[ie]}_=_[_.length-1],G=V[_],k=k(G),k!=G&&k!=null&&e(V,_,{configurable:!0,writable:!0,value:k})}}r("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(_){return _||function(k){var V=[],G;for(G in k)Object.prototype.hasOwnProperty.call(k,G)&&V.push([G,k[G]]);return V}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(_){var k=typeof _;return k=="object"&&_!=null||k=="function"}function f(_,k,V){return _.call.apply(_.bind,arguments)}function d(_,k,V){return d=f,d.apply(null,arguments)}function p(_,k){var V=Array.prototype.slice.call(arguments,1);return function(){var G=V.slice();return G.push.apply(G,arguments),_.apply(this,G)}}function m(_,k){function V(){}V.prototype=k.prototype,_.Z=k.prototype,_.prototype=new V,_.prototype.constructor=_,_.Ob=function(G,ie,ce){for(var Ce=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Ce[Ze-2]=arguments[Ze];return k.prototype[ie].apply(G,Ce)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function b(_){const k=_.length;if(k>0){const V=Array(k);for(let G=0;G<k;G++)V[G]=_[G];return V}return[]}function S(_,k){for(let G=1;G<arguments.length;G++){const ie=arguments[G];var V=typeof ie;if(V=V!="object"?V:ie?Array.isArray(ie)?"array":V:"null",V=="array"||V=="object"&&typeof ie.length=="number"){V=_.length||0;const ce=ie.length||0;_.length=V+ce;for(let Ce=0;Ce<ce;Ce++)_[V+Ce]=ie[Ce]}else _.push(ie)}}class N{constructor(k,V){this.i=k,this.j=V,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function E(_){a.setTimeout(()=>{throw _},0)}function R(){var _=I;let k=null;return _.g&&(k=_.g,_.g=_.g.next,_.g||(_.h=null),k.next=null),k}class U{constructor(){this.h=this.g=null}add(k,V){const G=j.get();G.set(k,V),this.h?this.h.next=G:this.g=G,this.h=G}}var j=new N(()=>new B,_=>_.reset());class B{constructor(){this.next=this.g=this.h=null}set(k,V){this.h=k,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let O,P=!1,I=new U,A=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(M)}};function M(){for(var _;_=R();){try{_.h.call(_.g)}catch(V){E(V)}var k=j;k.j(_),k.h<100&&(k.h++,_.next=k.g,k.g=_)}P=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(_,k){this.type=_,this.g=this.target=k,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,k=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const V=()=>{};a.addEventListener("test",V,k),a.removeEventListener("test",V,k)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function $(_,k){F.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,k)}m($,F),$.prototype.init=function(_,k){const V=this.type=_.type,G=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=k,k=_.relatedTarget,k||(V=="mouseover"?k=_.fromElement:V=="mouseout"&&(k=_.toElement)),this.relatedTarget=k,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),W=0;function X(_,k,V,G,ie){this.listener=_,this.proxy=null,this.src=k,this.type=V,this.capture=!!G,this.ha=ie,this.key=++W,this.da=this.fa=!1}function oe(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ve(_,k,V){for(const G in _)k.call(V,_[G],G,_)}function Ee(_,k){for(const V in _)k.call(void 0,_[V],V,_)}function K(_){const k={};for(const V in _)k[V]=_[V];return k}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(_,k){let V,G;for(let ie=1;ie<arguments.length;ie++){G=arguments[ie];for(V in G)_[V]=G[V];for(let ce=0;ce<te.length;ce++)V=te[ce],Object.prototype.hasOwnProperty.call(G,V)&&(_[V]=G[V])}}function Z(_){this.src=_,this.g={},this.h=0}Z.prototype.add=function(_,k,V,G,ie){const ce=_.toString();_=this.g[ce],_||(_=this.g[ce]=[],this.h++);const Ce=Ne(_,k,G,ie);return Ce>-1?(k=_[Ce],V||(k.fa=!1)):(k=new X(k,this.src,ce,!!G,ie),k.fa=V,_.push(k)),k};function he(_,k){const V=k.type;if(V in _.g){var G=_.g[V],ie=Array.prototype.indexOf.call(G,k,void 0),ce;(ce=ie>=0)&&Array.prototype.splice.call(G,ie,1),ce&&(oe(k),_.g[V].length==0&&(delete _.g[V],_.h--))}}function Ne(_,k,V,G){for(let ie=0;ie<_.length;++ie){const ce=_[ie];if(!ce.da&&ce.listener==k&&ce.capture==!!V&&ce.ha==G)return ie}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),ue={};function re(_,k,V,G,ie){if(Array.isArray(k)){for(let ce=0;ce<k.length;ce++)re(_,k[ce],V,G,ie);return null}return V=Mr(V),_&&_[Y]?_.J(k,V,u(G)?!!G.capture:!1,ie):Re(_,k,V,!1,G,ie)}function Re(_,k,V,G,ie,ce){if(!k)throw Error("Invalid event type");const Ce=u(ie)?!!ie.capture:!!ie;let Ze=Ue(_);if(Ze||(_[pe]=Ze=new Z(_)),V=Ze.add(k,V,G,Ce,ce),V.proxy)return V;if(G=$e(),V.proxy=G,G.src=_,G.listener=V,_.addEventListener)D||(ie=Ce),ie===void 0&&(ie=!1),_.addEventListener(k.toString(),G,ie);else if(_.attachEvent)_.attachEvent(Xe(k.toString()),G);else if(_.addListener&&_.removeListener)_.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return V}function $e(){function _(V){return k.call(_.src,_.listener,V)}const k=we;return _}function Se(_,k,V,G,ie){if(Array.isArray(k))for(var ce=0;ce<k.length;ce++)Se(_,k[ce],V,G,ie);else G=u(G)?!!G.capture:!!G,V=Mr(V),_&&_[Y]?(_=_.i,ce=String(k).toString(),ce in _.g&&(k=_.g[ce],V=Ne(k,V,G,ie),V>-1&&(oe(k[V]),Array.prototype.splice.call(k,V,1),k.length==0&&(delete _.g[ce],_.h--)))):_&&(_=Ue(_))&&(k=_.g[k.toString()],_=-1,k&&(_=Ne(k,V,G,ie)),(V=_>-1?k[_]:null)&&Bt(V))}function Bt(_){if(typeof _!="number"&&_&&!_.da){var k=_.src;if(k&&k[Y])he(k.i,_);else{var V=_.type,G=_.proxy;k.removeEventListener?k.removeEventListener(V,G,_.capture):k.detachEvent?k.detachEvent(Xe(V),G):k.addListener&&k.removeListener&&k.removeListener(G),(V=Ue(k))?(he(V,_),V.h==0&&(V.src=null,k[pe]=null)):oe(_)}}}function Xe(_){return _ in ue?ue[_]:ue[_]="on"+_}function we(_,k){if(_.da)_=!0;else{k=new $(k,this);const V=_.listener,G=_.ha||_.src;_.fa&&Bt(_),_=V.call(G,k)}return _}function Ue(_){return _=_[pe],_ instanceof Z?_:null}var Ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mr(_){return typeof _=="function"?_:(_[Ke]||(_[Ke]=function(k){return _.handleEvent(k)}),_[Ke])}function $t(){H.call(this),this.i=new Z(this),this.M=this,this.G=null}m($t,H),$t.prototype[Y]=!0,$t.prototype.removeEventListener=function(_,k,V,G){Se(this,_,k,V,G)};function gn(_,k){var V,G=_.G;if(G)for(V=[];G;G=G.G)V.push(G);if(_=_.M,G=k.type||k,typeof k=="string")k=new F(k,_);else if(k instanceof F)k.target=k.target||_;else{var ie=k;k=new F(G,_),ge(k,ie)}ie=!0;let ce,Ce;if(V)for(Ce=V.length-1;Ce>=0;Ce--)ce=k.g=V[Ce],ie=Zo(ce,G,!0,k)&&ie;if(ce=k.g=_,ie=Zo(ce,G,!0,k)&&ie,ie=Zo(ce,G,!1,k)&&ie,V)for(Ce=0;Ce<V.length;Ce++)ce=k.g=V[Ce],ie=Zo(ce,G,!1,k)&&ie}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var _=this.i;for(const k in _.g){const V=_.g[k];for(let G=0;G<V.length;G++)oe(V[G]);delete _.g[k],_.h--}}this.G=null},$t.prototype.J=function(_,k,V,G){return this.i.add(String(_),k,!1,V,G)},$t.prototype.K=function(_,k,V,G){return this.i.add(String(_),k,!0,V,G)};function Zo(_,k,V,G){if(k=_.i.g[String(k)],!k)return!0;k=k.concat();let ie=!0;for(let ce=0;ce<k.length;++ce){const Ce=k[ce];if(Ce&&!Ce.da&&Ce.capture==V){const Ze=Ce.listener,en=Ce.ha||Ce.src;Ce.fa&&he(_.i,Ce),ie=Ze.call(en,G)!==!1&&ie}}return ie&&!G.defaultPrevented}function Pv(_,k){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=d(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:a.setTimeout(_,k||0)}function vp(_){_.g=Pv(()=>{_.g=null,_.i&&(_.i=!1,vp(_))},_.l);const k=_.h;_.h=null,_.m.apply(null,k)}class mi extends H{constructor(k,V){super(),this.m=k,this.l=V,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:vp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ul(_){H.call(this),this.h=_,this.g={}}m(ul,H);var Id=[];function Rd(_){ve(_.g,function(k,V){this.g.hasOwnProperty(V)&&Bt(k)},_),_.g={}}ul.prototype.N=function(){ul.Z.N.call(this),Rd(this)},ul.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ea=a.JSON.stringify,Mv=a.JSON.parse,xp=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function bp(){}function _p(){}var Dr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hn(){F.call(this,"d")}m(Hn,F);function sr(){F.call(this,"c")}m(sr,F);var Zt={},wp=null;function Ac(){return wp=wp||new $t}Zt.Ia="serverreachability";function Sp(_){F.call(this,Zt.Ia,_)}m(Sp,F);function us(_){const k=Ac();gn(k,new Sp(k))}Zt.STAT_EVENT="statevent";function dl(_,k){F.call(this,Zt.STAT_EVENT,_),this.stat=k}m(dl,F);function sn(_){const k=Ac();gn(k,new dl(k,_))}Zt.Ja="timingevent";function ds(_,k){F.call(this,Zt.Ja,_),this.size=k}m(ds,F);function fs(_,k){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},k)}function Or(){this.g=!0}Or.prototype.ua=function(){this.g=!1};function Dv(_,k,V,G,ie,ce){_.info(function(){if(_.g)if(ce){var Ce="",Ze=ce.split("&");for(let yt=0;yt<Ze.length;yt++){var en=Ze[yt].split("=");if(en.length>1){const zt=en[0];en=en[1];const cr=zt.split("_");Ce=cr.length>=2&&cr[1]=="type"?Ce+(zt+"="+en+"&"):Ce+(zt+"=redacted&")}}}else Ce=null;else Ce=ce;return"XMLHTTP REQ ("+G+") [attempt "+ie+"]: "+k+`
`+V+`
`+Ce})}function Tp(_,k,V,G,ie,ce,Ce){_.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ie+"]: "+k+`
`+V+`
`+ce+" "+Ce})}function hs(_,k,V,G){_.info(function(){return"XMLHTTP TEXT ("+k+"): "+Ov(_,V)+(G?" "+G:"")})}function fl(_,k){_.info(function(){return"TIMEOUT: "+k})}Or.prototype.info=function(){};function Ov(_,k){if(!_.g)return k;if(!k)return null;try{const ce=JSON.parse(k);if(ce){for(_=0;_<ce.length;_++)if(Array.isArray(ce[_])){var V=ce[_];if(!(V.length<2)){var G=V[1];if(Array.isArray(G)&&!(G.length<1)){var ie=G[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Ce=1;Ce<G.length;Ce++)G[Ce]=""}}}}return ea(ce)}catch{return k}}var hl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pd;function pl(){}m(pl,bp),pl.prototype.g=function(){return new XMLHttpRequest},Pd=new pl;function no(_){return encodeURIComponent(String(_))}function Ep(_){var k=1;_=_.split(":");const V=[];for(;k>0&&_.length;)V.push(_.shift()),k--;return _.length&&V.push(_.join(":")),V}function Lr(_,k,V,G){this.j=_,this.i=k,this.l=V,this.S=G||1,this.V=new ul(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zr}function zr(){this.i=null,this.g="",this.h=!1}var on={},Nn={};function ps(_,k,V){_.M=1,_.A=ml(ln(k)),_.u=V,_.R=!0,kc(_,null)}function kc(_,k){_.F=Date.now(),ms(_),_.B=ln(_.A);var V=_.B,G=_.S;Array.isArray(G)||(G=[String(G)]),Pc(V.i,"t",G),_.C=0,V=_.j.L,_.h=new zr,_.g=Vp(_.j,V?k:null,!_.u),_.P>0&&(_.O=new mi(d(_.Y,_,_.g),_.P)),k=_.V,V=_.g,G=_.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(Id[0]=ie.toString()),ie=Id);for(let ce=0;ce<ie.length;ce++){const Ce=re(V,ie[ce],G||k.handleEvent,!1,k.h||k);if(!Ce)break;k.g[Ce.key]=Ce}k=_.J?K(_.J):{},_.u?(_.v||(_.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,k)):(_.v="GET",_.g.ea(_.B,_.v,null,k)),us(),Dv(_.i,_.v,_.B,_.l,_.S,_.u)}Lr.prototype.ba=function(_){_=_.target;const k=this.O;k&&Fr(_)==3?k.j():this.Y(_)},Lr.prototype.Y=function(_){try{if(_==this.g)e:{const Ze=Fr(this.g),en=this.g.ya(),yt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||Bn(this.g)))){this.K||Ze!=4||en==7||(en==8||yt<=0?us(3):us(2)),gs(this);var k=this.g.ca();this.X=k;var V=Lv(this);if(this.o=k==200,Tp(this.i,this.v,this.B,this.l,this.S,Ze,k),this.o){if(this.U&&!this.L){t:{if(this.g){var G,ie=this.g;if((G=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(G)){var ce=G;break t}}ce=null}if(_=ce)hs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ys(this,_);else{this.o=!1,this.m=3,sn(12),Ui(this),or(this);break e}}if(this.R){_=!0;let zt;for(;!this.K&&this.C<V.length;)if(zt=Cp(this,V),zt==Nn){Ze==4&&(this.m=4,sn(14),_=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==on){this.m=4,sn(15),hs(this.i,this.l,V,"[Invalid Chunk]"),_=!1;break}else hs(this.i,this.l,zt,null),ys(this,zt);if(Np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||V.length!=0||this.h.h||(this.m=1,sn(16),_=!1),this.o=this.o&&_,!_)hs(this.i,this.l,V,"[Invalid Chunked Response]"),Ui(this),or(this);else if(V.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Yd(Ce),Ce.P=!0,sn(11))}}else hs(this.i,this.l,V,null),ys(this,V);Ze==4&&Ui(this),this.o&&!this.K&&(Ze==4?Op(this.j,this):(this.o=!1,ms(this)))}else ro(this.g),k==400&&V.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),Ui(this),or(this)}}}catch{}finally{}};function Lv(_){if(!Np(_))return _.g.la();const k=Bn(_.g);if(k==="")return"";let V="";const G=k.length,ie=Fr(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Ui(_),or(_),"";_.h.i=new a.TextDecoder}for(let ce=0;ce<G;ce++)_.h.h=!0,V+=_.h.i.decode(k[ce],{stream:!(ie&&ce==G-1)});return k.length=0,_.h.g+=V,_.C=0,_.h.g}function Np(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function Cp(_,k){var V=_.C,G=k.indexOf(`
`,V);return G==-1?Nn:(V=Number(k.substring(V,G)),isNaN(V)?on:(G+=1,G+V>k.length?Nn:(k=k.slice(G,G+V),_.C=G+V,k)))}Lr.prototype.cancel=function(){this.K=!0,Ui(this)};function ms(_){_.T=Date.now()+_.H,Ic(_,_.H)}function Ic(_,k){if(_.D!=null)throw Error("WatchDog timer not null");_.D=fs(d(_.aa,_),k)}function gs(_){_.D&&(a.clearTimeout(_.D),_.D=null)}Lr.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(fl(this.i,this.B),this.M!=2&&(us(),sn(17)),Ui(this),this.m=2,or(this)):Ic(this,this.T-_)};function or(_){_.j.I==0||_.K||Op(_.j,_)}function Ui(_){gs(_);var k=_.O;k&&typeof k.dispose=="function"&&k.dispose(),_.O=null,Rd(_.V),_.g&&(k=_.g,_.g=null,k.abort(),k.dispose())}function ys(_,k){try{var V=_.j;if(V.I!=0&&(V.g==_||xs(V.h,_))){if(!_.L&&xs(V.h,_)&&V.I==3){try{var G=V.Ba.g.parse(k)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ie=G;if(ie[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<_.F)zc(V),la(V);else break e;wl(V),sn(18)}}else V.xa=ie[1],0<V.xa-V.K&&ie[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=fs(d(V.Va,V),6e3));vs(V.h)<=1&&V.ta&&(V.ta=void 0)}else Es(V,11)}else if((_.L||V.g==_)&&zc(V),!z(k))for(ie=V.Ba.g.parse(k),k=0;k<ie.length;k++){let yt=ie[k];const zt=yt[0];if(!(zt<=V.K))if(V.K=zt,yt=yt[1],V.I==2)if(yt[0]=="c"){V.M=yt[1],V.ba=yt[2];const cr=yt[3];cr!=null&&(V.ka=cr,V.j.info("VER="+V.ka));const Ns=yt[4];Ns!=null&&(V.za=Ns,V.j.info("SVER="+V.za));const Hr=yt[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(G=1.5*Hr,V.O=G,V.j.info("backChannelRequestTimeoutMs_="+G)),G=V;const Br=_.g;if(Br){const Sl=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var ce=G.h;ce.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Od(ce,ce.h),ce.h=null))}if(G.G){const Uc=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;Uc&&(G.wa=Uc,St(G.J,G.G,Uc))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-_.F,V.j.info("Handshake RTT: "+V.T+"ms")),G=V;var Ce=_;if(G.na=Up(G,G.L?G.ba:null,G.W),Ce.L){Ld(G.h,Ce);var Ze=Ce,en=G.O;en&&(Ze.H=en),Ze.D&&(gs(Ze),ms(Ze)),G.g=Ce}else Mp(G);V.i.length>0&&Ts(V)}else yt[0]!="stop"&&yt[0]!="close"||Es(V,7);else V.I==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Es(V,7):Gd(V):yt[0]!="noop"&&V.l&&V.l.qa(yt),V.A=0)}}us(4)}catch{}}var an=class{constructor(_,k){this.g=_,this.map=k}};function Md(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dd(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function vs(_){return _.h?1:_.g?_.g.size:0}function xs(_,k){return _.h?_.h==k:_.g?_.g.has(k):!1}function Od(_,k){_.g?_.g.add(k):_.h=k}function Ld(_,k){_.h&&_.h==k?_.h=null:_.g&&_.g.has(k)&&_.g.delete(k)}Md.prototype.cancel=function(){if(this.i=zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function zd(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let k=_.i;for(const V of _.g.values())k=k.concat(V.G);return k}return b(_.i)}var Ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rc(_,k){if(_){_=_.split("&");for(let V=0;V<_.length;V++){const G=_[V].indexOf("=");let ie,ce=null;G>=0?(ie=_[V].substring(0,G),ce=_[V].substring(G+1)):ie=_[V],k(ie,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Vi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;_ instanceof Vi?(this.l=_.l,Cn(this,_.j),this.o=_.o,this.g=_.g,ta(this,_.u),this.h=_.h,Ud(this,jp(_.i)),this.m=_.m):_&&(k=String(_).match(Ap))?(this.l=!1,Cn(this,k[1]||"",!0),this.o=bs(k[2]||""),this.g=bs(k[3]||"",!0),ta(this,k[4]),this.h=bs(k[5]||"",!0),Ud(this,k[6]||"",!0),this.m=bs(k[7]||"")):(this.l=!1,this.i=new ia(null,this.l))}Vi.prototype.toString=function(){const _=[];var k=this.j;k&&_.push(gl(k,jc,!0),":");var V=this.g;return(V||k=="file")&&(_.push("//"),(k=this.o)&&_.push(gl(k,jc,!0),"@"),_.push(no(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&_.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&_.push("/"),_.push(gl(V,V.charAt(0)=="/"?Vd:kp,!0))),(V=this.i.toString())&&_.push("?",V),(V=this.m)&&_.push("#",gl(V,Ip)),_.join("")},Vi.prototype.resolve=function(_){const k=ln(this);let V=!!_.j;V?Cn(k,_.j):V=!!_.o,V?k.o=_.o:V=!!_.g,V?k.g=_.g:V=_.u!=null;var G=_.h;if(V)ta(k,_.u);else if(V=!!_.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var ie=k.h.lastIndexOf("/");ie!=-1&&(G=k.h.slice(0,ie+1)+G)}if(ie=G,ie==".."||ie==".")G="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){G=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const ce=[];for(let Ce=0;Ce<ie.length;){const Ze=ie[Ce++];Ze=="."?G&&Ce==ie.length&&ce.push(""):Ze==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),G&&Ce==ie.length&&ce.push("")):(ce.push(Ze),G=!0)}G=ce.join("/")}else G=ie}return V?k.h=G:V=_.i.toString()!=="",V?Ud(k,jp(_.i)):V=!!_.m,V&&(k.m=_.m),k};function ln(_){return new Vi(_)}function Cn(_,k,V){_.j=V?bs(k,!0):k,_.j&&(_.j=_.j.replace(/:$/,""))}function ta(_,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);_.u=k}else _.u=null}function Ud(_,k,V){k instanceof ia?(_.i=k,Mc(_.i,_.l)):(V||(k=gl(k,na)),_.i=new ia(k,_.l))}function St(_,k,V){_.i.set(k,V)}function ml(_){return St(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function bs(_,k){return _?k?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function gl(_,k,V){return typeof _=="string"?(_=encodeURI(_).replace(k,Ei),V&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ei(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var jc=/[#\/\?@]/g,kp=/[#\?:]/g,Vd=/[#\?]/g,na=/[#\?@]/g,Ip=/#/g;function ia(_,k){this.h=this.g=null,this.i=_||null,this.j=!!k}function Ni(_){_.g||(_.g=new Map,_.h=0,_.i&&Rc(_.i,function(k,V){_.add(decodeURIComponent(k.replace(/\+/g," ")),V)}))}t=ia.prototype,t.add=function(_,k){Ni(this),this.i=null,_=ra(this,_);let V=this.g.get(_);return V||this.g.set(_,V=[]),V.push(k),this.h+=1,this};function Rp(_,k){Ni(_),k=ra(_,k),_.g.has(k)&&(_.i=null,_.h-=_.g.get(k).length,_.g.delete(k))}function Fd(_,k){return Ni(_),k=ra(_,k),_.g.has(k)}t.forEach=function(_,k){Ni(this),this.g.forEach(function(V,G){V.forEach(function(ie){_.call(k,ie,G,this)},this)},this)};function Hd(_,k){Ni(_);let V=[];if(typeof k=="string")Fd(_,k)&&(V=V.concat(_.g.get(ra(_,k))));else for(_=Array.from(_.g.values()),k=0;k<_.length;k++)V=V.concat(_[k]);return V}t.set=function(_,k){return Ni(this),this.i=null,_=ra(this,_),Fd(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[k]),this.h+=1,this},t.get=function(_,k){return _?(_=Hd(this,_),_.length>0?String(_[0]):k):k};function Pc(_,k,V){Rp(_,k),V.length>0&&(_.i=null,_.g.set(ra(_,k),b(V)),_.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],k=Array.from(this.g.keys());for(let G=0;G<k.length;G++){var V=k[G];const ie=no(V);V=Hd(this,V);for(let ce=0;ce<V.length;ce++){let Ce=ie;V[ce]!==""&&(Ce+="="+no(V[ce])),_.push(Ce)}}return this.i=_.join("&")};function jp(_){const k=new ia;return k.i=_.i,_.g&&(k.g=new Map(_.g),k.h=_.h),k}function ra(_,k){return k=String(k),_.j&&(k=k.toLowerCase()),k}function Mc(_,k){k&&!_.j&&(Ni(_),_.i=null,_.g.forEach(function(V,G){const ie=G.toLowerCase();G!=ie&&(Rp(this,G),Pc(this,ie,V))},_)),_.j=k}function Ur(_,k){const V=new Or;if(a.Image){const G=new Image;G.onload=p(ar,V,"TestLoadImage: loaded",!0,k,G),G.onerror=p(ar,V,"TestLoadImage: error",!1,k,G),G.onabort=p(ar,V,"TestLoadImage: abort",!1,k,G),G.ontimeout=p(ar,V,"TestLoadImage: timeout",!1,k,G),a.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=_}else k(!1)}function Bd(_,k){const V=new Or,G=new AbortController,ie=setTimeout(()=>{G.abort(),ar(V,"TestPingServer: timeout",!1,k)},1e4);fetch(_,{signal:G.signal}).then(ce=>{clearTimeout(ie),ce.ok?ar(V,"TestPingServer: ok",!0,k):ar(V,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ie),ar(V,"TestPingServer: error",!1,k)})}function ar(_,k,V,G,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),G(V)}catch{}}function sa(){this.g=new xp}function _s(_){this.i=_.Sb||null,this.h=_.ab||!1}m(_s,bp),_s.prototype.g=function(){return new yl(this.i,this.h)};function yl(_,k){$t.call(this),this.H=_,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(yl,$t),t=yl.prototype,t.open=function(_,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=k,this.readyState=1,Vr(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(k.body=_),(this.H||a).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Vr(this)),this.g&&(this.readyState=3,Vr(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dc(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dc(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var k=_.value?_.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!_.done}))&&(this.response=this.responseText+=k)}_.done?oa(this):Vr(this),this.readyState==3&&Dc(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,oa(this))},t.Na=function(_){this.g&&(this.response=_,oa(this))},t.ga=function(){this.g&&oa(this)};function oa(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Vr(_)}t.setRequestHeader=function(_,k){this.A.append(_,k)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],k=this.h.entries();for(var V=k.next();!V.done;)V=V.value,_.push(V[0]+": "+V[1]),V=k.next();return _.join(`\r
`)};function Vr(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function lr(_){let k="";return ve(_,function(V,G){k+=G,k+=":",k+=V,k+=`\r
`}),k}function vl(_,k,V){e:{for(G in V){var G=!1;break e}G=!0}G||(V=lr(V),typeof _=="string"?V!=null&&no(V):St(_,k,V))}function Ct(_){$t.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ct,$t);var ws=/^https?$/i,$d=["POST","PUT"];t=Ct.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,k,V,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);k=k?k.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pd.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(k,String(_),!0),this.B=!1}catch(ce){xl(this,ce);return}if(_=V||"",V=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ie in G)V.set(ie,G[ie]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ce of G.keys())V.set(ce,G.get(ce));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(V.keys()).find(ce=>ce.toLowerCase()=="content-type"),ie=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call($d,k,void 0)>=0)||G||ie||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Ce]of V)this.g.setRequestHeader(ce,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(ce){xl(this,ce)}};function xl(_,k){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=k,_.o=5,qd(_),io(_)}function qd(_){_.A||(_.A=!0,gn(_,"complete"),gn(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,gn(this,"complete"),gn(this,"abort"),io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),io(this,!0)),Ct.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?bl(this):this.Xa())},t.Xa=function(){bl(this)};function bl(_){if(_.h&&typeof s<"u"){if(_.v&&Fr(_)==4)setTimeout(_.Ca.bind(_),0);else if(gn(_,"readystatechange"),Fr(_)==4){_.h=!1;try{const ce=_.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var V;if(!(V=k)){var G;if(G=ce===0){let Ce=String(_.D).match(Ap)[1]||null;!Ce&&a.self&&a.self.location&&(Ce=a.self.location.protocol.slice(0,-1)),G=!ws.test(Ce?Ce.toLowerCase():"")}V=G}if(V)gn(_,"complete"),gn(_,"success");else{_.o=6;try{var ie=Fr(_)>2?_.g.statusText:""}catch{ie=""}_.l=ie+" ["+_.ca()+"]",qd(_)}}finally{io(_)}}}}function io(_,k){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const V=_.g;_.g=null,k||gn(_,"ready");try{V.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fr(_){return _.g?_.g.readyState:0}t.ca=function(){try{return Fr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var k=this.g.responseText;return _&&k.indexOf(_)==0&&(k=k.substring(_.length)),Mv(k)}};function Bn(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function ro(_){const k={};_=(_.g&&Fr(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<_.length;G++){if(z(_[G]))continue;var V=Ep(_[G]);const ie=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const ce=k[ie]||[];k[ie]=ce,ce.push(V)}Ee(k,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(_,k,V){return V&&V.internalChannelParams&&V.internalChannelParams[_]||k}function aa(_){this.za=0,this.i=[],this.j=new Or,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ss("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ss("baseRetryDelayMs",5e3,_),this.Za=Ss("retryDelaySeedMs",1e4,_),this.Ta=Ss("forwardChannelMaxRetries",2,_),this.va=Ss("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Md(_&&_.concurrentRequestLimit),this.Ba=new sa,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=aa.prototype,t.ka=8,t.I=1,t.connect=function(_,k,V,G){sn(0),this.W=_,this.H=k||{},V&&G!==void 0&&(this.H.OSID=V,this.H.OAID=G),this.F=this.X,this.J=Up(this,null,this.W),Ts(this)};function Gd(_){if(Oc(_),_.I==3){var k=_.V++,V=ln(_.J);if(St(V,"SID",_.M),St(V,"RID",k),St(V,"TYPE","terminate"),_l(_,V),k=new Lr(_,_.j,k),k.M=2,k.A=ml(ln(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(k.A.toString(),"")}catch{}!V&&a.Image&&(new Image().src=k.A,V=!0),V||(k.g=Vp(k.j,null),k.g.ea(k.A)),k.F=Date.now(),ms(k)}zp(_)}function la(_){_.g&&(Yd(_),_.g.cancel(),_.g=null)}function Oc(_){la(_),_.v&&(a.clearTimeout(_.v),_.v=null),zc(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function Ts(_){if(!Dd(_.h)&&!_.m){_.m=!0;var k=_.Ea;O||A(),P||(O(),P=!0),I.add(k,_),_.D=0}}function Lc(_,k){return vs(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=k.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=fs(d(_.Ea,_,k),Lp(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const ie=new Lr(this,this.j,_);let ce=this.o;if(this.U&&(ce?(ce=K(ce),ge(ce,this.U)):ce=this.U),this.u!==null||this.R||(ie.J=ce,ce=null),this.S)e:{for(var k=0,V=0;V<this.i.length;V++){t:{var G=this.i[V];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(k+=G,k>4096){k=V;break e}if(k===4096||V===this.i.length-1){k=V+1;break e}}k=1e3}else k=1e3;k=Pp(this,ie,k),V=ln(this.J),St(V,"RID",_),St(V,"CVER",22),this.G&&St(V,"X-HTTP-Session-Id",this.G),_l(this,V),ce&&(this.R?k="headers="+no(lr(ce))+"&"+k:this.u&&vl(V,this.u,ce)),Od(this.h,ie),this.Ra&&St(V,"TYPE","init"),this.S?(St(V,"$req",k),St(V,"SID","null"),ie.U=!0,ps(ie,V,null)):ps(ie,V,k),this.I=2}}else this.I==3&&(_?Kd(this,_):this.i.length==0||Dd(this.h)||Kd(this))};function Kd(_,k){var V;k?V=k.l:V=_.V++;const G=ln(_.J);St(G,"SID",_.M),St(G,"RID",V),St(G,"AID",_.K),_l(_,G),_.u&&_.o&&vl(G,_.u,_.o),V=new Lr(_,_.j,V,_.D+1),_.u===null&&(V.J=_.o),k&&(_.i=k.G.concat(_.i)),k=Pp(_,V,1e3),V.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Od(_.h,V),ps(V,G,k)}function _l(_,k){_.H&&ve(_.H,function(V,G){St(k,G,V)}),_.l&&ve({},function(V,G){St(k,G,V)})}function Pp(_,k,V){V=Math.min(_.i.length,V);const G=_.l?d(_.l.Ka,_.l,_):null;e:{var ie=_.i;let Ze=-1;for(;;){const en=["count="+V];Ze==-1?V>0?(Ze=ie[0].g,en.push("ofs="+Ze)):Ze=0:en.push("ofs="+Ze);let yt=!0;for(let zt=0;zt<V;zt++){var ce=ie[zt].g;const cr=ie[zt].map;if(ce-=Ze,ce<0)Ze=Math.max(0,ie[zt].g-100),yt=!1;else try{ce="req"+ce+"_"||"";try{var Ce=cr instanceof Map?cr:Object.entries(cr);for(const[Ns,Hr]of Ce){let Br=Hr;u(Hr)&&(Br=ea(Hr)),en.push(ce+Ns+"="+encodeURIComponent(Br))}}catch(Ns){throw en.push(ce+"type="+encodeURIComponent("_badmap")),Ns}}catch{G&&G(cr)}}if(yt){Ce=en.join("&");break e}}Ce=void 0}return _=_.i.splice(0,V),k.G=_,Ce}function Mp(_){if(!_.g&&!_.v){_.Y=1;var k=_.Da;O||A(),P||(O(),P=!0),I.add(k,_),_.A=0}}function wl(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=fs(d(_.Da,_),Lp(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Dp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=fs(d(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),la(this),Dp(this))};function Yd(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function Dp(_){_.g=new Lr(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var k=ln(_.na);St(k,"RID","rpc"),St(k,"SID",_.M),St(k,"AID",_.K),St(k,"CI",_.F?"0":"1"),!_.F&&_.ia&&St(k,"TO",_.ia),St(k,"TYPE","xmlhttp"),_l(_,k),_.u&&_.o&&vl(k,_.u,_.o),_.O&&(_.g.H=_.O);var V=_.g;_=_.ba,V.M=1,V.A=ml(ln(k)),V.u=null,V.R=!0,kc(V,_)}t.Va=function(){this.C!=null&&(this.C=null,la(this),wl(this),sn(19))};function zc(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function Op(_,k){var V=null;if(_.g==k){zc(_),Yd(_),_.g=null;var G=2}else if(xs(_.h,k))V=k.G,Ld(_.h,k),G=1;else return;if(_.I!=0){if(k.o)if(G==1){V=k.u?k.u.length:0,k=Date.now()-k.F;var ie=_.D;G=Ac(),gn(G,new ds(G,V)),Ts(_)}else Mp(_);else if(ie=k.m,ie==3||ie==0&&k.X>0||!(G==1&&Lc(_,k)||G==2&&wl(_)))switch(V&&V.length>0&&(k=_.h,k.i=k.i.concat(V)),ie){case 1:Es(_,5);break;case 4:Es(_,10);break;case 3:Es(_,6);break;default:Es(_,2)}}}function Lp(_,k){let V=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(V*=2),V*k}function Es(_,k){if(_.j.info("Error code "+k),k==2){var V=d(_.bb,_),G=_.Ua;const ie=!G;G=new Vi(G||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cn(G,"https"),ml(G),ie?Ur(G.toString(),V):Bd(G.toString(),V)}else sn(2);_.I=0,_.l&&_.l.pa(k),zp(_),Oc(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function zp(_){if(_.I=0,_.ja=[],_.l){const k=zd(_.h);(k.length!=0||_.i.length!=0)&&(S(_.ja,k),S(_.ja,_.i),_.h.i.length=0,b(_.i),_.i.length=0),_.l.oa()}}function Up(_,k,V){var G=V instanceof Vi?ln(V):new Vi(V);if(G.g!="")k&&(G.g=k+"."+G.g),ta(G,G.u);else{var ie=a.location;G=ie.protocol,k=k?k+"."+ie.hostname:ie.hostname,ie=+ie.port;const ce=new Vi(null);G&&Cn(ce,G),k&&(ce.g=k),ie&&ta(ce,ie),V&&(ce.h=V),G=ce}return V=_.G,k=_.wa,V&&k&&St(G,V,k),St(G,"VER",_.ka),_l(_,G),G}function Vp(_,k,V){if(k&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=_.Aa&&!_.ma?new Ct(new _s({ab:V})):new Ct(_.ma),k.Fa(_.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fp(){}t=Fp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ca(){}ca.prototype.g=function(_,k){return new gi(_,k)};function gi(_,k){$t.call(this),this.g=new aa(k),this.l=_,this.h=k&&k.messageUrlParams||null,_=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(_?_["X-WebChannel-Content-Type"]=k.messageContentType:_={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(_?_["X-WebChannel-Client-Profile"]=k.sa:_={"X-WebChannel-Client-Profile":k.sa}),this.g.U=_,(_=k&&k.Qb)&&!z(_)&&(this.g.u=_),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!z(k)&&(this.g.G=k,_=this.h,_!==null&&k in _&&(_=this.h,k in _&&delete _[k])),this.j=new so(this)}m(gi,$t),gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gi.prototype.close=function(){Gd(this.g)},gi.prototype.o=function(_){var k=this.g;if(typeof _=="string"){var V={};V.__data__=_,_=V}else this.v&&(V={},V.__data__=ea(_),_=V);k.i.push(new an(k.Ya++,_)),k.I==3&&Ts(k)},gi.prototype.N=function(){this.g.l=null,delete this.j,Gd(this.g),delete this.g,gi.Z.N.call(this)};function Hp(_){Hn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var k=_.__sm__;if(k){e:{for(const V in k){_=V;break e}_=void 0}(this.i=_)&&(_=this.i,k=k!==null&&_ in k?k[_]:void 0),this.data=k}else this.data=_}m(Hp,Hn);function Bp(){sr.call(this),this.status=1}m(Bp,sr);function so(_){this.g=_}m(so,Fp),so.prototype.ra=function(){gn(this.g,"a")},so.prototype.qa=function(_){gn(this.g,new Hp(_))},so.prototype.pa=function(_){gn(this.g,new Bp)},so.prototype.oa=function(){gn(this.g,"b")},ca.prototype.createWebChannel=ca.prototype.g,gi.prototype.send=gi.prototype.o,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,z5=function(){return new ca},L5=function(){return Ac()},O5=Zt,Y_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,Ig=hl,jd.COMPLETE="complete",D5=jd,_p.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",$t.prototype.listen=$t.prototype.J,Wf=_p,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,M5=Ct}).apply(typeof Wm<"u"?Wm:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let li=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld="12.9.0";function fq(t){ld=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new TS("@firebase/firestore");function _u(){return lc.logLevel}function Ie(t,...e){if(lc.logLevel<=ot.DEBUG){const n=e.map(zS);lc.debug(`Firestore (${ld}): ${t}`,...n)}}function jo(t,...e){if(lc.logLevel<=ot.ERROR){const n=e.map(zS);lc.error(`Firestore (${ld}): ${t}`,...n)}}function cc(t,...e){if(lc.logLevel<=ot.WARN){const n=e.map(zS);lc.warn(`Firestore (${ld}): ${t}`,...n)}}function zS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,U5(t,i,n)}function U5(t,e,n){let i=`FIRESTORE (${ld}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw jo(i),new Error(i)}function wt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||U5(e,r,i)}function Qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Ho{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(li.UNAUTHENTICATED)))}shutdown(){}}class pq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mq{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let s=new Ka;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ka,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const f=s;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},u=f=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ka)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(wt(typeof i.accessToken=="string",31837,{l:i}),new V5(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new li(e)}}class gq{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=li.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class yq{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new gq(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(li.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vq{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const i=s=>{s.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>i(s)))};const r=s=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>r(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sk(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=xq(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function at(t,e){return t<e?-1:t>e?1:0}function W_(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return Kb(r)===Kb(s)?at(r,s):Kb(r)?1:-1}return at(t.length,e.length)}const bq=55296,_q=57343;function Kb(t){const e=t.charCodeAt(0);return e>=bq&&e<=_q}function qu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="__name__";class Ms{constructor(e,n,i){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Ms.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return at(e.length,n.length)}static compareSegments(e,n){const i=Ms.isNumericId(e),r=Ms.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):W_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ga.fromString(e.substring(4,e.length-2))}}class qt extends Ms{construct(e,n,i){return new qt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Oe(Te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new qt(n)}static emptyPath(){return new qt([])}}const wq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends Ms{construct(e,n,i){return new Qn(e,n,i)}static isValidIdentifier(e){return wq.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tk}static keyField(){return new Qn([Tk])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Oe(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Oe(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Oe(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(s(),r++)}if(s(),a)throw new Oe(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(n)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(qt.fromString(e))}static fromName(e){return new Ve(qt.fromString(e).popFirst(5))}static empty(){return new Ve(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(t,e,n){if(!n)throw new Oe(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Tq(t,e,n,i){if(e===!0&&i===!0)throw new Oe(Te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ek(t){if(!Ve.isDocumentKey(t))throw new Oe(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function F5(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function VS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function ph(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=VS(t);throw new Oe(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wh(t,e){if(!F5(t))throw new Oe(Te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new Oe(Te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=-62135596800,Ck=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Ck);return new Ot(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Nk)throw new Oe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ck}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wh(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:pn("string",Ot._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Ot(0,0))}static max(){return new We(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=-1;function Eq(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=We.fromTimestamp(i===1e9?new Ot(n+1,0):new Ot(n,i));return new Ja(r,Ve.empty(),e)}function Nq(t){return new Ja(t.readTime,t.key,mh)}class Ja{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ja(We.min(),Ve.empty(),mh)}static max(){return new Ja(We.max(),Ve.empty(),mh)}}function Cq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ve.comparator(t.documentKey,e.documentKey),n!==0?n:at(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==Aq)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be(((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):be.reject(n)}static resolve(e){return new be(((n,i)=>{n(e)}))}static reject(e){return new be(((n,i)=>{i(e)}))}static waitFor(e){return new be(((n,i)=>{let r=0,s=0,a=!1;e.forEach((u=>{++r,u.next((()=>{++s,a&&s===r&&n()}),(f=>i(f)))})),a=!0,s===r&&n()}))}static or(e){let n=be.resolve(!1);for(const i of e)n=n.next((r=>r?be.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,s)=>{i.push(n.call(this,r,s))})),this.waitFor(i)}static mapArray(e,n){return new be(((i,r)=>{const s=e.length,a=new Array(s);let u=0;for(let f=0;f<s;f++){const d=f;n(e[d]).next((p=>{a[d]=p,++u,u===s&&i(a)}),(p=>r(p)))}}))}static doWhile(e,n){return new be(((i,r)=>{const s=()=>{e()===!0?n().next((()=>{s()}),r):i()};s()}))}}function Iq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ud(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=-1;function Sy(t){return t==null}function n0(t){return t===0&&1/t==-1/0}function Rq(t){return typeof t=="number"&&Number.isInteger(t)&&!n0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="";function jq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ak(e)),e=Pq(t.get(n),e);return Ak(e)}function Pq(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case H5:n+="";break;default:n+=s}}return n}function Ak(t){return t+H5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new Gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xm(this.root,e,this.comparator,!0)}}class Xm{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Jn.RED,this.left=r??Jn.EMPTY,this.right=s??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Jn(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Jn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ik(this.data.getIterator())}getIteratorFrom(e){return new Ik(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bn(this.comparator);return n.data=e,n}}class Ik{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Qr([])}unionWith(e){let n=new bn(Qn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Qr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $5("Invalid base64 string: "+s):s}})(e);return new ni(n)}static fromUint8Array(e){const n=(function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s})(e);return new ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const Mq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qa(t){if(wt(!!t,39018),typeof t=="string"){let e=0;const n=Mq.exec(t);if(wt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rn(t.seconds),nanos:rn(t.nanos)}}function rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Za(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="server_timestamp",G5="__type__",K5="__previous_value__",Y5="__local_write_time__";function HS(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[G5])==null?void 0:i.stringValue)===q5}function Ty(t){const e=t.mapValue.fields[K5];return HS(e)?Ty(e):e}function gh(t){const e=Qa(t.mapValue.fields[Y5].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,n,i,r,s,a,u,f,d,p,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p,this.apiKey=m}}const i0="(default)";class yh{constructor(e,n){this.projectId=e,this.database=n||i0}static empty(){return new yh("","")}get isDefaultDatabase(){return this.database===i0}isEqual(e){return e instanceof yh&&e.projectId===this.projectId&&e.database===this.database}}function Oq(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Oe(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yh(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="__type__",Lq="__max__",Jm={mapValue:{}},X5="__vector__",r0="value";function el(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?HS(t)?4:Uq(t)?9007199254740991:zq(t)?10:11:Be(28295,{value:t})}function Ks(t,e){if(t===e)return!0;const n=el(t);if(n!==el(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gh(t).isEqual(gh(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Qa(r.timestampValue),u=Qa(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,s){return Za(r.bytesValue).isEqual(Za(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,s){return rn(r.geoPointValue.latitude)===rn(s.geoPointValue.latitude)&&rn(r.geoPointValue.longitude)===rn(s.geoPointValue.longitude)})(t,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return rn(r.integerValue)===rn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=rn(r.doubleValue),u=rn(s.doubleValue);return a===u?n0(a)===n0(u):isNaN(a)&&isNaN(u)}return!1})(t,e);case 9:return qu(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:case 11:return(function(r,s){const a=r.mapValue.fields||{},u=s.mapValue.fields||{};if(kk(a)!==kk(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(u[f]===void 0||!Ks(a[f],u[f])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function vh(t,e){return(t.values||[]).find((n=>Ks(n,e)))!==void 0}function Gu(t,e){if(t===e)return 0;const n=el(t),i=el(e);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=rn(s.integerValue||s.doubleValue),f=rn(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(t,e);case 3:return Rk(t.timestampValue,e.timestampValue);case 4:return Rk(gh(t),gh(e));case 5:return W_(t.stringValue,e.stringValue);case 6:return(function(s,a){const u=Za(s),f=Za(a);return u.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),f=a.split("/");for(let d=0;d<u.length&&d<f.length;d++){const p=at(u[d],f[d]);if(p!==0)return p}return at(u.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=at(rn(s.latitude),rn(a.latitude));return u!==0?u:at(rn(s.longitude),rn(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return jk(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var y,b,S,N;const u=s.fields||{},f=a.fields||{},d=(y=u[r0])==null?void 0:y.arrayValue,p=(b=f[r0])==null?void 0:b.arrayValue,m=at(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((N=p==null?void 0:p.values)==null?void 0:N.length)||0);return m!==0?m:jk(d,p)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Jm.mapValue&&a===Jm.mapValue)return 0;if(s===Jm.mapValue)return 1;if(a===Jm.mapValue)return-1;const u=s.fields||{},f=Object.keys(u),d=a.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let m=0;m<f.length&&m<p.length;++m){const y=W_(f[m],p[m]);if(y!==0)return y;const b=Gu(u[f[m]],d[p[m]]);if(b!==0)return b}return at(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{he:n})}}function Rk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return at(t,e);const n=Qa(t),i=Qa(e),r=at(n.seconds,i.seconds);return r!==0?r:at(n.nanos,i.nanos)}function jk(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Gu(n[r],i[r]);if(s)return s}return at(n.length,i.length)}function Ku(t){return X_(t)}function X_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Qa(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Za(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=X_(s);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${X_(n.fields[a])}`;return r+"}"})(t.mapValue):Be(61005,{value:t})}function Rg(t){switch(el(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ty(t);return e?16+Rg(e):16;case 5:return 2*t.stringValue.length;case 6:return Za(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,s)=>r+Rg(s)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return xc(i.fields,((s,a)=>{r+=s.length+Rg(a)})),r})(t.mapValue);default:throw Be(13486,{value:t})}}function J_(t){return!!t&&"integerValue"in t}function BS(t){return!!t&&"arrayValue"in t}function Pk(t){return!!t&&"nullValue"in t}function Mk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jg(t){return!!t&&"mapValue"in t}function zq(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[W5])==null?void 0:i.stringValue)===X5}function sh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xc(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=sh(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sh(t.arrayValue.values[n]);return e}return{...t}}function Uq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Lq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(n)}setAll(e){let n=Qn.emptyPath(),i={},r=[];e.forEach(((a,u)=>{if(!n.isImmediateParentOf(u)){const f=this.getFieldsMap(n);this.applyChanges(f,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=sh(a):r.push(u.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());jg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];jg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){xc(n,((r,s)=>e[r]=s));for(const r of i)delete e[r]}clone(){return new br(sh(this.value))}}function J5(t){const e=[];return xc(t.fields,((n,i)=>{const r=new Qn([n]);if(jg(i)){const s=J5(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)})),new Qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,i,r,s,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new ci(e,0,We.min(),We.min(),We.min(),br.empty(),0)}static newFoundDocument(e,n,i,r){return new ci(e,1,n,We.min(),i,r,0)}static newNoDocument(e,n){return new ci(e,2,n,We.min(),We.min(),br.empty(),0)}static newUnknownDocument(e,n){return new ci(e,3,n,We.min(),We.min(),br.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.position=e,this.inclusive=n}}function Dk(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=Ve.comparator(Ve.fromName(a.referenceValue),n.key):i=Gu(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ok(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n="asc"){this.field=e,this.dir=n}}function Vq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{}class xn extends Q5{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Hq(e,n,i):n==="array-contains"?new qq(e,i):n==="in"?new Gq(e,i):n==="not-in"?new Kq(e,i):n==="array-contains-any"?new Yq(e,i):new xn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Bq(e,i):new $q(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gu(n,this.value)):n!==null&&el(this.value)===el(n)&&this.matchesComparison(Gu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ys extends Q5{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ys(e,n)}matches(e){return Z5(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z5(t){return t.op==="and"}function e4(t){return Fq(t)&&Z5(t)}function Fq(t){for(const e of t.filters)if(e instanceof Ys)return!1;return!0}function Q_(t){if(t instanceof xn)return t.field.canonicalString()+t.op.toString()+Ku(t.value);if(e4(t))return t.filters.map((e=>Q_(e))).join(",");{const e=t.filters.map((n=>Q_(n))).join(",");return`${t.op}(${e})`}}function t4(t,e){return t instanceof xn?(function(i,r){return r instanceof xn&&i.op===r.op&&i.field.isEqual(r.field)&&Ks(i.value,r.value)})(t,e):t instanceof Ys?(function(i,r){return r instanceof Ys&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((s,a,u)=>s&&t4(a,r.filters[u])),!0):!1})(t,e):void Be(19439)}function n4(t){return t instanceof xn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ku(n.value)}`})(t):t instanceof Ys?(function(n){return n.op.toString()+" {"+n.getFilters().map(n4).join(" ,")+"}"})(t):"Filter"}class Hq extends xn{constructor(e,n,i){super(e,n,i),this.key=Ve.fromName(i.referenceValue)}matches(e){const n=Ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class Bq extends xn{constructor(e,n){super(e,"in",n),this.keys=i4("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class $q extends xn{constructor(e,n){super(e,"not-in",n),this.keys=i4("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function i4(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Ve.fromName(i.referenceValue)))}class qq extends xn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return BS(n)&&vh(n.arrayValue,this.value)}}class Gq extends xn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vh(this.value.arrayValue,n)}}class Kq extends xn{constructor(e,n){super(e,"not-in",n)}matches(e){if(vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vh(this.value.arrayValue,n)}}class Yq extends xn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!BS(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>vh(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,n=null,i=[],r=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function Lk(t,e=null,n=[],i=[],r=null,s=null,a=null){return new Wq(t,e,n,i,r,s,a)}function $S(t){const e=Qe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Q_(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(s){return s.field.canonicalString()+s.dir})(i))).join(","),Sy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ku(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ku(i))).join(",")),e.Te=n}return e.Te}function qS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ok(t.startAt,e.startAt)&&Ok(t.endAt,e.endAt)}function Z_(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n=null,i=[],r=[],s=null,a="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Xq(t,e,n,i,r,s,a,u){return new Ey(t,e,n,i,r,s,a,u)}function GS(t){return new Ey(t)}function zk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Jq(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qq(t){return t.collectionGroup!==null}function oh(t){const e=Qe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new bn(Qn.comparator);return a.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new o0(s,i))})),n.has(Qn.keyField().canonicalString())||e.Ie.push(new o0(Qn.keyField(),i))}return e.Ie}function Fs(t){const e=Qe(t);return e.Ee||(e.Ee=Zq(e,oh(t))),e.Ee}function Zq(t,e){if(t.limitType==="F")return Lk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const s=r.dir==="desc"?"asc":"desc";return new o0(r.field,s)}));const n=t.endAt?new s0(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new s0(t.startAt.position,t.startAt.inclusive):null;return Lk(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ew(t,e,n){return new Ey(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ny(t,e){return qS(Fs(t),Fs(e))&&t.limitType===e.limitType}function r4(t){return`${$S(Fs(t))}|lt:${t.limitType}`}function wu(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>n4(r))).join(", ")}]`),Sy(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Ku(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Ku(r))).join(",")),`Target(${i})`})(Fs(t))}; limitType=${t.limitType})`}function Cy(t,e){return e.isFoundDocument()&&(function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Ve.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)})(t,e)&&(function(i,r){for(const s of oh(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(a,u,f){const d=Dk(a,u,f);return a.inclusive?d<=0:d<0})(i.startAt,oh(i),r)||i.endAt&&!(function(a,u,f){const d=Dk(a,u,f);return a.inclusive?d>=0:d>0})(i.endAt,oh(i),r))})(t,e)}function eG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s4(t){return(e,n)=>{let i=!1;for(const r of oh(t)){const s=tG(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function tG(t,e,n){const i=t.field.isKeyField()?Ve.comparator(e.key,n.key):(function(s,a,u){const f=a.data.field(s),d=u.data.field(s);return f!==null&&d!==null?Gu(f,d):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xc(this.inner,((n,i)=>{for(const[r,s]of i)e(r,s)}))}isEmpty(){return B5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nG=new Gt(Ve.comparator);function Po(){return nG}const o4=new Gt(Ve.comparator);function Xf(...t){let e=o4;for(const n of t)e=e.insert(n.key,n);return e}function a4(t){let e=o4;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Kl(){return ah()}function l4(){return ah()}function ah(){return new bc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const iG=new Gt(Ve.comparator),rG=new bn(Ve.comparator);function lt(...t){let e=rG;for(const n of t)e=e.add(n);return e}const sG=new bn(at);function oG(){return sG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:n0(e)?"-0":e}}function c4(t){return{integerValue:""+t}}function aG(t,e){return Rq(e)?c4(e):KS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this._=void 0}}function lG(t,e,n){return t instanceof a0?(function(r,s){const a={fields:{[G5]:{stringValue:q5},[Y5]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&HS(s)&&(s=Ty(s)),s&&(a.fields[K5]=s),{mapValue:a}})(n,e):t instanceof xh?d4(t,e):t instanceof bh?f4(t,e):(function(r,s){const a=u4(r,s),u=Uk(a)+Uk(r.Ae);return J_(a)&&J_(r.Ae)?c4(u):KS(r.serializer,u)})(t,e)}function cG(t,e,n){return t instanceof xh?d4(t,e):t instanceof bh?f4(t,e):n}function u4(t,e){return t instanceof l0?(function(i){return J_(i)||(function(s){return!!s&&"doubleValue"in s})(i)})(e)?e:{integerValue:0}:null}class a0 extends Ay{}class xh extends Ay{constructor(e){super(),this.elements=e}}function d4(t,e){const n=h4(e);for(const i of t.elements)n.some((r=>Ks(r,i)))||n.push(i);return{arrayValue:{values:n}}}class bh extends Ay{constructor(e){super(),this.elements=e}}function f4(t,e){let n=h4(e);for(const i of t.elements)n=n.filter((r=>!Ks(r,i)));return{arrayValue:{values:n}}}class l0 extends Ay{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Uk(t){return rn(t.integerValue||t.doubleValue)}function h4(t){return BS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uG(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof xh&&r instanceof xh||i instanceof bh&&r instanceof bh?qu(i.elements,r.elements,Ks):i instanceof l0&&r instanceof l0?Ks(i.Ae,r.Ae):i instanceof a0&&r instanceof a0})(t.transform,e.transform)}class dG{constructor(e,n){this.version=e,this.transformResults=n}}class Ao{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ao}static exists(e){return new Ao(void 0,e)}static updateTime(e){return new Ao(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ky{}function p4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g4(t.key,Ao.none()):new Xh(t.key,t.data,Ao.none());{const n=t.data,i=br.empty();let r=new bn(Qn.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new _c(t.key,i,new Qr(r.toArray()),Ao.none())}}function fG(t,e,n){t instanceof Xh?(function(r,s,a){const u=r.value.clone(),f=Fk(r.fieldTransforms,s,a.transformResults);u.setAll(f),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):t instanceof _c?(function(r,s,a){if(!Pg(r.precondition,s))return void s.convertToUnknownDocument(a.version);const u=Fk(r.fieldTransforms,s,a.transformResults),f=s.data;f.setAll(m4(r)),f.setAll(u),s.convertToFoundDocument(a.version,f).setHasCommittedMutations()})(t,e,n):(function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function lh(t,e,n,i){return t instanceof Xh?(function(s,a,u,f){if(!Pg(s.precondition,a))return u;const d=s.value.clone(),p=Hk(s.fieldTransforms,f,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof _c?(function(s,a,u,f){if(!Pg(s.precondition,a))return u;const d=Hk(s.fieldTransforms,f,a),p=a.data;return p.setAll(m4(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(t,e,n,i):(function(s,a,u){return Pg(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(t,e,n)}function hG(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=u4(i.transform,r||null);s!=null&&(n===null&&(n=br.empty()),n.set(i.field,s))}return n||null}function Vk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&qu(i,r,((s,a)=>uG(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xh extends ky{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _c extends ky{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function m4(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Fk(t,e,n){const i=new Map;wt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,u=e.data.field(s.field);i.set(s.field,cG(a,u,n[r]))}return i}function Hk(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,lG(s,a,e))}return i}class g4 extends ky{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pG extends ky{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&fG(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=lh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=lh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=l4();return this.mutations.forEach((r=>{const s=e.get(r.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(r.key)?null:u;const f=p4(a,u);f!==null&&i.set(r.key,f),a.isValidDocument()||a.convertToNoDocument(We.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),lt())}isEqual(e){return this.batchId===e.batchId&&qu(this.mutations,e.mutations,((n,i)=>Vk(n,i)))&&qu(this.baseMutations,e.baseMutations,((n,i)=>Vk(n,i)))}}class YS{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){wt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return iG})();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new YS(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,ut;function vG(t){switch(t){case Te.OK:return Be(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function y4(t){if(t===void 0)return jo("GRPC error has no .code"),Te.UNKNOWN;switch(t){case hn.OK:return Te.OK;case hn.CANCELLED:return Te.CANCELLED;case hn.UNKNOWN:return Te.UNKNOWN;case hn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case hn.INTERNAL:return Te.INTERNAL;case hn.UNAVAILABLE:return Te.UNAVAILABLE;case hn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case hn.NOT_FOUND:return Te.NOT_FOUND;case hn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case hn.ABORTED:return Te.ABORTED;case hn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case hn.DATA_LOSS:return Te.DATA_LOSS;default:return Be(39323,{code:t})}}(ut=hn||(hn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG=new Ga([4294967295,4294967295],0);function Bk(t){const e=xG().encode(t),n=new P5;return n.update(e),new Uint8Array(n.digest())}function $k(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ga([n,i],0),new Ga([r,s],0)]}class WS{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Jf(`Invalid padding: ${n}`);if(i<0)throw new Jf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Jf(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Jf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ga.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Ga.fromNumber(i)));return r.compare(bG)===1&&(r=new Ga([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Bk(e),[i,r]=$k(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new WS(s,r,n);return i.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const n=Bk(e),[i,r]=$k(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.be(a)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Jf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Iy(We.min(),r,new Gt(at),Po(),lt())}}class Jh{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Jh(i,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=r}}class v4{constructor(e,n){this.targetId=e,this.Ce=n}}class x4{constructor(e,n,i=ni.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class qk{constructor(){this.ve=0,this.Fe=Gk(),this.Me=ni.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),n=lt(),i=lt();return this.Fe.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Be(38017,{changeType:s})}})),new Jh(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Gk()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class _G{constructor(e){this.Ge=e,this.ze=new Map,this.je=Po(),this.He=Qm(),this.Je=Qm(),this.Ze=new Gt(at)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Z_(s))if(i===0){const a=new Ve(s.path);this.et(n,a,ci.newNoDocument(a,We.min()))}else wt(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),f=u?this.ct(u,e,a):1;if(f!==0){this.it(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,u;try{a=Za(i).toUint8Array()}catch(f){if(f instanceof $5)return cc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new WS(a,r,s)}catch(f){return cc(f instanceof Jf?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(n,s,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&Z_(u.target)){const f=new Ve(u.target.path);this.It(f).has(a)||this.Et(a,f)||this.et(a,f,ci.newNoDocument(f,e))}s.Be&&(n.set(a,s.ke()),s.Ke())}}));let i=lt();this.Je.forEach(((s,a)=>{let u=!0;a.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const r=new Iy(e,n,this.Ze,this.je,i);return this.je=Po(),this.He=Qm(),this.Je=Qm(),this.Ze=new Gt(at),r}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.qe(n,1):r.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new qk,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new bn(at),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new bn(at),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qk),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qm(){return new Gt(Ve.comparator)}function Gk(){return new Gt(Ve.comparator)}const wG={asc:"ASCENDING",desc:"DESCENDING"},SG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TG={and:"AND",or:"OR"};class EG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tw(t,e){return t.useProto3Json||Sy(e)?e:{value:e}}function c0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NG(t,e){return c0(t,e.toTimestamp())}function Hs(t){return wt(!!t,49232),We.fromTimestamp((function(n){const i=Qa(n);return new Ot(i.seconds,i.nanos)})(t))}function XS(t,e){return nw(t,e).canonicalString()}function nw(t,e){const n=(function(r){return new qt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function _4(t){const e=qt.fromString(t);return wt(N4(e),10190,{key:e.toString()}),e}function iw(t,e){return XS(t.databaseId,e.path)}function Yb(t,e){const n=_4(e);if(n.get(1)!==t.databaseId.projectId)throw new Oe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ve(S4(n))}function w4(t,e){return XS(t.databaseId,e)}function CG(t){const e=_4(t);return e.length===4?qt.emptyPath():S4(e)}function rw(t){return new qt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S4(t){return wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kk(t,e,n){return{name:iw(t,e),fields:n.value.mapValue.fields}}function AG(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Be(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(d,p){return d.useProto3Json?(wt(p===void 0||typeof p=="string",58123),ni.fromBase64String(p||"")):(wt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ni.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(d){const p=d.code===void 0?Te.UNKNOWN:y4(d.code);return new Oe(p,d.message||"")})(a);n=new x4(i,r,s,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Yb(t,i.document.name),s=Hs(i.document.updateTime),a=i.document.createTime?Hs(i.document.createTime):We.min(),u=new br({mapValue:{fields:i.document.fields}}),f=ci.newFoundDocument(r,s,a,u),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Mg(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Yb(t,i.document),s=i.readTime?Hs(i.readTime):We.min(),a=ci.newNoDocument(r,s),u=i.removedTargetIds||[];n=new Mg([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Yb(t,i.document),s=i.removedTargetIds||[];n=new Mg([],s,r,null)}else{if(!("filter"in e))return Be(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new yG(r,s),u=i.targetId;n=new v4(u,a)}}return n}function kG(t,e){let n;if(e instanceof Xh)n={update:Kk(t,e.key,e.value)};else if(e instanceof g4)n={delete:iw(t,e.key)};else if(e instanceof _c)n={update:Kk(t,e.key,e.data),updateMask:zG(e.fieldMask)};else{if(!(e instanceof pG))return Be(16599,{dt:e.type});n={verify:iw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(s,a){const u=a.transform;if(u instanceof a0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof xh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof bh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof l0)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Be(20930,{transform:a.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:NG(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Be(27497)})(t,e.precondition)),n}function IG(t,e){return t&&t.length>0?(wt(e!==void 0,14353),t.map((n=>(function(r,s){let a=r.updateTime?Hs(r.updateTime):Hs(s);return a.isEqual(We.min())&&(a=Hs(s)),new dG(a,r.transformResults||[])})(n,e)))):[]}function RG(t,e){return{documents:[w4(t,e.path)]}}function jG(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=w4(t,r);const s=(function(d){if(d.length!==0)return E4(Ys.create(d,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((p=>(function(y){return{field:Su(y.field),direction:DG(y.dir)}})(p)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=tw(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:r}}function PG(t){let e=CG(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){wt(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=(function(m){const y=T4(m);return y instanceof Ys&&e4(y)?y.getFilters():[y]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((y=>(function(S){return new o0(Tu(S.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(m){let y;return y=typeof m=="object"?m.value:m,Sy(y)?null:y})(n.limit));let f=null;n.startAt&&(f=(function(m){const y=!!m.before,b=m.values||[];return new s0(b,y)})(n.startAt));let d=null;return n.endAt&&(d=(function(m){const y=!m.before,b=m.values||[];return new s0(b,y)})(n.endAt)),Xq(e,r,a,s,u,"F",f,d)}function MG(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T4(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Tu(n.unaryFilter.field);return xn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Tu(n.unaryFilter.field);return xn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tu(n.unaryFilter.field);return xn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Tu(n.unaryFilter.field);return xn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return xn.create(Tu(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ys.create(n.compositeFilter.filters.map((i=>T4(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function DG(t){return wG[t]}function OG(t){return SG[t]}function LG(t){return TG[t]}function Su(t){return{fieldPath:t.canonicalString()}}function Tu(t){return Qn.fromServerFormat(t.fieldPath)}function E4(t){return t instanceof xn?(function(n){if(n.op==="=="){if(Mk(n.value))return{unaryFilter:{field:Su(n.field),op:"IS_NAN"}};if(Pk(n.value))return{unaryFilter:{field:Su(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mk(n.value))return{unaryFilter:{field:Su(n.field),op:"IS_NOT_NAN"}};if(Pk(n.value))return{unaryFilter:{field:Su(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Su(n.field),op:OG(n.op),value:n.value}}})(t):t instanceof Ys?(function(n){const i=n.getFilters().map((r=>E4(r)));return i.length===1?i[0]:{compositeFilter:{op:LG(n.op),filters:i}}})(t):Be(54877,{filter:t})}function zG(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function N4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function C4(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,i,r,s=We.min(),a=We.min(),u=ni.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.yt=e}}function VG(t){const e=PG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ew(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(){this.Sn=new HG}addToCollectionParentIndex(e,n){return this.Sn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(Ja.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(Ja.min())}updateCollectionGroup(e,n,i){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class HG{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new bn(qt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bn(qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A4=41943040;class ji{static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(A4,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Yu(0)}static ar(){return new Yu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="LruGarbageCollector",BG=1048576;function Xk([t,e],[n,i]){const r=at(t,n);return r===0?at(e,i):r}class $G{constructor(e){this.Pr=e,this.buffer=new bn(Xk),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Xk(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qG{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(Wk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ud(n)?Ie(Wk,"Ignoring IndexedDB error during garbage collection: ",n):await cd(n)}await this.Ar(3e5)}))}}class GG{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return be.resolve(wy.ce);const i=new $G(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Yk)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yk):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,r,s,a,u,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r)))).next((m=>(i=m,u=Date.now(),this.removeTargets(e,i,n)))).next((m=>(s=m,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((m=>(d=Date.now(),_u()<=ot.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${s} targets in `+(f-u)+`ms
	Removed ${m} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:m}))))}}function KG(t,e){return new GG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(){this.changes=new bc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?be.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&lh(i.mutation,r,Qr.empty(),Ot.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,lt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=lt()){const r=Kl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((s=>{let a=Xf();return s.forEach(((u,f)=>{a=a.insert(u,f.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const i=Kl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,lt())))}populateOverlays(e,n,i){const r=[];return i.forEach((s=>{n.has(s)||r.push(s)})),this.documentOverlayCache.getOverlays(e,r).next((s=>{s.forEach(((a,u)=>{n.set(a,u)}))}))}computeViews(e,n,i,r){let s=Po();const a=ah(),u=(function(){return ah()})();return n.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof _c)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),lh(p.mutation,d,p.mutation.getFieldMask(),Ot.now())):a.set(d.key,Qr.empty())})),this.recalculateAndSaveOverlays(e,s).next((f=>(f.forEach(((d,p)=>a.set(d,p))),n.forEach(((d,p)=>u.set(d,new WG(p,a.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,n){const i=ah();let r=new Gt(((a,u)=>a-u)),s=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const u of a)u.keys().forEach((f=>{const d=n.get(f);if(d===null)return;let p=i.get(f)||Qr.empty();p=u.applyToLocalView(d,p),i.set(f,p);const m=(r.get(u.batchId)||lt()).add(f);r=r.insert(u.batchId,m)}))})).next((()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,p=f.value,m=l4();p.forEach((y=>{if(!s.has(y)){const b=p4(n.get(y),i.get(y));b!==null&&m.set(y,b),s=s.add(y)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return be.waitFor(a)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return Jq(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qq(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):be.resolve(Kl());let u=mh,f=s;return a.next((d=>be.forEach(d,((p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(p)?be.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{f=f.insert(p,y)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,f,d,lt()))).next((p=>({batchId:u,changes:a4(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ve(n)).next((i=>{let r=Xf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Xf();return this.indexManager.getCollectionParents(e,s).next((u=>be.forEach(u,(f=>{const d=(function(m,y){return new Ey(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,f.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((p=>{p.forEach(((m,y)=>{a=a.insert(m,y)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r)))).next((a=>{s.forEach(((f,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,ci.newInvalidDocument(p)))}));let u=Xf();return a.forEach(((f,d)=>{const p=s.get(f);p!==void 0&&lh(p.mutation,d,Qr.empty(),Ot.now()),Cy(n,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return be.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Hs(r.createTime)}})(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(r){return{name:r.name,query:VG(r.bundledQuery),readTime:Hs(r.readTime)}})(n)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(){this.overlays=new Gt(Ve.comparator),this.Lr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Kl();return be.forEach(n,(r=>this.getOverlay(e,r).next((s=>{s!==null&&i.set(r,s)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,s)=>{this.bt(e,n,s)})),be.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((s=>this.overlays=this.overlays.remove(s))),this.Lr.delete(i)),be.resolve()}getOverlaysForCollection(e,n,i){const r=Kl(),s=n.length+1,a=new Ve(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return be.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Gt(((d,p)=>d-p));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=Kl(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Kl(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>u.set(d,p))),!(u.size()>=r)););return be.resolve(u)}bt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new gG(n,i));let s=this.Lr.get(n);s===void 0&&(s=lt(),this.Lr.set(n,s)),this.Lr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.kr=new bn(jn.Kr),this.qr=new bn(jn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new jn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new jn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Ve(new qt([])),i=new jn(n,e),r=new jn(n,e+1),s=[];return this.qr.forEachInRange([i,r],(a=>{this.Wr(a),s.push(a.key)})),s}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ve(new qt([])),i=new jn(n,e),r=new jn(n,e+1);let s=lt();return this.qr.forEachInRange([i,r],(a=>{s=s.add(a.key)})),s}containsKey(e){const n=new jn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ve.comparator(e.key,n.key)||at(e.Hr,n.Hr)}static Ur(e,n){return at(e.Hr,n.Hr)||Ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new bn(jn.Kr)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new mG(s,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Jr=this.Jr.add(new jn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return be.resolve(a)}lookupMutationBatch(e,n){return be.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return be.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?FS:this.Yn-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jn(n,0),r=new jn(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([i,r],(a=>{const u=this.Zr(a.Hr);s.push(u)})),be.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bn(at);return n.forEach((r=>{const s=new jn(r,0),a=new jn(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],(u=>{i=i.add(u.Hr)}))})),be.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Ve.isDocumentKey(s)||(s=s.child(""));const a=new jn(new Ve(s),0);let u=new bn(at);return this.Jr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(f.Hr)),!0)}),a),be.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){wt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return be.forEach(n.mutations,(r=>{const s=new jn(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new jn(n,0),r=this.Jr.firstAfterOrEqual(i);return be.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e){this.ti=e,this.docs=(function(){return new Gt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return be.resolve(i?i.document.mutableCopy():ci.newInvalidDocument(n))}getEntries(e,n){let i=Po();return n.forEach((r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ci.newInvalidDocument(r))})),be.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Po();const a=n.path,u=new Ve(a.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Cq(Nq(p),i)<=0||(r.has(p.key)||Cy(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return be.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Be(9500)}ni(e,n){return be.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new n7(this)}getSize(e){return be.resolve(this.size)}}class n7 extends YG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),be.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e){this.persistence=e,this.ri=new bc((n=>$S(n)),qS),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new JS,this.targetCount=0,this.oi=Yu._r()}forEachTarget(e,n){return this.ri.forEach(((i,r)=>n(r))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),be.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Yu(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.lr(n),be.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ri.forEach(((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),be.waitFor(s).next((()=>r))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return be.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),be.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach((a=>{s.push(r.markPotentiallyOrphaned(e,a))})),be.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return be.resolve(i)}containsKey(e,n){return be.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this._i={},this.overlays={},this.ai=new wy(0),this.ui=!1,this.ui=!0,this.ci=new ZG,this.referenceDelegate=e(this),this.li=new i7(this),this.indexManager=new FG,this.remoteDocumentCache=(function(r){return new t7(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new UG(n),this.Pi=new JG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new e7(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){Ie("MemoryPersistence","Starting transaction:",e);const r=new r7(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((s=>this.referenceDelegate.Ii(r).next((()=>s)))).toPromise().then((s=>(r.raiseOnCommittedEvent(),s)))}Ei(e,n){return be.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class r7 extends kq{constructor(e){super(),this.currentSequenceNumber=e}}class QS{constructor(e){this.persistence=e,this.Ri=new JS,this.Ai=null}static Vi(e){return new QS(e)}get di(){if(this.Ai)return this.Ai;throw Be(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),be.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((s=>this.di.add(s.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.di,(i=>{const r=Ve.fromPath(i);return this.mi(e,r).next((s=>{s||n.removeEntry(r,We.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class u0{constructor(e,n){this.persistence=e,this.fi=new bc((i=>jq(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=KG(this,n)}static Vi(e,n){return new u0(e,n)}Ti(){}Ii(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return be.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((s=>s?be.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ni(e,(a=>this.wr(e,a,n).next((u=>{u||(i++,s.removeEntry(a,We.min()))})))).next((()=>s.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),be.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),be.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rg(e.data.value)),n}wr(e,n,i){return be.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.fi.get(n);return be.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=r}static Es(e,n){let i=lt(),r=lt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ZS(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return KF()?8:Iq(di())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.gs(e,n).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ps(e,n,r,i).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new s7;return this.ys(e,n,a).next((u=>{if(s.result=u,this.As)return this.ws(e,n,a,u.size)}))})).next((()=>s.result))}ws(e,n,i,r){return i.documentReadCount<this.Vs?(_u()<=ot.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",wu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),be.resolve()):(_u()<=ot.DEBUG&&Ie("QueryEngine","Query:",wu(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(_u()<=ot.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",wu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):be.resolve())}gs(e,n){if(zk(n))return be.resolve(null);let i=Fs(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=ew(n,null,"F"),i=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((s=>{const a=lt(...s);return this.fs.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.bs(n,u);return this.Ss(n,d,a,f.readTime)?this.gs(e,ew(n,null,"F")):this.Ds(e,d,n,f)}))))})))))}ps(e,n,i,r){return zk(n)||r.isEqual(We.min())?be.resolve(null):this.fs.getDocuments(e,i).next((s=>{const a=this.bs(n,s);return this.Ss(n,a,i,r)?be.resolve(null):(_u()<=ot.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wu(n)),this.Ds(e,a,n,Eq(r,mh)).next((u=>u)))}))}bs(e,n){let i=new bn(s4(e));return n.forEach(((r,s)=>{Cy(e,s)&&(i=i.add(s))})),i}Ss(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ys(e,n,i){return _u()<=ot.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",wu(n)),this.fs.getDocumentsMatchingQuery(e,n,Ja.min(),i)}Ds(e,n,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((s=>(n.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="LocalStore",a7=3e8;class l7{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.vs=new Gt(at),this.Fs=new bc((s=>$S(s)),qS),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function c7(t,e,n,i){return new l7(t,e,n,i)}async function I4(t,e){const n=Qe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((s=>(r=s,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((s=>{const a=[],u=[];let f=lt();for(const d of r){a.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of s){u.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(i,f).next((d=>({Ns:d,removedBatchIds:a,addedBatchIds:u})))}))}))}function u7(t,e){const n=Qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,p){const m=d.batch,y=m.keys();let b=be.resolve();return y.forEach((S=>{b=b.next((()=>p.getEntry(f,S))).next((N=>{const E=d.docVersions.get(S);wt(E!==null,48541),N.version.compareTo(E)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(f,m)))})(n,i,e,s).next((()=>s.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let f=lt();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function R4(t){const e=Qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function d7(t,e){const n=Qe(t),i=e.snapshotVersion;let r=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});r=n.vs;const u=[];e.targetChanges.forEach(((p,m)=>{const y=r.get(m);if(!y)return;u.push(n.li.removeMatchingKeys(s,p.removedDocuments,m).next((()=>n.li.addMatchingKeys(s,p.addedDocuments,m))));let b=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(ni.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(m,b),(function(N,E,R){return N.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=a7?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(y,b,p)&&u.push(n.li.updateTargetData(s,b))}));let f=Po(),d=lt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))})),u.push(f7(s,a,e.documentUpdates).next((p=>{f=p.Bs,d=p.Ls}))),!i.isEqual(We.min())){const p=n.li.getLastRemoteSnapshotVersion(s).next((m=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,i)));u.push(p)}return be.waitFor(u).next((()=>a.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,f,d))).next((()=>f))})).then((s=>(n.vs=r,s)))}function f7(t,e,n){let i=lt(),r=lt();return n.forEach((s=>i=i.add(s))),e.getEntries(t,i).next((s=>{let a=Po();return n.forEach(((u,f)=>{const d=s.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(We.min())?(e.removeEntry(u,f.readTime),a=a.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),a=a.insert(u,f)):Ie(eT,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{Bs:a,Ls:r}}))}function h7(t,e){const n=Qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=FS),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function p7(t,e){const n=Qe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.li.getTargetData(i,e).next((s=>s?(r=s,be.resolve(r)):n.li.allocateTargetId(i).next((a=>(r=new Va(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function sw(t,e,n){const i=Qe(t),r=i.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!ud(a))throw a;Ie(eT,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function Jk(t,e,n){const i=Qe(t);let r=We.min(),s=lt();return i.persistence.runTransaction("Execute query","readwrite",(a=>(function(f,d,p){const m=Qe(f),y=m.Fs.get(p);return y!==void 0?be.resolve(m.vs.get(y)):m.li.getTargetData(d,p)})(i,a,Fs(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,u.targetId).next((f=>{s=f}))})).next((()=>i.Cs.getDocumentsMatchingQuery(a,e,n?r:We.min(),n?s:lt()))).next((u=>(m7(i,eG(e),u),{documents:u,ks:s})))))}function m7(t,e,n){let i=t.Ms.get(e)||We.min();n.forEach(((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)})),t.Ms.set(e,i)}class Qk{constructor(){this.activeTargetIds=oG()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g7{constructor(){this.vo=new Qk,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qk,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="ConnectivityMonitor";class eI{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(Zk,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(Zk,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm=null;function ow(){return Zm===null?Zm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zm++,"0x"+Zm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="RestConnection",v7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class x7{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===i0?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const a=ow(),u=this.Qo(e,n.toUriEncodedString());Ie(Wb,`Sending RPC '${e}' ${a}:`,u,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,r,s);const{host:d}=new URL(u),p=sd(d);return this.zo(e,u,f,i,p).then((m=>(Ie(Wb,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw cc(Wb,`RPC '${e}' ${a} failed with error: `,m,"url: ",u,"request:",i),m}))}jo(e,n,i,r,s,a){return this.Wo(e,n,i,r,s)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ld})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,s)=>e[s]=r)),i&&i.headers.forEach(((r,s)=>e[s]=r))}Qo(e,n){const i=v7[e];let r=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection",Mf=(t,e,n)=>{t.listen(e,(i=>{try{n(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Ou extends x7{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ou.c_){const e=L5();Mf(e,O5.STAT_EVENT,(n=>{n.stat===Y_.PROXY?Ie(oi,"STAT_EVENT: detected buffering proxy"):n.stat===Y_.NOPROXY&&Ie(oi,"STAT_EVENT: detected no buffering proxy")})),Ou.c_=!0}}zo(e,n,i,r,s){const a=ow();return new Promise(((u,f)=>{const d=new M5;d.setWithCredentials(!0),d.listenOnce(D5.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Ig.NO_ERROR:const m=d.getResponseJson();Ie(oi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),u(m);break;case Ig.TIMEOUT:Ie(oi,`RPC '${e}' ${a} timed out`),f(new Oe(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Ig.HTTP_ERROR:const y=d.getStatus();if(Ie(oi,`RPC '${e}' ${a} failed with status:`,y,"response text:",d.getResponseText()),y>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const N=(function(R){const U=R.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(U)>=0?U:Te.UNKNOWN})(S.status);f(new Oe(N,S.message))}else f(new Oe(Te.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Oe(Te.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Ie(oi,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(r);Ie(oi,`RPC '${e}' ${a} sending request:`,r),d.send(n,"POST",p,i,15)}))}T_(e,n,i){const r=ow(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");Ie(oi,`Creating RPC '${e}' stream ${r}: ${d}`,u);const p=a.createWebChannel(d,u);this.I_(p);let m=!1,y=!1;const b=new b7({Ho:S=>{y?Ie(oi,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(m||(Ie(oi,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),Ie(oi,`RPC '${e}' stream ${r} sending:`,S),p.send(S))},Jo:()=>p.close()});return Mf(p,Wf.EventType.OPEN,(()=>{y||(Ie(oi,`RPC '${e}' stream ${r} transport opened.`),b.i_())})),Mf(p,Wf.EventType.CLOSE,(()=>{y||(y=!0,Ie(oi,`RPC '${e}' stream ${r} transport closed`),b.o_(),this.E_(p))})),Mf(p,Wf.EventType.ERROR,(S=>{y||(y=!0,cc(oi,`RPC '${e}' stream ${r} transport errored. Name:`,S.name,"Message:",S.message),b.o_(new Oe(Te.UNAVAILABLE,"The operation could not be completed")))})),Mf(p,Wf.EventType.MESSAGE,(S=>{var N;if(!y){const E=S.data[0];wt(!!E,16349);const R=E,U=(R==null?void 0:R.error)||((N=R[0])==null?void 0:N.error);if(U){Ie(oi,`RPC '${e}' stream ${r} received error:`,U);const j=U.status;let B=(function(I){const A=hn[I];if(A!==void 0)return y4(A)})(j),O=U.message;j==="NOT_FOUND"&&O.includes("database")&&O.includes("does not exist")&&O.includes(this.databaseId.database)&&cc(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),B===void 0&&(B=Te.INTERNAL,O="Unknown error status: "+j+" with message "+U.message),y=!0,b.o_(new Oe(B,O)),p.close()}else Ie(oi,`RPC '${e}' stream ${r} received:`,E),b.__(E)}})),Ou.u_(),setTimeout((()=>{b.s_()}),0),b}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return z5()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){return new Ou(t)}function Xb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){return new EG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ou.c_=!1;class j4{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=r,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="PersistentStream";class P4{constructor(e,n,i,r,s,a,u,f){this.Ci=e,this.b_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new j4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(jo(n.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{e((()=>{const r=new Oe(Te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(tI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ie(tI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class w7 extends P4{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=AG(this.serializer,e),i=(function(s){if(!("targetChange"in s))return We.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?We.min():a.readTime?Hs(a.readTime):We.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=rw(this.serializer),n.addTarget=(function(s,a){let u;const f=a.target;if(u=Z_(f)?{documents:RG(s,f)}:{query:jG(s,f).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=b4(s,a.resumeToken);const d=tw(s,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(We.min())>0){u.readTime=c0(s,a.snapshotVersion.toTimestamp());const d=tw(s,a.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const i=MG(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=rw(this.serializer),n.removeTarget=e,this.K_(n)}}class S7 extends P4{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=IG(e.writeResults,e.commitTime),i=Hs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=rw(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>kG(this.serializer,i)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{}class E7 extends T7{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Oe(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Wo(e,nw(n,i),r,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Oe(Te.UNKNOWN,s.toString())}))}jo(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.jo(e,nw(n,i),r,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(Te.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function N7(t,e,n,i){return new E7(t,e,n,i)}class C7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jo(n),this.aa=!1):Ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="RemoteStore";class A7{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo((a=>{i.enqueueAndForget((async()=>{wc(this)&&(Ie(uc,"Restarting streams for network reachability change."),await(async function(f){const d=Qe(f);d.Ea.add(4),await Qh(d),d.Va.set("Unknown"),d.Ea.delete(4),await jy(d)})(this))}))})),this.Va=new C7(i,r)}}async function jy(t){if(wc(t))for(const e of t.Ra)await e(!0)}async function Qh(t){for(const e of t.Ra)await e(!1)}function M4(t,e){const n=Qe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rT(n)?iT(n):dd(n).O_()&&nT(n,e))}function tT(t,e){const n=Qe(t),i=dd(n);n.Ia.delete(e),i.O_()&&D4(n,e),n.Ia.size===0&&(i.O_()?i.L_():wc(n)&&n.Va.set("Unknown"))}function nT(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dd(t).Z_(e)}function D4(t,e){t.da.$e(e),dd(t).X_(e)}function iT(t){t.da=new _G({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dd(t).start(),t.Va.ua()}function rT(t){return wc(t)&&!dd(t).x_()&&t.Ia.size>0}function wc(t){return Qe(t).Ea.size===0}function O4(t){t.da=void 0}async function k7(t){t.Va.set("Online")}async function I7(t){t.Ia.forEach(((e,n)=>{nT(t,e)}))}async function R7(t,e){O4(t),rT(t)?(t.Va.ha(e),iT(t)):t.Va.set("Unknown")}async function j7(t,e,n){if(t.Va.set("Online"),e instanceof x4&&e.state===2&&e.cause)try{await(async function(r,s){const a=s.cause;for(const u of s.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.da.removeTarget(u))})(t,e)}catch(i){Ie(uc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await d0(t,i)}else if(e instanceof Mg?t.da.Xe(e):e instanceof v4?t.da.st(e):t.da.tt(e),!n.isEqual(We.min()))try{const i=await R4(t.localStore);n.compareTo(i)>=0&&await(function(s,a){const u=s.da.Tt(a);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=s.Ia.get(d);p&&s.Ia.set(d,p.withResumeToken(f.resumeToken,a))}})),u.targetMismatches.forEach(((f,d)=>{const p=s.Ia.get(f);if(!p)return;s.Ia.set(f,p.withResumeToken(ni.EMPTY_BYTE_STRING,p.snapshotVersion)),D4(s,f);const m=new Va(p.target,f,d,p.sequenceNumber);nT(s,m)})),s.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(i){Ie(uc,"Failed to raise snapshot:",i),await d0(t,i)}}async function d0(t,e,n){if(!ud(e))throw e;t.Ea.add(1),await Qh(t),t.Va.set("Offline"),n||(n=()=>R4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ie(uc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await jy(t)}))}function L4(t,e){return e().catch((n=>d0(t,n,e)))}async function Py(t){const e=Qe(t),n=tl(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:FS;for(;P7(e);)try{const r=await h7(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,M7(e,r)}catch(r){await d0(e,r)}z4(e)&&U4(e)}function P7(t){return wc(t)&&t.Ta.length<10}function M7(t,e){t.Ta.push(e);const n=tl(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function z4(t){return wc(t)&&!tl(t).x_()&&t.Ta.length>0}function U4(t){tl(t).start()}async function D7(t){tl(t).ra()}async function O7(t){const e=tl(t);for(const n of t.Ta)e.ea(n.mutations)}async function L7(t,e,n){const i=t.Ta.shift(),r=YS.from(i,e,n);await L4(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Py(t)}async function z7(t,e){e&&tl(t).Y_&&await(async function(i,r){if((function(a){return vG(a)&&a!==Te.ABORTED})(r.code)){const s=i.Ta.shift();tl(i).B_(),await L4(i,(()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r))),await Py(i)}})(t,e),z4(t)&&U4(t)}async function nI(t,e){const n=Qe(t);n.asyncQueue.verifyOperationInProgress(),Ie(uc,"RemoteStore received new credentials");const i=wc(n);n.Ea.add(3),await Qh(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await jy(n)}async function U7(t,e){const n=Qe(t);e?(n.Ea.delete(2),await jy(n)):e||(n.Ea.add(2),await Qh(n),n.Va.set("Unknown"))}function dd(t){return t.ma||(t.ma=(function(n,i,r){const s=Qe(n);return s.sa(),new w7(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(t.datastore,t.asyncQueue,{Zo:k7.bind(null,t),Yo:I7.bind(null,t),t_:R7.bind(null,t),J_:j7.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),rT(t)?iT(t):t.Va.set("Unknown")):(await t.ma.stop(),O4(t))}))),t.ma}function tl(t){return t.fa||(t.fa=(function(n,i,r){const s=Qe(n);return s.sa(),new S7(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:D7.bind(null,t),t_:z7.bind(null,t),ta:O7.bind(null,t),na:L7.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Py(t)):(await t.fa.stop(),t.Ta.length>0&&(Ie(uc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,u=new sT(e,n,a,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oT(t,e){if(jo("AsyncQueue",`${e}: ${t}`),ud(t))return new Oe(Te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{static emptySet(e){return new Lu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ve.comparator(n.key,i.key):(n,i)=>Ve.comparator(n.key,i.key),this.keyedMap=Xf(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Lu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.ga=new Gt(Ve.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Be(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Wu{constructor(e,n,i,r,s,a,u,f,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach((u=>{a.push({type:0,doc:u})})),new Wu(e,n,Lu.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ny(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class F7{constructor(){this.queries=rI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Qe(n),s=r.queries;r.queries=rI(),s.forEach(((a,u)=>{for(const f of u.ba)f.onError(i)}))})(this,new Oe(Te.ABORTED,"Firestore shutting down"))}}function rI(){return new bc((t=>r4(t)),Ny)}async function H7(t,e){const n=Qe(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.Da()&&(i=2):(s=new V7,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=oT(a,`Initialization of query '${wu(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&aT(n)}async function B7(t,e){const n=Qe(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?r=e.Da()?0:1:!s.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function $7(t,e){const n=Qe(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const u of a.ba)u.Fa(r)&&(i=!0);a.wa=r}}i&&aT(n)}function q7(t,e,n){const i=Qe(t),r=i.queries.get(e);if(r)for(const s of r.ba)s.onError(n);i.queries.delete(e)}function aT(t){t.Ca.forEach((e=>{e.next()}))}var aw,sI;(sI=aw||(aw={})).Ma="default",sI.Cache="cache";class G7{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Wu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==aw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.key=e}}class F4{constructor(e){this.key=e}}class K7{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=lt(),this.mutatedKeys=lt(),this.eu=s4(e),this.tu=new Lu(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new iI,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,m)=>{const y=r.get(p),b=Cy(this.query,m)?m:null,S=!!y&&this.mutatedKeys.has(y.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let E=!1;y&&b?y.data.isEqual(b.data)?S!==N&&(i.track({type:3,doc:b}),E=!0):this.su(y,b)||(i.track({type:2,doc:b}),E=!0,(f&&this.eu(b,f)>0||d&&this.eu(b,d)<0)&&(u=!0)):!y&&b?(i.track({type:0,doc:b}),E=!0):y&&!b&&(i.track({type:1,doc:y}),E=!0,(f||d)&&(u=!0)),E&&(b?(a=a.add(b),s=N?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{tu:a,iu:i,Ss:u,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((p,m)=>(function(b,S){const N=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Vt:E})}};return N(b)-N(S)})(p.type,m.type)||this.eu(p.doc,m.doc))),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],f=this.Ya.size===0&&this.current&&!r?1:0,d=f!==this.Xa;return this.Xa=f,a.length!==0||d?{snapshot:new Wu(this.query,e.tu,s,a,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iI,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=lt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new F4(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new V4(i))})),n}cu(e){this.Za=e.ks,this.Ya=lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const lT="SyncEngine";class Y7{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class W7{constructor(e){this.key=e,this.hu=!1}}class X7{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new bc((u=>r4(u)),Ny),this.Iu=new Map,this.Eu=new Set,this.Ru=new Gt(Ve.comparator),this.Au=new Map,this.Vu=new JS,this.du={},this.mu=new Map,this.fu=Yu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function J7(t,e,n=!0){const i=K4(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await H4(i,e,n,!0),r}async function Q7(t,e){const n=K4(t);await H4(n,e,!0,!1)}async function H4(t,e,n,i){const r=await p7(t.localStore,Fs(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let u;return i&&(u=await Z7(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&M4(t.remoteStore,r),u}async function Z7(t,e,n,i,r){t.pu=(m,y,b)=>(async function(N,E,R,U){let j=E.view.ru(R);j.Ss&&(j=await Jk(N.localStore,E.query,!1).then((({documents:I})=>E.view.ru(I,j))));const B=U&&U.targetChanges.get(E.targetId),O=U&&U.targetMismatches.get(E.targetId)!=null,P=E.view.applyChanges(j,N.isPrimaryClient,B,O);return aI(N,E.targetId,P.au),P.snapshot})(t,m,y,b);const s=await Jk(t.localStore,e,!0),a=new K7(e,s.ks),u=a.ru(s.documents),f=Jh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(u,t.isPrimaryClient,f);aI(t,n,d.au);const p=new Y7(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function eK(t,e,n){const i=Qe(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter((a=>!Ny(a,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await sw(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&tT(i.remoteStore,r.targetId),lw(i,r.targetId)})).catch(cd)):(lw(i,r.targetId),await sw(i.localStore,r.targetId,!0))}async function tK(t,e){const n=Qe(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),tT(n.remoteStore,i.targetId))}async function nK(t,e,n){const i=cK(t);try{const r=await(function(a,u){const f=Qe(a),d=Ot.now(),p=u.reduce(((b,S)=>b.add(S.key)),lt());let m,y;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let S=Po(),N=lt();return f.xs.getEntries(b,p).next((E=>{S=E,S.forEach(((R,U)=>{U.isValidDocument()||(N=N.add(R))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,S))).next((E=>{m=E;const R=[];for(const U of u){const j=hG(U,m.get(U.key).overlayedDocument);j!=null&&R.push(new _c(U.key,j,J5(j.value.mapValue),Ao.exists(!0)))}return f.mutationQueue.addMutationBatch(b,d,R,u)})).next((E=>{y=E;const R=E.applyToLocalDocumentSet(m,N);return f.documentOverlayCache.saveOverlays(b,E.batchId,R)}))})).then((()=>({batchId:y.batchId,changes:a4(m)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(a,u,f){let d=a.du[a.currentUser.toKey()];d||(d=new Gt(at)),d=d.insert(u,f),a.du[a.currentUser.toKey()]=d})(i,r.batchId,n),await Zh(i,r.changes),await Py(i.remoteStore)}catch(r){const s=oT(r,"Failed to persist write");n.reject(s)}}async function B4(t,e){const n=Qe(t);try{const i=await d7(n.localStore,e);e.targetChanges.forEach(((r,s)=>{const a=n.Au.get(s);a&&(wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?wt(a.hu,14607):r.removedDocuments.size>0&&(wt(a.hu,42227),a.hu=!1))})),await Zh(n,i,e)}catch(i){await cd(i)}}function oI(t,e,n){const i=Qe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(a,u){const f=Qe(a);f.onlineState=u;let d=!1;f.queries.forEach(((p,m)=>{for(const y of m.ba)y.va(u)&&(d=!0)})),d&&aT(f)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iK(t,e,n){const i=Qe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Gt(Ve.comparator);a=a.insert(s,ci.newNoDocument(s,We.min()));const u=lt().add(s),f=new Iy(We.min(),new Map,new Gt(at),a,u);await B4(i,f),i.Ru=i.Ru.remove(s),i.Au.delete(e),cT(i)}else await sw(i.localStore,e,!1).then((()=>lw(i,e,n))).catch(cd)}async function rK(t,e){const n=Qe(t),i=e.batch.batchId;try{const r=await u7(n.localStore,e);q4(n,i,null),$4(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zh(n,r)}catch(r){await cd(r)}}async function sK(t,e,n){const i=Qe(t);try{const r=await(function(a,u){const f=Qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,u).next((m=>(wt(m!==null,37113),p=m.keys(),f.mutationQueue.removeMutationBatch(d,m)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,e);q4(i,e,n),$4(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zh(i,r)}catch(r){await cd(r)}}function $4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function q4(t,e,n){const i=Qe(t);let r=i.du[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function lw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((i=>{t.Vu.containsKey(i)||G4(t,i)}))}function G4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(tT(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),cT(t))}function aI(t,e,n){for(const i of n)i instanceof V4?(t.Vu.addReference(i.key,e),oK(t,i)):i instanceof F4?(Ie(lT,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||G4(t,i.key)):Be(19791,{wu:i})}function oK(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(Ie(lT,"New document in limbo: "+n),t.Eu.add(i),cT(t))}function cT(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ve(qt.fromString(e)),i=t.fu.next();t.Au.set(i,new W7(n)),t.Ru=t.Ru.insert(n,i),M4(t.remoteStore,new Va(Fs(GS(n.path)),i,"TargetPurposeLimboResolution",wy.ce))}}async function Zh(t,e,n){const i=Qe(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,f)=>{a.push(i.pu(f,e,n).then((d=>{var p;if((d||n)&&i.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,m?"current":"not-current")}if(d){r.push(d);const m=ZS.Es(f.targetId,d);s.push(m)}})))})),await Promise.all(a),i.Pu.J_(r),await(async function(f,d){const p=Qe(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>be.forEach(d,(y=>be.forEach(y.Ts,(b=>p.persistence.referenceDelegate.addReference(m,y.targetId,b))).next((()=>be.forEach(y.Is,(b=>p.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))))))}catch(m){if(!ud(m))throw m;Ie(eT,"Failed to update sequence numbers: "+m)}for(const m of d){const y=m.targetId;if(!m.fromCache){const b=p.vs.get(y),S=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(S);p.vs=p.vs.insert(y,N)}}})(i.localStore,s))}async function aK(t,e){const n=Qe(t);if(!n.currentUser.isEqual(e)){Ie(lT,"User change. New user:",e.toKey());const i=await I4(n.localStore,e);n.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((f=>{f.reject(new Oe(Te.CANCELLED,a))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zh(n,i.Ns)}}function lK(t,e){const n=Qe(t),i=n.Au.get(e);if(i&&i.hu)return lt().add(i.key);{let r=lt();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function K4(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iK.bind(null,e),e.Pu.J_=$7.bind(null,e.eventManager),e.Pu.yu=q7.bind(null,e.eventManager),e}function cK(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sK.bind(null,e),e}class f0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ry(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return c7(this.persistence,new o7,e.initialUser,this.serializer)}Cu(e){return new k4(QS.Vi,this.serializer)}Du(e){return new g7}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}f0.provider={build:()=>new f0};class uK extends f0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){wt(this.persistence.referenceDelegate instanceof u0,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qG(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new k4((i=>u0.Vi(i,n)),this.serializer)}}class cw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aK.bind(null,this.syncEngine),await U7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F7})()}createDatastore(e){const n=Ry(e.databaseInfo.databaseId),i=_7(e.databaseInfo);return N7(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,s,a,u){return new A7(i,r,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>oI(this.syncEngine,n,0)),(function(){return eI.v()?new eI:new y7})())}createSyncEngine(e,n){return(function(r,s,a,u,f,d,p){const m=new X7(r,s,a,u,f,d);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const s=Qe(r);Ie(uc,"RemoteStore shutting down."),s.Ea.add(5),await Qh(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}cw.provider={build:()=>new cw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="FirestoreClient";class fK{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=r,this.user=li.UNAUTHENTICATED,this.clientId=US.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,(async a=>{Ie(nl,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,(a=>(Ie(nl,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=oT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Jb(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(nl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await I4(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function lI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hK(t);Ie(nl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>nI(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>nI(e.remoteStore,r))),t._onlineComponents=e}async function hK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(nl,"Using user provided OfflineComponentProvider");try{await Jb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===Te.FAILED_PRECONDITION||r.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;cc("Error using user provided cache. Falling back to memory cache: "+n),await Jb(t,new f0)}}else Ie(nl,"Using default OfflineComponentProvider"),await Jb(t,new uK(void 0));return t._offlineComponents}async function Y4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(nl,"Using user provided OnlineComponentProvider"),await lI(t,t._uninitializedComponentsProvider._online)):(Ie(nl,"Using default OnlineComponentProvider"),await lI(t,new cw))),t._onlineComponents}function pK(t){return Y4(t).then((e=>e.syncEngine))}async function mK(t){const e=await Y4(t),n=e.eventManager;return n.onListen=J7.bind(null,e.syncEngine),n.onUnlisten=eK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tK.bind(null,e.syncEngine),n}function gK(t,e,n={}){const i=new Ka;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,f,d){const p=new dK({next:y=>{p.Nu(),a.enqueueAndForget((()=>B7(s,m)));const b=y.docs.has(u);!b&&y.fromCache?d.reject(new Oe(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&f&&f.source==="server"?d.reject(new Oe(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new G7(GS(u.path),p,{includeMetadataChanges:!0,Ka:!0});return H7(s,m)})(await mK(t),t.asyncQueue,e,n,i))),i.promise}function yK(t,e){const n=new Ka;return t.asyncQueue.enqueueAndForget((async()=>nK(await pK(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK="ComponentProvider",cI=new Map;function xK(t,e,n,i,r){return new Dq(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,W4(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="firestore.googleapis.com",uI=!0;class dI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X4,this.ssl=uI}else this.host=e.host,this.ssl=e.ssl??uI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BG)throw new Oe(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W4(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Oe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Oe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Oe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uT{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new hq;switch(i.type){case"firstParty":return new yq(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Oe(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=cI.get(n);i&&(Ie(vK,"Removing Datastore"),cI.delete(n),i.terminate())})(this),Promise.resolve()}}function bK(t,e,n,i={}){var d;t=ph(t,uT);const r=sd(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(YO(`https://${u}`),WO("Firestore",!0)),s.host!==X4&&s.host!==u&&cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...s,host:u,ssl:r,emulatorOptions:i};if(!sc(f,a)&&(t._setSettings(f),i.mockUserToken)){let p,m;if(typeof i.mockUserToken=="string")p=i.mockUserToken,m=li.MOCK_USER;else{p=zF(i.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new Oe(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new li(y)}t._authCredentials=new pq(new V5(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new dT(this.firestore,e,this._query)}}class Dn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _h(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}toJSON(){return{type:Dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Wh(n,Dn._jsonSchema))return new Dn(e,i||null,new Ve(qt.fromString(n.referencePath)))}}Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:pn("string",Dn._jsonSchemaVersion),referencePath:pn("string")};class _h extends dT{constructor(e,n,i){super(e,n,GS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Ve(e))}withConverter(e){return new _h(this.firestore,e,this._path)}}function fI(t,e,...n){if(t=Zi(t),arguments.length===1&&(e=US.newId()),Sq("doc","path",e),t instanceof uT){const i=qt.fromString(e,...n);return Ek(i),new Dn(t,null,new Ve(i))}{if(!(t instanceof Dn||t instanceof _h))throw new Oe(Te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(qt.fromString(e,...n));return Ek(i),new Dn(t.firestore,t instanceof _h?t.converter:null,new Ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="AsyncQueue";class pI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new j4(this,"async_queue_retry"),this._c=()=>{const i=Xb();i&&Ie(hI,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Xb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ka;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ud(e))throw e;Ie(hI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,jo("INTERNAL UNHANDLED ERROR: ",mI(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=sT.createAndSchedule(this,e,n,i,(s=>this.hc(s)));return this.tc.push(r),r}uc(){this.nc&&Be(47125,{Pc:mI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fT extends uT{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new pI,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pI(e),this._firestoreClient=void 0,await e}}}function _K(t,e){const n=typeof t=="object"?t:ZO(),i=typeof t=="string"?t:i0,r=NS(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=OF("firestore");s&&bK(r,...s)}return r}function J4(t){if(t._terminated)throw new Oe(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wK(t),t._firestoreClient}function wK(t){var i,r,s,a;const e=t._freezeSettings(),n=xK(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(r=t._app)==null?void 0:r.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new fK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(f){const d=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _r(ni.fromBase64String(e))}catch(n){throw new Oe(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _r(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wh(e,_r._jsonSchema))return _r.fromBase64String(e.bytes)}}_r._jsonSchemaVersion="firestore/bytes/1.0",_r._jsonSchema={type:pn("string",_r._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Oe(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(Wh(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:pn("string",Bs._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wh(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ns(e.vectorValues);throw new Oe(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:pn("string",ns._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=/^__.*__$/;class TK{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new _c(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xh(e,this.data,n,this.fieldTransforms)}}function e3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{dataSource:t})}}class hT{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new hT({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return h0(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(e3(this.dataSource)&&SK.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class EK{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ry(e)}createContext(e,n,i,r=!1){return new hT({dataSource:e,methodName:n,targetDoc:i,path:Qn.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NK(t){const e=t._freezeSettings(),n=Ry(t._databaseId);return new EK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CK(t,e,n,i,r,s={}){const a=t.createContext(s.merge||s.mergeFields?2:0,e,n,r);r3("Data must be an object, but it was:",a,i);const u=n3(i,a);let f,d;if(s.merge)f=new Qr(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=pT(e,m,n);if(!a.contains(y))throw new Oe(Te.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);IK(p,y)||p.push(y)}f=new Qr(p),d=a.fieldTransforms.filter((m=>f.covers(m.field)))}else f=null,d=a.fieldTransforms;return new TK(new br(u),f,d)}function t3(t,e){if(i3(t=Zi(t)))return r3("Unsupported field value:",e,t),n3(t,e);if(t instanceof Z4)return(function(i,r){if(!e3(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const s=[];let a=0;for(const u of i){let f=t3(u,r.childContextForArray(a));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),a++}return{arrayValue:{values:s}}})(t,e)}return(function(i,r){if((i=Zi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return aG(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ot.fromDate(i);return{timestampValue:c0(r.serializer,s)}}if(i instanceof Ot){const s=new Ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:c0(r.serializer,s)}}if(i instanceof Bs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _r)return{bytesValue:b4(r.serializer,i._byteString)};if(i instanceof Dn){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XS(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ns)return(function(a,u){const f=a instanceof ns?a.toArray():a;return{mapValue:{fields:{[W5]:{stringValue:X5},[r0]:{arrayValue:{values:f.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return KS(u.serializer,p)}))}}}}}})(i,r);if(C4(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${VS(i)}`)})(t,e)}function n3(t,e){const n={};return B5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xc(t,((i,r)=>{const s=t3(r,e.childContextForField(i));s!=null&&(n[i]=s)})),{mapValue:{fields:n}}}function i3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Bs||t instanceof _r||t instanceof Dn||t instanceof Z4||t instanceof ns||C4(t))}function r3(t,e,n){if(!i3(n)||!F5(n)){const i=VS(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function pT(t,e,n){if((e=Zi(e))instanceof Q4)return e._internalPath;if(typeof e=="string")return kK(t,e);throw h0("Field path arguments must be of type string or ",t,!1,void 0,n)}const AK=new RegExp("[~\\*/\\[\\]]");function kK(t,e,n){if(e.search(AK)>=0)throw h0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Q4(...e.split("."))._internalPath}catch{throw h0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function h0(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(s||a)&&(f+=" (found",s&&(f+=` in field ${i}`),a&&(f+=` in document ${r}`),f+=")"),new Oe(Te.INVALID_ARGUMENT,u+t+f)}function IK(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{convertValue(e,n="none"){switch(el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xc(e,((r,s)=>{i[r]=this.convertValue(s,n)})),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[r0].arrayValue)==null?void 0:r.values)==null?void 0:s.map((a=>rn(a.doubleValue)));return new ns(n)}convertGeoPoint(e){return new Bs(rn(e.latitude),rn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ty(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(gh(e));default:return null}}convertTimestamp(e){const n=Qa(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=qt.fromString(e);wt(N4(i),9688,{name:e});const r=new yh(i.get(1),i.get(3)),s=new Ve(i.popFirst(5));return r.isEqual(n)||jo(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK extends RK{constructor(e){super(),this.firestore=e}convertBytes(e){return new _r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}const gI="@firebase/firestore",yI="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(pT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PK extends s3{data(){return super.data()}}function MK(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Qf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ql extends s3{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(pT("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ql._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ql._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ql._jsonSchema={type:pn("string",Ql._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class Dg extends Ql{data(e={}){return super.data(e)}}class ch{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Qf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Dg(this._firestore,this._userDataWriter,i.key,i,new Qf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map((u=>{const f=new Dg(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qf(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:a++}}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const f=new Dg(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qf(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:DK(u.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ch._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=US.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ch._jsonSchemaVersion="firestore/querySnapshot/1.0",ch._jsonSchema={type:pn("string",ch._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(t){t=ph(t,Dn);const e=ph(t.firestore,fT),n=J4(e);return gK(n,t._key).then((i=>UK(e,t,i)))}function LK(t,e,n){t=ph(t,Dn);const i=ph(t.firestore,fT),r=MK(t.converter,e),s=NK(i);return zK(i,[CK(s,"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ao.none())])}function zK(t,e){const n=J4(t);return yK(n,e)}function UK(t,e,n){const i=n.docs.get(e._key),r=new jK(t);return new Ql(t,r,e._key,i,new Qf(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){fq(od),Bu(new oc("firestore",((i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),u=new fT(new mq(i.getProvider("auth-internal")),new vq(a,i.getProvider("app-check-internal")),Oq(a,r),a);return s={useFetchStreams:n,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),qa(gI,yI,e),qa(gI,yI,"esm2020")})();const VK={apiKey:"AIzaSyANv4kf7cjoLdTGGZqkI3DX0TVMyi6j2_A",authDomain:"life-os-6c01f.firebaseapp.com",projectId:"life-os-6c01f",storageBucket:"life-os-6c01f.firebasestorage.app",messagingSenderId:"870895248318",appId:"1:870895248318:web:0de4b80a0cf8663b564fef",measurementId:"G-W7RN5B5WZP"},o3=QO(VK),Ya=uq(o3),vI=_K(o3);function fd(t,e,n,i){const[r,s]=C.useState(e),[a,u]=C.useState(!0),[f,d]=C.useState(null),p=C.useRef(!1);return C.useEffect(()=>{const m=MS(Ya,async y=>{if(d(y),u(!0),y)try{const b=fI(vI,"users",y.uid,"modules",n),S=await OK(b);if(S.exists()){let N=S.data();i&&(N=i(N)),s(N)}else s(e)}catch(b){console.error(`Error fetching ${n}:`,b),s(e)}else try{const b=localStorage.getItem(t);if(b){let S=JSON.parse(b);i&&(S=i(S)),s(S)}else s(e)}catch(b){console.warn(`Error loading local ${t}:`,b),s(e)}u(!1),p.current=!0});return()=>m()},[t,n]),C.useEffect(()=>{if(!p.current)return;const m=setTimeout(async()=>{if(f)try{const y=fI(vI,"users",f.uid,"modules",n),b=JSON.parse(JSON.stringify(r,(S,N)=>N===void 0?null:N));await LK(y,b)}catch(y){console.error(`Error saving ${n}:`,y)}else localStorage.setItem(t,JSON.stringify(r))},1e3);return()=>clearTimeout(m)},[r,f,t,n]),[r,s,a]}const FK=t=>{C.useEffect(()=>{const e=t.user.preferences.theme,n=t.user.unlockedThemes.find(a=>a.id===e)||t.user.unlockedThemes[0],i=document.documentElement;n&&Object.entries(n.colors).forEach(([a,u])=>i.style.setProperty(a,u)),document.body.setAttribute("data-theme",e);const r="theme-custom-structural-css";let s=document.getElementById(r);n!=null&&n.customCss?(s||(s=document.createElement("style"),s.id=r,document.head.appendChild(s)),s.innerHTML=n.customCss):s&&(s.innerHTML="")},[t.user.preferences.theme,t.user.unlockedThemes])};var xI;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(xI||(xI={}));const Zl=rd("LocalNotifications",{web:()=>wS(()=>import("./web-DgPHI9QR.js"),[]).then(t=>new t.LocalNotificationsWeb)}),a3="lifeos_dashboard_channel",l3="lifeos_alerts_channel",c3=async()=>{if(qs.isNativePlatform())try{await Zl.createChannel({id:a3,name:"LifeOS Dashboard",description:"Persistent Daily Summary",importance:2,visibility:1,sound:void 0,vibration:!1}),await Zl.createChannel({id:l3,name:"Mission Alerts",description:"Time-sensitive reminders",importance:5,visibility:1,sound:"beep.wav",vibration:!0}),await Zl.registerActionTypes({types:[{id:"DASHBOARD_ACTIONS",actions:[{id:"OPEN_APP",title:" Open Command",foreground:!0}]},{id:"MISSION_ALERTS",actions:[{id:"COMPLETE",title:" Complete",foreground:!1},{id:"SNOOZE",title:" Snooze 10m",foreground:!1}]}]}),console.log(" Channels Registered: Dashboard (Silent) & Alerts (Loud)")}catch(t){console.error("Failed to register channels",t)}},u3=async()=>qs.isNativePlatform()?(await Zl.requestPermissions()).display==="granted"?(await c3(),!0):!1:"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support desktop notification"),!1),HK=async(t,e)=>{if(qs.isNativePlatform())try{await Zl.schedule({notifications:[{id:99999,title:t,body:e,ongoing:!0,autoCancel:!1,silent:!0,smallIcon:"ic_stat_icon_config_sample",channelId:a3,actionTypeId:"DASHBOARD_ACTIONS",schedule:{at:new Date(Date.now()+100)}}]})}catch(n){console.error("Dashboard Update Failed",n)}},p0=async(t,e,n,i)=>{if(console.log(` sendAlert called: ${e} - ${n}`),qs.isNativePlatform())try{await Zl.schedule({notifications:[{id:t,title:` ${e}`,body:n,schedule:{at:new Date(Date.now()+100)},sound:"beep.wav",smallIcon:"ic_stat_icon_config_sample",actionTypeId:"MISSION_ALERTS",extra:i||null,channelId:l3}]})}catch(r){console.error("Native alert failed:",r)}else{if(!("Notification"in window)){alert("This browser does not support desktop notification");return}if(Notification.permission!=="granted"&&(console.log(" Permission not granted, requesting..."),await Notification.requestPermission()!=="granted")){alert("Please enable notifications to receive alerts.");return}try{if("serviceWorker"in navigator&&navigator.serviceWorker.controller)await(await navigator.serviceWorker.ready).showNotification(e,{body:n,icon:"/logo192.png",badge:"/logo192.png",vibrate:[200,100,200],tag:String(t),requireInteraction:!0,data:{url:window.location.href}}),console.log(" Service Worker notification sent");else{const r=new Notification(e,{body:n,icon:"/logo192.png",badge:"/logo192.png",vibrate:[200,100,200],tag:String(t),requireInteraction:!0});r.onclick=()=>{window.focus(),r.close()},console.log(" Web notification sent (Classic API)")}}catch(r){console.error("Web notification failed:",r),alert("Failed to send notification. See console for details.")}}},eg=async(t,e)=>{const n=Math.floor(Date.now()+Math.random()*1e4);await p0(n,t,e)},ui=[1,2,3,5,8,13,21,34,55,89,144,233,377,610],mT=t=>{let e=ui.findIndex(d=>d>t)-1;t===0&&(e=-1),t>=610&&(e=ui.length-1),e<-1&&(e=ui.length-1);const n=e+1;let i="Initiate",r="text-gray-500 border-gray-500/20";n<=7?(i="Foundation",r="text-gray-400 border-gray-500/30"):n<=10?(i="Solid State",r="text-life-silver border-life-silver/50"):n<=12?(i="Mastery",r="text-life-gold border-life-gold"):n===13?(i="Legendary",r="text-life-diamond border-life-diamond shadow-[0_0_10px_rgba(96,165,250,0.5)]"):(i="The Godfather",r="text-life-crimson border-life-crimson shadow-[0_0_15px_rgba(220,38,38,0.6)]");const s=e>=0?ui[e]:0,a=e+1<ui.length?ui[e+1]:610,u=t>=610;let f=0;if(u)f=100;else{const d=a-s,p=t-s;f=Math.min(100,Math.max(0,p/d*100))}return{level:n,phase:i,phaseColor:r,nextCheckpoint:a,prevCheckpoint:s,progress:f,isMaxLevel:u}},m0=t=>{if(t<=1)return 0;let e=ui.findIndex(r=>r>t);e===-1&&(e=ui.length);const n=e-1,i=ui[n]||0;return t>i?i:ui[n-1]||0},Xu=(t,e)=>{const n=e?new Date(e):new Date,i=new Date(t.createdAt||new Date().toISOString());n.setHours(0,0,0,0),i.setHours(0,0,0,0);const r=n.getTime()-i.getTime(),s=Math.floor(r/(1e3*60*60*24));if(s<0)return!0;switch(t.type){case"daily":return!0;case"specific_days":return!t.specificDays||t.specificDays.length===0?!0:t.specificDays.includes(n.getDay());case"interval":const a=t.intervalValue||1;return s%a===0;case"custom":if(!t.pattern||t.pattern.length===0)return!0;const u=s%t.pattern.length;return t.pattern[u]==="1";default:return!0}},BK={Wood:"  .    .",Copper:"    .",Iron:"      .",Silver:" .     .",Gold:"    .  .",Diamond:"  .    .",Crimson:" .     ."},Og={[Ge.EASY]:1,[Ge.NORMAL]:3,[Ge.HARD]:9},d3=(t,e,n,i=null)=>{const r=i?new Date(i):new Date,s=r.toISOString().split("T")[0],a=[];let u=0;t.forEach(d=>{if(!d.isArchived){const p=d.deadline||d.scheduledTime;if(p&&p.startsWith(s)){const m=Og[d.difficulty]||1;a.push({id:d.id,title:d.title,type:"task",difficulty:d.difficulty,weight:m,percentage:0,isCompleted:d.isCompleted}),u+=m}}}),e.forEach(d=>{if(Xu(d,r.toISOString())){const p=Og[d.difficulty]||1;a.push({id:d.id,title:d.title,type:"habit",difficulty:d.difficulty,weight:p,percentage:0,isCompleted:d.status==="completed"}),u+=p}}),n.forEach(d=>{d.status==="active"&&d.steps.forEach(p=>{const m=p.scheduledTime||p.scheduledDate;if(m&&m.startsWith(s)){const y=Og[d.difficulty]||3;a.push({id:p.id,title:`${d.title}: ${p.title}`,type:"raid",difficulty:d.difficulty,weight:y,percentage:0,isCompleted:p.isCompleted}),u+=y}})});const f=a.map(d=>({...d,percentage:u>0?Math.round(d.weight/u*100):0}));return f.sort((d,p)=>p.weight-d.weight),{items:f,totalWeight:u}},f3=t=>{try{const e=JSON.parse(localStorage.getItem("LIFE_OS_TASKS_DATA")||"[]"),n=JSON.parse(localStorage.getItem("LIFE_OS_HABITS_DATA")||"[]"),i=JSON.parse(localStorage.getItem("LIFE_OS_RAIDS_DATA")||"[]"),{totalWeight:r}=d3(e,n,i),s=Og[t]||1,a=Math.max(s,r);return Math.round(s/a*100)}catch(e){return console.error("Honor Calc Failed:",e),5}},$K=t=>t>=99?{material:"Crimson",icon:"",tier:"crimson"}:t>=90?{material:"Diamond",icon:"",tier:"diamond"}:t>=80?{material:"Gold",icon:"",tier:"gold"}:t>=70?{material:"Silver",icon:"",tier:"silver"}:t>=60?{material:"Iron",icon:"",tier:"silver"}:t>=40?{material:"Copper",icon:"",tier:"silver"}:{material:"Wood",icon:"",tier:"silver"},wh=(t,e=null)=>{const i=(e?new Date(e):new Date).toISOString().slice(0,7),r=Object.entries(t).filter(([a])=>a.startsWith(i)).map(([,a])=>a);if(r.length===0)return 100;const s=r.reduce((a,u)=>a+u,0);return Math.round(s/r.length)},qK=(t,e=null)=>{const i=(e?new Date(e):new Date).toISOString().slice(0,7),r=Object.entries(t).filter(([f])=>f.startsWith(i));if(r.length===0)return{updatedLog:t,newAverage:100,redeemedDate:null};r.sort((f,d)=>f[1]-d[1]);const s=r[0];if(s[1]>=100)return{updatedLog:t,newAverage:100,redeemedDate:null};const a={...t};a[s[0]]=100;const u=wh(a,e);return{updatedLog:a,newAverage:u,redeemedDate:s[0]}},GK=(t,e,n)=>{const{material:i,icon:r,tier:s}=$K(t),a=BK[i],u=Math.floor(t*15),f=Math.floor(t*10);return{id:`bdg_honor_${e.toLowerCase()}_${n}`,name:`${i} Honor: ${e} ${n}`,icon:r,description:`Achieved ${t}% Integrity Score in ${e} ${n}. Rank: ${i}.`,category:"consistency",triggerType:"manual",levels:[{tier:s,target:1,quote:a,rewards:{xp:u,gold:f}}]}},h3=(t,e)=>{const n=t.dailyTarget,r=t.dailyXP>=n,s=e?new Date(e):new Date,a=new Date(s);a.setDate(a.getDate()-1);const u=a.toISOString().split("T")[0],f={...t.honorDailyLog||{}};let d=f[u]!==void 0?f[u]:100;r&&(d+=10),d=Math.min(110,Math.max(0,d)),f[u]=d;let p,m="";if(s.getDate()===1){const I=new Date(s);I.setMonth(I.getMonth()-1);const A=I.toLocaleString("default",{month:"long"}),M=I.getFullYear(),H=I.toISOString().slice(0,7),F=Object.entries(f).filter(([D])=>D.startsWith(H)).map(([,D])=>D);if(F.length>0){const D=F.reduce(($,Y)=>$+Y,0),z=Math.round(D/F.length);p=GK(z,A,M),m=` |  ${A} Rank: ${z}%`}}const y=wh(f,s.toISOString());let b=t.streak,S=t.gold,N=t.shields,E=t.consecutiveShields||0,R=t.metrics.shieldsUsed,U="",j="info";if(r){b++,E=0;const I=t.currentMode===Mn.HARD?200:t.currentMode===Mn.NORMAL?100:50;S+=I,d>100?(U=` Flawless Victory! Honor Overcharged (${d}%) | +${I}G`,j="crit"):(U=` New Day! Streak ${b} | +${I}G | Honor +10%`,j="success");const A=dF[b];A?(S+=A,U=` Milestone: ${b} Days! +${A}G`,j="level-up",t.preferences.deviceNotificationsEnabled&&eg(" Milestone Reached!",`You hit a ${b} day streak! Bonus ${A}G awarded.`)):t.preferences.deviceNotificationsEnabled&&eg(" Protocol Reset",`New day initiated. Streak: ${b}. Honor: ${d}%.`)}else{const I=N>0,A=E<3;I&&A?(N--,E++,R++,U=` Streak Saved by Shield (${N} Remaining)`,j="info",t.preferences.deviceNotificationsEnabled&&eg(" Shield Deployed",`Your streak was saved. ${N} shields remaining.`)):(I&&!A?U=" Shield Limit Exceeded! Streak Shattered.":U=" Target Missed. Streak Lost.",b=0,E=0,j="error",t.preferences.deviceNotificationsEnabled&&eg(" Streak Lost","Protocol failed. System reset to Day 0."))}m&&(U+=m,j="level-up");const B=t.pendingMode,O=_S[B];return{newUser:{...t,streak:b,gold:S,shields:N,honor:y,honorDailyLog:f,consecutiveShields:E,dailyXP:0,dailyTarget:O,currentMode:B,lastProcessedDate:s.toISOString(),lastOnline:s.toISOString(),metrics:{...t.metrics,shieldsUsed:R,highestStreak:Math.max(t.metrics.highestStreak,b)}},toastMessage:U,toastType:j,newBadge:p}},KK=(t,e)=>{C.useEffect(()=>{const n=()=>{const r=t.ui.debugDate?new Date(t.ui.debugDate):new Date,s=new Date(t.user.lastProcessedDate),a=t.user.preferences.dayStartHour??4,u=p=>{const m=new Date(p);return m.setHours(p.getHours()-a),m},f=u(r),d=u(s);if(f.getDate()!==d.getDate()||f.getMonth()!==d.getMonth()){const p=`day_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,m=new Date().toISOString();e(y=>{const{newUser:b,toastMessage:S,toastType:N,newBadge:E}=h3(y.user,y.ui.debugDate),R={id:p,message:S,type:N,timestamp:m};let U=y.badgesRegistry;return E&&(U=[...y.badgesRegistry,E],b.badges.includes(E.id)||(b.badges.push(E.id),b.badgeTiers[E.id]="gold",b.badgeHistory[E.id]||(b.badgeHistory[E.id]={}),b.badgeHistory[E.id].gold=new Date().toISOString())),{...y,user:b,badgesRegistry:U,ui:{...y.ui,toasts:[...y.ui.toasts,R],systemLogs:[R,...y.ui.systemLogs||[]].slice(0,100)}}})}else e(p=>({...p,user:{...p.user,lastOnline:r.toISOString()}}))};n();const i=setInterval(n,5e3);return()=>clearInterval(i)},[t.ui.debugDate,t.user.lastProcessedDate,t.user.preferences.dayStartHour,e])};var Cu;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(Cu||(Cu={}));var uh;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})(uh||(uh={}));const Ul=rd("Haptics",{web:()=>wS(()=>import("./web-P8GivvWj.js"),[]).then(t=>new t.HapticsWeb)});let Qb=null;const YK=()=>(Qb||(Qb=new(window.AudioContext||window.webkitAudioContext)),Qb),vr={C4:261.63,G4:392,C5:523.25,E5:659.25,G5:783.99,A5:880,C6:1046.5},mu={click:[5],success:[10,30,10],error:[50,20,50,20,50],levelUp:[50,50,50,50,100,50,200],crit:[10,10,10,50,50,100],delete:[30]},kn=(t,e,n,i,r,s=.1)=>{const a=t.createOscillator(),u=t.createGain();a.type=n,a.frequency.setValueAtTime(e,i),u.gain.setValueAtTime(0,i),u.gain.linearRampToValueAtTime(s,i+.01),u.gain.exponentialRampToValueAtTime(.001,i+r),a.connect(u),u.connect(t.destination),a.start(i),a.stop(i+r+.1)},Ae=async(t,e=!0)=>{if(e){if(qs.isNativePlatform())try{switch(t){case"click":await Ul.impact({style:Cu.Light});break;case"hover":break;case"success":await Ul.notification({type:uh.Success});break;case"level-up":await Ul.notification({type:uh.Success});break;case"crit":await Ul.impact({style:Cu.Heavy});break;case"error":await Ul.notification({type:uh.Error});break;case"delete":await Ul.impact({style:Cu.Medium});break;default:await Ul.impact({style:Cu.Light})}}catch{}else if(navigator.vibrate)switch(t){case"click":navigator.vibrate(mu.click);break;case"success":navigator.vibrate(mu.success);break;case"level-up":navigator.vibrate(mu.levelUp);break;case"crit":navigator.vibrate(mu.crit);break;case"error":navigator.vibrate(mu.error);break;case"delete":navigator.vibrate(mu.delete);break}}if(!e)return;const n=YK();n.state==="suspended"&&n.resume();const i=n.currentTime;switch(t){case"success":kn(n,vr.C5,"sine",i,.2,.1),kn(n,vr.E5,"sine",i+.05,.2,.1),kn(n,vr.G5,"sine",i+.1,.4,.08);break;case"coin":kn(n,1200,"square",i,.1,.05),kn(n,1800,"square",i+.05,.2,.05);break;case"level-up":kn(n,vr.C4,"triangle",i,.2,.15),kn(n,vr.G4,"triangle",i+.15,.2,.15),kn(n,vr.C5,"triangle",i+.3,.4,.15),kn(n,vr.E5,"triangle",i+.45,.6,.15),kn(n,vr.C5,"sine",i,.8,.05);break;case"crit":kn(n,vr.G5,"sine",i,.3,.2),kn(n,vr.C6,"sine",i+.05,.4,.2),kn(n,vr.E5,"square",i,.1,.05),kn(n,vr.A5,"triangle",i+.1,.5,.1);break;case"delete":const r=n.createOscillator(),s=n.createGain();r.frequency.setValueAtTime(200,i),r.frequency.exponentialRampToValueAtTime(50,i+.3),s.gain.setValueAtTime(.1,i),s.gain.linearRampToValueAtTime(0,i+.3),r.connect(s),s.connect(n.destination),r.start(i),r.stop(i+.3);break;case"click":kn(n,800,"sine",i,.05,.02);break;case"hover":kn(n,400,"sine",i,.02,.005);break;case"error":kn(n,150,"sawtooth",i,.3,.1),kn(n,140,"sawtooth",i+.05,.3,.1);break}},WK=(t,e)=>{C.useEffect(()=>{if(t.user.currentXP<t.user.targetXP)return;let n={...t.user},i=!1;const r=n.level;for(;n.currentXP>=n.targetXP;){i=!0;const s=n.currentXP-n.targetXP,a=n.level+1,u=Math.round(n.targetXP*1.15);n={...n,level:a,currentXP:s,targetXP:u}}if(i){const s=n;e(a=>({...a,user:s,ui:{...a.ui,activeModal:"levelUp",modalData:{newLevel:s.level,oldLevel:r}}})),Ae("level-up",t.user.preferences.soundEnabled)}},[t.user.currentXP,t.user.targetXP,e,t.user.preferences.soundEnabled])},XK=(t,e)=>{const n=t.user.preferences.soundEnabled,i=$=>e(Y=>({...Y,user:{...Y.user,...$}})),r=$=>{$!==t.ui.currentView&&(Ae("click",n),window.history.pushState({view:$},"",""),e(Y=>({...Y,ui:{...Y.ui,currentView:$}})))},s=$=>{Ae("click",n),e(Y=>({...Y,ui:{...Y.ui,habitsViewMode:$}}))},a=$=>{Ae("click",n),e(Y=>({...Y,ui:{...Y.ui,tasksViewMode:$}}))},u=($,Y)=>{$!=="none"&&Ae("click",n),e(W=>({...W,ui:{...W.ui,activeModal:$,modalData:Y??null}}))},f=$=>e(Y=>({...Y,ui:{...Y.ui,toasts:Y.ui.toasts.filter(W=>W.id!==$)}})),d=($,Y="info")=>{const W=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e(X=>({...X,ui:{...X.ui,toasts:[...X.ui.toasts,{id:W,message:$,type:Y,timestamp:new Date().toISOString()}],systemLogs:[{id:W,message:$,type:Y,timestamp:new Date().toISOString()},...X.ui.systemLogs||[]].slice(0,100)}})),setTimeout(()=>f(W),3e3)},p=($,Y,W="task")=>{Ae("click",n),e(X=>({...X,ui:{...X.ui,focusSession:{itemId:$,startTime:new Date().toISOString(),durationMinutes:Y,isActive:!0,itemType:W}}}))},m=()=>e($=>({...$,ui:{...$.ui,focusSession:null}})),y=()=>i({preferences:{...t.user.preferences,soundEnabled:!t.user.preferences.soundEnabled}}),b=async()=>{const $=await u3();return i({preferences:{...t.user.preferences,deviceNotificationsEnabled:$}}),d($?"Notifications Enabled":"Permission Denied",$?"success":"error"),$},S=$=>{if($==="deviceNotificationsEnabled"&&!t.user.preferences.deviceNotificationsEnabled){b();return}i({preferences:{...t.user.preferences,[$]:!t.user.preferences[$]}}),Ae("click",n)},N=$=>{i({preferences:{...t.user.preferences,dayStartHour:$}}),d(`Day Start set to ${$}:00`,"info")},E=()=>{localStorage.clear(),Ae("delete",n),window.location.reload()},R=($,Y,W)=>i({name:$,title:Y,hasOnboarded:!0,stats:{...t.user.stats,[W]:t.user.stats[W]+2}}),U=$=>{let Y=[...t.user.inventory];if($.type==="custom"||$.type==="redemption"||!$.isInfinite){const X=Y.indexOf($.id);X>-1&&Y.splice(X,1)}$.id==="item_potion_xp"?(i({currentXP:t.user.currentXP+500,inventory:Y}),Ae("level-up",n),d("Potion Consumed: +500 XP","success")):(i({inventory:Y}),d(`${$.title} Used`,"info"))},j=$=>{let Y=[...t.user.equippedItems];if(Y.includes($))Y=Y.filter(W=>W!==$),d("Artifact Unequipped","info");else{if(Y.length>=3){d("Max 3 Artifacts","error");return}Y.push($),d("Artifact Equipped","success")}i({equippedItems:Y}),Ae("click",n)},B=$=>{t.badgesRegistry.some(Y=>Y.id===$.id)||e(Y=>({...Y,badgesRegistry:[...Y.badgesRegistry,$]}))},O=$=>{t.user.badges.includes($)||(i({badges:[...t.user.badges,$]}),d("New Badge!","level-up"),Ae("level-up",n))},P=$=>{t.user.unlockedThemes.some(Y=>Y.id===$.id)||i({unlockedThemes:[...t.user.unlockedThemes,$]})},I=$=>{t.user.preferences.theme===$&&A(t.user.unlockedThemes[0].id),i({unlockedThemes:t.user.unlockedThemes.filter(Y=>Y.id!==$)}),d("Theme Deleted","info")},A=$=>{i({preferences:{...t.user.preferences,theme:$}}),Ae("click",n)};return{updateUser:i,setView:r,setHabitsViewMode:s,setTasksViewMode:a,setModal:u,useItem:U,addBadge:B,addTheme:P,deleteTheme:I,awardBadge:O,addToast:d,removeToast:f,resetSystem:E,toggleSound:y,togglePreference:S,setTheme:A,importData:$=>{try{const Y=JSON.parse($);if(!Y.user)throw new Error;e(Y),d("System Restored","success"),Ae("level-up",n)}catch{d("Import Failed","error")}},exportData:()=>JSON.stringify(t,null,2),triggerDailyReset:()=>{const{newUser:$,toastMessage:Y,toastType:W,newBadge:X}=h3(t.user,t.ui.debugDate);let oe=t.badgesRegistry;X&&(oe=[...t.badgesRegistry,X],$.badges.includes(X.id)||($.badges.push(X.id),$.badgeTiers[X.id]="gold",$.badgeHistory[X.id]||($.badgeHistory[X.id]={}),$.badgeHistory[X.id].gold=new Date().toISOString())),e(ve=>({...ve,user:$,badgesRegistry:oe})),d(Y,W),Ae("level-up",n)},setDebugDate:$=>e(Y=>({...Y,ui:{...Y.ui,debugDate:$}})),startFocusSession:p,endFocusSession:m,completeOnboarding:R,toggleEquip:j,enableNotifications:b,setCustomAudio:$=>{const Y=URL.createObjectURL($);e(W=>({...W,ui:{...W.ui,customAudio:{name:$.name,url:Y}}})),d(`Audio Loaded: ${$.name}`,"success")},setDayStartHour:N}},p3=C.createContext(void 0),JK=t=>{var r,s,a,u,f,d,p,m,y,b,S,N,E,R;const e=((r=t.user)==null?void 0:r.stats)||{},n={[ee.STR]:e.STR||1,[ee.INT]:e.INT||1,[ee.DIS]:e.DIS||1,[ee.HEA]:e.HEA||e.EMT||1,[ee.CRT]:e.CRT||1,[ee.SPR]:e.SPR||e.PCE||1,[ee.REL]:e.REL||e.CAM||1,[ee.FIN]:e.FIN||1};return{user:{...Yf.user,...t.user,metrics:{...Yf.user.metrics,...((s=t.user)==null?void 0:s.metrics)||{}},preferences:{...Yf.user.preferences,...((a=t.user)==null?void 0:a.preferences)||{}},stats:n,inventory:((u=t.user)==null?void 0:u.inventory)||[],equippedItems:((f=t.user)==null?void 0:f.equippedItems)||[],badges:((d=t.user)==null?void 0:d.badges)||[],featuredBadges:((p=t.user)==null?void 0:p.featuredBadges)||[],unlockedThemes:(m=t.user)!=null&&m.unlockedThemes?[...t.user.unlockedThemes,...U_.filter(U=>!t.user.unlockedThemes.some(j=>j.id===U.id))]:U_,lastOnline:((y=t.user)==null?void 0:y.lastOnline)||new Date().toISOString(),hasOnboarded:((b=t.user)==null?void 0:b.hasOnboarded)??((S=t.user)==null?void 0:S.name)!=="Shadow Walker"},badgesRegistry:t.badgesRegistry||[],ui:{...Yf.ui,...t.ui,currentView:((N=t.ui)==null?void 0:N.currentView)||"tasks",debugDate:((E=t.ui)==null?void 0:E.debugDate)||null,habitsViewMode:((R=t.ui)==null?void 0:R.habitsViewMode)||"list",modalQueue:[]}}},QK=({children:t})=>{const[e,n,i]=fd(pF,Yf,"lifeos_data",JK);CF(e,n),FK(e),KK(e,n),WK(e,n);const r=XK(e,n);return l.jsx(p3.Provider,{value:{state:e,isDataLoaded:!i,dispatch:r},children:t})},De=()=>{const t=C.useContext(p3);if(!t)throw new Error("useLifeOS must be used within a LifeOSProvider");return t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=t=>{const e=eY(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...u},f)=>C.createElement("svg",{ref:f,...tY,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:m3("lucide",r),...!s&&!nY(u)&&{"aria-hidden":"true"},...u},[...a.map(([d,p])=>C.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const n=C.forwardRef(({className:i,...r},s)=>C.createElement(iY,{ref:s,iconNode:e,className:m3(`lucide-${ZK(bI(t))}`,`lucide-${t}`,i),...r}));return n.displayName=bI(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qt=_e("activity",rY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Sh=_e("archive",sY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],g3=_e("arrow-left",oY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],il=_e("award",aY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],dc=_e("bell",lY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Sr=_e("book-open",cY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],dY=_e("box",uY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],_n=_e("brain",fY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],gT=_e("calendar-plus",hY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],er=_e("calendar",pY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],y3=_e("chart-column",mY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],_I=_e("chart-no-axes-column",gY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_t=_e("check",yY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Pi=_e("chevron-down",vY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],My=_e("chevron-left",xY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xi=_e("chevron-right",bY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zr=_e("chevron-up",_Y);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],SY=_e("circle-alert",wY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ws=_e("circle-check-big",TY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],NY=_e("circle-check",EY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],AY=_e("circle-x",CY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],IY=_e("circle",kY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jt=_e("clock",RY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],wI=_e("cloud-rain",jY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],MY=_e("code",PY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],v3=_e("coffee",DY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],ii=_e("coins",OY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nr=_e("copy",LY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Dy=_e("crown",zY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Sc=_e("crosshair",UY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Oy=_e("database",VY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Th=_e("download",FY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],ir=_e("dumbbell",HY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ly=_e("eye",BY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ep=_e("file-text",$Y);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],hi=_e("flame",qY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],x3=_e("flask-conical",GY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],yT=_e("folder-input",KY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],b3=_e("folder-plus",YY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],XY=_e("gamepad",WY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],_3=_e("gavel",JY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],w3=_e("gift",QY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],eW=_e("globe",ZY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],nW=_e("hash",tW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],kr=_e("heart",iW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],sW=_e("hexagon",rW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],aW=_e("history",oW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],cW=_e("info",lW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],dW=_e("landmark",uW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],hW=_e("layout-grid",fW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],mW=_e("layout-list",pW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],S3=_e("list-todo",gW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],vW=_e("list",yW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bW=_e("loader-circle",xW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hd=_e("lock",_W);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],SW=_e("log-in",wW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],T3=_e("log-out",TW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Eh=_e("maximize-2",EW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=[["path",{d:"M5 12h14",key:"1ays0h"}]],uw=_e("minus",NW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],vT=_e("moon",CW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AW=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],g0=_e("music",AW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],IW=_e("package",kW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],pi=_e("palette",RW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],PW=_e("pause",jW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Lg=_e("pen",MW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],xT=_e("pencil",DW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],LW=_e("pin",OW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],zy=_e("play",zW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wn=_e("plus",UW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],FW=_e("refresh-ccw",VW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],E3=_e("refresh-cw",HW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],$W=_e("repeat",BW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bT=_e("rotate-ccw",qW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],KW=_e("save",GW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Uy=_e("scale",YW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],XW=_e("scroll",WW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Tc=_e("scroll-text",JW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ZW=_e("settings-2",QW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tX=_e("settings",eX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],y0=_e("shield-alert",nX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v0=_e("shield-check",iX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],is=_e("shield",rX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],_T=_e("shopping-bag",sX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],N3=_e("shopping-cart",oX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],C3=_e("skull",aX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],SI=_e("snowflake",lX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],x0=_e("sparkles",cX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tr=_e("square-check-big",uX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],fX=_e("square-pen",dX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],pX=_e("square",hX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],b0=_e("star",mX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],A3=_e("sticky-note",gX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ir=_e("target",yX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],_i=_e("terminal",vX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],pd=_e("text-align-start",xX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],_X=_e("timer",bX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ei=_e("trash-2",wX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],k3=_e("trash",SX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Vy=_e("trending-up",TX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bo=_e("triangle-alert",EX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Fy=_e("trophy",NX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_0=_e("upload",CX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wT=_e("user",AX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rr=_e("users",kX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],RX=_e("utensils",IX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],PX=_e("volume-2",jX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],TI=_e("volume-x",MX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],EI=_e("waves",DX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],LX=_e("wheat",OX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dt=_e("x",zX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bt=_e("zap",UX),VX=()=>{const{state:t,dispatch:e}=De(),{currentView:n,habitsViewMode:i,tasksViewMode:r}=t.ui,{user:s}=t,a=s.preferences.showCampaignUI,[u,f]=C.useState(null);C.useEffect(()=>{const M=MS(Ya,H=>f(H));return()=>M()},[]);const[d,p]=C.useState("profile"),[m,y]=C.useState("raids"),b=()=>{if(n===d){let M="profile";d==="profile"?M="skills":d==="skills"?M="shop":M="profile",p(M),e.setView(M)}else e.setView(d)},S=()=>{if(!a){n!=="raids"&&e.setView("raids");return}if(n===m){let M="raids";m==="raids"?M="campaign":M="raids",y(M),e.setView(M)}else e.setView(m)},N=()=>{if(n==="tasks"){const M=r==="missions"?"codex":"missions";e.setTasksViewMode(M)}else e.setView("tasks")},E=()=>{let M="mission";n==="habits"?M="protocol":(n==="raids"||n==="campaign")&&(M="operation"),e.setModal("addTask",{defaultType:M})},R=()=>{if(n==="habits"){const M=i==="list"?"calendar":"list";e.setHabitsViewMode(M)}else e.setView("habits")},U=()=>{e.setModal("login")},j=M=>n===M,B=j("profile")||j("shop")||j("skills"),O=j("raids")||j("campaign"),P=j("tasks"),I=j("habits"),A=!a&&m==="campaign"?"raids":m;return l.jsxs("nav",{className:"h-24 pb-6 pt-2 bg-life-black/80 backdrop-blur-xl border-t border-zinc-800 flex items-center justify-around px-4 z-30 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] relative",children:[l.jsxs("button",{onClick:b,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative group ${B?"text-life-gold bg-life-gold/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${d==="profile"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(wT,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${d==="skills"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(Sr,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${d==="shop"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(_T,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:d}),B&&l.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-gold rounded-full"})]}),l.jsxs("button",{onClick:N,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${P?r==="codex"?"text-red-500 bg-red-950/20 scale-105":"text-life-easy bg-life-easy/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${r==="missions"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(Tr,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${r==="codex"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(Uy,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:r==="codex"?"Codex":"Missions"}),P&&l.jsx("div",{className:`absolute -bottom-1 w-1 h-1 rounded-full ${r==="codex"?"bg-red-500":"bg-life-easy"}`})]}),l.jsxs("div",{className:"relative -mt-12 group z-20",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-life-crimson/40 blur-[30px] rounded-full pointer-events-none group-hover:bg-life-crimson/60 transition-colors duration-500 animate-pulse-slow"}),l.jsx("button",{onClick:E,className:"relative w-16 h-16 bg-gradient-to-br from-life-crimson to-red-700 rounded-full shadow-[0_8px_30px_rgba(220,38,38,0.4)] flex items-center justify-center text-white hover:scale-110 active:scale-95 transition-all duration-300 border-4 border-life-black ring-2 ring-life-crimson/20",children:l.jsx(wn,{size:32,strokeWidth:3,className:"group-active:rotate-90 transition-transform duration-300 drop-shadow-md"})})]}),l.jsxs("button",{onClick:R,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${I?"text-life-normal bg-life-normal/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${i==="list"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(Ir,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${i==="calendar"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(er,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:i==="calendar"?"Planner":"Habits"}),I&&l.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-normal rounded-full"})]}),l.jsxs("button",{onClick:S,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${O?"text-life-hard bg-life-hard/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${A==="raids"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(bt,{size:24})}),a&&l.jsx("div",{className:`transition-all duration-300 transform ${A==="campaign"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(mW,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:A}),O&&l.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-hard rounded-full"})]}),!u&&l.jsx("button",{onClick:U,className:"absolute top-[-40px] right-4 bg-life-black/80 backdrop-blur border border-life-gold/30 text-life-gold p-2 rounded-full shadow-lg animate-bounce",title:"Secure Link",children:l.jsx(SW,{size:16})})]})},dw=t=>Math.floor(100*Math.pow(t,1.5)),I3=t=>t>=100?"Grandmaster":t>=50?"Master":t>=25?"Expert":t>=10?"Adept":"Novice",FX=t=>{const e=new Date(t),i=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(i/(1e3*60*60*24))>30},HX=[{id:"sk_01",title:"Coding",description:"Building the matrix.",relatedStats:[ee.INT],level:1,currentXP:0,targetXP:100,rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()},{id:"sk_02",title:"",description:"     .",relatedStats:[ee.REL,ee.INT,ee.HEA],level:1,currentXP:0,targetXP:100,rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()}],R3=C.createContext(void 0),BX=t=>({...t,targetXP:t.targetXP||dw(t.level||1),rank:t.rank||I3(t.level||1),isRusty:t.isRusty??!1,lastPracticed:t.lastPracticed||new Date().toISOString()}),$X=t=>({skills:(Array.isArray(t)?t:t.skills||[]).map(BX)}),qX=({children:t})=>{const{state:e,dispatch:n}=De(),i=e.user.preferences.soundEnabled,[r,s]=fd("LIFE_OS_SKILLS_DATA",{skills:HX},"skills_data",$X),{skills:a}=r,[u,f]=C.useState(null);C.useEffect(()=>{(()=>{s(E=>({...E,skills:E.skills.map(R=>({...R,isRusty:FX(R.lastPracticed)}))}))})()},[]);const d=N=>{N&&Ae("click",i),f(N)},p=(N,E,R="")=>{const U={id:`sk_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:N,description:R,relatedStats:E,level:1,currentXP:0,targetXP:dw(1),rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()};Ae("click",i),s(j=>({...j,skills:[...j.skills,U]})),n.addToast(`Skill Acquired: ${N}`,"success")},m=(N,E)=>{Ae("click",i),s(R=>({...R,skills:R.skills.map(U=>U.id===N?{...U,...E}:U)})),n.addToast("Skill Updated","success")},y=(N,E)=>{s(R=>({...R,skills:R.skills.map(U=>{if(U.id!==N)return U;const j=U.isRusty;let B=U.currentXP+E,O=U.level,P=U.targetXP,I=!1;for(;B>=P;)B-=P,O++,P=dw(O),I=!0;const A=I3(O);return I&&(Ae("level-up",i),n.addToast(`${U.title} reached Level ${O}!`,"level-up")),j&&n.addToast(`${U.title} is no longer Rusty!`,"success"),{...U,level:O,currentXP:B,targetXP:P,rank:A,lastPracticed:new Date().toISOString(),isRusty:!1}})}))},b=N=>{Ae("delete",i),s(E=>({...E,skills:E.skills.filter(R=>R.id!==N)})),u===N&&f(null),n.addToast("Skill Deleted","info")},S=N=>{s({skills:N}),n.addToast("Skills Restored","success")};return l.jsx(R3.Provider,{value:{skillState:{skills:a,activeSkillId:u},skillDispatch:{addSkill:p,updateSkill:m,addSkillXP:y,deleteSkill:b,setActiveSkill:d,restoreData:S}},children:t})},Sn=()=>{const t=C.useContext(R3);if(t===void 0)throw new Error("useSkills must be used within a SkillProvider");return t},GX=()=>{const{state:t,dispatch:e}=De(),{user:n}=t,{skillState:i}=Sn(),r=(i==null?void 0:i.skills)||[];let s=n.title;const a=n.preferences.useSkillAsTitle&&n.preferences.linkedSkillId?r.find(B=>B.id===n.preferences.linkedSkillId):null;a?s=`${a.rank} ${a.title}`:s=n.title;const u=Math.min(100,n.currentXP/n.targetXP*100),f=Math.min(100,n.dailyXP/n.dailyTarget*100),d=f>=100,p=18,m=3,y=p-m*2,b=y*2*Math.PI,S=b-f/100*b,[N,E]=C.useState(0);C.useEffect(()=>{if(N>0){const B=setTimeout(()=>E(0),1e3);return()=>clearTimeout(B)}},[N]);const R=()=>{E(B=>{const O=B+1;return O>=5?(Ae("level-up",!0),e.setModal("devConsole"),0):O}),t.ui.currentView!=="profile"&&e.setView("profile")},U=()=>{Ae("click",!0),e.setModal("honorBreakdown")},j=async()=>{try{await ZB(Ya)}catch(B){console.error("Logout Error:",B)}};return l.jsxs("header",{className:"h-16 px-4 border-b border-zinc-800 flex items-center justify-between bg-life-black/60 backdrop-blur-xl z-20 shadow-lg transition-all duration-300 select-none sticky top-0",children:[l.jsxs("div",{onClick:R,className:"flex items-center gap-3 cursor-pointer active:opacity-80 transition-opacity",children:[l.jsxs("div",{className:"w-10 h-10 rounded-full bg-life-muted/20 border border-life-silver flex items-center justify-center relative overflow-hidden ring-1 ring-life-muted/50 group",children:[a&&a.icon?l.jsx("span",{className:"text-xl",children:a.icon}):l.jsx(wT,{size:20,className:"text-life-silver group-hover:scale-110 transition-transform"}),l.jsxs("div",{className:"absolute bottom-0 right-0 bg-life-gold text-life-black text-[9px] font-black px-1.5 py-0.5 rounded-tl-md shadow-sm z-10",children:["L",n.level]}),N>0&&l.jsx("div",{className:"absolute inset-0 bg-life-crimson/20 animate-pulse"})]}),l.jsxs("div",{className:"flex flex-col justify-center",children:[l.jsx("h1",{className:"text-sm font-bold leading-none tracking-wide text-life-text/90 mb-1.5 truncate max-w-[150px] sm:max-w-none",children:s.toUpperCase()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-mono text-[9px] text-life-gold/80",children:[n.currentXP,"/",n.targetXP," XP"]}),l.jsx("div",{className:"w-20 h-1.5 bg-gray-800 rounded-full overflow-hidden border border-gray-700/50",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-life-gold to-yellow-200 transition-all duration-700 ease-out shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${u}%`}})})]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>e.setModal("devConsole"),className:"p-2 rounded-full text-life-muted hover:text-life-gold hover:bg-life-gold/10 transition-all active:scale-95",title:"System Settings",children:l.jsx(tX,{size:20})}),l.jsx("button",{onClick:j,className:"p-2 rounded-full text-life-muted hover:text-life-hard hover:bg-life-hard/10 transition-all active:scale-95",title:"System Logout",children:l.jsx(T3,{size:20})}),l.jsxs("div",{className:"hidden sm:flex flex-col items-end gap-0.5 mr-1",children:[l.jsxs("div",{className:"flex items-center text-life-gold font-mono text-xs",children:[l.jsx("span",{className:"mr-1.5 text-xs",children:""})," ",n.gold]}),l.jsxs("div",{onClick:U,className:"flex items-center text-indigo-400 font-mono text-xs cursor-pointer hover:text-indigo-300 hover:scale-105 transition-all",children:[l.jsx(il,{size:10,className:"mr-1 fill-current opacity-80"})," ",n.honor,"%"]})]}),l.jsxs("div",{className:"sm:hidden flex items-center gap-2 mr-1",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center w-8 h-8 rounded bg-life-gold/10 border border-life-gold/20",children:[l.jsx("span",{className:"text-[8px]",children:""}),l.jsx("span",{className:"text-[9px] font-bold text-life-gold",children:n.gold})]}),l.jsxs("div",{onClick:U,className:"flex flex-col items-center justify-center w-8 h-8 rounded bg-indigo-500/10 border border-indigo-500/20 cursor-pointer active:scale-95 transition-transform",children:[l.jsx(il,{size:8,className:"text-indigo-400 mb-0.5"}),l.jsxs("span",{className:"text-[9px] font-bold text-indigo-400",children:[n.honor,"%"]})]})]}),l.jsxs("div",{onClick:()=>e.setModal("streak"),className:"relative w-12 h-12 flex items-center justify-center group cursor-pointer hover:scale-105 transition-transform",children:[l.jsxs("svg",{height:p*2,width:p*2,className:"transform -rotate-90 absolute z-0",children:[l.jsx("circle",{stroke:"#333",strokeWidth:m,fill:"transparent",r:y,cx:p,cy:p,opacity:.3}),l.jsx("circle",{stroke:d?"#10b981":"#fbbf24",strokeWidth:m,strokeDasharray:b+" "+b,style:{strokeDashoffset:S,transition:"stroke-dashoffset 0.5s ease-in-out"},strokeLinecap:"round",fill:"transparent",r:y,cx:p,cy:p,className:d?"drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]":""})]}),l.jsxs("div",{className:`
                w-8 h-8 rounded-full flex flex-col items-center justify-center z-10 transition-colors
                ${d?"bg-life-easy/10":"bg-life-black"}
             `,children:[l.jsx(hi,{size:12,className:`
                    absolute -top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity 
                    ${d?"text-life-easy fill-life-easy/50":"text-life-crimson fill-life-crimson/50"}
                `}),l.jsx("span",{className:"text-[6px] text-life-muted uppercase leading-none mt-0.5 tracking-tighter",children:"Day"}),l.jsx("span",{className:`text-sm font-black leading-none ${d?"text-life-easy":"text-life-crimson"}`,children:n.streak})]})]})]})]})},j3=t=>{const e=/\[?w(\d{1,2})d(\d)\]?/i,n=t.match(e);if(n){const i=parseInt(n[1],10),r=parseInt(n[2],10);return{cleanedTitle:t.replace(e,"").replace(/\s+/," ").trim(),timeCode:{week:i,day:r}}}return{cleanedTitle:t,timeCode:null}},KX=t=>{const e=/\b(\d{10})\b/,n=t.match(e);if(n){const i=n[1],r=parseInt(i.substring(0,2),10),s=parseInt(i.substring(2,4),10)-1,a=parseInt(i.substring(4,6),10),u=parseInt(i.substring(6,8),10),f=parseInt(i.substring(8,10),10),d=2e3+r,p=new Date(d,s,a,u,f);if(!isNaN(p.getTime()))return{cleanedTitle:t.replace(e,"").replace(/\s+/," ").trim(),dateIso:p.toISOString()}}return{cleanedTitle:t,dateIso:null}},YX=(t,e,n)=>{const i=new Date(t),r=(e-1)*7+(n-1),s=new Date(i);return s.setDate(s.getDate()+r),s.toISOString()},WX=(t,e)=>{if(!t||!e)return null;const n=new Date(t),i=new Date(e);n.setHours(0,0,0,0),i.setHours(0,0,0,0);const r=i.getTime()-n.getTime(),s=Math.floor(r/(1e3*60*60*24));if(s<0)return null;const a=Math.floor(s/7)+1,u=s%7+1;return`W${a}D${u}`},XX=()=>{try{const t=localStorage.getItem("LIFE_OS_CAMPAIGN_DATA_V2");if(t){const e=JSON.parse(t);if(e.isActive&&e.startDate)return e}}catch{return null}return null},Ju=(t,e,n,i,r)=>{const s=fF[t];let a=1,u=1;return e===Mn.HARD?(a+=.2,u+=.5):e===Mn.EASY&&(a-=.2),{xp:Math.floor(s.xp*a),gold:Math.floor(s.gold*u)}},JX=[{id:"t_01",title:"Initialize LifeOS Protocol",description:"System calibration complete.",difficulty:Ge.HARD,stat:ee.INT,isCompleted:!1,isTimed:!1,deadline:"2024-12-31",subtasks:[{id:"st_1",title:"Check Audio Systems",isCompleted:!0},{id:"st_2",title:"Verify Data Persistence",isCompleted:!1}]}],P3=[{id:"cat_work",title:" Work Operations",isCollapsed:!1},{id:"cat_personal",title:" Personal Logs",isCollapsed:!1}],M3=C.createContext(void 0),QX=t=>{let e=t.reminders||[];return!t.reminders&&t.reminderMinutes&&t.reminderMinutes>0&&(e=[{id:`mig_${Date.now()}_${Math.random()}`,minutesBefore:t.reminderMinutes,isSent:!!t.isReminderSent}]),{difficulty:Ge.NORMAL,stat:ee.STR,subtasks:[],isTimed:!1,isArchived:!1,isCompleted:!1,isCampaign:!1,reminders:e,...t}},ZX=t=>({tasks:(t.tasks||[]).map(QX),categories:t.categories||P3,laws:t.laws||[]}),eJ=({children:t})=>{const{state:e,dispatch:n}=De(),{skillDispatch:i,skillState:r}=Sn(),s=e.user.preferences.soundEnabled,[a,u]=fd("LIFE_OS_TASKS_COMBINED",{tasks:JX,categories:P3,laws:[]},"tasks_data",ZX),{tasks:f,categories:d,laws:p}=a,m=D=>{let{cleanedTitle:z,timeCode:$}=j3(D.title);const Y=KX(z);let W=D.deadline,X=D.scheduledTime,oe=D.isCampaign||!1,ve=D.isCalendarEvent||!1;if($){oe=!0;const K=XX();K?(W=YX(K.startDate,$.week,$.day),n.addToast(`G12: Scheduled for W${$.week} D${$.day}`,"info")):n.addToast(`No active G12 campaign found for [W${$.week}D${$.day}]`,"error")}Y.dateIso&&(z=Y.cleanedTitle,X=Y.dateIso,W=Y.dateIso,ve=!0,n.addToast("C30: Scheduled via Code","info"));const Ee={...D,title:z,deadline:W,scheduledTime:X,isCampaign:oe,isCalendarEvent:ve,id:`t_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isCompleted:!1,isArchived:!1};Ae("click",s),u(K=>({...K,tasks:[Ee,...K.tasks]})),n.setModal("none")},y=(D,z)=>{u($=>({...$,tasks:$.tasks.map(Y=>Y.id===D?{...Y,...z}:Y)})),Ae("click",s)},b=D=>{var W;const z=f.find(X=>X.id===D);if(!z)return;const $=!z.isCompleted;let Y=null;if($){let X=Ju(z.difficulty,e.user.currentMode);z.isCampaign&&(X.xp=Math.ceil(X.xp*1.1));const oe=Math.random(),ve=z.difficulty===Ge.HARD&&oe>.85||z.difficulty===Ge.NORMAL&&oe>.9;let Ee=null;ve?(X.xp*=2,X.gold*=2,Y="crit",Ee={title:z.title,xp:X.xp,gold:X.gold,multiplier:2,message:"Luck favors the bold."}):Y="success";const K=e.user.metrics,te={...K,totalTasksCompleted:K.totalTasksCompleted+1,tasksByDifficulty:{...K.tasksByDifficulty,[z.difficulty]:(K.tasksByDifficulty[z.difficulty]||0)+1},totalGoldEarned:K.totalGoldEarned+X.gold,totalXPEarned:K.totalXPEarned+X.xp},ge=z.difficulty===Ge.HARD?2:z.difficulty===Ge.NORMAL?1:.5,Z=r.skills.find(re=>re.id===z.skillId),he=(W=Z==null?void 0:Z.relatedStats)!=null&&W.length?Z.relatedStats:[z.stat],Ne=ge/he.length,pe={...e.user.stats};he.forEach(re=>{pe[re]=(pe[re]||0)+Ne}),n.updateUser({currentXP:e.user.currentXP+X.xp,dailyXP:e.user.dailyXP+X.xp,gold:e.user.gold+X.gold,stats:pe,metrics:te});let ue=`+${X.xp} XP  +${X.gold} G`;if(z.skillId){const re=Math.ceil(X.xp*.5);i.addSkillXP(z.skillId,re);const Re=r.skills.find($e=>$e.id===z.skillId);Re&&(ue+=`  +${re} ${Re.title}`)}Ee?setTimeout(()=>n.setModal("loot",Ee),200):n.addToast(`Mission Complete: ${z.title} | ${ue}`,"success")}else{const X=Ju(z.difficulty,e.user.currentMode);z.isCampaign&&(X.xp=Math.ceil(X.xp*1.1));const oe=e.user.metrics,ve={...oe,totalTasksCompleted:Math.max(0,oe.totalTasksCompleted-1),tasksByDifficulty:{...oe.tasksByDifficulty,[z.difficulty]:Math.max(0,(oe.tasksByDifficulty[z.difficulty]||0)-1)},totalGoldEarned:Math.max(0,oe.totalGoldEarned-X.gold),totalXPEarned:Math.max(0,oe.totalXPEarned-X.xp)},Ee=z.difficulty===Ge.HARD?2:z.difficulty===Ge.NORMAL?1:.5;n.updateUser({currentXP:Math.max(0,e.user.currentXP-X.xp),dailyXP:Math.max(0,e.user.dailyXP-X.xp),gold:Math.max(0,e.user.gold-X.gold),stats:{...e.user.stats,[z.stat]:Math.max(0,e.user.stats[z.stat]-Ee)},metrics:ve})}Y&&s&&Ae(Y,s),u(X=>({...X,tasks:X.tasks.map(oe=>oe.id===D?{...oe,isCompleted:$}:oe)}))},S=(D,z)=>{u($=>({...$,tasks:$.tasks.map(Y=>{if(Y.id!==D)return Y;const W=Y.subtasks.map(X=>X.id===z?{...X,isCompleted:!X.isCompleted}:X);return{...Y,subtasks:W}})})),Ae("click",s)},N=D=>{const z=f.find($=>$.id===D);if(z){if(!z.isCompleted&&!z.isArchived){const $=hF[z.difficulty],Y=f3(z.difficulty),W=e.ui.debugDate?new Date(e.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],X=e.user.honorDailyLog[W]!==void 0?e.user.honorDailyLog[W]:100,oe=Math.max(0,X-Y),ve={...e.user.honorDailyLog,[W]:oe},Ee=wh(ve,e.ui.debugDate);n.updateUser({currentXP:Math.max(0,e.user.currentXP-$.xp),gold:Math.max(0,e.user.gold-$.gold),stats:{...e.user.stats,[z.stat]:Math.max(0,e.user.stats[z.stat]-$.stat)},honorDailyLog:ve,honor:Ee}),n.addToast(`Mission Failed: -${Y}% Honor | -${$.xp} XP`,"error"),Ae("error",s)}else Ae("delete",s);u($=>({...$,tasks:$.tasks.filter(Y=>Y.id!==D)}))}},E=D=>{const z={id:`cat_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:D,isCollapsed:!1};u($=>({...$,categories:[...$.categories,z]})),Ae("click",s)},R=D=>{u(z=>({...z,categories:z.categories.filter($=>$.id!==D),tasks:z.tasks.map($=>$.categoryId===D?{...$,categoryId:void 0}:$)})),Ae("delete",s)},U=(D,z)=>{u($=>({...$,categories:$.categories.map(Y=>Y.id===D?{...Y,title:z}:Y)}))},j=D=>{u(z=>({...z,categories:z.categories.map($=>$.id===D?{...$,isCollapsed:!$.isCollapsed}:$)}))},B=(D,z)=>{u($=>({...$,tasks:$.tasks.map(Y=>Y.id===D?{...Y,categoryId:z}:Y)})),Ae("click",s)},O=D=>{u(z=>({...z,tasks:z.tasks.map($=>$.id===D?{...$,isArchived:!0}:$)})),n.addToast("Mission moved to Backlog","info"),Ae("click",s)},P=D=>{u(z=>({...z,tasks:z.tasks.map($=>$.id===D?{...$,isArchived:!1}:$)})),n.addToast("Mission Restored","success"),Ae("click",s)},I=(D,z,$,Y)=>{const W={id:`law_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:D,penaltyType:z,penaltyValue:$,statTarget:Y,timesBroken:0};u(X=>({...X,laws:[...X.laws,W]})),Ae("click",s),n.addToast("New Law Enacted","info")},A=(D,z)=>{u($=>({...$,laws:$.laws.map(Y=>Y.id===D?{...Y,...z}:Y)})),Ae("click",s)},M=D=>{u(z=>({...z,laws:z.laws.filter($=>$.id!==D)})),Ae("delete",s)},H=D=>{const z=p.find($=>$.id===D);if(z){if(z.penaltyType==="gold")n.updateUser({gold:e.user.gold-z.penaltyValue}),n.addToast(`Law Broken: ${z.title} | -${z.penaltyValue} Gold`,"error");else if(z.penaltyType==="xp")n.updateUser({currentXP:e.user.currentXP-z.penaltyValue}),n.addToast(`Law Broken: ${z.title} | -${z.penaltyValue} XP`,"error");else if(z.penaltyType==="stat"&&z.statTarget)n.updateUser({stats:{...e.user.stats,[z.statTarget]:e.user.stats[z.statTarget]-z.penaltyValue}}),n.addToast(`Law Broken: ${z.title} | -${z.penaltyValue} ${z.statTarget}`,"error");else if(z.penaltyType==="honor"){const $=e.ui.debugDate?new Date(e.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],Y=e.user.honorDailyLog[$]!==void 0?e.user.honorDailyLog[$]:100,W=Math.max(0,Y-z.penaltyValue),X={...e.user.honorDailyLog,[$]:W},oe=wh(X,e.ui.debugDate);n.updateUser({honorDailyLog:X,honor:oe}),n.addToast(`Law Broken: ${z.title} | -${z.penaltyValue} Honor`,"error")}u($=>({...$,laws:$.laws.map(Y=>Y.id===D?{...Y,timesBroken:Y.timesBroken+1}:Y)})),Ae("error",s)}},F=(D,z,$)=>{u({tasks:D,categories:z,laws:$}),n.addToast("Tasks & Laws Restored","success")};return l.jsx(M3.Provider,{value:{taskState:a,taskDispatch:{addTask:m,updateTask:y,toggleTask:b,deleteTask:N,addCategory:E,deleteCategory:R,renameCategory:U,toggleCategory:j,moveTask:B,archiveTask:O,restoreTask:P,toggleSubtask:S,addLaw:I,deleteLaw:M,enforceLaw:H,updateLaw:A,restoreData:F}},children:t})},Oi=()=>{const t=C.useContext(M3);if(t===void 0)throw new Error("useTasks must be used within a TaskProvider");return t},tJ=[{id:"h_1771593541489_o581bvlg5",title:"Clean room ",description:"",difficulty:Ge.NORMAL,stat:ee.DIS,type:"specific_days",specificDays:[1,4,5,6],isTimed:!1,reminders:[],subtasks:[],dailyTarget:1,streak:0,status:"pending",history:[],checkpoint:0,bestStreak:0,createdAt:"2026-02-20T13:19:01.489Z",dailyProgress:0}],D3=[{id:"cat_morning",title:" Morning Protocol",isCollapsed:!1},{id:"cat_health",title:" Health & Body",isCollapsed:!1},{id:"cat_night",title:" Night Routine",isCollapsed:!1}],O3=C.createContext(void 0),nJ=t=>{let e=t.reminders||[];return!t.reminders&&t.reminderMinutes&&t.reminderMinutes>0&&(e=[{id:`mig_${Date.now()}_${Math.random()}`,minutesBefore:t.reminderMinutes,isSent:!!t.isReminderSent}]),{difficulty:Ge.NORMAL,stat:ee.DIS,type:"daily",history:[],streak:0,checkpoint:0,bestStreak:0,status:"pending",isTimed:!1,durationMinutes:0,reminders:e,subtasks:[],dailyTarget:t.dailyTarget||1,dailyProgress:t.dailyProgress||0,...t}},iJ=t=>({habits:(t.habits||[]).map(nJ),categories:t.categories||D3}),rJ=({children:t})=>{const{state:e,dispatch:n}=De(),{skillDispatch:i,skillState:r}=Sn(),s=e.user.preferences.soundEnabled,[a,u]=fd("LIFE_OS_HABITS_COMBINED",{habits:tJ,categories:D3},"habits_data",iJ),{habits:f,categories:d}=a,[p,m]=C.useState(null);C.useEffect(()=>{const A=()=>{const H=new Date,F=new Date(e.user.lastOnline),D=e.user.preferences.dayStartHour??4,z=X=>{const oe=new Date(X);return oe.setHours(X.getHours()-D),oe},$=z(H),Y=z(F);if($.getDate()!==Y.getDate()||$.getMonth()!==Y.getMonth()){const X=new Date(H);X.setDate(X.getDate()-1);const oe=X.toISOString();let ve=e.user.shields,Ee=0,K={},te=0,ge=0;const Z=f.map(he=>{const Ne=he.reminders?he.reminders.map(Re=>({...Re,isSent:!1})):[],pe=he.subtasks?he.subtasks.map(Re=>({...Re,isCompleted:!1})):[],ue={reminders:Ne,subtasks:pe,dailyProgress:0};if(he.status==="completed")return{...he,...ue,status:"pending",shieldUsed:!1,history:[...he.history,oe]};if(he.status==="failed")return{...he,...ue,status:"pending",shieldUsed:!1};if(Xu(he,oe)&&he.status==="pending"){if((he.dailyProgress||0)>0)return ge++,{...he,...ue,status:"pending",shieldUsed:!1};if(ve>0)return ve--,Ee++,n.addToast(` Shield protected: ${he.title}`,"info"),{...he,...ue,status:"pending",shieldUsed:!0};const Re=m0(he.streak);return K[he.stat]=(K[he.stat]||0)+1,te+=1,n.addToast(` Missed ${he.title}: -1 ${he.stat} & -1 DIS`,"error"),{...he,...ue,streak:Re,status:"pending",shieldUsed:!1}}return{...he,...ue,status:"pending",shieldUsed:!1}});if(u(he=>({...he,habits:Z})),Ee>0&&(n.updateUser({shields:ve}),Ae("success",s)),ge>0&&n.addToast(`${ge} habits partially completed (Rest Day recorded)`,"info"),te>0){Ae("error",s);const he={...e.user.stats};Object.entries(K).forEach(([Ne,pe])=>{const ue=Ne;he[ue]=Math.max(0,he[ue]-pe)}),he[ee.DIS]=Math.max(0,he[ee.DIS]-te),n.updateUser({stats:he})}}};A();const M=setInterval(A,6e4);return()=>clearInterval(M)},[e.user.lastOnline,f,e.user.preferences.dayStartHour]);const y=A=>{A&&Ae("click",s),m(A)},b=A=>{const M={id:`h_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...A,streak:0,status:"pending",history:[],checkpoint:0,bestStreak:0,createdAt:new Date().toISOString(),dailyProgress:0};Ae("click",s),u(H=>({...H,habits:[...H.habits,M]})),n.setModal("none")},S=(A,M)=>{u(H=>({...H,habits:H.habits.map(F=>F.id===A?{...F,...M}:F)})),Ae("click",s)},N=(A,M)=>{u(H=>({...H,habits:H.habits.map(F=>{if(F.id!==A)return F;const D=F.subtasks.map(z=>z.id===M?{...z,isCompleted:!z.isCompleted}:z);return{...F,subtasks:D}})})),Ae("click",s)},E=(A,M)=>{var $;const H=f.find(Y=>Y.id===A);if(!H)return;if(M==="completed"&&H.dailyTarget&&H.dailyTarget>1){const W=(H.dailyProgress||0)+1;if(W<H.dailyTarget){u(X=>({...X,habits:X.habits.map(oe=>oe.id===A?{...oe,dailyProgress:W}:oe)})),Ae("click",s),n.addToast(`${H.title}: Rep ${W}/${H.dailyTarget}`,"info");return}}let F=H.streak,D=H.history,z="success";if(M==="completed"){F+=1;const Y=new Date().toISOString().split("T")[0];D.some(ge=>ge.startsWith(Y))||(D=[...D,new Date().toISOString()]);let W=Ju(H.difficulty,e.user.currentMode);Math.random()>.95?(W.xp*=2,W.gold*=2,z="crit",n.setModal("loot",{title:H.title,xp:W.xp,gold:W.gold,multiplier:2,message:"Consistency is Power."})):n.addToast(`${H.title} Complete | +${W.xp} XP`,"success");const oe=H.difficulty===Ge.HARD?2:H.difficulty===Ge.NORMAL?1:.5,ve=r.skills.find(ge=>ge.id===H.skillId),Ee=($=ve==null?void 0:ve.relatedStats)!=null&&$.length?ve.relatedStats:[H.stat],K=oe/Ee.length,te={...e.user.stats};if(Ee.forEach(ge=>{te[ge]=(te[ge]||0)+K}),n.updateUser({currentXP:e.user.currentXP+W.xp,dailyXP:e.user.dailyXP+W.xp,gold:e.user.gold+W.gold,stats:te,metrics:{...e.user.metrics,habitsFixed:e.user.metrics.habitsFixed+1}}),H.skillId){const ge=Math.ceil(W.xp*.5);i.addSkillXP(H.skillId,ge)}}else if(M==="failed"){F=m0(H.streak),z="error";const Y=f3(H.difficulty),W=e.ui.debugDate?new Date(e.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],X=e.user.honorDailyLog[W]!==void 0?e.user.honorDailyLog[W]:100,oe=Math.max(0,X-Y),ve={...e.user.honorDailyLog,[W]:oe},Ee=wh(ve,e.ui.debugDate);n.updateUser({honorDailyLog:ve,honor:Ee}),n.addToast(`${H.title} Failed | Streak Reset & -${Y}% Honor`,"error")}u(Y=>({...Y,habits:Y.habits.map(W=>W.id===A?{...W,status:M,streak:F,history:D,bestStreak:Math.max(W.bestStreak,F),dailyProgress:M==="completed"?W.dailyTarget:W.dailyProgress}:W)})),Ae(z,s)},R=A=>{u(M=>({...M,habits:M.habits.filter(H=>H.id!==A)})),Ae("delete",s),n.addToast("Protocol Deleted","info"),p===A&&m(null)},U=A=>{const M={id:`cat_h_${Date.now()}`,title:A,isCollapsed:!1};u(H=>({...H,categories:[...H.categories,M]})),Ae("click",s)},j=A=>{u(M=>({...M,categories:M.categories.filter(H=>H.id!==A),habits:M.habits.map(H=>H.categoryId===A?{...H,categoryId:void 0}:H)})),Ae("delete",s)},B=(A,M)=>{u(H=>({...H,categories:H.categories.map(F=>F.id===A?{...F,title:M}:F)}))},O=A=>{u(M=>({...M,categories:M.categories.map(H=>H.id===A?{...H,isCollapsed:!H.isCollapsed}:H)}))},P=(A,M)=>{u(H=>({...H,habits:H.habits.map(F=>F.id===A?{...F,categoryId:M}:F)})),Ae("click",s)},I=(A,M)=>{u({habits:A,categories:M}),n.addToast("Habits Restored","success")};return l.jsx(O3.Provider,{value:{habitState:{habits:f,categories:d,activeHabitId:p},habitDispatch:{addHabit:b,updateHabit:S,processHabit:E,deleteHabit:R,setActiveHabit:y,addCategory:U,deleteCategory:j,renameCategory:B,toggleCategory:O,moveHabit:P,toggleSubtask:N,restoreData:I}},children:t})},Li=()=>{const t=C.useContext(O3);if(t===void 0)throw new Error("useHabits must be used within a HabitProvider");return t},sJ=(t,e)=>{const[n,i]=C.useState(e*60),[r,s]=C.useState(!1);return C.useEffect(()=>{t&&(i(e*60),s(!1))},[t,e]),C.useEffect(()=>{let a;return!r&&n>0&&t?a=window.setInterval(()=>{i(u=>u-1)},1e3):n===0&&!r&&t&&(Ae("level-up",!0),s(!0)),()=>clearInterval(a)},[r,n,t]),{timeLeft:n,isPaused:r,setIsPaused:s,setTimeLeft:i}},oJ=(t,e)=>{const{state:n,dispatch:i}=De(),r=C.useRef(null),s=C.useRef(null),a=C.useRef(null),u=C.useRef(null),f=()=>{if(s.current){try{s.current.stop(),s.current.disconnect()}catch{}s.current=null}if(a.current){try{a.current.disconnect()}catch{}a.current=null}if(r.current&&r.current.state!=="closed"){try{r.current.close()}catch{}r.current=null}u.current&&(u.current.pause(),u.current.src="",u.current=null)};return C.useEffect(()=>()=>f(),[]),C.useEffect(()=>{var d;if(f(),!(t==="none"||!e)){if(t==="custom"){if((d=n.ui.customAudio)!=null&&d.url){const p=new Audio(n.ui.customAudio.url);p.loop=!0,p.volume=.5,p.play().catch(m=>console.error("Playback failed",m)),u.current=p}else i.addToast("No Custom Track Loaded","error");return}try{r.current=new(window.AudioContext||window.webkitAudioContext);const p=r.current;a.current=p.createGain(),a.current.connect(p.destination);let m=null;if(t==="brown"){const y=2*p.sampleRate;m=p.createBuffer(1,y,p.sampleRate);const b=m.getChannelData(0);let S=0;for(let N=0;N<y;N++){const E=Math.random()*2-1;b[N]=(S+.02*E)/1.02,S=b[N],b[N]*=3.5}a.current.gain.value=.15}else if(t==="rain"){const y=2*p.sampleRate;m=p.createBuffer(1,y,p.sampleRate);const b=m.getChannelData(0);let S=0,N=0,E=0,R=0,U=0,j=0,B=0;for(let O=0;O<y;O++){const P=Math.random()*2-1;S=.99886*S+P*.0555179,N=.99332*N+P*.0750759,E=.969*E+P*.153852,R=.8665*R+P*.3104856,U=.55*U+P*.5329522,j=-.7616*j-P*.016898,b[O]=(S+N+E+R+U+j+B+P*.5362)*.11,B=P*.115926}a.current.gain.value=.2}else if(t==="clock"){const y=p.sampleRate;m=p.createBuffer(1,y,p.sampleRate);const b=m.getChannelData(0);for(let S=0;S<y;S++){const N=S/p.sampleRate;if(N<.15){const E=(Math.random()*2-1)*Math.exp(-N*80),R=Math.sin(2*Math.PI*2800*N)*Math.exp(-N*100),U=Math.sin(2*Math.PI*180*N)*Math.exp(-N*60);b[S]=E*.4+R*.3+U*.3}else b[S]=0}a.current.gain.value=.5}m&&(s.current=p.createBufferSource(),s.current.buffer=m,s.current.loop=!0,s.current.connect(a.current),s.current.start(0))}catch(p){console.error("Audio failed",p)}return()=>f()}},[t,e]),{stopAudio:f}},aJ=({onExit:t})=>l.jsxs("div",{className:"relative z-10 flex justify-between items-center p-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-life-muted",children:"Focus Protocol Active"})]}),l.jsxs("button",{onClick:t,className:"p-2 rounded-full hover:bg-white/10 text-life-muted hover:text-life-hard transition-all flex items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase hidden sm:inline",children:"Abort"}),l.jsx(T3,{size:18})]})]}),lJ=t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},cJ=({timeLeft:t,isPaused:e,onTogglePause:n,durationMinutes:i})=>l.jsxs("div",{className:"relative mb-12",children:[l.jsxs("svg",{className:"w-64 h-64 md:w-80 md:h-80 transform -rotate-90",children:[l.jsx("circle",{cx:"50%",cy:"50%",r:"48%",className:"stroke-life-muted/10 fill-none",strokeWidth:"4"}),l.jsx("circle",{cx:"50%",cy:"50%",r:"48%",className:`fill-none transition-all duration-1000 ${e?"stroke-life-muted":"stroke-life-gold"}`,strokeWidth:"4",strokeDasharray:"301.59",strokeDashoffset:301.59*(1-t/(i*60)),pathLength:"301.59",strokeLinecap:"round",style:{filter:e?"none":"drop-shadow(0 0 15px rgba(251,191,36,0.5))"}})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("div",{className:"text-6xl md:text-8xl font-mono font-bold tracking-tighter tabular-nums",children:lJ(t)}),l.jsxs("button",{onClick:n,className:"mt-4 px-6 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-zinc-800 text-xs font-bold uppercase tracking-widest flex items-center gap-2 transition-all",children:[e?l.jsx(zy,{size:12,fill:"currentColor"}):l.jsx(PW,{size:12,fill:"currentColor"})," ",e?"Resume":"Pause"]})]})]}),uJ=t=>{const{noiseType:e,setNoiseType:n,activePanel:i,setActivePanel:r,hasSubtasks:s,completedSubtasksCount:a,totalSubtasksCount:u,onComplete:f}=t,[d,p]=C.useState(!1),m=()=>{switch(e){case"brown":return"Brown";case"rain":return"Rain";case"clock":return"Tick";case"custom":return"Track";default:return"Mute"}},y=()=>{switch(e){case"brown":return l.jsx(EI,{size:18});case"rain":return l.jsx(wI,{size:18});case"clock":return l.jsx(Jt,{size:18});case"custom":return l.jsx(g0,{size:18});default:return l.jsx(TI,{size:18})}};return l.jsxs("div",{className:"flex items-center gap-2 w-full justify-center max-w-md relative",children:[l.jsxs("div",{className:"relative",children:[d&&l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-life-black border border-life-gold/30 rounded-xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-2 z-50 flex flex-col",children:[{id:"none",label:"Mute",icon:l.jsx(TI,{size:14})},{id:"brown",label:"Brown Noise",icon:l.jsx(EI,{size:14})},{id:"rain",label:"Rain",icon:l.jsx(wI,{size:14})},{id:"clock",label:"Tick",icon:l.jsx(Jt,{size:14})},{id:"custom",label:"Custom",icon:l.jsx(g0,{size:14})}].map(b=>l.jsxs("button",{onClick:()=>{n(b.id),p(!1)},className:`flex items-center gap-3 px-4 py-3 text-xs font-bold uppercase tracking-wider hover:bg-life-gold/10 transition-colors ${e===b.id?"text-life-gold bg-life-gold/5":"text-life-muted"}`,children:[b.icon," ",b.label]},b.id))}),l.jsxs("button",{onClick:()=>p(!d),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${e!=="none"?"bg-life-gold/20 border-life-gold text-life-gold":"bg-white/5 border-zinc-800 text-life-muted hover:text-white"}`,children:[y(),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase",children:m()}),l.jsx(Zr,{size:8})]})]})]}),l.jsxs("button",{onClick:()=>r(i==="notes"?"none":"notes"),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${i==="notes"?"bg-life-easy/20 border-life-easy text-life-easy":"bg-white/5 border-zinc-800 text-life-muted hover:text-white"}`,children:[l.jsx(A3,{size:18}),l.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Notes"})]}),s&&l.jsxs("button",{onClick:()=>r(i==="subtasks"?"none":"subtasks"),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${i==="subtasks"?"bg-life-gold/20 border-life-gold text-life-gold":"bg-white/5 border-zinc-800 text-life-muted hover:text-white"}`,children:[l.jsx(S3,{size:18}),l.jsxs("div",{className:"flex flex-col items-center leading-none",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Steps"}),l.jsxs("span",{className:"text-[7px] opacity-60",children:[a,"/",u]})]})]}),l.jsxs("button",{onClick:f,className:"p-3 rounded-xl border border-life-easy/50 bg-life-easy/10 text-life-easy hover:bg-life-easy hover:text-black transition-all flex flex-col items-center gap-1 w-20 shrink-0 group",children:[l.jsx(Ws,{size:18,className:"group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Done"})]})]})},dJ=({notes:t,setNotes:e,isOpen:n,onClose:i})=>l.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-[#111] border-t border-zinc-800 p-6 rounded-t-3xl transition-transform duration-300 ease-out z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] h-[40vh] flex flex-col ${n?"translate-y-0":"translate-y-full"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[l.jsxs("h3",{className:"text-xs font-bold uppercase text-life-muted tracking-widest flex items-center gap-2",children:[l.jsx(A3,{size:14})," Distraction Pad"]}),l.jsx("button",{onClick:i,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:16})})]}),l.jsx("textarea",{value:t,onChange:r=>e(r.target.value),placeholder:"Dump thoughts here...",className:"w-full h-full bg-black/50 rounded-xl border border-zinc-800 p-4 text-sm text-life-text focus:outline-none focus:border-life-gold resize-none font-mono leading-relaxed"})]}),fJ=({subtasks:t,onToggleSubtask:e,isOpen:n,onClose:i})=>l.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-[#111] border-t border-zinc-800 p-6 rounded-t-3xl transition-transform duration-300 ease-out z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] h-[50vh] flex flex-col text-left ${n?"translate-y-0":"translate-y-full"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[l.jsxs("h3",{className:"text-xs font-bold uppercase text-life-gold tracking-widest flex items-center gap-2",children:[l.jsx(S3,{size:14})," Tactical Objectives"]}),l.jsx("button",{onClick:i,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:16})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:t.map(r=>l.jsxs("div",{onClick:()=>e(r.id),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${r.isCompleted?"bg-life-gold/10 border-life-gold/30 opacity-60":"bg-white/5 border-zinc-800 hover:bg-white/10"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors shrink-0 ${r.isCompleted?"bg-life-gold border-life-gold text-black":"border-life-muted text-transparent"}`,children:l.jsx(_t,{size:12,strokeWidth:4})}),l.jsx("span",{className:`text-sm ${r.isCompleted?"line-through text-life-gold":"text-life-text"}`,children:r.title})]},r.id))})]}),hJ=()=>{var A,M;const{state:t,dispatch:e}=De(),{taskState:n,taskDispatch:i}=Oi(),{habitState:r,habitDispatch:s}=Li(),{focusSession:a}=t.ui,[u,f]=C.useState("none"),[d,p]=C.useState(""),[m,y]=C.useState("none"),{timeLeft:b,isPaused:S,setIsPaused:N}=sJ(!!a,(a==null?void 0:a.durationMinutes)||0),{stopAudio:E}=oJ(m,!!a),R=C.useMemo(()=>a?a.itemType==="habit"?r.habits.find(F=>F.id===a.itemId):n.tasks.find(F=>F.id===a.itemId):null,[a,r.habits,n.tasks]);if(C.useEffect(()=>{a&&!R&&(E(),e.endFocusSession())},[a,R,e]),!a||!R)return null;const U=a.itemType==="habit",j=R.subtasks&&R.subtasks.length>0,B=((A=R.subtasks)==null?void 0:A.filter(H=>H.isCompleted).length)||0,O=((M=R.subtasks)==null?void 0:M.length)||0,P=(H=!1)=>{E();const D=a.durationMinutes*60-b,z=Math.floor(D/60);if(z>=1){const $=Math.floor(z*2);e.updateUser({currentXP:t.user.currentXP+$,dailyXP:t.user.dailyXP+$}),e.addToast(`Focused for ${z}m (+${$} XP)`,"success")}if(d.trim()){const $=d.split(`
`).filter(Y=>Y.trim().length>0);$.forEach(Y=>{i.addTask({title:Y.trim(),difficulty:Ge.EASY,stat:ee.INT,isTimed:!1,subtasks:[],categoryId:void 0})}),e.addToast(`${$.length} Missions added from notes`,"info")}H&&(U?s.processHabit(R.id,"completed"):i.toggleTask(R.id)),e.endFocusSession()},I=H=>{Ae("click",!0),U?s.toggleSubtask(R.id,H):i.toggleSubtask(R.id,H)};return l.jsxs("div",{className:"fixed inset-0 z-[200] bg-black text-white flex flex-col animate-in fade-in duration-500",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0a0a0a] to-[#1a1a1a] pointer-events-none"}),l.jsx("div",{className:`absolute inset-0 bg-life-gold/5 blur-[100px] rounded-full transition-opacity duration-[3000ms] ${S?"opacity-10":"opacity-40 animate-pulse-slow"}`}),l.jsx(aJ,{onExit:()=>P(!1)}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 p-6 text-center",children:[l.jsxs("div",{className:"mb-4 text-[9px] font-black uppercase tracking-[0.2em] bg-white/5 px-3 py-1 rounded-full border border-zinc-800 text-life-gold",children:[U?"PROTOCOL":"MISSION"," TARGET"]}),l.jsx("h2",{className:"text-2xl md:text-4xl font-black tracking-tight mb-8 max-w-2xl leading-tight",children:R.title}),l.jsx(cJ,{timeLeft:b,isPaused:S,onTogglePause:()=>N(!S),durationMinutes:a.durationMinutes}),l.jsx(uJ,{noiseType:m,setNoiseType:y,activePanel:u,setActivePanel:f,hasSubtasks:j,completedSubtasksCount:B,totalSubtasksCount:O,onComplete:()=>P(!0)}),l.jsx(dJ,{notes:d,setNotes:p,isOpen:u==="notes",onClose:()=>f("none")}),l.jsx(fJ,{subtasks:R.subtasks||[],onToggleSubtask:I,isOpen:u==="subtasks",onClose:()=>f("none")})]})]})},pJ=()=>{const{dispatch:t}=De(),[e,n]=C.useState(0),[i,r]=C.useState(""),[s,a]=C.useState(!1),[u,f]=C.useState(""),[d,p]=C.useState("INITIALIZING NEURAL LINK..."),[m,y]=C.useState(!0);C.useEffect(()=>{f(""),y(!0);let N=0;const E=setInterval(()=>{f(d.slice(0,N+1)),N++,N>=d.length&&(clearInterval(E),y(!1))},30);return()=>clearInterval(E)},[d]);const b=()=>{Ae("click",!0),e===0?(p("IDENTITY VERIFICATION REQUIRED."),n(1)):e===1&&i&&(p("SYNCHRONIZATION COMPLETE. WELCOME."),n(2))},S=()=>{i&&(a(!0),Ae("level-up",!0),setTimeout(()=>{t.completeOnboarding(i,"Initiate",ee.DIS)},1e3))};return s?l.jsx("div",{className:"fixed inset-0 z-[999] bg-black flex items-center justify-center animate-out fade-out duration-1000",children:l.jsx("div",{className:"text-life-gold text-sm font-mono animate-pulse",children:"SYSTEM ONLINE"})}):l.jsxs("div",{className:"fixed inset-0 z-[999] bg-[#050505] flex flex-col items-center justify-center p-6 font-mono overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:"linear-gradient(0deg, transparent 24%, #222 25%, #222 26%, transparent 27%, transparent 74%, #222 75%, #222 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, #222 25%, #222 26%, transparent 27%, transparent 74%, #222 75%, #222 76%, transparent 77%, transparent)",backgroundSize:"50px 50px"}}),l.jsxs("div",{className:"w-full max-w-md relative z-10 flex flex-col h-full justify-center",children:[l.jsxs("div",{className:"mb-8 min-h-[60px] border-l-2 border-life-gold pl-4 py-2",children:[l.jsxs("div",{className:"text-xs text-life-gold/50 mb-1 flex items-center gap-2",children:[l.jsx(_i,{size:12})," PROTOCOL_INIT_V1.0"]}),l.jsxs("h1",{className:"text-lg md:text-xl text-life-gold font-bold leading-tight",children:[u,l.jsx("span",{className:"animate-pulse",children:"_"})]})]}),e===0&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-8 duration-700",children:[l.jsxs("div",{className:"w-24 h-24 bg-life-gold/10 rounded-full border border-life-gold/30 flex items-center justify-center mx-auto mb-8 relative",children:[l.jsx(Qt,{size:40,className:"text-life-gold animate-pulse-slow"}),l.jsx("div",{className:"absolute inset-0 border border-life-gold rounded-full animate-[spin_10s_linear_infinite] opacity-30 border-t-transparent border-l-transparent"})]}),l.jsx("p",{className:"text-center text-life-muted text-xs mb-12 max-w-xs mx-auto leading-relaxed",children:"Welcome to LifeOS. This interface will augment your daily operations, turning chaos into order and effort into progression."}),l.jsx("button",{onClick:b,disabled:m,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all hover:scale-[1.02]",children:"Start"})]}),e===1&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Codename"}),l.jsx("input",{type:"text",value:i,onChange:N=>r(N.target.value),placeholder:"Enter Name...",autoFocus:!0,className:"w-full bg-transparent border-b-2 border-life-muted/30 py-2 text-2xl font-bold text-white focus:outline-none focus:border-life-gold transition-colors text-center"})]}),l.jsx("button",{onClick:b,disabled:!i,className:"w-full py-4 border border-life-gold text-life-gold hover:bg-life-gold hover:text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Identity"})]}),e===2&&l.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-700 text-center",children:[l.jsxs("div",{className:"mb-8 border border-life-gold/30 bg-life-gold/5 p-6 rounded-lg relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-life-gold animate-[loading_2s_ease-in-out_infinite]"}),l.jsx("h2",{className:"text-2xl font-black text-white uppercase mb-1",children:i}),l.jsx("p",{className:"text-life-gold font-mono text-sm uppercase tracking-widest",children:"READY"}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-life-gold/20 flex justify-center gap-4 text-[10px] text-life-muted uppercase font-bold",children:[l.jsx("span",{children:"Lvl 1"}),l.jsx("span",{children:"Status: ONLINE"})]})]}),l.jsxs("button",{onClick:S,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all hover:scale-[1.02] flex items-center justify-center gap-2",children:["Enter LifeOS ",l.jsx(xi,{size:18})]})]})]}),l.jsx("div",{className:"absolute bottom-8 flex gap-2",children:[0,1,2].map(N=>l.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors ${N===e?"bg-life-gold":"bg-life-muted/20"}`},N))}),l.jsx("style",{children:`
                @keyframes loading {
                    0% { transform: translateX(-100%); }
                    50% { transform: translateX(0); }
                    100% { transform: translateX(100%); }
                }
            `})]})},L3=C.createContext(void 0),mJ=t=>({...t,status:t.status||"active",progress:t.progress||0,isCampaign:t.isCampaign||!1,steps:(t.steps||[]).map(e=>({...e,isCompleted:!!e.isCompleted,isLocked:!!e.isLocked,subtasks:e.subtasks||[]}))}),gJ=t=>({raids:(Array.isArray(t)?t:t.raids||[]).map(mJ)}),yJ=({children:t})=>{const{state:e,dispatch:n}=De(),{skillDispatch:i,skillState:r}=Sn(),s=e.user.preferences.soundEnabled,[a,u]=fd("LIFE_OS_RAIDS_DATA",{raids:[]},"raids_data",gJ),{raids:f}=a,d=O=>{const P={id:`rd_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...O,status:"active",progress:0,isCampaign:O.isCampaign||!1};u(I=>({...I,raids:[P,...I.raids]})),Ae("click",s),n.addToast("Operation Initialized","success")},p=(O,P)=>{u(I=>({...I,raids:I.raids.map(A=>A.id===O?{...A,...P}:A)})),Ae("click",s)},m=O=>{u(P=>({...P,raids:P.raids.filter(I=>I.id!==O)})),Ae("delete",s),n.addToast("Operation Deleted","info")},y=O=>{u(P=>({...P,raids:P.raids.map(I=>I.id===O?{...I,status:"archived"}:I)})),n.addToast("Operation Archived","info")},b=O=>{u(P=>({...P,raids:P.raids.map(I=>I.id===O?{...I,status:"active"}:I)})),n.addToast("Operation Restored","success")},S=(O,P)=>{u(I=>({...I,raids:I.raids.map(A=>{if(A.id!==O)return A;const M=A.steps.map(H=>H.id===P?{...H,isArchived:!0}:H);return{...A,steps:M}})}))},N=(O,P)=>{u(I=>({...I,raids:I.raids.map(A=>{if(A.id!==O)return A;const M=A.steps.filter(H=>H.id!==P);return{...A,steps:M}})})),n.setModal("none")},E=(O,P,I)=>{u(A=>({...A,raids:A.raids.map(M=>{if(M.id!==O)return M;const H=M.steps.map(F=>F.id===P?{...F,...I}:F);return{...M,steps:H}})}))},R=(O,P)=>{u(I=>({...I,raids:I.raids.map(A=>{if(A.id!==O)return A;const M=new Map(P.map(F=>[F.id,F])),H=A.steps.map(F=>{if(M.has(F.id)){const D=M.get(F.id);return{...F,...D,isCompleted:D.isCompleted!==void 0?D.isCompleted:F.isCompleted}}return F});return{...A,steps:H}})})),n.addToast("Raid Steps Updated","success")},U=(O,P,I)=>{u(A=>({...A,raids:A.raids.map(M=>{if(M.id!==O)return M;const H=M.steps.map(F=>{var z;if(F.id!==P)return F;const D=((z=F.subtasks)==null?void 0:z.map($=>$.id===I?{...$,isCompleted:!$.isCompleted}:$))||[];return{...F,subtasks:D}});return{...M,steps:H}})})),Ae("click",s)},j=(O,P)=>{var pe;const I=f.find(ue=>ue.id===O);if(!I)return;const A=I.steps.findIndex(ue=>ue.id===P);if(A===-1)return;const M=I.steps[A],H=!M.isCompleted,F=M.difficulty||I.difficulty,D=M.stat||(I.stats&&I.stats.length>0?I.stats[0]:ee.STR),z=I.skillId,$=Ju(F,e.user.currentMode),Y=$.xp,W=$.gold,X=F===Ge.HARD?2:F===Ge.NORMAL?1:.5,oe=r.skills.find(ue=>ue.id===z),ve=(pe=oe==null?void 0:oe.relatedStats)!=null&&pe.length?oe.relatedStats:[D],Ee=X/ve.length,K={...e.user.stats};ve.forEach(ue=>{K[ue]=(K[ue]||0)+Ee});const te=[...I.steps];te[A]={...M,isCompleted:H};const ge=te.filter(ue=>ue.isCompleted).length,Z=Math.round(ge/te.length*100),he=Z===100;let Ne=null;if(H)n.updateUser({currentXP:e.user.currentXP+Y,dailyXP:e.user.dailyXP+Y,gold:e.user.gold+W,stats:K}),z&&i.addSkillXP(z,Math.ceil(Y*.5)),he?(Ae("crit",s),Ne={title:`Operation Conquered: ${I.title}`,xp:Y*5,gold:W*5,multiplier:5,message:"Sector Secured. Tactical Superiority Achieved."},n.updateUser({currentXP:e.user.currentXP+Y*5,gold:e.user.gold+W*5,metrics:{...e.user.metrics,totalRaidsWon:e.user.metrics.totalRaidsWon+1}})):(Ae("success",s),n.addToast(`Step Secured | +${Y} XP`,"success"));else{const ue={...e.user.stats};ve.forEach(re=>{ue[re]=Math.max(0,(ue[re]||0)-Ee)}),n.updateUser({currentXP:Math.max(0,e.user.currentXP-Y),dailyXP:Math.max(0,e.user.dailyXP-Y),gold:Math.max(0,e.user.gold-W),stats:ue}),I.status==="completed"?(n.updateUser({currentXP:Math.max(0,e.user.currentXP-Y*5),gold:Math.max(0,e.user.gold-W*5),metrics:{...e.user.metrics,totalRaidsWon:Math.max(0,e.user.metrics.totalRaidsWon-1)}}),n.addToast("Step Revoked | Completion Bonus Removed","info")):n.addToast("Step Revoked","info"),Ae("delete",s)}u(ue=>({...ue,raids:ue.raids.map(re=>{if(re.id!==O)return re;const Re=[...re.steps];return Re[A]={...M,isCompleted:H},H&&A+1<Re.length&&(Re[A+1]={...Re[A+1],isLocked:!1}),{...re,steps:Re,progress:Z,status:he?"completed":re.status==="completed"?"active":re.status}})})),Ne&&setTimeout(()=>n.setModal("loot",Ne),300)},B=O=>{u({raids:O}),n.addToast("Raids Restored","success")};return l.jsx(L3.Provider,{value:{raidState:{raids:f},raidDispatch:{addRaid:d,updateRaid:p,deleteRaid:m,archiveRaid:y,restoreRaid:b,toggleRaidStep:j,updateRaidStep:E,mergeRaidSteps:R,toggleRaidStepSubtask:U,archiveRaidStep:S,deleteRaidStep:N,restoreData:B}},children:t})},ls=()=>{const t=C.useContext(L3);if(t===void 0)throw new Error("useRaids must be used within a RaidProvider");return t},vJ=()=>{const{state:t,dispatch:e}=De(),{taskState:n,taskDispatch:i}=Oi(),{habitState:r,habitDispatch:s}=Li(),{raidState:a,raidDispatch:u}=ls(),{deviceNotificationsEnabled:f}=t.user.preferences,d=C.useRef("");return C.useEffect(()=>{qs.isNativePlatform()&&(c3(),Zl.addListener("localNotificationActionPerformed",p=>{const m=p.actionId,y=p.notification.extra;if(m==="COMPLETE"&&y){const{itemId:b,type:S,parentId:N}=y;S==="task"?(i.toggleTask(b),e.addToast("Mission Completed via Uplink","success")):S==="habit"?(s.processHabit(b,"completed"),e.addToast("Protocol Executed via Uplink","success")):S==="raid_step"&&N&&(u.toggleRaidStep(N,b),e.addToast("Operation Step Secured","success")),Ae("success",!0)}m==="SNOOZE"&&e.addToast("Alert Snoozed (Simulation)","info")}))},[]),C.useEffect(()=>{if(!f||!qs.isNativePlatform())return;const m=setTimeout(()=>{const y=t.ui.debugDate?new Date(t.ui.debugDate).toISOString():new Date().toISOString(),b=r.habits.filter(O=>O.status==="pending"&&Xu(O,y)),S=n.tasks.filter(O=>!O.isCompleted&&!O.isArchived&&(!O.scheduledTime||new Date(O.scheduledTime)<=new Date(new Date().getTime()+864e5)));let N=0;a.raids.forEach(O=>{O.status==="active"&&(N+=O.steps.filter(P=>!P.isCompleted&&!P.isLocked).length)});const E=b.length+S.length+N,R=Math.floor(t.user.dailyXP/t.user.dailyTarget*100),U=`LifeOS Active: ${E} Pending`,j=` ${S.length} Missions     ${b.length} Protocols     ${R}% XP`,B=U+j;d.current!==B&&(HK(U,j),d.current=B)},1e3);return()=>clearTimeout(m)},[n.tasks,r.habits,a.raids,t.user.dailyXP,f]),C.useEffect(()=>{if(!f)return;const m=setInterval(()=>{const y=new Date().getTime(),b=300*1e3;n.tasks.forEach(S=>{if(!(S.isCompleted||S.isArchived||!S.scheduledTime)&&S.reminders){const N=new Date(S.scheduledTime).getTime();let E=!1;const R=S.reminders.map(U=>{if(U.isSent)return U;const j=N-U.minutesBefore*6e4;return y>=j&&y<j+b?(p0(parseInt(S.id.replace(/\D/g,"").slice(-8))||Date.now(),`Mission Critical: ${S.title}`,`Time: ${new Date(S.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,{itemId:S.id,type:"task"}),E=!0,{...U,isSent:!0}):U});E&&i.updateTask(S.id,{reminders:R})}}),r.habits.forEach(S=>{if(S.status==="completed"||!S.scheduledTime||!S.reminders)return;const[N,E]=S.scheduledTime.split(":").map(Number),R=new Date;R.setHours(N,E,0,0);const U=R.getTime();let j=!1;const B=S.reminders.map(O=>{if(O.isSent)return O;const P=U-O.minutesBefore*6e4;return y>=P&&y<P+b?(p0(parseInt(S.id.replace(/\D/g,"").slice(-8))||Date.now(),`Protocol: ${S.title}`,`Time: ${S.scheduledTime}`,{itemId:S.id,type:"habit"}),j=!0,{...O,isSent:!0}):O});j&&s.updateHabit(S.id,{reminders:B})})},15e3);return()=>clearInterval(m)},[n.tasks,r.habits,f]),null},Zb="LIFE_OS_CAMPAIGN_DATA_V2",tg={id:"campaign_root",title:"",startDate:null,isFrozen:!1,currentWeek:0,currentDay:0,totalWeeks:12,isActive:!1},z3=C.createContext(void 0),xJ=({children:t})=>{const{state:e,dispatch:n}=De(),i=e.user.preferences.soundEnabled,r=()=>{try{const b=localStorage.getItem(Zb);if(b)return JSON.parse(b)}catch(b){console.warn("Failed to load campaign persistence:",b)}return tg},[s,a]=C.useState(r);C.useEffect(()=>{if(!s.startDate||!s.isActive)return;const b=()=>{if(s.isFrozen)return;const N=e.ui.debugDate,E=N?new Date(N):new Date,R=new Date(s.startDate),U=E.getTime()-R.getTime(),j=Math.floor(U/(1e3*60*60*24));if(j<0)a(B=>({...B,currentWeek:0,currentDay:0}));else{const B=Math.floor(j/7)+1,O=j%7+1,P=Math.min(B,13);a(I=>I.currentWeek!==P||I.currentDay!==O?{...I,currentWeek:P,currentDay:O}:I)}};b();const S=setInterval(b,6e4);return()=>clearInterval(S)},[s.startDate,s.isActive,s.isFrozen,e.ui.debugDate]),C.useEffect(()=>{const b=setTimeout(()=>{(s.isActive||localStorage.getItem(Zb))&&localStorage.setItem(Zb,JSON.stringify(s))},500);return()=>clearTimeout(b)},[s]);const u=(b,S)=>{const N={...tg,id:`cmp_${Date.now()}`,title:b,startDate:S,isActive:!0};Ae("success",i),a(N),n.addToast("Operation Tempo Initiated","success")},f=()=>{const b=!s.isFrozen;a(S=>({...S,isFrozen:b})),Ae("click",i),n.addToast(b?"Timeline Frozen ":"Timeline Resumed ","info")},d=()=>{a(tg),Ae("delete",i),n.addToast("Campaign Aborted","info")},p=()=>{confirm(` REAP THE HARVEST?
This will conclude the current 12-week cycle and archive the results. Are you ready for the reset?`)&&(a(tg),Ae("level-up",i),n.addToast("Harvest Complete. Cycle Reset.","success"))},m=b=>{a(S=>({...S,startDate:b})),Ae("click",i),n.addToast("Timeline Shifted","info")},y=b=>{a(b),n.addToast("Campaign Restored","success")};return l.jsx(z3.Provider,{value:{campaignState:{campaign:s},campaignDispatch:{initCampaign:u,toggleFreeze:f,resetCampaign:d,completeCampaign:p,updateStartDate:m,restoreData:y}},children:t})},md=()=>{const t=C.useContext(z3);if(t===void 0)throw new Error("useCampaign must be used within a CampaignProvider");return t},NI=t=>new Date(t).toISOString().replace(/-|:|\.\d{3}/g,""),ST=(t,e="",n,i=60)=>{if(!n){alert("    .");return}const r=new Date(n),s=new Date(r.getTime()+i*6e4),a=NI(r.toISOString()),u=NI(s.toISOString()),f=encodeURIComponent(`${e}

Generated by LifeOS`),d=encodeURIComponent(`[LifeOS] ${t}`),p=encodeURIComponent("LifeOS HQ"),m=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${d}&dates=${a}/${u}&details=${f}&location=${p}`;window.open(m,"_blank")},CI=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Qt,{size:e})}},gu=({task:t,onToggle:e,onDelete:n})=>{var D,z;const{dispatch:i,state:r}=De(),{skillState:s}=Sn(),{taskState:a,taskDispatch:u}=Oi(),{campaignState:f}=md(),d=t.skillId?s.skills.find($=>$.id===t.skillId):null,p=xt[t.stat],m=Wi[t.difficulty].split(" ")[0],y=r.user.preferences.showCalendarSync??!0,b=Ju(t.difficulty,r.user.currentMode),S=t.isCampaign?Math.ceil(b.xp*1.1):b.xp,N=t.isCampaign?WX(f.campaign.startDate,t.deadline||t.scheduledTime):null,[E,R]=C.useState(!1),U=((D=t.subtasks)==null?void 0:D.filter($=>$.isCompleted).length)||0,j=((z=t.subtasks)==null?void 0:z.length)||0,B=j>0?U/j*100:0,O=$=>`${$}m`,P=$=>{$.stopPropagation(),i.startFocusSession(t.id,t.durationMinutes||25)},I=$=>{$.stopPropagation(),i.setModal("itemDetails",{itemId:t.id,type:"task"})},A=$=>{$.stopPropagation(),n(t.id)},M=$=>{const Y=$.target.value;u.moveTask(t.id,Y||void 0)},H=$=>{$.stopPropagation(),ST(t.title,t.description,t.scheduledTime||t.deadline,t.durationMinutes||60)},F=t.reminders?t.reminders.length:0;return l.jsxs("div",{onClick:()=>R(!E),className:`
        relative group flex flex-col p-4 mb-3 rounded-xl border border-zinc-800 bg-life-black/40 backdrop-blur-sm shadow-sm cursor-pointer transition-all duration-300 overflow-hidden
        ${t.isCompleted?"opacity-50 grayscale border-gray-800":"hover:border-zinc-700 hover:bg-life-black/60 hover:shadow-md"}
        ${E?"ring-1 ring-life-gold/20 bg-life-black/80":""}
      `,children:[l.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${m.replace("border-","bg-")}`}),j>0&&!t.isCompleted&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-life-muted/10",children:l.jsx("div",{className:"h-full bg-life-gold transition-all duration-500",style:{width:`${B}%`}})}),l.jsxs("div",{className:"flex items-center w-full",children:[l.jsx("div",{className:"mr-4 relative",children:l.jsx("div",{onClick:$=>{$.stopPropagation(),e(t.id)},className:`
                w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 hover:scale-110
                ${t.isCompleted?"bg-life-easy border-life-easy text-life-black":"border-life-muted group-hover:border-life-silver bg-transparent"}
                `,children:l.jsx(_t,{size:16,className:`transition-transform duration-300 ${t.isCompleted?"scale-100":"scale-0"}`,strokeWidth:3})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[t.isCampaign&&l.jsxs("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded border border-indigo-500/50 bg-indigo-500/10 text-indigo-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_8px_rgba(99,102,241,0.2)]",children:[l.jsx(Ir,{size:10}),N?`G12  ${N}`:"G12"]}),t.isCalendarEvent&&!t.isCampaign&&l.jsxs("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded border border-blue-500/50 bg-blue-500/10 text-blue-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_8px_rgba(59,130,246,0.2)]",children:[l.jsx(er,{size:10})," C30"]}),d&&d.relatedStats&&d.relatedStats.length>0?d.relatedStats.map($=>l.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border flex items-center gap-1 uppercase tracking-wider ${t.isCompleted?"border-gray-600 text-gray-500":""}`,style:{borderColor:t.isCompleted?void 0:`${xt[$]}40`,color:t.isCompleted?void 0:xt[$],backgroundColor:t.isCompleted?void 0:`${xt[$]}10`},children:[l.jsx(CI,{stat:$,size:10}),$]},$)):l.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border flex items-center gap-1 uppercase tracking-wider ${t.isCompleted?"border-gray-600 text-gray-500":""}`,style:{borderColor:t.isCompleted?void 0:`${p}40`,color:t.isCompleted?void 0:p,backgroundColor:t.isCompleted?void 0:`${p}10`},children:[l.jsx(CI,{stat:t.stat,size:10}),t.stat]}),!t.isCompleted&&l.jsxs("span",{className:"text-[9px] font-mono font-bold text-life-muted bg-life-black px-1.5 py-0.5 rounded border border-life-muted/20",children:["+",S," XP"]}),d&&l.jsxs("span",{className:"text-[9px] text-life-gold border border-life-gold/30 bg-life-gold/10 px-1.5 py-0.5 rounded flex items-center gap-1 uppercase tracking-wider",children:[l.jsx(Sr,{size:10})," ",d.title]}),t.isTimed&&!E&&l.jsxs("span",{className:"text-[10px] flex items-center gap-1 text-life-muted",children:[l.jsx(Jt,{size:10})," ",O(t.durationMinutes||0)]}),t.scheduledTime&&!E&&l.jsxs("span",{className:"text-[9px] flex items-center gap-1 text-life-gold bg-life-gold/10 px-1.5 py-0.5 rounded border border-life-gold/20",children:[new Date(t.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),F>0&&l.jsx(dc,{size:8,className:"fill-current"})]})]}),l.jsx("h3",{className:`text-sm font-medium truncate pr-2 ${t.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:t.title})]})]}),E&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-life-muted/10 animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"flex justify-end mb-3",children:l.jsxs("div",{className:"flex items-center gap-1 bg-life-black/50 rounded-lg p-0.5 border border-life-muted/10",children:[!t.isCompleted&&!t.isArchived&&(t.scheduledTime||t.deadline)&&y&&l.jsx("button",{onClick:H,className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:bg-blue-500/10 rounded transition-all",title:"Add to Google Calendar",children:l.jsx(gT,{size:12})}),!t.isCompleted&&!t.isArchived&&l.jsx("button",{onClick:P,className:"w-6 h-6 flex items-center justify-center text-life-gold hover:bg-life-gold/10 rounded transition-all",title:"Enter Focus Citadel",children:l.jsx(zy,{size:12,fill:"currentColor"})}),!t.isCompleted&&!t.isArchived&&l.jsxs("div",{className:"relative group/move w-6 h-6 flex items-center justify-center",onClick:$=>$.stopPropagation(),children:[l.jsx("button",{className:"text-life-muted hover:text-life-gold transition-colors",children:l.jsx(yT,{size:12})}),l.jsxs("select",{onChange:M,value:t.categoryId||"",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",title:"Move to Section",children:[l.jsx("option",{value:"",children:"(Uncategorized)"}),a.categories.map($=>l.jsx("option",{value:$.id,children:$.title},$.id))]})]}),l.jsx("button",{onClick:I,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/10 rounded transition-colors",title:"Mission Details",children:l.jsx(Eh,{size:12})}),l.jsx("button",{onClick:A,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded transition-colors",title:"Delete Mission",children:l.jsx(ei,{size:12})})]})}),t.description&&l.jsxs("div",{className:"flex gap-2 text-xs text-life-muted mb-3",children:[l.jsx(pd,{size:14,className:"shrink-0 mt-0.5"}),l.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:t.description})]}),j>0&&l.jsx("div",{className:"mb-3 space-y-1 pl-1",children:t.subtasks.map($=>l.jsxs("div",{onClick:Y=>{Y.stopPropagation(),u.toggleSubtask(t.id,$.id)},className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-life-muted/10 p-1 rounded transition-colors group/sub",children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${$.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover/sub:border-life-gold"}`,children:l.jsx(_t,{size:12,strokeWidth:3})}),l.jsx("span",{className:$.isCompleted?"text-life-muted line-through":"text-life-text",children:$.title})]},$.id))}),l.jsx("div",{className:"flex justify-between items-end mt-2",children:l.jsx("div",{className:"flex gap-2 text-[10px] text-life-muted uppercase tracking-wider items-center",children:t.scheduledTime?l.jsxs(l.Fragment,{children:[l.jsx(dc,{size:12})," ",F," Alerts | ",new Date(t.scheduledTime).toLocaleString()]}):t.deadline&&l.jsxs(l.Fragment,{children:[l.jsx(er,{size:12})," Due: ",new Date(t.deadline).toLocaleString()]})})})]})]})},bJ=({raidOperations:t,expandedNotes:e,expandedSubtasks:n,toggleNotes:i,toggleSubtasksView:r,raidDispatch:s,openRaidStepDetails:a})=>l.jsxs("div",{className:"mb-6 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 px-1 text-life-hard animate-pulse-slow",children:[l.jsx(Sc,{size:14}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Operations (Tip of the Spear)"})]}),t.map(({raid:u,step:f})=>{var b,S;const d=e.has(f.id),p=n.has(f.id),m=((b=f.subtasks)==null?void 0:b.length)||0,y=((S=f.subtasks)==null?void 0:S.filter(N=>N.isCompleted).length)||0;return l.jsxs("div",{onClick:()=>r(f.id),className:`bg-life-paper border-l-4 rounded-r-xl shadow-lg relative overflow-hidden group transition-all duration-300 cursor-pointer ${Wi[u.difficulty].split(" ")[0]} hover:bg-white/5`,children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"8px 8px"}}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-1",children:l.jsxs("span",{className:"text-[9px] bg-life-black px-1.5 py-0.5 rounded text-life-muted font-bold uppercase tracking-wider border border-zinc-800",children:["OP: ",u.title]})}),l.jsx("h3",{className:"text-sm font-bold text-life-text flex items-center gap-2",children:f.title})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:N=>{N.stopPropagation(),i(f.id)},className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${d?"text-life-gold bg-life-gold/10":"text-life-muted hover:text-white hover:bg-life-muted/10"}`,children:l.jsx(ep,{size:16})}),l.jsx("button",{onClick:N=>{N.stopPropagation(),s.toggleRaidStep(u.id,f.id)},className:"w-8 h-8 rounded-lg bg-life-black border border-zinc-800 flex items-center justify-center text-life-muted hover:text-life-gold hover:border-life-gold transition-all relative z-20",children:l.jsx(Tr,{size:16})})]})]}),l.jsxs("div",{className:"mt-2 flex items-center gap-3 text-[10px] text-life-muted/60",children:[l.jsx("span",{className:"uppercase font-bold text-life-hard",children:u.difficulty}),l.jsx("span",{children:""}),l.jsxs("span",{children:["Step ",u.steps.findIndex(N=>N.id===f.id)+1," of ",u.steps.length]}),m>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsxs("span",{className:`flex items-center gap-1 ${p?"text-life-gold":""}`,children:[l.jsx(Tr,{size:10})," ",y,"/",m," Subtasks"]})]})]}),d&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-800 animate-in slide-in-from-top-2 cursor-default",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(pd,{size:12,className:"text-life-gold mt-0.5 shrink-0"}),l.jsx("div",{className:"text-xs text-life-text leading-relaxed whitespace-pre-wrap flex-1",children:f.notes||l.jsx("span",{className:"text-life-muted italic",children:"No intel provided."})})]}),l.jsx("div",{className:"flex justify-end mt-2",children:l.jsxs("button",{onClick:N=>{N.stopPropagation(),a(f.id,u.id)},className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-gold bg-life-black px-2 py-1 rounded border border-zinc-800",children:[l.jsx(Eh,{size:10})," Full View"]})})]}),p&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-800 animate-in slide-in-from-top-2 cursor-default",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h4",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-1",children:[l.jsx(_t,{size:10})," Tactical Checklist"]}),l.jsxs("button",{onClick:N=>{N.stopPropagation(),a(f.id,u.id)},className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-white",children:[l.jsx(fX,{size:10})," Edit"]})]}),m>0?l.jsx("div",{className:"space-y-1 pl-1 mb-2",children:f.subtasks.map(N=>l.jsxs("div",{onClick:E=>{E.stopPropagation(),s.toggleRaidStepSubtask(u.id,f.id,N.id)},className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-all border ${N.isCompleted?"bg-life-black border-zinc-800 opacity-60":"bg-life-paper/50 border-zinc-800 hover:border-life-gold/30 hover:bg-life-muted/10"}`,children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all shrink-0 ${N.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover:border-life-gold"}`,children:l.jsx(_t,{size:12,strokeWidth:4,className:N.isCompleted?"scale-100":"scale-0"})}),l.jsx("span",{className:`text-xs font-medium leading-tight ${N.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:N.title})]},N.id))}):l.jsx("div",{className:"text-[10px] text-life-muted italic text-center py-2 border border-dashed border-zinc-800 rounded mb-2",children:"No subtasks defined."})]})]})]},f.id)})]}),_J=({onClose:t})=>l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 mb-6 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-red-900/20 rounded-lg text-red-500",children:l.jsx(Bo,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-wider",children:"Sentencing Guidelines"}),l.jsx("p",{className:"text-[10px] text-life-muted",children:"Economy of Pain & Discipline"})]})]}),l.jsx("button",{onClick:t,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:16})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-blue-400 font-black text-xs",children:"XP (Experience)"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Growth Metric"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"Easy Mission Reward"}),l.jsx("span",{className:"text-life-easy",children:"+100 XP"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"Hard Mission Reward"}),l.jsx("span",{className:"text-life-gold",children:"+500 XP"})]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Recommended Penalties:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[l.jsx("span",{className:"text-zinc-400",children:"Minor Slip"})," ",l.jsx("span",{className:"text-red-400",children:"-50 XP"}),l.jsx("span",{className:"text-zinc-400",children:"Bad Habit"})," ",l.jsx("span",{className:"text-red-400",children:"-200 XP"}),l.jsx("span",{className:"text-zinc-400",children:"Major Failure"})," ",l.jsx("span",{className:"text-red-400",children:"-1000 XP"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-life-gold font-black text-xs",children:"Gold (Currency)"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Reward Power"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"1 Hour of Work"}),l.jsx("span",{className:"text-life-gold",children:"~50-100 G"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"Day of Perfection"}),l.jsx("span",{className:"text-life-gold",children:"~500 G"})]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Fines:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[l.jsx("span",{className:"text-zinc-400",children:"Wasted Time"})," ",l.jsx("span",{className:"text-red-400",children:"-10 G / min"}),l.jsx("span",{className:"text-zinc-400",children:"Impulse Buy"})," ",l.jsx("span",{className:"text-red-400",children:"-100 G"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-purple-400 font-black text-xs",children:"Attributes"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Core Stats"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Stats are ",l.jsx("span",{className:"text-white font-bold",children:"extremely hard"})," to earn. You only get ",l.jsx("span",{className:"text-purple-400",children:"+1"})," per completed mission."]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Severe Punishment:"}),l.jsxs("div",{className:"text-[9px] text-zinc-400",children:["Losing ",l.jsx("span",{className:"text-red-400",children:"-1 Stat"})," is equivalent to erasing a completed mission from your history. Use sparingly for character flaws (e.g., Anger = -1 HEA)."]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-indigo-400 font-black text-xs",children:"Honor"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Integrity Score"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Your daily score starts at ",l.jsx("span",{className:"text-indigo-400",children:"100%"}),"."]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Impact:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[l.jsx("span",{className:"text-zinc-400",children:"Disappointment"})," ",l.jsx("span",{className:"text-red-400",children:"-5%"}),l.jsx("span",{className:"text-zinc-400",children:"Broken Promise"})," ",l.jsx("span",{className:"text-red-400",children:"-20%"}),l.jsx("span",{className:"text-zinc-400",children:"Betrayal"})," ",l.jsx("span",{className:"text-red-400",children:"-50%"})]})]})]})]})]})]}),wJ=()=>{const{taskState:t,taskDispatch:e}=Oi(),{laws:n}=t,[i,r]=C.useState(""),[s,a]=C.useState("honor"),[u,f]=C.useState(50),[d,p]=C.useState(ee.DIS),[m,y]=C.useState(!1),[b,S]=C.useState(!1),[N,E]=C.useState(null),[R,U]=C.useState(""),[j,B]=C.useState("honor"),[O,P]=C.useState(0),[I,A]=C.useState(ee.DIS),M=D=>{D.preventDefault(),i.trim()&&(e.addLaw(i,s,u,s==="stat"?d:void 0),r(""),f(50),y(!1))},H=D=>{E(D.id),U(D.title),B(D.penaltyType),P(D.penaltyValue),A(D.statTarget||ee.DIS)},F=()=>{!N||!R.trim()||(e.updateLaw(N,{title:R,penaltyType:j,penaltyValue:O,statTarget:j==="stat"?I:void 0}),E(null))};return l.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-500 pb-20",children:[l.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 p-4 rounded-xl mb-6 text-center relative",children:[l.jsx(y0,{className:"w-8 h-8 text-red-500 mx-auto mb-2 animate-pulse"}),l.jsx("h2",{className:"text-lg font-black text-red-500 uppercase tracking-widest mb-1",children:"The Codex"}),l.jsx("p",{className:"text-[10px] text-red-400/70 font-mono uppercase tracking-wider",children:'"He who cannot obey himself will be commanded."'}),l.jsx("button",{onClick:()=>S(!b),className:"absolute top-4 right-4 text-red-500/50 hover:text-red-400 transition-colors",title:"Sentencing Guidelines",children:l.jsx(Sr,{size:16})})]}),b&&l.jsx(_J,{onClose:()=>S(!1)}),l.jsxs("div",{className:"space-y-3 mb-8",children:[n.map(D=>N===D.id?l.jsxs("div",{className:"bg-life-black border border-life-gold/50 p-4 rounded-xl space-y-3 animate-in fade-in",children:[l.jsx("input",{type:"text",value:R,onChange:$=>U($.target.value),className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1 flex bg-[#0a0a0a] rounded-lg p-1 border border-red-900/30",children:[l.jsx("button",{type:"button",onClick:()=>B("honor"),className:`flex-1 py-1 rounded text-[9px] font-bold ${j==="honor"?"bg-indigo-500 text-white":"text-zinc-500"}`,children:l.jsx(il,{size:10,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>B("gold"),className:`flex-1 py-1 rounded text-[9px] font-bold ${j==="gold"?"bg-life-gold text-black":"text-zinc-500"}`,children:l.jsx(ii,{size:10,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>B("xp"),className:`flex-1 py-1 rounded text-[9px] font-bold ${j==="xp"?"bg-blue-500 text-white":"text-zinc-500"}`,children:l.jsx(bt,{size:10,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>B("stat"),className:`flex-1 py-1 rounded text-[9px] font-bold ${j==="stat"?"bg-purple-500 text-white":"text-zinc-500"}`,children:l.jsx(Qt,{size:10,className:"mx-auto"})})]}),l.jsx("input",{type:"number",value:O,onChange:$=>P(Number($.target.value)),className:"w-20 bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500 text-center"})]}),j==="stat"&&l.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-1",children:Object.values(ee).map($=>l.jsx("button",{onClick:()=>A($),className:`w-6 h-6 shrink-0 rounded flex items-center justify-center border transition-all text-[9px] ${I===$?"bg-red-900/50 border-red-500 text-white":"border-zinc-800 text-zinc-500"}`,children:$},$))}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{onClick:()=>E(null),className:"flex-1 py-2 rounded bg-life-black border border-life-muted/20 text-life-muted text-xs font-bold hover:text-white",children:"Cancel"}),l.jsxs("button",{onClick:F,className:"flex-1 py-2 rounded bg-life-gold text-black text-xs font-bold hover:bg-yellow-400 flex items-center justify-center gap-1",children:[l.jsx(_t,{size:12})," Save"]})]})]},D.id):l.jsxs("div",{className:"bg-[#0f0505] border border-red-900/30 p-4 rounded-xl flex items-center justify-between group hover:border-red-600/50 transition-all",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[l.jsx("h3",{className:"text-sm font-bold text-red-100 mb-1",children:D.title}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-[9px] bg-red-900/30 text-red-400 px-2 py-0.5 rounded border border-red-900/50 uppercase font-black tracking-wider",children:["Penalty: -",D.penaltyValue," ",D.penaltyType==="stat"?D.statTarget:D.penaltyType.toUpperCase()]}),D.timesBroken>0&&l.jsxs("span",{className:"text-[9px] text-zinc-600 font-mono",children:["Broken ",D.timesBroken,"x"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>e.enforceLaw(D.id),className:"bg-red-600 hover:bg-red-500 text-white text-[10px] font-black uppercase tracking-widest px-3 py-2 rounded-lg shadow-[0_0_15px_rgba(220,38,38,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center gap-1 mr-1",children:[l.jsx(_3,{size:12})," Pay Fine"]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>H(D),className:"text-zinc-600 hover:text-life-gold transition-colors p-1",children:l.jsx(xT,{size:12})}),l.jsx("button",{onClick:()=>e.deleteLaw(D.id),className:"text-zinc-600 hover:text-red-500 transition-colors p-1",children:l.jsx(dt,{size:12})})]})]})]},D.id)),n.length===0&&l.jsx("div",{className:"text-center py-8 border-2 border-dashed border-red-900/20 rounded-xl bg-red-950/10",children:l.jsx("p",{className:"text-xs text-red-800/50 font-bold uppercase",children:"No Laws Enacted"})})]}),l.jsx("div",{className:"border-t border-red-900/20 pt-6",children:m?l.jsxs("form",{onSubmit:M,className:"bg-black/40 border border-red-900/30 p-4 rounded-xl space-y-4 animate-in slide-in-from-bottom-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Offense Name"}),l.jsx("input",{type:"text",value:i,onChange:D=>r(D.target.value),placeholder:"e.g. Ate Sugar, Missed Prayer...",className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500",autoFocus:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Penalty Type"}),l.jsxs("div",{className:"flex bg-[#0a0a0a] rounded-lg p-1 border border-red-900/30",children:[l.jsx("button",{type:"button",onClick:()=>a("honor"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="honor"?"bg-indigo-500 text-white":"text-zinc-500"}`,title:"Honor",children:l.jsx(il,{size:12,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>a("gold"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="gold"?"bg-life-gold text-black":"text-zinc-500"}`,title:"Gold",children:l.jsx(ii,{size:12,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>a("xp"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="xp"?"bg-blue-500 text-white":"text-zinc-500"}`,title:"XP",children:l.jsx(bt,{size:12,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>a("stat"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="stat"?"bg-purple-500 text-white":"text-zinc-500"}`,title:"Stat",children:l.jsx(Qt,{size:12,className:"mx-auto"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Cost Value"}),l.jsx("input",{type:"number",value:u,onChange:D=>f(Number(D.target.value)),className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500 text-center font-mono"})]})]}),s==="stat"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Target Attribute"}),l.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:Object.values(ee).map(D=>l.jsx("button",{type:"button",onClick:()=>p(D),className:`px-3 py-1.5 rounded border text-[9px] font-bold transition-all ${d===D?"bg-red-900/50 border-red-500 text-white":"border-zinc-800 text-zinc-500"}`,style:{color:d===D?xt[D]:void 0,borderColor:d===D?xt[D]:void 0},children:D},D))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 py-2 rounded-lg border border-zinc-800 text-zinc-500 text-[10px] font-bold uppercase hover:bg-zinc-900",children:"Cancel"}),l.jsx("button",{type:"submit",className:"flex-1 py-2 rounded-lg bg-red-600 text-white text-[10px] font-bold uppercase hover:bg-red-500 shadow-[0_0_10px_rgba(220,38,38,0.3)]",children:"Confirm Law"})]})]}):l.jsxs("button",{onClick:()=>y(!0),className:"w-full py-3 border border-dashed border-red-900/40 text-red-500/70 rounded-xl flex items-center justify-center gap-2 text-xs font-bold uppercase hover:bg-red-950/20 hover:text-red-400 hover:border-red-500/50 transition-all",children:[l.jsx(wn,{size:14})," Enact New Law"]})})]})},SJ=()=>{const{state:t,dispatch:e}=De(),{taskState:n,taskDispatch:i}=Oi(),{raidState:r,raidDispatch:s}=ls(),{campaignState:a}=md(),{tasks:u,categories:f}=n,{raids:d}=r,{campaign:p}=a,{showHighlights:m}=t.user.preferences,{tasksViewMode:y}=t.ui,[b,S]=C.useState(!1),[N,E]=C.useState(!1),[R,U]=C.useState(!1),[j,B]=C.useState(!1),[O,P]=C.useState(!0),[I,A]=C.useState(new Set),[M,H]=C.useState(new Set),[F,D]=C.useState(""),[z,$]=C.useState(!1),[Y,W]=C.useState(null),[X,oe]=C.useState(""),ve=d.filter(we=>we.status==="active").map(we=>{const Ue=we.steps.find(Ke=>!Ke.isCompleted&&!Ke.isLocked&&!Ke.isArchived);return Ue?{raid:we,step:Ue}:null}).filter(Boolean);d.flatMap(we=>we.steps.filter(Ue=>Ue.isArchived).map(Ue=>({raid:we,step:Ue})));const Ee=t.ui.debugDate?new Date(t.ui.debugDate):new Date;Ee.setHours(0,0,0,0);let K=null,te=null;if(p.isActive&&p.startDate){const we=new Date(p.startDate);we.setHours(0,0,0,0);const Ue=Math.max(0,p.currentWeek-1);K=new Date(we),K.setDate(we.getDate()+Ue*7),te=new Date(K),te.setDate(K.getDate()+6),te.setHours(23,59,59,999)}const ge=[],Z=[],he=[],Ne=[],pe=[];u.forEach(we=>{if(we.isArchived){pe.push(we);return}if(we.isCompleted){Ne.push(we);return}if(we.isCampaign&&p.isActive){const{timeCode:$t}=j3(we.title);if($t&&$t.week>p.currentWeek)return}const Ue=we.scheduledTime||we.deadline?new Date(we.scheduledTime||we.deadline):null;Ue&&Ue.setHours(0,0,0,0);const Ke=Ue&&Ue.getTime()>Ee.getTime();let Mr=!1;we.isCampaign&&K&&te&&Ue&&Ue.getTime()>=K.getTime()&&Ue.getTime()<=te.getTime()&&(Mr=!0),Mr?he.push(we):Ke?we.isCampaign||Z.push(we):ge.push(we)});const ue=we=>{we.preventDefault(),F.trim()&&(i.addCategory(F),D(""),$(!1))},re=we=>{X.trim()&&(i.renameCategory(we,X),W(null))},Re=(we,Ue)=>e.setModal("itemDetails",{itemId:we,parentId:Ue,type:"raid_step"}),$e=we=>A(Ue=>{const Ke=new Set(Ue);return Ke.has(we)?Ke.delete(we):Ke.add(we),Ke}),Se=we=>H(Ue=>{const Ke=new Set(Ue);return Ke.has(we)?Ke.delete(we):Ke.add(we),Ke}),Bt=we=>{u.some(Ke=>Ke.categoryId===we)?e.setModal("confirmation",{title:"Delete Section?",message:"Items will be moved to Uncategorized.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>i.deleteCategory(we)}):i.deleteCategory(we)},Xe=we=>{const Ue=u.find(Ke=>Ke.id===we);Ue&&(!Ue.isCompleted&&!Ue.isArchived?e.setModal("confirmation",{title:"Abort Mission?",message:"Abandoning incurs a penalty.",confirmText:"Abort",isDangerous:!0,onConfirm:()=>i.deleteTask(we)}):e.setModal("confirmation",{title:"Delete Log?",message:"Permanently remove entry.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>i.deleteTask(we)}))};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"flex items-end justify-between px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase",children:y==="missions"?"ACTIVE OPS":"THE CODEX"}),l.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:y==="missions"?`${ge.length} Missions Pending`:"Strict Liability Protocol"})]}),l.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center ${y==="codex"?"border-red-500 text-red-500 bg-red-950/30":"border-life-gold text-life-gold bg-life-gold/10"}`,children:y==="missions"?l.jsx("div",{className:"w-5 h-5 rounded-full bg-life-gold/80",style:{opacity:u.length>0?Ne.length/u.length:0}}):l.jsx(Uy,{size:16})})]})}),y==="codex"?l.jsx(wJ,{}):l.jsxs(l.Fragment,{children:[m&&ve.length>0&&l.jsx(bJ,{raidOperations:ve,expandedNotes:I,expandedSubtasks:M,toggleNotes:$e,toggleSubtasksView:Se,raidDispatch:s,openRaidStepDetails:Re}),he.length>0&&l.jsxs("div",{className:"mb-4 animate-in slide-in-from-bottom-2",children:[l.jsxs("button",{onClick:()=>P(!O),className:"w-full flex items-center justify-between p-3 rounded-xl border bg-indigo-950/20 border-indigo-500/20 hover:bg-indigo-900/30 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ir,{size:16,className:"text-indigo-400 group-hover:scale-110 transition-transform"}),l.jsx("div",{className:"text-left",children:l.jsxs("span",{className:"text-xs font-bold text-indigo-300 uppercase tracking-widest flex items-center gap-2",children:["Week ",p.currentWeek," Objectives"]})})]}),l.jsx("div",{className:"text-indigo-400/50",children:O?l.jsx(Zr,{size:16}):l.jsx(Pi,{size:16})})]}),O&&l.jsx("div",{className:"mt-2 pl-2 border-l-2 border-indigo-500/10 space-y-2",children:he.map(we=>l.jsx(gu,{task:we,onToggle:i.toggleTask,onDelete:Xe},we.id))})]}),l.jsx("div",{className:"mb-4 flex justify-end",children:z?l.jsxs("form",{onSubmit:ue,className:"flex gap-2 animate-in fade-in",children:[l.jsx("input",{type:"text",value:F,onChange:we=>D(we.target.value),placeholder:"Section Title...",autoFocus:!0,className:"bg-life-black border border-zinc-800 rounded-lg px-3 py-1 text-xs text-life-text focus:border-life-gold outline-none"}),l.jsx("button",{type:"submit",className:"text-life-gold hover:bg-life-gold/10 p-1 rounded",children:l.jsx(wn,{size:16})}),l.jsx("button",{type:"button",onClick:()=>$(!1),className:"text-life-muted hover:text-white p-1",children:l.jsx(wn,{size:16,className:"rotate-45"})})]}):l.jsxs("button",{onClick:()=>$(!0),className:"text-[10px] uppercase font-bold text-life-muted hover:text-life-gold flex items-center gap-1 transition-colors",children:[l.jsx(b3,{size:14})," Add Section"]})}),l.jsxs("div",{className:"space-y-4 mb-4",children:[f.map(we=>{const Ue=ge.filter(Ke=>Ke.categoryId===we.id);return l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 group relative",children:[Y===we.id?l.jsx("div",{className:"flex gap-2 w-full",children:l.jsx("input",{type:"text",value:X,onChange:Ke=>oe(Ke.target.value),className:"bg-life-black border border-zinc-800 rounded px-2 py-0.5 text-xs text-life-text w-full focus:border-life-gold outline-none",autoFocus:!0,onBlur:()=>re(we.id),onKeyDown:Ke=>Ke.key==="Enter"&&re(we.id)})}):l.jsxs("button",{onClick:()=>i.toggleCategory(we.id),className:"flex items-center gap-2 text-life-muted hover:text-life-text transition-colors flex-1 text-left py-1",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold/80",children:we.isCollapsed?l.jsx(xi,{size:12}):l.jsx(Pi,{size:12})}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:we.title}),l.jsx("span",{className:"text-[9px] bg-life-muted/10 px-1.5 rounded-full text-life-muted",children:Ue.length})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),W(we.id),oe(we.title)},className:"p-2 text-life-muted hover:text-white hover:bg-life-muted/10 rounded cursor-pointer",children:l.jsx(xT,{size:14})}),l.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),Bt(we.id)},className:"p-2 text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded cursor-pointer",children:l.jsx(k3,{size:14})})]})]}),!we.isCollapsed&&l.jsxs("div",{className:"space-y-1 pl-1",children:[Ue.map(Ke=>l.jsx(gu,{task:Ke,onToggle:i.toggleTask,onDelete:Xe},Ke.id)),Ue.length===0&&l.jsx("div",{className:"text-[10px] text-life-muted/40 italic pl-2",children:"No active missions in section."})]})]},we.id)}),ge.filter(we=>!we.categoryId).length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2 text-life-muted/50 px-1",children:l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"General / Uncategorized"})}),l.jsx("div",{className:"space-y-1",children:ge.filter(we=>!we.categoryId).map(we=>l.jsx(gu,{task:we,onToggle:i.toggleTask,onDelete:Xe},we.id))})]}),ge.length===0&&ve.length===0&&he.length===0&&l.jsx("div",{className:"py-8 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/50",children:l.jsx("p",{className:"text-life-muted text-sm font-medium",children:"All active missions cleared."})})]}),Z.length>0&&l.jsxs("div",{className:"mb-6 animate-in slide-in-from-bottom-2",children:[l.jsxs("button",{onClick:()=>B(!j),className:"w-full flex items-center justify-between p-3 rounded-xl border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(vT,{size:16,className:"text-life-muted group-hover:text-life-text transition-colors"}),l.jsx("div",{className:"text-left",children:l.jsxs("span",{className:"text-xs font-bold text-life-muted group-hover:text-life-text uppercase tracking-widest transition-colors",children:["Future / Sleeping (",Z.length,")"]})})]}),l.jsx("div",{className:"text-life-muted/50",children:j?l.jsx(Zr,{size:16}):l.jsx(Pi,{size:16})})]}),j&&l.jsx("div",{className:"mt-2 pl-2 border-l border-zinc-800 space-y-2 opacity-80",children:Z.map(we=>l.jsx("div",{className:"scale-95 origin-top-left",children:l.jsx(gu,{task:we,onToggle:i.toggleTask,onDelete:Xe})},we.id))})]}),pe.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("button",{onClick:()=>E(!N),className:"w-full flex items-center justify-between p-2 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-gold",children:[l.jsx(Sh,{size:14}),l.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:["Mission Backlog (",pe.length,")"]})]}),N?l.jsx(Zr,{size:14,className:"text-life-muted"}):l.jsx(Pi,{size:14,className:"text-life-muted"})]}),N&&l.jsxs("div",{className:"space-y-2 mt-2 pl-2 border-l border-zinc-800",children:[pe.map(we=>l.jsx("div",{className:"opacity-70 grayscale hover:grayscale-0 transition-all",children:l.jsx(gu,{task:we,onToggle:()=>i.restoreTask(we.id),onDelete:Xe})},we.id)),l.jsx("div",{className:"text-center py-1 text-[9px] text-life-muted",children:"Click Checkbox to Restore  Trash to Delete Permanently"})]})]}),Ne.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("button",{onClick:()=>U(!R),className:"w-full flex items-center justify-between p-2 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-easy",children:[l.jsx(NY,{size:14}),l.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:["Completed Log (",Ne.length,")"]})]}),R?l.jsx(Zr,{size:14,className:"text-life-muted"}):l.jsx(Pi,{size:14,className:"text-life-muted"})]}),R&&l.jsx("div",{className:"space-y-1 mt-2 pl-2 border-l border-zinc-800 opacity-60 hover:opacity-100 transition-opacity animate-in slide-in-from-top-1",children:Ne.map(we=>l.jsx(gu,{task:we,onToggle:i.toggleTask,onDelete:Xe},we.id))})]})]})]})},e1=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Qt,{size:e})}},Df=({habit:t,onProcess:e,onDelete:n})=>{const{habitState:i,habitDispatch:r}=Li(),{dispatch:s,state:a}=De(),{skillState:u}=Sn(),{categories:f}=i,[d,p]=C.useState(!1),m=mT(t.streak),y=t.skillId?u.skills.find(Y=>Y.id===t.skillId):null,b=t.status==="completed",S=t.status==="failed",N=t.status==="pending",E=Ju(t.difficulty,a.user.currentMode),R=t.dailyProgress||0,U=t.dailyTarget||1,j=Math.min(100,R/U*100),B=t.subtasks||[],O=B.filter(Y=>Y.isCompleted).length,P=B.length,I=P>0?O/P*100:0;let A="";b?A="border-life-easy bg-life-easy/5":S?A="border-life-hard bg-life-hard/5":t.shieldUsed?A="border-life-diamond/40 bg-life-diamond/5":A=`${Wi[t.difficulty]} border-l-[6px]`;const M=Y=>{const W=Y.target.value;r.moveHabit(t.id,W||void 0)},H=Y=>{Y.stopPropagation(),s.setModal("itemDetails",{itemId:t.id,type:"habit"})},F=Y=>{Y.stopPropagation(),r.setActiveHabit(t.id)},D=Y=>{Y.stopPropagation(),n(t.id)},z=Y=>{Y.stopPropagation(),s.startFocusSession(t.id,t.durationMinutes||25,"habit")},$=Array.from({length:7}).map((Y,W)=>{const X=new Date;X.setDate(X.getDate()-(6-W));const oe=X.toISOString().split("T")[0],ve=t.history.some(te=>te.startsWith(oe)),Ee=W===6;let K="bg-life-muted/10";return ve?K="bg-life-easy":Ee&&(b?K="bg-life-easy":S?K="bg-life-hard":K="bg-life-muted/30 border border-zinc-800"),{isoDate:oe,statusColor:K,isToday:Ee}});return l.jsxs("div",{onClick:()=>p(!d),className:`
        relative overflow-hidden mb-3 rounded-xl border bg-life-paper transition-all duration-300 group cursor-pointer
        ${A}
        ${N?"hover:bg-white/5 hover:scale-[1.01]":""}
      `,children:[l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/50",children:l.jsx("div",{className:`h-full transition-all duration-700 ease-out ${b?"bg-life-easy":S?"bg-life-hard":t.shieldUsed?"bg-life-diamond":"bg-life-gold"}`,style:{width:`${m.progress}%`,opacity:.5}})}),U>1&&N&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-full pointer-events-none",children:l.jsx("div",{className:"h-full bg-life-easy/10 transition-all duration-300",style:{width:`${j}%`}})}),P>0&&N&&l.jsx("div",{className:"absolute bottom-1 left-0 right-0 h-0.5 bg-life-muted/10",children:l.jsx("div",{className:"h-full bg-life-gold transition-all duration-500",style:{width:`${I}%`}})}),l.jsxs("div",{className:"flex items-center justify-between p-3 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 overflow-hidden",children:[l.jsxs("div",{className:"relative shrink-0",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors duration-300 bg-life-black
                    ${b?"border-life-easy text-life-easy":S?"border-life-hard text-life-hard":t.shieldUsed?"border-life-diamond text-life-diamond shadow-[0_0_10px_rgba(96,165,250,0.3)]":"border-zinc-800 text-life-muted"}`,children:t.shieldUsed&&N?l.jsx(is,{size:16}):S?l.jsx(dt,{size:16}):b?l.jsx(_t,{size:16}):l.jsx(e1,{stat:t.stat,size:16})}),l.jsxs("div",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 px-1 py-px rounded text-[7px] font-black uppercase tracking-tighter border bg-life-black whitespace-nowrap ${m.phaseColor}`,children:["LVL ",m.level]})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("h3",{className:`font-bold text-sm leading-tight truncate ${b?"text-life-easy":S?"text-life-hard":"text-life-text"}`,children:t.title}),t.isTimed&&l.jsxs("span",{className:"text-[9px] flex items-center gap-0.5 text-life-muted bg-life-muted/10 px-1.5 py-0.5 rounded",children:[l.jsx(Jt,{size:8})," ",t.durationMinutes,"m"]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsxs("span",{className:"text-[9px] text-life-muted font-mono flex items-center gap-0.5",children:[l.jsx(hi,{size:8,className:t.streak>0?"text-life-gold":"text-life-muted"})," ",t.streak]}),l.jsxs("div",{className:"flex items-center gap-1",children:[y&&y.relatedStats&&y.relatedStats.length>0?y.relatedStats.map(Y=>l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-zinc-800 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:xt[Y],borderColor:`${xt[Y]}40`},children:[l.jsx(e1,{stat:Y,size:8})," ",Y]},Y)):l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-zinc-800 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:xt[t.stat],borderColor:`${xt[t.stat]}40`},children:[l.jsx(e1,{stat:t.stat,size:8})," ",t.stat]}),N&&l.jsxs("span",{className:"text-[8px] font-mono font-bold text-life-muted bg-life-black px-1.5 py-0.5 rounded border border-zinc-800",children:["+",E.xp," XP"]}),y&&l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-life-gold/30 bg-life-gold/5 text-life-gold flex items-center gap-1 uppercase tracking-wider",children:[l.jsx(_n,{size:8})," ",y.title]})]}),l.jsx("div",{className:"flex items-center gap-0.5",children:$.map((Y,W)=>l.jsx("div",{className:`w-1 h-1 rounded-full ${Y.statusColor} ${Y.isToday&&N?"animate-pulse":""}`,title:Y.isoDate},W))})]})]})]}),l.jsx("div",{className:"flex flex-col items-end gap-1.5 shrink-0 ml-2",children:l.jsx("div",{className:"flex items-center gap-2",children:N?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:Y=>{Y.stopPropagation(),e(t.id,"failed")},className:"w-8 h-8 rounded-lg border border-zinc-800 hover:border-life-hard hover:bg-life-hard/10 text-life-muted hover:text-life-hard flex items-center justify-center transition-all active:scale-95 bg-life-black",title:"Fail",children:l.jsx(dt,{size:16,strokeWidth:3})}),l.jsxs("button",{onClick:Y=>{Y.stopPropagation(),e(t.id,"completed")},className:"w-8 h-8 rounded-lg border border-zinc-800 hover:border-life-easy hover:bg-life-easy/10 text-life-muted hover:text-life-easy flex items-center justify-center transition-all active:scale-95 shadow-sm bg-life-black relative overflow-hidden",title:U>1?`Repetition ${R+1} of ${U}`:"Complete",children:[U>1?l.jsxs("div",{className:"flex flex-col items-center leading-none z-10",children:[l.jsxs("span",{className:`text-[10px] font-black ${R>0?"text-life-easy":""}`,children:[R,"/",U]}),l.jsx("span",{className:"text-[6px] uppercase font-bold text-life-muted/70",children:"Reps"})]}):l.jsx(_t,{size:18,strokeWidth:3}),U>1&&l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-life-muted/20",children:l.jsx("div",{className:"h-full bg-life-easy transition-all duration-300",style:{width:`${j}%`}})})]})]}):l.jsx("div",{className:`h-8 px-3 flex items-center justify-center rounded-lg border text-[10px] font-black uppercase tracking-wider ${b?"bg-life-easy/10 border-life-easy text-life-easy":"bg-life-hard/10 border-life-hard text-life-hard"}`,children:b?"DONE":"MISS"})})})]}),d&&l.jsxs("div",{className:"px-3 pb-3 animate-in slide-in-from-top-2 border-t border-life-muted/10 pt-2",children:[l.jsx("div",{className:"flex justify-end mb-3",children:l.jsxs("div",{className:"flex items-center gap-1 bg-life-black/50 rounded-lg p-0.5 border border-life-muted/10",children:[l.jsx("button",{onClick:F,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-gold hover:bg-life-gold/10 rounded transition-colors",title:"View Progress Ladder",children:l.jsx(Vy,{size:12})}),t.isTimed&&N&&l.jsx("button",{onClick:z,className:"w-6 h-6 flex items-center justify-center text-life-gold hover:bg-life-gold/10 rounded transition-colors",title:"Enter Focus Citadel",children:l.jsx(zy,{size:12,fill:"currentColor"})}),l.jsx("button",{onClick:H,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/10 rounded transition-colors",title:"Details & Edit",children:l.jsx(Eh,{size:12})}),l.jsxs("div",{className:"relative group/move w-6 h-6 flex items-center justify-center",onClick:Y=>Y.stopPropagation(),children:[l.jsx("button",{className:"text-life-muted hover:text-life-gold transition-colors",children:l.jsx(yT,{size:12})}),l.jsxs("select",{onChange:M,value:t.categoryId||"",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",children:[l.jsx("option",{value:"",children:"(Uncat)"}),f.map(Y=>l.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]}),l.jsx("button",{onClick:D,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded transition-colors",title:"Delete",children:l.jsx(ei,{size:12})})]})}),B.length>0&&l.jsx("div",{className:"space-y-1",children:B.map(Y=>l.jsxs("div",{onClick:W=>{W.stopPropagation(),r.toggleSubtask(t.id,Y.id)},className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-life-muted/10 p-1.5 rounded transition-colors group/sub",children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${Y.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover/sub:border-life-gold"}`,children:l.jsx(_t,{size:12,strokeWidth:3})}),l.jsx("span",{className:Y.isCompleted?"text-life-muted line-through":"text-life-text",children:Y.title})]},Y.id))})]})]})},TJ=["S","M","T","W","T","F","S"],EJ=()=>{const{habitState:t}=Li(),{taskState:e,taskDispatch:n}=Oi(),{dispatch:i}=De(),[r,s]=C.useState(new Date),[a,u]=C.useState(new Date),f=r.getFullYear(),d=r.getMonth(),p=new Date(f,d+1,0).getDate(),m=new Date(f,d,1).getDay(),y=()=>{s(new Date(f,d-1,1)),Ae("click",!0)},b=()=>{s(new Date(f,d+1,1)),Ae("click",!0)},S=j=>{const B=new Date(f,d,j);u(B),Ae("click",!0)},N=j=>{const B=j.toISOString(),O=B.split("T")[0],P=t.habits.filter(A=>{const M=new Date(A.createdAt);return j<M&&j.getDate()!==M.getDate()?!1:Xu(A,B)}).map(A=>({id:A.id,title:A.title,type:"habit",isCompleted:A.history.some(M=>M.startsWith(O)),stat:A.stat})),I=e.tasks.filter(A=>{if(!A.deadline&&!A.scheduledTime)return!1;const M=A.scheduledTime?new Date(A.scheduledTime):new Date(A.deadline);return M.getDate()===j.getDate()&&M.getMonth()===j.getMonth()&&M.getFullYear()===j.getFullYear()}).map(A=>({id:A.id,title:A.title,type:"task",isCompleted:A.isCompleted,stat:A.stat}));return[...P,...I]},E=C.useMemo(()=>N(a),[a,t.habits,e.tasks]),R=j=>{const B=new Date(f,d,j);return N(B).length>0},U=()=>{const B=new Date(a.getTime()-a.getTimezoneOffset()*6e4).toISOString().split("T")[0];i.setModal("addTask",{defaultType:"mission",date:B,origin:"calendar"})};return l.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right duration-500",children:[l.jsxs("div",{className:"bg-life-paper border border-zinc-800 rounded-2xl p-4 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:y,className:"p-2 hover:bg-life-muted/10 rounded-full text-life-muted hover:text-white transition-colors",children:l.jsx(My,{size:18})}),l.jsx("h3",{className:"text-sm font-black text-life-text uppercase tracking-widest",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:b,className:"p-2 hover:bg-life-muted/10 rounded-full text-life-muted hover:text-white transition-colors",children:l.jsx(xi,{size:18})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:TJ.map((j,B)=>l.jsx("div",{className:"text-center text-[9px] font-bold text-life-muted/50 py-1",children:j},B))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:m}).map((j,B)=>l.jsx("div",{className:"aspect-square"},`empty-${B}`)),Array.from({length:p}).map((j,B)=>{const O=B+1,P=new Date(f,d,O),I=P.toDateString()===a.toDateString(),A=P.toDateString()===new Date().toDateString(),M=R(O);return l.jsxs("button",{onClick:()=>S(O),className:`
                                    aspect-square rounded-lg flex flex-col items-center justify-center relative transition-all duration-200
                                    ${I?"bg-life-gold text-life-black font-black shadow-[0_0_15px_rgba(251,191,36,0.4)] scale-110 z-10":"hover:bg-life-muted/10 text-life-text"}
                                    ${A&&!I?"border border-life-gold/50 text-life-gold":""}
                                `,children:[l.jsx("span",{className:"text-xs",children:O}),M&&l.jsx("div",{className:`w-1 h-1 rounded-full mt-1 ${I?"bg-black":"bg-life-muted"}`})]},O)})]})]}),l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-2xl p-0 overflow-hidden shadow-lg min-h-[200px] flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-zinc-800 flex justify-between items-center bg-life-paper/50",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-black uppercase text-life-muted tracking-widest",children:"Tactical Log"}),l.jsx("p",{className:"text-sm font-bold text-life-text mt-0.5",children:a.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),l.jsx("button",{onClick:U,className:"bg-life-gold/10 hover:bg-life-gold/20 text-life-gold border border-life-gold/30 p-2 rounded-lg transition-all",title:"Add Mission for this Day",children:l.jsx(wn,{size:16})})]}),l.jsx("div",{className:"p-2 flex-1 overflow-y-auto max-h-[300px]",children:E.length>0?l.jsx("div",{className:"space-y-1",children:E.map((j,B)=>l.jsxs("div",{className:`
                                        flex items-center gap-3 p-3 rounded-xl border transition-all
                                        ${j.isCompleted?"bg-life-black border-zinc-800 opacity-50":"bg-life-paper border-zinc-800 hover:border-life-gold/30"}
                                    `,children:[l.jsx("div",{className:`
                                        w-8 h-8 rounded-full flex items-center justify-center border-2
                                        ${j.isCompleted?"bg-life-muted border-life-muted text-life-black":j.type==="habit"?"border-life-gold/30 text-life-gold bg-life-gold/5":"border-life-muted/30 text-life-muted"}
                                    `,children:j.type==="habit"?l.jsx(Ir,{size:14}):l.jsx(Sc,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`text-xs font-bold ${j.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:j.title}),l.jsxs("div",{className:"text-[9px] text-life-muted uppercase tracking-wider flex items-center gap-1",children:[j.type==="habit"?"Protocol":"Mission","  ",j.stat]})]}),j.type==="task"&&!j.isCompleted&&l.jsx("button",{onClick:()=>n.toggleTask(j.id),className:"w-6 h-6 rounded border border-life-muted/30 hover:border-life-gold hover:text-life-gold flex items-center justify-center transition-colors",children:l.jsx(IY,{size:14})}),j.isCompleted&&l.jsx(Ws,{size:14,className:"text-life-muted"})]},`${j.type}-${j.id}-${B}`))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-life-muted/40",children:[l.jsx(er,{size:32,className:"mb-2 opacity-50"}),l.jsx("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"No orders for this sector"})]})})]})]})},NJ=()=>{const{habitState:t,habitDispatch:e}=Li(),{state:n,dispatch:i}=De(),{habits:r,categories:s}=t,a=n.ui.habitsViewMode,[u,f]=C.useState(!1),[d,p]=C.useState(()=>localStorage.getItem("LIFE_OS_LOG_OPEN")==="true");C.useEffect(()=>{localStorage.setItem("LIFE_OS_LOG_OPEN",String(d))},[d]);const[m,y]=C.useState(""),[b,S]=C.useState(!1),[N,E]=C.useState(null),[R,U]=C.useState(""),j=[],B=[],O=[];r.forEach($=>{if($.status!=="pending"){O.push($);return}Xu($)?j.push($):B.push($)});const P=new Date;P.setDate(P.getDate()-1);const I=P.toISOString(),A=I.split("T")[0],M=r.filter($=>{const Y=new Date($.createdAt);return Y>P&&Y.getDate()!==P.getDate()?!1:Xu($,I)}).map($=>{const W=$.history.some(X=>X.startsWith(A))?"completed":"failed";return{...$,id:`log_yesterday_${$.id}`,status:W,shieldUsed:!1}}),H=$=>{$.preventDefault(),m.trim()&&(e.addCategory(m),y(""),S(!1))},F=$=>{R.trim()&&(e.renameCategory($,R),E(null))},D=$=>{r.some(W=>W.categoryId===$)?i.setModal("confirmation",{title:"Delete Section?",message:"This section contains protocols. They will be moved to Uncategorized.",confirmText:"Delete Section",isDangerous:!0,onConfirm:()=>e.deleteCategory($)}):e.deleteCategory($)},z=$=>{i.setModal("confirmation",{title:"Delete Protocol?",message:"This action is permanent.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>e.deleteHabit($)})};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"flex items-end justify-between mb-6 px-1",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2 uppercase",children:a==="calendar"?"Tactical Planner":"Habit Engine"}),l.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:a==="calendar"?"Long-term Strategy":`Execution Mode  ${j.length} Remaining`})]})}),a==="calendar"?l.jsx(EJ,{}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 flex justify-end",children:b?l.jsxs("form",{onSubmit:H,className:"flex gap-2 animate-in fade-in",children:[l.jsx("input",{type:"text",value:m,onChange:$=>y($.target.value),placeholder:"Section Title...",autoFocus:!0,className:"bg-life-black border border-zinc-800 rounded-lg px-3 py-1 text-xs text-life-text focus:border-life-gold outline-none"}),l.jsx("button",{type:"submit",className:"text-life-gold hover:bg-life-gold/10 p-1 rounded",children:l.jsx(wn,{size:16})}),l.jsx("button",{type:"button",onClick:()=>S(!1),className:"text-life-muted hover:text-white p-1",children:l.jsx(wn,{size:16,className:"rotate-45"})})]}):l.jsxs("button",{onClick:()=>S(!0),className:"text-[10px] uppercase font-bold text-life-muted hover:text-life-gold flex items-center gap-1 transition-colors",children:[l.jsx(b3,{size:14})," Add Section"]})}),l.jsxs("div",{className:"space-y-4 mb-8",children:[s.map($=>{const Y=j.filter(W=>W.categoryId===$.id);return l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 group relative",children:[N===$.id?l.jsx("div",{className:"flex gap-2 w-full",children:l.jsx("input",{type:"text",value:R,onChange:W=>U(W.target.value),className:"bg-life-black border border-zinc-800 rounded px-2 py-0.5 text-xs text-life-text w-full focus:border-life-gold outline-none",autoFocus:!0,onBlur:()=>F($.id),onKeyDown:W=>W.key==="Enter"&&F($.id)})}):l.jsxs("button",{onClick:()=>e.toggleCategory($.id),className:"flex items-center gap-2 text-life-muted hover:text-life-text transition-colors flex-1 text-left py-1",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold/80",children:$.isCollapsed?l.jsx(xi,{size:12}):l.jsx(Pi,{size:12})}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:$.title}),l.jsx("span",{className:"text-[9px] bg-life-muted/10 px-1.5 rounded-full text-life-muted",children:Y.length})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:W=>{W.stopPropagation(),E($.id),U($.title)},className:"p-2 text-life-muted hover:text-white hover:bg-life-muted/10 rounded cursor-pointer",title:"Edit Name",children:l.jsx(xT,{size:14})}),l.jsx("button",{onClick:W=>{W.stopPropagation(),D($.id)},className:"p-2 text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded cursor-pointer",title:"Delete Section",children:l.jsx(k3,{size:14})})]})]}),!$.isCollapsed&&l.jsxs("div",{className:"space-y-1 pl-1",children:[Y.map(W=>l.jsx(Df,{habit:W,onProcess:e.processHabit,onDelete:z},W.id)),Y.length===0&&l.jsx("div",{className:"text-[10px] text-life-muted/40 italic pl-2 py-1",children:"No active protocols in section."})]})]},$.id)}),j.filter($=>!$.categoryId).length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2 text-life-muted/50 px-1",children:l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"General / Uncategorized"})}),l.jsx("div",{className:"space-y-1",children:j.filter($=>!$.categoryId).map($=>l.jsx(Df,{habit:$,onProcess:e.processHabit,onDelete:z},$.id))})]}),j.length===0&&s.length===0&&l.jsxs("div",{className:"py-8 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/50",children:[l.jsx("p",{className:"text-life-muted text-sm font-medium",children:"All protocols executed."}),l.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1",children:"Check the Daily Log."})]})]}),(O.length>0||M.length>0)&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in mb-4",children:[l.jsxs("button",{onClick:()=>p(!d),className:"w-full flex items-center justify-between p-3 rounded-lg border border-zinc-800 bg-life-paper hover:bg-life-muted/5 transition-all mb-3 group shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Sh,{size:16,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsxs("span",{className:"text-xs font-bold text-life-text uppercase tracking-widest",children:["Activity Log (",O.length+M.length,")"]})]}),l.jsx("div",{className:"text-life-muted",children:d?l.jsx(Zr,{size:16}):l.jsx(Pi,{size:16})})]}),d&&l.jsxs("div",{className:"space-y-4 opacity-90 pb-4",children:[M.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 text-life-muted/60",children:[l.jsx(er,{size:12}),l.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Yesterday's Report"})]}),l.jsx("div",{className:"space-y-1",children:M.map($=>l.jsx("div",{className:"scale-95 origin-top opacity-80 hover:opacity-100 transition-opacity",children:l.jsx(Df,{habit:$,onProcess:()=>{},onDelete:()=>{}})},$.id))})]}),O.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 text-life-muted/60",children:[l.jsx(Jt,{size:12}),l.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Today's Activity"})]}),l.jsx("div",{className:"space-y-1",children:O.map($=>l.jsx("div",{className:"scale-95 origin-top",children:l.jsx(Df,{habit:$,onProcess:e.processHabit,onDelete:z})},$.id))})]})]})]}),B.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in",children:[l.jsxs("button",{onClick:()=>f(!u),className:"w-full flex items-center justify-between p-3 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all mb-3 group",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vT,{size:16,className:"text-life-muted group-hover:text-life-gold transition-colors"}),l.jsxs("span",{className:"text-xs font-bold text-life-muted uppercase tracking-widest",children:["Sleep Archive (",B.length,")"]})]}),l.jsx("div",{className:"text-life-muted",children:u?l.jsx(Zr,{size:16}):l.jsx(Pi,{size:16})})]}),u&&l.jsxs("div",{className:"space-y-1 opacity-70 hover:opacity-100 transition-opacity",children:[B.map($=>l.jsx("div",{className:"scale-95 origin-top",children:l.jsx(Df,{habit:$,onProcess:e.processHabit,onDelete:z})},$.id)),l.jsx("div",{className:"text-center py-2",children:l.jsx("p",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Recovery Mode  No Streak Penalty"})})]})]})]})]})},ng=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Qt,{size:e})}},t1=({raid:t,onToggleStep:e})=>{const{dispatch:n}=De(),[i,r]=C.useState(!1),{skillState:s}=Sn(),[a,u]=C.useState(!1),[f,d]=C.useState(new Set),p=t.skillId?s.skills.find(j=>j.id===t.skillId):null;let m=!1,y="";if(t.requirements){const j=s.skills.find(B=>B.id===t.requirements.skillId);j&&j.level<t.requirements.minLevel?(m=!0,y=`Rec: ${j.title} Lv.${t.requirements.minLevel}`):j||(m=!0,y=`Req: Lv.${t.requirements.minLevel}`)}const b=t.stats&&t.stats.length>0?t.stats[0]:ee.STR,S=xt[b],N=j=>{j.stopPropagation(),n.setModal("itemDetails",{itemId:t.id,type:"raid"})},E=(j,B)=>{j.stopPropagation(),n.setModal("itemDetails",{itemId:B,parentId:t.id,type:"raid_step"})},R=j=>{d(B=>{const O=new Set(B);return O.has(j)?O.delete(j):O.add(j),O})},U=j=>{j.stopPropagation();const B=t.steps.filter(P=>f.has(P.id));if(B.length===0)return;const O={context:"UPDATE_RAID_STEPS",raidId:t.id,raidTitle:t.title,selectedSteps:B.map(P=>({id:P.id,title:P.title,notes:P.notes,difficulty:P.difficulty,stat:P.stat})),instruction:'Update these steps with more details, better notes, or adjust difficulty/stats. CRITICAL: Preserve all IDs. Return valid JSON: { "raids": [{ "id": "...", "steps": [...] }] }'};navigator.clipboard.writeText(JSON.stringify(O,null,2)),n.addToast(`${f.size} Steps Copied for AI`,"info"),u(!1),d(new Set)};return l.jsxs("div",{className:`mb-4 bg-life-paper border rounded-xl overflow-hidden shadow-lg relative transition-all ${m?"border-orange-500/30":"border-zinc-800"}`,children:[l.jsxs("div",{onClick:()=>r(!i),className:"p-4 bg-life-paper relative cursor-pointer active:bg-life-muted/5 transition-colors group",children:[l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-life-muted/20",children:l.jsx("div",{className:"h-full transition-all duration-700 ease-out",style:{width:`${t.progress}%`,backgroundColor:S}})}),l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-12 h-12 rounded-lg border-2 flex flex-col items-center justify-center bg-life-black ${Wi[t.difficulty]}`,style:{borderColor:S},children:l.jsx("div",{className:"flex flex-wrap items-center justify-center gap-0.5 p-0.5",children:(t.stats||[]).slice(0,4).map(j=>l.jsx("div",{style:{color:xt[j]},children:l.jsx(ng,{stat:j,size:10})},j))})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("h3",{className:"font-bold text-base text-life-text leading-tight",children:t.title}),t.isCampaign&&l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-indigo-500/50 bg-indigo-500/10 text-indigo-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_5px_rgba(99,102,241,0.2)]",children:[l.jsx(Ir,{size:8})," G12"]}),p&&l.jsxs("span",{className:"text-[8px] border px-1.5 py-px rounded flex items-center gap-1 uppercase tracking-wider text-life-gold border-life-gold/30 bg-life-gold/10",children:[l.jsx(Sr,{size:8})," ",p.title]}),p&&p.relatedStats&&p.relatedStats.length>0?p.relatedStats.map(j=>l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-zinc-800 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:xt[j],borderColor:`${xt[j]}40`},children:[l.jsx(ng,{stat:j,size:8})," ",j]},j)):l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-zinc-800 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:S,borderColor:`${S}40`},children:[l.jsx(ng,{stat:b,size:8})," ",b]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-[10px] font-mono text-life-muted bg-life-muted/10 px-1.5 rounded",children:t.difficulty.toUpperCase()}),t.deadline&&l.jsxs("span",{className:"text-[10px] font-mono text-life-muted flex items-center gap-1",children:[l.jsx(er,{size:10})," ",new Date(t.deadline).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),m&&l.jsxs("span",{className:"text-[9px] font-bold text-orange-400 flex items-center gap-1 bg-orange-400/10 px-1.5 rounded border border-orange-400/20",children:[l.jsx(Bo,{size:10})," ",y]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-life-muted",children:[l.jsx("button",{onClick:j=>{j.stopPropagation(),u(!a),r(!0)},className:`p-1.5 rounded-full transition-all ${a?"bg-life-gold text-black":"hover:bg-life-muted/10 text-life-muted"}`,title:"Select Steps for AI Update",children:l.jsx(Tr,{size:16})}),l.jsx("button",{onClick:N,className:"p-1.5 rounded-full hover:bg-life-muted/10 opacity-0 group-hover:opacity-100 transition-all",children:l.jsx(Eh,{size:16})}),i?l.jsx(Zr,{size:20}):l.jsx(Pi,{size:20})]})]})]}),i&&l.jsxs("div",{className:"bg-black/20 border-t border-life-muted/10 p-2",children:[a&&l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 animate-in slide-in-from-top-2",children:[l.jsxs("span",{className:"text-[10px] font-bold text-life-gold uppercase tracking-widest",children:[f.size," Selected"]}),l.jsxs("button",{onClick:U,disabled:f.size===0,className:"flex items-center gap-1 bg-life-gold text-black px-3 py-1 rounded text-[10px] font-black uppercase hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(nr,{size:10})," Copy for AI"]})]}),l.jsx("div",{className:"space-y-1",children:t.steps.map(j=>{var A;const B=j.difficulty&&j.difficulty!==t.difficulty,O=j.stat&&j.stat!==b,P=f.has(j.id);let I=S;return B&&(j.difficulty==="easy"?I="#10b981":j.difficulty==="normal"?I="#3b82f6":j.difficulty==="hard"&&(I="#ef4444")),l.jsxs("div",{className:"group flex gap-2 items-center",children:[a&&l.jsx("button",{onClick:()=>R(j.id),className:`shrink-0 transition-all ${P?"text-life-gold":"text-life-muted/30 hover:text-life-muted"}`,children:P?l.jsx(Tr,{size:18}):l.jsx(pX,{size:18})}),l.jsx("div",{className:`
                                    w-full flex items-center justify-between p-3 rounded-lg text-left transition-all
                                    ${j.isCompleted?"bg-life-easy/5 text-life-muted line-through opacity-70":j.isLocked?"bg-transparent text-life-muted/30":"bg-life-paper hover:bg-life-muted/10 text-life-text border-l-2"}
                                `,style:{borderLeftColor:!j.isLocked&&!j.isCompleted?I:"transparent"},children:l.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>!a&&E({stopPropagation:()=>{}},j.id),children:[!a&&l.jsxs("button",{disabled:j.isLocked,onClick:M=>{M.stopPropagation(),e(t.id,j.id)},className:`
                                                w-5 h-5 rounded border flex items-center justify-center transition-all shrink-0
                                                ${j.isCompleted?"bg-life-easy border-life-easy text-life-black":j.isLocked?"border-zinc-800 bg-life-muted/5 cursor-not-allowed":"border-life-muted text-transparent hover:border-life-gold"}
                                            `,children:[j.isCompleted&&l.jsx(_t,{size:14,strokeWidth:3}),j.isLocked&&!j.isCompleted&&l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-life-muted/30"})]}),l.jsx("div",{className:"flex flex-col flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:"text-xs font-medium truncate",children:j.title}),B&&l.jsx("span",{className:`text-[7px] font-black px-1 rounded border uppercase tracking-tighter ${j.difficulty==="easy"?"border-life-easy text-life-easy bg-life-easy/5":j.difficulty==="normal"?"border-blue-500 text-blue-400 bg-blue-500/5":"border-life-hard text-life-hard bg-life-hard/5"}`,children:(A=j.difficulty)==null?void 0:A.substring(0,3)}),O&&l.jsxs("span",{className:"text-[7px] font-black px-1 rounded border border-zinc-800 bg-life-black flex items-center gap-0.5 uppercase tracking-tighter",style:{color:xt[j.stat],borderColor:`${xt[j.stat]}40`},children:[l.jsx(ng,{stat:j.stat,size:6})," ",j.stat]})]})}),!a&&l.jsx("button",{onClick:M=>E(M,j.id),className:"p-1 rounded-full text-life-muted hover:text-life-gold transition-colors",children:j.notes?l.jsx(ep,{size:12,className:"text-life-gold"}):l.jsx(Eh,{size:12})})]})})]},j.id)})})]})]})},CJ=({onClose:t})=>l.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-4 mb-6 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-indigo-900/20 rounded-lg text-indigo-400",children:l.jsx(Sr,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-wider",children:"Field Manual: Operations"}),l.jsx("p",{className:"text-[10px] text-life-muted",children:"Tactical Guide & AI Uplink"})]})]}),l.jsx("button",{onClick:t,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:16})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-start border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-life-gold font-black text-xs",children:"Structure"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Raid Anatomy"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-[10px] text-zinc-400 leading-relaxed",children:[l.jsx("span",{className:"text-white font-bold",children:"Raids"})," are multi-step projects. Each step is a tactical objective."]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[l.jsxs("div",{className:"bg-life-black p-1.5 rounded border border-zinc-800 text-[9px] text-zinc-500",children:[l.jsx("span",{className:"text-life-easy font-bold",children:"Easy:"})," +100 XP"]}),l.jsxs("div",{className:"bg-life-black p-1.5 rounded border border-zinc-800 text-[9px] text-zinc-500",children:[l.jsx("span",{className:"text-life-hard font-bold",children:"Hard:"})," +500 XP"]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-start border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-indigo-400 font-black text-xs",children:"AI Uplink"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Update Steps"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[10px] text-zinc-400 leading-relaxed",children:"You can ask AI to refine specific steps without rewriting the whole Raid."}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(Tr,{size:10})}),l.jsxs("span",{children:["1. Click ",l.jsx("span",{className:"text-life-gold font-bold",children:"Select Mode"})," on Raid Card."]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(Tr,{size:10})}),l.jsx("span",{children:"2. Select the steps you want to improve."})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(nr,{size:10})}),l.jsxs("span",{children:["3. Click ",l.jsx("span",{className:"text-life-gold font-bold",children:"Copy for AI"}),"."]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(bt,{size:10})}),l.jsxs("span",{children:["4. Paste into AI, then paste result into ",l.jsx("span",{className:"text-life-gold font-bold",children:"Data Uplink"}),"."]})]})]}),l.jsx("div",{className:"p-2 bg-indigo-900/10 border border-indigo-500/20 rounded text-[9px] text-indigo-300 italic",children:'"The system will intelligently merge the new details into your existing progress."'})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-purple-400 font-black text-xs",children:"Victory"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Completion"})]}),l.jsx("div",{className:"space-y-1",children:l.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Completing a Raid grants a massive ",l.jsx("span",{className:"text-life-gold font-bold",children:"5x Bonus"})," to XP and Gold."]})})]})]})]}),AJ=()=>{const{raidState:t,raidDispatch:e}=ls(),{raids:n}=t,[i,r]=C.useState(!1),[s,a]=C.useState(!1),[u,f]=C.useState(!1),d=n.filter(y=>y.status==="active"),p=n.filter(y=>y.status==="completed"),m=n.filter(y=>y.status==="archived");return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase",children:"Active Operations"}),l.jsx("button",{onClick:()=>f(!u),className:"text-life-muted hover:text-life-gold transition-colors p-1",title:"Field Manual",children:l.jsx(Sr,{size:16})})]}),l.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:[d.length," Strategic Objectives In-Progress"]})]}),l.jsx("div",{className:"text-life-hard opacity-50",children:l.jsx(bt,{size:24})})]}),u&&l.jsx(CJ,{onClose:()=>f(!1)}),l.jsx("div",{className:"space-y-4",children:d.length>0?d.map(y=>l.jsxs("div",{className:"relative group",children:[l.jsx(t1,{raid:y,onToggleStep:e.toggleRaidStep}),l.jsxs("div",{className:"absolute -right-2 -top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:()=>e.archiveRaid(y.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-text p-1.5 rounded-full shadow-sm hover:scale-110 transition-transform",title:"Archive Operation",children:l.jsx(Sh,{size:12})}),l.jsx("button",{onClick:()=>e.deleteRaid(y.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-hard p-1.5 rounded-full shadow-sm hover:scale-110 transition-transform",title:"Abort / Delete Operation",children:l.jsx(ei,{size:12})})]})]},y.id)):l.jsxs("div",{className:"py-12 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/30",children:[l.jsx("p",{className:"text-life-muted text-sm font-bold",children:"No Active Operations"}),l.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1 uppercase tracking-wider",children:"Initiate a new Raid via Command Line (+)."})]})}),m.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsxs("button",{onClick:()=>a(!s),className:"w-full flex items-center justify-between p-3 rounded-xl border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-life-muted/10 text-life-muted group-hover:text-life-text transition-colors",children:l.jsx(yT,{size:16})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-xs font-black text-life-muted uppercase tracking-widest group-hover:text-life-text transition-colors",children:"Declassified Ops (Archive)"}),l.jsxs("p",{className:"text-[9px] text-life-muted/60 uppercase tracking-wider",children:[m.length," Operations Stored"]})]})]}),l.jsx("div",{className:"text-life-muted/50",children:s?l.jsx(Zr,{size:18}):l.jsx(Pi,{size:18})})]}),s&&l.jsx("div",{className:"mt-4 space-y-4 animate-in slide-in-from-top-2",children:m.map(y=>l.jsxs("div",{className:"opacity-60 hover:opacity-100 transition-opacity grayscale relative group",children:[l.jsx(t1,{raid:y,onToggleStep:()=>{}}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 bg-life-black/80 backdrop-blur rounded-lg p-1 border border-zinc-800",children:[l.jsxs("button",{onClick:()=>e.restoreRaid(y.id),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-life-muted/20 text-[9px] font-bold text-life-gold uppercase",children:[l.jsx(FW,{size:10})," Restore"]}),l.jsx("div",{className:"w-px bg-life-muted/20"}),l.jsxs("button",{onClick:()=>e.deleteRaid(y.id),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-life-hard/20 text-[9px] font-bold text-life-hard uppercase",children:[l.jsx(ei,{size:10})," Delete"]})]})]},y.id))})]}),p.length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-life-muted/10",children:[l.jsxs("button",{onClick:()=>r(!i),className:"w-full flex items-center justify-between p-3 rounded-xl bg-life-gold/5 border border-life-gold/10 hover:bg-life-gold/10 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-life-gold/20 text-life-gold",children:l.jsx(Fy,{size:16})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-widest",children:"Victory Archive"}),l.jsxs("p",{className:"text-[9px] text-life-gold/60 uppercase tracking-wider",children:[p.length," Operations Conquered"]})]})]}),l.jsx("div",{className:"text-life-gold/50",children:i?l.jsx(Zr,{size:18}):l.jsx(Pi,{size:18})})]}),i&&l.jsx("div",{className:"mt-4 space-y-4 animate-in slide-in-from-top-2",children:p.map(y=>l.jsxs("div",{className:"opacity-70 hover:opacity-100 transition-opacity grayscale hover:grayscale-0 relative group",children:[l.jsx(t1,{raid:y,onToggleStep:e.toggleRaidStep}),l.jsxs("div",{className:"absolute -right-2 -top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:()=>e.archiveRaid(y.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-text p-1.5 rounded-full shadow-sm",title:"Move to Archive",children:l.jsx(Sh,{size:12})}),l.jsx("button",{onClick:()=>e.deleteRaid(y.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-hard p-1.5 rounded-full shadow-sm",title:"Delete Log",children:l.jsx(ei,{size:12})})]})]},y.id))})]})]})},U3=[{id:"item_shield",title:"Streak Shield",description:"Prevents your streak from resetting if you miss a day.",cost:1e3,type:"system",icon:"Shield",isInfinite:!0}],V3=C.createContext(void 0),kJ=t=>{const e=Array.isArray(t)?t:t.storeItems||[],n=new Set,i=[];for(const r of e)n.has(r.id)||(n.add(r.id),i.push(r));return{storeItems:i.length>0?i:U3}},IJ=({children:t})=>{const{state:e,dispatch:n}=De(),{user:i}=e,r=i.preferences.soundEnabled,[s,a]=fd("LIFE_OS_SHOP_DATA",{storeItems:U3},"shop_data",kJ),{storeItems:u}=s;C.useEffect(()=>{a(b=>{const S=new Set,N=[];for(const E of b.storeItems)S.has(E.id)||(S.add(E.id),N.push(E));return N.length!==b.storeItems.length?(console.log(" ShopContext: Removed duplicate items."),{...b,storeItems:N}):b})},[]);const f=b=>{const S=u.find(U=>U.id===b);if(!S)return!1;if(i.gold<S.cost)return Ae("error",r),n.addToast("Insufficient Funds","error"),!1;if(b==="item_shield"&&i.shields>=3)return n.addToast(" Max Shield Capacity (3) Reached","error"),Ae("error",r),!1;if((S.type==="system"||S.type==="artifact")&&!S.isInfinite&&i.inventory.includes(b))return n.addToast("Already Owned","error"),!1;const E={gold:i.gold-S.cost};if(b==="item_shield")E.shields=i.shields+1,n.addToast(`Shield Acquired! (${E.shields}/3)`,"info");else if(S.type==="redemption"){const{updatedLog:U,newAverage:j,redeemedDate:B}=qK(i.honorDailyLog,e.ui.debugDate);if(!B)return n.addToast("Honor is already perfect.","info"),!1;E.honorDailyLog=U,E.honor=j,n.addToast(`Honor Restored for ${B} (+100%)`,"level-up"),Ae("level-up",r)}else if(S.type==="system"&&!S.isInfinite)if(E.inventory=[...i.inventory,b],b==="item_theme_gold"){const U={id:"gold",name:"Midas Touch",colors:{"--color-life-black":"#1a1200","--color-life-paper":"#261a00","--color-life-gold":"#ffd700","--color-life-text":"#fffae6"}};n.addTheme(U),n.setTheme("gold"),n.addToast("Gold Theme Activated","success")}else if(b==="item_theme_cyberpunk"){const U={id:"cyberpunk",name:"Neon City",colors:{"--color-life-black":"#020617","--color-life-paper":"#0f172a","--color-life-gold":"#22d3ee","--color-life-text":"#e0f2fe"}};n.addTheme(U),n.setTheme("cyberpunk"),n.addToast("Cyberpunk Protocol Activated","level-up")}else n.addToast(`Acquired: ${S.title}`,"success");else S.type==="artifact"?(E.inventory=[...i.inventory,b],n.addToast(`Artifact Acquired: ${S.title}`,"success"),setTimeout(()=>n.addToast("Equip it in Profile to activate.","info"),1500)):S.id==="item_potion_xp"?(E.inventory=[...i.inventory,b],n.addToast("Potion stored in Inventory","success")):S.id==="item_battery"?(E.shields=3,n.addToast("Shields Fully Recharged!","level-up")):(E.inventory=[...i.inventory,b],n.addToast(`Voucher Acquired: ${S.title}`,"success"));const R={id:`log_${Date.now()}`,itemId:S.id,title:S.title,cost:S.cost,timestamp:new Date().toISOString()};return E.purchaseHistory=[R,...i.purchaseHistory||[]].slice(0,50),n.updateUser(E),Ae("coin",r),S.isInfinite||a(U=>({...U,storeItems:U.storeItems.filter(j=>j.id!==b)})),!0},d=b=>{a(S=>{const N=S.storeItems.findIndex(E=>E.id===b.id);if(N>=0){const E=[...S.storeItems];return E[N]=b,{...S,storeItems:E}}return S.storeItems.some(E=>E.title===b.title)?S:{...S,storeItems:[...S.storeItems,b]}}),Ae("click",r)},p=b=>{a(S=>{let N=[...S.storeItems];return b.forEach(E=>{const R=N.findIndex(U=>U.id===E.id);R>=0?N[R]=E:N.some(U=>U.title===E.title)||N.push(E)}),{...S,storeItems:N}}),Ae("level-up",r)},m=b=>{confirm("Remove this item from the market?")&&(a(S=>({...S,storeItems:S.storeItems.filter(N=>N.id!==b)})),Ae("delete",r))},y=b=>{a({storeItems:b}),n.addToast("Market Restored","success")};return l.jsx(V3.Provider,{value:{shopState:{storeItems:u},shopDispatch:{buyItem:f,addStoreItem:d,addStoreItems:p,deleteStoreItem:m,restoreData:y}},children:t})},Hy=()=>{const t=C.useContext(V3);if(t===void 0)throw new Error("useShop must be used within a ShopProvider");return t},RJ=({icon:t,size:e=24})=>{switch(t){case"Shield":return l.jsx(is,{size:e});case"Flask":return l.jsx(x3,{size:e});case"Coffee":return l.jsx(v3,{size:e});case"Palette":return l.jsx(pi,{size:e});case"Burger":return l.jsx(RX,{size:e});case"Game":return l.jsx(XY,{size:e});default:return l.jsx(_T,{size:e})}},ig=({item:t,canAfford:e,onBuy:n,onInfo:i})=>l.jsxs("div",{onClick:()=>i(t),className:`
        relative flex flex-col p-4 rounded-xl border bg-life-paper transition-all duration-300 group cursor-pointer
        ${e?"border-zinc-800 hover:border-life-gold/50 shadow-lg hover:shadow-life-gold/5":"border-zinc-800 opacity-60"}
    `,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("div",{className:`p-3 rounded-lg border bg-life-black transition-colors ${e?"border-life-gold/20 text-life-gold":"border-zinc-800 text-life-muted"}`,children:l.jsx(RJ,{icon:t.icon,size:24})}),l.jsxs("div",{className:`px-2 py-1 rounded text-xs font-mono font-bold border ${e?"bg-life-gold/10 text-life-gold border-life-gold/20":"bg-life-muted/10 text-life-muted border-zinc-800"}`,children:[t.cost," G"]})]}),l.jsx("h3",{className:"font-bold text-life-text mb-1 truncate",children:t.title}),l.jsx("p",{className:"text-xs text-life-muted leading-relaxed mb-4 flex-1 line-clamp-2",children:t.description}),l.jsx("button",{onClick:r=>{r.stopPropagation(),e&&n(t.id)},disabled:!e,className:`
            w-full py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all active:scale-95
            ${e?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_10px_rgba(251,191,36,0.2)]":"bg-life-muted/10 text-life-muted cursor-not-allowed"}
        `,children:e?"Buy":"Locked"}),l.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 overflow-hidden pointer-events-none",children:l.jsx("div",{className:`absolute top-0 right-0 w-4 h-4 -mr-2 -mt-2 rotate-45 transform ${e?"bg-life-gold":"bg-life-muted"}`})})]}),TT=({icon:t,size:e=16})=>{switch(t){case"Shield":return l.jsx(is,{size:e});case"Flask":return l.jsx(x3,{size:e});case"Coffee":return l.jsx(v3,{size:e});case"Palette":return l.jsx(pi,{size:e});case"Burger":return l.jsx(Qt,{size:e});case"Gift":return l.jsx(w3,{size:e});case"Zap":return l.jsx(Qt,{size:e});case"Scroll":return l.jsx(XW,{size:e});default:return l.jsx(_T,{size:e})}},jJ=()=>{const{state:t}=De(),{shopState:e,shopDispatch:n}=Hy(),{storeItems:i}=e,{user:r}=t,[s,a]=C.useState(!1),[u,f]=C.useState(""),[d,p]=C.useState(100),[m,y]=C.useState(null),[b,S]=C.useState([]),N=i.filter(O=>O.type==="system"),E=i.filter(O=>O.type==="artifact"),R=i.filter(O=>O.type==="redemption"),U=i.filter(O=>O.type==="custom"),j=(O,P)=>{if(n.buyItem(O)){const A=Array.from({length:12}).map((M,H)=>({id:Date.now()+H,x:P.clientX,y:P.clientY}));S(M=>[...M,...A])}};C.useEffect(()=>{if(b.length>0){const O=setTimeout(()=>S([]),1e3);return()=>clearTimeout(O)}},[b]);const B=O=>{if(O.preventDefault(),!u.trim()||d<0)return;const P={id:`cust_${Date.now()}`,title:u,description:"Custom User Reward",cost:Math.max(0,d),type:"custom",icon:"Gift",isInfinite:!0};n.addStoreItem(P),f(""),a(!1)};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500 relative",children:[b.map(O=>l.jsx("div",{className:"fixed w-2 h-2 rounded-full animate-[particle_0.8s_ease-out_forwards] pointer-events-none z-[100]",style:{left:O.x,top:O.y,backgroundColor:["#fbbf24","#ffffff","#10b981"][Math.floor(Math.random()*3)],boxShadow:"0 0 10px currentColor","--tx":`${(Math.random()-.5)*200}px`,"--ty":`${(Math.random()-1)*200}px`}},O.id)),l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"THE BAZAAR"}),l.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:"Exchange Gold for Power & Pleasure"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-life-gold bg-life-gold/5 px-3 py-1.5 rounded-lg border border-life-gold/20 shadow-[0_0_15px_rgba(251,191,36,0.1)]",children:[l.jsx(ii,{size:16,className:"text-life-gold"}),l.jsx("span",{className:"font-mono font-bold text-lg",children:r.gold})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1",children:[l.jsx(dY,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"System Upgrades"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:N.map(O=>l.jsx("div",{onClick:P=>{},children:l.jsx(ig,{item:O,canAfford:r.gold>=O.cost,onBuy:P=>{const I={clientX:window.innerWidth/2,clientY:window.innerHeight/2};j(P,I)},onInfo:P=>y(P)})},O.id))})]}),E.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1",children:[l.jsx(is,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Rare Artifacts"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:E.map(O=>l.jsx("div",{children:l.jsx(ig,{item:O,canAfford:r.gold>=O.cost,onBuy:P=>{const I={clientX:window.innerWidth/2,clientY:window.innerHeight/2};j(P,I)},onInfo:P=>y(P)})},O.id))})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted",children:[l.jsx(w3,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Real World Rewards"})]}),l.jsxs("button",{onClick:()=>a(!s),className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white uppercase font-bold",children:[l.jsx(wn,{size:12})," Add Custom"]})]}),s&&l.jsxs("form",{onSubmit:B,className:"mb-4 bg-life-black border border-zinc-800 p-3 rounded-lg flex gap-2 animate-in fade-in",children:[l.jsx("input",{type:"text",placeholder:"Reward Name...",value:u,onChange:O=>f(O.target.value),className:"flex-1 bg-transparent border-b border-zinc-800 text-xs text-white focus:outline-none focus:border-life-gold px-2",autoFocus:!0}),l.jsx("input",{type:"number",placeholder:"Cost",value:d,min:0,onChange:O=>p(Number(O.target.value)),className:"w-16 bg-transparent border-b border-zinc-800 text-xs text-white focus:outline-none focus:border-life-gold text-center"}),l.jsx("button",{type:"submit",className:"text-life-gold",children:l.jsx(wn,{size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.map(O=>l.jsxs("div",{className:"relative group",children:[l.jsx(ig,{item:O,canAfford:r.gold>=O.cost,onBuy:P=>{const I={clientX:window.innerWidth/2,clientY:window.innerHeight/2};j(P,I)},onInfo:P=>y(P)}),l.jsx("button",{onClick:()=>n.deleteStoreItem(O.id),className:"absolute -top-2 -right-2 bg-life-black border border-life-hard/30 text-life-hard p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(dt,{size:12})})]},O.id)),U.map(O=>l.jsxs("div",{className:"relative group",children:[l.jsx(ig,{item:O,canAfford:r.gold>=O.cost,onBuy:P=>{const I={clientX:window.innerWidth/2,clientY:window.innerHeight/2};j(P,I)},onInfo:P=>y(P)}),l.jsx("button",{onClick:()=>n.deleteStoreItem(O.id),className:"absolute -top-2 -right-2 bg-life-black border border-life-hard/30 text-life-hard p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(dt,{size:12})})]},O.id)),U.length===0&&R.length===0&&l.jsx("div",{className:"col-span-2 py-8 text-center border-2 border-dashed border-zinc-800 rounded-xl",children:l.jsx("p",{className:"text-[10px] text-life-muted",children:"No custom rewards defined."})})]})]}),l.jsxs("div",{className:"mt-8 pt-8 border-t border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1 opacity-60",children:[l.jsx(aW,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Transaction Log (Last 100)"})]}),l.jsxs("div",{className:"space-y-1 opacity-70",children:[r.purchaseHistory.map(O=>{const P=O.title.includes("[XP]"),I=O.cost<0,A=Math.abs(O.cost),M=I?"+":"-";let H="text-life-gold";P?H="text-life-easy":I?H="text-green-400":H="text-red-400";const F=P?"XP":"G";return l.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-life-black border border-life-muted/10 text-[10px]",children:[l.jsx("span",{className:"text-life-text font-medium truncate flex-1 pr-2",children:O.title.replace("[XP] ","")}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:`${H} font-mono font-bold`,children:[M,A," ",F]}),l.jsx("span",{className:"text-life-muted opacity-50 text-[9px]",children:new Date(O.timestamp).toLocaleDateString()})]})]},O.id)}),r.purchaseHistory.length===0&&l.jsx("p",{className:"text-[10px] text-life-muted italic text-center",children:"No transaction data."})]})]}),m&&l.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{onClick:O=>O.stopPropagation(),className:"bg-life-paper w-full max-w-xs rounded-xl border border-zinc-800 p-5 shadow-2xl relative",children:[l.jsx("button",{onClick:()=>y(null),className:"absolute top-3 right-3 text-life-muted hover:text-life-text",children:l.jsx(dt,{size:20})}),l.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-life-black border border-zinc-800 flex items-center justify-center mb-3 text-life-gold shadow-inner",children:l.jsx(TT,{icon:m.icon,size:40})}),l.jsx("h3",{className:"font-black uppercase tracking-widest text-life-text",children:m.title}),l.jsxs("div",{className:"mt-2 flex items-center gap-2 justify-center",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded bg-life-muted/10 text-life-muted border border-zinc-800",children:m.type}),l.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded bg-life-gold/10 text-life-gold border border-life-gold/20",children:[m.cost," G"]})]}),l.jsx("p",{className:"text-xs text-life-muted mt-4 leading-relaxed",children:m.description}),m.effect&&l.jsxs("div",{className:"mt-4 w-full bg-life-black/50 p-3 rounded border border-zinc-800 text-left",children:[l.jsxs("h4",{className:"text-[9px] font-bold uppercase text-life-muted mb-1 flex items-center gap-1",children:[l.jsx(bt,{size:10})," Effect"]}),l.jsxs("p",{className:"text-[10px] text-life-text font-mono",children:[m.effect.type==="xp_boost"&&`+${m.effect.value*100}% XP Gain`,m.effect.type==="gold_boost"&&`+${m.effect.value*100}% Gold Gain`,m.effect.stat&&` (${m.effect.stat})`]})]})]}),l.jsx("button",{onClick:()=>{if(r.gold>=m.cost){const O={clientX:window.innerWidth/2,clientY:window.innerHeight/2};j(m.id,O),y(null)}},disabled:r.gold<m.cost,className:`
                        w-full py-3 font-black uppercase text-xs rounded-xl shadow-lg transition-all active:scale-95
                        ${r.gold>=m.cost?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}
                    `,children:r.gold>=m.cost?"Purchase Item":"Insufficient Funds"})]})}),l.jsx("style",{children:`
        @keyframes particle {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
      `})]})},PJ=[{id:"bdg_ascendant",name:"The Ascendant",icon:"",description:"Rise through the ranks of existence.",category:"progression",triggerType:"metric",metricKey:"level",levels:[{tier:"silver",target:5,quote:"You have awakened.",rewards:{xp:100,gold:50}},{tier:"gold",target:10,quote:"Power is not given, it is taken.",rewards:{xp:500,gold:200}},{tier:"diamond",target:25,quote:"You are no longer a spectator.",rewards:{xp:2e3,gold:1e3}},{tier:"crimson",target:50,quote:"Godhood is a lonely path.",rewards:{xp:1e4,gold:5e3}}]},{id:"bdg_grunt",name:"The Grunt",icon:"",description:"Complete missions of Easy difficulty.",category:"combat",triggerType:"metric",metricKey:`tasksByDifficulty.${Ge.EASY}`,levels:[{tier:"silver",target:10,quote:"Do the work. Don't complain.",rewards:{xp:50,gold:20}},{tier:"gold",target:50,quote:"Discipline is the bridge between goals and accomplishment.",rewards:{xp:200,gold:100}},{tier:"diamond",target:200,quote:"Routine is the weapon of the disciplined.",rewards:{xp:1e3,gold:500}},{tier:"crimson",target:500,quote:"The mundane has become your masterpiece.",rewards:{xp:5e3,gold:2e3}}]},{id:"bdg_warlord",name:"The Warlord",icon:"",description:"Complete missions of Hard difficulty.",category:"combat",triggerType:"metric",metricKey:`tasksByDifficulty.${Ge.HARD}`,levels:[{tier:"silver",target:5,quote:"Pain is weakness leaving the body.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"Hardship is the forge of character.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:100,quote:"You do not survive the storm. You are the storm.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:250,quote:"Impossible is just an opinion.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_conqueror",name:"The Conqueror",icon:"",description:"Total Operations (Raids) Conquered.",category:"warfare",triggerType:"metric",metricKey:"totalRaidsWon",levels:[{tier:"silver",target:1,quote:"First blood.",rewards:{xp:150,gold:100}},{tier:"gold",target:5,quote:"Strategy requires sacrifice.",rewards:{xp:750,gold:500}},{tier:"diamond",target:20,quote:"Kings play chess on a map of the world.",rewards:{xp:3e3,gold:2e3}},{tier:"crimson",target:50,quote:"History is written by the victors.",rewards:{xp:15e3,gold:1e4}}]},{id:"bdg_immortal",name:"The Immortal",icon:"",description:"Maintain a daily login streak.",category:"consistency",triggerType:"metric",metricKey:"highestStreak",levels:[{tier:"silver",target:7,quote:"Momentum is building.",rewards:{xp:100,gold:50}},{tier:"gold",target:30,quote:"Consistency is the only currency that matters.",rewards:{xp:500,gold:250}},{tier:"diamond",target:90,quote:"You have transcended motivation.",rewards:{xp:2e3,gold:1e3}},{tier:"crimson",target:365,quote:"Time bows to your will.",rewards:{xp:1e4,gold:5e3}}]},{id:"bdg_phoenix",name:"The Phoenix",icon:"",description:"Reset the system and start over.",category:"consistency",triggerType:"metric",metricKey:"resetsCount",levels:[{tier:"silver",target:1,quote:"From the ashes, we rise.",rewards:{xp:0,gold:500}},{tier:"gold",target:3,quote:"Failure is not the end.",rewards:{xp:0,gold:1e3}},{tier:"diamond",target:5,quote:"Destruction is a form of creation.",rewards:{xp:0,gold:3e3}},{tier:"crimson",target:10,quote:"You are eternal.",rewards:{xp:0,gold:1e4}}]},{id:"bdg_deep_focus",name:"Deep Worker",icon:"",description:'Maintain a streak on any "Deep Work" habit.',category:"special",triggerType:"habit",metricKey:"Deep Work",levels:[{tier:"silver",target:7,quote:"Focus is the new oil.",rewards:{xp:300,gold:150}},{tier:"gold",target:21,quote:"Distraction is the enemy of greatness.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:66,quote:"The mind is a laser.",rewards:{xp:5e3,gold:2500}},{tier:"crimson",target:100,quote:"Flow state is your home.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_gold_hoarder",name:"Gold Hoarder",icon:"",description:"Total lifetime gold earned.",category:"economy",triggerType:"metric",metricKey:"totalGoldEarned",levels:[{tier:"silver",target:1e3,quote:"The first coin is the heaviest.",rewards:{xp:100,gold:100}},{tier:"gold",target:1e4,quote:"Wealth is a tool, not a master.",rewards:{xp:500,gold:500}},{tier:"diamond",target:1e5,quote:"You can buy armies.",rewards:{xp:2e3,gold:2e3}},{tier:"crimson",target:1e6,quote:"Midas touches you.",rewards:{xp:1e4,gold:1e4}}]},{id:"bdg_stoic",name:"The Stoic",icon:"",description:"Reach high Discipline (DIS).",category:"mastery",triggerType:"stat",metricKey:ee.DIS,levels:[{tier:"silver",target:10,quote:"Control your mind.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"Emotion is a choice.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:50,quote:"Stone does not bleed.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:100,quote:"You are the mountain.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_titan",name:"The Titan",icon:"",description:"Reach high Strength (STR).",category:"mastery",triggerType:"stat",metricKey:ee.STR,levels:[{tier:"silver",target:10,quote:"Lift the weight.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"The body obeys the will.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:50,quote:"Force of nature.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:100,quote:"Atlas shrugs.",rewards:{xp:2e4,gold:1e4}}]}],F3=C.createContext(void 0),MJ=()=>{const t=new Date,e=n=>n.toString().padStart(2,"0");return`${t.getFullYear().toString().slice(-2)}${e(t.getMonth()+1)}${e(t.getDate())}${e(t.getHours())}${e(t.getMinutes())}`},DJ=({children:t})=>{var p,m,y;const{state:e,dispatch:n}=De(),{skillState:i}=Sn(),{habitState:r}=Li(),{raidState:s}=ls(),{user:a}=e,u=()=>[...PJ,...e.badgesRegistry],f=()=>{let b=!1,S={...a};S.badgeTiers||(S.badgeTiers={}),S.badgeHistory||(S.badgeHistory={}),u().forEach(E=>{var U;let R=0;if(E.triggerType==="metric"&&E.metricKey){const j=E.metricKey.split(".");j.length===1?R=a.metrics[j[0]]||0:j.length===2&&(R=((U=a.metrics[j[0]])==null?void 0:U[j[1]])||0),E.metricKey==="level"&&(R=a.level),E.metricKey==="highestStreak"&&(R=Math.max(a.streak,a.metrics.highestStreak))}else if(E.triggerType==="stat"&&E.metricKey)R=a.stats[E.metricKey]||0;else if(E.triggerType==="skill"&&E.metricKey){const j=i.skills.find(B=>B.id===E.metricKey);j&&(R=j.level)}else if(E.triggerType==="habit"&&E.metricKey){const j=r.habits.find(B=>B.title.toLowerCase().includes(E.metricKey.toLowerCase()));j&&(R=j.streak)}else if(E.triggerType==="raid"&&E.metricKey){const j=s.raids.find(B=>B.title.toLowerCase().includes(E.metricKey.toLowerCase()));j&&(R=j.progress)}E.levels.forEach(j=>{var P;const B=j.tier;S.badgeTiers[E.id];const O=(P=S.badgeHistory[E.id])==null?void 0:P[B];R>=j.target&&!O&&(b=!0,S.badgeTiers[E.id]=B,S.badges.includes(E.id)||S.badges.push(E.id),S.badgeHistory[E.id]||(S.badgeHistory[E.id]={}),S.badgeHistory[E.id][B]=MJ(),S.currentXP+=j.rewards.xp,S.gold+=j.rewards.gold,setTimeout(()=>{n.setModal("badgeUnlock",{badge:E,tier:B,rewards:j.rewards}),Ae("level-up",!0)},500))})}),b&&n.updateUser(S)};C.useEffect(()=>{const b=setTimeout(()=>{f()},1e3);return()=>clearTimeout(b)},[a.level,a.streak,(p=a.metrics)==null?void 0:p.totalTasksCompleted,(m=a.metrics)==null?void 0:m.totalGoldEarned,(y=a.metrics)==null?void 0:y.totalRaidsWon,JSON.stringify(a.stats),JSON.stringify(i.skills.map(b=>b.level)),JSON.stringify(r.habits.map(b=>b.streak)),JSON.stringify(s.raids.map(b=>b.progress))]);const d=()=>u().map(S=>{var U,j,B,O;let N=0;if(S.triggerType==="metric"&&S.metricKey){const P=S.metricKey.split(".");P.length===1?N=a.metrics[P[0]]||0:N=((U=a.metrics[P[0]])==null?void 0:U[P[1]])||0,S.metricKey==="level"&&(N=a.level),S.metricKey==="highestStreak"&&(N=Math.max(a.streak,((j=a.metrics)==null?void 0:j.highestStreak)||0))}else if(S.triggerType==="stat"&&S.metricKey)N=a.stats[S.metricKey]||0;else if(S.triggerType==="skill"&&S.metricKey){const P=i.skills.find(I=>I.id===S.metricKey);P&&(N=P.level)}else if(S.triggerType==="habit"&&S.metricKey){const P=r.habits.find(I=>I.title.toLowerCase().includes(S.metricKey.toLowerCase()));P&&(N=P.streak)}else if(S.triggerType==="raid"&&S.metricKey){const P=s.raids.find(I=>I.title.toLowerCase().includes(S.metricKey.toLowerCase()));P&&(N=P.progress)}const E=((B=a.badgeTiers)==null?void 0:B[S.id])||null;let R=S.levels[0];return E==="silver"&&(R=S.levels[1]),E==="gold"&&(R=S.levels[2]),E==="diamond"&&(R=S.levels[3]),E==="crimson"&&(R=null),{badge:S,currentValue:N,isUnlocked:!!E,currentTier:E,nextTier:R,history:((O=a.badgeHistory)==null?void 0:O[S.id])||{}}});return l.jsx(F3.Provider,{value:{getAllBadges:d,checkBadges:f},children:t})},H3=()=>{const t=C.useContext(F3);if(!t)throw new Error("useBadges must be used within BadgeProvider");return t},OJ=({user:t,dynamicTitle:e,featuredBadgesData:n})=>l.jsxs("div",{className:"bg-life-paper border border-zinc-800 rounded-xl p-6 text-center mb-6 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-life-gold/5 to-transparent pointer-events-none"}),l.jsxs("div",{className:"w-24 h-24 mx-auto bg-life-black rounded-full border-4 border-zinc-800 flex items-center justify-center mb-4 relative shadow-2xl z-10 transition-transform select-none",children:[l.jsx(wT,{size:48,className:"text-life-silver"}),l.jsxs("div",{className:"absolute -bottom-2 bg-life-gold text-life-black text-xs font-black px-2 py-0.5 rounded shadow-sm border border-life-black",children:["Lvl ",t.level]})]}),l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase relative z-10",children:t.name}),l.jsx("p",{className:"text-sm text-life-gold font-mono tracking-widest opacity-80 mb-5 relative z-10",children:e}),n.length>0&&l.jsx("div",{className:"flex justify-center gap-2 mb-5 relative z-10",children:n.map(i=>{const r=i.currentTier;let s="text-gray-400";return r==="gold"&&(s="text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]"),r==="diamond"&&(s="text-cyan-400 drop-shadow-[0_0_5px_rgba(34,211,238,0.5)]"),r==="crimson"&&(s="text-red-500 drop-shadow-[0_0_8px_rgba(220,38,38,0.6)]"),l.jsxs("div",{className:"relative group/badge cursor-help",title:i.badge.name,children:[l.jsx("div",{className:`w-8 h-8 rounded-full bg-life-black border border-zinc-800 flex items-center justify-center ${s}`,children:l.jsx("span",{className:"text-sm",children:i.badge.icon})}),l.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-life-paper bg-current ${s}`})]},i.badge.id)})}),l.jsxs("div",{className:"bg-black/40 rounded-lg p-3 backdrop-blur-sm border border-zinc-800 relative z-10",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted mb-1 uppercase font-bold",children:[l.jsx("span",{children:"XP Progress"}),l.jsxs("span",{className:"text-life-gold",children:[t.currentXP," ",l.jsxs("span",{className:"text-life-muted",children:["/ ",t.targetXP]})]})]}),l.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-life-gold shadow-[0_0_10px_rgba(251,191,36,0.5)] transition-all duration-700",style:{width:`${Math.min(100,t.currentXP/t.targetXP*100)}%`}})})]})]}),LJ=({items:t,onSelectItem:e})=>{const n=t.reduce((r,s)=>(r[s.id]||(r[s.id]={...s,count:0}),r[s.id].count+=1,r),{}),i=Object.values(n);return l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xs font-bold text-life-muted uppercase tracking-wider mb-3 flex items-center gap-2",children:[l.jsx(IW,{size:14})," Inventory (",t.length,")"]}),i.length>0?l.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.map(r=>l.jsxs("button",{onClick:()=>e(r),className:"aspect-square bg-life-paper rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-1 hover:border-life-gold/50 hover:bg-life-muted/5 transition-all relative",children:[r.count>1&&l.jsxs("span",{className:"absolute top-1 right-1 bg-life-gold text-life-black text-[9px] font-black px-1.5 rounded-full shadow-sm",children:["x",r.count]}),l.jsx("div",{className:"text-life-gold",children:l.jsx(TT,{icon:r.icon,size:20})})]},r.id))}):l.jsx("div",{className:"text-center py-6 border border-dashed border-zinc-800 rounded-xl",children:l.jsx("p",{className:"text-[10px] text-life-muted",children:"Inventory Empty"})})]})},zJ=()=>{const[t,e]=C.useState(null),[n,i]=C.useState(!1);return C.useEffect(()=>{const s=a=>{a.preventDefault(),e(a),i(!0)};return window.addEventListener("beforeinstallprompt",s),()=>window.removeEventListener("beforeinstallprompt",s)},[]),{isInstallable:n,promptInstall:async()=>{if(!t)return;t.prompt();const{outcome:s}=await t.userChoice;s==="accepted"&&(console.log("User accepted the install prompt"),e(null),i(!1))}}};var zg={exports:{}},UJ=zg.exports,AI;function VJ(){return AI||(AI=1,(function(t,e){(function(n,i){i()})(UJ,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,p,m){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){f(y.response,p,m)},y.onerror=function(){console.error("could not download file")},y.send()}function r(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Km=="object"&&Km.global===Km?Km:void 0,u=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(d,p,m){var y=a.URL||a.webkitURL,b=document.createElement("a");p=p||d.name||"download",b.download=p,b.rel="noopener",typeof d=="string"?(b.href=d,b.origin===location.origin?s(b):r(b.href)?i(d,p,m):s(b,b.target="_blank")):(b.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(b.href)},4e4),setTimeout(function(){s(b)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,m){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,m),p);else if(r(d))i(d,p,m);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){s(y)})}}:function(d,p,m,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return i(d,p,m);var b=d.type==="application/octet-stream",S=/constructor/i.test(a.HTMLElement)||a.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||b&&S||u)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var j=E.result;j=N?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=j:location=j,y=null},E.readAsDataURL(d)}else{var R=a.URL||a.webkitURL,U=R.createObjectURL(d);y?y.location=U:location.href=U,y=null,setTimeout(function(){R.revokeObjectURL(U)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(zg)),zg.exports}var FJ=VJ();const HJ=async()=>{try{const t=await fetch("/api/download-source");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.blob();FJ.saveAs(e,"lifeos-source.zip")}catch(t){console.error("Failed to download source:",t),alert("Failed to download source code. Please try again.")}},BJ=({user:t,dispatch:e,onExport:n,onImport:i,onForceSleep:r})=>{zJ();const{skillState:s}=Sn(),[a,u]=C.useState(""),f=()=>{e.togglePreference("useSkillAsTitle")},d=p=>{const m=p.target.value;e.updateUser({preferences:{...t.preferences,linkedSkillId:m}})};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(b0,{size:14,className:"text-life-muted"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Title Override"})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-life-paper rounded-lg border border-zinc-800",children:[l.jsx("label",{htmlFor:"title-override-toggle",className:"text-xs font-bold text-life-text",children:"Use Skill as Title"}),l.jsx("button",{id:"title-override-toggle",onClick:f,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${t.preferences.useSkillAsTitle?"bg-life-gold":"bg-life-muted/20"}`,children:l.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${t.preferences.useSkillAsTitle?"translate-x-6":"translate-x-1"}`})})]}),t.preferences.useSkillAsTitle&&l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsxs("select",{value:t.preferences.linkedSkillId||"",onChange:d,className:"w-full p-3 bg-life-paper border border-zinc-800 rounded-lg text-xs font-bold text-life-text focus:outline-none focus:ring-2 focus:ring-life-gold/50",children:[l.jsx("option",{value:"",disabled:!0,children:"Select a Skill..."}),s.skills.map(p=>l.jsx("option",{value:p.id,children:p.title},p.id))]})})]}),l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Oy,{size:14,className:"text-life-muted"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Data Persistence"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-zinc-800 hover:border-life-gold/50 transition-all group",children:[l.jsx(Th,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Backup System"})]}),l.jsxs("button",{onClick:i,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-zinc-800 hover:border-life-easy/50 transition-all group",children:[l.jsx(_0,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Restore Data"})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 opacity-50",children:[l.jsx(v0,{size:10,className:"text-life-easy"}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Local Storage Protocol Active"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:()=>e.setModal("questForge"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-indigo-950/30 border border-indigo-500/30 hover:bg-indigo-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-indigo-500/20 rounded-lg text-indigo-400 group-hover:text-indigo-300",children:l.jsx(_n,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-200 group-hover:text-white",children:"Quest Forge (Tasks)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-indigo-400/60 bg-indigo-950/50 px-2 py-1 rounded border border-indigo-500/10",children:"AI_TASK_GEN"})]}),l.jsxs("button",{onClick:()=>e.setModal("habitProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-emerald-950/30 border border-emerald-500/30 hover:bg-emerald-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-emerald-500/20 rounded-lg text-emerald-400 group-hover:text-emerald-300",children:l.jsx(Qt,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-200 group-hover:text-white",children:"Protocol Foundry (Habits)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-emerald-400/60 bg-emerald-950/50 px-2 py-1 rounded border border-emerald-500/10",children:"AI_HABIT_GEN"})]}),l.jsxs("button",{onClick:()=>e.setModal("shopProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-pink-950/30 border border-pink-500/30 hover:bg-pink-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-pink-500/20 rounded-lg text-pink-400 group-hover:text-pink-300",children:l.jsx(N3,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-pink-200 group-hover:text-white",children:"Shop Archives"})]}),l.jsx("span",{className:"text-[8px] font-mono text-pink-400/60 bg-pink-950/50 px-2 py-1 rounded border border-pink-500/10",children:"AI_SHOP_DOCS"})]}),l.jsxs("button",{onClick:()=>e.setModal("economyProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-amber-950/30 border border-amber-500/30 hover:bg-amber-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-lg text-amber-400 group-hover:text-amber-300",children:l.jsx(ii,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-200 group-hover:text-white",children:"Treasury Archive (Economy)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-amber-400/60 bg-amber-950/50 px-2 py-1 rounded border border-amber-500/10",children:"AI_ECON_DOCS"})]}),l.jsxs("button",{onClick:()=>e.setModal("raidProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-red-950/30 border border-red-500/30 hover:bg-red-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-red-500/20 rounded-lg text-red-400 group-hover:text-red-300",children:l.jsx(v0,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-red-200 group-hover:text-white",children:"The War Room (Raids)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-red-400/60 bg-red-950/50 px-2 py-1 rounded border border-red-500/10",children:"AI_RAID_OPS"})]}),l.jsxs("div",{className:"w-full flex flex-col items-center justify-between p-4 rounded-xl bg-zinc-900/50 border border-zinc-700 transition-all group space-y-3",children:[l.jsxs("div",{className:"w-full flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-zinc-700/20 rounded-lg text-zinc-400 group-hover:text-zinc-300",children:l.jsx(Th,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-200 group-hover:text-white",children:"Oracle Source Archive (ZIP)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-zinc-500 bg-zinc-950/50 px-2 py-1 rounded border border-zinc-700/30",children:"SYS_EXPORT"})]}),l.jsx("input",{type:"password",placeholder:"Enter code to unlock",value:a,onChange:p=>u(p.target.value),className:"w-full bg-life-black border border-zinc-600 rounded-lg p-2 text-center text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-mono"}),l.jsx("button",{onClick:HJ,disabled:a!=="asad0032",className:"w-full py-2 rounded-lg bg-life-gold text-life-black text-xs font-bold uppercase tracking-wider transition-all shadow-lg shadow-life-gold/20 disabled:bg-zinc-700 disabled:text-zinc-500 disabled:cursor-not-allowed disabled:shadow-none",children:"Download Source"})]}),l.jsxs("button",{onClick:()=>e.setModal("codexArbiter"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-indigo-950/30 border border-indigo-500/30 hover:bg-indigo-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-indigo-500/20 rounded-lg text-indigo-400 group-hover:text-indigo-300",children:l.jsx(Uy,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-200 group-hover:text-white",children:"Codex Arbiter (Laws)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-indigo-400/60 bg-indigo-950/50 px-2 py-1 rounded border border-indigo-500/10",children:"AI_CODEX_GEN"})]}),l.jsxs("button",{onClick:()=>e.setModal("badgeProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-yellow-950/30 border border-yellow-500/30 hover:bg-yellow-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-yellow-500/20 rounded-lg text-yellow-400 group-hover:text-yellow-300",children:l.jsx(b0,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-yellow-200 group-hover:text-white",children:"Badge Architect"})]}),l.jsx("span",{className:"text-[8px] font-mono text-yellow-400/60 bg-yellow-950/50 px-2 py-1 rounded border border-yellow-500/10",children:"AI_BADGE_GEN"})]}),l.jsxs("button",{onClick:()=>e.setModal("skillProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-blue-950/30 border border-blue-500/30 hover:bg-blue-900/40 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-blue-500/20 rounded-lg text-blue-400 group-hover:text-blue-300",children:l.jsx(_n,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-blue-200 group-hover:text-white",children:"Skill Tree Architect"})]}),l.jsx("span",{className:"text-[8px] font-mono text-blue-400/60 bg-blue-950/50 px-2 py-1 rounded border border-blue-500/10",children:"AI_SKILL_GEN"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:async()=>{const p=await u3();alert(p?"Notifications Enabled! ":"Notifications Denied or Not Supported ")},className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-gold/50 transition-all group",children:[l.jsx(dc,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Enable Alerts"})]}),l.jsxs("button",{onClick:()=>p0(Date.now(),"Life OS","System Test: Notifications Operational "),className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-easy/50 transition-all group",children:[l.jsx(Qt,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Test Alert"})]})]}),l.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-4 rounded-xl bg-life-black border border-life-muted/10 hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(E3,{size:16,className:"text-life-gold group-hover:rotate-180 transition-transform duration-700"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-text",children:"Trigger Daily Reset"})]}),l.jsx("span",{className:"text-[8px] font-mono text-life-muted opacity-50",children:"MANUAL_OVERRIDE"})]}),l.jsxs("button",{onClick:()=>e.setModal("resetConfirm"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-red-950/10 border border-red-900/30 hover:bg-red-900/20 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(C3,{size:16,className:"text-red-500"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-red-400",children:"Rebirth Protocol"})]}),l.jsx("span",{className:"text-[8px] font-mono text-red-900 font-bold",children:"DANGER_ZONE"})]})]}),l.jsx("div",{className:"text-center pt-4",children:l.jsx("p",{className:"text-[8px] text-life-muted font-mono opacity-40 uppercase tracking-[0.3em]",children:"LifeOS Neural Kernel v2.4.0 // Secured"})})]})},$J=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Dy,{size:e})}},qJ=({stats:t,maxVal:e=20})=>{const s=e,a=[ee.STR,ee.INT,ee.DIS,ee.HEA,ee.CRT,ee.SPR,ee.REL,ee.FIN],u=(p,m,y=85)=>{const S=Math.PI*2/a.length*m-Math.PI/2,N=p/s*y,E=150+N*Math.cos(S),R=150+N*Math.sin(S);return{x:E,y:R}},f=a.map((p,m)=>{const y=Math.min(t[p],s),{x:b,y:S}=u(y,m);return`${b},${S}`}).join(" "),d=[.25,.5,.75,1].map(p=>a.map((m,y)=>{const{x:b,y:S}=u(s*p,y);return`${b},${S}`}).join(" "));return l.jsx("div",{className:"relative flex justify-center animate-in fade-in zoom-in-95 duration-500",children:l.jsxs("svg",{width:300,height:300,viewBox:"0 0 300 300",className:"overflow-visible",children:[d.map((p,m)=>l.jsx("polygon",{points:p,fill:"none",stroke:"var(--color-life-text)",strokeWidth:"1",opacity:"0.1"},m)),a.map((p,m)=>{const{x:y,y:b}=u(s,m);return l.jsx("line",{x1:150,y1:150,x2:y,y2:b,stroke:"var(--color-life-text)",strokeWidth:"1",opacity:"0.1"},m)}),l.jsx("polygon",{points:f,fill:"rgba(251, 191, 36, 0.15)",stroke:"#fbbf24",strokeWidth:"2",className:"drop-shadow-[0_0_15px_rgba(251,191,36,0.3)]"}),a.map((p,m)=>{const y=u(s,m,125),b=t[p],S=xt[p];return l.jsx("foreignObject",{x:y.x-30,y:y.y-25,width:"60",height:"50",className:"overflow-visible",children:l.jsxs("div",{className:"flex flex-col items-center justify-center text-center group cursor-pointer hover:scale-110 transition-transform",children:[l.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-life-black border shadow-sm mb-1 z-10 relative",style:{borderColor:`${S}50`,color:S,boxShadow:`0 0 10px ${S}20`},children:l.jsx($J,{stat:p,size:12})}),l.jsxs("div",{className:"flex flex-col leading-none relative z-10 bg-life-black/80 px-1 rounded backdrop-blur-sm",children:[l.jsx("span",{className:"text-[8px] font-black uppercase tracking-wider text-life-muted group-hover:text-life-text transition-colors",children:p}),l.jsx("span",{className:"text-[10px] font-mono font-bold text-life-text group-hover:text-life-gold transition-colors",children:b})]})]})},p)}),a.map((p,m)=>{const y=Math.min(t[p],s),b=u(y,m);return l.jsx("circle",{cx:b.x,cy:b.y,r:"3",fill:"#fbbf24",stroke:"#000",strokeWidth:"1"},`dot-${m}`)})]})})},GJ=t=>{switch(t){case ee.STR:return ir;case ee.INT:return _n;case ee.DIS:return bt;case ee.HEA:return kr;case ee.CRT:return pi;case ee.SPR:return hi;case ee.REL:return Rr;case ee.FIN:return ii;default:return Dy}},KJ=t=>{switch(t){case ee.STR:return"#ef4444";case ee.INT:return"#8b5cf6";case ee.DIS:return"#3b82f6";case ee.HEA:return"#10b981";case ee.CRT:return"#ec4899";case ee.SPR:return"#f43f5e";case ee.REL:return"#fbbf24";case ee.FIN:return"#14b8a6";default:return"#6b7280"}},YJ=t=>{const e={[ee.STR]:t.STR||0,[ee.INT]:t.INT||0,[ee.DIS]:t.DIS||0,[ee.HEA]:t.HEA||0,[ee.CRT]:t.CRT||0,[ee.SPR]:t.SPR||0,[ee.REL]:t.REL||0,[ee.FIN]:t.FIN||0},n=Math.max(...Object.values(e));let i=20;return n>=1280?i=2560:n>=640?i=1280:n>=320?i=640:n>=160?i=320:n>=80?i=160:n>=40?i=80:n>=20&&(i=40),{xpValues:e,globalTarget:i}},WJ={[ee.STR]:"Strength",[ee.INT]:"Intelligence",[ee.DIS]:"Discipline",[ee.HEA]:"Health",[ee.CRT]:"Creativity",[ee.SPR]:"Spirit",[ee.REL]:"Relation",[ee.FIN]:"Finance"},XJ=({stat:t,xp:e,target:n})=>{const i=n>0?Math.min(e/n*100,100):0,r=GJ(t),s=KJ(t),a=WJ[t]||t;return l.jsxs("div",{className:"flex flex-col w-full mb-2 group",children:[l.jsxs("div",{className:"flex justify-between items-end px-0 mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 rounded-md bg-life-black border border-zinc-800 flex items-center justify-center shadow-sm group-hover:border-life-muted/40 transition-colors",children:l.jsx(r,{size:14,style:{color:s}})}),l.jsxs("div",{className:"flex flex-col leading-none gap-0.5",children:[l.jsx("span",{className:"font-black text-[10px] text-life-text uppercase tracking-widest",children:a}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[8px] font-mono text-life-muted font-bold opacity-50",children:t}),l.jsxs("span",{className:"text-[8px] font-mono text-life-gold font-bold bg-life-gold/10 px-1 rounded-[2px]",children:["LVL ",Math.floor(e/20)+1]})]})]})]}),l.jsxs("p",{className:"text-[10px] font-mono text-life-text text-right leading-none",children:[l.jsx("span",{style:{color:s},className:"font-black text-xs",children:e.toFixed(0)}),l.jsxs("span",{className:"text-life-muted/40 text-[9px] ml-1",children:["/ ",n]})]})]}),l.jsxs("div",{className:"w-full bg-black h-2 rounded-full overflow-hidden border border-zinc-800 relative shadow-inner",children:[l.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out relative z-10",style:{width:`${i}%`,backgroundColor:s}}),l.jsx("div",{className:"absolute inset-0 opacity-30 blur-[3px]",style:{width:`${i}%`,backgroundColor:s}})]})]})},JJ=({user:t})=>{const[e,n]=C.useState("data"),{xpValues:i,globalTarget:r}=YJ(t.stats),s=[ee.STR,ee.INT,ee.DIS,ee.HEA,ee.CRT,ee.SPR,ee.REL,ee.FIN];return l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 mb-4 shadow-lg shadow-black/50 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-life-muted/30 rounded-tl-lg"}),l.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-life-muted/30 rounded-tr-lg"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-life-muted/30 rounded-bl-lg"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-life-muted/30 rounded-br-lg"}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-life-text flex items-center gap-2",children:[l.jsx("span",{className:"text-life-gold",children:""})," Attribute Analysis"]}),l.jsx("p",{className:"text-[9px] text-life-muted uppercase font-mono tracking-[0.1em] mt-1 opacity-60",children:"Neural_Net_v1.4 // Connected"})]}),l.jsxs("div",{className:"flex items-center bg-black border border-zinc-800 p-1 rounded-lg gap-1",children:[l.jsxs("button",{onClick:()=>n("graph"),className:`flex items-center gap-2 px-3 py-1.5 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${e==="graph"?"bg-life-gold text-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:[l.jsx(sW,{size:12,className:e==="graph"?"fill-black stroke-black":""}),"Graph"]}),l.jsxs("button",{onClick:()=>n("data"),className:`flex items-center gap-2 px-3 py-1.5 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${e==="data"?"bg-life-gold text-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:[l.jsx(vW,{size:14}),"Data"]})]})]}),l.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:e==="graph"?l.jsx("div",{className:"relative h-64 flex items-center justify-center",children:l.jsx(qJ,{stats:t.stats,maxVal:r})}):l.jsx("div",{className:"space-y-3 py-1",children:s.map(a=>l.jsx(XJ,{stat:a,xp:i[a],target:r},a))})})]})},QJ=()=>{var F;const{state:t,dispatch:e}=De(),{shopState:n}=Hy(),{skillState:i}=Sn(),{taskState:r}=Oi(),{habitState:s}=Li(),{raidState:a}=ls(),{campaignState:u}=md(),{getAllBadges:f}=H3(),{user:d}=t,{storeItems:p}=n,[m,y]=C.useState(null),[b,S]=C.useState(Ya.currentUser);C.useEffect(()=>{const D=Ya.onAuthStateChanged(z=>S(z));return()=>D()},[]);const N=(i==null?void 0:i.skills)||[],E=N.length>0?N.reduce((D,z)=>D.level>z.level?D:z,N[0]):null,R=E?`${E.rank} ${E.title}`:d.title,U=d.inventory.map(D=>p.find(z=>z.id===D)).filter(Boolean),j=((F=d.badges)==null?void 0:F.length)||0,B=f(),O=(d.featuredBadges||[]).map(D=>B.find(z=>z.badge.id===D)).filter(Boolean),P=()=>{m&&(e.useItem(m),y(null))},I=()=>{const D={user:t.user,badgesRegistry:t.badgesRegistry,ui:{...t.ui,activeModal:"none",modalData:null},tasks:r.tasks,taskCategories:r.categories,laws:r.laws,habits:s.habits,habitCategories:s.categories,raids:a.raids,skills:i.skills,storeItems:n.storeItems,campaign:u.campaign,meta:{timestamp:new Date().toISOString(),version:"2.0",type:"full_backup"}},z=JSON.stringify(D,null,2);e.setModal("dataExchange",{mode:"export",title:"System Backup",data:z})},A=()=>{e.setModal("dataExchange",{mode:"import",title:"System Uplink"})},M=()=>{e.triggerDailyReset(),e.addToast("System Cycle Reset Initiated","success")},H=async()=>{const D=new Os;try{b?b.isAnonymous?(await x$(b,D),e.addToast("Account Linked Successfully","success")):e.addToast("Already Connected","info"):(await R5(Ya,D),e.addToast("Neural Link Established","success"))}catch(z){console.error("Link Error:",z),e.addToast(z.message||"Link Failed","error")}};return l.jsxs("div",{className:"pb-24 animate-in fade-in zoom-in-95 duration-500 relative",children:[l.jsx(OJ,{user:d,dynamicTitle:R,featuredBadgesData:O}),l.jsxs("button",{onClick:H,className:`w-full mb-6 border rounded-xl p-4 flex items-center justify-between transition-all group shadow-lg ${b?"bg-life-easy/10 border-life-easy/30 hover:bg-life-easy/20":"bg-life-black border-zinc-800 hover:border-life-gold/50 hover:bg-life-gold/5"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border group-hover:scale-110 transition-transform ${b?"bg-life-easy/20 text-life-easy border-life-easy/30":"bg-life-gold/10 text-life-gold border-life-gold/20"}`,children:l.jsx(bt,{size:20,className:b?"":"animate-pulse"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:`text-xs font-black uppercase tracking-widest transition-colors ${b?"text-life-easy":"text-life-text group-hover:text-life-gold"}`,children:b?"Neural Link Active":"Connect Neural Link"}),l.jsx("p",{className:"text-[9px] text-life-muted uppercase tracking-[0.2em]",children:b?b.email||"Linked":"Sync with Google Cloud"})]})]}),b?l.jsx(is,{size:20,className:"text-life-easy"}):l.jsx(xi,{size:20,className:"text-life-muted group-hover:text-life-gold"})]}),l.jsxs("button",{onClick:()=>e.setView("hall_of_fame"),className:"w-full mb-6 bg-life-black border border-zinc-800 rounded-xl p-4 flex items-center justify-between hover:border-life-gold/50 hover:bg-life-gold/5 transition-all group shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-life-crimson/10 flex items-center justify-center text-life-crimson border border-life-crimson/20 group-hover:scale-110 transition-transform",children:l.jsx(il,{size:20})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-xs font-black text-life-text uppercase tracking-widest group-hover:text-life-gold transition-colors",children:"Hall of Glory"}),l.jsxs("p",{className:"text-[9px] text-life-muted uppercase tracking-[0.2em]",children:[j," Medals Secured"]})]})]}),l.jsx(xi,{size:20,className:"text-life-muted group-hover:text-life-gold"})]}),l.jsx(JJ,{user:d}),l.jsx(LJ,{items:U,onSelectItem:y}),l.jsx(BJ,{user:d,dispatch:e,onForceSleep:M,onExport:I,onImport:A}),m&&l.jsx("div",{onClick:()=>y(null),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{onClick:D=>D.stopPropagation(),className:"bg-life-paper w-full max-w-xs rounded-xl border border-zinc-800 p-5 shadow-2xl relative",children:[l.jsx("button",{onClick:()=>y(null),className:"absolute top-3 right-3 text-life-muted hover:text-life-text",children:l.jsx(dt,{size:20})}),l.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-life-black border border-zinc-800 flex items-center justify-center mb-3 text-life-gold shadow-inner",children:l.jsx(TT,{icon:m.icon,size:40})}),l.jsx("h3",{className:"font-black uppercase tracking-widest text-life-text",children:m.title}),l.jsx("p",{className:"text-[10px] text-life-muted mt-2 leading-relaxed uppercase",children:m.description})]}),l.jsx("div",{className:"flex flex-col gap-2",children:m.type==="artifact"?l.jsx("button",{onClick:()=>{e.toggleEquip(m.id),y(null)},className:`w-full py-4 font-black uppercase text-xs rounded-xl shadow-lg transition-all active:scale-95 ${d.equippedItems.includes(m.id)?"bg-life-muted/20 text-life-muted hover:bg-life-muted/30":"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20"}`,children:d.equippedItems.includes(m.id)?"Unequip Artifact":"Equip Artifact"}):l.jsx("button",{onClick:P,className:"w-full py-4 bg-life-gold text-life-black font-black uppercase text-xs rounded-xl hover:bg-yellow-400 shadow-lg shadow-life-gold/20 transition-all active:scale-95",children:"Consume Item"})})]})})]})},ZJ=({onStart:t})=>{const[e,n]=C.useState(""),[i,r]=C.useState(new Date().toISOString().split("T")[0]),s=a=>{a.preventDefault(),e&&t(e,i)};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500 h-full flex flex-col justify-center",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-20 h-20 bg-life-black border border-life-gold rounded-full flex items-center justify-center mx-auto mb-4 shadow-[0_0_30px_rgba(251,191,36,0.2)]",children:l.jsx(Ir,{size:40,className:"text-life-gold"})}),l.jsx("h2",{className:"text-3xl font-black text-life-text tracking-tighter uppercase mb-2",children:"Operation Tempo"}),l.jsx("p",{className:"text-sm text-life-muted max-w-xs mx-auto",children:'"The year is not 12 months. It is 12 weeks. No time for hesitation."'})]}),l.jsxs("form",{onSubmit:s,className:"bg-life-paper border border-life-muted/20 p-6 rounded-2xl shadow-xl space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Campaign Objective (Title)"}),l.jsx("input",{type:"text",value:e,onChange:a=>n(a.target.value),placeholder:"e.g. Project Spartan, Winter Arc...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none font-bold",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Start Date (Zero Point)"}),l.jsx("input",{type:"date",value:i,onChange:a=>r(a.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none"})]}),l.jsxs("button",{type:"submit",disabled:!e,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all
                        ${e?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-lg shadow-life-gold/20":"bg-life-muted/20 text-life-muted cursor-not-allowed"}
                    `,children:[l.jsx(zy,{size:18,fill:"currentColor"})," Initiate Campaign"]})]})]})},eQ=({stats:t,onComplete:e})=>{const n=t.grade==="S"?"text-life-diamond":t.grade==="A"?"text-life-gold":t.grade==="F"?"text-life-hard":"text-life-text";return l.jsxs("div",{className:"relative overflow-hidden rounded-2xl border-2 border-life-gold bg-life-black p-6 shadow-[0_0_30px_rgba(251,191,36,0.15)] animate-in zoom-in-95 duration-700",children:[l.jsx("div",{className:"absolute inset-0 bg-life-gold/5 animate-pulse-slow pointer-events-none"}),l.jsx("div",{className:"absolute -right-10 -top-10 opacity-10 rotate-12",children:l.jsx(LX,{size:150,className:"text-life-gold"})}),l.jsxs("div",{className:"relative z-10 text-center",children:[l.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-[0.3em] mb-4",children:"The Harvest is Here"}),l.jsxs("div",{className:"flex flex-col items-center mb-6",children:[l.jsx("div",{className:`text-6xl font-black ${n} drop-shadow-2xl`,children:t.grade}),l.jsx("div",{className:"text-xs text-life-muted font-bold uppercase tracking-widest mt-2 border-t border-b border-life-muted/20 py-1 px-4",children:"Campaign Rank"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[l.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20",children:[l.jsxs("div",{className:"text-2xl font-black text-life-text",children:[t.completionRate,"%"]}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Efficiency"})]}),l.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20",children:[l.jsx("div",{className:"text-2xl font-black text-life-gold",children:t.raidCount}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Ops Won"})]}),l.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20 col-span-2 flex items-center justify-between px-6",children:[l.jsxs("div",{className:"text-left",children:[l.jsxs("div",{className:"text-xl font-black text-life-text",children:[t.completedTasks," ",l.jsxs("span",{className:"text-life-muted text-sm",children:["/ ",t.totalTasks]})]}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Missions Cleared"})]}),l.jsx(Fy,{size:24,className:"text-life-gold opacity-50"})]})]}),l.jsxs("button",{onClick:e,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.3)] transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2",children:[l.jsx(Dy,{size:20,strokeWidth:3})," Reap & Reset Cycle"]}),l.jsx("p",{className:"text-[9px] text-life-muted mt-3 opacity-60",children:"Archiving this campaign will reset the timeline for the next 12-week cycle."})]})]})},kI=({title:t,isCompleted:e,type:n,onToggle:i,onOpenDetails:r,colorClass:s})=>l.jsxs("div",{onClick:a=>{a.stopPropagation(),r()},className:`group flex items-center gap-3 p-2 rounded-lg border mb-1 cursor-pointer transition-all ${e?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/20 hover:border-life-gold/30 hover:bg-life-muted/5"}`,children:[l.jsx("div",{onClick:a=>{a.stopPropagation(),i()},className:`w-6 h-6 rounded flex items-center justify-center transition-all cursor-pointer z-10 hover:scale-110 ${e?"bg-life-muted border border-life-muted text-life-black":"border-2 border-life-muted/30 text-transparent hover:border-life-gold"}`,children:l.jsx(Ws,{size:14,strokeWidth:4,className:e?"scale-100":"scale-0"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:`text-xs font-medium truncate ${e?"line-through text-life-muted":"text-life-text"}`,children:t})}),n==="raid"&&l.jsx("div",{className:`px-1.5 py-0.5 rounded text-[8px] font-black uppercase tracking-wider ${s} bg-opacity-10`,children:"OP"})]}),tQ=()=>{const{campaignState:t,campaignDispatch:e}=md(),{taskState:n,taskDispatch:i}=Oi(),{raidState:r,raidDispatch:s}=ls(),{state:a,dispatch:u}=De(),{campaign:f}=t,{unlockAllWeeks:d}=a.user.preferences,[p,m]=C.useState(null),y=()=>{u.setModal("confirmation",{title:"Abort Campaign?",message:"Terminate timeline? All schedule data will be lost.",confirmText:"Abort Protocol",isDangerous:!0,onConfirm:()=>e.resetCampaign()})},b=(O,P)=>{const I=new Date(O),A=new Date(I.getTime()+(P-1)*7*864e5),M=new Date(A.getTime()+6*864e5),H={month:"short",day:"numeric"};return`${A.toLocaleDateString(void 0,H)} - ${M.toLocaleDateString(void 0,H)}`},S=(O,P,I)=>new Date(new Date(O).getTime()+((P-1)*7+(I-1))*864e5).toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),N=(O,P,I)=>{const A=new Date(new Date(O).getTime()+((P-1)*7+(I-1))*864e5),M=H=>H.toString().padStart(2,"0");return`${A.getFullYear()}-${M(A.getMonth()+1)}-${M(A.getDate())}T12:00`},E=O=>{if(!f.startDate)return{tasks:[],raidSteps:[]};const P=new Date(f.startDate),I=new Date(P.getTime()+(O-1)*7*864e5);I.setHours(0,0,0,0);const A=new Date(I.getTime()+6*864e5);A.setHours(23,59,59,999);const M=n.tasks.filter(F=>{if(!F.deadline||F.isArchived)return!1;const D=new Date(F.deadline);return D>=I&&D<=A}),H=[];return r.raids.forEach(F=>{F.status!=="archived"&&F.steps.forEach(D=>{if(D.scheduledDate&&!D.isArchived){const z=new Date(D.scheduledDate);z>=I&&z<=A&&H.push({raidId:F.id,raidTitle:F.title,step:D})}})}),{weekTasks:M,weekRaidSteps:H}},R=()=>{if(!f.startDate)return{grade:"F",completionRate:0,totalTasks:0,completedTasks:0,raidCount:0};const O=new Date(f.startDate);let P=0,I=0,A=0;n.tasks.forEach(F=>{F.isArchived||F.deadline&&new Date(F.deadline)>=O&&(P++,F.isCompleted&&I++)}),r.raids.forEach(F=>{F.status==="completed"&&A++});const M=P>0?Math.round(I/P*100):0;let H="F";return M>=95?H="S":M>=85?H="A":M>=70?H="B":M>=50?H="C":M>=30&&(H="D"),{grade:H,completionRate:M,totalTasks:P,completedTasks:I,raidCount:A}};if(!f.isActive||!f.startDate)return l.jsx(ZJ,{onStart:e.initCampaign});const U=f.currentWeek>=13,j=Math.min(100,(f.currentWeek-1)/12*100),B=Array.from({length:13},(O,P)=>P+1);return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase truncate max-w-[200px] sm:max-w-none",children:f.title}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-bold uppercase tracking-wider ${f.isFrozen?"bg-blue-500/20 text-blue-400":"bg-life-gold/20 text-life-gold"}`,children:f.isFrozen?" Frozen":U?" Harvest":`Week ${f.currentWeek} / 12`}),!U&&l.jsxs("span",{className:"text-[10px] text-life-muted uppercase tracking-widest",children:[" Day ",f.currentDay]})]})]}),l.jsxs("div",{className:"text-life-gold opacity-50 flex items-center gap-2",children:[d&&l.jsx("span",{title:"Horus Eye Active",children:l.jsx(Ly,{size:16,className:"animate-pulse text-life-crimson"})}),l.jsx(Ir,{size:24})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"h-2 w-full bg-life-black rounded-full overflow-hidden border border-life-muted/20 relative",children:l.jsx("div",{className:`h-full transition-all duration-1000 ${f.isFrozen?"bg-blue-500":"bg-life-gold"}`,style:{width:`${j}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-[9px] text-life-muted uppercase font-mono",children:[l.jsx("span",{children:"Start"}),l.jsx("span",{children:"Week 6"}),l.jsx("span",{children:"Harvest"})]})]}),l.jsx("div",{className:"space-y-3",children:B.map(O=>{const P=O<f.currentWeek,I=O===f.currentWeek,A=I||d&&!P,M=O===13,H=b(f.startDate,O),{weekTasks:F,weekRaidSteps:D}=E(O),z=F.length>0||D.length>0,$=F.filter(X=>X.isCompleted).length+D.filter(X=>X.step.isCompleted).length,Y=F.length+D.length,W=Y>0?Math.round($/Y*100):0;if(M)return l.jsx(eQ,{stats:R(),onComplete:e.completeCampaign},O);if(P){const X=p===O;return l.jsxs("div",{onClick:()=>m(X?null:O),className:`border-l-4 rounded-r-lg bg-life-black transition-all cursor-pointer group ${X?"border-life-muted/50 bg-life-paper pb-2":"border-life-muted/20 opacity-60 hover:opacity-100"}`,children:[l.jsxs("div",{className:"p-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"w-6 h-6 rounded bg-life-muted/20 flex items-center justify-center text-[10px] font-bold text-life-muted",children:["W",O]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-life-muted group-hover:text-life-text transition-colors flex items-center gap-2",children:[l.jsxs("span",{className:"line-through",children:["Week ",O]}),l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-life-muted/10 text-life-muted no-underline",children:"COMPLETE"})]}),l.jsxs("p",{className:"text-[9px] text-life-muted/50 font-mono mt-0.5",children:[H,"  ",W,"% Executed"]})]})]}),l.jsx("div",{className:"text-life-muted",children:X?l.jsx(Pi,{size:14}):l.jsx(Ws,{size:14})})]}),X&&l.jsxs("div",{className:"px-3 pt-0 animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"h-px w-full bg-life-muted/10 mb-2"}),z?l.jsxs("div",{className:"space-y-1 opacity-70",children:[F.map(oe=>l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-life-muted line-through",children:[l.jsx(Tr,{size:10})," ",oe.title]},oe.id)),D.map(({raidTitle:oe,step:ve})=>l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-life-muted line-through",children:[l.jsx(Sc,{size:10})," ",oe,": ",ve.title]},ve.id))]}):l.jsx("p",{className:"text-[10px] text-life-muted italic",children:"No logs recorded."})]})]},O)}return A?l.jsxs("div",{className:`relative rounded-xl border ${I?"border-life-gold bg-life-paper":"border-life-muted/30 bg-life-black/50 border-dashed"} shadow-[0_0_15px_rgba(251,191,36,0.05)] overflow-hidden`,children:[f.isFrozen&&I&&l.jsx("div",{className:"absolute inset-0 bg-blue-500/10 backdrop-blur-[1px] z-10 flex items-center justify-center border border-blue-500/30 rounded-xl",children:l.jsxs("div",{className:"bg-life-black px-4 py-2 rounded-full border border-blue-500 text-blue-400 flex items-center gap-2 text-xs font-bold uppercase tracking-widest shadow-xl",children:[l.jsx(SI,{size:14})," Timeline Frozen"]})}),l.jsxs("div",{className:`p-4 border-b border-life-muted/10 flex justify-between items-start ${I?"bg-life-gold/5":"bg-transparent"}`,children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsxs("span",{className:`text-xs font-black uppercase tracking-wider ${I?"text-life-gold":"text-life-muted"}`,children:["Week ",O]}),I&&l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),!I&&d&&l.jsx("div",{className:"text-[8px] border border-life-crimson text-life-crimson px-1 rounded uppercase",children:"God Mode"})]}),l.jsxs("div",{className:"text-[10px] font-mono text-life-muted flex items-center gap-1",children:[l.jsx(Jt,{size:10})," ",H]})]}),I&&l.jsx("div",{className:"text-[10px] px-2 py-1 rounded bg-life-gold text-life-black font-bold uppercase tracking-widest shadow-sm",children:"Current Front"})]}),l.jsx("div",{className:"p-2 space-y-2",children:[1,2,3,4,5,6,7].map(X=>{const oe=X===f.currentDay&&I,ve=F.filter(te=>new Date(te.deadline).getDate()===new Date(new Date(f.startDate).getTime()+((O-1)*7+(X-1))*864e5).getDate()),Ee=D.filter(({step:te})=>new Date(te.scheduledDate).getDate()===new Date(new Date(f.startDate).getTime()+((O-1)*7+(X-1))*864e5).getDate()),K=ve.length>0||Ee.length>0;return!oe&&!K?null:l.jsxs("div",{className:`rounded-lg border ${oe?"border-life-gold/30 bg-life-gold/5":"border-life-muted/10 bg-life-black/50"} p-2`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:`text-[10px] font-black uppercase ${oe?"text-life-gold":"text-life-muted"}`,children:["Day ",X]}),l.jsx("span",{className:"text-[9px] text-life-muted font-mono opacity-70",children:S(f.startDate,O,X)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[oe&&l.jsx("span",{className:"text-[8px] px-1 rounded bg-life-gold text-life-black font-bold uppercase",children:"Today"}),l.jsx("button",{onClick:()=>u.setModal("addTask",{date:N(f.startDate,O,X),origin:"campaign"}),className:"w-5 h-5 rounded flex items-center justify-center bg-life-muted/10 hover:bg-life-gold text-life-muted hover:text-life-black transition-all",title:"Tactical Insert",children:l.jsx(wn,{size:12})})]})]}),K?l.jsxs("div",{className:"space-y-1",children:[ve.map(te=>l.jsx(kI,{title:te.title,isCompleted:te.isCompleted,type:"mission",onToggle:()=>i.toggleTask(te.id),onOpenDetails:()=>u.setModal("itemDetails",{itemId:te.id,type:"task"}),colorClass:"text-life-text"},te.id)),Ee.map(({raidId:te,raidTitle:ge,step:Z})=>l.jsx(kI,{title:`${ge}: ${Z.title}`,isCompleted:Z.isCompleted,type:"raid",onToggle:()=>s.toggleRaidStep(te,Z.id),onOpenDetails:()=>u.setModal("itemDetails",{itemId:Z.id,parentId:te,type:"raid_step"}),colorClass:"text-life-hard"},Z.id))]}):l.jsx("div",{className:"text-[9px] text-life-muted/30 italic text-center py-2 border border-dashed border-life-muted/10 rounded",children:"No tactical objectives."})]},X)})})]},O):l.jsxs("div",{className:"border border-life-muted/10 rounded-xl bg-life-black opacity-60 hover:opacity-100 transition-opacity",children:[l.jsxs("div",{className:"p-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded bg-life-muted/10 flex items-center justify-center text-xs font-bold text-life-muted",children:O}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-life-text uppercase tracking-wider",children:["Week ",O]}),l.jsxs("p",{className:"text-[9px] text-life-muted font-mono",children:[H,"  ",Y," Objectives"]})]})]}),l.jsx(hd,{size:14,className:"text-life-muted/30"})]}),z&&l.jsxs("div",{className:"px-3 pb-3 pt-0",children:[l.jsx("div",{className:"h-px w-full bg-life-muted/10 mb-2"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.map(X=>l.jsx("div",{className:"w-2 h-2 rounded-full bg-life-muted",title:X.title},X.id)),D.map(({raidTitle:X,step:oe})=>l.jsx("div",{className:"w-2 h-2 rounded-full bg-life-hard",title:`${X}: ${oe.title}`},oe.id))]})]})]},O)})}),l.jsxs("div",{className:"mt-8 pt-8 border-t border-life-muted/10 flex justify-between",children:[l.jsxs("button",{onClick:e.toggleFreeze,className:`flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider transition-colors ${f.isFrozen?"text-blue-400 hover:text-blue-300":"text-life-muted hover:text-blue-400"}`,children:[l.jsx(SI,{size:14,className:f.isFrozen?"animate-pulse":""})," ",f.isFrozen?"Resume Timeline":"Freeze Time"]}),l.jsxs("button",{onClick:y,className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-life-muted hover:text-life-hard transition-colors",children:[l.jsx(bT,{size:14})," Abort Campaign"]})]})]})},nQ=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Qt,{size:e})}},II={Novice:"text-life-muted border-life-muted",Adept:"text-life-normal border-life-normal",Expert:"text-purple-400 border-purple-400",Master:"text-life-gold border-life-gold",Grandmaster:"text-life-diamond border-life-diamond"},iQ=({skill:t})=>{const{skillDispatch:e}=Sn(),n=Math.min(100,t.currentXP/t.targetXP*100),i=II[t.rank]||II.Novice,r=i.split(" ")[0];return l.jsxs("div",{onClick:()=>e.setActiveSkill(t.id),className:`
                relative bg-life-paper border rounded-xl overflow-hidden mb-3 transition-all duration-200 
                hover:bg-life-muted/5 hover:scale-[1.01] active:scale-[0.99] cursor-pointer group 
                ${t.isRusty?"border-orange-900/50":"border-zinc-800"}
            `,children:[t.isRusty&&l.jsx("div",{className:"absolute top-2 right-2 text-orange-500 animate-pulse",title:"Skill is Rusty! Perform tasks to restore.",children:l.jsx(Bo,{size:16})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-base font-bold text-life-text flex items-center gap-2 ${t.isRusty?"text-life-muted line-through opacity-70":""}`,children:t.title}),l.jsx("div",{className:"flex gap-1 mt-1",children:t.relatedStats.map(s=>l.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-life-black border border-zinc-800 text-[9px] font-bold",style:{color:xt[s],borderColor:`${xt[s]}30`},children:[l.jsx(nQ,{stat:s,size:10}),l.jsx("span",{children:s})]},s))})]}),l.jsx("div",{className:`px-2 py-1 rounded border bg-life-black text-[10px] uppercase font-black tracking-wider ${i} bg-opacity-20`,children:t.rank})]}),t.description&&l.jsx("p",{className:"text-xs text-life-muted/60 mb-3 line-clamp-1",children:t.description}),l.jsxs("div",{className:"relative pt-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] font-mono font-bold mb-1",children:[l.jsxs("span",{className:r,children:["LVL ",t.level]}),l.jsxs("span",{className:"text-life-muted",children:[t.currentXP," / ",t.targetXP," XP"]})]}),l.jsx("div",{className:"h-1.5 w-full bg-life-black rounded-full overflow-hidden border border-zinc-800",children:l.jsx("div",{className:`h-full transition-all duration-700 ${t.isRusty?"bg-life-muted":"bg-current"}`,style:{width:`${n}%`,color:t.rank==="Novice"?"#9ca3af":void 0},children:l.jsx("div",{className:`w-full h-full ${r.replace("text-","bg-")} opacity-80 shadow-[0_0_10px_currentColor]`})})})]})]})]})},B3=({onClose:t,initialData:e})=>{const{skillDispatch:n}=Sn(),[i,r]=C.useState(""),[s,a]=C.useState(""),[u,f]=C.useState([]);C.useEffect(()=>{e&&(r(e.title),a(e.description||""),f(e.relatedStats||[]))},[e]);const d=y=>{y.preventDefault(),i.trim()&&u.length!==0&&(e?n.updateSkill(e.id,{title:i,description:s,relatedStats:u}):n.addSkill(i,u,s),t())},p=y=>{u.includes(y)?f(u.filter(b=>b!==y)):u.length<3&&f([...u,y])},m=({type:y})=>{switch(y){case ee.STR:return l.jsx(ir,{size:18});case ee.INT:return l.jsx(_n,{size:18});case ee.DIS:return l.jsx(bt,{size:18});case ee.HEA:return l.jsx(kr,{size:18});case ee.CRT:return l.jsx(pi,{size:18});case ee.SPR:return l.jsx(hi,{size:18});case ee.REL:return l.jsx(Rr,{size:18});case ee.FIN:return l.jsx(ii,{size:18});default:return l.jsx(Qt,{size:18})}};return l.jsxs("form",{onSubmit:d,className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Skill Name"}),l.jsx("input",{type:"text",value:i,onChange:y=>r(y.target.value),placeholder:"e.g. Graphic Design, MMA...",autoFocus:!0,className:"w-full bg-life-black border border-zinc-800 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Description"}),l.jsx("textarea",{rows:2,value:s,onChange:y=>a(y.target.value),placeholder:"Define the scope of this ability...",className:"w-full bg-life-black border border-zinc-800 rounded-lg p-3 text-sm text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Parent Attributes (Select 1-3)"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ee).map(y=>{const b=u.includes(y);return l.jsxs("button",{type:"button",onClick:()=>p(y),className:`
                                    flex flex-col items-center justify-center p-2 rounded-lg border transition-all aspect-square relative
                                    ${b?"bg-life-muted/10 border-current shadow-lg scale-105":"border-zinc-800 text-life-muted hover:bg-life-muted/5 opacity-70 hover:opacity-100"}
                                `,style:{color:b?xt[y]:void 0},children:[l.jsx(m,{type:y}),l.jsx("span",{className:"text-[9px] font-bold mt-1",children:y}),b&&l.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full bg-current shadow-[0_0_5px_currentColor]"})]},y)})}),u.length===0&&l.jsx("p",{className:"text-[10px] text-life-hard mt-2 opacity-80",children:"* Required: Link at least one attribute."})]}),l.jsxs("button",{type:"submit",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all mt-4
                    ${i&&u.length>0?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]":"border-zinc-800 text-life-muted cursor-not-allowed"}
                `,disabled:!i||u.length===0,children:[e?"Update Skill":"Acquire Skill"," ",l.jsx(xi,{size:16})]})]})},rQ=()=>{const{skillState:t}=Sn(),{dispatch:e}=De(),{skills:n}=t,[i,r]=C.useState(!1),s=[...n].sort((u,f)=>u.isRusty&&!f.isRusty?-1:!u.isRusty&&f.isRusty?1:f.level-u.level),a=()=>{const u={meta:{type:"SKILL_ARSENAL_EXPORT",generatedAt:new Date().toISOString(),count:n.length},skills:n.map(d=>({id:d.id,title:d.title,level:d.level,rank:d.rank,relatedStats:d.relatedStats,description:d.description,currentXP:d.currentXP,targetXP:d.targetXP,isRusty:d.isRusty}))},f=JSON.stringify(u,null,2);e.setModal("dataExchange",{mode:"export",title:"The Arsenal Codex",data:f})};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"THE ARSENAL"}),l.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:["Skill Tree  ",n.length," Abilities Acquired"]})]}),l.jsx("button",{onClick:a,className:"p-3 rounded-xl bg-life-paper/50 border border-zinc-800 text-life-gold hover:bg-life-gold/10 hover:border-life-gold/50 transition-all group active:scale-95",title:"Export Skill Codex",children:l.jsx(Sr,{size:20,className:"group-hover:scale-110 transition-transform"})})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:()=>r(!0),className:"w-full py-3 rounded-xl border border-dashed border-zinc-800 bg-life-paper/50 text-life-muted hover:text-life-gold hover:border-life-gold/50 hover:bg-life-gold/5 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest group",children:[l.jsx(wn,{size:16,className:"group-hover:scale-110 transition-transform"}),"Acquire New Skill"]})}),l.jsx("div",{children:s.length>0?s.map(u=>l.jsx(iQ,{skill:u},u.id)):l.jsxs("div",{className:"py-12 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/30",children:[l.jsx(bt,{size:32,className:"mx-auto text-life-muted mb-3 opacity-50"}),l.jsx("p",{className:"text-life-muted text-sm font-bold",children:"No Skills Learned"}),l.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1 uppercase tracking-wider",children:"Acquire new skills to track your progress."})]})}),i&&l.jsx("div",{onClick:()=>r(!1),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{onClick:u=>u.stopPropagation(),className:"bg-life-paper w-full max-w-lg rounded-2xl border border-zinc-800 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-life-black/50",children:[l.jsxs("h3",{className:"text-sm font-black tracking-tight text-life-text flex items-center gap-2 uppercase",children:[l.jsx(Sr,{size:16,className:"text-life-gold"})," Acquire Skill"]}),l.jsx("button",{onClick:()=>r(!1),className:"w-8 h-8 rounded-full flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/20 transition-all",children:l.jsx(dt,{size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsx(B3,{onClose:()=>r(!1)})})]})})]})};function $3(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=$3(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Lt(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=$3(t))&&(i&&(i+=" "),i+=e);return i}var sQ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ET(t){if(typeof t!="string")return!1;var e=sQ;return e.includes(t)}var oQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aQ=new Set(oQ);function q3(t){return typeof t!="string"?!1:aQ.has(t)}function G3(t){return typeof t=="string"&&t.startsWith("data-")}function Xs(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(q3(n)||G3(n))&&(e[n]=t[n]);return e}function By(t){if(t==null)return null;if(C.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Xs(e)}return typeof t=="object"&&!Array.isArray(t)?Xs(t):null}function Er(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(q3(n)||G3(n)||ET(n))&&(e[n]=t[n]);return e}function lQ(t){return t==null?null:C.isValidElement(t)?Er(t.props):typeof t=="object"&&!Array.isArray(t)?Er(t):null}var cQ=["children","width","height","viewBox","className","style","title","desc"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fw.apply(null,arguments)}function uQ(t,e){if(t==null)return{};var n,i,r=dQ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var K3=C.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:s,className:a,style:u,title:f,desc:d}=t,p=uQ(t,cQ),m=s||{width:i,height:r,x:0,y:0},y=Lt("recharts-surface",a);return C.createElement("svg",fw({},Er(p),{className:y,width:i,height:r,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:e}),C.createElement("title",null,f),C.createElement("desc",null,d),n)}),fQ=["children","className"];function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hw.apply(null,arguments)}function hQ(t,e){if(t==null)return{};var n,i,r=pQ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Js=C.forwardRef((t,e)=>{var{children:n,className:i}=t,r=hQ(t,fQ),s=Lt("recharts-layer",i);return C.createElement("g",hw({className:s},Er(r),{ref:e}),n)}),Y3=FO(),mQ=C.createContext(null);function Wt(t){return function(){return t}}const pw=Math.PI,mw=2*pw,Bl=1e-6,gQ=mw-Bl;function W3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yQ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return W3;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class vQ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?W3:yQ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,f=i-e,d=r-n,p=a-e,m=u-n,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>Bl)if(!(Math.abs(m*f-d*p)>Bl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let b=i-a,S=r-u,N=f*f+d*d,E=b*b+S*S,R=Math.sqrt(N),U=Math.sqrt(y),j=s*Math.tan((pw-Math.acos((N+y-E)/(2*R*U)))/2),B=j/U,O=j/R;Math.abs(B-1)>Bl&&this._append`L${e+B*p},${n+B*m}`,this._append`A${s},${s},0,0,${+(m*b>p*S)},${this._x1=e+O*f},${this._y1=n+O*d}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),f=i*Math.sin(r),d=e+u,p=n+f,m=1^a,y=a?r-s:s-r;this._x1===null?this._append`M${d},${p}`:(Math.abs(this._x1-d)>Bl||Math.abs(this._y1-p)>Bl)&&this._append`L${d},${p}`,i&&(y<0&&(y=y%mw+mw),y>gQ?this._append`A${i},${i},0,1,${m},${e-u},${n-f}A${i},${i},0,1,${m},${this._x1=d},${this._y1=p}`:y>Bl&&this._append`A${i},${i},0,${+(y>=pw)},${m},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function X3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new vQ(e)}function NT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function J3(t){this._context=t}J3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function $y(t){return new J3(t)}function Q3(t){return t[0]}function Z3(t){return t[1]}function eL(t,e){var n=Wt(!0),i=null,r=$y,s=null,a=X3(u);t=typeof t=="function"?t:t===void 0?Q3:Wt(t),e=typeof e=="function"?e:e===void 0?Z3:Wt(e);function u(f){var d,p=(f=NT(f)).length,m,y=!1,b;for(i==null&&(s=r(b=a())),d=0;d<=p;++d)!(d<p&&n(m=f[d],d,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+t(m,d,f),+e(m,d,f));if(b)return s=null,b+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Wt(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Wt(+f),u):e},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Wt(!!f),u):n},u.curve=function(f){return arguments.length?(r=f,i!=null&&(s=r(i)),u):r},u.context=function(f){return arguments.length?(f==null?i=s=null:s=r(i=f),u):i},u}function rg(t,e,n){var i=null,r=Wt(!0),s=null,a=$y,u=null,f=X3(d);t=typeof t=="function"?t:t===void 0?Q3:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Z3:Wt(+n);function d(m){var y,b,S,N=(m=NT(m)).length,E,R=!1,U,j=new Array(N),B=new Array(N);for(s==null&&(u=a(U=f())),y=0;y<=N;++y){if(!(y<N&&r(E=m[y],y,m))===R)if(R=!R)b=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=b;--S)u.point(j[S],B[S]);u.lineEnd(),u.areaEnd()}R&&(j[y]=+t(E,y,m),B[y]=+e(E,y,m),u.point(i?+i(E,y,m):j[y],n?+n(E,y,m):B[y]))}if(U)return u=null,U+""||null}function p(){return eL().defined(r).curve(a).context(s)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:Wt(+m),i=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Wt(+m),d):t},d.x1=function(m){return arguments.length?(i=m==null?null:typeof m=="function"?m:Wt(+m),d):i},d.y=function(m){return arguments.length?(e=typeof m=="function"?m:Wt(+m),n=null,d):e},d.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Wt(+m),d):e},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Wt(+m),d):n},d.lineX0=d.lineY0=function(){return p().x(t).y(e)},d.lineY1=function(){return p().x(t).y(n)},d.lineX1=function(){return p().x(i).y(e)},d.defined=function(m){return arguments.length?(r=typeof m=="function"?m:Wt(!!m),d):r},d.curve=function(m){return arguments.length?(a=m,s!=null&&(u=a(s)),d):a},d.context=function(m){return arguments.length?(m==null?s=u=null:u=a(s=m),d):s},d}class tL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function xQ(t){return new tL(t,!0)}function bQ(t){return new tL(t,!1)}function w0(){}function S0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function nL(t){this._context=t}nL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:S0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:S0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _Q(t){return new nL(t)}function iL(t){this._context=t}iL.prototype={areaStart:w0,areaEnd:w0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:S0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wQ(t){return new iL(t)}function rL(t){this._context=t}rL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:S0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function SQ(t){return new rL(t)}function sL(t){this._context=t}sL.prototype={areaStart:w0,areaEnd:w0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function TQ(t){return new sL(t)}function RI(t){return t<0?-1:1}function jI(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),u=(s*r+a*i)/(i+r);return(RI(s)+RI(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(u))||0}function PI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function n1(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,u=(s-i)/3;t._context.bezierCurveTo(i+u,r+u*e,s-u,a-u*n,s,a)}function T0(t){this._context=t}T0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n1(this,this._t0,PI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,n1(this,PI(this,n=jI(this,t,e)),n);break;default:n1(this,this._t0,n=jI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function oL(t){this._context=new aL(t)}(oL.prototype=Object.create(T0.prototype)).point=function(t,e){T0.prototype.point.call(this,e,t)};function aL(t){this._context=t}aL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function EQ(t){return new T0(t)}function NQ(t){return new oL(t)}function lL(t){this._context=t}lL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=MI(t),r=MI(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function MI(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function CQ(t){return new lL(t)}function qy(t,e){this._context=t,this._t=e}qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function AQ(t){return new qy(t,.5)}function kQ(t){return new qy(t,0)}function IQ(t){return new qy(t,1)}function fc(t,e){if((a=t.length)>1)for(var n=1,i,r,s=t[e[0]],a,u=s.length;n<a;++n)for(r=s,s=t[e[n]],i=0;i<u;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function gw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function RQ(t,e){return t[e]}function jQ(t){const e=[];return e.key=t,e}function PQ(){var t=Wt([]),e=gw,n=fc,i=RQ;function r(s){var a=Array.from(t.apply(this,arguments),jQ),u,f=a.length,d=-1,p;for(const m of s)for(u=0,++d;u<f;++u)(a[u][d]=[0,+i(m,a[u].key,d,s)]).data=m;for(u=0,p=NT(e(a));u<f;++u)a[p[u]].index=u;return n(a,p),a}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Wt(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:Wt(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?gw:typeof s=="function"?s:Wt(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??fc,r):n},r}function MQ(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,a;r<s;++r){for(a=n=0;n<i;++n)a+=t[n][r][1]||0;if(a)for(n=0;n<i;++n)t[n][r][1]/=a}fc(t,e)}}function DQ(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var a=0,u=0;a<r;++a)u+=t[a][n][1]||0;i[n][1]+=i[n][0]=-u/2}fc(t,e)}}function OQ(t,e){if(!(!((a=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,a;i<s;++i){for(var u=0,f=0,d=0;u<a;++u){for(var p=t[e[u]],m=p[i][1]||0,y=p[i-1][1]||0,b=(m-y)/2,S=0;S<u;++S){var N=t[e[S]],E=N[i][1]||0,R=N[i-1][1]||0;b+=E-R}f+=m,d+=b*m}r[i-1][1]+=r[i-1][0]=n,f&&(n-=d/f)}r[i-1][1]+=r[i-1][0]=n,fc(t,e)}}var i1={},r1={},DI;function LQ(){return DI||(DI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(r1)),r1}var s1={},OI;function cL(){return OI||(OI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(s1)),s1}var o1={},LI;function CT(){return LI||(LI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;return typeof n=="string"||typeof n=="symbol"?n:Object.is((i=n==null?void 0:n.valueOf)==null?void 0:i.call(n),-0)?"-0":String(n)}t.toKey=e})(o1)),o1}var a1={},l1={},zI;function zQ(){return zI||(zI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(l1)),l1}var UI;function AT(){return UI||(UI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zQ(),n=CT();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const s=[],a=r.length;if(a===0)return s;let u=0,f="",d="",p=!1;for(r.charCodeAt(0)===46&&(s.push(""),u++);u<a;){const m=r[u];d?m==="\\"&&u+1<a?(u++,f+=r[u]):m===d?d="":f+=m:p?m==='"'||m==="'"?d=m:m==="]"?(p=!1,s.push(f),f=""):f+=m:m==="["?(p=!0,f&&(s.push(f),f="")):m==="."?f&&(s.push(f),f=""):f+=m,u++}return f&&s.push(f),s}t.toPath=i})(a1)),a1}var VI;function kT(){return VI||(VI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LQ(),n=cL(),i=CT(),r=AT();function s(u,f,d){if(u==null)return d;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return d;const p=u[f];return p===void 0?n.isDeepKey(f)?s(u,r.toPath(f),d):d:p}case"number":case"symbol":{typeof f=="number"&&(f=i.toKey(f));const p=u[f];return p===void 0?d:p}default:{if(Array.isArray(f))return a(u,f,d);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return d;const p=u[f];return p===void 0?d:p}}}function a(u,f,d){if(f.length===0)return d;let p=u;for(let m=0;m<f.length;m++){if(p==null||e.isUnsafeProperty(f[m]))return d;p=p[f[m]]}return p===void 0?d:p}t.get=s})(i1)),i1}var c1,FI;function UQ(){return FI||(FI=1,c1=kT().get),c1}var VQ=UQ();const Gy=Fo(VQ);var FQ=4;function Fa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FQ,n=10**e,i=Math.round(t*n)/n;return Object.is(i,-0)?0:i}function Wn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.reduce((r,s,a)=>{var u=n[a-1];return typeof u=="string"?r+u+s:u!==void 0?r+Fa(u)+s:r+s},"")}var es=t=>t===0?0:t>0?1:-1,Qs=t=>typeof t=="number"&&t!=+t,hc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,ze=t=>(typeof t=="number"||t instanceof Number)&&!Qs(t),Zs=t=>ze(t)||typeof t=="string",HQ=0,Nh=t=>{var e=++HQ;return"".concat(t||"").concat(e)},rl=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ze(e)&&typeof e!="string")return i;var s;if(hc(e)){if(n==null)return i;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Qs(s)&&(s=i),r&&n!=null&&s>n&&(s=n),s},uL=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[String(t[i])])n[String(t[i])]=!0;else return!0;return!1};function Ds(t,e,n){return ze(t)&&ze(e)?Fa(t+n*(e-t)):e}function dL(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):Gy(i,e))===n)}var fi=t=>t===null||typeof t>"u",IT=t=>fi(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Ls(t){return t!=null}function gd(){}var fL=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,RT=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{ET(r)&&(i[r]=(s=>n[r](n,s)))}),i},BQ=(t,e,n)=>i=>(t(e,n,i),null),$Q=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var s=t[r];ET(r)&&typeof s=="function"&&(i||(i={}),i[r]=BQ(s,e,n))}),i};function HI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function qQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HI(Object(n),!0).forEach(function(i){GQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function GQ(t,e,n){return(e=KQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KQ(t){var e=YQ(t,"string");return typeof e=="symbol"?e:e+""}function YQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jr(t,e){var n=qQ({},t),i=e,r=Object.keys(e),s=r.reduce((a,u)=>(a[u]===void 0&&i[u]!==void 0&&(a[u]=i[u]),a),n);return s}var u1={},d1={},BI;function WQ(){return BI||(BI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let s=0;s<n.length;s++){const a=n[s],u=i(a,s,n);r.has(u)||r.set(u,a)}return Array.from(r.values())}t.uniqBy=e})(d1)),d1}var f1={},$I;function XQ(){return $I||($I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return function(...r){return n.apply(this,r.slice(0,i))}}t.ary=e})(f1)),f1}var h1={},qI;function hL(){return qI||(qI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(h1)),h1}var p1={},m1={},g1={},GI;function JQ(){return GI||(GI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(g1)),g1}var KI;function jT(){return KI||(KI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JQ();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(m1)),m1}var y1={},YI;function QQ(){return YI||(YI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(y1)),y1}var WI;function ZQ(){return WI||(WI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jT(),n=QQ();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(p1)),p1}var v1={},x1={},XI;function eZ(){return XI||(XI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kT();function n(i){return function(r){return e.get(r,i)}}t.property=n})(x1)),x1}var b1={},_1={},w1={},S1={},JI;function pL(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(S1)),S1}var T1={},QI;function mL(){return QI||(QI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(T1)),T1}var E1={},ZI;function gL(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.isEqualsSameValueZero=e})(E1)),E1}var eR;function tZ(){return eR||(eR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pL(),n=mL(),i=gL();function r(p,m,y){return typeof y!="function"?r(p,m,()=>{}):s(p,m,function b(S,N,E,R,U,j){const B=y(S,N,E,R,U,j);return B!==void 0?!!B:s(S,N,b,j)},new Map)}function s(p,m,y,b){if(m===p)return!0;switch(typeof m){case"object":return a(p,m,y,b);case"function":return Object.keys(m).length>0?s(p,{...m},y,b):i.isEqualsSameValueZero(p,m);default:return e.isObject(p)?typeof m=="string"?m==="":!0:i.isEqualsSameValueZero(p,m)}}function a(p,m,y,b){if(m==null)return!0;if(Array.isArray(m))return f(p,m,y,b);if(m instanceof Map)return u(p,m,y,b);if(m instanceof Set)return d(p,m,y,b);const S=Object.keys(m);if(p==null||n.isPrimitive(p))return S.length===0;if(S.length===0)return!0;if(b!=null&&b.has(m))return b.get(m)===p;b==null||b.set(m,p);try{for(let N=0;N<S.length;N++){const E=S[N];if(!n.isPrimitive(p)&&!(E in p)||m[E]===void 0&&p[E]!==void 0||m[E]===null&&p[E]!==null||!y(p[E],m[E],E,p,m,b))return!1}return!0}finally{b==null||b.delete(m)}}function u(p,m,y,b){if(m.size===0)return!0;if(!(p instanceof Map))return!1;for(const[S,N]of m.entries()){const E=p.get(S);if(y(E,N,S,p,m,b)===!1)return!1}return!0}function f(p,m,y,b){if(m.length===0)return!0;if(!Array.isArray(p))return!1;const S=new Set;for(let N=0;N<m.length;N++){const E=m[N];let R=!1;for(let U=0;U<p.length;U++){if(S.has(U))continue;const j=p[U];let B=!1;if(y(j,E,N,p,m,b)&&(B=!0),B){S.add(U),R=!0;break}}if(!R)return!1}return!0}function d(p,m,y,b){return m.size===0?!0:p instanceof Set?f([...p],[...m],y,b):!1}t.isMatchWith=r,t.isSetMatch=d})(w1)),w1}var tR;function yL(){return tR||(tR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tZ();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(_1)),_1}var N1={},C1={},A1={},nR;function nZ(){return nR||(nR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(A1)),A1}var k1={},iR;function PT(){return iR||(iR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(k1)),k1}var I1={},rR;function vL(){return rR||(rR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",s="[object Arguments]",a="[object Symbol]",u="[object Date]",f="[object Map]",d="[object Set]",p="[object Array]",m="[object Function]",y="[object ArrayBuffer]",b="[object Object]",S="[object Error]",N="[object DataView]",E="[object Uint8Array]",R="[object Uint8ClampedArray]",U="[object Uint16Array]",j="[object Uint32Array]",B="[object BigUint64Array]",O="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",A="[object BigInt64Array]",M="[object Float32Array]",H="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=y,t.arrayTag=p,t.bigInt64ArrayTag=A,t.bigUint64ArrayTag=B,t.booleanTag=r,t.dataViewTag=N,t.dateTag=u,t.errorTag=S,t.float32ArrayTag=M,t.float64ArrayTag=H,t.functionTag=m,t.int16ArrayTag=P,t.int32ArrayTag=I,t.int8ArrayTag=O,t.mapTag=f,t.numberTag=i,t.objectTag=b,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=U,t.uint32ArrayTag=j,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=R})(I1)),I1}var R1={},sR;function iZ(){return sR||(sR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(R1)),R1}var oR;function xL(){return oR||(oR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nZ(),n=PT(),i=vL(),r=mL(),s=iZ();function a(p,m){return u(p,void 0,p,new Map,m)}function u(p,m,y,b=new Map,S=void 0){const N=S==null?void 0:S(p,m,y,b);if(N!==void 0)return N;if(r.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const E=new Array(p.length);b.set(p,E);for(let R=0;R<p.length;R++)E[R]=u(p[R],R,y,b,S);return Object.hasOwn(p,"index")&&(E.index=p.index),Object.hasOwn(p,"input")&&(E.input=p.input),E}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const E=new RegExp(p.source,p.flags);return E.lastIndex=p.lastIndex,E}if(p instanceof Map){const E=new Map;b.set(p,E);for(const[R,U]of p)E.set(R,u(U,R,y,b,S));return E}if(p instanceof Set){const E=new Set;b.set(p,E);for(const R of p)E.add(u(R,void 0,y,b,S));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const E=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,E);for(let R=0;R<p.length;R++)E[R]=u(p[R],R,y,b,S);return E}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const E=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,E),f(E,p,y,b,S),E}if(typeof File<"u"&&p instanceof File){const E=new File([p],p.name,{type:p.type});return b.set(p,E),f(E,p,y,b,S),E}if(typeof Blob<"u"&&p instanceof Blob){const E=new Blob([p],{type:p.type});return b.set(p,E),f(E,p,y,b,S),E}if(p instanceof Error){const E=new p.constructor;return b.set(p,E),E.message=p.message,E.name=p.name,E.stack=p.stack,E.cause=p.cause,f(E,p,y,b,S),E}if(p instanceof Boolean){const E=new Boolean(p.valueOf());return b.set(p,E),f(E,p,y,b,S),E}if(p instanceof Number){const E=new Number(p.valueOf());return b.set(p,E),f(E,p,y,b,S),E}if(p instanceof String){const E=new String(p.valueOf());return b.set(p,E),f(E,p,y,b,S),E}if(typeof p=="object"&&d(p)){const E=Object.create(Object.getPrototypeOf(p));return b.set(p,E),f(E,p,y,b,S),E}return p}function f(p,m,y=p,b,S){const N=[...Object.keys(m),...e.getSymbols(m)];for(let E=0;E<N.length;E++){const R=N[E],U=Object.getOwnPropertyDescriptor(p,R);(U==null||U.writable)&&(p[R]=u(m[R],R,y,b,S))}}function d(p){switch(n.getTag(p)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=u,t.copyProperties=f})(C1)),C1}var aR;function rZ(){return aR||(aR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xL();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(N1)),N1}var lR;function sZ(){return lR||(lR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yL(),n=rZ();function i(r){return r=n.cloneDeep(r),s=>e.isMatch(s,r)}t.matches=i})(b1)),b1}var j1={},P1={},M1={},cR;function oZ(){return cR||(cR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xL(),n=PT(),i=vL();function r(s,a){return e.cloneDeepWith(s,(u,f,d,p)=>{const m=a==null?void 0:a(u,f,d,p);if(m!==void 0)return m;if(typeof s=="object"){if(n.getTag(s)===i.objectTag&&typeof s.constructor!="function"){const y={};return p.set(s,y),e.copyProperties(y,s,d,p),y}switch(Object.prototype.toString.call(s)){case i.numberTag:case i.stringTag:case i.booleanTag:{const y=new s.constructor(s==null?void 0:s.valueOf());return e.copyProperties(y,s),y}case i.argumentsTag:{const y={};return e.copyProperties(y,s),y.length=s.length,y[Symbol.iterator]=s[Symbol.iterator],y}default:return}}})}t.cloneDeepWith=r})(M1)),M1}var uR;function aZ(){return uR||(uR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oZ();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(P1)),P1}var D1={},O1={},dR;function bL(){return dR||(dR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(O1)),O1}var L1={},fR;function lZ(){return fR||(fR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PT();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(L1)),L1}var hR;function cZ(){return hR||(hR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cL(),n=bL(),i=lZ(),r=AT();function s(a,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&e.isDeepKey(u)&&(a==null?void 0:a[u])==null?f=r.toPath(u):f=[u],f.length===0)return!1;let d=a;for(let p=0;p<f.length;p++){const m=f[p];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||i.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}t.has=s})(D1)),D1}var pR;function uZ(){return pR||(pR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yL(),n=CT(),i=aZ(),r=kT(),s=cZ();function a(u,f){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=i.cloneDeep(f),function(d){const p=r.get(d,u);return p===void 0?s.has(d,u):f===void 0?p===void 0:e.isMatch(p,f)}}t.matchesProperty=a})(j1)),j1}var mR;function dZ(){return mR||(mR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hL(),n=eZ(),i=sZ(),r=uZ();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?r.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(v1)),v1}var gR;function fZ(){return gR||(gR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WQ(),n=XQ(),i=hL(),r=ZQ(),s=dZ();function a(u,f=i.identity){return r.isArrayLikeObject(u)?e.uniqBy(Array.from(u),n.ary(s.iteratee(f),1)):[]}t.uniqBy=a})(u1)),u1}var z1,yR;function hZ(){return yR||(yR=1,z1=fZ().uniqBy),z1}var pZ=hZ();const vR=Fo(pZ);function mZ(t,e,n){return e===!0?vR(t,n):typeof e=="function"?vR(t,e):t}var U1={exports:{}},V1={},F1={exports:{}},H1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR;function gZ(){if(xR)return H1;xR=1;var t=id();function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function u(m,y){var b=y(),S=i({inst:{value:b,getSnapshot:y}}),N=S[0].inst,E=S[1];return s(function(){N.value=b,N.getSnapshot=y,f(N)&&E({inst:N})},[m,b,y]),r(function(){return f(N)&&E({inst:N}),m(function(){f(N)&&E({inst:N})})},[m]),a(b),b}function f(m){var y=m.getSnapshot;m=m.value;try{var b=y();return!n(m,b)}catch{return!0}}function d(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return H1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,H1}var bR;function yZ(){return bR||(bR=1,F1.exports=gZ()),F1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R;function vZ(){if(_R)return V1;_R=1;var t=id(),e=yZ();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,u=t.useMemo,f=t.useDebugValue;return V1.useSyncExternalStoreWithSelector=function(d,p,m,y,b){var S=s(null);if(S.current===null){var N={hasValue:!1,value:null};S.current=N}else N=S.current;S=u(function(){function R(P){if(!U){if(U=!0,j=P,P=y(P),b!==void 0&&N.hasValue){var I=N.value;if(b(I,P))return B=I}return B=P}if(I=B,i(j,P))return I;var A=y(P);return b!==void 0&&b(I,A)?(j=P,I):(j=P,B=A)}var U=!1,j,B,O=m===void 0?null:m;return[function(){return R(p())},O===null?void 0:function(){return R(O())}]},[p,m,y,b]);var E=r(d,S[0],S[1]);return a(function(){N.hasValue=!0,N.value=E},[E]),f(E),E},V1}var wR;function xZ(){return wR||(wR=1,U1.exports=vZ()),U1.exports}var bZ=xZ(),MT=C.createContext(null),_Z=t=>t,Ln=()=>{var t=C.useContext(MT);return t?t.store.dispatch:_Z},Ug=()=>{},wZ=()=>Ug,SZ=(t,e)=>t===e;function He(t){var e=C.useContext(MT),n=C.useMemo(()=>e?i=>{if(i!=null)return t(i)}:Ug,[e,t]);return bZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:wZ,e?e.store.getState:Ug,e?e.store.getState:Ug,n,SZ)}function TZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function EZ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function NZ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var SR=t=>Array.isArray(t)?t:[t];function CZ(t){const e=Array.isArray(t[0])?t[0]:t;return NZ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function AZ(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var kZ=class{constructor(t){this.value=t}deref(){return this.value}},IZ=typeof WeakRef<"u"?WeakRef:kZ,RZ=0,TR=1;function sg(){return{s:RZ,v:void 0,o:null,p:null}}function _L(t,e={}){let n=sg();const{resultEqualityCheck:i}=e;let r,s=0;function a(){var m;let u=n;const{length:f}=arguments;for(let y=0,b=f;y<b;y++){const S=arguments[y];if(typeof S=="function"||typeof S=="object"&&S!==null){let N=u.o;N===null&&(u.o=N=new WeakMap);const E=N.get(S);E===void 0?(u=sg(),N.set(S,u)):u=E}else{let N=u.p;N===null&&(u.p=N=new Map);const E=N.get(S);E===void 0?(u=sg(),N.set(S,u)):u=E}}const d=u;let p;if(u.s===TR)p=u.v;else if(p=t.apply(null,arguments),s++,i){const y=((m=r==null?void 0:r.deref)==null?void 0:m.call(r))??r;y!=null&&i(y,p)&&(p=y,s!==0&&s--),r=typeof p=="object"&&p!==null||typeof p=="function"?new IZ(p):p}return d.s=TR,d.v=p,p}return a.clearCache=()=>{n=sg(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function jZ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let s=0,a=0,u,f={},d=r.pop();typeof d=="object"&&(f=d,d=r.pop()),TZ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const p={...n,...f},{memoize:m,memoizeOptions:y=[],argsMemoize:b=_L,argsMemoizeOptions:S=[]}=p,N=SR(y),E=SR(S),R=CZ(r),U=m(function(){return s++,d.apply(null,arguments)},...N),j=b(function(){a++;const O=AZ(R,arguments);return u=U.apply(null,O),u},...E);return Object.assign(j,{resultFunc:d,memoizedResultFunc:U,dependencies:R,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:b})};return Object.assign(i,{withTypes:()=>i}),i}var fe=jZ(_L),PZ=Object.assign((t,e=fe)=>{EZ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return e(i,(...s)=>s.reduce((a,u,f)=>(a[n[f]]=u,a),{}))},{withTypes:()=>PZ}),B1={},$1={},q1={},ER;function MZ(){return ER||(ER=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,s)=>{if(i!==r){const a=e(i),u=e(r);if(a===u&&a===0){if(i<r)return s==="desc"?1:-1;if(i>r)return s==="desc"?-1:1}return s==="desc"?u-a:a-u}return 0};t.compareValues=n})(q1)),q1}var G1={},K1={},NR;function wL(){return NR||(NR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(K1)),K1}var CR;function DZ(){return CR||(CR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wL(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=r})(G1)),G1}var AR;function OZ(){return AR||(AR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MZ(),n=DZ(),i=AT();function r(s,a,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const d=(b,S)=>{let N=b;for(let E=0;E<S.length&&N!=null;++E)N=N[S[E]];return N},p=(b,S)=>S==null||b==null?S:typeof b=="object"&&"key"in b?Object.hasOwn(S,b.key)?S[b.key]:d(S,b.path):typeof b=="function"?b(S):Array.isArray(b)?d(S,b):typeof S=="object"?S[b]:S,m=a.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:i.toPath(b)}));return s.map(b=>({original:b,criteria:m.map(S=>p(S,b))})).slice().sort((b,S)=>{for(let N=0;N<m.length;N++){const E=e.compareValues(b.criteria[N],S.criteria[N],u[N]);if(E!==0)return E}return 0}).map(b=>b.original)}t.orderBy=r})($1)),$1}var Y1={},kR;function LZ(){return kR||(kR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],s=Math.floor(i),a=(u,f)=>{for(let d=0;d<u.length;d++){const p=u[d];Array.isArray(p)&&f<s?a(p,f+1):r.push(p)}};return a(n,0),r}t.flatten=e})(Y1)),Y1}var W1={},IR;function SL(){return IR||(IR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bL(),n=jT(),i=pL(),r=gL();function s(a,u,f){return i.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&e.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?r.isEqualsSameValueZero(f[u],a):!1}t.isIterateeCall=s})(W1)),W1}var RR;function zZ(){return RR||(RR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OZ(),n=LZ(),i=SL();function r(s,...a){const u=a.length;return u>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:u>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=r})(B1)),B1}var X1,jR;function UZ(){return jR||(jR=1,X1=zZ().sortBy),X1}var VZ=UZ();const Ky=Fo(VZ);var TL=t=>t.legend.settings,FZ=t=>t.legend.size,HZ=t=>t.legend.payload;fe([HZ,TL],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?Ky(i,n):i});var og=1;function BZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=C.useState({height:0,left:0,top:0,width:0}),i=C.useCallback(r=>{if(r!=null){var s=r.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>og||Math.abs(a.left-e.left)>og||Math.abs(a.top-e.top)>og||Math.abs(a.width-e.width)>og)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function Yn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $Z=typeof Symbol=="function"&&Symbol.observable||"@@observable",PR=$Z,J1=()=>Math.random().toString(36).substring(7).split("").join("."),qZ={INIT:`@@redux/INIT${J1()}`,REPLACE:`@@redux/REPLACE${J1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${J1()}`},E0=qZ;function DT(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function EL(t,e,n){if(typeof t!="function")throw new Error(Yn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Yn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Yn(1));return n(EL)(t,e)}let i=t,r=e,s=new Map,a=s,u=0,f=!1;function d(){a===s&&(a=new Map,s.forEach((E,R)=>{a.set(R,E)}))}function p(){if(f)throw new Error(Yn(3));return r}function m(E){if(typeof E!="function")throw new Error(Yn(4));if(f)throw new Error(Yn(5));let R=!0;d();const U=u++;return a.set(U,E),function(){if(R){if(f)throw new Error(Yn(6));R=!1,d(),a.delete(U),s=null}}}function y(E){if(!DT(E))throw new Error(Yn(7));if(typeof E.type>"u")throw new Error(Yn(8));if(typeof E.type!="string")throw new Error(Yn(17));if(f)throw new Error(Yn(9));try{f=!0,r=i(r,E)}finally{f=!1}return(s=a).forEach(U=>{U()}),E}function b(E){if(typeof E!="function")throw new Error(Yn(10));i=E,y({type:E0.REPLACE})}function S(){const E=m;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(Yn(11));function U(){const B=R;B.next&&B.next(p())}return U(),{unsubscribe:E(U)}},[PR](){return this}}}return y({type:E0.INIT}),{dispatch:y,subscribe:m,getState:p,replaceReducer:b,[PR]:S}}function GZ(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:E0.INIT})>"u")throw new Error(Yn(12));if(typeof n(void 0,{type:E0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yn(13))})}function NL(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const i=Object.keys(n);let r;try{GZ(n)}catch(s){r=s}return function(a={},u){if(r)throw r;let f=!1;const d={};for(let p=0;p<i.length;p++){const m=i[p],y=n[m],b=a[m],S=y(b,u);if(typeof S>"u")throw u&&u.type,new Error(Yn(14));d[m]=S,f=f||S!==b}return f=f||i.length!==Object.keys(a).length,f?d:a}}function N0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function KZ(...t){return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(Yn(15))};const a={getState:r.getState,dispatch:(f,...d)=>s(f,...d)},u=t.map(f=>f(a));return s=N0(...u)(r.dispatch),{...r,dispatch:s}}}function CL(t){return DT(t)&&"type"in t&&typeof t.type=="string"}var AL=Symbol.for("immer-nothing"),MR=Symbol.for("immer-draftable"),wi=Symbol.for("immer-state");function Yr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Xi=Object,Qu=Xi.getPrototypeOf,C0="constructor",Yy="prototype",yw="configurable",A0="enumerable",Vg="writable",Ch="value",Mo=t=>!!t&&!!t[wi];function as(t){var e;return t?kL(t)||Xy(t)||!!t[MR]||!!((e=t[C0])!=null&&e[MR])||Jy(t)||Qy(t):!1}var YZ=Xi[Yy][C0].toString(),DR=new WeakMap;function kL(t){if(!t||!OT(t))return!1;const e=Qu(t);if(e===null||e===Xi[Yy])return!0;const n=Xi.hasOwnProperty.call(e,C0)&&e[C0];if(n===Object)return!0;if(!Eu(n))return!1;let i=DR.get(n);return i===void 0&&(i=Function.toString.call(n),DR.set(n,i)),i===YZ}function Wy(t,e,n=!0){tp(t)===0?(n?Reflect.ownKeys(t):Xi.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function tp(t){const e=t[wi];return e?e.type_:Xy(t)?1:Jy(t)?2:Qy(t)?3:0}var OR=(t,e,n=tp(t))=>n===2?t.has(e):Xi[Yy].hasOwnProperty.call(t,e),vw=(t,e,n=tp(t))=>n===2?t.get(e):t[e],k0=(t,e,n,i=tp(t))=>{i===2?t.set(e,n):i===3?t.add(n):t[e]=n};function WZ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Xy=Array.isArray,Jy=t=>t instanceof Map,Qy=t=>t instanceof Set,OT=t=>typeof t=="object",Eu=t=>typeof t=="function",Q1=t=>typeof t=="boolean";function XZ(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var wo=t=>t.copy_||t.base_,LT=t=>t.modified_?t.copy_:t.base_;function xw(t,e){if(Jy(t))return new Map(t);if(Qy(t))return new Set(t);if(Xy(t))return Array[Yy].slice.call(t);const n=kL(t);if(e===!0||e==="class_only"&&!n){const i=Xi.getOwnPropertyDescriptors(t);delete i[wi];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],u=i[a];u[Vg]===!1&&(u[Vg]=!0,u[yw]=!0),(u.get||u.set)&&(i[a]={[yw]:!0,[Vg]:!0,[A0]:u[A0],[Ch]:t[a]})}return Xi.create(Qu(t),i)}else{const i=Qu(t);if(i!==null&&n)return{...t};const r=Xi.create(i);return Xi.assign(r,t)}}function zT(t,e=!1){return Zy(t)||Mo(t)||!as(t)||(tp(t)>1&&Xi.defineProperties(t,{set:ag,add:ag,clear:ag,delete:ag}),Xi.freeze(t),e&&Wy(t,(n,i)=>{zT(i,!0)},!1)),t}function JZ(){Yr(2)}var ag={[Ch]:JZ};function Zy(t){return t===null||!OT(t)?!0:Xi.isFrozen(t)}var I0="MapSet",bw="Patches",LR="ArrayMethods",IL={};function pc(t){const e=IL[t];return e||Yr(0,t),e}var zR=t=>!!IL[t],Ah,RL=()=>Ah,QZ=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:zR(I0)?pc(I0):void 0,arrayMethodsPlugin_:zR(LR)?pc(LR):void 0});function UR(t,e){e&&(t.patchPlugin_=pc(bw),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function _w(t){ww(t),t.drafts_.forEach(ZZ),t.drafts_=null}function ww(t){t===Ah&&(Ah=t.parent_)}var VR=t=>Ah=QZ(Ah,t);function ZZ(t){const e=t[wi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function FR(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[wi].modified_&&(_w(e),Yr(4)),as(t)&&(t=HR(e,t));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(n[wi].base_,t,e)}else t=HR(e,n);return eee(e,t,!0),_w(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==AL?t:void 0}function HR(t,e){if(Zy(e))return e;const n=e[wi];if(!n)return R0(e,t.handledSet_,t);if(!ev(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(t);ML(n,t)}return n.copy_}function eee(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&zT(e,n)}function jL(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var ev=(t,e)=>t.scope_===e,tee=[];function PL(t,e,n,i){const r=wo(t),s=t.type_;if(i!==void 0&&vw(r,i,s)===e){k0(r,i,n,s);return}if(!t.draftLocations_){const u=t.draftLocations_=new Map;Wy(r,(f,d)=>{if(Mo(d)){const p=u.get(d)||[];p.push(f),u.set(d,p)}})}const a=t.draftLocations_.get(e)??tee;for(const u of a)k0(r,u,n,s)}function nee(t,e,n){t.callbacks_.push(function(r){var u;const s=e;if(!s||!ev(s,r))return;(u=r.mapSetPlugin_)==null||u.fixSetContents(s);const a=LT(s);PL(t,s.draft_??s,a,n),ML(s,r)})}function ML(t,e){var i;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((i=t.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const s=r.getPath(t);s&&r.generatePatches_(t,s,e)}jL(t)}}function iee(t,e,n){const{scope_:i}=t;if(Mo(n)){const r=n[wi];ev(r,i)&&r.callbacks_.push(function(){Fg(t);const a=LT(r);PL(t,n,a,e)})}else as(n)&&t.callbacks_.push(function(){const s=wo(t);t.type_===3?s.has(n)&&R0(n,i.handledSet_,i):vw(s,e,t.type_)===n&&i.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&R0(vw(t.copy_,e,t.type_),i.handledSet_,i)})}function R0(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Mo(t)||e.has(t)||!as(t)||Zy(t)||(e.add(t),Wy(t,(i,r)=>{if(Mo(r)){const s=r[wi];if(ev(s,n)){const a=LT(s);k0(t,i,a,t.type_),jL(s)}}else as(r)&&R0(r,e,n)})),t}function ree(t,e){const n=Xy(t),i={type_:n?1:0,scope_:e?e.scope_:RL(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,s=j0;n&&(r=[i],s=kh);const{revoke:a,proxy:u}=Proxy.revocable(r,s);return i.draft_=u,i.revoke_=a,[u,i]}var j0={get(t,e){if(e===wi)return t;let n=t.scope_.arrayMethodsPlugin_;const i=t.type_===1&&typeof e=="string";if(i&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const r=wo(t);if(!OR(r,e,t.type_))return see(t,r,e);const s=r[e];if(t.finalized_||!as(s)||i&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&XZ(e))return s;if(s===Z1(t.base_,e)){Fg(t);const a=t.type_===1?+e:e,u=Tw(t.scope_,s,t,a);return t.copy_[a]=u}return s},has(t,e){return e in wo(t)},ownKeys(t){return Reflect.ownKeys(wo(t))},set(t,e,n){const i=DL(wo(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=Z1(wo(t),e),s=r==null?void 0:r[wi];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(WZ(n,r)&&(n!==void 0||OR(t.base_,e,t.type_)))return!0;Fg(t),Sw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),iee(t,e,n)),!0},deleteProperty(t,e){return Fg(t),Z1(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Sw(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=wo(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{[Vg]:!0,[yw]:t.type_!==1||e!=="length",[A0]:i[A0],[Ch]:n[e]}},defineProperty(){Yr(11)},getPrototypeOf(t){return Qu(t.base_)},setPrototypeOf(){Yr(12)}},kh={};for(let t in j0){let e=j0[t];kh[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}kh.deleteProperty=function(t,e){return kh.set.call(this,t,e,void 0)};kh.set=function(t,e,n){return j0.set.call(this,t[0],e,n,t[0])};function Z1(t,e){const n=t[wi];return(n?wo(n):t)[e]}function see(t,e,n){var r;const i=DL(e,n);return i?Ch in i?i[Ch]:(r=i.get)==null?void 0:r.call(t.draft_):void 0}function DL(t,e){if(!(e in t))return;let n=Qu(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Qu(n)}}function Sw(t){t.modified_||(t.modified_=!0,t.parent_&&Sw(t.parent_))}function Fg(t){t.copy_||(t.assigned_=new Map,t.copy_=xw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var oee=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,r)=>{if(Eu(n)&&!Eu(i)){const a=i;i=n;const u=this;return function(d=a,...p){return u.produce(d,m=>i.call(this,m,...p))}}Eu(i)||Yr(6),r!==void 0&&!Eu(r)&&Yr(7);let s;if(as(n)){const a=VR(this),u=Tw(a,n,void 0);let f=!0;try{s=i(u),f=!1}finally{f?_w(a):ww(a)}return UR(a,r),FR(s,a)}else if(!n||!OT(n)){if(s=i(n),s===void 0&&(s=n),s===AL&&(s=void 0),this.autoFreeze_&&zT(s,!0),r){const a=[],u=[];pc(bw).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:u}),r(a,u)}return s}else Yr(1,n)},this.produceWithPatches=(n,i)=>{if(Eu(n))return(u,...f)=>this.produceWithPatches(u,d=>n(d,...f));let r,s;return[this.produce(n,i,(u,f)=>{r=u,s=f}),r,s]},Q1(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Q1(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Q1(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){as(e)||Yr(8),Mo(e)&&(e=rs(e));const n=VR(this),i=Tw(n,e,void 0);return i[wi].isManual_=!0,ww(n),i}finishDraft(e,n){const i=e&&e[wi];(!i||!i.isManual_)&&Yr(9);const{scope_:r}=i;return UR(r,n),FR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const s=n[i];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}i>-1&&(n=n.slice(i+1));const r=pc(bw).applyPatches_;return Mo(e)?r(e,n):this.produce(e,s=>r(s,n))}};function Tw(t,e,n,i){const[r,s]=Jy(e)?pc(I0).proxyMap_(e,n):Qy(e)?pc(I0).proxySet_(e,n):ree(e,n);return((n==null?void 0:n.scope_)??RL()).drafts_.push(r),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=i,n&&i!==void 0?nee(n,s,i):s.callbacks_.push(function(f){var p;(p=f.mapSetPlugin_)==null||p.fixSetContents(s);const{patchPlugin_:d}=f;s.modified_&&d&&d.generatePatches_(s,[],f)}),r}function rs(t){return Mo(t)||Yr(10,t),OL(t)}function OL(t){if(!as(t)||Zy(t))return t;const e=t[wi];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=xw(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=xw(t,!0);return Wy(n,(r,s)=>{k0(n,r,OL(s))},i),e&&(e.finalized_=!1),n}var aee=new oee,LL=aee.produce;function zL(t){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,t):r(s)}var lee=zL(),cee=zL,uee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?N0:N0.apply(null,arguments)};function Nr(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(Qi(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>CL(i)&&i.type===t,n}var UL=class Zf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Zf.prototype)}static get[Symbol.species](){return Zf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Zf(...e[0].concat(this)):new Zf(...e.concat(this))}};function BR(t){return as(t)?LL(t,()=>{}):t}function lg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function dee(t){return typeof t=="boolean"}var fee=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let a=new UL;return n&&(dee(n)?a.push(lee):a.push(cee(n.extraArgument))),a},VL="RTK_autoBatch",Vt=()=>t=>({payload:t,meta:{[VL]:!0}}),$R=t=>e=>{setTimeout(e,t)},FL=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,s=!1,a=!1;const u=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$R(10):t.type==="callback"?t.queueNotification:$R(t.timeout),d=()=>{a=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const m=()=>r&&p(),y=i.subscribe(m);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){var m;try{return r=!((m=p==null?void 0:p.meta)!=null&&m[VL]),s=!r,s&&(a||(a=!0,f(d))),i.dispatch(p)}finally{r=!0}}})},hee=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new UL(t);return i&&r.push(FL(typeof i=="object"?i:void 0)),r};function pee(t){const e=fee(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(DT(n))u=NL(n);else throw new Error(Qi(1));let f;typeof i=="function"?f=i(e):f=e();let d=N0;r&&(d=uee({trace:!1,...typeof r=="object"&&r}));const p=KZ(...f),m=hee(p);let y=typeof a=="function"?a(m):m();const b=d(...y);return EL(u,s,b)}function HL(t){const e={},n=[];let i;const r={addCase(s,a){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(Qi(28));if(u in e)throw new Error(Qi(29));return e[u]=a,r},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),r},addMatcher(s,a){return n.push({matcher:s,reducer:a}),r},addDefaultCase(s){return i=s,r}};return t(r),[e,n,i]}function mee(t){return typeof t=="function"}function gee(t,e){let[n,i,r]=HL(e),s;if(mee(t))s=()=>BR(t());else{const u=BR(t);s=()=>u}function a(u=s(),f){let d=[n[f.type],...i.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[r]),d.reduce((p,m)=>{if(m)if(Mo(p)){const b=m(p,f);return b===void 0?p:b}else{if(as(p))return LL(p,y=>m(y,f));{const y=m(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return a.getInitialState=s,a}var yee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vee=(t=21)=>{let e="",n=t;for(;n--;)e+=yee[Math.random()*64|0];return e},xee=Symbol.for("rtk-slice-createasyncthunk");function bee(t,e){return`${t}/${e}`}function _ee({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[xee];return function(r){const{name:s,reducerPath:a=s}=r;if(!s)throw new Error(Qi(11));const u=(typeof r.reducers=="function"?r.reducers(See()):r.reducers)||{},f=Object.keys(u),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(B,O){const P=typeof B=="string"?B:B.type;if(!P)throw new Error(Qi(12));if(P in d.sliceCaseReducersByType)throw new Error(Qi(13));return d.sliceCaseReducersByType[P]=O,p},addMatcher(B,O){return d.sliceMatchers.push({matcher:B,reducer:O}),p},exposeAction(B,O){return d.actionCreators[B]=O,p},exposeCaseReducer(B,O){return d.sliceCaseReducersByName[B]=O,p}};f.forEach(B=>{const O=u[B],P={reducerName:B,type:bee(s,B),createNotation:typeof r.reducers=="function"};Eee(O)?Cee(P,O,p,e):Tee(P,O,p)});function m(){const[B={},O=[],P=void 0]=typeof r.extraReducers=="function"?HL(r.extraReducers):[r.extraReducers],I={...B,...d.sliceCaseReducersByType};return gee(r.initialState,A=>{for(let M in I)A.addCase(M,I[M]);for(let M of d.sliceMatchers)A.addMatcher(M.matcher,M.reducer);for(let M of O)A.addMatcher(M.matcher,M.reducer);P&&A.addDefaultCase(P)})}const y=B=>B,b=new Map,S=new WeakMap;let N;function E(B,O){return N||(N=m()),N(B,O)}function R(){return N||(N=m()),N.getInitialState()}function U(B,O=!1){function P(A){let M=A[B];return typeof M>"u"&&O&&(M=lg(S,P,R)),M}function I(A=y){const M=lg(b,O,()=>new WeakMap);return lg(M,A,()=>{const H={};for(const[F,D]of Object.entries(r.selectors??{}))H[F]=wee(D,A,()=>lg(S,A,R),O);return H})}return{reducerPath:B,getSelectors:I,get selectors(){return I(P)},selectSlice:P}}const j={name:s,reducer:E,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:R,...U(a),injectInto(B,{reducerPath:O,...P}={}){const I=O??a;return B.inject({reducerPath:I,reducer:E},P),{...j,...U(I,!0)}}};return j}}function wee(t,e,n,i){function r(s,...a){let u=e(s);return typeof u>"u"&&i&&(u=n()),t(u,...a)}return r.unwrapped=t,r}var zi=_ee();function See(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Tee({type:t,reducerName:e,createNotation:n},i,r){let s,a;if("reducer"in i){if(n&&!Nee(i))throw new Error(Qi(17));s=i.reducer,a=i.prepare}else s=i;r.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?Nr(t,a):Nr(t))}function Eee(t){return t._reducerDefinitionType==="asyncThunk"}function Nee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Cee({type:t,reducerName:e},n,i,r){if(!r)throw new Error(Qi(18));const{payloadCreator:s,fulfilled:a,pending:u,rejected:f,settled:d,options:p}=n,m=r(t,s,p);i.exposeAction(e,m),a&&i.addCase(m.fulfilled,a),u&&i.addCase(m.pending,u),f&&i.addCase(m.rejected,f),d&&i.addMatcher(m.settled,d),i.exposeCaseReducer(e,{fulfilled:a||cg,pending:u||cg,rejected:f||cg,settled:d||cg})}function cg(){}var Aee="task",BL="listener",$L="completed",UT="cancelled",kee=`task-${UT}`,Iee=`task-${$L}`,Ew=`${BL}-${UT}`,Ree=`${BL}-${$L}`,tv=class{constructor(t){Rb(this,"name","TaskAbortError");Rb(this,"message");this.code=t,this.message=`${Aee} ${UT} (reason: ${t})`}},VT=(t,e)=>{if(typeof t!="function")throw new TypeError(Qi(32))},P0=()=>{},qL=(t,e=P0)=>(t.catch(e),t),GL=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),ec=t=>{if(t.aborted)throw new tv(t.reason)};function KL(t,e){let n=P0;return new Promise((i,r)=>{const s=()=>r(new tv(t.reason));if(t.aborted){s();return}n=GL(t,s),e.finally(()=>n()).then(i,r)}).finally(()=>{n=P0})}var jee=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof tv?"cancelled":"rejected",error:n}}finally{e==null||e()}},M0=t=>e=>qL(KL(t,e).then(n=>(ec(t),n))),YL=t=>{const e=M0(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:zu}=Object,qR={},nv="listenerMiddleware",Pee=(t,e)=>{const n=i=>GL(t,()=>i.abort(t.reason));return(i,r)=>{VT(i);const s=new AbortController;n(s);const a=jee(async()=>{ec(t),ec(s.signal);const u=await i({pause:M0(s.signal),delay:YL(s.signal),signal:s.signal});return ec(s.signal),u},()=>s.abort(Iee));return r!=null&&r.autoJoin&&e.push(a.catch(P0)),{result:M0(t)(a),cancel(){s.abort(kee)}}}},Mee=(t,e)=>{const n=async(i,r)=>{ec(e);let s=()=>{};const u=[new Promise((f,d)=>{let p=t({predicate:i,effect:(m,y)=>{y.unsubscribe(),f([m,y.getState(),y.getOriginalState()])}});s=()=>{p(),d()}})];r!=null&&u.push(new Promise(f=>setTimeout(f,r,null)));try{const f=await KL(e,Promise.race(u));return ec(e),f}finally{s()}};return(i,r)=>qL(n(i,r))},WL=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:s}=t;if(e)r=Nr(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Qi(21));return VT(s),{predicate:r,type:e,effect:s}},XL=zu(t=>{const{type:e,predicate:n,effect:i}=WL(t);return{id:vee(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Qi(22))}}},{withTypes:()=>XL}),GR=(t,e)=>{const{type:n,effect:i,predicate:r}=WL(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===r)&&s.effect===i)},Nw=t=>{t.pending.forEach(e=>{e.abort(Ew)})},Dee=(t,e)=>()=>{for(const n of e.keys())Nw(n);t.clear()},KR=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},JL=zu(Nr(`${nv}/add`),{withTypes:()=>JL}),Oee=Nr(`${nv}/removeAll`),QL=zu(Nr(`${nv}/remove`),{withTypes:()=>QL}),Lee=(...t)=>{console.error(`${nv}/error`,...t)},np=(t={})=>{const e=new Map,n=new Map,i=b=>{const S=n.get(b)??0;n.set(b,S+1)},r=b=>{const S=n.get(b)??1;S===1?n.delete(b):n.set(b,S-1)},{extra:s,onError:a=Lee}=t;VT(a);const u=b=>(b.unsubscribe=()=>e.delete(b.id),e.set(b.id,b),S=>{b.unsubscribe(),S!=null&&S.cancelActive&&Nw(b)}),f=b=>{const S=GR(e,b)??XL(b);return u(S)};zu(f,{withTypes:()=>f});const d=b=>{const S=GR(e,b);return S&&(S.unsubscribe(),b.cancelActive&&Nw(S)),!!S};zu(d,{withTypes:()=>d});const p=async(b,S,N,E)=>{const R=new AbortController,U=Mee(f,R.signal),j=[];try{b.pending.add(R),i(b),await Promise.resolve(b.effect(S,zu({},N,{getOriginalState:E,condition:(B,O)=>U(B,O).then(Boolean),take:U,delay:YL(R.signal),pause:M0(R.signal),extra:s,signal:R.signal,fork:Pee(R.signal,j),unsubscribe:b.unsubscribe,subscribe:()=>{e.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((B,O,P)=>{B!==R&&(B.abort(Ew),P.delete(B))})},cancel:()=>{R.abort(Ew),b.pending.delete(R)},throwIfCancelled:()=>{ec(R.signal)}})))}catch(B){B instanceof tv||KR(a,B,{raisedBy:"effect"})}finally{await Promise.all(j),R.abort(Ree),r(b),b.pending.delete(R)}},m=Dee(e,n);return{middleware:b=>S=>N=>{if(!CL(N))return S(N);if(JL.match(N))return f(N.payload);if(Oee.match(N)){m();return}if(QL.match(N))return d(N.payload);let E=b.getState();const R=()=>{if(E===qR)throw new Error(Qi(23));return E};let U;try{if(U=S(N),e.size>0){const j=b.getState(),B=Array.from(e.values());for(const O of B){let P=!1;try{P=O.predicate(N,j,E)}catch(I){P=!1,KR(a,I,{raisedBy:"predicate"})}P&&p(O,N,b,R)}}}finally{E=qR}return U},startListening:f,stopListening:d,clearListeners:m}};function Qi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zee={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ZL=zi({name:"chartLayout",initialState:zee,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Uee,setLayout:Vee,setChartSize:Fee,setScale:Hee}=ZL.actions,Bee=ZL.reducer;function e6(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function pt(t){return Number.isFinite(t)}function sl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Au(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(i){$ee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $ee(t,e,n){return(e=qee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qee(t){var e=Gee(t,"string");return typeof e=="symbol"?e:e+""}function Gee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ti(t,e,n){return fi(t)||fi(e)?n:Zs(e)?Gy(t,e,n):typeof e=="function"?e(t):n}var Kee=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:s,verticalAlign:a,layout:u}=e;if((u==="vertical"||u==="horizontal"&&a==="middle")&&s!=="center"&&ze(t[s]))return Au(Au({},t),{},{[s]:t[s]+(i||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&a!=="middle"&&ze(t[a]))return Au(Au({},t),{},{[a]:t[a]+(r||0)})}return t},to=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Yee=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var s=0,a=0,u=0;u<n;++u){var f=t[u],d=f==null?void 0:f[r];if(d!=null){var p=d[1],m=d[0],y=Qs(p)?m:p;y>=0?(d[0]=s,s+=y,d[1]=s):(d[0]=a,a+=y,d[1]=a)}}}},Wee=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var s=0,a=0;a<n;++a){var u=t[a],f=u==null?void 0:u[r];if(f!=null){var d=Qs(f[1])?f[0]:f[1];d>=0?(f[0]=s,s+=d,f[1]=s):(f[0]=0,f[1]=0)}}}},Xee={sign:Yee,expand:MQ,none:fc,silhouette:DQ,wiggle:OQ,positive:Wee},Jee=(t,e,n)=>{var i,r=(i=Xee[n])!==null&&i!==void 0?i:fc,s=PQ().keys(e).value((u,f)=>Number(ti(u,f,0))).order(gw).offset(r),a=s(t);return a.forEach((u,f)=>{u.forEach((d,p)=>{var m=ti(t[p],e[f],0);Array.isArray(m)&&m.length===2&&ze(m[0])&&ze(m[1])&&(d[0]=m[0],d[1]=m[1])})}),a};function Qee(t){return t==null?void 0:String(t)}function WR(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!fi(r[e.dataKey])){var u=dL(n,"value",r[e.dataKey]);if(u)return u.coordinate+i/2}return n!=null&&n[s]?n[s].coordinate+i/2:null}var f=ti(r,fi(a)?e.dataKey:a),d=e.scale.map(f);return ze(d)?d:null}var Zee=t=>{var e=t.flat(2).filter(ze);return[Math.min(...e),Math.max(...e)]},ete=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],tte=(t,e,n)=>{if(t!=null)return ete(Object.keys(t).reduce((i,r)=>{var s=t[r];if(!s)return i;var{stackedData:a}=s,u=a.reduce((f,d)=>{var p=e6(d,e,n),m=Zee(p);return!pt(m[0])||!pt(m[1])?f:[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]))},XR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,D0=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=Ky(e,p=>p.coordinate),s=1/0,a=1,u=r.length;a<u;a++){var f=r[a],d=r[a-1];s=Math.min(((f==null?void 0:f.coordinate)||0)-((d==null?void 0:d.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function QR(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:s}=t;return Au(Au({},e),{},{dataKey:n,payload:i,value:r,name:s})}function t6(t,e){if(t)return String(t);if(typeof e=="string")return e}var nte=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},ite=(t,e)=>e==="centric"?t.angle:t.radius,$o=t=>t.layout.width,qo=t=>t.layout.height,rte=t=>t.layout.scale,n6=t=>t.layout.margin,iv=fe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),rv=fe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),ste="data-recharts-item-index",ote="data-recharts-item-id",ip=60;function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(n),!0).forEach(function(i){ate(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ate(t,e,n){return(e=lte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lte(t){var e=cte(t,"string");return typeof e=="symbol"?e:e+""}function cte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ute=t=>t.brush.height;function dte(t){var e=rv(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:ip;return n+r}return n},0)}function fte(t){var e=rv(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:ip;return n+r}return n},0)}function hte(t){var e=iv(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function pte(t){var e=iv(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var ri=fe([$o,qo,n6,ute,dte,fte,hte,pte,TL,FZ],(t,e,n,i,r,s,a,u,f,d)=>{var p={left:(n.left||0)+r,right:(n.right||0)+s},m={top:(n.top||0)+a,bottom:(n.bottom||0)+u},y=ug(ug({},m),p),b=y.bottom;y.bottom+=i,y=Kee(y,f,d);var S=t-y.left-y.right,N=e-y.top-y.bottom;return ug(ug({brushBottom:b},y),{},{width:Math.max(S,0),height:Math.max(N,0)})}),mte=fe(ri,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),i6=fe($o,qo,(t,e)=>({x:0,y:0,width:t,height:e})),gte=C.createContext(null),rr=()=>C.useContext(gte)!=null,sv=t=>t.brush,ov=fe([sv,ri,n6],(t,e,n)=>({height:t.height,x:ze(t.x)?t.x:e.left,y:ze(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:ze(t.width)?t.width:e.width})),e_={},t_={},n_={},ej;function yte(){return ej||(ej=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:s}={}){let a,u=null;const f=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(a,u),a=void 0,u=null)},m=()=>{d&&p(),N()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},i)},S=()=>{y!==null&&(clearTimeout(y),y=null)},N=()=>{S(),a=void 0,u=null},E=()=>{p()},R=function(...U){if(r!=null&&r.aborted)return;a=this,u=U;const j=y==null;b(),f&&j&&p()};return R.schedule=b,R.cancel=N,R.flush=E,r==null||r.addEventListener("abort",N,{once:!0}),R}t.debounce=e})(n_)),n_}var tj;function vte(){return tj||(tj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yte();function n(i,r=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:u=!0,maxWait:f}=s,d=Array(2);a&&(d[0]="leading"),u&&(d[1]="trailing");let p,m=null;const y=e.debounce(function(...N){p=i.apply(this,N),m=null},r,{edges:d}),b=function(...N){return f!=null&&(m===null&&(m=Date.now()),Date.now()-m>=f)?(p=i.apply(this,N),m=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,N),p)},S=()=>(y.flush(),p);return b.cancel=y.cancel,b.flush=S,b}t.debounce=n})(t_)),t_}var nj;function xte(){return nj||(nj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vte();function n(i,r=0,s={}){const{leading:a=!0,trailing:u=!0}=s;return e.debounce(i,r,{leading:a,maxWait:r,trailing:u})}t.throttle=n})(e_)),e_}var i_,ij;function bte(){return ij||(ij=1,i_=xte().throttle),i_}var _te=bte();const wte=Fo(_te);var rj=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>r[a++]))}},zs={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},r6=(t,e,n)=>{var{width:i=zs.width,height:r=zs.height,aspect:s,maxHeight:a}=n,u=hc(i)?t:Number(i),f=hc(r)?e:Number(r);return s&&s>0&&(u?f=u/s:f&&(u=f*s),a&&f!=null&&f>a&&(f=a)),{calculatedWidth:u,calculatedHeight:f}},Ste={width:0,height:0,overflow:"visible"},Tte={width:0,overflowX:"visible"},Ete={height:0,overflowY:"visible"},Nte={},Cte=t=>{var{width:e,height:n}=t,i=hc(e),r=hc(n);return i&&r?Ste:i?Tte:r?Ete:Nte};function Ate(t){var{width:e,height:n,aspect:i}=t,r=e,s=n;return r===void 0&&s===void 0?(r=zs.width,s=zs.height):r===void 0?r=i&&i>0?void 0:zs.width:s===void 0&&(s=i&&i>0?void 0:zs.height),{width:r,height:s}}function Cw(){return Cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cw.apply(null,arguments)}function sj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sj(Object(n),!0).forEach(function(i){kte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kte(t,e,n){return(e=Ite(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ite(t){var e=Rte(t,"string");return typeof e=="symbol"?e:e+""}function Rte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s6=C.createContext(zs.initialDimension);function jte(t){return sl(t.width)&&sl(t.height)}function o6(t){var{children:e,width:n,height:i}=t,r=C.useMemo(()=>({width:n,height:i}),[n,i]);return jte(r)?C.createElement(s6.Provider,{value:r},e):null}var FT=()=>C.useContext(s6),Pte=C.forwardRef((t,e)=>{var{aspect:n,initialDimension:i=zs.initialDimension,width:r,height:s,minWidth:a=zs.minWidth,minHeight:u,maxHeight:f,children:d,debounce:p=zs.debounce,id:m,className:y,onResize:b,style:S={}}=t,N=C.useRef(null),E=C.useRef();E.current=b,C.useImperativeHandle(e,()=>N.current);var[R,U]=C.useState({containerWidth:i.width,containerHeight:i.height}),j=C.useCallback((A,M)=>{U(H=>{var F=Math.round(A),D=Math.round(M);return H.containerWidth===F&&H.containerHeight===D?H:{containerWidth:F,containerHeight:D}})},[]);C.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return gd;var A=D=>{var z,$=D[0];if($!=null){var{width:Y,height:W}=$.contentRect;j(Y,W),(z=E.current)===null||z===void 0||z.call(E,Y,W)}};p>0&&(A=wte(A,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(A),{width:H,height:F}=N.current.getBoundingClientRect();return j(H,F),M.observe(N.current),()=>{M.disconnect()}},[j,p]);var{containerWidth:B,containerHeight:O}=R;rj(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:I}=r6(B,O,{width:r,height:s,aspect:n,maxHeight:f});return rj(P!=null&&P>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,I,r,s,a,u,n),C.createElement("div",{id:m?"".concat(m):void 0,className:Lt("recharts-responsive-container",y),style:oj(oj({},S),{},{width:r,height:s,minWidth:a,minHeight:u,maxHeight:f}),ref:N},C.createElement("div",{style:Cte({width:r,height:s})},C.createElement(o6,{width:P,height:I},d)))}),Mte=C.forwardRef((t,e)=>{var n=FT();if(sl(n.width)&&sl(n.height))return t.children;var{width:i,height:r}=Ate({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=r6(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return ze(s)&&ze(a)?C.createElement(o6,{width:s,height:a},t.children):C.createElement(Pte,Cw({},t,{width:i,height:r,ref:e}))});function HT(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var av=()=>{var t,e=rr(),n=He(mte),i=He(ov),r=(t=He(sv))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},Dte={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Ote=()=>{var t;return(t=He(ri))!==null&&t!==void 0?t:Dte},Lte=()=>He($o),zte=()=>He(qo),Ht=t=>t.layout.layoutType,yd=()=>He(Ht),BT=()=>{var t=yd();if(t==="horizontal"||t==="vertical")return t},a6=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Ute=()=>{var t=yd();return t!==void 0},rp=t=>{var e=Ln(),n=rr(),{width:i,height:r}=t,s=FT(),a=i,u=r;return s&&(a=s.width>0?s.width:i,u=s.height>0?s.height:r),C.useEffect(()=>{!n&&sl(a)&&sl(u)&&e(Fee({width:a,height:u}))},[e,n,a,u]),null},l6=Symbol.for("immer-nothing"),aj=Symbol.for("immer-draftable"),tr=Symbol.for("immer-state");function Wr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ih=Object.getPrototypeOf;function Zu(t){return!!t&&!!t[tr]}function mc(t){var e;return t?c6(t)||Array.isArray(t)||!!t[aj]||!!((e=t.constructor)!=null&&e[aj])||sp(t)||cv(t):!1}var Vte=Object.prototype.constructor.toString(),lj=new WeakMap;function c6(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=lj.get(n);return i===void 0&&(i=Function.toString.call(n),lj.set(n,i)),i===Vte}function O0(t,e,n=!0){lv(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function lv(t){const e=t[tr];return e?e.type_:Array.isArray(t)?1:sp(t)?2:cv(t)?3:0}function Aw(t,e){return lv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function u6(t,e,n){const i=lv(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function Fte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function sp(t){return t instanceof Map}function cv(t){return t instanceof Set}function $l(t){return t.copy_||t.base_}function kw(t,e){if(sp(t))return new Map(t);if(cv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=c6(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[tr];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],u=i[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(i[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[a]})}return Object.create(Ih(t),i)}else{const i=Ih(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function $T(t,e=!1){return uv(t)||Zu(t)||!mc(t)||(lv(t)>1&&Object.defineProperties(t,{set:dg,add:dg,clear:dg,delete:dg}),Object.freeze(t),e&&Object.values(t).forEach(n=>$T(n,!0))),t}function Hte(){Wr(2)}var dg={value:Hte};function uv(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Bte={};function gc(t){const e=Bte[t];return e||Wr(0,t),e}var Rh;function d6(){return Rh}function $te(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cj(t,e){e&&(gc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Iw(t){Rw(t),t.drafts_.forEach(qte),t.drafts_=null}function Rw(t){t===Rh&&(Rh=t.parent_)}function uj(t){return Rh=$te(Rh,t)}function qte(t){const e=t[tr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function dj(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[tr].modified_&&(Iw(e),Wr(4)),mc(t)&&(t=L0(e,t),e.parent_||z0(e,t)),e.patches_&&gc("Patches").generateReplacementPatches_(n[tr].base_,t,e.patches_,e.inversePatches_)):t=L0(e,n,[]),Iw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==l6?t:void 0}function L0(t,e,n){if(uv(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[tr];if(!r)return O0(e,(s,a)=>fj(t,r,e,s,a,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return z0(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,u=!1;r.type_===3&&(a=new Set(s),s.clear(),u=!0),O0(a,(f,d)=>fj(t,r,s,f,d,n,u),i),z0(t,s,!1),n&&t.patches_&&gc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function fj(t,e,n,i,r,s,a){if(r==null||typeof r!="object"&&!a)return;const u=uv(r);if(!(u&&!a)){if(Zu(r)){const f=s&&e&&e.type_!==3&&!Aw(e.assigned_,i)?s.concat(i):void 0,d=L0(t,r,f);if(u6(n,i,d),Zu(d))t.canAutoFreeze_=!1;else return}else a&&n.add(r);if(mc(r)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&u)return;L0(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(sp(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&z0(t,r)}}}function z0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$T(e,n)}function Gte(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:d6(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=qT;n&&(r=[i],s=jh);const{revoke:a,proxy:u}=Proxy.revocable(r,s);return i.draft_=u,i.revoke_=a,u}var qT={get(t,e){if(e===tr)return t;const n=$l(t);if(!Aw(n,e))return Kte(t,n,e);const i=n[e];return t.finalized_||!mc(i)?i:i===r_(t.base_,e)?(s_(t),t.copy_[e]=Pw(i,t)):i},has(t,e){return e in $l(t)},ownKeys(t){return Reflect.ownKeys($l(t))},set(t,e,n){const i=f6($l(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=r_($l(t),e),s=r==null?void 0:r[tr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Fte(n,r)&&(n!==void 0||Aw(t.base_,e)))return!0;s_(t),jw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return r_(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,s_(t),jw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=$l(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){Wr(11)},getPrototypeOf(t){return Ih(t.base_)},setPrototypeOf(){Wr(12)}},jh={};O0(qT,(t,e)=>{jh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jh.deleteProperty=function(t,e){return jh.set.call(this,t,e,void 0)};jh.set=function(t,e,n){return qT.set.call(this,t[0],e,n,t[0])};function r_(t,e){const n=t[tr];return(n?$l(n):t)[e]}function Kte(t,e,n){var r;const i=f6(e,n);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(t.draft_):void 0}function f6(t,e){if(!(e in t))return;let n=Ih(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Ih(n)}}function jw(t){t.modified_||(t.modified_=!0,t.parent_&&jw(t.parent_))}function s_(t){t.copy_||(t.copy_=kw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Yte=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(f=s,...d){return a.produce(f,p=>n.call(this,p,...d))}}typeof n!="function"&&Wr(6),i!==void 0&&typeof i!="function"&&Wr(7);let r;if(mc(e)){const s=uj(this),a=Pw(e,void 0);let u=!0;try{r=n(a),u=!1}finally{u?Iw(s):Rw(s)}return cj(s,i),dj(r,s)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===l6&&(r=void 0),this.autoFreeze_&&$T(r,!0),i){const s=[],a=[];gc("Patches").generateReplacementPatches_(e,r,s,a),i(s,a)}return r}else Wr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...u)=>this.produceWithPatches(a,f=>e(f,...u));let i,r;return[this.produce(e,n,(a,u)=>{i=a,r=u}),i,r]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){mc(t)||Wr(8),Zu(t)&&(t=Wte(t));const e=uj(this),n=Pw(t,void 0);return n[tr].isManual_=!0,Rw(e),n}finishDraft(t,e){const n=t&&t[tr];(!n||!n.isManual_)&&Wr(9);const{scope_:i}=n;return cj(i,e),dj(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=gc("Patches").applyPatches_;return Zu(t)?i(t,e):this.produce(t,r=>i(r,e))}};function Pw(t,e){const n=sp(t)?gc("MapSet").proxyMap_(t,e):cv(t)?gc("MapSet").proxySet_(t,e):Gte(t,e);return(e?e.scope_:d6()).drafts_.push(n),n}function Wte(t){return Zu(t)||Wr(10,t),h6(t)}function h6(t){if(!mc(t)||uv(t))return t;const e=t[tr];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=kw(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=kw(t,!0);return O0(n,(r,s)=>{u6(n,r,h6(s))},i),e&&(e.finalized_=!1),n}var Xte=new Yte;Xte.produce;var Jte={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},p6=zi({name:"legend",initialState:Jte,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Vt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:i}=e.payload,r=rs(t).payload.indexOf(n);r>-1&&(t.payload[r]=i)},prepare:Vt()},removeLegendPayload:{reducer(t,e){var n=rs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Vt()}}}),{setLegendSize:Z1e,setLegendSettings:e_e,addLegendPayload:Qte,replaceLegendPayload:Zte,removeLegendPayload:ene}=p6.actions,tne=p6.reducer;function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mw.apply(null,arguments)}function hj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Of(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hj(Object(n),!0).forEach(function(i){nne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nne(t,e,n){return(e=ine(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ine(t){var e=rne(t,"string");return typeof e=="symbol"?e:e+""}function rne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sne(t){return Array.isArray(t)&&Zs(t[0])&&Zs(t[1])?t.join(" ~ "):t}var yu={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},one=t=>{var{separator:e=yu.separator,contentStyle:n,itemStyle:i,labelStyle:r=yu.labelStyle,payload:s,formatter:a,itemSorter:u,wrapperClassName:f,labelClassName:d,label:p,labelFormatter:m,accessibilityLayer:y=yu.accessibilityLayer}=t,b=()=>{if(s&&s.length){var O={padding:0,margin:0},P=(u?Ky(s,u):s).map((I,A)=>{if(I.type==="none")return null;var M=I.formatter||a||sne,{value:H,name:F}=I,D=H,z=F;if(M){var $=M(H,F,I,A,s);if(Array.isArray($))[D,z]=$;else if($!=null)D=$;else return null}var Y=Of(Of({},yu.itemStyle),{},{color:I.color||yu.itemStyle.color},i);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:Y},Zs(z)?C.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Zs(z)?C.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,C.createElement("span",{className:"recharts-tooltip-item-value"},D),C.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:O},P)}return null},S=Of(Of({},yu.contentStyle),n),N=Of({margin:0},r),E=!fi(p),R=E?p:"",U=Lt("recharts-default-tooltip",f),j=Lt("recharts-tooltip-label",d);E&&m&&s!==void 0&&s!==null&&(R=m(p,s));var B=y?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",Mw({className:U,style:S},B),C.createElement("p",{className:j,style:N},C.isValidElement(R)?R:"".concat(R)),b())},Lf="recharts-tooltip-wrapper",ane={visibility:"hidden"};function lne(t){var{coordinate:e,translateX:n,translateY:i}=t;return Lt(Lf,{["".concat(Lf,"-right")]:ze(n)&&e&&ze(e.x)&&n>=e.x,["".concat(Lf,"-left")]:ze(n)&&e&&ze(e.x)&&n<e.x,["".concat(Lf,"-bottom")]:ze(i)&&e&&ze(e.y)&&i>=e.y,["".concat(Lf,"-top")]:ze(i)&&e&&ze(e.y)&&i<e.y})}function pj(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offset:r,position:s,reverseDirection:a,tooltipDimension:u,viewBox:f,viewBoxDimension:d}=t;if(s&&ze(s[i]))return s[i];var p=n[i]-u-(r>0?r:0),m=n[i]+r;if(e[i])return a[i]?p:m;var y=f[i];if(y==null)return 0;if(a[i]){var b=p,S=y;return b<S?Math.max(m,y):Math.max(p,y)}if(d==null)return 0;var N=m+u,E=y+d;return N>E?Math.max(p,y):Math.max(m,y)}function cne(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function une(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:i,offsetLeft:r,position:s,reverseDirection:a,tooltipBox:u,useTranslate3d:f,viewBox:d}=t,p,m,y;return u.height>0&&u.width>0&&n?(m=pj({allowEscapeViewBox:e,coordinate:n,key:"x",offset:r,position:s,reverseDirection:a,tooltipDimension:u.width,viewBox:d,viewBoxDimension:d.width}),y=pj({allowEscapeViewBox:e,coordinate:n,key:"y",offset:i,position:s,reverseDirection:a,tooltipDimension:u.height,viewBox:d,viewBoxDimension:d.height}),p=cne({translateX:m,translateY:y,useTranslate3d:f})):p=ane,{cssProperties:p,cssClasses:lne({translateX:m,translateY:y,coordinate:n})}}function mj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mj(Object(n),!0).forEach(function(i){Dw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dw(t,e,n){return(e=dne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dne(t){var e=fne(t,"string");return typeof e=="symbol"?e:e+""}function fne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class hne extends C.PureComponent{constructor(){super(...arguments),Dw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Dw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:s,coordinate:a,hasPayload:u,isAnimationActive:f,offset:d,position:p,reverseDirection:m,useTranslate3d:y,viewBox:b,wrapperStyle:S,lastBoundingBox:N,innerRef:E,hasPortalFromProps:R}=this.props,U=typeof d=="number"?d:d.x,j=typeof d=="number"?d:d.y,{cssClasses:B,cssProperties:O}=une({allowEscapeViewBox:n,coordinate:a,offsetLeft:U,offsetTop:j,position:p,reverseDirection:m,tooltipBox:{height:N.height,width:N.width},useTranslate3d:y,viewBox:b}),P=R?{}:fg(fg({transition:f&&e?"transform ".concat(i,"ms ").concat(r):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),I=fg(fg({},P),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},S);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:B,style:I,ref:E},s)}}var m6=()=>{var t;return(t=He(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ow.apply(null,arguments)}function gj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gj(Object(n),!0).forEach(function(i){pne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pne(t,e,n){return(e=mne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mne(t){var e=gne(t,"string");return typeof e=="symbol"?e:e+""}function gne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vj={curveBasisClosed:wQ,curveBasisOpen:SQ,curveBasis:_Q,curveBumpX:xQ,curveBumpY:bQ,curveLinearClosed:TQ,curveLinear:$y,curveMonotoneX:EQ,curveMonotoneY:NQ,curveNatural:CQ,curveStep:AQ,curveStepAfter:IQ,curveStepBefore:kQ},U0=t=>pt(t.x)&&pt(t.y),xj=t=>t.base!=null&&U0(t.base)&&U0(t),zf=t=>t.x,Uf=t=>t.y,yne=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(IT(t));if((n==="curveMonotone"||n==="curveBump")&&e){var i=vj["".concat(n).concat(e==="vertical"?"Y":"X")];if(i)return i}return vj[n]||$y},bj={connectNulls:!1,type:"linear"},vne=t=>{var{type:e=bj.type,points:n=[],baseLine:i,layout:r,connectNulls:s=bj.connectNulls}=t,a=yne(e,r),u=s?n.filter(U0):n;if(Array.isArray(i)){var f,d=n.map((S,N)=>yj(yj({},S),{},{base:i[N]}));r==="vertical"?f=rg().y(Uf).x1(zf).x0(S=>S.base.x):f=rg().x(zf).y1(Uf).y0(S=>S.base.y);var p=f.defined(xj).curve(a),m=s?d.filter(xj):d;return p(m)}var y;r==="vertical"&&ze(i)?y=rg().y(Uf).x1(zf).x0(i):ze(i)?y=rg().x(zf).y1(Uf).y0(i):y=eL().x(zf).y(Uf);var b=y.defined(U0).curve(a);return b(u)},Hg=t=>{var{className:e,points:n,path:i,pathRef:r}=t,s=yd();if((!n||!n.length)&&!i)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},u=n&&n.length?vne(a):i;return C.createElement("path",Ow({},Xs(t),RT(t),{className:Lt("recharts-curve",e),d:u===null?void 0:u,ref:r}))},xne=["x","y","top","left","width","height","className"];function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lw.apply(null,arguments)}function _j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_j(Object(n),!0).forEach(function(i){_ne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _ne(t,e,n){return(e=wne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wne(t){var e=Sne(t,"string");return typeof e=="symbol"?e:e+""}function Sne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tne(t,e){if(t==null)return{};var n,i,r=Ene(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ene(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Nne=(t,e,n,i,r,s)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(n),Cne=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:s=0,height:a=0,className:u}=t,f=Tne(t,xne),d=bne({x:e,y:n,top:i,left:r,width:s,height:a},f);return!ze(e)||!ze(n)||!ze(s)||!ze(a)||!ze(i)||!ze(r)?null:C.createElement("path",Lw({},Er(d),{className:Lt("recharts-cross",u),d:Nne(e,n,s,a,i,r)}))};function Ane(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function wj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Sj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wj(Object(n),!0).forEach(function(i){kne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kne(t,e,n){return(e=Ine(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ine(t){var e=Rne(t,"string");return typeof e=="symbol"?e:e+""}function Rne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jne=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Pne=(t,e,n)=>t.map(i=>"".concat(jne(i)," ").concat(e,"ms ").concat(n)).join(","),Mne=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),Ph=(t,e)=>Object.keys(e).reduce((n,i)=>Sj(Sj({},n),{},{[i]:t(i,e[i])}),{});function Tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(n),!0).forEach(function(i){Dne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dne(t,e,n){return(e=One(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function One(t){var e=Lne(t,"string");return typeof e=="symbol"?e:e+""}function Lne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V0=(t,e,n)=>t+(e-t)*n,zw=t=>{var{from:e,to:n}=t;return e!==n},g6=(t,e,n)=>{var i=Ph((r,s)=>{if(zw(s)){var[a,u]=t(s.from,s.to,s.velocity);return vn(vn({},s),{},{from:a,velocity:u})}return s},e);return n<1?Ph((r,s)=>zw(s)&&i[r]!=null?vn(vn({},s),{},{velocity:V0(s.velocity,i[r].velocity,n),from:V0(s.from,i[r].from,n)}):s,e):g6(t,i,n-1)};function zne(t,e,n,i,r,s){var a,u=i.reduce((y,b)=>vn(vn({},y),{},{[b]:{from:t[b],velocity:0,to:e[b]}}),{}),f=()=>Ph((y,b)=>b.from,u),d=()=>!Object.values(u).filter(zw).length,p=null,m=y=>{a||(a=y);var b=y-a,S=b/n.dt;u=g6(n,u,S),r(vn(vn(vn({},t),e),f())),a=y,d()||(p=s.setTimeout(m))};return()=>(p=s.setTimeout(m),()=>{var y;(y=p)===null||y===void 0||y()})}function Une(t,e,n,i,r,s,a){var u=null,f=r.reduce((m,y)=>{var b=t[y],S=e[y];return b==null||S==null?m:vn(vn({},m),{},{[y]:[b,S]})},{}),d,p=m=>{d||(d=m);var y=(m-d)/i,b=Ph((N,E)=>V0(...E,n(y)),f);if(s(vn(vn(vn({},t),e),b)),y<1)u=a.setTimeout(p);else{var S=Ph((N,E)=>V0(...E,n(1)),f);s(vn(vn(vn({},t),e),S))}};return()=>(u=a.setTimeout(p),()=>{var m;(m=u)===null||m===void 0||m()})}const Vne=(t,e,n,i,r,s)=>{var a=Mne(t,e);return n==null?()=>(r(vn(vn({},t),e)),()=>{}):n.isStepper===!0?zne(t,e,n,a,r,s):Une(t,e,n,i,a,r,s)};var F0=1e-4,y6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],v6=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),Ej=(t,e)=>n=>{var i=y6(t,e);return v6(i,n)},Fne=(t,e)=>n=>{var i=y6(t,e),r=[...i.map((s,a)=>s*a).slice(1),0];return v6(r,n)},Hne=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var i=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(s=>parseFloat(s));return[r[0],r[1],r[2],r[3]]},Bne=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=Hne(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},$ne=(t,e,n,i)=>{var r=Ej(t,n),s=Ej(e,i),a=Fne(t,n),u=d=>d>1?1:d<0?0:d,f=d=>{for(var p=d>1?1:d,m=p,y=0;y<8;++y){var b=r(m)-p,S=a(m);if(Math.abs(b-p)<F0||S<F0)return s(m);m=u(m-b/S)}return s(m)};return f.isStepper=!1,f},Nj=function(){return $ne(...Bne(...arguments))},qne=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,s=(a,u,f)=>{var d=-(a-u)*n,p=f*i,m=f+(d-p)*r/1e3,y=f*r/1e3+a;return Math.abs(y-u)<F0&&Math.abs(m)<F0?[u,0]:[y,m]};return s.isStepper=!0,s.dt=r,s},Gne=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Nj(t);case"spring":return qne();default:if(t.split("(")[0]==="cubic-bezier")return Nj(t)}return typeof t=="function"?t:null};function Kne(t){var e,n=()=>null,i=!1,r=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var u=a,[f,...d]=u;if(typeof f=="number"){r=t.setTimeout(s.bind(null,d),f);return}s(f),r=t.setTimeout(s.bind(null,d));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,r&&(r(),r=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class Yne{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,s=a=>{a-i>=n?e(a):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(s))};return r=requestAnimationFrame(s),()=>{r!=null&&cancelAnimationFrame(r)}}}function Wne(){return Kne(new Yne)}var Xne=C.createContext(Wne);function Jne(t,e){var n=C.useContext(Xne);return C.useMemo(()=>e??n(t),[t,e,n])}var Qne=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),op={isSsr:Qne()},Zne={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Cj={t:0},o_={t:1};function x6(t){var e=jr(t,Zne),{isActive:n,canBegin:i,duration:r,easing:s,begin:a,onAnimationEnd:u,onAnimationStart:f,children:d}=e,p=n==="auto"?!op.isSsr:n,m=Jne(e.animationId,e.animationManager),[y,b]=C.useState(p?Cj:o_),S=C.useRef(null);return C.useEffect(()=>{p||b(o_)},[p]),C.useEffect(()=>{if(!p||!i)return gd;var N=Vne(Cj,o_,Gne(s),r,b,m.getTimeoutController()),E=()=>{S.current=N()};return m.start([f,a,E,r,u]),()=>{m.stop(),S.current&&S.current(),u()}},[p,i,r,s,a,f,u,m]),d(y.t)}function b6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(Nh(e)),i=C.useRef(t);return i.current!==t&&(n.current=Nh(e),i.current=t),n.current}var eie=["radius"],tie=["radius"],Aj,kj,Ij,Rj,jj,Pj,Mj,Dj,Oj,Lj;function zj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Uj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zj(Object(n),!0).forEach(function(i){nie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nie(t,e,n){return(e=iie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iie(t){var e=rie(t,"string");return typeof e=="symbol"?e:e+""}function rie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H0(){return H0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},H0.apply(null,arguments)}function Vj(t,e){if(t==null)return{};var n,i,r=sie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Rs(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Fj=(t,e,n,i,r)=>{var s=Fa(n),a=Fa(i),u=Math.min(Math.abs(s)/2,Math.abs(a)/2),f=a>=0?1:-1,d=s>=0?1:-1,p=a>=0&&s>=0||a<0&&s<0?1:0,m;if(u>0&&Array.isArray(r)){for(var y=[0,0,0,0],b=0,S=4;b<S;b++){var N,E=(N=r[b])!==null&&N!==void 0?N:0;y[b]=E>u?u:E}m=Wn(Aj||(Aj=Rs(["M",",",""])),t,e+f*y[0]),y[0]>0&&(m+=Wn(kj||(kj=Rs(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,t+d*y[0],e)),m+=Wn(Ij||(Ij=Rs(["L ",",",""])),t+n-d*y[1],e),y[1]>0&&(m+=Wn(Rj||(Rj=Rs(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,t+n,e+f*y[1])),m+=Wn(jj||(jj=Rs(["L ",",",""])),t+n,e+i-f*y[2]),y[2]>0&&(m+=Wn(Pj||(Pj=Rs(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,t+n-d*y[2],e+i)),m+=Wn(Mj||(Mj=Rs(["L ",",",""])),t+d*y[3],e+i),y[3]>0&&(m+=Wn(Dj||(Dj=Rs(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,t,e+i-f*y[3])),m+="Z"}else if(u>0&&r===+r&&r>0){var R=Math.min(u,r);m=Wn(Oj||(Oj=Rs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+f*R,R,R,p,t+d*R,e,t+n-d*R,e,R,R,p,t+n,e+f*R,t+n,e+i-f*R,R,R,p,t+n-d*R,e+i,t+d*R,e+i,R,R,p,t,e+i-f*R)}else m=Wn(Lj||(Lj=Rs(["M ",","," h "," v "," h "," Z"])),t,e,n,i,-n);return m},Hj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oie=t=>{var e=jr(t,Hj),n=C.useRef(null),[i,r]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var X=n.current.getTotalLength();X&&r(X)}catch{}},[]);var{x:s,y:a,width:u,height:f,radius:d,className:p}=e,{animationEasing:m,animationDuration:y,animationBegin:b,isAnimationActive:S,isUpdateAnimationActive:N}=e,E=C.useRef(u),R=C.useRef(f),U=C.useRef(s),j=C.useRef(a),B=C.useMemo(()=>({x:s,y:a,width:u,height:f,radius:d}),[s,a,u,f,d]),O=b6(B,"rectangle-");if(s!==+s||a!==+a||u!==+u||f!==+f||u===0||f===0)return null;var P=Lt("recharts-rectangle",p);if(!N){var I=Er(e),{radius:A}=I,M=Vj(I,eie);return C.createElement("path",H0({},M,{x:Fa(s),y:Fa(a),width:Fa(u),height:Fa(f),radius:typeof d=="number"?d:void 0,className:P,d:Fj(s,a,u,f,d)}))}var H=E.current,F=R.current,D=U.current,z=j.current,$="0px ".concat(i===-1?1:i,"px"),Y="".concat(i,"px 0px"),W=Pne(["strokeDasharray"],y,typeof m=="string"?m:Hj.animationEasing);return C.createElement(x6,{animationId:O,key:O,canBegin:i>0,duration:y,easing:m,isActive:N,begin:b},X=>{var oe=Ds(H,u,X),ve=Ds(F,f,X),Ee=Ds(D,s,X),K=Ds(z,a,X);n.current&&(E.current=oe,R.current=ve,U.current=Ee,j.current=K);var te;S?X>0?te={transition:W,strokeDasharray:Y}:te={strokeDasharray:$}:te={strokeDasharray:Y};var ge=Er(e),{radius:Z}=ge,he=Vj(ge,tie);return C.createElement("path",H0({},he,{radius:typeof d=="number"?d:void 0,className:P,d:Fj(Ee,K,oe,ve,d),ref:n,style:Uj(Uj({},te),e.style)}))})};function Bj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bj(Object(n),!0).forEach(function(i){aie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function aie(t,e,n){return(e=lie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lie(t){var e=cie(t,"string");return typeof e=="symbol"?e:e+""}function cie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B0=Math.PI/180,uie=t=>t*180/Math.PI,Zn=(t,e,n,i)=>({x:t+Math.cos(-B0*i)*n,y:e+Math.sin(-B0*i)*n}),die=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},fie=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return Math.sqrt((n-r)**2+(i-s)**2)},hie=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:s}=e,a=fie({x:n,y:i},{x:r,y:s});if(a<=0)return{radius:a,angle:0};var u=(n-r)/a,f=Math.acos(u);return i>s&&(f=2*Math.PI-f),{radius:a,angle:uie(f),angleInRadian:f}},pie=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),s=Math.min(i,r);return{startAngle:e-s*360,endAngle:n-s*360}},mie=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(r,s);return t+a*360},gie=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:s}=hie({x:n,y:i},e),{innerRadius:a,outerRadius:u}=e;if(r<a||r>u||r===0)return null;var{startAngle:f,endAngle:d}=pie(e),p=s,m;if(f<=d){for(;p>d;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=d}else{for(;p>f;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=f}return m?$j($j({},e),{},{radius:r,angle:mie(p,e)}):null};function _6(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:s}=t,a=Zn(e,n,i,r),u=Zn(e,n,i,s);return{points:[a,u],cx:e,cy:n,radius:i,startAngle:r,endAngle:s}}var qj,Gj,Kj,Yj,Wj,Xj,Jj;function Uw(){return Uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uw.apply(null,arguments)}function Yl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var yie=(t,e)=>{var n=es(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},hg=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:s,isExternal:a,cornerRadius:u,cornerIsExternal:f}=t,d=u*(a?1:-1)+i,p=Math.asin(u/d)/B0,m=f?r:r+s*p,y=Zn(e,n,d,m),b=Zn(e,n,i,m),S=f?r-s*p:r,N=Zn(e,n,d*Math.cos(p*B0),S);return{center:y,circleTangency:b,lineTangency:N,theta:p}},w6=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a}=t,u=yie(s,a),f=s+u,d=Zn(e,n,r,s),p=Zn(e,n,r,f),m=Wn(qj||(qj=Yl(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(u)>180),+(s>f),p.x,p.y);if(i>0){var y=Zn(e,n,i,s),b=Zn(e,n,i,f);m+=Wn(Gj||(Gj=Yl(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,i,i,+(Math.abs(u)>180),+(s<=f),y.x,y.y)}else m+=Wn(Kj||(Kj=Yl(["L ",","," Z"])),e,n);return m},vie=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:u,startAngle:f,endAngle:d}=t,p=es(d-f),{circleTangency:m,lineTangency:y,theta:b}=hg({cx:e,cy:n,radius:r,angle:f,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:N,theta:E}=hg({cx:e,cy:n,radius:r,angle:d,sign:-p,cornerRadius:s,cornerIsExternal:u}),R=u?Math.abs(f-d):Math.abs(f-d)-b-E;if(R<0)return a?Wn(Yj||(Yj=Yl(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,s,s,s*2,s,s,-s*2):w6({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:f,endAngle:d});var U=Wn(Wj||(Wj=Yl(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,s,s,+(p<0),m.x,m.y,r,r,+(R>180),+(p<0),S.x,S.y,s,s,+(p<0),N.x,N.y);if(i>0){var{circleTangency:j,lineTangency:B,theta:O}=hg({cx:e,cy:n,radius:i,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:P,lineTangency:I,theta:A}=hg({cx:e,cy:n,radius:i,angle:d,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),M=u?Math.abs(f-d):Math.abs(f-d)-O-A;if(M<0&&s===0)return"".concat(U,"L").concat(e,",").concat(n,"Z");U+=Wn(Xj||(Xj=Yl(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),I.x,I.y,s,s,+(p<0),P.x,P.y,i,i,+(M>180),+(p>0),j.x,j.y,s,s,+(p<0),B.x,B.y)}else U+=Wn(Jj||(Jj=Yl(["L",",","Z"])),e,n);return U},xie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bie=t=>{var e=jr(t,xie),{cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:a,forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:p,className:m}=e;if(s<r||d===p)return null;var y=Lt("recharts-sector",m),b=s-r,S=rl(a,b,0,!0),N;return S>0&&Math.abs(d-p)<360?N=vie({cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:Math.min(S,b/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:p}):N=w6({cx:n,cy:i,innerRadius:r,outerRadius:s,startAngle:d,endAngle:p}),C.createElement("path",Uw({},Er(e),{className:y,d:N}))};function _ie(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(fL(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:s,outerRadius:a,angle:u}=e,f=Zn(i,r,s,u),d=Zn(i,r,a,u);return[{x:f.x,y:f.y},{x:d.x,y:d.y}]}return _6(e)}}var a_={},l_={},c_={},Qj;function wie(){return Qj||(Qj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wL();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(c_)),c_}var Zj;function Sie(){return Zj||(Zj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wie();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(l_)),l_}var eP;function Tie(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SL(),n=Sie();function i(r,s,a){a&&typeof a!="number"&&e.isIterateeCall(r,s,a)&&(s=a=void 0),r=n.toFinite(r),s===void 0?(s=r,r=0):s=n.toFinite(s),a=a===void 0?r<s?1:-1:n.toFinite(a);const u=Math.max(Math.ceil((s-r)/(a||1)),0),f=new Array(u);for(let d=0;d<u;d++)f[d]=r,r+=a;return f}t.range=i})(a_)),a_}var u_,tP;function Eie(){return tP||(tP=1,u_=Tie().range),u_}var Nie=Eie();const S6=Fo(Nie);function Wa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GT(t){let e,n,i;t.length!==2?(e=Wa,n=(u,f)=>Wa(t(u),f),i=(u,f)=>t(u)-f):(e=t===Wa||t===Cie?t:Aie,n=t,i=t);function r(u,f,d=0,p=u.length){if(d<p){if(e(f,f)!==0)return p;do{const m=d+p>>>1;n(u[m],f)<0?d=m+1:p=m}while(d<p)}return d}function s(u,f,d=0,p=u.length){if(d<p){if(e(f,f)!==0)return p;do{const m=d+p>>>1;n(u[m],f)<=0?d=m+1:p=m}while(d<p)}return d}function a(u,f,d=0,p=u.length){const m=r(u,f,d,p-1);return m>d&&i(u[m-1],f)>-i(u[m],f)?m-1:m}return{left:r,center:a,right:s}}function Aie(){return 0}function T6(t){return t===null?NaN:+t}function*kie(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Iie=GT(Wa),ap=Iie.right;GT(T6).center;class nP extends Map{constructor(e,n=Pie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(iP(this,e))}has(e){return super.has(iP(this,e))}set(e,n){return super.set(Rie(this,e),n)}delete(e){return super.delete(jie(this,e))}}function iP({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Rie({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function jie({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Pie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Mie(t=Wa){if(t===Wa)return E6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function E6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Die=Math.sqrt(50),Oie=Math.sqrt(10),Lie=Math.sqrt(2);function $0(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=Die?10:s>=Oie?5:s>=Lie?2:1;let u,f,d;return r<0?(d=Math.pow(10,-r)/a,u=Math.round(t*d),f=Math.round(e*d),u/d<t&&++u,f/d>e&&--f,d=-d):(d=Math.pow(10,r)*a,u=Math.round(t/d),f=Math.round(e/d),u*d<t&&++u,f*d>e&&--f),f<u&&.5<=n&&n<2?$0(t,e,n*2):[u,f,d]}function Vw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?$0(e,t,n):$0(t,e,n);if(!(s>=r))return[];const u=s-r+1,f=new Array(u);if(i)if(a<0)for(let d=0;d<u;++d)f[d]=(s-d)/-a;else for(let d=0;d<u;++d)f[d]=(s-d)*a;else if(a<0)for(let d=0;d<u;++d)f[d]=(r+d)/-a;else for(let d=0;d<u;++d)f[d]=(r+d)*a;return f}function Fw(t,e,n){return e=+e,t=+t,n=+n,$0(t,e,n)[2]}function Hw(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Fw(e,t,n):Fw(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function rP(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function sP(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function N6(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?E6:Mie(r);i>n;){if(i-n>600){const f=i-n+1,d=e-n+1,p=Math.log(f),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(f-m)/f)*(d-f/2<0?-1:1),b=Math.max(n,Math.floor(e-d*m/f+y)),S=Math.min(i,Math.floor(e+(f-d)*m/f+y));N6(t,e,b,S,r)}const s=t[e];let a=n,u=i;for(Vf(t,n,e),r(t[i],s)>0&&Vf(t,n,i);a<u;){for(Vf(t,a,u),++a,--u;r(t[a],s)<0;)++a;for(;r(t[u],s)>0;)--u}r(t[n],s)===0?Vf(t,n,u):(++u,Vf(t,u,i)),u<=e&&(n=u+1),e<=u&&(i=u-1)}return t}function Vf(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function zie(t,e,n){if(t=Float64Array.from(kie(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return sP(t);if(e>=1)return rP(t);var i,r=(i-1)*e,s=Math.floor(r),a=rP(N6(t,s).subarray(0,s+1)),u=sP(t.subarray(s+1));return a+(u-a)*(r-s)}}function Uie(t,e,n=T6){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),u=+n(t[s+1],s+1,t);return a+(u-a)*(r-s)}}function Vie(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Pr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Go(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Bw=Symbol("implicit");function KT(){var t=new nP,e=[],n=[],i=Bw;function r(s){let a=t.get(s);if(a===void 0){if(i!==Bw)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new nP;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return KT(e,n).unknown(i)},Pr.apply(r,arguments),r}function YT(){var t=KT().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,u=!1,f=0,d=0,p=.5;delete t.unknown;function m(){var y=e().length,b=r<i,S=b?r:i,N=b?i:r;s=(N-S)/Math.max(1,y-f+d*2),u&&(s=Math.floor(s)),S+=(N-S-s*(y-f))*p,a=s*(1-f),u&&(S=Math.round(S),a=Math.round(a));var E=Vie(y).map(function(R){return S+s*R});return n(b?E.reverse():E)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([i,r]=y,i=+i,r=+r,m()):[i,r]},t.rangeRound=function(y){return[i,r]=y,i=+i,r=+r,u=!0,m()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(y){return arguments.length?(u=!!y,m()):u},t.padding=function(y){return arguments.length?(f=Math.min(1,d=+y),m()):f},t.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),m()):f},t.paddingOuter=function(y){return arguments.length?(d=+y,m()):d},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return YT(e(),[i,r]).round(u).paddingInner(f).paddingOuter(d).align(p)},Pr.apply(m(),arguments)}function C6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return C6(e())},t}function Fie(){return C6(YT.apply(null,arguments).paddingInner(1))}function WT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function A6(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function lp(){}var Mh=.7,q0=1/Mh,Uu="\\s*([+-]?\\d+)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hie=/^#([0-9a-f]{3,8})$/,Bie=new RegExp(`^rgb\\(${Uu},${Uu},${Uu}\\)$`),$ie=new RegExp(`^rgb\\(${$s},${$s},${$s}\\)$`),qie=new RegExp(`^rgba\\(${Uu},${Uu},${Uu},${Dh}\\)$`),Gie=new RegExp(`^rgba\\(${$s},${$s},${$s},${Dh}\\)$`),Kie=new RegExp(`^hsl\\(${Dh},${$s},${$s}\\)$`),Yie=new RegExp(`^hsla\\(${Dh},${$s},${$s},${Dh}\\)$`),oP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WT(lp,Oh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aP,formatHex:aP,formatHex8:Wie,formatHsl:Xie,formatRgb:lP,toString:lP});function aP(){return this.rgb().formatHex()}function Wie(){return this.rgb().formatHex8()}function Xie(){return k6(this).formatHsl()}function lP(){return this.rgb().formatRgb()}function Oh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cP(e):n===3?new Mi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?pg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?pg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Bie.exec(t))?new Mi(e[1],e[2],e[3],1):(e=$ie.exec(t))?new Mi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qie.exec(t))?pg(e[1],e[2],e[3],e[4]):(e=Gie.exec(t))?pg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kie.exec(t))?fP(e[1],e[2]/100,e[3]/100,1):(e=Yie.exec(t))?fP(e[1],e[2]/100,e[3]/100,e[4]):oP.hasOwnProperty(t)?cP(oP[t]):t==="transparent"?new Mi(NaN,NaN,NaN,0):null}function cP(t){return new Mi(t>>16&255,t>>8&255,t&255,1)}function pg(t,e,n,i){return i<=0&&(t=e=n=NaN),new Mi(t,e,n,i)}function Jie(t){return t instanceof lp||(t=Oh(t)),t?(t=t.rgb(),new Mi(t.r,t.g,t.b,t.opacity)):new Mi}function $w(t,e,n,i){return arguments.length===1?Jie(t):new Mi(t,e,n,i??1)}function Mi(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}WT(Mi,$w,A6(lp,{brighter(t){return t=t==null?q0:Math.pow(q0,t),new Mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new Mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mi(tc(this.r),tc(this.g),tc(this.b),G0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uP,formatHex:uP,formatHex8:Qie,formatRgb:dP,toString:dP}));function uP(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}`}function Qie(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}${Wl((isNaN(this.opacity)?1:this.opacity)*255)}`}function dP(){const t=G0(this.opacity);return`${t===1?"rgb(":"rgba("}${tc(this.r)}, ${tc(this.g)}, ${tc(this.b)}${t===1?")":`, ${t})`}`}function G0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wl(t){return t=tc(t),(t<16?"0":"")+t.toString(16)}function fP(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xr(t,e,n,i)}function k6(t){if(t instanceof Xr)return new Xr(t.h,t.s,t.l,t.opacity);if(t instanceof lp||(t=Oh(t)),!t)return new Xr;if(t instanceof Xr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,u=s-r,f=(s+r)/2;return u?(e===s?a=(n-i)/u+(n<i)*6:n===s?a=(i-e)/u+2:a=(e-n)/u+4,u/=f<.5?s+r:2-s-r,a*=60):u=f>0&&f<1?0:a,new Xr(a,u,f,t.opacity)}function Zie(t,e,n,i){return arguments.length===1?k6(t):new Xr(t,e,n,i??1)}function Xr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}WT(Xr,Zie,A6(lp,{brighter(t){return t=t==null?q0:Math.pow(q0,t),new Xr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new Xr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Mi(d_(t>=240?t-240:t+120,r,i),d_(t,r,i),d_(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Xr(hP(this.h),mg(this.s),mg(this.l),G0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=G0(this.opacity);return`${t===1?"hsl(":"hsla("}${hP(this.h)}, ${mg(this.s)*100}%, ${mg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hP(t){return t=(t||0)%360,t<0?t+360:t}function mg(t){return Math.max(0,Math.min(1,t||0))}function d_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const XT=t=>()=>t;function ere(t,e){return function(n){return t+n*e}}function tre(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function nre(t){return(t=+t)==1?I6:function(e,n){return n-e?tre(e,n,t):XT(isNaN(e)?n:e)}}function I6(t,e){var n=e-t;return n?ere(t,n):XT(isNaN(t)?e:t)}const pP=(function t(e){var n=nre(e);function i(r,s){var a=n((r=$w(r)).r,(s=$w(s)).r),u=n(r.g,s.g),f=n(r.b,s.b),d=I6(r.opacity,s.opacity);return function(p){return r.r=a(p),r.g=u(p),r.b=f(p),r.opacity=d(p),r+""}}return i.gamma=t,i})(1);function ire(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function rre(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sre(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=vd(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(u){for(a=0;a<i;++a)s[a]=r[a](u);return s}}function ore(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function K0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function are(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=vd(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var qw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,f_=new RegExp(qw.source,"g");function lre(t){return function(){return t}}function cre(t){return function(e){return t(e)+""}}function ure(t,e){var n=qw.lastIndex=f_.lastIndex=0,i,r,s,a=-1,u=[],f=[];for(t=t+"",e=e+"";(i=qw.exec(t))&&(r=f_.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(i=i[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,f.push({i:a,x:K0(i,r)})),n=f_.lastIndex;return n<e.length&&(s=e.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?f[0]?cre(f[0].x):lre(e):(e=f.length,function(d){for(var p=0,m;p<e;++p)u[(m=f[p]).i]=m.x(d);return u.join("")})}function vd(t,e){var n=typeof e,i;return e==null||n==="boolean"?XT(e):(n==="number"?K0:n==="string"?(i=Oh(e))?(e=i,pP):ure:e instanceof Oh?pP:e instanceof Date?ore:rre(e)?ire:Array.isArray(e)?sre:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?are:K0)(t,e)}function JT(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function dre(t,e){e===void 0&&(e=t,t=vd);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var u=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[u](a-u)}}function fre(t){return function(){return t}}function Y0(t){return+t}var mP=[0,1];function bi(t){return t}function Gw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:fre(isNaN(e)?NaN:.5)}function hre(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function pre(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Gw(r,i),s=n(a,s)):(i=Gw(i,r),s=n(s,a)),function(u){return s(i(u))}}function mre(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Gw(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(u){var f=ap(t,u,1,i)-1;return s[f](r[f](u))}}function cp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dv(){var t=mP,e=mP,n=vd,i,r,s,a=bi,u,f,d;function p(){var y=Math.min(t.length,e.length);return a!==bi&&(a=hre(t[0],t[y-1])),u=y>2?mre:pre,f=d=null,m}function m(y){return y==null||isNaN(y=+y)?s:(f||(f=u(t.map(i),e,n)))(i(a(y)))}return m.invert=function(y){return a(r((d||(d=u(e,t.map(i),K0)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,Y0),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),n=JT,p()},m.clamp=function(y){return arguments.length?(a=y?!0:bi,p()):a!==bi},m.interpolate=function(y){return arguments.length?(n=y,p()):n},m.unknown=function(y){return arguments.length?(s=y,m):s},function(y,b){return i=y,r=b,p()}}function QT(){return dv()(bi,bi)}function gre(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function W0(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ed(t){return t=W0(Math.abs(t)),t?t[1]:NaN}function yre(t,e){return function(n,i){for(var r=n.length,s=[],a=0,u=t[0],f=0;r>0&&u>0&&(f+u+1>i&&(u=Math.max(1,i-f)),s.push(n.substring(r-=u,r+u)),!((f+=u+1)>i));)u=t[a=(a+1)%t.length];return s.reverse().join(e)}}function vre(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var xre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lh(t){if(!(e=xre.exec(t)))throw new Error("invalid format: "+t);var e;return new ZT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Lh.prototype=ZT.prototype;function ZT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ZT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bre(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var X0;function _re(t,e){var n=W0(t,e);if(!n)return X0=void 0,t.toPrecision(e);var i=n[0],r=n[1],s=r-(X0=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+W0(t,Math.max(0,e+s-1))[0]}function gP(t,e){var n=W0(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const yP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gre,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gP(t*100,e),r:gP,s:_re,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vP(t){return t}var xP=Array.prototype.map,bP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wre(t){var e=t.grouping===void 0||t.thousands===void 0?vP:yre(xP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?vP:vre(xP.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function d(m,y){m=Lh(m);var b=m.fill,S=m.align,N=m.sign,E=m.symbol,R=m.zero,U=m.width,j=m.comma,B=m.precision,O=m.trim,P=m.type;P==="n"?(j=!0,P="g"):yP[P]||(B===void 0&&(B=12),O=!0,P="g"),(R||b==="0"&&S==="=")&&(R=!0,b="0",S="=");var I=(y&&y.prefix!==void 0?y.prefix:"")+(E==="$"?n:E==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),A=(E==="$"?i:/[%p]/.test(P)?a:"")+(y&&y.suffix!==void 0?y.suffix:""),M=yP[P],H=/[defgprs%]/.test(P);B=B===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function F(D){var z=I,$=A,Y,W,X;if(P==="c")$=M(D)+$,D="";else{D=+D;var oe=D<0||1/D<0;if(D=isNaN(D)?f:M(Math.abs(D),B),O&&(D=bre(D)),oe&&+D==0&&N!=="+"&&(oe=!1),z=(oe?N==="("?N:u:N==="-"||N==="("?"":N)+z,$=(P==="s"&&!isNaN(D)&&X0!==void 0?bP[8+X0/3]:"")+$+(oe&&N==="("?")":""),H){for(Y=-1,W=D.length;++Y<W;)if(X=D.charCodeAt(Y),48>X||X>57){$=(X===46?r+D.slice(Y+1):D.slice(Y))+$,D=D.slice(0,Y);break}}}j&&!R&&(D=e(D,1/0));var ve=z.length+D.length+$.length,Ee=ve<U?new Array(U-ve+1).join(b):"";switch(j&&R&&(D=e(Ee+D,Ee.length?U-$.length:1/0),Ee=""),S){case"<":D=z+D+$+Ee;break;case"=":D=z+Ee+D+$;break;case"^":D=Ee.slice(0,ve=Ee.length>>1)+z+D+$+Ee.slice(ve);break;default:D=Ee+z+D+$;break}return s(D)}return F.toString=function(){return m+""},F}function p(m,y){var b=Math.max(-8,Math.min(8,Math.floor(ed(y)/3)))*3,S=Math.pow(10,-b),N=d((m=Lh(m),m.type="f",m),{suffix:bP[8+b/3]});return function(E){return N(S*E)}}return{format:d,formatPrefix:p}}var gg,eE,R6;Sre({thousands:",",grouping:[3],currency:["$",""]});function Sre(t){return gg=wre(t),eE=gg.format,R6=gg.formatPrefix,gg}function Tre(t){return Math.max(0,-ed(Math.abs(t)))}function Ere(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ed(e)/3)))*3-ed(Math.abs(t)))}function Nre(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ed(e)-ed(t))+1}function j6(t,e,n,i){var r=Hw(t,e,n),s;switch(i=Lh(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=Ere(r,a))&&(i.precision=s),R6(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Nre(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Tre(r))&&(i.precision=s-(i.type==="%")*2);break}}return eE(i)}function ol(t){var e=t.domain;return t.ticks=function(n){var i=e();return Vw(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return j6(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],u=i[s],f,d,p=10;for(u<a&&(d=a,a=u,u=d,d=r,r=s,s=d);p-- >0;){if(d=Fw(a,u,n),d===f)return i[r]=a,i[s]=u,e(i);if(d>0)a=Math.floor(a/d)*d,u=Math.ceil(u/d)*d;else if(d<0)a=Math.ceil(a*d)/d,u=Math.floor(u*d)/d;else break;f=d}return t},t}function P6(){var t=QT();return t.copy=function(){return cp(t,P6())},Pr.apply(t,arguments),ol(t)}function M6(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Y0),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return M6(t).unknown(e)},t=arguments.length?Array.from(t,Y0):[0,1],ol(n)}function D6(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function _P(t){return Math.log(t)}function wP(t){return Math.exp(t)}function Cre(t){return-Math.log(-t)}function Are(t){return-Math.exp(-t)}function kre(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ire(t){return t===10?kre:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Rre(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function SP(t){return(e,n)=>-t(-e,n)}function tE(t){const e=t(_P,wP),n=e.domain;let i=10,r,s;function a(){return r=Rre(i),s=Ire(i),n()[0]<0?(r=SP(r),s=SP(s),t(Cre,Are)):t(_P,wP),e}return e.base=function(u){return arguments.length?(i=+u,a()):i},e.domain=function(u){return arguments.length?(n(u),a()):n()},e.ticks=u=>{const f=n();let d=f[0],p=f[f.length-1];const m=p<d;m&&([d,p]=[p,d]);let y=r(d),b=r(p),S,N;const E=u==null?10:+u;let R=[];if(!(i%1)&&b-y<E){if(y=Math.floor(y),b=Math.ceil(b),d>0){for(;y<=b;++y)for(S=1;S<i;++S)if(N=y<0?S/s(-y):S*s(y),!(N<d)){if(N>p)break;R.push(N)}}else for(;y<=b;++y)for(S=i-1;S>=1;--S)if(N=y>0?S/s(-y):S*s(y),!(N<d)){if(N>p)break;R.push(N)}R.length*2<E&&(R=Vw(d,p,E))}else R=Vw(y,b,Math.min(b-y,E)).map(s);return m?R.reverse():R},e.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Lh(f)).precision==null&&(f.trim=!0),f=eE(f)),u===1/0)return f;const d=Math.max(1,i*u/e.ticks().length);return p=>{let m=p/s(Math.round(r(p)));return m*i<i-.5&&(m*=i),m<=d?f(p):""}},e.nice=()=>n(D6(n(),{floor:u=>s(Math.floor(r(u))),ceil:u=>s(Math.ceil(r(u)))})),e}function O6(){const t=tE(dv()).domain([1,10]);return t.copy=()=>cp(t,O6()).base(t.base()),Pr.apply(t,arguments),t}function TP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function EP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function nE(t){var e=1,n=t(TP(e),EP(e));return n.constant=function(i){return arguments.length?t(TP(e=+i),EP(e)):e},ol(n)}function L6(){var t=nE(dv());return t.copy=function(){return cp(t,L6()).constant(t.constant())},Pr.apply(t,arguments)}function NP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jre(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Pre(t){return t<0?-t*t:t*t}function iE(t){var e=t(bi,bi),n=1;function i(){return n===1?t(bi,bi):n===.5?t(jre,Pre):t(NP(n),NP(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},ol(e)}function rE(){var t=iE(dv());return t.copy=function(){return cp(t,rE()).exponent(t.exponent())},Pr.apply(t,arguments),t}function Mre(){return rE.apply(null,arguments).exponent(.5)}function CP(t){return Math.sign(t)*t*t}function Dre(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function z6(){var t=QT(),e=[0,1],n=!1,i;function r(s){var a=Dre(t(s));return isNaN(a)?i:n?Math.round(a):a}return r.invert=function(s){return t.invert(CP(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain()},r.range=function(s){return arguments.length?(t.range((e=Array.from(s,Y0)).map(CP)),r):e.slice()},r.rangeRound=function(s){return r.range(s).round(!0)},r.round=function(s){return arguments.length?(n=!!s,r):n},r.clamp=function(s){return arguments.length?(t.clamp(s),r):t.clamp()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return z6(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},Pr.apply(r,arguments),ol(r)}function U6(){var t=[],e=[],n=[],i;function r(){var a=0,u=Math.max(1,e.length);for(n=new Array(u-1);++a<u;)n[a-1]=Uie(t,a/u);return s}function s(a){return a==null||isNaN(a=+a)?i:e[ap(n,a)]}return s.invertExtent=function(a){var u=e.indexOf(a);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let u of a)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Wa),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return U6().domain(t).range(e).unknown(i)},Pr.apply(s,arguments)}function V6(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function a(f){return f!=null&&f<=f?r[ap(i,f,0,n)]:s}function u(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*e-(f-n)*t)/(n+1);return a}return a.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,u()):[t,e]},a.range=function(f){return arguments.length?(n=(r=Array.from(f)).length-1,u()):r.slice()},a.invertExtent=function(f){var d=r.indexOf(f);return d<0?[NaN,NaN]:d<1?[t,i[0]]:d>=n?[i[n-1],e]:[i[d-1],i[d]]},a.unknown=function(f){return arguments.length&&(s=f),a},a.thresholds=function(){return i.slice()},a.copy=function(){return V6().domain([t,e]).range(r).unknown(s)},Pr.apply(ol(a),arguments)}function F6(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[ap(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return F6().domain(t).range(e).unknown(n)},Pr.apply(r,arguments)}const h_=new Date,p_=new Date;function Tn(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),u=r.ceil(s);return s-a<u-s?a:u},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,u)=>{const f=[];if(s=r.ceil(s),u=u==null?1:Math.floor(u),!(s<a)||!(u>0))return f;let d;do f.push(d=new Date(+s)),e(s,u),t(s);while(d<s&&s<a);return f},r.filter=s=>Tn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;e(a,-1),!s(a););else for(;--u>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(h_.setTime(+s),p_.setTime(+a),t(h_),t(p_),Math.floor(n(h_,p_))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const J0=Tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);J0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):J0);J0.range;const No=1e3,wr=No*60,Co=wr*60,Do=Co*24,sE=Do*7,AP=Do*30,m_=Do*365,Xl=Tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*No)},(t,e)=>(e-t)/No,t=>t.getUTCSeconds());Xl.range;const oE=Tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*No)},(t,e)=>{t.setTime(+t+e*wr)},(t,e)=>(e-t)/wr,t=>t.getMinutes());oE.range;const aE=Tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wr)},(t,e)=>(e-t)/wr,t=>t.getUTCMinutes());aE.range;const lE=Tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*No-t.getMinutes()*wr)},(t,e)=>{t.setTime(+t+e*Co)},(t,e)=>(e-t)/Co,t=>t.getHours());lE.range;const cE=Tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Co)},(t,e)=>(e-t)/Co,t=>t.getUTCHours());cE.range;const up=Tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wr)/Do,t=>t.getDate()-1);up.range;const fv=Tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Do,t=>t.getUTCDate()-1);fv.range;const H6=Tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Do,t=>Math.floor(t/Do));H6.range;function Ec(t){return Tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*wr)/sE)}const hv=Ec(0),Q0=Ec(1),Ore=Ec(2),Lre=Ec(3),td=Ec(4),zre=Ec(5),Ure=Ec(6);hv.range;Q0.range;Ore.range;Lre.range;td.range;zre.range;Ure.range;function Nc(t){return Tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/sE)}const pv=Nc(0),Z0=Nc(1),Vre=Nc(2),Fre=Nc(3),nd=Nc(4),Hre=Nc(5),Bre=Nc(6);pv.range;Z0.range;Vre.range;Fre.range;nd.range;Hre.range;Bre.range;const uE=Tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());uE.range;const dE=Tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());dE.range;const Oo=Tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Oo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Oo.range;const Lo=Tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Lo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Lo.range;function B6(t,e,n,i,r,s){const a=[[Xl,1,No],[Xl,5,5*No],[Xl,15,15*No],[Xl,30,30*No],[s,1,wr],[s,5,5*wr],[s,15,15*wr],[s,30,30*wr],[r,1,Co],[r,3,3*Co],[r,6,6*Co],[r,12,12*Co],[i,1,Do],[i,2,2*Do],[n,1,sE],[e,1,AP],[e,3,3*AP],[t,1,m_]];function u(d,p,m){const y=p<d;y&&([d,p]=[p,d]);const b=m&&typeof m.range=="function"?m:f(d,p,m),S=b?b.range(d,+p+1):[];return y?S.reverse():S}function f(d,p,m){const y=Math.abs(p-d)/m,b=GT(([,,E])=>E).right(a,y);if(b===a.length)return t.every(Hw(d/m_,p/m_,m));if(b===0)return J0.every(Math.max(Hw(d,p,m),1));const[S,N]=a[y/a[b-1][2]<a[b][2]/y?b-1:b];return S.every(N)}return[u,f]}const[$re,qre]=B6(Lo,dE,pv,H6,cE,aE),[Gre,Kre]=B6(Oo,uE,hv,up,lE,oE);function g_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function y_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ff(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Yre(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,u=t.months,f=t.shortMonths,d=Hf(r),p=Bf(r),m=Hf(s),y=Bf(s),b=Hf(a),S=Bf(a),N=Hf(u),E=Bf(u),R=Hf(f),U=Bf(f),j={a:X,A:oe,b:ve,B:Ee,c:null,d:MP,e:MP,f:yse,g:Cse,G:kse,H:pse,I:mse,j:gse,L:$6,m:vse,M:xse,p:K,q:te,Q:LP,s:zP,S:bse,u:_se,U:wse,V:Sse,w:Tse,W:Ese,x:null,X:null,y:Nse,Y:Ase,Z:Ise,"%":OP},B={a:ge,A:Z,b:he,B:Ne,c:null,d:DP,e:DP,f:Mse,g:$se,G:Gse,H:Rse,I:jse,j:Pse,L:G6,m:Dse,M:Ose,p:pe,q:ue,Q:LP,s:zP,S:Lse,u:zse,U:Use,V:Vse,w:Fse,W:Hse,x:null,X:null,y:Bse,Y:qse,Z:Kse,"%":OP},O={a:H,A:F,b:D,B:z,c:$,d:jP,e:jP,f:use,g:RP,G:IP,H:PP,I:PP,j:ose,L:cse,m:sse,M:ase,p:M,q:rse,Q:fse,s:hse,S:lse,u:Zre,U:ese,V:tse,w:Qre,W:nse,x:Y,X:W,y:RP,Y:IP,Z:ise,"%":dse};j.x=P(n,j),j.X=P(i,j),j.c=P(e,j),B.x=P(n,B),B.X=P(i,B),B.c=P(e,B);function P(re,Re){return function($e){var Se=[],Bt=-1,Xe=0,we=re.length,Ue,Ke,Mr;for($e instanceof Date||($e=new Date(+$e));++Bt<we;)re.charCodeAt(Bt)===37&&(Se.push(re.slice(Xe,Bt)),(Ke=kP[Ue=re.charAt(++Bt)])!=null?Ue=re.charAt(++Bt):Ke=Ue==="e"?" ":"0",(Mr=Re[Ue])&&(Ue=Mr($e,Ke)),Se.push(Ue),Xe=Bt+1);return Se.push(re.slice(Xe,Bt)),Se.join("")}}function I(re,Re){return function($e){var Se=Ff(1900,void 0,1),Bt=A(Se,re,$e+="",0),Xe,we;if(Bt!=$e.length)return null;if("Q"in Se)return new Date(Se.Q);if("s"in Se)return new Date(Se.s*1e3+("L"in Se?Se.L:0));if(Re&&!("Z"in Se)&&(Se.Z=0),"p"in Se&&(Se.H=Se.H%12+Se.p*12),Se.m===void 0&&(Se.m="q"in Se?Se.q:0),"V"in Se){if(Se.V<1||Se.V>53)return null;"w"in Se||(Se.w=1),"Z"in Se?(Xe=y_(Ff(Se.y,0,1)),we=Xe.getUTCDay(),Xe=we>4||we===0?Z0.ceil(Xe):Z0(Xe),Xe=fv.offset(Xe,(Se.V-1)*7),Se.y=Xe.getUTCFullYear(),Se.m=Xe.getUTCMonth(),Se.d=Xe.getUTCDate()+(Se.w+6)%7):(Xe=g_(Ff(Se.y,0,1)),we=Xe.getDay(),Xe=we>4||we===0?Q0.ceil(Xe):Q0(Xe),Xe=up.offset(Xe,(Se.V-1)*7),Se.y=Xe.getFullYear(),Se.m=Xe.getMonth(),Se.d=Xe.getDate()+(Se.w+6)%7)}else("W"in Se||"U"in Se)&&("w"in Se||(Se.w="u"in Se?Se.u%7:"W"in Se?1:0),we="Z"in Se?y_(Ff(Se.y,0,1)).getUTCDay():g_(Ff(Se.y,0,1)).getDay(),Se.m=0,Se.d="W"in Se?(Se.w+6)%7+Se.W*7-(we+5)%7:Se.w+Se.U*7-(we+6)%7);return"Z"in Se?(Se.H+=Se.Z/100|0,Se.M+=Se.Z%100,y_(Se)):g_(Se)}}function A(re,Re,$e,Se){for(var Bt=0,Xe=Re.length,we=$e.length,Ue,Ke;Bt<Xe;){if(Se>=we)return-1;if(Ue=Re.charCodeAt(Bt++),Ue===37){if(Ue=Re.charAt(Bt++),Ke=O[Ue in kP?Re.charAt(Bt++):Ue],!Ke||(Se=Ke(re,$e,Se))<0)return-1}else if(Ue!=$e.charCodeAt(Se++))return-1}return Se}function M(re,Re,$e){var Se=d.exec(Re.slice($e));return Se?(re.p=p.get(Se[0].toLowerCase()),$e+Se[0].length):-1}function H(re,Re,$e){var Se=b.exec(Re.slice($e));return Se?(re.w=S.get(Se[0].toLowerCase()),$e+Se[0].length):-1}function F(re,Re,$e){var Se=m.exec(Re.slice($e));return Se?(re.w=y.get(Se[0].toLowerCase()),$e+Se[0].length):-1}function D(re,Re,$e){var Se=R.exec(Re.slice($e));return Se?(re.m=U.get(Se[0].toLowerCase()),$e+Se[0].length):-1}function z(re,Re,$e){var Se=N.exec(Re.slice($e));return Se?(re.m=E.get(Se[0].toLowerCase()),$e+Se[0].length):-1}function $(re,Re,$e){return A(re,e,Re,$e)}function Y(re,Re,$e){return A(re,n,Re,$e)}function W(re,Re,$e){return A(re,i,Re,$e)}function X(re){return a[re.getDay()]}function oe(re){return s[re.getDay()]}function ve(re){return f[re.getMonth()]}function Ee(re){return u[re.getMonth()]}function K(re){return r[+(re.getHours()>=12)]}function te(re){return 1+~~(re.getMonth()/3)}function ge(re){return a[re.getUTCDay()]}function Z(re){return s[re.getUTCDay()]}function he(re){return f[re.getUTCMonth()]}function Ne(re){return u[re.getUTCMonth()]}function pe(re){return r[+(re.getUTCHours()>=12)]}function ue(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var Re=P(re+="",j);return Re.toString=function(){return re},Re},parse:function(re){var Re=I(re+="",!1);return Re.toString=function(){return re},Re},utcFormat:function(re){var Re=P(re+="",B);return Re.toString=function(){return re},Re},utcParse:function(re){var Re=I(re+="",!0);return Re.toString=function(){return re},Re}}}var kP={"-":"",_:" ",0:"0"},zn=/^\s*\d+/,Wre=/^%/,Xre=/[\\^$*+?|[\]().{}]/g;function mt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Jre(t){return t.replace(Xre,"\\$&")}function Hf(t){return new RegExp("^(?:"+t.map(Jre).join("|")+")","i")}function Bf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Qre(t,e,n){var i=zn.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Zre(t,e,n){var i=zn.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function ese(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function tse(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function nse(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function IP(t,e,n){var i=zn.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function RP(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function ise(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function rse(t,e,n){var i=zn.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function sse(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function jP(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ose(t,e,n){var i=zn.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function PP(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ase(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function lse(t,e,n){var i=zn.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function cse(t,e,n){var i=zn.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function use(t,e,n){var i=zn.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function dse(t,e,n){var i=Wre.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function fse(t,e,n){var i=zn.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function hse(t,e,n){var i=zn.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function MP(t,e){return mt(t.getDate(),e,2)}function pse(t,e){return mt(t.getHours(),e,2)}function mse(t,e){return mt(t.getHours()%12||12,e,2)}function gse(t,e){return mt(1+up.count(Oo(t),t),e,3)}function $6(t,e){return mt(t.getMilliseconds(),e,3)}function yse(t,e){return $6(t,e)+"000"}function vse(t,e){return mt(t.getMonth()+1,e,2)}function xse(t,e){return mt(t.getMinutes(),e,2)}function bse(t,e){return mt(t.getSeconds(),e,2)}function _se(t){var e=t.getDay();return e===0?7:e}function wse(t,e){return mt(hv.count(Oo(t)-1,t),e,2)}function q6(t){var e=t.getDay();return e>=4||e===0?td(t):td.ceil(t)}function Sse(t,e){return t=q6(t),mt(td.count(Oo(t),t)+(Oo(t).getDay()===4),e,2)}function Tse(t){return t.getDay()}function Ese(t,e){return mt(Q0.count(Oo(t)-1,t),e,2)}function Nse(t,e){return mt(t.getFullYear()%100,e,2)}function Cse(t,e){return t=q6(t),mt(t.getFullYear()%100,e,2)}function Ase(t,e){return mt(t.getFullYear()%1e4,e,4)}function kse(t,e){var n=t.getDay();return t=n>=4||n===0?td(t):td.ceil(t),mt(t.getFullYear()%1e4,e,4)}function Ise(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+mt(e/60|0,"0",2)+mt(e%60,"0",2)}function DP(t,e){return mt(t.getUTCDate(),e,2)}function Rse(t,e){return mt(t.getUTCHours(),e,2)}function jse(t,e){return mt(t.getUTCHours()%12||12,e,2)}function Pse(t,e){return mt(1+fv.count(Lo(t),t),e,3)}function G6(t,e){return mt(t.getUTCMilliseconds(),e,3)}function Mse(t,e){return G6(t,e)+"000"}function Dse(t,e){return mt(t.getUTCMonth()+1,e,2)}function Ose(t,e){return mt(t.getUTCMinutes(),e,2)}function Lse(t,e){return mt(t.getUTCSeconds(),e,2)}function zse(t){var e=t.getUTCDay();return e===0?7:e}function Use(t,e){return mt(pv.count(Lo(t)-1,t),e,2)}function K6(t){var e=t.getUTCDay();return e>=4||e===0?nd(t):nd.ceil(t)}function Vse(t,e){return t=K6(t),mt(nd.count(Lo(t),t)+(Lo(t).getUTCDay()===4),e,2)}function Fse(t){return t.getUTCDay()}function Hse(t,e){return mt(Z0.count(Lo(t)-1,t),e,2)}function Bse(t,e){return mt(t.getUTCFullYear()%100,e,2)}function $se(t,e){return t=K6(t),mt(t.getUTCFullYear()%100,e,2)}function qse(t,e){return mt(t.getUTCFullYear()%1e4,e,4)}function Gse(t,e){var n=t.getUTCDay();return t=n>=4||n===0?nd(t):nd.ceil(t),mt(t.getUTCFullYear()%1e4,e,4)}function Kse(){return"+0000"}function OP(){return"%"}function LP(t){return+t}function zP(t){return Math.floor(+t/1e3)}var vu,Y6,W6;Yse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yse(t){return vu=Yre(t),Y6=vu.format,vu.parse,W6=vu.utcFormat,vu.utcParse,vu}function Wse(t){return new Date(t)}function Xse(t){return t instanceof Date?+t:+new Date(+t)}function fE(t,e,n,i,r,s,a,u,f,d){var p=QT(),m=p.invert,y=p.domain,b=d(".%L"),S=d(":%S"),N=d("%I:%M"),E=d("%I %p"),R=d("%a %d"),U=d("%b %d"),j=d("%B"),B=d("%Y");function O(P){return(f(P)<P?b:u(P)<P?S:a(P)<P?N:s(P)<P?E:i(P)<P?r(P)<P?R:U:n(P)<P?j:B)(P)}return p.invert=function(P){return new Date(m(P))},p.domain=function(P){return arguments.length?y(Array.from(P,Xse)):y().map(Wse)},p.ticks=function(P){var I=y();return t(I[0],I[I.length-1],P??10)},p.tickFormat=function(P,I){return I==null?O:d(I)},p.nice=function(P){var I=y();return(!P||typeof P.range!="function")&&(P=e(I[0],I[I.length-1],P??10)),P?y(D6(I,P)):p},p.copy=function(){return cp(p,fE(t,e,n,i,r,s,a,u,f,d))},p}function Jse(){return Pr.apply(fE(Gre,Kre,Oo,uE,hv,up,lE,oE,Xl,Y6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qse(){return Pr.apply(fE($re,qre,Lo,dE,pv,fv,cE,aE,Xl,W6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mv(){var t=0,e=1,n,i,r,s,a=bi,u=!1,f;function d(m){return m==null||isNaN(m=+m)?f:a(r===0?.5:(m=(s(m)-n)*r,u?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e]=m,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),d):[t,e]},d.clamp=function(m){return arguments.length?(u=!!m,d):u},d.interpolator=function(m){return arguments.length?(a=m,d):a};function p(m){return function(y){var b,S;return arguments.length?([b,S]=y,a=m(b,S),d):[a(0),a(1)]}}return d.range=p(vd),d.rangeRound=p(JT),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return s=m,n=m(t),i=m(e),r=n===i?0:1/(i-n),d}}function al(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function X6(){var t=ol(mv()(bi));return t.copy=function(){return al(t,X6())},Go.apply(t,arguments)}function J6(){var t=tE(mv()).domain([1,10]);return t.copy=function(){return al(t,J6()).base(t.base())},Go.apply(t,arguments)}function Q6(){var t=nE(mv());return t.copy=function(){return al(t,Q6()).constant(t.constant())},Go.apply(t,arguments)}function hE(){var t=iE(mv());return t.copy=function(){return al(t,hE()).exponent(t.exponent())},Go.apply(t,arguments)}function Zse(){return hE.apply(null,arguments).exponent(.5)}function Z6(){var t=[],e=bi;function n(i){if(i!=null&&!isNaN(i=+i))return e((ap(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(Wa),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,s)=>zie(t,s/i))},n.copy=function(){return Z6(e).domain(t)},Go.apply(n,arguments)}function gv(){var t=0,e=.5,n=1,i=1,r,s,a,u,f,d=bi,p,m=!1,y;function b(N){return isNaN(N=+N)?y:(N=.5+((N=+p(N))-s)*(i*N<i*s?u:f),d(m?Math.max(0,Math.min(1,N)):N))}b.domain=function(N){return arguments.length?([t,e,n]=N,r=p(t=+t),s=p(e=+e),a=p(n=+n),u=r===s?0:.5/(s-r),f=s===a?0:.5/(a-s),i=s<r?-1:1,b):[t,e,n]},b.clamp=function(N){return arguments.length?(m=!!N,b):m},b.interpolator=function(N){return arguments.length?(d=N,b):d};function S(N){return function(E){var R,U,j;return arguments.length?([R,U,j]=E,d=dre(N,[R,U,j]),b):[d(0),d(.5),d(1)]}}return b.range=S(vd),b.rangeRound=S(JT),b.unknown=function(N){return arguments.length?(y=N,b):y},function(N){return p=N,r=N(t),s=N(e),a=N(n),u=r===s?0:.5/(s-r),f=s===a?0:.5/(a-s),i=s<r?-1:1,b}}function ez(){var t=ol(gv()(bi));return t.copy=function(){return al(t,ez())},Go.apply(t,arguments)}function tz(){var t=tE(gv()).domain([.1,1,10]);return t.copy=function(){return al(t,tz()).base(t.base())},Go.apply(t,arguments)}function nz(){var t=nE(gv());return t.copy=function(){return al(t,nz()).constant(t.constant())},Go.apply(t,arguments)}function pE(){var t=iE(gv());return t.copy=function(){return al(t,pE()).exponent(t.exponent())},Go.apply(t,arguments)}function eoe(){return pE.apply(null,arguments).exponent(.5)}const eh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:YT,scaleDiverging:ez,scaleDivergingLog:tz,scaleDivergingPow:pE,scaleDivergingSqrt:eoe,scaleDivergingSymlog:nz,scaleIdentity:M6,scaleImplicit:Bw,scaleLinear:P6,scaleLog:O6,scaleOrdinal:KT,scalePoint:Fie,scalePow:rE,scaleQuantile:U6,scaleQuantize:V6,scaleRadial:z6,scaleSequential:X6,scaleSequentialLog:J6,scaleSequentialPow:hE,scaleSequentialQuantile:Z6,scaleSequentialSqrt:Zse,scaleSequentialSymlog:Q6,scaleSqrt:Mre,scaleSymlog:L6,scaleThreshold:F6,scaleTime:Jse,scaleUtc:Qse,tickFormat:j6},Symbol.toStringTag,{value:"Module"}));var Ko=t=>t.chartData,iz=fe([Ko],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),rz=(t,e,n,i)=>i?iz(t):Ko(t),toe=(t,e,n)=>n?iz(t):Ko(t);function zo(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(pt(e)&&pt(n))return!0}return!1}function UP(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function sz(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,s;if(pt(n))r=n;else if(typeof n=="function")return;if(pt(i))s=i;else if(typeof i=="function")return;var a=[r,s];if(zo(a))return a}}function noe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(zo(i))return UP(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,s]=t,a,u;if(r==="auto")e!=null&&(a=Math.min(...e));else if(ze(r))a=r;else if(typeof r=="function")try{e!=null&&(a=r(e==null?void 0:e[0]))}catch{}else if(typeof r=="string"&&XR.test(r)){var f=XR.exec(r);if(f==null||f[1]==null||e==null)a=void 0;else{var d=+f[1];a=e[0]-d}}else a=e==null?void 0:e[0];if(s==="auto")e!=null&&(u=Math.max(...e));else if(ze(s))u=s;else if(typeof s=="function")try{e!=null&&(u=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&JR.test(s)){var p=JR.exec(s);if(p==null||p[1]==null||e==null)u=void 0;else{var m=+p[1];u=e[1]+m}}else u=e==null?void 0:e[1];var y=[a,u];if(zo(y))return e==null?y:UP(y,e,n)}}}var xd=1e9,ioe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gE,Ft=!0,Cr="[DecimalError] ",nc=Cr+"Invalid argument: ",mE=Cr+"Exponent out of range: ",bd=Math.floor,ql=Math.pow,roe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yi,Pn=1e7,Dt=7,oz=9007199254740991,ey=bd(oz/Dt),je={};je.absoluteValue=je.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};je.comparedTo=je.cmp=function(t){var e,n,i,r,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===r?0:i>r^s.s<0?1:-1};je.decimalPlaces=je.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Dt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};je.dividedBy=je.div=function(t){return ko(this,new this.constructor(t))};je.dividedToIntegerBy=je.idiv=function(t){var e=this,n=e.constructor;return jt(ko(e,new n(t),0,1),n.precision)};je.equals=je.eq=function(t){return!this.cmp(t)};je.exponent=function(){return mn(this)};je.greaterThan=je.gt=function(t){return this.cmp(t)>0};je.greaterThanOrEqualTo=je.gte=function(t){return this.cmp(t)>=0};je.isInteger=je.isint=function(){return this.e>this.d.length-2};je.isNegative=je.isneg=function(){return this.s<0};je.isPositive=je.ispos=function(){return this.s>0};je.isZero=function(){return this.s===0};je.lessThan=je.lt=function(t){return this.cmp(t)<0};je.lessThanOrEqualTo=je.lte=function(t){return this.cmp(t)<1};je.logarithm=je.log=function(t){var e,n=this,i=n.constructor,r=i.precision,s=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Yi))throw Error(Cr+"NaN");if(n.s<1)throw Error(Cr+(n.s?"NaN":"-Infinity"));return n.eq(Yi)?new i(0):(Ft=!1,e=ko(zh(n,s),zh(t,s),s),Ft=!0,jt(e,r))};je.minus=je.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cz(e,t):az(e,(t.s=-t.s,t))};je.modulo=je.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(Cr+"NaN");return n.s?(Ft=!1,e=ko(n,t,0,1).times(t),Ft=!0,n.minus(e)):jt(new i(n),r)};je.naturalExponential=je.exp=function(){return lz(this)};je.naturalLogarithm=je.ln=function(){return zh(this)};je.negated=je.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};je.plus=je.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?az(e,t):cz(e,(t.s=-t.s,t))};je.precision=je.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(nc+t);if(e=mn(r)+1,i=r.d.length-1,n=i*Dt+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};je.squareRoot=je.sqrt=function(){var t,e,n,i,r,s,a,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Cr+"NaN")}for(t=mn(u),Ft=!1,r=Math.sqrt(+u),r==0||r==1/0?(e=Us(u.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=bd((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new f(e)):i=new f(r.toString()),n=f.precision,r=a=n+3;;)if(s=i,i=s.plus(ko(u,s,a+2)).times(.5),Us(s.d).slice(0,a)===(e=Us(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),r==a&&e=="4999"){if(jt(s,n+1,0),s.times(s).eq(u)){i=s;break}}else if(e!="9999")break;a+=4}return Ft=!0,jt(i,n)};je.times=je.mul=function(t){var e,n,i,r,s,a,u,f,d,p=this,m=p.constructor,y=p.d,b=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,n=p.e+t.e,f=y.length,d=b.length,f<d&&(s=y,y=b,b=s,a=f,f=d,d=a),s=[],a=f+d,i=a;i--;)s.push(0);for(i=d;--i>=0;){for(e=0,r=f+i;r>i;)u=s[r]+b[i]*y[r-i-1]+e,s[r--]=u%Pn|0,e=u/Pn|0;s[r]=(s[r]+e)%Pn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Ft?jt(t,m.precision):t};je.toDecimalPlaces=je.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(eo(t,0,xd),e===void 0?e=i.rounding:eo(e,0,8),jt(n,t+mn(n)+1,e))};je.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=yc(i,!0):(eo(t,0,xd),e===void 0?e=r.rounding:eo(e,0,8),i=jt(new r(i),t+1,e),n=yc(i,!0,t+1)),n};je.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?yc(r):(eo(t,0,xd),e===void 0?e=s.rounding:eo(e,0,8),i=jt(new s(r),t+mn(r)+1,e),n=yc(i.abs(),!1,t+mn(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};je.toInteger=je.toint=function(){var t=this,e=t.constructor;return jt(new e(t),mn(t)+1,e.rounding)};je.toNumber=function(){return+this};je.toPower=je.pow=function(t){var e,n,i,r,s,a,u=this,f=u.constructor,d=12,p=+(t=new f(t));if(!t.s)return new f(Yi);if(u=new f(u),!u.s){if(t.s<1)throw Error(Cr+"Infinity");return u}if(u.eq(Yi))return u;if(i=f.precision,t.eq(Yi))return jt(u,i);if(e=t.e,n=t.d.length-1,a=e>=n,s=u.s,a){if((n=p<0?-p:p)<=oz){for(r=new f(Yi),e=Math.ceil(i/Dt+4),Ft=!1;n%2&&(r=r.times(u),FP(r.d,e)),n=bd(n/2),n!==0;)u=u.times(u),FP(u.d,e);return Ft=!0,t.s<0?new f(Yi).div(r):jt(r,i)}}else if(s<0)throw Error(Cr+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Ft=!1,r=t.times(zh(u,i+d)),Ft=!0,r=lz(r),r.s=s,r};je.toPrecision=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?(n=mn(r),i=yc(r,n<=s.toExpNeg||n>=s.toExpPos)):(eo(t,1,xd),e===void 0?e=s.rounding:eo(e,0,8),r=jt(new s(r),t,e),n=mn(r),i=yc(r,t<=n||n<=s.toExpNeg,t)),i};je.toSignificantDigits=je.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(eo(t,1,xd),e===void 0?e=i.rounding:eo(e,0,8)),jt(new i(n),t,e)};je.toString=je.valueOf=je.val=je.toJSON=je[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mn(t),n=t.constructor;return yc(t,e<=n.toExpNeg||e>=n.toExpPos)};function az(t,e){var n,i,r,s,a,u,f,d,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Ft?jt(e,m):e;if(f=t.d,d=e.d,a=t.e,r=e.e,f=f.slice(),s=a-r,s){for(s<0?(i=f,s=-s,u=d.length):(i=d,r=a,u=f.length),a=Math.ceil(m/Dt),u=a>u?a+1:u+1,s>u&&(s=u,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(u=f.length,s=d.length,u-s<0&&(s=u,i=d,d=f,f=i),n=0;s;)n=(f[--s]=f[s]+d[s]+n)/Pn|0,f[s]%=Pn;for(n&&(f.unshift(n),++r),u=f.length;f[--u]==0;)f.pop();return e.d=f,e.e=r,Ft?jt(e,m):e}function eo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(nc+t)}function Us(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)i=t[e]+"",n=Dt-i.length,n&&(s+=Pa(n)),s+=i;a=t[e],i=a+"",n=Dt-i.length,n&&(s+=Pa(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var ko=(function(){function t(i,r){var s,a=0,u=i.length;for(i=i.slice();u--;)s=i[u]*r+a,i[u]=s%Pn|0,a=s/Pn|0;return a&&i.unshift(a),i}function e(i,r,s,a){var u,f;if(s!=a)f=s>a?1:-1;else for(u=f=0;u<s;u++)if(i[u]!=r[u]){f=i[u]>r[u]?1:-1;break}return f}function n(i,r,s){for(var a=0;s--;)i[s]-=a,a=i[s]<r[s]?1:0,i[s]=a*Pn+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,a){var u,f,d,p,m,y,b,S,N,E,R,U,j,B,O,P,I,A,M=i.constructor,H=i.s==r.s?1:-1,F=i.d,D=r.d;if(!i.s)return new M(i);if(!r.s)throw Error(Cr+"Division by zero");for(f=i.e-r.e,I=D.length,O=F.length,b=new M(H),S=b.d=[],d=0;D[d]==(F[d]||0);)++d;if(D[d]>(F[d]||0)&&--f,s==null?U=s=M.precision:a?U=s+(mn(i)-mn(r))+1:U=s,U<0)return new M(0);if(U=U/Dt+2|0,d=0,I==1)for(p=0,D=D[0],U++;(d<O||p)&&U--;d++)j=p*Pn+(F[d]||0),S[d]=j/D|0,p=j%D|0;else{for(p=Pn/(D[0]+1)|0,p>1&&(D=t(D,p),F=t(F,p),I=D.length,O=F.length),B=I,N=F.slice(0,I),E=N.length;E<I;)N[E++]=0;A=D.slice(),A.unshift(0),P=D[0],D[1]>=Pn/2&&++P;do p=0,u=e(D,N,I,E),u<0?(R=N[0],I!=E&&(R=R*Pn+(N[1]||0)),p=R/P|0,p>1?(p>=Pn&&(p=Pn-1),m=t(D,p),y=m.length,E=N.length,u=e(m,N,y,E),u==1&&(p--,n(m,I<y?A:D,y))):(p==0&&(u=p=1),m=D.slice()),y=m.length,y<E&&m.unshift(0),n(N,m,E),u==-1&&(E=N.length,u=e(D,N,I,E),u<1&&(p++,n(N,I<E?A:D,E))),E=N.length):u===0&&(p++,N=[0]),S[d++]=p,u&&N[0]?N[E++]=F[B]||0:(N=[F[B]],E=1);while((B++<O||N[0]!==void 0)&&U--)}return S[0]||S.shift(),b.e=f,jt(b,a?s+mn(b)+1:s)}})();function lz(t,e){var n,i,r,s,a,u,f=0,d=0,p=t.constructor,m=p.precision;if(mn(t)>16)throw Error(mE+mn(t));if(!t.s)return new p(Yi);for(Ft=!1,u=m,a=new p(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(i=Math.log(ql(2,d))/Math.LN10*2+5|0,u+=i,n=r=s=new p(Yi),p.precision=u;;){if(r=jt(r.times(t),u),n=n.times(++f),a=s.plus(ko(r,n,u)),Us(a.d).slice(0,u)===Us(s.d).slice(0,u)){for(;d--;)s=jt(s.times(s),u);return p.precision=m,e==null?(Ft=!0,jt(s,m)):s}s=a}}function mn(t){for(var e=t.e*Dt,n=t.d[0];n>=10;n/=10)e++;return e}function v_(t,e,n){if(e>t.LN10.sd())throw Ft=!0,n&&(t.precision=n),Error(Cr+"LN10 precision limit exceeded");return jt(new t(t.LN10),e)}function Pa(t){for(var e="";t--;)e+="0";return e}function zh(t,e){var n,i,r,s,a,u,f,d,p,m=1,y=10,b=t,S=b.d,N=b.constructor,E=N.precision;if(b.s<1)throw Error(Cr+(b.s?"NaN":"-Infinity"));if(b.eq(Yi))return new N(0);if(e==null?(Ft=!1,d=E):d=e,b.eq(10))return e==null&&(Ft=!0),v_(N,d);if(d+=y,N.precision=d,n=Us(S),i=n.charAt(0),s=mn(b),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)b=b.times(t),n=Us(b.d),i=n.charAt(0),m++;s=mn(b),i>1?(b=new N("0."+n),s++):b=new N(i+"."+n.slice(1))}else return f=v_(N,d+2,E).times(s+""),b=zh(new N(i+"."+n.slice(1)),d-y).plus(f),N.precision=E,e==null?(Ft=!0,jt(b,E)):b;for(u=a=b=ko(b.minus(Yi),b.plus(Yi),d),p=jt(b.times(b),d),r=3;;){if(a=jt(a.times(p),d),f=u.plus(ko(a,new N(r),d)),Us(f.d).slice(0,d)===Us(u.d).slice(0,d))return u=u.times(2),s!==0&&(u=u.plus(v_(N,d+2,E).times(s+""))),u=ko(u,new N(m),d),N.precision=E,e==null?(Ft=!0,jt(u,E)):u;u=f,r+=2}}function VP(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=bd(n/Dt),t.d=[],i=(n+1)%Dt,n<0&&(i+=Dt),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=Dt;i<r;)t.d.push(+e.slice(i,i+=Dt));e=e.slice(i),i=Dt-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Ft&&(t.e>ey||t.e<-ey))throw Error(mE+n)}else t.s=0,t.e=0,t.d=[0];return t}function jt(t,e,n){var i,r,s,a,u,f,d,p,m=t.d;for(a=1,s=m[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=Dt,r=e,d=m[p=0];else{if(p=Math.ceil((i+1)/Dt),s=m.length,p>=s)return t;for(d=s=m[p],a=1;s>=10;s/=10)a++;i%=Dt,r=i-Dt+a}if(n!==void 0&&(s=ql(10,a-r-1),u=d/s%10|0,f=e<0||m[p+1]!==void 0||d%s,f=n<4?(u||f)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(i>0?r>0?d/ql(10,a-r):0:m[p-1])%10&1||n==(t.s<0?8:7))),e<1||!m[0])return f?(s=mn(t),m.length=1,e=e-s-1,m[0]=ql(10,(Dt-e%Dt)%Dt),t.e=bd(-e/Dt)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(i==0?(m.length=p,s=1,p--):(m.length=p+1,s=ql(10,Dt-i),m[p]=r>0?(d/ql(10,a-r)%ql(10,r)|0)*s:0),f)for(;;)if(p==0){(m[0]+=s)==Pn&&(m[0]=1,++t.e);break}else{if(m[p]+=s,m[p]!=Pn)break;m[p--]=0,s=1}for(i=m.length;m[--i]===0;)m.pop();if(Ft&&(t.e>ey||t.e<-ey))throw Error(mE+mn(t));return t}function cz(t,e){var n,i,r,s,a,u,f,d,p,m,y=t.constructor,b=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Ft?jt(e,b):e;if(f=t.d,m=e.d,i=e.e,d=t.e,f=f.slice(),a=d-i,a){for(p=a<0,p?(n=f,a=-a,u=m.length):(n=m,i=d,u=f.length),r=Math.max(Math.ceil(b/Dt),u)+2,a>r&&(a=r,n.length=1),n.reverse(),r=a;r--;)n.push(0);n.reverse()}else{for(r=f.length,u=m.length,p=r<u,p&&(u=r),r=0;r<u;r++)if(f[r]!=m[r]){p=f[r]<m[r];break}a=0}for(p&&(n=f,f=m,m=n,e.s=-e.s),u=f.length,r=m.length-u;r>0;--r)f[u++]=0;for(r=m.length;r>a;){if(f[--r]<m[r]){for(s=r;s&&f[--s]===0;)f[s]=Pn-1;--f[s],f[r]+=Pn}f[r]-=m[r]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--i;return f[0]?(e.d=f,e.e=i,Ft?jt(e,b):e):new y(0)}function yc(t,e,n){var i,r=mn(t),s=Us(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Pa(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+Pa(-r-1)+s,n&&(i=n-a)>0&&(s+=Pa(i))):r>=a?(s+=Pa(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+Pa(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=Pa(i))),t.s<0?"-"+s:s}function FP(t,e){if(t.length>e)return t.length=e,!0}function uz(t){var e,n,i;function r(s){var a=this;if(!(a instanceof r))return new r(s);if(a.constructor=r,s instanceof r){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(nc+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return VP(a,s.toString())}else if(typeof s!="string")throw Error(nc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,roe.test(s))VP(a,s);else throw Error(nc+s)}if(r.prototype=je,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=uz,r.config=r.set=soe,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function soe(t){if(!t||typeof t!="object")throw Error(Cr+"Object expected");var e,n,i,r=["precision",1,xd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(bd(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(nc+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(nc+n+": "+i);return this}var gE=uz(ioe);Yi=new gE(1);const Nt=gE;function dz(t){var e;return t===0?e=1:e=Math.floor(new Nt(t).abs().log(10).toNumber())+1,e}function fz(t,e,n){for(var i=new Nt(t),r=0,s=[];i.lt(e)&&r<1e5;)s.push(i.toNumber()),i=i.add(n),r++;return s}var hz=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},pz=(t,e,n)=>{if(t.lte(0))return new Nt(0);var i=dz(t.toNumber()),r=new Nt(10).pow(i),s=t.div(r),a=i!==1?.05:.1,u=new Nt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),f=u.mul(r);return e?new Nt(f.toNumber()):new Nt(Math.ceil(f.toNumber()))},ooe=(t,e,n)=>{var i=new Nt(1),r=new Nt(t);if(!r.isint()&&n){var s=Math.abs(t);s<1?(i=new Nt(10).pow(dz(t)-1),r=new Nt(Math.floor(r.div(i).toNumber())).mul(i)):s>1&&(r=new Nt(Math.floor(t)))}else t===0?r=new Nt(Math.floor((e-1)/2)):n||(r=new Nt(Math.floor(t)));for(var a=Math.floor((e-1)/2),u=[],f=0;f<e;f++)u.push(r.add(new Nt(f-a).mul(i)).toNumber());return u},mz=function(e,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new Nt(0),tickMin:new Nt(0),tickMax:new Nt(0)};var a=pz(new Nt(n).sub(e).div(i-1),r,s),u;e<=0&&n>=0?u=new Nt(0):(u=new Nt(e).add(n).div(2),u=u.sub(new Nt(u).mod(a)));var f=Math.ceil(u.sub(e).div(a).toNumber()),d=Math.ceil(new Nt(n).sub(u).div(a).toNumber()),p=f+d+1;return p>i?mz(e,n,i,r,s+1):(p<i&&(d=n>0?d+(i-p):d,f=n>0?f:f+(i-p)),{step:a,tickMin:u.sub(new Nt(f).mul(a)),tickMax:u.add(new Nt(d).mul(a))})},aoe=function(e){var[n,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[u,f]=hz([n,i]);if(u===-1/0||f===1/0){var d=f===1/0?[u,...Array(r-1).fill(1/0)]:[...Array(r-1).fill(-1/0),f];return n>i?d.reverse():d}if(u===f)return ooe(u,r,s);var{step:p,tickMin:m,tickMax:y}=mz(u,f,a,s,0),b=fz(m,y.add(new Nt(.1).mul(p)),p);return n>i?b.reverse():b},loe=function(e,n){var[i,r]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,u]=hz([i,r]);if(a===-1/0||u===1/0)return[i,r];if(a===u)return[a];var f=Math.max(n,2),d=pz(new Nt(u).sub(a).div(f-1),s,0),p=[...fz(new Nt(a),new Nt(u),d),u];return s===!1&&(p=p.map(m=>Math.round(m))),i>r?p.reverse():p},coe=t=>t.rootProps.barCategoryGap,yv=t=>t.rootProps.stackOffset,gz=t=>t.rootProps.reverseStackOrder,yE=t=>t.options.chartName,vE=t=>t.rootProps.syncId,yz=t=>t.rootProps.syncMethod,xE=t=>t.options.eventEmitter,uoe=t=>t.rootProps.baseValue,Di={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Vl={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},js={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},vv=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function xv(t,e,n){if(n!=="auto")return n;if(t!=null)return to(t,e)?"category":"number"}function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ty(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(i){doe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function doe(t,e,n){return(e=foe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function foe(t){var e=hoe(t,"string");return typeof e=="symbol"?e:e+""}function hoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BP={allowDataOverflow:Vl.allowDataOverflow,allowDecimals:Vl.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vl.angleAxisId,includeHidden:!1,name:void 0,reversed:Vl.reversed,scale:Vl.scale,tick:Vl.tick,tickCount:void 0,ticks:void 0,type:Vl.type,unit:void 0},$P={allowDataOverflow:js.allowDataOverflow,allowDecimals:js.allowDecimals,allowDuplicatedCategory:js.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:js.radiusAxisId,includeHidden:js.includeHidden,name:void 0,reversed:js.reversed,scale:js.scale,tick:js.tick,tickCount:js.tickCount,ticks:void 0,type:js.type,unit:void 0},poe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},bE=fe([poe,a6],(t,e)=>{var n;if(t!=null)return t;var i=(n=xv(e,"angleAxis",BP.type))!==null&&n!==void 0?n:"category";return ty(ty({},BP),{},{type:i})}),moe=(t,e)=>t.polarAxis.radiusAxis[e],_E=fe([moe,a6],(t,e)=>{var n;if(t!=null)return t;var i=(n=xv(e,"radiusAxis",$P.type))!==null&&n!==void 0?n:"category";return ty(ty({},$P),{},{type:i})}),bv=t=>t.polarOptions,wE=fe([$o,qo,ri],die),vz=fe([bv,wE],(t,e)=>{if(t!=null)return rl(t.innerRadius,e,0)}),xz=fe([bv,wE],(t,e)=>{if(t!=null)return rl(t.outerRadius,e,e*.8)}),goe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},bz=fe([bv],goe);fe([bE,bz],vv);var _z=fe([wE,vz,xz],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});fe([_E,_z],vv);var wz=fe([Ht,bv,vz,xz,$o,qo],(t,e,n,i,r,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:a,cy:u,startAngle:f,endAngle:d}=e;return{cx:rl(a,r,r/2),cy:rl(u,s,s/2),innerRadius:n,outerRadius:i,startAngle:f,endAngle:d,clockWise:!1}}}),Un=(t,e)=>e,_v=(t,e,n)=>n;function SE(t){return t==null?void 0:t.id}function Sz(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:s}=n,a=new Map;return t.forEach(u=>{var f,d=(f=u.data)!==null&&f!==void 0?f:i;if(!(d==null||d.length===0)){var p=SE(u);d.forEach((m,y)=>{var b=s==null||r?y:String(ti(m,s,null)),S=ti(m,u.dataKey,0),N;a.has(b)?N=a.get(b):N={},Object.assign(N,{[p]:S}),a.set(b,N)})}}),Array.from(a.values())}function TE(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var wv=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Sv(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function yoe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Vn=t=>{var e=Ht(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},_d=t=>t.tooltip.settings.axisId;function voe(t){if(t in eh)return eh[t]();var e="scale".concat(IT(t));if(e in eh)return eh[e]()}function qP(t){var e=t.ticks,n=t.bandwidth,i=t.range(),r=[Math.min(...i),Math.max(...i)];return{domain:()=>t.domain(),range:(function(s){function a(){return s.apply(this,arguments)}return a.toString=function(){return s.toString()},a})(()=>r),rangeMin:()=>r[0],rangeMax:()=>r[1],isInRange(s){var a=r[0],u=r[1];return a<=u?s>=a&&s<=u:s>=u&&s<=a},bandwidth:n?()=>n.call(t):void 0,ticks:e?s=>e.call(t,s):void 0,map:(s,a)=>{var u=t(s);if(u!=null){if(t.bandwidth&&a!==null&&a!==void 0&&a.position){var f=t.bandwidth();switch(a.position){case"middle":u+=f/2;break;case"end":u+=f;break}}return u}}}}function GP(t,e,n){if(typeof t=="function")return qP(t.copy().domain(e).range(n));if(t!=null){var i=voe(t);if(i!=null)return i.domain(e).range(n),qP(i)}}var xoe=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!zo(e)){for(var n,i,r=0;r<e.length;r++){var s=e[r];pt(s)&&((n===void 0||s<n)&&(n=s),(i===void 0||s>i)&&(i=s))}return n!==void 0&&i!==void 0?[n,i]:void 0}return e}default:return e}};function KP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ny(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(n),!0).forEach(function(i){boe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function boe(t,e,n){return(e=_oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _oe(t){var e=woe(t,"string");return typeof e=="symbol"?e:e+""}function woe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kw=[0,"auto"],In={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Tz=(t,e)=>t.cartesianAxis.xAxis[e],Yo=(t,e)=>{var n=Tz(t,e);return n??In},Rn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Kw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ip},Ez=(t,e)=>t.cartesianAxis.yAxis[e],Wo=(t,e)=>{var n=Ez(t,e);return n??Rn},Soe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},EE=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Soe},Ti=(t,e,n)=>{switch(e){case"xAxis":return Yo(t,n);case"yAxis":return Wo(t,n);case"zAxis":return EE(t,n);case"angleAxis":return bE(t,n);case"radiusAxis":return _E(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Toe=(t,e,n)=>{switch(e){case"xAxis":return Yo(t,n);case"yAxis":return Wo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},dp=(t,e,n)=>{switch(e){case"xAxis":return Yo(t,n);case"yAxis":return Wo(t,n);case"angleAxis":return bE(t,n);case"radiusAxis":return _E(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Nz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Cz(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Az=t=>t.graphicalItems.cartesianItems,Eoe=fe([Un,_v],Cz),kz=(t,e,n)=>t.filter(n).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),fp=fe([Az,Ti,Eoe],kz,{memoizeOptions:{resultEqualityCheck:Sv}}),Iz=fe([fp],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(TE)),Rz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Noe=fe([fp],Rz),jz=t=>t.map(e=>e.data).filter(Boolean).flat(1),Coe=fe([fp],jz,{memoizeOptions:{resultEqualityCheck:Sv}}),Pz=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},NE=fe([Coe,rz],Pz),Mz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:ti(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:ti(r,i)}))):t.map(i=>({value:i})),Tv=fe([NE,Ti,fp],Mz);function Dz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Bg(t){if(Zs(t)||t instanceof Date){var e=Number(t);if(pt(e))return e}}function YP(t){if(Array.isArray(t)){var e=[Bg(t[0]),Bg(t[1])];return zo(e)?e:void 0}var n=Bg(t);if(n!=null)return[n,n]}function Uo(t){return t.map(Bg).filter(Ls)}function Aoe(t,e,n){return!n||typeof e!="number"||Qs(e)?[]:n.length?Uo(n.flatMap(i=>{var r=ti(t,i.dataKey),s,a;if(Array.isArray(r)?[s,a]=r:s=a=r,!(!pt(s)||!pt(a)))return[e-s,e+a]})):[]}var En=t=>{var e=Vn(t),n=_d(t);return dp(t,e,n)},hp=fe([En],t=>t==null?void 0:t.dataKey),koe=fe([Iz,rz,En],Sz),Oz=(t,e,n,i)=>{var r={},s=e.reduce((a,u)=>{if(u.stackId==null)return a;var f=a[u.stackId];return f==null&&(f=[]),f.push(u),a[u.stackId]=f,a},r);return Object.fromEntries(Object.entries(s).map(a=>{var[u,f]=a,d=i?[...f].reverse():f,p=d.map(SE);return[u,{stackedData:Jee(t,p,n),graphicalItems:d}]}))},Lz=fe([koe,Iz,yv,gz],Oz),zz=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(i==null&&n!=="zAxis"){var a=tte(t,r,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},Ioe=fe([Ti],t=>t.allowDataOverflow),CE=t=>{var e;if(t==null||!("domain"in t))return Kw;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Uo(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:Kw},Uz=fe([Ti],CE),Vz=fe([Uz,Ioe],sz),Roe=fe([Lz,Ko,Un,Vz],zz,{memoizeOptions:{resultEqualityCheck:wv}}),AE=t=>t.errorBars,joe=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>Dz(n,i)),iy=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var s=r.flat(),a=Math.min(...s),u=Math.max(...s);return[a,u]}},Fz=(t,e,n,i,r)=>{var s,a;if(n.length>0&&t.forEach(u=>{n.forEach(f=>{var d,p,m=(d=i[f.id])===null||d===void 0?void 0:d.filter(R=>Dz(r,R)),y=ti(u,(p=e.dataKey)!==null&&p!==void 0?p:f.dataKey),b=Aoe(u,y,m);if(b.length>=2){var S=Math.min(...b),N=Math.max(...b);(s==null||S<s)&&(s=S),(a==null||N>a)&&(a=N)}var E=YP(y);E!=null&&(s=s==null?E[0]:Math.min(s,E[0]),a=a==null?E[1]:Math.max(a,E[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(u=>{var f=YP(ti(u,e.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),a=a==null?f[1]:Math.max(a,f[1]))}),pt(s)&&pt(a))return[s,a]},Poe=fe([NE,Ti,Noe,AE,Un],Fz,{memoizeOptions:{resultEqualityCheck:wv}});function Moe(t){var{value:e}=t;if(Zs(e)||e instanceof Date)return e}var Doe=(t,e,n)=>{var i=t.map(Moe).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&uL(i))?S6(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},Hz=t=>t.referenceElements.dots,wd=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),Ooe=fe([Hz,Un,_v],wd),Bz=t=>t.referenceElements.areas,Loe=fe([Bz,Un,_v],wd),$z=t=>t.referenceElements.lines,zoe=fe([$z,Un,_v],wd),qz=(t,e)=>{if(t!=null){var n=Uo(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Uoe=fe(Ooe,Un,qz),Gz=(t,e)=>{if(t!=null){var n=Uo(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Voe=fe([Loe,Un],Gz);function Foe(t){var e;if(t.x!=null)return Uo([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:Uo(n)}function Hoe(t){var e;if(t.y!=null)return Uo([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:Uo(n)}var Kz=(t,e)=>{if(t!=null){var n=t.flatMap(i=>e==="xAxis"?Foe(i):Hoe(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Boe=fe([zoe,Un],Kz),$oe=fe(Uoe,Boe,Voe,(t,e,n)=>iy(t,n,e)),Yz=(t,e,n,i,r,s,a,u)=>{if(n!=null)return n;var f=a==="vertical"&&u==="xAxis"||a==="horizontal"&&u==="yAxis",d=f?iy(i,s,r):iy(s,r);return noe(e,d,t.allowDataOverflow)},qoe=fe([Ti,Uz,Vz,Roe,Poe,$oe,Ht,Un],Yz,{memoizeOptions:{resultEqualityCheck:wv}}),Goe=[0,1],Wz=(t,e,n,i,r,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:u,type:f}=t,d=to(e,s);if(d&&u==null){var p;return S6(0,(p=n==null?void 0:n.length)!==null&&p!==void 0?p:0)}return f==="category"?Doe(i,t,d):r==="expand"?Goe:a}},kE=fe([Ti,Ht,NE,Tv,yv,Un,qoe],Wz);function Koe(t){return t in eh}var Xz=(t,e,n)=>{if(t!=null){var{scale:i,type:r}=t;if(i==="auto")return r==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":r==="category"?"band":"linear";if(typeof i=="string"){var s="scale".concat(IT(i));return Koe(s)?s:"point"}}},Sd=fe([Ti,Nz,yE],Xz);function IE(t,e,n,i){if(!(n==null||i==null))return typeof t.scale=="function"?GP(t.scale,n,i):GP(e,n,i)}var Jz=(t,e,n)=>{var i=CE(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&zo(t))return aoe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&zo(t))return loe(t,e.tickCount,e.allowDecimals)}},RE=fe([kE,dp,Sd],Jz),Qz=(t,e,n,i)=>{if(i!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&zo(e)&&Array.isArray(n)&&n.length>0){var r,s,a=e[0],u=(r=n[0])!==null&&r!==void 0?r:0,f=e[1],d=(s=n[n.length-1])!==null&&s!==void 0?s:0;return[Math.min(a,u),Math.max(f,d)]}return e},Yoe=fe([Ti,kE,RE,Un],Qz),Woe=fe(Tv,Ti,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(Uo(t.map(m=>m.value))).sort((m,y)=>m-y),r=i[0],s=i[i.length-1];if(r==null||s==null)return 1/0;var a=s-r;if(a===0)return 1/0;for(var u=0;u<i.length-1;u++){var f=i[u],d=i[u+1];if(!(f==null||d==null)){var p=d-f;n=Math.min(n,p)}}return n/a}}),Zz=fe(Woe,Ht,coe,ri,(t,e,n,i,r)=>r,(t,e,n,i,r)=>{if(!pt(t))return 0;var s=e==="vertical"?i.height:i.width;if(r==="gap")return t*s/2;if(r==="no-gap"){var a=rl(n,t*s),u=t*s/2;return u-a-(u-a)/s*a}return 0}),Xoe=(t,e,n)=>{var i=Yo(t,e);return i==null||typeof i.padding!="string"?0:Zz(t,"xAxis",e,n,i.padding)},Joe=(t,e,n)=>{var i=Wo(t,e);return i==null||typeof i.padding!="string"?0:Zz(t,"yAxis",e,n,i.padding)},Qoe=fe(Yo,Xoe,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),Zoe=fe(Wo,Joe,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),eae=fe([ri,Qoe,ov,sv,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:s}=i;return r?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),tae=fe([ri,Ht,Zoe,ov,sv,(t,e,n)=>n],(t,e,n,i,r,s)=>{var{padding:a}=r;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),pp=(t,e,n,i)=>{var r;switch(e){case"xAxis":return eae(t,n,i);case"yAxis":return tae(t,n,i);case"zAxis":return(r=EE(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return bz(t);case"radiusAxis":return _z(t,n);default:return}},eU=fe([Ti,pp],vv),nae=fe([Sd,Yoe],xoe),Ev=fe([Ti,Sd,nae,eU],IE);fe([fp,AE,Un],joe);function tU(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Nv=(t,e)=>e,Cv=(t,e,n)=>n,iae=fe(iv,Nv,Cv,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(tU)),rae=fe(rv,Nv,Cv,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(tU)),nU=(t,e)=>({width:t.width,height:e.height}),sae=(t,e)=>{var n=typeof e.width=="number"?e.width:ip;return{width:n,height:t.height}},oae=fe(ri,Yo,nU),aae=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},lae=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},cae=fe(qo,ri,iae,Nv,Cv,(t,e,n,i,r)=>{var s={},a;return n.forEach(u=>{var f=nU(e,u);a==null&&(a=aae(e,i,t));var d=i==="top"&&!r||i==="bottom"&&r;s[u.id]=a-Number(d)*f.height,a+=(d?-1:1)*f.height}),s}),uae=fe($o,ri,rae,Nv,Cv,(t,e,n,i,r)=>{var s={},a;return n.forEach(u=>{var f=sae(e,u);a==null&&(a=lae(e,i,t));var d=i==="left"&&!r||i==="right"&&r;s[u.id]=a-Number(d)*f.width,a+=(d?-1:1)*f.width}),s}),dae=(t,e)=>{var n=Yo(t,e);if(n!=null)return cae(t,n.orientation,n.mirror)},fae=fe([ri,Yo,dae,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n==null?void 0:n[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}}),hae=(t,e)=>{var n=Wo(t,e);if(n!=null)return uae(t,n.orientation,n.mirror)},pae=fe([ri,Wo,hae,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n==null?void 0:n[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}}),mae=fe(ri,Wo,(t,e)=>{var n=typeof e.width=="number"?e.width:ip;return{width:n,height:t.height}}),iU=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:s,dataKey:a}=n,u=to(t,i),f=e.map(d=>d.value);if(a&&u&&s==="category"&&r&&uL(f))return f}},jE=fe([Ht,Tv,Ti,Un],iU),rU=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:s}=n,a=to(t,i);if(a&&(r==="number"||s!=="auto"))return e.map(u=>u.value)}},PE=fe([Ht,Tv,dp,Un],rU);fe([Ht,Toe,Sd,Ev,jE,PE,pp,RE,Un],(t,e,n,i,r,s,a,u,f)=>{if(e!=null){var d=to(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:s,duplicateDomain:r,isCategorical:d,niceTicks:u,range:a,realScaleType:n,scale:i}}});var gae=(t,e,n,i,r,s,a,u,f)=>{if(!(e==null||i==null)){var d=to(t,f),{type:p,ticks:m,tickCount:y}=e,b=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,S=p==="category"&&i.bandwidth?i.bandwidth()/b:0;S=f==="angleAxis"&&s!=null&&s.length>=2?es(s[0]-s[1])*2*S:S;var N=m||r;return N?N.map((E,R)=>{var U=a?a.indexOf(E):E,j=i.map(U);return pt(j)?{index:R,coordinate:j+S,value:E,offset:S}:null}).filter(Ls):d&&u?u.map((E,R)=>{var U=i.map(E);return pt(U)?{coordinate:U+S,value:E,index:R,offset:S}:null}).filter(Ls):i.ticks?i.ticks(y).map((E,R)=>{var U=i.map(E);return pt(U)?{coordinate:U+S,value:E,index:R,offset:S}:null}).filter(Ls):i.domain().map((E,R)=>{var U=i.map(E);return pt(U)?{coordinate:U+S,value:a?a[E]:E,index:R,offset:S}:null}).filter(Ls)}},sU=fe([Ht,dp,Sd,Ev,RE,pp,jE,PE,Un],gae),yae=(t,e,n,i,r,s,a)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var u=to(t,a),{tickCount:f}=e,d=0;return d=a==="angleAxis"&&(i==null?void 0:i.length)>=2?es(i[0]-i[1])*2*d:d,u&&s?s.map((p,m)=>{var y=n.map(p);return pt(y)?{coordinate:y+d,value:p,index:m,offset:d}:null}).filter(Ls):n.ticks?n.ticks(f).map((p,m)=>{var y=n.map(p);return pt(y)?{coordinate:y+d,value:p,index:m,offset:d}:null}).filter(Ls):n.domain().map((p,m)=>{var y=n.map(p);return pt(y)?{coordinate:y+d,value:r?r[p]:p,index:m,offset:d}:null}).filter(Ls)}},oU=fe([Ht,dp,Ev,pp,jE,PE,Un],yae),aU=fe(Ti,Ev,(t,e)=>{if(!(t==null||e==null))return ny(ny({},t),{},{scale:e})}),vae=fe([Ti,Sd,kE,eU],IE);fe((t,e,n)=>EE(t,n),vae,(t,e)=>{if(!(t==null||e==null))return ny(ny({},t),{},{scale:e})});var xae=fe([Ht,iv,rv],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),lU=t=>t.options.defaultTooltipEventType,cU=t=>t.options.validateTooltipEventTypes;function uU(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function ME(t,e){var n=lU(t),i=cU(t);return uU(e,n,i)}function bae(t){return He(e=>ME(e,t))}var dU=(t,e)=>{var n,i=Number(e);if(!(Qs(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},_ae=t=>t.tooltip.settings,za={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},wae={itemInteraction:{click:za,hover:za},axisInteraction:{click:za,hover:za},keyboardInteraction:za,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},fU=zi({name:"tooltip",initialState:wae,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Vt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:i}=e.payload,r=rs(t).tooltipItemPayloads.indexOf(n);r>-1&&(t.tooltipItemPayloads[r]=i)},prepare:Vt()},removeTooltipEntrySettings:{reducer(t,e){var n=rs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Vt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Sae,replaceTooltipEntrySettings:Tae,removeTooltipEntrySettings:Eae,setTooltipSettingsState:Nae,setActiveMouseOverItemIndex:Cae,mouseLeaveItem:t_e,mouseLeaveChart:hU,setActiveClickItemIndex:n_e,setMouseOverAxisIndex:pU,setMouseClickAxisIndex:Aae,setSyncInteraction:Yw,setKeyboardInteraction:Ww}=fU.actions,kae=fU.reducer;function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(n),!0).forEach(function(i){Iae(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Iae(t,e,n){return(e=Rae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rae(t){var e=jae(t,"string");return typeof e=="symbol"?e:e+""}function jae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pae(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Mae(t){return t.index!=null}var mU=(t,e,n,i)=>{if(e==null)return za;var r=Pae(t,e,n);if(r==null)return za;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Mae(r)){if(s)return yg(yg({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return yg(yg({},za),{},{coordinate:r.coordinate})};function Dae(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function Oae(t,e){var n=Dae(t),i=e[0],r=e[1];if(n===void 0)return!1;var s=Math.min(i,r),a=Math.max(i,r);return n>=s&&n<=a}function Lae(t,e,n){if(n==null||e==null)return!0;var i=ti(t,e);return i==null||!zo(n)?!0:Oae(i,n)}var DE=(t,e,n,i)=>{var r=t==null?void 0:t.index;if(r==null)return null;var s=Number(r);if(!pt(s))return r;var a=0,u=1/0;e.length>0&&(u=e.length-1);var f=Math.max(a,Math.min(s,u)),d=e[f];return d==null||Lae(d,n,i)?String(f):null},gU=(t,e,n,i,r,s,a)=>{if(s!=null){var u=a[0],f=u==null?void 0:u.getPosition(s);if(f!=null)return f;var d=r==null?void 0:r[Number(s)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:d.coordinate}}}},yU=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=t.itemInteraction.hover.graphicalItemId:r=t.itemInteraction.click.graphicalItemId,r==null&&i!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(a=>{var u;return((u=a.settings)===null||u===void 0?void 0:u.graphicalItemId)===r})},vU=t=>t.options.tooltipPayloadSearcher,Td=t=>t.tooltip;function XP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function JP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XP(Object(n),!0).forEach(function(i){zae(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zae(t,e,n){return(e=Uae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uae(t){var e=Vae(t,"string");return typeof e=="symbol"?e:e+""}function Vae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fae(t,e){return t??e}var xU=(t,e,n,i,r,s,a)=>{if(!(e==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:d,dataEndIndex:p}=n,m=[];return t.reduce((y,b)=>{var S,{dataDefinedOnItem:N,settings:E}=b,R=Fae(N,u),U=Array.isArray(R)?e6(R,d,p):R,j=(S=E==null?void 0:E.dataKey)!==null&&S!==void 0?S:i,B=E==null?void 0:E.nameKey,O;if(i&&Array.isArray(U)&&!Array.isArray(U[0])&&a==="axis"?O=dL(U,i,r):O=s(U,e,f,B),Array.isArray(O))O.forEach(I=>{var A=JP(JP({},E),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});y.push(QR({tooltipEntrySettings:A,dataKey:I.dataKey,payload:I.payload,value:ti(I.payload,I.dataKey),name:I.name}))});else{var P;y.push(QR({tooltipEntrySettings:E,dataKey:j,payload:O,value:ti(O,j),name:(P=ti(O,B))!==null&&P!==void 0?P:E==null?void 0:E.name}))}return y},m)}},OE=fe([En,Nz,yE],Xz),Hae=fe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Bae=fe([Vn,_d],Cz),Ed=fe([Hae,En,Bae],kz,{memoizeOptions:{resultEqualityCheck:Sv}}),$ae=fe([Ed],t=>t.filter(TE)),qae=fe([Ed],jz,{memoizeOptions:{resultEqualityCheck:Sv}}),Nd=fe([qae,Ko],Pz),Gae=fe([$ae,Ko,En],Sz),LE=fe([Nd,En,Ed],Mz),bU=fe([En],CE),Kae=fe([En],t=>t.allowDataOverflow),_U=fe([bU,Kae],sz),Yae=fe([Ed],t=>t.filter(TE)),Wae=fe([Gae,Yae,yv,gz],Oz),Xae=fe([Wae,Ko,Vn,_U],zz),Jae=fe([Ed],Rz),Qae=fe([Nd,En,Jae,AE,Vn],Fz,{memoizeOptions:{resultEqualityCheck:wv}}),Zae=fe([Hz,Vn,_d],wd),ele=fe([Zae,Vn],qz),tle=fe([Bz,Vn,_d],wd),nle=fe([tle,Vn],Gz),ile=fe([$z,Vn,_d],wd),rle=fe([ile,Vn],Kz),sle=fe([ele,rle,nle],iy),ole=fe([En,bU,_U,Xae,Qae,sle,Ht,Vn],Yz),mp=fe([En,Ht,Nd,LE,yv,Vn,ole],Wz),ale=fe([mp,En,OE],Jz),lle=fe([En,mp,ale,Vn],Qz),wU=t=>{var e=Vn(t),n=_d(t),i=!1;return pp(t,e,n,i)},SU=fe([En,wU],vv),TU=fe([En,OE,lle,SU],IE),cle=fe([Ht,LE,En,Vn],iU),ule=fe([Ht,LE,En,Vn],rU),dle=(t,e,n,i,r,s,a,u)=>{if(e){var{type:f}=e,d=to(t,u);if(i){var p=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,m=f==="category"&&i.bandwidth?i.bandwidth()/p:0;return m=u==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?es(r[0]-r[1])*2*m:m,d&&a?a.map((y,b)=>{var S=i.map(y);return pt(S)?{coordinate:S+m,value:y,index:b,offset:m}:null}).filter(Ls):i.domain().map((y,b)=>{var S=i.map(y);return pt(S)?{coordinate:S+m,value:s?s[y]:y,index:b,offset:m}:null}).filter(Ls)}}},Xo=fe([Ht,En,OE,TU,wU,cle,ule,Vn],dle),zE=fe([lU,cU,_ae],(t,e,n)=>uU(n.shared,t,e)),EU=t=>t.tooltip.settings.trigger,UE=t=>t.tooltip.settings.defaultIndex,gp=fe([Td,zE,EU,UE],mU),Uh=fe([gp,Nd,hp,mp],DE),NU=fe([Xo,Uh],dU),fle=fe([gp],t=>{if(t)return t.dataKey});fe([gp],t=>{if(t)return t.graphicalItemId});var CU=fe([Td,zE,EU,UE],yU),hle=fe([$o,qo,Ht,ri,Xo,UE,CU],gU),ple=fe([gp,hle],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),mle=fe([gp],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),gle=fe([CU,Uh,Ko,hp,NU,vU,zE],xU),yle=fe([gle],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function QP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ZP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QP(Object(n),!0).forEach(function(i){vle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vle(t,e,n){return(e=xle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xle(t){var e=ble(t,"string");return typeof e=="symbol"?e:e+""}function ble(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _le=()=>He(En),wle=()=>{var t=_le(),e=He(Xo),n=He(TU);return D0(!t||!n?void 0:ZP(ZP({},t),{},{scale:n}),e)};function eM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(n),!0).forEach(function(i){Sle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Sle(t,e,n){return(e=Tle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tle(t){var e=Ele(t,"string");return typeof e=="symbol"?e:e+""}function Ele(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nle=(t,e,n,i)=>{var r=e.find(s=>s&&s.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},Cle=(t,e,n,i)=>{var r=e.find(d=>d&&d.index===n);if(r){if(t==="centric"){var s=r.coordinate,{radius:a}=i;return xu(xu(xu({},i),Zn(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var u=r.coordinate,{angle:f}=i;return xu(xu(xu({},i),Zn(i.cx,i.cy,u,f)),{},{angle:f,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Ale(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var AU=(t,e,n,i,r)=>{var s,a=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var u=0;u<a;u++){var f,d,p,m,y,b=u>0?(f=n[u-1])===null||f===void 0?void 0:f.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,S=(p=n[u])===null||p===void 0?void 0:p.coordinate,N=u>=a-1?(m=n[0])===null||m===void 0?void 0:m.coordinate:(y=n[u+1])===null||y===void 0?void 0:y.coordinate,E=void 0;if(!(b==null||S==null||N==null))if(es(S-b)!==es(N-S)){var R=[];if(es(N-S)===es(r[1]-r[0])){E=N;var U=S+r[1]-r[0];R[0]=Math.min(U,(U+b)/2),R[1]=Math.max(U,(U+b)/2)}else{E=b;var j=N+r[1]-r[0];R[0]=Math.min(S,(j+S)/2),R[1]=Math.max(S,(j+S)/2)}var B=[Math.min(S,(E+S)/2),Math.max(S,(E+S)/2)];if(t>B[0]&&t<=B[1]||t>=R[0]&&t<=R[1]){var O;return(O=n[u])===null||O===void 0?void 0:O.index}}else{var P=Math.min(b,N),I=Math.max(b,N);if(t>(P+S)/2&&t<=(I+S)/2){var A;return(A=n[u])===null||A===void 0?void 0:A.index}}}else if(e)for(var M=0;M<a;M++){var H=e[M];if(H!=null){var F=e[M+1],D=e[M-1];if(M===0&&F!=null&&t<=(H.coordinate+F.coordinate)/2||M===a-1&&D!=null&&t>(H.coordinate+D.coordinate)/2||M>0&&M<a-1&&D!=null&&F!=null&&t>(H.coordinate+D.coordinate)/2&&t<=(H.coordinate+F.coordinate)/2)return H.index}}return-1},kU=()=>He(yE),VE=(t,e)=>e,IU=(t,e,n)=>n,FE=(t,e,n,i)=>i,kle=fe(Xo,t=>Ky(t,e=>e.coordinate)),HE=fe([Td,VE,IU,FE],mU),BE=fe([HE,Nd,hp,mp],DE),Ile=(t,e,n)=>{if(e!=null){var i=Td(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},RU=fe([Td,VE,IU,FE],yU),ry=fe([$o,qo,Ht,ri,Xo,FE,RU],gU),Rle=fe([HE,ry],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),jU=fe([Xo,BE],dU),jle=fe([RU,BE,Ko,hp,jU,vU,VE],xU),Ple=fe([HE,BE],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Mle=(t,e,n,i,r,s,a)=>{if(!(!t||!n||!i||!r)&&Ale(t,a)){var u=nte(t,e),f=AU(u,s,r,n,i),d=Nle(e,r,f,t);return{activeIndex:String(f),activeCoordinate:d}}},Dle=(t,e,n,i,r,s,a)=>{if(!(!t||!i||!r||!s||!n)){var u=gie(t,n);if(u){var f=ite(u,e),d=AU(f,a,s,i,r),p=Cle(e,s,d,u);return{activeIndex:String(d),activeCoordinate:p}}}},Ole=(t,e,n,i,r,s,a,u)=>{if(!(!t||!e||!i||!r||!s))return e==="horizontal"||e==="vertical"?Mle(t,e,i,r,s,a,u):Dle(t,e,n,i,r,s,a)},Lle=fe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElement:i.element}}),zle=fe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(Di)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:yoe}});function tM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tM(Object(n),!0).forEach(function(i){Ule(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ule(t,e,n){return(e=Vle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vle(t){var e=Fle(t,"string");return typeof e=="symbol"?e:e+""}function Fle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hle={},Ble={zIndexMap:Object.values(Di).reduce((t,e)=>nM(nM({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Hle)},$le=new Set(Object.values(Di));function qle(t){return $le.has(t)}var PU=zi({name:"zIndex",initialState:Ble,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Vt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!qle(n)&&delete t.zIndexMap[n])},prepare:Vt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElement=i:t.zIndexMap[n].element=i:t.zIndexMap[n]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:Vt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Vt()}}}),{registerZIndexPortal:Gle,unregisterZIndexPortal:Kle,registerZIndexPortalElement:Yle,unregisterZIndexPortalElement:Wle}=PU.actions,Xle=PU.reducer;function ll(t){var{zIndex:e,children:n}=t,i=Ute(),r=i&&e!==void 0&&e!==0,s=rr(),a=Ln();C.useLayoutEffect(()=>r?(a(Gle({zIndex:e})),()=>{a(Kle({zIndex:e}))}):gd,[a,e,r]);var u=He(f=>Lle(f,e,s));return r?u?Y3.createPortal(n,u):null:n}function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xw.apply(null,arguments)}function iM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iM(Object(n),!0).forEach(function(i){Jle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Jle(t,e,n){return(e=Qle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qle(t){var e=Zle(t,"string");return typeof e=="symbol"?e:e+""}function Zle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ece(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return C.isValidElement(e)?C.cloneElement(e,i):C.createElement(n,i)}function tce(t){var e,{coordinate:n,payload:i,index:r,offset:s,tooltipAxisBandSize:a,layout:u,cursor:f,tooltipEventType:d,chartName:p}=t,m=n,y=i,b=r;if(!f||!m||p!=="ScatterChart"&&d!=="axis")return null;var S,N,E;if(p==="ScatterChart")S=m,N=Cne,E=Di.cursorLine;else if(p==="BarChart")S=Ane(u,m,s,a),N=oie,E=Di.cursorRectangle;else if(u==="radial"&&fL(m)){var{cx:R,cy:U,radius:j,startAngle:B,endAngle:O}=_6(m);S={cx:R,cy:U,startAngle:B,endAngle:O,innerRadius:j,outerRadius:j},N=bie,E=Di.cursorLine}else S={points:_ie(u,m,s)},N=Hg,E=Di.cursorLine;var P=typeof f=="object"&&"className"in f?f.className:void 0,I=vg(vg(vg(vg({stroke:"#ccc",pointerEvents:"none"},s),S),By(f)),{},{payload:y,payloadIndex:b,className:Lt("recharts-tooltip-cursor",P)});return C.createElement(ll,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:E},C.createElement(ece,{cursor:f,cursorComp:N,cursorProps:I}))}function nce(t){var e=wle(),n=Ote(),i=yd(),r=kU();return e==null||n==null||i==null||r==null?null:C.createElement(tce,Xw({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var MU=C.createContext(null),ice=()=>C.useContext(MU),x_={exports:{}},rM;function rce(){return rM||(rM=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(f,d,p){this.fn=f,this.context=d,this.once=p||!1}function s(f,d,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new r(p,m||f,y),S=n?n+d:d;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],b]:f._events[S].push(b):(f._events[S]=b,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new i:delete f._events[d]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],p,m;if(this._eventsCount===0)return d;for(m in p=this._events)e.call(p,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},u.prototype.listeners=function(d){var p=n?n+d:d,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,b=m.length,S=new Array(b);y<b;y++)S[y]=m[y].fn;return S},u.prototype.listenerCount=function(d){var p=n?n+d:d,m=this._events[p];return m?m.fn?1:m.length:0},u.prototype.emit=function(d,p,m,y,b,S){var N=n?n+d:d;if(!this._events[N])return!1;var E=this._events[N],R=arguments.length,U,j;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),R){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,m),!0;case 4:return E.fn.call(E.context,p,m,y),!0;case 5:return E.fn.call(E.context,p,m,y,b),!0;case 6:return E.fn.call(E.context,p,m,y,b,S),!0}for(j=1,U=new Array(R-1);j<R;j++)U[j-1]=arguments[j];E.fn.apply(E.context,U)}else{var B=E.length,O;for(j=0;j<B;j++)switch(E[j].once&&this.removeListener(d,E[j].fn,void 0,!0),R){case 1:E[j].fn.call(E[j].context);break;case 2:E[j].fn.call(E[j].context,p);break;case 3:E[j].fn.call(E[j].context,p,m);break;case 4:E[j].fn.call(E[j].context,p,m,y);break;default:if(!U)for(O=1,U=new Array(R-1);O<R;O++)U[O-1]=arguments[O];E[j].fn.apply(E[j].context,U)}}return!0},u.prototype.on=function(d,p,m){return s(this,d,p,m,!1)},u.prototype.once=function(d,p,m){return s(this,d,p,m,!0)},u.prototype.removeListener=function(d,p,m,y){var b=n?n+d:d;if(!this._events[b])return this;if(!p)return a(this,b),this;var S=this._events[b];if(S.fn)S.fn===p&&(!y||S.once)&&(!m||S.context===m)&&a(this,b);else{for(var N=0,E=[],R=S.length;N<R;N++)(S[N].fn!==p||y&&!S[N].once||m&&S[N].context!==m)&&E.push(S[N]);E.length?this._events[b]=E.length===1?E[0]:E:a(this,b)}return this},u.prototype.removeAllListeners=function(d){var p;return d?(p=n?n+d:d,this._events[p]&&a(this,p)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(x_)),x_.exports}var sce=rce();const oce=Fo(sce);var Vh=new oce,Jw="recharts.syncEvent.tooltip",sM="recharts.syncEvent.brush",ace=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Qs(n))return t[n]}},lce={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},DU=zi({name:"options",initialState:lce,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cce=DU.reducer,{createEventEmitter:uce}=DU.actions;function dce(t){return t.tooltip.syncInteraction}var fce={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},OU=zi({name:"chartData",initialState:fce,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:oM,setDataStartEndIndexes:hce,setComputedData:i_e}=OU.actions,pce=OU.reducer,mce=["x","y"];function aM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aM(Object(n),!0).forEach(function(i){gce(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gce(t,e,n){return(e=yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=vce(t,"string");return typeof e=="symbol"?e:e+""}function vce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xce(t,e){if(t==null)return{};var n,i,r=bce(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bce(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function _ce(){var t=He(vE),e=He(xE),n=Ln(),i=He(yz),r=He(Xo),s=yd(),a=av(),u=He(f=>f.rootProps.className);C.useEffect(()=>{if(t==null)return gd;var f=(d,p,m)=>{if(e!==m&&t===d){if(i==="index"){var y;if(a&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var b=p.payload.coordinate,{x:S,y:N}=b,E=xce(b,mce),{x:R,y:U,width:j,height:B}=p.payload.sourceViewBox,O=bu(bu({},E),{},{x:a.x+(j?(S-R)/j:0)*a.width,y:a.y+(B?(N-U)/B:0)*a.height});n(bu(bu({},p),{},{payload:bu(bu({},p.payload),{},{coordinate:O})}))}else n(p);return}if(r!=null){var P;if(typeof i=="function"){var I={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},A=i(r,I);P=r[A]}else i==="value"&&(P=r.find(W=>String(W.value)===p.payload.label));var{coordinate:M}=p.payload;if(P==null||p.payload.active===!1||M==null||a==null){n(Yw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:H,y:F}=M,D=Math.min(H,a.x+a.width),z=Math.min(F,a.y+a.height),$={x:s==="horizontal"?P.coordinate:D,y:s==="horizontal"?z:P.coordinate},Y=Yw({active:p.payload.active,coordinate:$,dataKey:p.payload.dataKey,index:String(P.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});n(Y)}}};return Vh.on(Jw,f),()=>{Vh.off(Jw,f)}},[u,n,e,t,i,r,s,a])}function wce(){var t=He(vE),e=He(xE),n=Ln();C.useEffect(()=>{if(t==null)return gd;var i=(r,s,a)=>{e!==a&&t===r&&n(hce(s))};return Vh.on(sM,i),()=>{Vh.off(sM,i)}},[n,e,t])}function Sce(){var t=Ln();C.useEffect(()=>{t(uce())},[t]),_ce(),wce()}function Tce(t,e,n,i,r,s){var a=He(b=>Ile(b,t,e)),u=He(xE),f=He(vE),d=He(yz),p=He(dce),m=p==null?void 0:p.active,y=av();C.useEffect(()=>{if(!m&&f!=null&&u!=null){var b=Yw({active:s,coordinate:n,dataKey:a,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:y,graphicalItemId:void 0});Vh.emit(Jw,f,b,u)}},[m,n,a,r,i,u,f,d,s,y])}function lM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lM(Object(n),!0).forEach(function(i){Ece(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ece(t,e,n){return(e=Nce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nce(t){var e=Cce(t,"string");return typeof e=="symbol"?e:e+""}function Cce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ace(t){return t.dataKey}function kce(t,e){return C.isValidElement(t)?C.cloneElement(t,e):typeof t=="function"?C.createElement(t,e):C.createElement(one,e)}var uM=[],Ice={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Rce(t){var e,n,i=jr(t,Ice),{active:r,allowEscapeViewBox:s,animationDuration:a,animationEasing:u,content:f,filterNull:d,isAnimationActive:p,offset:m,payloadUniqBy:y,position:b,reverseDirection:S,useTranslate3d:N,wrapperStyle:E,cursor:R,shared:U,trigger:j,defaultIndex:B,portal:O,axisId:P}=i,I=Ln(),A=typeof B=="number"?String(B):B;C.useEffect(()=>{I(Nae({shared:U,trigger:j,axisId:P,active:r,defaultIndex:A}))},[I,U,j,P,r,A]);var M=av(),H=m6(),F=bae(U),{activeIndex:D,isActive:z}=(e=He(pe=>Ple(pe,F,j,A)))!==null&&e!==void 0?e:{},$=He(pe=>jle(pe,F,j,A)),Y=He(pe=>jU(pe,F,j,A)),W=He(pe=>Rle(pe,F,j,A)),X=$,oe=ice(),ve=(n=r??z)!==null&&n!==void 0?n:!1,[Ee,K]=BZ([X,ve]),te=F==="axis"?Y:void 0;Tce(F,j,W,te,D,ve);var ge=O??oe;if(ge==null||M==null||F==null)return null;var Z=X??uM;ve||(Z=uM),d&&Z.length&&(Z=mZ(Z.filter(pe=>pe.value!=null&&(pe.hide!==!0||i.includeHidden)),y,Ace));var he=Z.length>0,Ne=C.createElement(hne,{allowEscapeViewBox:s,animationDuration:a,animationEasing:u,isAnimationActive:p,active:ve,coordinate:W,hasPayload:he,offset:m,position:b,reverseDirection:S,useTranslate3d:N,viewBox:M,wrapperStyle:E,lastBoundingBox:Ee,innerRef:K,hasPortalFromProps:!!O},kce(f,cM(cM({},i),{},{payload:Z,label:te,active:ve,activeIndex:D,coordinate:W,accessibilityLayer:H})));return C.createElement(C.Fragment,null,Y3.createPortal(Ne,ge),ve&&C.createElement(nce,{cursor:R,tooltipEventType:F,coordinate:W,payload:Z,index:D}))}function jce(t,e,n){return(e=Pce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pce(t){var e=Mce(t,"string");return typeof e=="symbol"?e:e+""}function Mce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Dce{constructor(e){jce(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function dM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Oce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dM(Object(n),!0).forEach(function(i){Lce(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Lce(t,e,n){return(e=zce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zce(t){var e=Uce(t,"string");return typeof e=="symbol"?e:e+""}function Uce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vce={cacheSize:2e3,enableCache:!0},LU=Oce({},Vce),fM=new Dce(LU.cacheSize),Fce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},hM="recharts_measurement_span";function Hce(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(u)}var pM=(t,e)=>{try{var n=document.getElementById(hM);n||(n=document.createElement("span"),n.setAttribute("id",hM),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Fce,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},dh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||op.isSsr)return{width:0,height:0};if(!LU.enableCache)return pM(e,n);var i=Hce(e,n),r=fM.get(i);if(r)return r;var s=pM(e,n);return fM.set(i,s),s},zU;function Bce(t,e,n){return(e=$ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ce(t){var e=qce(t,"string");return typeof e=="symbol"?e:e+""}function qce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Gce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Kce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Yce={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Wce=["cm","mm","pt","pc","in","Q","px"];function Xce(t){return Wce.includes(t)}var ku="NaN";function Jce(t,e){return t*Yce[e]}class Xn{static parse(e){var n,[,i,r]=(n=Kce.exec(e))!==null&&n!==void 0?n:[];return i==null?Xn.NaN:new Xn(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Qs(e)&&(this.unit=""),n!==""&&!Gce.test(n)&&(this.num=NaN,this.unit=""),Xce(n)&&(this.num=Jce(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Xn(NaN,""):new Xn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Xn(NaN,""):new Xn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Xn(NaN,""):new Xn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Xn(NaN,""):new Xn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qs(this.num)}}zU=Xn;Bce(Xn,"NaN",new zU(NaN,""));function UU(t){if(t==null||t.includes(ku))return ku;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,s]=(n=mM.exec(e))!==null&&n!==void 0?n:[],a=Xn.parse(i??""),u=Xn.parse(s??""),f=r==="*"?a.multiply(u):a.divide(u);if(f.isNaN())return ku;e=e.replace(mM,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,p,m,y]=(d=gM.exec(e))!==null&&d!==void 0?d:[],b=Xn.parse(p??""),S=Xn.parse(y??""),N=m==="+"?b.add(S):b.subtract(S);if(N.isNaN())return ku;e=e.replace(gM,N.toString())}return e}var yM=/\(([^()]*)\)/;function Qce(t){for(var e=t,n;(n=yM.exec(e))!=null;){var[,i]=n;e=e.replace(yM,UU(i))}return e}function Zce(t){var e=t.replace(/\s+/g,"");return e=Qce(e),e=UU(e),e}function eue(t){try{return Zce(t)}catch{return ku}}function b_(t){var e=eue(t.slice(5,-1));return e===ku?"":e}var tue=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],nue=["dx","dy","angle","className","breakAll"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qw.apply(null,arguments)}function vM(t,e){if(t==null)return{};var n,i,r=iue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iue(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var VU=/[ \f\n\r\t\v\u2028\u2029]+/,FU=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];fi(e)||(n?r=e.toString().split(""):r=e.toString().split(VU));var s=r.map(u=>({word:u,width:dh(u,i).width})),a=n?0:dh("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function rue(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var HU=(t,e,n,i)=>t.reduce((r,s)=>{var{word:a,width:u}=s,f=r[r.length-1];if(f&&u!=null&&(e==null||i||f.width+u+n<Number(e)))f.words.push(a),f.width+=u+n;else{var d={words:[a],width:u};r.push(d)}return r},[]),BU=t=>t.reduce((e,n)=>e.width>n.width?e:n),sue="",xM=(t,e,n,i,r,s,a,u)=>{var f=t.slice(0,e),d=FU({breakAll:n,style:i,children:f+sue});if(!d)return[!1,[]];var p=HU(d.wordsWithComputedWidth,s,a,u),m=p.length>r||BU(p).width>Number(s);return[m,p]},oue=(t,e,n,i,r)=>{var{maxLines:s,children:a,style:u,breakAll:f}=t,d=ze(s),p=String(a),m=HU(e,i,n,r);if(!d||r)return m;var y=m.length>s||BU(m).width>Number(i);if(!y)return m;for(var b=0,S=p.length-1,N=0,E;b<=S&&N<=p.length-1;){var R=Math.floor((b+S)/2),U=R-1,[j,B]=xM(p,U,f,u,s,i,n,r),[O]=xM(p,R,f,u,s,i,n,r);if(!j&&!O&&(b=R+1),j&&O&&(S=R-1),!j&&O){E=B;break}N++}return E||m},bM=t=>{var e=fi(t)?[]:t.toString().split(VU);return[{words:e,width:void 0}]},aue=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:s,maxLines:a}=t;if((e||n)&&!op.isSsr){var u,f,d=FU({breakAll:s,children:i,style:r});if(d){var{wordsWithComputedWidth:p,spaceWidth:m}=d;u=p,f=m}else return bM(i);return oue({breakAll:s,children:i,maxLines:a,style:r},u,f,e,!!n)}return bM(i)},$U="#808080",lue={angle:0,breakAll:!1,capHeight:"0.71em",fill:$U,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$E=C.forwardRef((t,e)=>{var n=jr(t,lue),{x:i,y:r,lineHeight:s,capHeight:a,fill:u,scaleToFit:f,textAnchor:d,verticalAnchor:p}=n,m=vM(n,tue),y=C.useMemo(()=>aue({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),{dx:b,dy:S,angle:N,className:E,breakAll:R}=m,U=vM(m,nue);if(!Zs(i)||!Zs(r)||y.length===0)return null;var j=Number(i)+(ze(b)?b:0),B=Number(r)+(ze(S)?S:0);if(!pt(j)||!pt(B))return null;var O;switch(p){case"start":O=b_("calc(".concat(a,")"));break;case"middle":O=b_("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:O=b_("calc(".concat(y.length-1," * -").concat(s,")"));break}var P=[],I=y[0];if(f&&I!=null){var A=I.width,{width:M}=m;P.push("scale(".concat(ze(M)&&ze(A)?M/A:1,")"))}return N&&P.push("rotate(".concat(N,", ").concat(j,", ").concat(B,")")),P.length&&(U.transform=P.join(" ")),C.createElement("text",Qw({},Er(U),{ref:e,x:j,y:B,className:Lt("recharts-text",E),textAnchor:d,fill:u.includes("url")?$U:u}),y.map((H,F)=>{var D=H.words.join(R?"":" ");return C.createElement("tspan",{x:j,dy:F===0?O:s,key:"".concat(D,"-").concat(F)},D)}))});$E.displayName="Text";function _M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(n),!0).forEach(function(i){cue(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cue(t,e,n){return(e=uue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uue(t){var e=due(t,"string");return typeof e=="symbol"?e:e+""}function due(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fue=t=>{var{viewBox:e,position:n,offset:i=0,parentViewBox:r}=t,{x:s,y:a,height:u,upperWidth:f,lowerWidth:d}=HT(e),p=s,m=s+(f-d)/2,y=(p+m)/2,b=(f+d)/2,S=p+f/2,N=u>=0?1:-1,E=N*i,R=N>0?"end":"start",U=N>0?"start":"end",j=f>=0?1:-1,B=j*i,O=j>0?"end":"start",P=j>0?"start":"end",I=r;if(n==="top"){var A={x:p+f/2,y:a-E,horizontalAnchor:"middle",verticalAnchor:R};return I&&(A.height=Math.max(a-I.y,0),A.width=f),A}if(n==="bottom"){var M={x:m+d/2,y:a+u+E,horizontalAnchor:"middle",verticalAnchor:U};return I&&(M.height=Math.max(I.y+I.height-(a+u),0),M.width=d),M}if(n==="left"){var H={x:y-B,y:a+u/2,horizontalAnchor:O,verticalAnchor:"middle"};return I&&(H.width=Math.max(H.x-I.x,0),H.height=u),H}if(n==="right"){var F={x:y+b+B,y:a+u/2,horizontalAnchor:P,verticalAnchor:"middle"};return I&&(F.width=Math.max(I.x+I.width-F.x,0),F.height=u),F}var D=I?{width:b,height:u}:{};return n==="insideLeft"?Ps({x:y+B,y:a+u/2,horizontalAnchor:P,verticalAnchor:"middle"},D):n==="insideRight"?Ps({x:y+b-B,y:a+u/2,horizontalAnchor:O,verticalAnchor:"middle"},D):n==="insideTop"?Ps({x:p+f/2,y:a+E,horizontalAnchor:"middle",verticalAnchor:U},D):n==="insideBottom"?Ps({x:m+d/2,y:a+u-E,horizontalAnchor:"middle",verticalAnchor:R},D):n==="insideTopLeft"?Ps({x:p+B,y:a+E,horizontalAnchor:P,verticalAnchor:U},D):n==="insideTopRight"?Ps({x:p+f-B,y:a+E,horizontalAnchor:O,verticalAnchor:U},D):n==="insideBottomLeft"?Ps({x:m+B,y:a+u-E,horizontalAnchor:P,verticalAnchor:R},D):n==="insideBottomRight"?Ps({x:m+d-B,y:a+u-E,horizontalAnchor:O,verticalAnchor:R},D):n&&typeof n=="object"&&(ze(n.x)||hc(n.x))&&(ze(n.y)||hc(n.y))?Ps({x:s+rl(n.x,b),y:a+rl(n.y,u),horizontalAnchor:"end",verticalAnchor:"end"},D):Ps({x:S,y:a+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},D)},hue=["labelRef"],pue=["content"];function wM(t,e){if(t==null)return{};var n,i,r=mue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mue(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function SM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function th(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SM(Object(n),!0).forEach(function(i){gue(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gue(t,e,n){return(e=yue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yue(t){var e=vue(t,"string");return typeof e=="symbol"?e:e+""}function vue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function So(){return So=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},So.apply(null,arguments)}var qU=C.createContext(null),xue=t=>{var{x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:a,children:u}=t,f=C.useMemo(()=>({x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:a}),[e,n,i,r,s,a]);return C.createElement(qU.Provider,{value:f},u)},GU=()=>{var t=C.useContext(qU),e=av();return t||(e?HT(e):void 0)},bue=C.createContext(null),_ue=()=>{var t=C.useContext(bue),e=He(wz);return t||e},wue=t=>{var{value:e,formatter:n}=t,i=fi(t.children)?e:t.children;return typeof n=="function"?n(i):i},qE=t=>t!=null&&typeof t=="function",Sue=(t,e)=>{var n=es(e-t),i=Math.min(Math.abs(e-t),360);return n*i},Tue=(t,e,n,i,r)=>{var{offset:s,className:a}=t,{cx:u,cy:f,innerRadius:d,outerRadius:p,startAngle:m,endAngle:y,clockWise:b}=r,S=(d+p)/2,N=Sue(m,y),E=N>=0?1:-1,R,U;switch(e){case"insideStart":R=m+E*s,U=b;break;case"insideEnd":R=y-E*s,U=!b;break;case"end":R=y+E*s,U=b;break;default:throw new Error("Unsupported position ".concat(e))}U=N<=0?U:!U;var j=Zn(u,f,S,R),B=Zn(u,f,S,R+(U?1:-1)*359),O="M".concat(j.x,",").concat(j.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(U?0:1,`,
    `).concat(B.x,",").concat(B.y),P=fi(t.id)?Nh("recharts-radial-line-"):t.id;return C.createElement("text",So({},i,{dominantBaseline:"central",className:Lt("recharts-radial-bar-label",a)}),C.createElement("defs",null,C.createElement("path",{id:P,d:O})),C.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Eue=(t,e,n)=>{var{cx:i,cy:r,innerRadius:s,outerRadius:a,startAngle:u,endAngle:f}=t,d=(u+f)/2;if(n==="outside"){var{x:p,y:m}=Zn(i,r,a+e,d);return{x:p,y:m,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var y=(s+a)/2,{x:b,y:S}=Zn(i,r,y,d);return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},$g=t=>t!=null&&"cx"in t&&ze(t.cx),Nue={angle:0,offset:5,zIndex:Di.label,position:"middle",textBreakAll:!1};function Cue(t){if(!$g(t))return t;var{cx:e,cy:n,outerRadius:i}=t,r=i*2;return{x:e-i,y:n-i,width:r,upperWidth:r,lowerWidth:r,height:r}}function Ma(t){var e=jr(t,Nue),{viewBox:n,parentViewBox:i,position:r,value:s,children:a,content:u,className:f="",textBreakAll:d,labelRef:p}=e,m=_ue(),y=GU(),b=r==="center"?y:m??y,S,N,E;n==null?S=b:$g(n)?S=n:S=HT(n);var R=Cue(S);if(!S||fi(s)&&fi(a)&&!C.isValidElement(u)&&typeof u!="function")return null;var U=th(th({},e),{},{viewBox:S});if(C.isValidElement(u)){var{labelRef:j}=U,B=wM(U,hue);return C.cloneElement(u,B)}if(typeof u=="function"){var{content:O}=U,P=wM(U,pue);if(N=C.createElement(u,P),C.isValidElement(N))return N}else N=wue(e);var I=Er(e);if($g(S)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Tue(e,r,N,I,S);E=Eue(S,e.offset,e.position)}else{if(!R)return null;var A=fue({viewBox:R,position:r,offset:e.offset,parentViewBox:$g(i)?void 0:i});E=th(th({x:A.x,y:A.y,textAnchor:A.horizontalAnchor,verticalAnchor:A.verticalAnchor},A.width!==void 0?{width:A.width}:{}),A.height!==void 0?{height:A.height}:{})}return C.createElement(ll,{zIndex:e.zIndex},C.createElement($E,So({ref:p,className:Lt("recharts-label",f)},I,E,{textAnchor:rue(I.textAnchor)?I.textAnchor:E.textAnchor,breakAll:d}),N))}Ma.displayName="Label";var Aue=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?C.createElement(Ma,So({key:"label-implicit"},i)):Zs(t)?C.createElement(Ma,So({key:"label-implicit",value:t},i)):C.isValidElement(t)?t.type===Ma?C.cloneElement(t,th({key:"label-implicit"},i)):C.createElement(Ma,So({key:"label-implicit",content:t},i)):qE(t)?C.createElement(Ma,So({key:"label-implicit",content:t},i)):t&&typeof t=="object"?C.createElement(Ma,So({},t,{key:"label-implicit"},i)):null};function kue(t){var{label:e,labelRef:n}=t,i=GU();return Aue(e,i,n)||null}var __={},w_={},TM;function Iue(){return TM||(TM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(w_)),w_}var S_={},EM;function Rue(){return EM||(EM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(S_)),S_}var NM;function jue(){return NM||(NM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iue(),n=Rue(),i=jT();function r(s){if(i.isArrayLike(s))return e.last(n.toArray(s))}t.last=r})(__)),__}var T_,CM;function Pue(){return CM||(CM=1,T_=jue().last),T_}var Mue=Pue();const Due=Fo(Mue);var Oue=["valueAccessor"],Lue=["dataKey","clockWise","id","textBreakAll","zIndex"];function sy(){return sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sy.apply(null,arguments)}function AM(t,e){if(t==null)return{};var n,i,r=zue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zue(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Uue=t=>Array.isArray(t.value)?Due(t.value):t.value,KU=C.createContext(void 0),Vue=KU.Provider,YU=C.createContext(void 0);YU.Provider;function Fue(){return C.useContext(KU)}function Hue(){return C.useContext(YU)}function qg(t){var{valueAccessor:e=Uue}=t,n=AM(t,Oue),{dataKey:i,clockWise:r,id:s,textBreakAll:a,zIndex:u}=n,f=AM(n,Lue),d=Fue(),p=Hue(),m=d||p;return!m||!m.length?null:C.createElement(ll,{zIndex:u??Di.label},C.createElement(Js,{className:"recharts-label-list"},m.map((y,b)=>{var S,N=fi(i)?e(y,b):ti(y.payload,i),E=fi(s)?{}:{id:"".concat(s,"-").concat(b)};return C.createElement(Ma,sy({key:"label-".concat(b)},Er(y),f,E,{fill:(S=n.fill)!==null&&S!==void 0?S:y.fill,parentViewBox:y.parentViewBox,value:N,textBreakAll:a,viewBox:y.viewBox,index:b,zIndex:0}))})))}qg.displayName="LabelList";function Bue(t){var{label:e}=t;return e?e===!0?C.createElement(qg,{key:"labelList-implicit"}):C.isValidElement(e)||qE(e)?C.createElement(qg,{key:"labelList-implicit",content:e}):typeof e=="object"?C.createElement(qg,sy({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zw.apply(null,arguments)}var WU=t=>{var{cx:e,cy:n,r:i,className:r}=t,s=Lt("recharts-dot",r);return ze(e)&&ze(n)&&ze(i)?C.createElement("circle",Zw({},Xs(t),RT(t),{className:s,cx:e,cy:n,r:i})):null},$ue={radiusAxis:{},angleAxis:{}},XU=zi({name:"polarAxis",initialState:$ue,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:r_e,removeRadiusAxis:s_e,addAngleAxis:o_e,removeAngleAxis:a_e}=XU.actions,que=XU.reducer;function Gue(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var JU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function Kue(t){var{tooltipEntrySettings:e}=t,n=Ln(),i=rr(),r=C.useRef(null);return C.useLayoutEffect(()=>{i||(r.current===null?n(Sae(e)):r.current!==e&&n(Tae({prev:r.current,next:e})),r.current=e)},[e,n,i]),C.useLayoutEffect(()=>()=>{r.current&&(n(Eae(r.current)),r.current=null)},[n]),null}function Yue(t){var{legendPayload:e}=t,n=Ln(),i=rr(),r=C.useRef(null);return C.useLayoutEffect(()=>{i||(r.current===null?n(Qte(e)):r.current!==e&&n(Zte({prev:r.current,next:e})),r.current=e)},[n,i,e]),C.useLayoutEffect(()=>()=>{r.current&&(n(ene(r.current)),r.current=null)},[n]),null}var E_,Wue=()=>{var[t]=C.useState(()=>Nh("uid-"));return t},Xue=(E_=rF.useId)!==null&&E_!==void 0?E_:Wue;function Jue(t,e){var n=Xue();return e||(t?"".concat(t,"-").concat(n):n)}var Que=C.createContext(void 0),Zue=t=>{var{id:e,type:n,children:i}=t,r=Jue("recharts-".concat(n),e);return C.createElement(Que.Provider,{value:r},i(r))},ede={cartesianItems:[],polarItems:[]},QU=zi({name:"graphicalItems",initialState:ede,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Vt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=rs(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:Vt()},removeCartesianGraphicalItem:{reducer(t,e){var n=rs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Vt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Vt()},removePolarGraphicalItem:{reducer(t,e){var n=rs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Vt()}}}),{addCartesianGraphicalItem:tde,replaceCartesianGraphicalItem:nde,removeCartesianGraphicalItem:ide,addPolarGraphicalItem:l_e,removePolarGraphicalItem:c_e}=QU.actions,rde=QU.reducer,sde=t=>{var e=Ln(),n=C.useRef(null);return C.useLayoutEffect(()=>{n.current===null?e(tde(t)):n.current!==t&&e(nde({prev:n.current,next:t})),n.current=t},[e,t]),C.useLayoutEffect(()=>()=>{n.current&&(e(ide(n.current)),n.current=null)},[e]),null},ode=C.memo(sde),ade=["points"];function kM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function N_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kM(Object(n),!0).forEach(function(i){lde(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function lde(t,e,n){return(e=cde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cde(t){var e=ude(t,"string");return typeof e=="symbol"?e:e+""}function ude(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oy(){return oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oy.apply(null,arguments)}function dde(t,e){if(t==null)return{};var n,i,r=fde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fde(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function hde(t){var{option:e,dotProps:n,className:i}=t;if(C.isValidElement(e))return C.cloneElement(e,n);if(typeof e=="function")return e(n);var r=Lt(i,typeof e!="boolean"?e.className:""),s=n??{},{points:a}=s,u=dde(s,ade);return C.createElement(WU,oy({},u,{className:r}))}function pde(t,e){return t==null?!1:e?!0:t.length===1}function mde(t){var{points:e,dot:n,className:i,dotClassName:r,dataKey:s,baseProps:a,needClip:u,clipPathId:f,zIndex:d=Di.scatter}=t;if(!pde(e,n))return null;var p=JU(n),m=lQ(n),y=e.map((S,N)=>{var E,R,U=N_(N_(N_({r:3},a),m),{},{index:N,cx:(E=S.x)!==null&&E!==void 0?E:void 0,cy:(R=S.y)!==null&&R!==void 0?R:void 0,dataKey:s,value:S.value,payload:S.payload,points:e});return C.createElement(hde,{key:"dot-".concat(N),option:n,dotProps:U,className:r})}),b={};return u&&f!=null&&(b.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),C.createElement(ll,{zIndex:d},C.createElement(Js,oy({className:i},b),y))}function IM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function RM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(n),!0).forEach(function(i){gde(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gde(t,e,n){return(e=yde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yde(t){var e=vde(t,"string");return typeof e=="symbol"?e:e+""}function vde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZU=0,xde={xAxis:{},yAxis:{},zAxis:{}},eV=zi({name:"cartesianAxis",initialState:xde,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Vt()},replaceXAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.xAxis[n.id],t.xAxis[i.id]=i)},prepare:Vt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Vt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Vt()},replaceYAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.yAxis[n.id],t.yAxis[i.id]=i)},prepare:Vt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Vt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Vt()},replaceZAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.zAxis[n.id],t.zAxis[i.id]=i)},prepare:Vt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Vt()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var s,a=r.widthHistory||[];if(a.length===3&&a[0]===a[2]&&i===a[1]&&i!==r.width&&Math.abs(i-((s=a[0])!==null&&s!==void 0?s:0))<=1)return;var u=[...a,i].slice(-3);t.yAxis[n]=RM(RM({},r),{},{width:i,widthHistory:u})}}}}),{addXAxis:bde,replaceXAxis:_de,removeXAxis:wde,addYAxis:Sde,replaceYAxis:Tde,removeYAxis:Ede,addZAxis:u_e,replaceZAxis:d_e,removeZAxis:f_e,updateYAxisWidth:Nde}=eV.actions,Cde=eV.reducer,Ade=fe([ri],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),kde=fe([Ade,$o,qo],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),GE=()=>He(kde),Ide=()=>He(yle);function jM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function C_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jM(Object(n),!0).forEach(function(i){Rde(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rde(t,e,n){return(e=jde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jde(t){var e=Pde(t,"string");return typeof e=="symbol"?e:e+""}function Pde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mde=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:s,clipPath:a}=t;if(r===!1||e.x==null||e.y==null)return null;var u={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},f=C_(C_(C_({},u),By(r)),RT(r)),d;return C.isValidElement(r)?d=C.cloneElement(r,f):typeof r=="function"?d=r(f):d=C.createElement(WU,f),C.createElement(Js,{className:"recharts-active-dot",clipPath:a},d)};function PM(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r,clipPath:s,zIndex:a=Di.activeDot}=t,u=He(Uh),f=Ide();if(e==null||f==null)return null;var d=e.find(p=>f.includes(p.payload));return fi(d)?null:C.createElement(ll,{zIndex:a},C.createElement(Mde,{point:d,childIndex:Number(u),mainColor:n,dataKey:r,activeDot:i,clipPath:s}))}var Dde=t=>{var{chartData:e}=t,n=Ln(),i=rr();return C.useEffect(()=>i?()=>{}:(n(oM(e)),()=>{n(oM(void 0))}),[e,n,i]),null},MM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},tV=zi({name:"brush",initialState:MM,reducers:{setBrushSettings(t,e){return e.payload==null?MM:e.payload}}}),{setBrushSettings:h_e}=tV.actions,Ode=tV.reducer;function Lde(t){return(t%180+180)%180}var zde=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Lde(r),a=s*Math.PI/180,u=Math.atan(i/n),f=a>u&&a<Math.PI-u?i/Math.sin(a):n/Math.cos(a);return Math.abs(f)},Ude={dots:[],areas:[],lines:[]},nV=zi({name:"referenceElements",initialState:Ude,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=rs(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=rs(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=rs(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:p_e,removeDot:m_e,addArea:g_e,removeArea:y_e,addLine:v_e,removeLine:x_e}=nV.actions,Vde=nV.reducer,Fde=C.createContext(void 0),Hde=t=>{var{children:e}=t,[n]=C.useState("".concat(Nh("recharts"),"-clip")),i=GE();if(i==null)return null;var{x:r,y:s,width:a,height:u}=i;return C.createElement(Fde.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:r,y:s,height:u,width:a}))),e)};function iV(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],i=0;i<t.length;i+=e){var r=t[i];r!==void 0&&n.push(r)}return n}function Bde(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return zde(i,n)}function $de(t,e,n){var i=n==="width",{x:r,y:s,width:a,height:u}=t;return e===1?{start:i?r:s,end:i?r+a:s+u}:{start:i?r+a:s+u,end:i?r:s}}function Fh(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var s=n();return t*(e-t*s/2-i)>=0&&t*(e+t*s/2-r)<=0}function qde(t,e){return iV(t,e+1)}function Gde(t,e,n,i,r){for(var s=(i||[]).slice(),{start:a,end:u}=e,f=0,d=1,p=a,m=function(){var S=i==null?void 0:i[f];if(S===void 0)return{v:iV(i,d)};var N=f,E,R=()=>(E===void 0&&(E=n(S,N)),E),U=S.coordinate,j=f===0||Fh(t,U,R,p,u);j||(f=0,p=a,d+=1),j&&(p=U+t*(R()/2+r),f+=d)},y;d<=s.length;)if(y=m(),y)return y.v;return[]}function Kde(t,e,n,i,r){var s=(i||[]).slice(),a=s.length;if(a===0)return[];for(var{start:u,end:f}=e,d=1;d<=a;d++){for(var p=(a-1)%d,m=u,y=!0,b=function(){var B=i[N];if(B==null)return 0;var O=N,P,I=()=>(P===void 0&&(P=n(B,O)),P),A=B.coordinate,M=N===p||Fh(t,A,I,m,f);if(!M)return y=!1,1;M&&(m=A+t*(I()/2+r))},S,N=p;N<a&&(S=b(),!(S!==0&&S===1));N+=d);if(y){for(var E=[],R=p;R<a;R+=d){var U=i[R];U!=null&&E.push(U)}return E}}return[]}function DM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ai(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DM(Object(n),!0).forEach(function(i){Yde(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yde(t,e,n){return(e=Wde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wde(t){var e=Xde(t,"string");return typeof e=="symbol"?e:e+""}function Xde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jde(t,e,n,i,r){for(var s=(i||[]).slice(),a=s.length,{start:u}=e,{end:f}=e,d=function(y){var b=s[y];if(b==null)return 1;var S=b,N,E=()=>(N===void 0&&(N=n(b,y)),N);if(y===a-1){var R=t*(S.coordinate+t*E()/2-f);s[y]=S=ai(ai({},S),{},{tickCoord:R>0?S.coordinate-R*t:S.coordinate})}else s[y]=S=ai(ai({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var U=Fh(t,S.tickCoord,E,u,f);U&&(f=S.tickCoord-t*(E()/2+r),s[y]=ai(ai({},S),{},{isShow:!0}))}},p=a-1;p>=0;p--)d(p);return s}function Qde(t,e,n,i,r,s){var a=(i||[]).slice(),u=a.length,{start:f,end:d}=e;if(s){var p=i[u-1];if(p!=null){var m=n(p,u-1),y=t*(p.coordinate+t*m/2-d);if(a[u-1]=p=ai(ai({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate}),p.tickCoord!=null){var b=Fh(t,p.tickCoord,()=>m,f,d);b&&(d=p.tickCoord-t*(m/2+r),a[u-1]=ai(ai({},p),{},{isShow:!0}))}}}for(var S=s?u-1:u,N=function(U){var j=a[U];if(j==null)return 1;var B=j,O,P=()=>(O===void 0&&(O=n(j,U)),O);if(U===0){var I=t*(B.coordinate-t*P()/2-f);a[U]=B=ai(ai({},B),{},{tickCoord:I<0?B.coordinate-I*t:B.coordinate})}else a[U]=B=ai(ai({},B),{},{tickCoord:B.coordinate});if(B.tickCoord!=null){var A=Fh(t,B.tickCoord,P,f,d);A&&(f=B.tickCoord+t*(P()/2+r),a[U]=ai(ai({},B),{},{isShow:!0}))}},E=0;E<S;E++)N(E);return a}function Zde(t,e,n){var{tick:i,ticks:r,viewBox:s,minTickGap:a,orientation:u,interval:f,tickFormatter:d,unit:p,angle:m}=t;if(!r||!r.length||!i)return[];if(ze(f)||op.isSsr){var y;return(y=qde(r,ze(f)?f:0))!==null&&y!==void 0?y:[]}var b=[],S=u==="top"||u==="bottom"?"width":"height",N=p&&S==="width"?dh(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(O,P)=>{var I=typeof d=="function"?d(O.value,P):O.value;return S==="width"?Bde(dh(I,{fontSize:e,letterSpacing:n}),N,m):dh(I,{fontSize:e,letterSpacing:n})[S]},R=r[0],U=r[1],j=r.length>=2&&R!=null&&U!=null?es(U.coordinate-R.coordinate):1,B=$de(s,j,S);return f==="equidistantPreserveStart"?Gde(j,B,E,r,a):f==="equidistantPreserveEnd"?Kde(j,B,E,r,a):(f==="preserveStart"||f==="preserveStartEnd"?b=Qde(j,B,E,r,a,f==="preserveStartEnd"):b=Jde(j,B,E,r,a),b.filter(O=>O.isShow))}var efe=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(p=>{if(p){var m=p.getBoundingClientRect();m.width>a&&(a=m.width)}});var u=n?n.getBoundingClientRect().width:0,f=r+s,d=a+f+u+(n?i:0);return Math.round(d)}return 0},tfe=["axisLine","width","height","className","hide","ticks","axisType"];function nfe(t,e){if(t==null)return{};var n,i,r=ife(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ife(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vc.apply(null,arguments)}function OM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OM(Object(n),!0).forEach(function(i){rfe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rfe(t,e,n){return(e=sfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sfe(t){var e=ofe(t,"string");return typeof e=="symbol"?e:e+""}function ofe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ic={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Di.axis};function afe(t){var{x:e,y:n,width:i,height:r,orientation:s,mirror:a,axisLine:u,otherSvgProps:f}=t;if(!u)return null;var d=Xt(Xt(Xt({},f),Xs(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!a||s==="bottom"&&a);d=Xt(Xt({},d),{},{x1:e,y1:n+p*r,x2:e+i,y2:n+p*r})}else{var m=+(s==="left"&&!a||s==="right"&&a);d=Xt(Xt({},d),{},{x1:e+m*i,y1:n,x2:e+m*i,y2:n+r})}return C.createElement("line",vc({},d,{className:Lt("recharts-cartesian-axis-line",Gy(u,"className"))}))}function lfe(t,e,n,i,r,s,a,u,f){var d,p,m,y,b,S,N=u?-1:1,E=t.tickSize||a,R=ze(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=p=t.coordinate,y=n+ +!u*r,m=y-N*E,S=m-N*f,b=R;break;case"left":m=y=t.coordinate,p=e+ +!u*i,d=p-N*E,b=d-N*f,S=R;break;case"right":m=y=t.coordinate,p=e+ +u*i,d=p+N*E,b=d+N*f,S=R;break;default:d=p=t.coordinate,y=n+ +u*r,m=y+N*E,S=m+N*f,b=R;break}return{line:{x1:d,y1:m,x2:p,y2:y},tick:{x:b,y:S}}}function cfe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function ufe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function dfe(t){var{option:e,tickProps:n,value:i}=t,r,s=Lt(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(e))r=C.cloneElement(e,Xt(Xt({},n),{},{className:s}));else if(typeof e=="function")r=e(Xt(Xt({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Lt(a,Gue(e))),r=C.createElement($E,vc({},n,{className:a}),i)}return r}var ffe=C.forwardRef((t,e)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:s,tickFormatter:a,unit:u,padding:f,tickTextProps:d,orientation:p,mirror:m,x:y,y:b,width:S,height:N,tickSize:E,tickMargin:R,fontSize:U,letterSpacing:j,getTicksConfig:B,events:O,axisType:P}=t,I=Zde(Xt(Xt({},B),{},{ticks:n}),U,j),A=cfe(p,m),M=ufe(p,m),H=Xs(B),F=By(i),D={};typeof r=="object"&&(D=r);var z=Xt(Xt({},H),{},{fill:"none"},D),$=I.map(X=>Xt({entry:X},lfe(X,y,b,S,N,p,E,m,R))),Y=$.map(X=>{var{entry:oe,line:ve}=X;return C.createElement(Js,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},r&&C.createElement("line",vc({},z,ve,{className:Lt("recharts-cartesian-axis-tick-line",Gy(r,"className"))})))}),W=$.map((X,oe)=>{var ve,Ee,{entry:K,tick:te}=X,ge=Xt(Xt(Xt(Xt({verticalAnchor:M},H),{},{textAnchor:A,stroke:"none",fill:s},te),{},{index:oe,payload:K,visibleTicksCount:I.length,tickFormatter:a,padding:f},d),{},{angle:(ve=(Ee=d==null?void 0:d.angle)!==null&&Ee!==void 0?Ee:H.angle)!==null&&ve!==void 0?ve:0}),Z=Xt(Xt({},ge),F);return C.createElement(Js,vc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},$Q(O,K,oe)),i&&C.createElement(dfe,{option:i,tickProps:Z,value:"".concat(typeof a=="function"?a(K.value,oe):K.value).concat(u||"")}))});return C.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},W.length>0&&C.createElement(ll,{zIndex:Di.label},C.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:e},W)),Y.length>0&&C.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},Y))}),hfe=C.forwardRef((t,e)=>{var{axisLine:n,width:i,height:r,className:s,hide:a,ticks:u,axisType:f}=t,d=nfe(t,tfe),[p,m]=C.useState(""),[y,b]=C.useState(""),S=C.useRef(null);C.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return efe({ticks:S.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var N=C.useCallback(E=>{if(E){var R=E.getElementsByClassName("recharts-cartesian-axis-tick-value");S.current=R;var U=R[0];if(U){var j=window.getComputedStyle(U),B=j.fontSize,O=j.letterSpacing;(B!==p||O!==y)&&(m(B),b(O))}}},[p,y]);return a||i!=null&&i<=0||r!=null&&r<=0?null:C.createElement(ll,{zIndex:t.zIndex},C.createElement(Js,{className:Lt("recharts-cartesian-axis",s)},C.createElement(afe,{x:t.x,y:t.y,width:i,height:r,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Xs(t)}),C.createElement(ffe,{ref:N,axisType:f,events:d,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:y,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),C.createElement(xue,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},C.createElement(kue,{label:t.label,labelRef:t.labelRef}),t.children)))}),KE=C.forwardRef((t,e)=>{var n=jr(t,ic);return C.createElement(hfe,vc({},n,{ref:e}))});KE.displayName="CartesianAxis";var pfe={},rV=zi({name:"errorBars",initialState:pfe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?r:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:b_e,replaceErrorBar:__e,removeErrorBar:w_e}=rV.actions,mfe=rV.reducer;function sV(t,e){var n,i,r=He(d=>Yo(d,t)),s=He(d=>Wo(d,e)),a=(n=r==null?void 0:r.allowDataOverflow)!==null&&n!==void 0?n:In.allowDataOverflow,u=(i=s==null?void 0:s.allowDataOverflow)!==null&&i!==void 0?i:Rn.allowDataOverflow,f=a||u;return{needClip:f,needClipX:a,needClipY:u}}function gfe(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=GE(),{needClipX:s,needClipY:a,needClip:u}=sV(e,n);if(!u||!r)return null;var{x:f,y:d,width:p,height:m}=r;return C.createElement("clipPath",{id:"clipPath-".concat(i)},C.createElement("rect",{x:s?f:f-p/2,y:a?d:d-m/2,width:s?p:p*2,height:a?m:m*2}))}function yfe(t){var e=By(t),n=3,i=2;if(e!=null){var{r,strokeWidth:s}=e,a=Number(r),u=Number(s);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(u)||u<0)&&(u=i),{r:a,strokeWidth:u}}return{r:n,strokeWidth:i}}var A_={exports:{}},k_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM;function vfe(){if(LM)return k_;LM=1;var t=id();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,s=t.useEffect,a=t.useMemo,u=t.useDebugValue;return k_.useSyncExternalStoreWithSelector=function(f,d,p,m,y){var b=r(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=a(function(){function E(O){if(!R){if(R=!0,U=O,O=m(O),y!==void 0&&S.hasValue){var P=S.value;if(y(P,O))return j=P}return j=O}if(P=j,n(U,O))return P;var I=m(O);return y!==void 0&&y(P,I)?(U=O,P):(U=O,j=I)}var R=!1,U,j,B=p===void 0?null:p;return[function(){return E(d())},B===null?void 0:function(){return E(B())}]},[d,p,m,y]);var N=i(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=N},[N]),u(N),N},k_}var zM;function xfe(){return zM||(zM=1,A_.exports=vfe()),A_.exports}xfe();function bfe(t){t()}function _fe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){bfe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var UM={notify(){},get:()=>[]};function wfe(t,e){let n,i=UM,r=0,s=!1;function a(N){p();const E=i.subscribe(N);let R=!1;return()=>{R||(R=!0,E(),m())}}function u(){i.notify()}function f(){S.onStateChange&&S.onStateChange()}function d(){return s}function p(){r++,n||(n=t.subscribe(f),i=_fe())}function m(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=UM)}function y(){s||(s=!0,p())}function b(){s&&(s=!1,m())}const S={addNestedSub:a,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:d,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>i};return S}var Sfe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tfe=Sfe(),Efe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Nfe=Efe(),Cfe=()=>Tfe||Nfe?C.useLayoutEffect:C.useEffect,Afe=Cfe();function VM(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function kfe(t,e){if(VM(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!VM(t[n[r]],e[n[r]]))return!1;return!0}var I_=Symbol.for("react-redux-context"),R_=typeof globalThis<"u"?globalThis:{};function Ife(){if(!C.createContext)return{};const t=R_[I_]??(R_[I_]=new Map);let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var Rfe=Ife();function jfe(t){const{children:e,context:n,serverState:i,store:r}=t,s=C.useMemo(()=>{const f=wfe(r);return{store:r,subscription:f,getServerState:i?()=>i:void 0}},[r,i]),a=C.useMemo(()=>r.getState(),[r]);Afe(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),a!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,a]);const u=n||Rfe;return C.createElement(u.Provider,{value:s},e)}var Pfe=jfe,Mfe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Dfe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function YE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var i of n)if(Mfe.has(i)){if(t[i]==null&&e[i]==null)continue;if(!kfe(t[i],e[i]))return!1}else if(!Dfe(t[i],e[i]))return!1;return!0}function WE(t,e){var n,i;return(n=(i=t.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.xAxisId)!==null&&n!==void 0?n:ZU}function XE(t,e){var n,i;return(n=(i=t.graphicalItems.cartesianItems.find(r=>r.id===e))===null||i===void 0?void 0:i.yAxisId)!==null&&n!==void 0?n:ZU}var oV=(t,e,n)=>aU(t,"xAxis",WE(t,e),n),aV=(t,e,n)=>oU(t,"xAxis",WE(t,e),n),lV=(t,e,n)=>aU(t,"yAxis",XE(t,e),n),cV=(t,e,n)=>oU(t,"yAxis",XE(t,e),n),Ofe=fe([Ht,oV,lV,aV,cV],(t,e,n,i,r)=>to(t,"xAxis")?D0(e,i,!1):D0(n,r,!1)),Lfe=(t,e)=>e,uV=fe([Az,Lfe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),dV=t=>{var e=Ht(t),n=to(e,"xAxis");return n?"yAxis":"xAxis"},zfe=(t,e)=>{var n=dV(t);return n==="yAxis"?XE(t,e):WE(t,e)},Ufe=(t,e,n)=>Lz(t,dV(t),zfe(t,e),n),Vfe=fe([uV,Ufe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:i}=t,r=SE(t);if(!(i==null||r==null)){var s=(n=e[i])===null||n===void 0?void 0:n.stackedData,a=s==null?void 0:s.find(u=>u.key===r);if(a!=null)return a.map(u=>[u[0],u[1]])}}}),Ffe=fe([Ht,oV,lV,aV,cV,Vfe,toe,Ofe,uV,uoe],(t,e,n,i,r,s,a,u,f,d)=>{var{chartData:p,dataStartIndex:m,dataEndIndex:y}=a;if(!(f==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||i==null||r==null||i.length===0||r.length===0||u==null)){var{data:b}=f,S;if(b&&b.length>0?S=b:S=p==null?void 0:p.slice(m,y+1),S!=null)return ohe({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:m,areaSettings:f,stackedData:s,displayedData:S,chartBaseValue:d,bandSize:u})}}),Hfe=["id"],Bfe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rc.apply(null,arguments)}function fV(t,e){if(t==null)return{};var n,i,r=$fe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $fe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function FM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Iu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FM(Object(n),!0).forEach(function(i){qfe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qfe(t,e,n){return(e=Gfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gfe(t){var e=Kfe(t,"string");return typeof e=="symbol"?e:e+""}function Kfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ay(t,e){return t&&t!=="none"?t:e}var Yfe=t=>{var{dataKey:e,name:n,stroke:i,fill:r,legendType:s,hide:a}=t;return[{inactive:a,dataKey:e,type:s,color:ay(i,r),value:t6(n,e),payload:t}]},Wfe=C.memo(t=>{var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:s,name:a,hide:u,unit:f,tooltipType:d,id:p}=t,m={dataDefinedOnItem:n,getPosition:gd,settings:{stroke:i,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:t6(a,e),hide:u,type:d,color:ay(i,s),unit:f,graphicalItemId:p}};return C.createElement(Kue,{tooltipEntrySettings:m})});function Xfe(t){var{clipPathId:e,points:n,props:i}=t,{needClip:r,dot:s,dataKey:a}=i,u=Xs(i);return C.createElement(mde,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:u,needClip:r,clipPathId:e})}function Jfe(t){var{showLabels:e,children:n,points:i}=t,r=i.map(s=>{var a,u,f={x:(a=s.x)!==null&&a!==void 0?a:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Iu(Iu({},f),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:f,fill:void 0})});return C.createElement(Vue,{value:e?r:void 0},n)}function HM(t){var{points:e,baseLine:n,needClip:i,clipPathId:r,props:s}=t,{layout:a,type:u,stroke:f,connectNulls:d,isRange:p}=s,{id:m}=s,y=fV(s,Hfe),b=Xs(y),S=Er(y);return C.createElement(C.Fragment,null,(e==null?void 0:e.length)>1&&C.createElement(Js,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},C.createElement(Hg,rc({},S,{id:m,points:e,connectNulls:d,type:u,baseLine:n,layout:a,stroke:"none",className:"recharts-area-area"})),f!=="none"&&C.createElement(Hg,rc({},b,{className:"recharts-area-curve",layout:a,type:u,connectNulls:d,fill:"none",points:e})),f!=="none"&&p&&C.createElement(Hg,rc({},b,{className:"recharts-area-curve",layout:a,type:u,connectNulls:d,fill:"none",points:n}))),C.createElement(Xfe,{points:e,props:y,clipPathId:r}))}function Qfe(t){var e,n,{alpha:i,baseLine:r,points:s,strokeWidth:a}=t,u=(e=s[0])===null||e===void 0?void 0:e.y,f=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!pt(u)||!pt(f))return null;var d=i*Math.abs(u-f),p=Math.max(...s.map(m=>m.x||0));return ze(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(m=>m.x||0),p)),ze(p)?C.createElement("rect",{x:0,y:u<f?u:u-d,width:p+(a?parseInt("".concat(a),10):1),height:Math.floor(d)}):null}function Zfe(t){var e,n,{alpha:i,baseLine:r,points:s,strokeWidth:a}=t,u=(e=s[0])===null||e===void 0?void 0:e.x,f=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!pt(u)||!pt(f))return null;var d=i*Math.abs(u-f),p=Math.max(...s.map(m=>m.y||0));return ze(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(m=>m.y||0),p)),ze(p)?C.createElement("rect",{x:u<f?u:u-d,y:0,width:d,height:Math.floor(p+(a?parseInt("".concat(a),10):1))}):null}function ehe(t){var{alpha:e,layout:n,points:i,baseLine:r,strokeWidth:s}=t;return n==="vertical"?C.createElement(Qfe,{alpha:e,points:i,baseLine:r,strokeWidth:s}):C.createElement(Zfe,{alpha:e,points:i,baseLine:r,strokeWidth:s})}function the(t){var{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:s}=t,{points:a,baseLine:u,isAnimationActive:f,animationBegin:d,animationDuration:p,animationEasing:m,onAnimationStart:y,onAnimationEnd:b}=i,S=C.useMemo(()=>({points:a,baseLine:u}),[a,u]),N=b6(S,"recharts-area-"),E=BT(),[R,U]=C.useState(!1),j=!R,B=C.useCallback(()=>{typeof b=="function"&&b(),U(!1)},[b]),O=C.useCallback(()=>{typeof y=="function"&&y(),U(!0)},[y]);if(E==null)return null;var P=r.current,I=s.current;return C.createElement(Jfe,{showLabels:j,points:a},i.children,C.createElement(x6,{animationId:N,begin:d,duration:p,isActive:f,easing:m,onAnimationEnd:B,onAnimationStart:O,key:N},A=>{if(P){var M=P.length/a.length,H=A===1?a:a.map((D,z)=>{var $=Math.floor(z*M);if(P[$]){var Y=P[$];return Iu(Iu({},D),{},{x:Ds(Y.x,D.x,A),y:Ds(Y.y,D.y,A)})}return D}),F;return ze(u)?F=Ds(I,u,A):fi(u)||Qs(u)?F=Ds(I,0,A):F=u.map((D,z)=>{var $=Math.floor(z*M);if(Array.isArray(I)&&I[$]){var Y=I[$];return Iu(Iu({},D),{},{x:Ds(Y.x,D.x,A),y:Ds(Y.y,D.y,A)})}return D}),A>0&&(r.current=H,s.current=F),C.createElement(HM,{points:H,baseLine:F,needClip:e,clipPathId:n,props:i})}return A>0&&(r.current=a,s.current=u),C.createElement(Js,null,f&&C.createElement("defs",null,C.createElement("clipPath",{id:"animationClipPath-".concat(n)},C.createElement(ehe,{alpha:A,points:a,baseLine:u,layout:E,strokeWidth:i.strokeWidth}))),C.createElement(Js,{clipPath:"url(#animationClipPath-".concat(n,")")},C.createElement(HM,{points:a,baseLine:u,needClip:e,clipPathId:n,props:i})))}),C.createElement(Bue,{label:i.label}))}function nhe(t){var{needClip:e,clipPathId:n,props:i}=t,r=C.useRef(null),s=C.useRef();return C.createElement(the,{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:s})}class ihe extends C.PureComponent{render(){var{hide:e,dot:n,points:i,className:r,top:s,left:a,needClip:u,xAxisId:f,yAxisId:d,width:p,height:m,id:y,baseLine:b,zIndex:S}=this.props;if(e)return null;var N=Lt("recharts-area",r),E=y,{r:R,strokeWidth:U}=yfe(n),j=JU(n),B=R*2+U,O=u?"url(#clipPath-".concat(j?"":"dots-").concat(E,")"):void 0;return C.createElement(ll,{zIndex:S},C.createElement(Js,{className:N},u&&C.createElement("defs",null,C.createElement(gfe,{clipPathId:E,xAxisId:f,yAxisId:d}),!j&&C.createElement("clipPath",{id:"clipPath-dots-".concat(E)},C.createElement("rect",{x:a-B/2,y:s-B/2,width:p+B,height:m+B}))),C.createElement(nhe,{needClip:u,clipPathId:E,props:this.props})),C.createElement(PM,{points:i,mainColor:ay(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:O}),this.props.isRange&&Array.isArray(b)&&C.createElement(PM,{points:b,mainColor:ay(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:O}))}}var hV={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Di.area};function rhe(t){var e,n=jr(t,hV),{activeDot:i,animationBegin:r,animationDuration:s,animationEasing:a,connectNulls:u,dot:f,fill:d,fillOpacity:p,hide:m,isAnimationActive:y,legendType:b,stroke:S,xAxisId:N,yAxisId:E}=n,R=fV(n,Bfe),U=yd(),j=kU(),{needClip:B}=sV(N,E),O=rr(),{points:P,isRange:I,baseLine:A}=(e=He($=>Ffe($,t.id,O)))!==null&&e!==void 0?e:{},M=GE();if(U!=="horizontal"&&U!=="vertical"||M==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:H,width:F,x:D,y:z}=M;return!P||!P.length?null:C.createElement(ihe,rc({},R,{activeDot:i,animationBegin:r,animationDuration:s,animationEasing:a,baseLine:A,connectNulls:u,dot:f,fill:d,fillOpacity:p,height:H,hide:m,layout:U,isAnimationActive:y==="auto"?!op.isSsr:y,isRange:I,legendType:b,needClip:B,points:P,stroke:S,width:F,left:D,top:z,xAxisId:N,yAxisId:E}))}var she=(t,e,n,i,r)=>{var s=n??e;if(ze(s))return s;var a=t==="horizontal"?r:i,u=a.scale.domain();if(a.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]};function ohe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:i},stackedData:r,layout:s,chartBaseValue:a,xAxis:u,yAxis:f,displayedData:d,dataStartIndex:p,xAxisTicks:m,yAxisTicks:y,bandSize:b}=t,S=r&&r.length,N=she(s,a,n,u,f),E=s==="horizontal",R=!1,U=d.map((B,O)=>{var P,I,A,M;if(S)M=r[p+O];else{var H=ti(B,i);Array.isArray(H)?(M=H,R=!0):M=[N,H]}var F=(P=(I=M)===null||I===void 0?void 0:I[1])!==null&&P!==void 0?P:null,D=F==null||S&&!e&&ti(B,i)==null;if(E){var z;return{x:WR({axis:u,ticks:m,bandSize:b,entry:B,index:O}),y:D?null:(z=f.scale.map(F))!==null&&z!==void 0?z:null,value:M,payload:B}}return{x:D?null:(A=u.scale.map(F))!==null&&A!==void 0?A:null,y:WR({axis:f,ticks:y,bandSize:b,entry:B,index:O}),value:M,payload:B}}),j;return S||R?j=U.map(B=>{var O,P=Array.isArray(B.value)?B.value[0]:null;if(E){var I;return{x:B.x,y:P!=null&&B.y!=null&&(I=f.scale.map(P))!==null&&I!==void 0?I:null,payload:B.payload}}return{x:P!=null&&(O=u.scale.map(P))!==null&&O!==void 0?O:null,y:B.y,payload:B.payload}}):j=E?f.scale.map(N):u.scale.map(N),{points:U,baseLine:j??0,isRange:R}}function ahe(t){var e=jr(t,hV),n=rr();return C.createElement(Zue,{id:e.id,type:"area"},i=>C.createElement(C.Fragment,null,C.createElement(Yue,{legendPayload:Yfe(e)}),C.createElement(Wfe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),C.createElement(ode,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Qee(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),C.createElement(rhe,rc({},e,{id:i}))))}var pV=C.memo(ahe,YE);pV.displayName="Area";var lhe=["domain","range"],che=["domain","range"];function BM(t,e){if(t==null)return{};var n,i,r=uhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uhe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function $M(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function mV(t,e){if(t===e)return!0;var{domain:n,range:i}=t,r=BM(t,lhe),{domain:s,range:a}=e,u=BM(e,che);return!$M(n,s)||!$M(i,a)?!1:YE(r,u)}var dhe=["type"],fhe=["dangerouslySetInnerHTML","ticks","scale"],hhe=["id","scale"];function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eS.apply(null,arguments)}function qM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function GM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(n),!0).forEach(function(i){phe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function phe(t,e,n){return(e=mhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mhe(t){var e=ghe(t,"string");return typeof e=="symbol"?e:e+""}function ghe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tS(t,e){if(t==null)return{};var n,i,r=yhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yhe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function vhe(t){var e=Ln(),n=C.useRef(null),i=BT(),{type:r}=t,s=tS(t,dhe),a=xv(i,"xAxis",r),u=C.useMemo(()=>{if(a!=null)return GM(GM({},s),{},{type:a})},[s,a]);return C.useLayoutEffect(()=>{u!=null&&(n.current===null?e(bde(u)):n.current!==u&&e(_de({prev:n.current,next:u})),n.current=u)},[u,e]),C.useLayoutEffect(()=>()=>{n.current&&(e(wde(n.current)),n.current=null)},[e]),null}var xhe=t=>{var{xAxisId:e,className:n}=t,i=He(i6),r=rr(),s="xAxis",a=He(R=>sU(R,s,e,r)),u=He(R=>oae(R,e)),f=He(R=>fae(R,e)),d=He(R=>Tz(R,e));if(u==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:p,ticks:m,scale:y}=t,b=tS(t,fhe),{id:S,scale:N}=d,E=tS(d,hhe);return C.createElement(KE,eS({},b,E,{x:f.x,y:f.y,width:u.width,height:u.height,className:Lt("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:a,axisType:s}))},bhe={allowDataOverflow:In.allowDataOverflow,allowDecimals:In.allowDecimals,allowDuplicatedCategory:In.allowDuplicatedCategory,angle:In.angle,axisLine:ic.axisLine,height:In.height,hide:!1,includeHidden:In.includeHidden,interval:In.interval,label:!1,minTickGap:In.minTickGap,mirror:In.mirror,orientation:In.orientation,padding:In.padding,reversed:In.reversed,scale:In.scale,tick:In.tick,tickCount:In.tickCount,tickLine:ic.tickLine,tickSize:ic.tickSize,type:In.type,xAxisId:0},_he=t=>{var e=jr(t,bhe);return C.createElement(C.Fragment,null,C.createElement(vhe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),C.createElement(xhe,e))},gV=C.memo(_he,mV);gV.displayName="XAxis";var whe=["type"],She=["dangerouslySetInnerHTML","ticks","scale"],The=["id","scale"];function nS(){return nS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nS.apply(null,arguments)}function KM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function YM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KM(Object(n),!0).forEach(function(i){Ehe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ehe(t,e,n){return(e=Nhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nhe(t){var e=Che(t,"string");return typeof e=="symbol"?e:e+""}function Che(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iS(t,e){if(t==null)return{};var n,i,r=Ahe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ahe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function khe(t){var e=Ln(),n=C.useRef(null),i=BT(),{type:r}=t,s=iS(t,whe),a=xv(i,"yAxis",r),u=C.useMemo(()=>{if(a!=null)return YM(YM({},s),{},{type:a})},[a,s]);return C.useLayoutEffect(()=>{u!=null&&(n.current===null?e(Sde(u)):n.current!==u&&e(Tde({prev:n.current,next:u})),n.current=u)},[u,e]),C.useLayoutEffect(()=>()=>{n.current&&(e(Ede(n.current)),n.current=null)},[e]),null}function Ihe(t){var{yAxisId:e,className:n,width:i,label:r}=t,s=C.useRef(null),a=C.useRef(null),u=He(i6),f=rr(),d=Ln(),p="yAxis",m=He(P=>mae(P,e)),y=He(P=>pae(P,e)),b=He(P=>sU(P,p,e,f)),S=He(P=>Ez(P,e));if(C.useLayoutEffect(()=>{if(!(i!=="auto"||!m||qE(r)||C.isValidElement(r)||S==null)){var P=s.current;if(P){var I=P.getCalculatedWidth();Math.round(m.width)!==Math.round(I)&&d(Nde({id:e,width:I}))}}},[b,m,d,r,e,i,S]),m==null||y==null||S==null)return null;var{dangerouslySetInnerHTML:N,ticks:E,scale:R}=t,U=iS(t,She),{id:j,scale:B}=S,O=iS(S,The);return C.createElement(KE,nS({},U,O,{ref:s,labelRef:a,x:y.x,y:y.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:m.width,height:m.height,className:Lt("recharts-".concat(p," ").concat(p),n),viewBox:u,ticks:b,axisType:p}))}var Rhe={allowDataOverflow:Rn.allowDataOverflow,allowDecimals:Rn.allowDecimals,allowDuplicatedCategory:Rn.allowDuplicatedCategory,angle:Rn.angle,axisLine:ic.axisLine,hide:!1,includeHidden:Rn.includeHidden,interval:Rn.interval,label:!1,minTickGap:Rn.minTickGap,mirror:Rn.mirror,orientation:Rn.orientation,padding:Rn.padding,reversed:Rn.reversed,scale:Rn.scale,tick:Rn.tick,tickCount:Rn.tickCount,tickLine:ic.tickLine,tickSize:ic.tickSize,type:Rn.type,width:Rn.width,yAxisId:0},jhe=t=>{var e=jr(t,Rhe);return C.createElement(C.Fragment,null,C.createElement(khe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),C.createElement(Ihe,e))},yV=C.memo(jhe,mV);yV.displayName="YAxis";var Phe=(t,e)=>e,JE=fe([Phe,Ht,wz,Vn,SU,Xo,kle,ri],Ole),QE=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},vV=Nr("mouseClick"),xV=np();xV.startListening({actionCreator:vV,effect:(t,e)=>{var n=t.payload,i=JE(e.getState(),QE(n));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(Aae({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var rS=Nr("mouseMove"),bV=np(),xg=null;bV.startListening({actionCreator:rS,effect:(t,e)=>{var n=t.payload;xg!==null&&cancelAnimationFrame(xg);var i=QE(n);xg=requestAnimationFrame(()=>{var r=e.getState(),s=ME(r,r.tooltip.settings.shared);if(s==="axis"){var a=JE(r,i);(a==null?void 0:a.activeIndex)!=null?e.dispatch(pU({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(hU())}xg=null})}});function Mhe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var WM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},_V=zi({name:"rootProps",initialState:WM,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:WM.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Dhe=_V.reducer,{updateOptions:Ohe}=_V.actions,Lhe=null,zhe={updatePolarOptions:(t,e)=>e.payload},wV=zi({name:"polarOptions",initialState:Lhe,reducers:zhe}),{updatePolarOptions:S_e}=wV.actions,Uhe=wV.reducer,SV=Nr("keyDown"),TV=Nr("focus"),ZE=np();ZE.startListening({actionCreator:SV,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=DE(r,Nd(n),hp(n),mp(n)),u=a==null?-1:Number(a);if(!(!Number.isFinite(u)||u<0)){var f=Xo(n);if(s==="Enter"){var d=ry(n,"axis","hover",String(r.index));e.dispatch(Ww({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var p=xae(n),m=p==="left-to-right"?1:-1,y=s==="ArrowRight"?1:-1,b=u+y*m;if(!(f==null||b>=f.length||b<0)){var S=ry(n,"axis","hover",String(b));e.dispatch(Ww({active:!0,activeIndex:b.toString(),activeCoordinate:S}))}}}}}});ZE.startListening({actionCreator:TV,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var s="0",a=ry(n,"axis","hover",String(s));e.dispatch(Ww({active:!0,activeIndex:s,activeCoordinate:a}))}}}});var xr=Nr("externalEvent"),EV=np(),j_=new Map;EV.startListening({actionCreator:xr,effect:(t,e)=>{var{handler:n,reactEvent:i}=t.payload;if(n!=null){i.persist();var r=i.type,s=j_.get(r);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var u=e.getState(),f={activeCoordinate:ple(u),activeDataKey:fle(u),activeIndex:Uh(u),activeLabel:NU(u),activeTooltipIndex:Uh(u),isTooltipActive:mle(u)};n(f,i)}finally{j_.delete(r)}});j_.set(r,a)}}});var Vhe=fe([Td],t=>t.tooltipItemPayloads),Fhe=fe([Vhe,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var i=t.find(s=>s.settings.graphicalItemId===n);if(i!=null){var{getPosition:r}=i;if(r!=null)return r(e)}}}),NV=Nr("touchMove"),CV=np();CV.startListening({actionCreator:NV,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=ME(i,i.tooltip.settings.shared);if(r==="axis"){var s=n.touches[0];if(s==null)return;var a=JE(i,QE({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(pU({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(r==="item"){var u,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||!d.getAttribute)return;var p=d.getAttribute(ste),m=(u=d.getAttribute(ote))!==null&&u!==void 0?u:void 0,y=Ed(i).find(N=>N.id===m);if(p==null||y==null||m==null)return;var{dataKey:b}=y,S=Fhe(i,p,m);e.dispatch(Cae({activeDataKey:b,activeIndex:p,activeCoordinate:S,activeGraphicalItemId:m}))}}}});var Hhe=NL({brush:Ode,cartesianAxis:Cde,chartData:pce,errorBars:mfe,graphicalItems:rde,layout:Bee,legend:tne,options:cce,polarAxis:que,polarOptions:Uhe,referenceElements:Vde,rootProps:Dhe,tooltip:kae,zIndex:Xle}),Bhe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return pee({reducer:Hhe,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([xV.middleware,bV.middleware,ZE.middleware,EV.middleware,CV.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(FL({type:"raf"}))},devTools:{serialize:{replacer:Mhe},name:"recharts-".concat(n)}})};function $he(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=rr(),s=C.useRef(null);if(r)return n;s.current==null&&(s.current=Bhe(e,i));var a=MT;return C.createElement(Pfe,{context:a,store:s.current},n)}function qhe(t){var{layout:e,margin:n}=t,i=Ln(),r=rr();return C.useEffect(()=>{r||(i(Vee(e)),i(Uee(n)))},[i,r,e,n]),null}var Ghe=C.memo(qhe,YE);function Khe(t){var e=Ln();return C.useEffect(()=>{e(Ohe(t))},[e,t]),null}function XM(t){var{zIndex:e,isPanorama:n}=t,i=C.useRef(null),r=Ln();return C.useLayoutEffect(()=>(i.current&&r(Yle({zIndex:e,element:i.current,isPanorama:n})),()=>{r(Wle({zIndex:e,isPanorama:n}))}),[r,e,n]),C.createElement("g",{tabIndex:-1,ref:i})}function JM(t){var{children:e,isPanorama:n}=t,i=He(zle);if(!i||i.length===0)return e;var r=i.filter(a=>a<0),s=i.filter(a=>a>0);return C.createElement(C.Fragment,null,r.map(a=>C.createElement(XM,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>C.createElement(XM,{key:a,zIndex:a,isPanorama:n})))}var Yhe=["children"];function Whe(t,e){if(t==null)return{};var n,i,r=Xhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xhe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ly(){return ly=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ly.apply(null,arguments)}var Jhe={width:"100%",height:"100%",display:"block"},Qhe=C.forwardRef((t,e)=>{var n=Lte(),i=zte(),r=m6();if(!sl(n)||!sl(i))return null;var{children:s,otherAttributes:a,title:u,desc:f}=t,d,p;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=r?0:void 0,typeof a.role=="string"?p=a.role:p=r?"application":void 0),C.createElement(K3,ly({},a,{title:u,desc:f,role:p,tabIndex:d,width:n,height:i,style:Jhe,ref:e}),s)}),Zhe=t=>{var{children:e}=t,n=He(ov);if(!n)return null;var{width:i,height:r,y:s,x:a}=n;return C.createElement(K3,{width:i,height:r,x:a,y:s},e)},QM=C.forwardRef((t,e)=>{var{children:n}=t,i=Whe(t,Yhe),r=rr();return r?C.createElement(Zhe,null,C.createElement(JM,{isPanorama:!0},n)):C.createElement(Qhe,ly({ref:e},i),C.createElement(JM,{isPanorama:!1},n))});function epe(){var t=Ln(),[e,n]=C.useState(null),i=He(rte);return C.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),s=r.width/e.offsetWidth;pt(s)&&s!==i&&t(Hee(s))}},[e,t,i]),n}function ZM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(n),!0).forEach(function(i){npe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function npe(t,e,n){return(e=ipe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ipe(t){var e=rpe(t,"string");return typeof e=="symbol"?e:e+""}function rpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xa.apply(null,arguments)}var spe=()=>(Sce(),null);function cy(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var ope=C.forwardRef((t,e)=>{var n,i,r=C.useRef(null),[s,a]=C.useState({containerWidth:cy((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:cy((i=t.style)===null||i===void 0?void 0:i.height)}),u=C.useCallback((d,p)=>{a(m=>{var y=Math.round(d),b=Math.round(p);return m.containerWidth===y&&m.containerHeight===b?m:{containerWidth:y,containerHeight:b}})},[]),f=C.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:p,height:m}=d.getBoundingClientRect();u(p,m);var y=S=>{var N=S[0];if(N!=null){var{width:E,height:R}=N.contentRect;u(E,R)}},b=new ResizeObserver(y);b.observe(d),r.current=b}},[e,u]);return C.useEffect(()=>()=>{var d=r.current;d!=null&&d.disconnect()},[u]),C.createElement(C.Fragment,null,C.createElement(rp,{width:s.containerWidth,height:s.containerHeight}),C.createElement("div",Xa({ref:f},t)))}),ape=C.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,s]=C.useState({containerWidth:cy(n),containerHeight:cy(i)}),a=C.useCallback((f,d)=>{s(p=>{var m=Math.round(f),y=Math.round(d);return p.containerWidth===m&&p.containerHeight===y?p:{containerWidth:m,containerHeight:y}})},[]),u=C.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:d,height:p}=f.getBoundingClientRect();a(d,p)}},[e,a]);return C.createElement(C.Fragment,null,C.createElement(rp,{width:r.containerWidth,height:r.containerHeight}),C.createElement("div",Xa({ref:u},t)))}),lpe=C.forwardRef((t,e)=>{var{width:n,height:i}=t;return C.createElement(C.Fragment,null,C.createElement(rp,{width:n,height:i}),C.createElement("div",Xa({ref:e},t)))}),cpe=C.forwardRef((t,e)=>{var{width:n,height:i}=t;return typeof n=="string"||typeof i=="string"?C.createElement(ape,Xa({},t,{ref:e})):typeof n=="number"&&typeof i=="number"?C.createElement(lpe,Xa({},t,{width:n,height:i,ref:e})):C.createElement(C.Fragment,null,C.createElement(rp,{width:n,height:i}),C.createElement("div",Xa({ref:e},t)))});function upe(t){return t?ope:cpe}var dpe=C.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:s,onContextMenu:a,onDoubleClick:u,onMouseDown:f,onMouseEnter:d,onMouseLeave:p,onMouseMove:m,onMouseUp:y,onTouchEnd:b,onTouchMove:S,onTouchStart:N,style:E,width:R,responsive:U,dispatchTouchEvents:j=!0}=t,B=C.useRef(null),O=Ln(),[P,I]=C.useState(null),[A,M]=C.useState(null),H=epe(),F=FT(),D=(F==null?void 0:F.width)>0?F.width:R,z=(F==null?void 0:F.height)>0?F.height:r,$=C.useCallback(re=>{H(re),typeof e=="function"&&e(re),I(re),M(re),re!=null&&(B.current=re)},[H,e,I,M]),Y=C.useCallback(re=>{O(vV(re)),O(xr({handler:s,reactEvent:re}))},[O,s]),W=C.useCallback(re=>{O(rS(re)),O(xr({handler:d,reactEvent:re}))},[O,d]),X=C.useCallback(re=>{O(hU()),O(xr({handler:p,reactEvent:re}))},[O,p]),oe=C.useCallback(re=>{O(rS(re)),O(xr({handler:m,reactEvent:re}))},[O,m]),ve=C.useCallback(()=>{O(TV())},[O]),Ee=C.useCallback(re=>{O(SV(re.key))},[O]),K=C.useCallback(re=>{O(xr({handler:a,reactEvent:re}))},[O,a]),te=C.useCallback(re=>{O(xr({handler:u,reactEvent:re}))},[O,u]),ge=C.useCallback(re=>{O(xr({handler:f,reactEvent:re}))},[O,f]),Z=C.useCallback(re=>{O(xr({handler:y,reactEvent:re}))},[O,y]),he=C.useCallback(re=>{O(xr({handler:N,reactEvent:re}))},[O,N]),Ne=C.useCallback(re=>{j&&O(NV(re)),O(xr({handler:S,reactEvent:re}))},[O,j,S]),pe=C.useCallback(re=>{O(xr({handler:b,reactEvent:re}))},[O,b]),ue=upe(U);return C.createElement(MU.Provider,{value:P},C.createElement(mQ.Provider,{value:A},C.createElement(ue,{width:D??(E==null?void 0:E.width),height:z??(E==null?void 0:E.height),className:Lt("recharts-wrapper",i),style:tpe({position:"relative",cursor:"default",width:D,height:z},E),onClick:Y,onContextMenu:K,onDoubleClick:te,onFocus:ve,onKeyDown:Ee,onMouseDown:ge,onMouseEnter:W,onMouseLeave:X,onMouseMove:oe,onMouseUp:Z,onTouchEnd:pe,onTouchMove:Ne,onTouchStart:he,ref:$},C.createElement(spe,null),n)))}),fpe=["width","height","responsive","children","className","style","compact","title","desc"];function hpe(t,e){if(t==null)return{};var n,i,r=ppe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ppe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var mpe=C.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:s,className:a,style:u,compact:f,title:d,desc:p}=t,m=hpe(t,fpe),y=Xs(m);return f?C.createElement(C.Fragment,null,C.createElement(rp,{width:n,height:i}),C.createElement(QM,{otherAttributes:y,title:d,desc:p},s)):C.createElement(dpe,{className:a,style:u,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},C.createElement(QM,{otherAttributes:y,title:d,desc:p,ref:e},C.createElement(Hde,null,s)))});function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sS.apply(null,arguments)}var gpe={top:5,right:5,bottom:5,left:5},ype={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:gpe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vpe=C.forwardRef(function(e,n){var i,r=jr(e.categoricalChartProps,ype),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:d}=e,p={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return C.createElement($he,{preloadedState:{options:p},reduxStoreName:(i=d.id)!==null&&i!==void 0?i:s},C.createElement(Dde,{chartData:d.data}),C.createElement(Ghe,{layout:r.layout,margin:r.margin}),C.createElement(Khe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),C.createElement(mpe,sS({},r,{ref:n})))}),xpe=["axis"],bpe=C.forwardRef((t,e)=>C.createElement(vpe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xpe,tooltipPayloadSearcher:ace,categoricalChartProps:t,ref:e}));const eD={Novice:"text-life-muted border-life-muted",Adept:"text-life-normal border-life-normal",Expert:"text-purple-400 border-purple-400",Master:"text-life-gold border-life-gold",Grandmaster:"text-life-diamond border-life-diamond"},_pe=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Qt,{size:e})}},wpe=()=>{const{skillState:t,skillDispatch:e}=Sn(),{dispatch:n}=De(),{skills:i,activeSkillId:r}=t,[s,a]=C.useState(!1),[u,f]=C.useState(!1),d=i.find(P=>P.id===r);if(!d)return null;const p=()=>{e.setActiveSkill(null)},m=()=>{e.addSkillXP(d.id,1)},y=()=>{n.setModal("confirmation",{title:"Forget Skill?",message:"Are you sure you want to remove this skill? All accrued XP and progress will be lost permanently.",confirmText:"Forget",isDangerous:!0,onConfirm:()=>{e.deleteSkill(d.id)}})},b=eD[d.rank]||eD.Novice,S=b.split(" ")[0],N=Math.min(100,d.currentXP/d.targetXP*100),E=new Date(d.createdAt),R=new Date,U=Math.max(1,Math.floor((R.getTime()-E.getTime())/(1e3*60*60*24))),j=new Date(d.lastPracticed),B=Math.floor((R.getTime()-j.getTime())/(1e3*60*60*24)),O=Array.from({length:Math.max(5,d.level)}).map((P,I)=>({level:I+1,xp:Math.floor(Math.pow(I+1,1.5)*100)}));return l.jsx("div",{onClick:p,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:P=>P.stopPropagation(),className:`
                    relative bg-life-paper w-full max-w-md rounded-2xl border shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-8 duration-500
                    ${d.isRusty?"border-orange-500/30":"border-zinc-800"}
                `,children:[d.isRusty&&l.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 opacity-10",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1' fill='#f97316'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:"relative p-6 pb-6 border-b border-zinc-800 overflow-hidden z-10 bg-life-black/50",children:[l.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-current opacity-5 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none ${S}`}),l.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[s?l.jsxs("button",{onClick:()=>a(!1),className:"flex items-center gap-1 text-life-muted hover:text-white text-xs font-bold uppercase tracking-widest",children:[l.jsx(My,{size:14})," Back"]}):l.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded border bg-life-black/50 text-[10px] font-black uppercase tracking-widest ${b}`,children:[l.jsx(Fy,{size:12}),d.rank]}),l.jsxs("div",{className:"flex items-center gap-2",children:[!s&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>f(!u),className:`w-8 h-8 flex items-center justify-center rounded-full transition-all ${u?"bg-life-gold text-black":"bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20"}`,children:l.jsx(_I,{size:16})}),l.jsx("button",{onClick:()=>a(!0),className:"w-8 h-8 flex items-center justify-center rounded-full bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20 transition-all",children:l.jsx(Lg,{size:16})})]}),l.jsx("button",{onClick:p,className:"w-8 h-8 flex items-center justify-center rounded-full bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20 transition-all",children:l.jsx(dt,{size:20})})]})]}),!s&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h2",{className:`text-2xl font-black text-life-text tracking-tight mb-2 ${d.isRusty?"opacity-80":""}`,children:d.title}),l.jsx("div",{className:"p-3 rounded-lg bg-black/40 border border-zinc-800/50",children:l.jsx("p",{className:"text-sm text-life-muted leading-relaxed",children:d.description||"No description provided."})})]})]}),l.jsx("div",{className:"overflow-y-auto p-6 space-y-6 relative z-10",children:s?l.jsx(B3,{onClose:()=>a(!1),initialData:d}):u?l.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-life-muted flex items-center gap-2",children:[l.jsx(_I,{size:14})," Progression Curve"]}),l.jsx("div",{className:"h-48 w-full bg-life-black rounded-xl border border-zinc-800 p-4",children:l.jsx(Mte,{width:"100%",height:"100%",children:l.jsxs(bpe,{data:O,children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"colorXp",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:"#fbbf24",stopOpacity:.3}),l.jsx("stop",{offset:"95%",stopColor:"#fbbf24",stopOpacity:0})]})}),l.jsx(gV,{dataKey:"level",stroke:"#525252",fontSize:10,tickLine:!1,axisLine:!1}),l.jsx(yV,{stroke:"#525252",fontSize:10,tickLine:!1,axisLine:!1,width:30}),l.jsx(Rce,{contentStyle:{backgroundColor:"#0a0a0a",border:"1px solid #27272a",borderRadius:"8px",fontSize:"12px"},itemStyle:{color:"#fbbf24"}}),l.jsx(pV,{type:"monotone",dataKey:"xp",stroke:"#fbbf24",strokeWidth:2,fillOpacity:1,fill:"url(#colorXp)"})]})})}),l.jsx("p",{className:"text-[10px] text-life-muted text-center",children:"Estimated XP required for future levels."})]}):l.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("span",{className:"text-4xl font-black font-mono leading-none",style:{color:N>=100?"#10b981":void 0},children:["LVL ",d.level]}),l.jsxs("span",{className:"text-xs font-mono text-life-muted mb-1",children:[l.jsx("span",{className:"text-life-text",children:d.currentXP})," / ",d.targetXP," XP"]})]}),l.jsxs("div",{className:"h-3 w-full bg-life-black rounded-full overflow-hidden border border-zinc-800 relative",children:[l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(90deg, transparent 95%, #000 95%)",backgroundSize:"10% 100%"}}),l.jsxs("div",{className:`h-full transition-all duration-1000 ease-out relative overflow-hidden ${d.isRusty?"grayscale":""}`,style:{width:`${N}%`},children:[l.jsx("div",{className:`absolute inset-0 opacity-80 ${S.replace("text-","bg-")} shadow-[0_0_15px_currentColor]`}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent w-full -translate-x-full animate-[shimmer_2s_infinite]"})]})]})]}),d.isRusty?l.jsxs("div",{className:"p-4 rounded-xl bg-orange-900/10 border border-orange-500/30 flex items-center gap-4 animate-pulse",children:[l.jsx("div",{className:"p-2 bg-orange-500/10 rounded-full text-orange-500",children:l.jsx(Bo,{size:24})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-orange-400",children:"Skill Rusting"}),l.jsxs("p",{className:"text-[10px] text-orange-300/70",children:["Inactive for ",B," days. XP gain is paused."]})]}),l.jsx("button",{onClick:m,className:"ml-auto px-3 py-1.5 rounded bg-orange-500 text-black text-xs font-bold uppercase tracking-wider hover:bg-orange-400 transition-colors shadow-lg shadow-orange-500/20",children:"Polish"})]}):l.jsxs("div",{className:"flex items-center gap-2 text-life-easy opacity-80 p-3 rounded-lg bg-life-easy/5 border border-life-easy/10",children:[l.jsx(bt,{size:16}),l.jsxs("span",{className:"text-xs font-bold uppercase",children:["Active  ",B,"d since practice"]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-3",children:"DNA Source (Parent Stats)"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:d.relatedStats.map(P=>l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-life-black border border-zinc-800",children:[l.jsx("div",{style:{color:xt[P]},children:l.jsx(_pe,{stat:P,size:18})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[10px] font-bold text-life-text leading-none",children:P}),l.jsx("span",{className:"text-[8px] text-life-muted leading-none mt-0.5",children:"Linked"})]})]},P))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-3 rounded-lg bg-life-black border border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted mb-1",children:[l.jsx(Jt,{size:12}),l.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Time Invested"})]}),l.jsxs("span",{className:"text-xs font-mono text-life-text",children:[U," Days"]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-life-black border border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted mb-1",children:[l.jsx(er,{size:12}),l.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Last Session"})]}),l.jsx("span",{className:"text-xs font-mono text-life-text",children:new Date(d.lastPracticed).toLocaleDateString()})]})]}),l.jsx("div",{className:"pt-4 border-t border-zinc-800",children:l.jsxs("button",{onClick:y,className:"w-full py-3 flex items-center justify-center gap-2 text-life-muted hover:text-life-hard hover:bg-life-hard/5 rounded-lg transition-colors text-xs font-bold uppercase tracking-widest",children:[l.jsx(ei,{size:14}),"Forget Skill"]})})]})})]})})},Spe=["S","M","T","W","T","F","S"],Tpe=()=>{const{habitState:t,habitDispatch:e}=Li(),{habits:n,activeHabitId:i}=t,r=n.find(E=>E.id===i);if(!r)return null;const s=mT(r.streak),a=xt[r.stat],u=m0(r.streak),f=r.streak-u,p=(()=>{const E=[],R=new Date;for(let U=29;U>=0;U--){const j=new Date;j.setDate(R.getDate()-U);const B=j.toISOString().split("T")[0],O=r.history.some(A=>A.startsWith(B)),P=U===0;let I="neutral";O?I="done":P&&(r.status==="completed"?I="done":r.status==="failed"?I="failed":I="pending"),E.push({date:j,status:I,isToday:P})}return E})(),m=r.history.length+(r.status==="completed"?1:0),y=new Date(r.createdAt),b=Math.max(1,Math.floor((new Date().getTime()-y.getTime())/(1e3*60*60*24))),S=Math.round(m/b*100),N=()=>{var E,R;switch(r.type){case"daily":return l.jsxs("div",{className:"flex items-center gap-2 text-life-text font-medium",children:[l.jsx($W,{size:14,className:"text-life-gold"}),l.jsx("span",{children:"Daily Protocol"})]});case"interval":return l.jsxs("div",{className:"flex items-center gap-2 text-life-text font-medium",children:[l.jsx(Qt,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["Every ",l.jsx("span",{className:"text-life-gold font-bold",children:r.intervalValue})," Days"]})]});case"specific_days":return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 text-life-text font-medium",children:[l.jsx(er,{size:14,className:"text-life-gold"}),l.jsx("span",{children:"Weekly Schedule"})]}),l.jsx("div",{className:"flex justify-between gap-1 bg-life-black p-1.5 rounded-lg border border-zinc-800",children:Spe.map((U,j)=>{var O;const B=(O=r.specificDays)==null?void 0:O.includes(j);return l.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center text-[10px] font-bold ${B?"bg-life-gold text-life-black":"text-life-muted/30"}`,children:U},j)})})]});case"custom":return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 text-life-text font-medium",children:[l.jsx(hW,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["The Matrix (",(E=r.pattern)==null?void 0:E.length," Day Loop)"]})]}),l.jsx("div",{className:"flex flex-wrap gap-0.5",children:(R=r.pattern)==null?void 0:R.split("").map((U,j)=>l.jsx("div",{className:`w-2 h-4 rounded-sm ${U==="1"?"bg-life-gold":"bg-life-muted/20"}`,title:U==="1"?"Active":"Rest"},j))})]});default:return null}};return l.jsx("div",{onClick:()=>e.setActiveHabit(null),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:E=>E.stopPropagation(),className:"bg-life-paper w-full max-w-md rounded-2xl border border-zinc-800 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in slide-in-from-bottom-8 duration-500",children:[l.jsxs("div",{className:"relative p-6 border-b border-zinc-800 overflow-hidden bg-life-black",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-current opacity-5 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{color:a}}),l.jsx("button",{onClick:()=>e.setActiveHabit(null),className:"absolute top-4 right-4 text-life-muted hover:text-white transition-colors z-10",children:l.jsx(dt,{size:20})}),l.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"text-4xl font-black text-life-gold leading-none mb-1 drop-shadow-lg font-mono",children:r.streak}),l.jsxs("div",{className:"text-[9px] uppercase font-bold text-life-muted tracking-widest flex items-center gap-1",children:[l.jsx(hi,{size:10,className:"text-life-gold",fill:"currentColor"})," Streak"]})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight mb-1 truncate",children:r.title}),l.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded border text-[9px] font-black uppercase tracking-widest ${s.phaseColor} bg-black/50`,children:["Phase: ",s.phase]})]})]})]}),l.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-life-black/40 border border-zinc-800 rounded-xl p-4",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-3 flex items-center gap-2",children:[l.jsx(Jt,{size:12})," Execution Parameters"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"text-xs",children:N()}),l.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-zinc-800",children:[r.scheduledTime?l.jsxs("div",{className:"flex items-center gap-2 bg-life-gold/10 px-3 py-1.5 rounded border border-life-gold/20 text-xs font-mono font-bold text-life-gold",children:[l.jsx(dc,{size:12}),r.scheduledTime]}):l.jsx("div",{className:"text-xs text-life-muted italic",children:"No set time"}),r.isTimed&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-life-muted",children:[l.jsx(_X,{size:12}),l.jsxs("span",{children:["Duration: ",r.durationMinutes,"m"]})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[l.jsx(Vy,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Fibonacci Sequence"})]}),l.jsxs("span",{className:"text-[9px] font-mono text-life-gold",children:[s.progress,"% to Next Checkpoint"]})]}),l.jsxs("div",{className:"relative py-4",children:[l.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-life-muted/10 -translate-y-1/2 z-0"}),l.jsx("div",{className:"flex items-center gap-4 relative z-10 overflow-x-auto no-scrollbar pb-4 px-2 snap-x",children:ui.map(E=>{const R=r.streak>=E,U=!R&&r.streak<E&&r.streak>=(ui[ui.indexOf(E)-1]||0),j=E===s.prevCheckpoint;return l.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[50px] snap-center shrink-0",children:[l.jsxs("div",{className:`
                                                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all relative
                                                    ${R?"bg-life-gold border-life-gold text-life-black shadow-[0_0_10px_rgba(251,191,36,0.3)]":U?"bg-life-black border-life-gold text-life-gold animate-pulse scale-110 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"bg-life-black border-zinc-800 text-life-muted/30"}
                                                `,children:[R?l.jsx(Ws,{size:14}):U?l.jsx(Sc,{size:14}):l.jsx(hd,{size:12}),j&&l.jsx("div",{className:"absolute -bottom-2 -right-2 bg-life-black border border-zinc-800 rounded-full p-0.5",title:"Safety Net",children:l.jsx(is,{size:10,className:"text-life-text"})})]}),l.jsx("span",{className:`text-[10px] font-mono font-bold ${R||U?"text-life-text":"text-life-muted/30"}`,children:E})]},E)})})]}),l.jsxs("div",{className:"bg-life-black rounded-lg p-3 border border-zinc-800 flex items-start gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-hard/50"}),l.jsx(Bo,{size:16,className:"text-life-hard shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-life-muted",children:"Failure Consequence"}),l.jsxs("span",{className:"text-[10px] font-black text-life-hard uppercase",children:["Streak -",f]})]}),l.jsxs("div",{className:"text-xs text-life-text",children:["If you miss today, your streak will fall to ",l.jsx("span",{className:"font-mono font-bold text-life-gold",children:u}),"."]}),l.jsxs("div",{className:"text-[9px] text-life-muted/50 mt-1",children:["Reaching ",l.jsx("span",{className:"text-life-text",children:s.nextCheckpoint})," will secure your next safety net."]})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[l.jsx(Qt,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"30-Day Consistency"})]}),l.jsxs("span",{className:"text-[10px] font-mono text-life-text",children:[S,"%"]})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((E,R)=>l.jsx("div",{className:`
                                        aspect-square rounded flex items-center justify-center text-[9px] font-mono
                                        ${E.status==="done"?"bg-life-easy text-life-black":E.status==="failed"?"bg-life-hard/20 text-life-hard border border-life-hard/30":E.isToday?"bg-life-gold/20 text-life-gold border border-life-gold/30 animate-pulse":"bg-life-black border border-zinc-800 text-life-muted/20"}
                                    `,title:E.date.toLocaleDateString(),children:E.date.getDate()},R))})]})]})]})})},Epe=({onClose:t,initialData:e})=>{const{taskDispatch:n}=Oi(),{skillState:i}=Sn(),{state:r}=De(),[s,a]=C.useState(""),[u,f]=C.useState(""),[d,p]=C.useState(Ge.EASY),[m,y]=C.useState(ee.DIS),[b,S]=C.useState(""),[N,E]=C.useState(""),[R,U]=C.useState(""),[j,B]=C.useState(!1),[O,P]=C.useState(0),[I,A]=C.useState([]),[M,H]=C.useState(""),[F,D]=C.useState(""),[z,$]=C.useState(!1);C.useEffect(()=>{e&&(a(e.title),f(e.description||""),p(e.difficulty),y(e.stat),S(e.skillId||""),E(e.deadline?new Date(e.deadline).toISOString().slice(0,16):""),U(e.scheduledTime?new Date(e.scheduledTime).toISOString().slice(0,16):""),B(e.isTimed||!1),P(e.durationMinutes||0),A(e.subtasks||[]),e.skillId&&W("skill"))},[e]);const[Y,W]=C.useState("stat"),X=K=>{if(K.preventDefault(),!s.trim())return;const te={title:s,description:u,difficulty:d,stat:m,skillId:Y==="skill"&&b||void 0,deadline:N||void 0,scheduledTime:R||void 0,isTimed:j,durationMinutes:j?O:0,subtasks:I};e?n.updateTask(e.id,te):(n.addTask(te),z&&R&&ST(s,u,R,j?O:60)),t()},oe=()=>{if(!M.trim())return;const K={id:`st_${Date.now()}`,title:M,isCompleted:!1};A([...I,K]),H("")},ve=K=>{A(I.filter(te=>te.id!==K))},Ee=({type:K})=>{switch(K){case ee.STR:return l.jsx(ir,{size:18});case ee.INT:return l.jsx(_n,{size:18});case ee.DIS:return l.jsx(bt,{size:18});case ee.HEA:return l.jsx(kr,{size:18});case ee.CRT:return l.jsx(pi,{size:18});case ee.SPR:return l.jsx(hi,{size:18});case ee.REL:return l.jsx(Rr,{size:18});case ee.FIN:return l.jsx(ii,{size:18});default:return l.jsx(Qt,{size:18})}};return l.jsxs("form",{onSubmit:X,className:"space-y-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Mission Objective"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:s,onChange:K=>a(K.target.value),placeholder:"e.g. Complete Project Alpha",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pr-12 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"}),l.jsx("button",{type:"button",onClick:()=>B(!j),className:`absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-md transition-colors ${j?"bg-life-gold text-life-black":"text-life-muted hover:bg-life-muted/10"}`,title:"Toggle Timer",children:l.jsx(Jt,{size:16})})]}),j&&l.jsx("div",{className:"mt-2 animate-in slide-in-from-top-2 fade-in",children:l.jsxs("div",{className:"flex items-center gap-2 bg-life-black border border-life-muted/20 rounded-lg p-2 w-fit",children:[l.jsx(Jt,{size:14,className:"text-life-gold"}),l.jsx("input",{type:"number",min:"1",value:O||"",onChange:K=>P(parseInt(K.target.value)||0),placeholder:"Min",className:"w-12 bg-transparent text-sm text-life-text focus:outline-none text-center font-mono"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase",children:"Mins"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(Ge).map(K=>l.jsx("button",{type:"button",onClick:()=>p(K),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===K?`${Wi[K]} ${Bh[K]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:K},K))})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(pd,{size:12})," Intel / Notes"]}),l.jsx("textarea",{rows:3,value:u,onChange:K=>f(K.target.value),placeholder:"Add details, links, or sub-objectives...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Ir,{size:12})," Tactical Steps"]}),l.jsxs("div",{className:"space-y-2",children:[I.map(K=>l.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text flex-1",children:K.title}),l.jsx("button",{type:"button",onClick:()=>ve(K.id),className:"text-life-muted hover:text-life-hard",children:l.jsx(ei,{size:12})})]},K.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:M,onChange:K=>H(K.target.value),onKeyDown:K=>K.key==="Enter"&&(K.preventDefault(),oe()),placeholder:"Add step...",className:"flex-1 bg-life-black border border-life-muted/30 rounded p-2 text-xs focus:outline-none focus:border-life-gold/50"}),l.jsx("button",{type:"button",onClick:oe,className:"p-2 bg-life-muted/10 rounded border border-life-muted/20 hover:bg-life-muted/20 text-life-muted hover:text-white",children:l.jsx(wn,{size:14})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Jt,{size:12})," Scheduled Start"]}),l.jsx("input",{type:"datetime-local",value:R,onChange:K=>U(K.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(er,{size:12})," Deadline"]}),l.jsx("input",{type:"datetime-local",value:N,onChange:K=>E(K.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]})]}),!e&&R&&l.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-life-black border border-life-muted/20",children:[l.jsx(gT,{size:16,className:z?"text-life-gold":"text-life-muted"}),l.jsx("span",{className:"text-xs text-life-text flex-1",children:"Sync to Google Calendar"}),l.jsx("button",{type:"button",onClick:()=>$(!z),className:`w-10 h-5 rounded-full relative transition-colors ${z?"bg-life-gold":"bg-life-muted/30"}`,children:l.jsx("div",{className:`absolute top-1 left-1 w-3 h-3 rounded-full bg-white transition-transform ${z?"translate-x-5":""}`})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source"}),l.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/20 p-1 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>W("stat"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Y==="stat"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Attribute Focus"}),l.jsx("button",{type:"button",onClick:()=>W("skill"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Y==="skill"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Skill Link"})]}),Y==="stat"?l.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ee).map(K=>l.jsxs("button",{type:"button",onClick:()=>y(K),className:`
                                            flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                            ${m===K?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                        `,style:{color:m===K?xt[K]:void 0},children:[l.jsx(Ee,{type:K}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:K})]},K))})}):l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),l.jsxs("select",{value:b,onChange:K=>{const te=K.target.value;S(te);const ge=i.skills.find(Z=>Z.id===te);ge&&ge.relatedStats.length>0&&y(ge.relatedStats[0])},className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:"",children:"Select a Skill..."}),i.skills.map(K=>l.jsxs("option",{value:K.id,children:[K.title," (Lvl ",K.level,")"]},K.id))]}),l.jsx(xi,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]}),b&&l.jsxs("div",{className:"p-3 bg-life-gold/10 border border-life-gold/20 rounded-lg flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/20 rounded-full text-life-gold",children:l.jsx(bt,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-[10px] text-life-gold font-bold uppercase tracking-wider",children:"Auto-Linked Attribute"}),l.jsx("p",{className:"text-xs text-life-text font-mono",children:m})]})]})]})]}),l.jsx("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg ${s?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}`,disabled:!s,children:e?"Update Mission":"Initiate Mission"})]})},Npe=["S","M","T","W","T","F","S"],Cpe=({habitType:t,setHabitType:e,selectedDays:n,toggleDay:i,intervalVal:r,setIntervalVal:s,pattern:a,setPattern:u,reps:f,setReps:d})=>{const p=b=>{const S=a.split("");S[b]=S[b]==="1"?"0":"1",u(S.join(""))},m=()=>u(b=>b+"1"),y=()=>{a.length>1&&u(b=>b.slice(0,-1))};return l.jsxs("div",{className:"p-4 bg-life-black/40 rounded-xl border border-life-muted/10 space-y-4",children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Habit Taxonomy"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"daily",label:"Daily",icon:l.jsx(Jt,{size:14})},{id:"specific_days",label:"Specific Days",icon:l.jsx(er,{size:14})},{id:"interval",label:"Interval",icon:l.jsx(Tr,{size:14})},{id:"custom",label:"The Matrix",icon:l.jsx(nW,{size:14})}].map(b=>l.jsxs("button",{type:"button",onClick:()=>e(b.id),className:`
                            flex items-center justify-center gap-2 py-3 rounded-lg border text-xs font-bold uppercase tracking-wider transition-all
                            ${t===b.id?"bg-life-gold/10 border-life-gold text-life-gold":"bg-life-black border-life-muted/20 text-life-muted hover:border-life-muted/50"}
                        `,children:[b.icon," ",b.label]},b.id))}),t==="specific_days"&&l.jsx("div",{className:"flex justify-between gap-1 pt-2",children:Npe.map((b,S)=>l.jsx("button",{type:"button",onClick:()=>i(S),className:`w-10 h-10 rounded-lg border flex items-center justify-center text-sm font-bold transition-all ${n.includes(S)?"bg-life-easy border-life-easy text-life-black":"border-life-muted/30 text-life-muted hover:bg-life-muted/10"}`,children:b},S))}),t==="interval"&&l.jsxs("div",{className:"pt-2 flex items-center gap-4",children:[l.jsx("span",{className:"text-sm text-life-muted",children:"Every"}),l.jsx("input",{type:"number",min:"2",max:"365",value:r,onChange:b=>s(parseInt(b.target.value)||2),className:"w-20 bg-life-black border border-life-muted/50 rounded-lg p-2 text-center text-life-text font-mono font-bold focus:border-life-gold focus:outline-none"}),l.jsx("span",{className:"text-sm text-life-muted",children:"Days"})]}),t==="custom"&&l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("p",{className:"text-[10px] text-life-muted",children:"The Matrix Pattern"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:y,className:"w-6 h-6 flex items-center justify-center rounded border border-life-muted/30 text-life-muted hover:text-white hover:border-life-muted/50 transition-all",children:l.jsx(uw,{size:12})}),l.jsxs("span",{className:"text-[10px] font-mono text-life-gold min-w-[24px] text-center",children:[a.length,"d"]}),l.jsx("button",{type:"button",onClick:m,className:"w-6 h-6 flex items-center justify-center rounded border border-life-muted/30 text-life-muted hover:text-white hover:border-life-muted/50 transition-all",children:l.jsx(wn,{size:12})}),l.jsx("div",{className:"w-px h-3 bg-life-muted/20 mx-1"}),l.jsxs("button",{type:"button",onClick:()=>u(a.includes("0")?"11111111111111":"00000000000000"),className:"text-[10px] text-life-gold hover:underline flex items-center gap-1",children:[l.jsx(bT,{size:10})," Reset"]})]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:a.split("").map((b,S)=>l.jsx("button",{type:"button",onClick:()=>p(S),className:`w-6 h-8 rounded border text-[9px] font-mono flex items-center justify-center transition-all ${b==="1"?"bg-life-gold border-life-gold text-life-black":"bg-life-black border-life-muted/20 text-life-muted/30 hover:bg-life-muted/10"}`,title:b==="1"?"Active Day":"Rest Day",children:b},S))})]})]})},Ape=({onClose:t,initialData:e})=>{const{habitDispatch:n}=Li(),{skillState:i}=Sn(),{state:r}=De(),[s,a]=C.useState(""),[u,f]=C.useState(""),[d,p]=C.useState(Ge.EASY),[m,y]=C.useState(ee.DIS),[b,S]=C.useState(""),[N,E]=C.useState(""),[R,U]=C.useState("daily"),[j,B]=C.useState([1,2,3,4,5]),[O,P]=C.useState(2),[I,A]=C.useState("1010101"),[M,H]=C.useState(1),[F,D]=C.useState(!1),[z,$]=C.useState(0),[Y,W]=C.useState(""),[X,oe]=C.useState([]),[ve,Ee]=C.useState("");C.useEffect(()=>{e&&(a(e.title),f(e.description||""),p(e.difficulty),y(e.stat),S(e.skillId||""),E(e.categoryId||""),U(e.type),B(e.specificDays||[]),H(e.dailyTarget||1),D(e.isTimed||!1),$(e.durationMinutes||0),oe(e.subtasks||[]),e.skillId&&te("skill"))},[e]);const[K,te]=C.useState("stat"),ge=ue=>{if(ue.preventDefault(),!s.trim())return;const re={title:s,description:u,difficulty:d,stat:m,skillId:K==="skill"&&b||void 0,categoryId:N||void 0,type:R,specificDays:R==="specific_days"?j:void 0,dailyTarget:M,isTimed:F,durationMinutes:F?z:0,subtasks:X};e?n.updateHabit(e.id,re):n.addHabit(re),t()},Z=ue=>{j.includes(ue)?B(j.filter(re=>re!==ue)):B([...j,ue].sort())},he=()=>{ve.trim()&&(oe([...X,{id:`st_${Date.now()}`,title:ve}]),Ee(""))},Ne=ue=>{oe(X.filter(re=>re.id!==ue))},pe=({type:ue})=>{switch(ue){case ee.STR:return l.jsx(ir,{size:18});case ee.INT:return l.jsx(_n,{size:18});case ee.DIS:return l.jsx(bt,{size:18});case ee.HEA:return l.jsx(kr,{size:18});case ee.CRT:return l.jsx(pi,{size:18});case ee.SPR:return l.jsx(hi,{size:18});case ee.REL:return l.jsx(Rr,{size:18});case ee.FIN:return l.jsx(ii,{size:18});default:return l.jsx(Qt,{size:18})}};return l.jsxs("form",{onSubmit:ge,className:"space-y-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Protocol Name"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:s,onChange:ue=>a(ue.target.value),placeholder:"e.g. Morning Meditation",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pr-12 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"}),l.jsx("button",{type:"button",onClick:()=>D(!F),className:`absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-md transition-colors ${F?"bg-life-gold text-life-black":"text-life-muted hover:bg-life-muted/10"}`,title:"Toggle Timer",children:l.jsx(Jt,{size:16})})]}),F&&l.jsx("div",{className:"mt-2 animate-in slide-in-from-top-2 fade-in",children:l.jsxs("div",{className:"flex items-center gap-2 bg-life-black border border-life-muted/20 rounded-lg p-2 w-fit",children:[l.jsx(Jt,{size:14,className:"text-life-gold"}),l.jsx("input",{type:"number",min:"1",value:z||"",onChange:ue=>$(parseInt(ue.target.value)||0),placeholder:"Min",className:"w-12 bg-transparent text-sm text-life-text focus:outline-none text-center font-mono"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase",children:"Mins"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Description"}),l.jsx("textarea",{value:u,onChange:ue=>f(ue.target.value),placeholder:"Why is this protocol important?",rows:2,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Difficulty"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(Ge).map(ue=>l.jsx("button",{type:"button",onClick:()=>p(ue),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===ue?`${Wi[ue]} ${Bh[ue]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:ue},ue))})]})]}),l.jsx(Cpe,{habitType:R,setHabitType:U,selectedDays:j,toggleDay:Z,intervalVal:O,setIntervalVal:P,pattern:I,setPattern:A,reps:M,setReps:H}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(dc,{size:12})," Daily Reminder"]}),l.jsx("input",{type:"time",value:Y,onChange:ue=>W(ue.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Tr,{size:12})," Checklist (Optional)"]}),l.jsxs("div",{className:"space-y-2",children:[X.map(ue=>l.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text flex-1",children:ue.title}),l.jsx("button",{type:"button",onClick:()=>Ne(ue.id),className:"text-life-muted hover:text-life-hard",children:l.jsx(ei,{size:12})})]},ue.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:ve,onChange:ue=>Ee(ue.target.value),onKeyDown:ue=>ue.key==="Enter"&&(ue.preventDefault(),he()),placeholder:"Add step...",className:"flex-1 bg-life-black border border-life-muted/30 rounded p-2 text-xs focus:outline-none focus:border-life-gold/50"}),l.jsx("button",{type:"button",onClick:he,className:"p-2 bg-life-muted/10 rounded border border-life-muted/20 hover:bg-life-muted/20 text-life-muted hover:text-white",children:l.jsx(wn,{size:14})})]})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source"}),l.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/20 p-1 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>te("stat"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${K==="stat"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Attribute Focus"}),l.jsx("button",{type:"button",onClick:()=>te("skill"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${K==="skill"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Skill Link"})]}),K==="stat"?l.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ee).map(ue=>l.jsxs("button",{type:"button",onClick:()=>y(ue),className:`
                                        flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                        ${m===ue?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                    `,style:{color:m===ue?xt[ue]:void 0},children:[l.jsx(pe,{type:ue}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:ue})]},ue))})}):l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),l.jsxs("select",{value:b,onChange:ue=>{const re=ue.target.value;S(re);const Re=i.skills.find($e=>$e.id===re);Re&&Re.relatedStats.length>0&&y(Re.relatedStats[0])},className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:"",children:"Select a Skill..."}),i.skills.map(ue=>l.jsxs("option",{value:ue.id,children:[ue.title," (Lvl ",ue.level,")"]},ue.id))]}),l.jsx(xi,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]}),b&&l.jsxs("div",{className:"p-3 bg-life-gold/10 border border-life-gold/20 rounded-lg flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/20 rounded-full text-life-gold",children:l.jsx(bt,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-[10px] text-life-gold font-bold uppercase tracking-wider",children:"Auto-Linked Attribute"}),l.jsx("p",{className:"text-xs text-life-text font-mono",children:m})]})]})]})]}),l.jsx("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg ${s?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}`,disabled:!s,children:e?"Update Protocol":"Initialize Protocol"})]})},kpe=({step:t,onSave:e,onClose:n})=>{const[i,r]=C.useState(t.title),[s,a]=C.useState(t.isTimed||!1),[u,f]=C.useState(t.durationMinutes||0),[d,p]=C.useState(t.difficulty),[m,y]=C.useState(t.notes||""),[b,S]=C.useState(t.subtasks||[]),[N,E]=C.useState(""),[R,U]=C.useState(t.scheduledTime||""),[j,B]=C.useState(t.deadline||""),O=()=>{e({...t,title:i,isTimed:s,durationMinutes:s?u:0,difficulty:d,notes:m,subtasks:b,scheduledTime:R,deadline:j})},P=()=>{N.trim()&&(S([...b,{id:`st_${Date.now()}`,title:N,isCompleted:!1}]),E(""))},I=A=>{S(b.filter(M=>M.id!==A))};return l.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("button",{type:"button",onClick:n,className:"p-2 bg-life-black border border-life-muted/20 rounded-lg text-life-muted hover:text-white transition-colors",children:l.jsx(My,{size:16})}),l.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-widest",children:"Step Details"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Step Objective"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:i,onChange:A=>r(A.target.value),placeholder:"e.g. Hack the mainframe",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pr-12 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"}),l.jsx("button",{type:"button",onClick:()=>a(!s),className:`absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-md transition-colors ${s?"bg-life-gold text-life-black":"text-life-muted hover:bg-life-muted/10"}`,title:"Toggle Timer",children:l.jsx(Jt,{size:16})})]}),s&&l.jsx("div",{className:"mt-2 animate-in slide-in-from-top-2 fade-in",children:l.jsxs("div",{className:"flex items-center gap-2 bg-life-black border border-life-muted/20 rounded-lg p-2 w-fit",children:[l.jsx(Jt,{size:14,className:"text-life-gold"}),l.jsx("input",{type:"number",min:"1",value:u||"",onChange:A=>f(parseInt(A.target.value)||0),placeholder:"Min",className:"w-12 bg-transparent text-sm text-life-text focus:outline-none text-center font-mono"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase",children:"Mins"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level (Overrides Raid)"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(Ge).map(A=>l.jsx("button",{type:"button",onClick:()=>p(d===A?void 0:A),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===A?`${Wi[A]} ${Bh[A]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:A},A))})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(pd,{size:12})," Intel / Notes"]}),l.jsx("textarea",{rows:3,value:m,onChange:A=>y(A.target.value),placeholder:"Add details, links, or sub-objectives...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Ir,{size:12})," Tactical Steps"]}),l.jsxs("div",{className:"space-y-2",children:[b.map(A=>l.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text flex-1",children:A.title}),l.jsx("button",{type:"button",onClick:()=>I(A.id),className:"text-life-muted hover:text-life-hard",children:l.jsx(ei,{size:12})})]},A.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:N,onChange:A=>E(A.target.value),onKeyDown:A=>A.key==="Enter"&&(A.preventDefault(),P()),placeholder:"Add step...",className:"flex-1 bg-life-black border border-life-muted/30 rounded p-2 text-xs focus:outline-none focus:border-life-gold/50"}),l.jsx("button",{type:"button",onClick:P,className:"p-2 bg-life-muted/10 rounded border border-life-muted/20 hover:bg-life-muted/20 text-life-muted hover:text-white",children:l.jsx(wn,{size:14})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Jt,{size:12})," Scheduled Start"]}),l.jsx("input",{type:"datetime-local",value:R,onChange:A=>U(A.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(er,{size:12})," Deadline"]}),l.jsx("input",{type:"datetime-local",value:j,onChange:A=>B(A.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]})]}),l.jsx("button",{type:"button",onClick:O,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20",children:"Save Step Details"})]})},tD=t=>`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Ipe=({onClose:t,initialData:e})=>{const{raidDispatch:n}=ls(),{skillState:i}=Sn(),{state:r}=De(),[s,a]=C.useState(""),[u,f]=C.useState(""),[d,p]=C.useState(Ge.EASY),[m,y]=C.useState(ee.DIS),[b,S]=C.useState(""),[N,E]=C.useState([]),[R,U]=C.useState(null);C.useEffect(()=>{e?(a(e.title),f(e.description||""),p(e.difficulty),y(e.stats[0]||ee.DIS),S(e.skillId||""),E(e.steps.map(D=>({id:D.id,title:D.title,isLocked:D.isLocked||!1,notes:D.notes||"",subtasks:D.subtasks||[],reminders:D.reminders||[],difficulty:D.difficulty,stat:D.stat,scheduledTime:D.scheduledTime,deadline:D.deadline,isTimed:D.isTimed,durationMinutes:D.durationMinutes}))),e.skillId&&B("skill")):E([{id:tD("rs"),title:"",isLocked:!1,notes:"",subtasks:[],reminders:[]}])},[e]);const[j,B]=C.useState("stat"),O=D=>{if(D.preventDefault(),!s.trim())return;const z=N.map($=>({id:$.id,title:$.title,isCompleted:!1,isLocked:$.isLocked||!1,notes:$.notes,subtasks:$.subtasks,reminders:$.reminders,difficulty:$.difficulty||d,stat:m,scheduledTime:$.scheduledTime,deadline:$.deadline,isTimed:$.isTimed,durationMinutes:$.durationMinutes}));if(e){const $=z.map(Y=>{const W=e.steps.find(X=>X.id===Y.id);return W?{...Y,isCompleted:W.isCompleted}:Y});n.updateRaid(e.id,{title:s,description:u,difficulty:d,stats:[m],skillId:j==="skill"&&b||void 0,steps:$})}else n.addRaid({title:s,description:u,difficulty:d,stats:[m],skillId:j==="skill"&&b||void 0,steps:z});t()},P=()=>{const D=tD("rs");E([...N,{id:D,title:"",isLocked:!1,notes:"",subtasks:[],reminders:[]}])},I=D=>{const z=[...N];z.splice(D,1),E(z)},A=(D,z,$)=>{const Y=[...N];Y[D]={...Y[D],[z]:$},E(Y)},M=D=>{U(D)},H=D=>{E(N.map(z=>z.id===D.id?D:z)),U(null)},F=({type:D})=>{switch(D){case ee.STR:return l.jsx(ir,{size:18});case ee.INT:return l.jsx(_n,{size:18});case ee.DIS:return l.jsx(bt,{size:18});case ee.HEA:return l.jsx(kr,{size:18});case ee.CRT:return l.jsx(pi,{size:18});case ee.SPR:return l.jsx(hi,{size:18});case ee.REL:return l.jsx(Rr,{size:18});case ee.FIN:return l.jsx(ii,{size:18});default:return l.jsx(Qt,{size:18})}};if(R){const D=N.find(z=>z.id===R);if(D)return l.jsx(kpe,{step:D,onSave:H,onClose:()=>U(null)})}return l.jsxs("form",{onSubmit:O,className:"space-y-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Operation Name"}),l.jsx("input",{type:"text",value:s,onChange:D=>a(D.target.value),placeholder:"e.g. Project Spartan",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(Ge).map(D=>l.jsx("button",{type:"button",onClick:()=>p(D),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===D?`${Wi[D]} ${Bh[D]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:D},D))})]})]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(ep,{size:12})," Briefing / Intel"]}),l.jsx("textarea",{rows:3,value:u,onChange:D=>f(D.target.value),placeholder:"Add mission briefing...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-1",children:[l.jsx(Tr,{size:12})," Operational Steps"]}),l.jsxs("button",{type:"button",onClick:P,className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white transition-colors uppercase font-bold",children:[l.jsx(wn,{size:12})," Add Step"]})]}),l.jsx("div",{className:"space-y-2",children:N.map((D,z)=>l.jsx("div",{className:"bg-life-black border border-life-muted/20 rounded-lg p-2 transition-all hover:border-life-muted/40",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex flex-col items-center justify-center w-5 h-5 rounded bg-life-muted/10 text-life-muted font-black text-[9px]",children:z+1}),l.jsx("div",{className:"flex-1 relative",children:l.jsx("input",{type:"text",value:D.title,onChange:$=>A(z,"title",$.target.value),onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),P())},placeholder:"Step Title...",className:"w-full bg-transparent border-none text-xs font-bold text-life-text focus:outline-none placeholder:text-life-muted/30",autoFocus:z===N.length-1&&N.length>1})}),l.jsx("button",{type:"button",onClick:()=>A(z,"isTimed",!D.isTimed),className:`p-1.5 rounded-md transition-colors ${D.isTimed?"text-life-gold":"text-life-muted hover:text-white"}`,title:"Toggle Timer",children:l.jsx(Jt,{size:14})}),l.jsx("button",{type:"button",onClick:()=>M(D.id),className:"p-1.5 rounded-md transition-colors text-life-muted hover:text-life-gold hover:bg-life-gold/10",title:"Step Details",children:l.jsx(pd,{size:14})}),l.jsx("button",{type:"button",onClick:()=>I(z),className:"text-life-muted hover:text-life-hard p-1.5",children:l.jsx(ei,{size:14})})]})},D.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source"}),l.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/20 p-1 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>B("stat"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${j==="stat"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Attribute Focus"}),l.jsx("button",{type:"button",onClick:()=>B("skill"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${j==="skill"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Skill Link"})]}),j==="stat"?l.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ee).map(D=>l.jsxs("button",{type:"button",onClick:()=>y(D),className:`
                                        flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                        ${m===D?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                    `,style:{color:m===D?xt[D]:void 0},children:[l.jsx(F,{type:D}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:D})]},D))})}):l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),l.jsxs("select",{value:b,onChange:D=>{const z=D.target.value;S(z);const $=i.skills.find(Y=>Y.id===z);$&&$.relatedStats.length>0&&y($.relatedStats[0])},className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:"",children:"Select a Skill..."}),i.skills.map(D=>l.jsxs("option",{value:D.id,children:[D.title," (Lvl ",D.level,")"]},D.id))]}),l.jsx(xi,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]}),b&&l.jsxs("div",{className:"p-3 bg-life-gold/10 border border-life-gold/20 rounded-lg flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/20 rounded-full text-life-gold",children:l.jsx(bt,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-[10px] text-life-gold font-bold uppercase tracking-wider",children:"Auto-Linked Attribute"}),l.jsx("p",{className:"text-xs text-life-text font-mono",children:m})]})]})]})]}),l.jsx("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg ${s?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}`,disabled:!s,children:e?"Update Operation":"Launch Operation"})]})};var $f={exports:{}},P_={},M_,nD;function Rpe(){if(nD)return M_;nD=1;function t(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return M_=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(i===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,i=0,r=0;r<this._errors.length;r++){var s=this._errors[r],a=s.message,u=(e[a]||0)+1;e[a]=u,u>=i&&(n=s,i=u)}return n},M_}var iD;function jpe(){return iD||(iD=1,(function(t){var e=Rpe();t.operation=function(n){var i=t.timeouts(n);return new e(i,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var i={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in n)i[r]=n[r];if(i.minTimeout>i.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<i.retries;a++)s.push(this.createTimeout(a,i));return n&&n.forever&&!s.length&&s.push(this.createTimeout(a,i)),s.sort(function(u,f){return u-f}),s},t.createTimeout=function(n,i){var r=i.randomize?Math.random()+1:1,s=Math.round(r*Math.max(i.minTimeout,1)*Math.pow(i.factor,n));return s=Math.min(s,i.maxTimeout),s},t.wrap=function(n,i,r){if(i instanceof Array&&(r=i,i=null),!r){r=[];for(var s in n)typeof n[s]=="function"&&r.push(s)}for(var a=0;a<r.length;a++){var u=r[a],f=n[u];n[u]=(function(p){var m=t.operation(i),y=Array.prototype.slice.call(arguments,1),b=y.pop();y.push(function(S){m.retry(S)||(S&&(arguments[0]=m.mainError()),b.apply(this,arguments))}),m.attempt(function(){p.apply(n,y)})}).bind(n,f),n[u].options=i}}})(P_)),P_}var D_,rD;function Ppe(){return rD||(rD=1,D_=jpe()),D_}var sD;function Mpe(){if(sD)return $f.exports;sD=1;const t=Ppe(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(u){super(),u instanceof Error?(this.originalError=u,{message:u}=u):(this.originalError=new Error(u),this.originalError.stack=this.stack),this.name="AbortError",this.message=u}}const i=(a,u,f)=>{const d=f.retries-(u-1);return a.attemptNumber=u,a.retriesLeft=d,a},r=a=>e.includes(a),s=(a,u)=>new Promise((f,d)=>{u={onFailedAttempt:()=>{},retries:10,...u};const p=t.operation(u);p.attempt(async m=>{try{f(await a(m))}catch(y){if(!(y instanceof Error)){d(new TypeError(`Non-error was thrown: "${y}". You should only throw errors.`));return}if(y instanceof n)p.stop(),d(y.originalError);else if(y instanceof TypeError&&!r(y.message))p.stop(),d(y);else{i(y,m,u);try{await u.onFailedAttempt(y)}catch(b){d(b);return}p.retry(y)||d(p.mainError())}}})});return $f.exports=s,$f.exports.default=s,$f.exports.AbortError=n,$f.exports}var AV=Mpe();const Dpe=Fo(AV);var Ope={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lpe,zpe;function Upe(){return{geminiUrl:Lpe,vertexUrl:zpe}}function Vpe(t,e,n,i){var r,s;if(!(t!=null&&t.baseUrl)){const a=Upe();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(s=a.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jo{}function ke(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function x(t,e,n){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const f=t[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const p=f[d];x(p,e.slice(s+1),n[d])}else for(const d of f)x(d,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const f=t[u];x(f[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function v(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(u=>v(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Fpe(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),s=i.split("."),a=new Set;let u=-1;for(let f=0;f<r.length;f++)if(r[f]==="*"){u=f;break}if(u!==-1&&s.length>u)for(let f=u;f<s.length;f++){const d=s[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}oS(t,r,s,0,a)}}function oS(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const f of u[a])oS(f,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!r.has(d)),f={};for(const d of u)f[d]=a[d];for(const[d,p]of Object.entries(f)){const m=[];for(const y of n.slice(i))y==="*"?m.push(d):m.push(y);x(a,m,p)}for(const d of u)delete a[d]}}else{const a=t;s in a&&oS(a[s],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eN(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hpe(t){const e={},n=v(t,["operationName"]);n!=null&&x(e,["operationName"],n);const i=v(t,["resourceName"]);return i!=null&&x(e,["_url","resourceName"],i),e}function Bpe(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["metadata"]);i!=null&&x(e,["metadata"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);s!=null&&x(e,["error"],s);const a=v(t,["response","generateVideoResponse"]);return a!=null&&x(e,["response"],qpe(a)),e}function $pe(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["metadata"]);i!=null&&x(e,["metadata"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);s!=null&&x(e,["error"],s);const a=v(t,["response"]);return a!=null&&x(e,["response"],Gpe(a)),e}function qpe(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Kpe(a))),x(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&x(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function Gpe(t){const e={},n=v(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Ype(a))),x(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&x(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function Kpe(t){const e={},n=v(t,["video"]);return n!=null&&x(e,["video"],eme(n)),e}function Ype(t){const e={},n=v(t,["_self"]);return n!=null&&x(e,["video"],tme(n)),e}function Wpe(t){const e={},n=v(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function Xpe(t){const e={},n=v(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function Jpe(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["metadata"]);i!=null&&x(e,["metadata"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);s!=null&&x(e,["error"],s);const a=v(t,["response"]);return a!=null&&x(e,["response"],Qpe(a)),e}function Qpe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&x(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&x(e,["documentName"],r),e}function kV(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["metadata"]);i!=null&&x(e,["metadata"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);s!=null&&x(e,["error"],s);const a=v(t,["response"]);return a!=null&&x(e,["response"],Zpe(a)),e}function Zpe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&x(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&x(e,["documentName"],r),e}function eme(t){const e={},n=v(t,["uri"]);n!=null&&x(e,["uri"],n);const i=v(t,["encodedVideo"]);i!=null&&x(e,["videoBytes"],eN(i));const r=v(t,["encoding"]);return r!=null&&x(e,["mimeType"],r),e}function tme(t){const e={},n=v(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&x(e,["videoBytes"],eN(i));const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oD;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(oD||(oD={}));var aD;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(aD||(aD={}));var lD;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(lD||(lD={}));var Ha;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ha||(Ha={}));var cD;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cD||(cD={}));var uD;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(uD||(uD={}));var dD;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dD||(dD={}));var fD;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(fD||(fD={}));var hD;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(hD||(hD={}));var pD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pD||(pD={}));var mD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(mD||(mD={}));var gD;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(gD||(gD={}));var yD;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(yD||(yD={}));var vD;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(vD||(vD={}));var xD;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(xD||(xD={}));var bD;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(bD||(bD={}));var _D;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_D||(_D={}));var wD;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wD||(wD={}));var SD;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(SD||(SD={}));var TD;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(TD||(TD={}));var ED;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ED||(ED={}));var uy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(uy||(uy={}));var ND;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ND||(ND={}));var CD;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(CD||(CD={}));var AD;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AD||(AD={}));var aS;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(aS||(aS={}));var kD;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kD||(kD={}));var ID;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ID||(ID={}));var lS;(function(t){t.COLLECTION="COLLECTION"})(lS||(lS={}));var RD;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(RD||(RD={}));var jD;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(jD||(jD={}));var dy;(function(t){t.PREDICT="PREDICT",t.EMBED_CONTENT="EMBED_CONTENT"})(dy||(dy={}));var PD;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(PD||(PD={}));var MD;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(MD||(MD={}));var DD;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(DD||(DD={}));var OD;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(OD||(OD={}));var LD;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(LD||(LD={}));var zD;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zD||(zD={}));var UD;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(UD||(UD={}));var VD;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(VD||(VD={}));var FD;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(FD||(FD={}));var HD;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(HD||(HD={}));var BD;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(BD||(BD={}));var $D;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})($D||($D={}));var qD;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(qD||(qD={}));var GD;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(GD||(GD={}));var KD;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(KD||(KD={}));var YD;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(YD||(YD={}));var WD;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(WD||(WD={}));var XD;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(XD||(XD={}));var JD;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(JD||(JD={}));var QD;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(QD||(QD={}));var ZD;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ZD||(ZD={}));var eO;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(eO||(eO={}));var tO;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tO||(tO={}));var nO;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nO||(nO={}));var iO;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(iO||(iO={}));var Ru;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ru||(Ru={}));class cS{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class qf{get text(){var e,n,i,r,s,a,u,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const m=[];for(const y of(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[b,S]of Object.entries(y))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(S!==null||S!==void 0)&&m.push(b);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;p=!0,d+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,n,i,r,s,a,u,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const m of(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[y,b]of Object.entries(m))y!=="inlineData"&&(b!==null||b!==void 0)&&p.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,s,a,u,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,r,s,a,u,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,s,a,u,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class rO{}class sO{}class nme{}class ime{}class rme{}class sme{}class oO{}class aO{}class lO{}class ome{}class fy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new fy;let r;const s=e;return n?r=$pe(s):r=Bpe(s),Object.assign(i,r),i}}class cO{}class uO{}class dO{}class fO{}class ame{}class lme{}class cme{}class tN{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new tN,s=Jpe(e);return Object.assign(i,s),i}}class ume{}class dme{}class fme{}class hme{}class hO{}class pme{get text(){var e,n,i;let r="",s=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(a))u!=="inlineData"&&f!==null&&s.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class mme{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nN{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new nN,s=kV(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function IV(t,e){const n=gt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function RV(t){return Array.isArray(t)?t.map(e=>hy(e)):[hy(t)]}function hy(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function jV(t){const e=hy(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PV(t){const e=hy(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pO(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function MV(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>pO(e)):[pO(t)]}function uS(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function mO(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function gO(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function On(t){if(t==null)throw new Error("ContentUnion is required");return uS(t)?t:{role:"user",parts:MV(t)}}function iN(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=On(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=On(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>On(n)):[On(e)]}function Ji(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(mO(t)||gO(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[On(t)]}const e=[],n=[],i=uS(t[0]);for(const r of t){const s=uS(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(mO(r)||gO(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:MV(n)}),e}function gme(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ha).includes(n[0].toUpperCase())?n[0].toUpperCase():Ha.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ha).includes(i.toUpperCase())?i.toUpperCase():Ha.TYPE_UNSPECIFIED})}}function Vu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&gme(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ha).includes(u.toUpperCase())?u.toUpperCase():Ha.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Vu(u);else if(i.includes(a)){const f=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}f.push(Vu(d))}e[a]=f}else if(r.includes(a)){const f={};for(const[d,p]of Object.entries(u))f[d]=Vu(p);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=u}return e}function rN(t){return Vu(t)}function sN(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function oN(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Cd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Vu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Vu(e.response));return t}function Ad(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function yme(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Qo(t,e){if(typeof e!="string")throw new Error("name must be a string");return yme(t,e,"cachedContents")}function DV(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function cl(t){return eN(t)}function vme(t){return t!=null&&typeof t=="object"&&"name"in t}function xme(t){return t!=null&&typeof t=="object"&&"video"in t}function bme(t){return t!=null&&typeof t=="object"&&"uri"in t}function OV(t){var e;let n;if(vme(t)&&(n=t.name),!(bme(t)&&(n=t.uri,n===void 0))&&!(xme(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function LV(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function zV(t){for(const e of["models","tunedModels","publisherModels"])if(_me(t,e))return t[e];return[]}function _me(t,e){return t!==null&&typeof t=="object"&&e in t}function wme(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Sme(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const a=wme(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function UV(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Tme(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function VV(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function kd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function FV(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Eme(t){return t.includes("gemini")&&t!=="gemini-embedding-001"||t.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nme(t){const e={},n=v(t,["responsesFile"]);n!=null&&x(e,["fileName"],n);const i=v(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>oge(a))),x(e,["inlinedResponses"],s)}const r=v(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["inlinedEmbedContentResponses"],s)}return e}function Cme(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&x(e,["format"],n);const i=v(t,["gcsDestination","outputUriPrefix"]);i!=null&&x(e,["gcsUri"],i);const r=v(t,["bigqueryDestination","outputUri"]);return r!=null&&x(e,["bigqueryUri"],r),e}function Ame(t){const e={},n=v(t,["format"]);n!=null&&x(e,["predictionsFormat"],n);const i=v(t,["gcsUri"]);i!=null&&x(e,["gcsDestination","outputUriPrefix"],i);const r=v(t,["bigqueryUri"]);if(r!=null&&x(e,["bigqueryDestination","outputUri"],r),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(v(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Gg(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["metadata","displayName"]);i!=null&&x(e,["displayName"],i);const r=v(t,["metadata","state"]);r!=null&&x(e,["state"],FV(r));const s=v(t,["metadata","createTime"]);s!=null&&x(e,["createTime"],s);const a=v(t,["metadata","endTime"]);a!=null&&x(e,["endTime"],a);const u=v(t,["metadata","updateTime"]);u!=null&&x(e,["updateTime"],u);const f=v(t,["metadata","model"]);f!=null&&x(e,["model"],f);const d=v(t,["metadata","output"]);return d!=null&&x(e,["dest"],Nme(VV(d))),e}function dS(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["displayName"]);i!=null&&x(e,["displayName"],i);const r=v(t,["state"]);r!=null&&x(e,["state"],FV(r));const s=v(t,["error"]);s!=null&&x(e,["error"],s);const a=v(t,["createTime"]);a!=null&&x(e,["createTime"],a);const u=v(t,["startTime"]);u!=null&&x(e,["startTime"],u);const f=v(t,["endTime"]);f!=null&&x(e,["endTime"],f);const d=v(t,["updateTime"]);d!=null&&x(e,["updateTime"],d);const p=v(t,["model"]);p!=null&&x(e,["model"],p);const m=v(t,["inputConfig"]);m!=null&&x(e,["src"],kme(m));const y=v(t,["outputConfig"]);y!=null&&x(e,["dest"],Cme(VV(y)));const b=v(t,["completionStats"]);return b!=null&&x(e,["completionStats"],b),e}function kme(t){const e={},n=v(t,["instancesFormat"]);n!=null&&x(e,["format"],n);const i=v(t,["gcsSource","uris"]);i!=null&&x(e,["gcsUri"],i);const r=v(t,["bigquerySource","inputUri"]);return r!=null&&x(e,["bigqueryUri"],r),e}function Ime(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=v(e,["fileName"]);i!=null&&x(n,["fileName"],i);const r=v(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>sge(t,a))),x(n,["requests","requests"],s)}return n}function Rme(t){const e={},n=v(t,["format"]);n!=null&&x(e,["instancesFormat"],n);const i=v(t,["gcsUri"]);i!=null&&x(e,["gcsSource","uris"],i);const r=v(t,["bigqueryUri"]);if(r!=null&&x(e,["bigquerySource","inputUri"],r),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jme(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Pme(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],kd(t,i)),n}function Mme(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],kd(t,i)),n}function Dme(t){const e={},n=v(t,["content"]);n!=null&&x(e,["content"],n);const i=v(t,["citationMetadata"]);i!=null&&x(e,["citationMetadata"],Ome(i));const r=v(t,["tokenCount"]);r!=null&&x(e,["tokenCount"],r);const s=v(t,["finishReason"]);s!=null&&x(e,["finishReason"],s);const a=v(t,["avgLogprobs"]);a!=null&&x(e,["avgLogprobs"],a);const u=v(t,["groundingMetadata"]);u!=null&&x(e,["groundingMetadata"],u);const f=v(t,["index"]);f!=null&&x(e,["index"],f);const d=v(t,["logprobsResult"]);d!=null&&x(e,["logprobsResult"],d);const p=v(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(b=>b)),x(e,["safetyRatings"],y)}const m=v(t,["urlContextMetadata"]);return m!=null&&x(e,["urlContextMetadata"],m),e}function Ome(t){const e={},n=v(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),x(e,["citations"],i)}return e}function HV(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>hge(s))),x(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&x(e,["role"],i),e}function Lme(t,e){const n={},i=v(t,["displayName"]);if(e!==void 0&&i!=null&&x(e,["batch","displayName"],i),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function zme(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&x(e,["displayName"],i);const r=v(t,["dest"]);return e!==void 0&&r!=null&&x(e,["outputConfig"],Ame(Tme(r))),n}function yO(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["_url","model"],gt(t,i));const r=v(e,["src"]);r!=null&&x(n,["batch","inputConfig"],Ime(t,UV(t,r)));const s=v(e,["config"]);return s!=null&&Lme(s,n),n}function Ume(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["model"],gt(t,i));const r=v(e,["src"]);r!=null&&x(n,["inputConfig"],Rme(UV(t,r)));const s=v(e,["config"]);return s!=null&&zme(s,n),n}function Vme(t,e){const n={},i=v(t,["displayName"]);return e!==void 0&&i!=null&&x(e,["batch","displayName"],i),n}function Fme(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["_url","model"],gt(t,i));const r=v(e,["src"]);r!=null&&x(n,["batch","inputConfig"],Yme(t,r));const s=v(e,["config"]);return s!=null&&Vme(s,n),n}function Hme(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],kd(t,i)),n}function Bme(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],kd(t,i)),n}function $me(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["name"]);i!=null&&x(e,["name"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);return s!=null&&x(e,["error"],s),e}function qme(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["name"]);i!=null&&x(e,["name"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);return s!=null&&x(e,["error"],s),e}function Gme(t,e){const n={},i=v(e,["contents"]);if(i!=null){let s=iN(t,i);Array.isArray(s)&&(s=s.map(a=>a)),x(n,["requests[]","request","content"],s)}const r=v(e,["config"]);return r!=null&&(x(n,["_self"],Kme(r,n)),Fpe(n,{"requests[].*":"requests[].request.*"})),n}function Kme(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&x(e,["requests[]","taskType"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&x(e,["requests[]","title"],r);const s=v(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&x(e,["requests[]","outputDimensionality"],s),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Yme(t,e){const n={},i=v(e,["fileName"]);i!=null&&x(n,["file_name"],i);const r=v(e,["inlinedRequests"]);return r!=null&&x(n,["requests"],Gme(t,r)),n}function Wme(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Xme(t){const e={},n=v(t,["id"]);n!=null&&x(e,["id"],n);const i=v(t,["args"]);i!=null&&x(e,["args"],i);const r=v(t,["name"]);if(r!=null&&x(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Jme(t){const e={},n=v(t,["allowedFunctionNames"]);n!=null&&x(e,["allowedFunctionNames"],n);const i=v(t,["mode"]);if(i!=null&&x(e,["mode"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Qme(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&x(n,["systemInstruction"],HV(On(r)));const s=v(e,["temperature"]);s!=null&&x(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&x(i,["topP"],a);const u=v(e,["topK"]);u!=null&&x(i,["topK"],u);const f=v(e,["candidateCount"]);f!=null&&x(i,["candidateCount"],f);const d=v(e,["maxOutputTokens"]);d!=null&&x(i,["maxOutputTokens"],d);const p=v(e,["stopSequences"]);p!=null&&x(i,["stopSequences"],p);const m=v(e,["responseLogprobs"]);m!=null&&x(i,["responseLogprobs"],m);const y=v(e,["logprobs"]);y!=null&&x(i,["logprobs"],y);const b=v(e,["presencePenalty"]);b!=null&&x(i,["presencePenalty"],b);const S=v(e,["frequencyPenalty"]);S!=null&&x(i,["frequencyPenalty"],S);const N=v(e,["seed"]);N!=null&&x(i,["seed"],N);const E=v(e,["responseMimeType"]);E!=null&&x(i,["responseMimeType"],E);const R=v(e,["responseSchema"]);R!=null&&x(i,["responseSchema"],rN(R));const U=v(e,["responseJsonSchema"]);if(U!=null&&x(i,["responseJsonSchema"],U),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=v(e,["safetySettings"]);if(n!==void 0&&j!=null){let z=j;Array.isArray(z)&&(z=z.map($=>pge($))),x(n,["safetySettings"],z)}const B=v(e,["tools"]);if(n!==void 0&&B!=null){let z=Ad(B);Array.isArray(z)&&(z=z.map($=>gge(Cd($)))),x(n,["tools"],z)}const O=v(e,["toolConfig"]);if(n!==void 0&&O!=null&&x(n,["toolConfig"],mge(O)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=v(e,["cachedContent"]);n!==void 0&&P!=null&&x(n,["cachedContent"],Qo(t,P));const I=v(e,["responseModalities"]);I!=null&&x(i,["responseModalities"],I);const A=v(e,["mediaResolution"]);A!=null&&x(i,["mediaResolution"],A);const M=v(e,["speechConfig"]);if(M!=null&&x(i,["speechConfig"],sN(M)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=v(e,["thinkingConfig"]);H!=null&&x(i,["thinkingConfig"],H);const F=v(e,["imageConfig"]);F!=null&&x(i,["imageConfig"],rge(F));const D=v(e,["enableEnhancedCivicAnswers"]);if(D!=null&&x(i,["enableEnhancedCivicAnswers"],D),v(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Zme(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>Dme(d))),x(e,["candidates"],f)}const r=v(t,["modelVersion"]);r!=null&&x(e,["modelVersion"],r);const s=v(t,["promptFeedback"]);s!=null&&x(e,["promptFeedback"],s);const a=v(t,["responseId"]);a!=null&&x(e,["responseId"],a);const u=v(t,["usageMetadata"]);return u!=null&&x(e,["usageMetadata"],u),e}function ege(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],kd(t,i)),n}function tge(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],kd(t,i)),n}function nge(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function ige(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function rge(t){const e={},n=v(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const i=v(t,["imageSize"]);if(i!=null&&x(e,["imageSize"],i),v(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(v(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(v(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sge(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["request","model"],gt(t,i));const r=v(e,["contents"]);if(r!=null){let u=Ji(r);Array.isArray(u)&&(u=u.map(f=>HV(f))),x(n,["request","contents"],u)}const s=v(e,["metadata"]);s!=null&&x(n,["metadata"],s);const a=v(e,["config"]);return a!=null&&x(n,["request","generationConfig"],Qme(t,a,v(n,["request"],{}))),n}function oge(t){const e={},n=v(t,["response"]);n!=null&&x(e,["response"],Zme(n));const i=v(t,["metadata"]);i!=null&&x(e,["metadata"],i);const r=v(t,["error"]);return r!=null&&x(e,["error"],r),e}function age(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);if(e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function lge(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);e!==void 0&&r!=null&&x(e,["_query","pageToken"],r);const s=v(t,["filter"]);return e!==void 0&&s!=null&&x(e,["_query","filter"],s),n}function cge(t){const e={},n=v(t,["config"]);return n!=null&&age(n,e),e}function uge(t){const e={},n=v(t,["config"]);return n!=null&&lge(n,e),e}function dge(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Gg(a))),x(e,["batchJobs"],s)}return e}function fge(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>dS(a))),x(e,["batchJobs"],s)}return e}function hge(t){const e={},n=v(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&x(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&x(e,["fileData"],Wme(s));const a=v(t,["functionCall"]);a!=null&&x(e,["functionCall"],Xme(a));const u=v(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=v(t,["inlineData"]);f!=null&&x(e,["inlineData"],jme(f));const d=v(t,["text"]);d!=null&&x(e,["text"],d);const p=v(t,["thought"]);p!=null&&x(e,["thought"],p);const m=v(t,["thoughtSignature"]);m!=null&&x(e,["thoughtSignature"],m);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function pge(t){const e={},n=v(t,["category"]);if(n!=null&&x(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=v(t,["threshold"]);return i!=null&&x(e,["threshold"],i),e}function mge(t){const e={},n=v(t,["retrievalConfig"]);n!=null&&x(e,["retrievalConfig"],n);const i=v(t,["functionCallingConfig"]);return i!=null&&x(e,["functionCallingConfig"],Jme(i)),e}function gge(t){const e={};if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["computerUse"]);n!=null&&x(e,["computerUse"],n);const i=v(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const r=v(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=v(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),x(e,["functionDeclarations"],p)}const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],nge(a));const u=v(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],ige(u));const f=v(t,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const d=v(t,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Vo||(Vo={}));class Cc{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yge extends Jo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cc(Vo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=yO(this.apiClient,e),i=n._url,r=ke("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const p of f){const m=Object.assign({},p);if(m.systemInstruction){const y=m.systemInstruction;delete m.systemInstruction;const b=m.request;b.systemInstruction=y,m.request=b}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ume(this.apiClient,e);return u=ke("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>dS(p))}else{const d=yO(this.apiClient,e);return u=ke("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Gg(p))}}async createEmbeddingsInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fme(this.apiClient,e);return s=ke("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>Gg(f))}}async get(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=tge(this.apiClient,e);return u=ke("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>dS(p))}else{const d=ege(this.apiClient,e);return u=ke("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Gg(p))}}async cancel(e){var n,i,r,s;let a="",u={};if(this.apiClient.isVertexAI()){const f=Mme(this.apiClient,e);a=ke("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=Pme(this.apiClient,e);a=ke("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=uge(e);return u=ke("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=fge(p),y=new hO;return Object.assign(y,m),y})}else{const d=cge(e);return u=ke("batches",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=dge(p),y=new hO;return Object.assign(y,m),y})}}async delete(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Bme(this.apiClient,e);return u=ke("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>qme(p))}else{const d=Hme(this.apiClient,e);return u=ke("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>$me(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vge(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function vO(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Fge(s))),x(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&x(e,["role"],i),e}function xge(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&x(e,["ttl"],i);const r=v(t,["expireTime"]);e!==void 0&&r!=null&&x(e,["expireTime"],r);const s=v(t,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const a=v(t,["contents"]);if(e!==void 0&&a!=null){let p=Ji(a);Array.isArray(p)&&(p=p.map(m=>vO(m))),x(e,["contents"],p)}const u=v(t,["systemInstruction"]);e!==void 0&&u!=null&&x(e,["systemInstruction"],vO(On(u)));const f=v(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>Bge(m))),x(e,["tools"],p)}const d=v(t,["toolConfig"]);if(e!==void 0&&d!=null&&x(e,["toolConfig"],Hge(d)),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function bge(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&x(e,["ttl"],i);const r=v(t,["expireTime"]);e!==void 0&&r!=null&&x(e,["expireTime"],r);const s=v(t,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const a=v(t,["contents"]);if(e!==void 0&&a!=null){let m=Ji(a);Array.isArray(m)&&(m=m.map(y=>y)),x(e,["contents"],m)}const u=v(t,["systemInstruction"]);e!==void 0&&u!=null&&x(e,["systemInstruction"],On(u));const f=v(t,["tools"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>$ge(y))),x(e,["tools"],m)}const d=v(t,["toolConfig"]);e!==void 0&&d!=null&&x(e,["toolConfig"],d);const p=v(t,["kmsKeyName"]);return e!==void 0&&p!=null&&x(e,["encryption_spec","kmsKeyName"],p),n}function _ge(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["model"],IV(t,i));const r=v(e,["config"]);return r!=null&&xge(r,n),n}function wge(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["model"],IV(t,i));const r=v(e,["config"]);return r!=null&&bge(r,n),n}function Sge(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],Qo(t,i)),n}function Tge(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],Qo(t,i)),n}function Ege(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function Nge(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function Cge(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Age(t){const e={},n=v(t,["id"]);n!=null&&x(e,["id"],n);const i=v(t,["args"]);i!=null&&x(e,["args"],i);const r=v(t,["name"]);if(r!=null&&x(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kge(t){const e={},n=v(t,["allowedFunctionNames"]);n!=null&&x(e,["allowedFunctionNames"],n);const i=v(t,["mode"]);if(i!=null&&x(e,["mode"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ige(t){const e={},n=v(t,["description"]);n!=null&&x(e,["description"],n);const i=v(t,["name"]);i!=null&&x(e,["name"],i);const r=v(t,["parameters"]);r!=null&&x(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&x(e,["response"],a);const u=v(t,["responseJsonSchema"]);if(u!=null&&x(e,["responseJsonSchema"],u),v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Rge(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],Qo(t,i)),n}function jge(t,e){const n={},i=v(e,["name"]);return i!=null&&x(n,["_url","name"],Qo(t,i)),n}function Pge(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function Mge(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function Dge(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function Oge(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function Lge(t){const e={},n=v(t,["config"]);return n!=null&&Dge(n,e),e}function zge(t){const e={},n=v(t,["config"]);return n!=null&&Oge(n,e),e}function Uge(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["cachedContents"],s)}return e}function Vge(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["cachedContents"],s)}return e}function Fge(t){const e={},n=v(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&x(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&x(e,["fileData"],Cge(s));const a=v(t,["functionCall"]);a!=null&&x(e,["functionCall"],Age(a));const u=v(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=v(t,["inlineData"]);f!=null&&x(e,["inlineData"],vge(f));const d=v(t,["text"]);d!=null&&x(e,["text"],d);const p=v(t,["thought"]);p!=null&&x(e,["thought"],p);const m=v(t,["thoughtSignature"]);m!=null&&x(e,["thoughtSignature"],m);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function Hge(t){const e={},n=v(t,["retrievalConfig"]);n!=null&&x(e,["retrievalConfig"],n);const i=v(t,["functionCallingConfig"]);return i!=null&&x(e,["functionCallingConfig"],kge(i)),e}function Bge(t){const e={};if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["computerUse"]);n!=null&&x(e,["computerUse"],n);const i=v(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const r=v(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=v(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),x(e,["functionDeclarations"],p)}const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],Pge(a));const u=v(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],Mge(u));const f=v(t,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const d=v(t,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}function $ge(t){const e={},n=v(t,["retrieval"]);n!=null&&x(e,["retrieval"],n);const i=v(t,["computerUse"]);if(i!=null&&x(e,["computerUse"],i),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=v(t,["codeExecution"]);r!=null&&x(e,["codeExecution"],r);const s=v(t,["enterpriseWebSearch"]);s!=null&&x(e,["enterpriseWebSearch"],s);const a=v(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(y=>Ige(y))),x(e,["functionDeclarations"],m)}const u=v(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],u);const f=v(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],f);const d=v(t,["googleSearchRetrieval"]);d!=null&&x(e,["googleSearchRetrieval"],d);const p=v(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function qge(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&x(e,["ttl"],i);const r=v(t,["expireTime"]);return e!==void 0&&r!=null&&x(e,["expireTime"],r),n}function Gge(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&x(e,["ttl"],i);const r=v(t,["expireTime"]);return e!==void 0&&r!=null&&x(e,["expireTime"],r),n}function Kge(t,e){const n={},i=v(e,["name"]);i!=null&&x(n,["_url","name"],Qo(t,i));const r=v(e,["config"]);return r!=null&&qge(r,n),n}function Yge(t,e){const n={},i=v(e,["name"]);i!=null&&x(n,["_url","name"],Qo(t,i));const r=v(e,["config"]);return r!=null&&Gge(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wge extends Jo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cc(Vo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=wge(this.apiClient,e);return u=ke("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const d=_ge(this.apiClient,e);return u=ke("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=jge(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const d=Rge(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Tge(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=Nge(p),y=new dO;return Object.assign(y,m),y})}else{const d=Sge(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=Ege(p),y=new dO;return Object.assign(y,m),y})}}async update(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Yge(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const d=Kge(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async listInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=zge(e);return u=ke("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=Vge(p),y=new fO;return Object.assign(y,m),y})}else{const d=Lge(e);return u=ke("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=Uge(p),y=new fO;return Object.assign(y,m),y})}}}function py(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function xO(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ye(t){return this instanceof Ye?(this.v=t,this):new Ye(t)}function ss(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(b){return function(S){return Promise.resolve(S).then(b,m)}}function u(b,S){i[b]&&(r[b]=function(N){return new Promise(function(E,R){s.push([b,N,E,R])>1||f(b,N)})},S&&(r[b]=S(r[b])))}function f(b,S){try{d(i[b](S))}catch(N){y(s[0][3],N)}}function d(b){b.value instanceof Ye?Promise.resolve(b.value.v).then(p,m):y(s[0][2],b)}function p(b){f("next",b)}function m(b){f("throw",b)}function y(b,S){b(S),s.shift(),s.length&&f(s[0][0],s[0][1])}}function os(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xO=="function"?xO(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(u,f){a=t[s](a),r(u,f,a.done,a.value)})}}function r(s,a,u,f){Promise.resolve(f).then(function(d){s({value:d,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xge(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:BV(n)}function BV(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Jge(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bO(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!BV(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class Qge{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Zge(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Zge{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),Jge(s)}async sendMessage(e){var n;await this.sendPromise;const i=On(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,u;const f=await r,d=(a=(s=f.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,p=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let y=[];p!=null&&(y=(u=p.slice(m))!==null&&u!==void 0?u:[]);const b=d?[d]:[];this.recordHistory(i,b,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=On(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?bO(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ss(this,arguments,function*(){var r,s,a,u,f,d;const p=[];try{for(var m=!0,y=os(e),b;b=yield Ye(y.next()),r=b.done,!r;m=!0){u=b.value,m=!1;const S=u;if(Xge(S)){const N=(d=(f=S.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content;N!==void 0&&p.push(N)}yield yield Ye(S)}}catch(S){s={error:S}}finally{try{!m&&!r&&(a=y.return)&&(yield Ye(a.call(y)))}finally{if(s)throw s.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...bO(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Hh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e0e(t){const e={},n=v(t,["file"]);return n!=null&&x(e,["file"],n),e}function t0e(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function n0e(t){const e={},n=v(t,["name"]);return n!=null&&x(e,["_url","file"],OV(n)),e}function i0e(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function r0e(t){const e={},n=v(t,["name"]);return n!=null&&x(e,["_url","file"],OV(n)),e}function s0e(t){const e={},n=v(t,["uris"]);return n!=null&&x(e,["uris"],n),e}function o0e(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function a0e(t){const e={},n=v(t,["config"]);return n!=null&&o0e(n,e),e}function l0e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["files"],s)}return e}function c0e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),x(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u0e extends Jo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cc(Vo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=a0e(e);return s=ke("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=l0e(f),p=new ume;return Object.assign(p,d),p})}}async createInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=e0e(e);return s=ke("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=t0e(f),p=new dme;return Object.assign(p,d),p})}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=r0e(e);return s=ke("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=n0e(e);return s=ke("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=i0e(f),p=new fme;return Object.assign(p,d),p})}}async registerFilesInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=s0e(e);return s=ke("files:register",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=c0e(f),p=new hme;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kg(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function d0e(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>C0e(s))),x(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&x(e,["role"],i),e}function f0e(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function h0e(t){const e={},n=v(t,["id"]);n!=null&&x(e,["id"],n);const i=v(t,["args"]);i!=null&&x(e,["args"],i);const r=v(t,["name"]);if(r!=null&&x(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function p0e(t){const e={},n=v(t,["description"]);n!=null&&x(e,["description"],n);const i=v(t,["name"]);i!=null&&x(e,["name"],i);const r=v(t,["parameters"]);r!=null&&x(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&x(e,["response"],a);const u=v(t,["responseJsonSchema"]);if(u!=null&&x(e,["responseJsonSchema"],u),v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function m0e(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const i=v(t,["responseJsonSchema"]);i!=null&&x(e,["responseJsonSchema"],i);const r=v(t,["audioTimestamp"]);r!=null&&x(e,["audioTimestamp"],r);const s=v(t,["candidateCount"]);s!=null&&x(e,["candidateCount"],s);const a=v(t,["enableAffectiveDialog"]);a!=null&&x(e,["enableAffectiveDialog"],a);const u=v(t,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const f=v(t,["logprobs"]);f!=null&&x(e,["logprobs"],f);const d=v(t,["maxOutputTokens"]);d!=null&&x(e,["maxOutputTokens"],d);const p=v(t,["mediaResolution"]);p!=null&&x(e,["mediaResolution"],p);const m=v(t,["presencePenalty"]);m!=null&&x(e,["presencePenalty"],m);const y=v(t,["responseLogprobs"]);y!=null&&x(e,["responseLogprobs"],y);const b=v(t,["responseMimeType"]);b!=null&&x(e,["responseMimeType"],b);const S=v(t,["responseModalities"]);S!=null&&x(e,["responseModalities"],S);const N=v(t,["responseSchema"]);N!=null&&x(e,["responseSchema"],N);const E=v(t,["routingConfig"]);E!=null&&x(e,["routingConfig"],E);const R=v(t,["seed"]);R!=null&&x(e,["seed"],R);const U=v(t,["speechConfig"]);U!=null&&x(e,["speechConfig"],U);const j=v(t,["stopSequences"]);j!=null&&x(e,["stopSequences"],j);const B=v(t,["temperature"]);B!=null&&x(e,["temperature"],B);const O=v(t,["thinkingConfig"]);O!=null&&x(e,["thinkingConfig"],O);const P=v(t,["topK"]);P!=null&&x(e,["topK"],P);const I=v(t,["topP"]);if(I!=null&&x(e,["topP"],I),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function g0e(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function y0e(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function v0e(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig"],i);const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","topP"],a);const u=v(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const f=v(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","mediaResolution"],d);const p=v(t,["seed"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","seed"],p);const m=v(t,["speechConfig"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","speechConfig"],oN(m));const y=v(t,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const b=v(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],b);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],d0e(On(S)));const N=v(t,["tools"]);if(e!==void 0&&N!=null){let P=Ad(N);Array.isArray(P)&&(P=P.map(I=>k0e(Cd(I)))),x(e,["setup","tools"],P)}const E=v(t,["sessionResumption"]);e!==void 0&&E!=null&&x(e,["setup","sessionResumption"],A0e(E));const R=v(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","inputAudioTranscription"],R);const U=v(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&x(e,["setup","outputAudioTranscription"],U);const j=v(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&x(e,["setup","realtimeInputConfig"],j);const B=v(t,["contextWindowCompression"]);e!==void 0&&B!=null&&x(e,["setup","contextWindowCompression"],B);const O=v(t,["proactivity"]);if(e!==void 0&&O!=null&&x(e,["setup","proactivity"],O),v(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function x0e(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig"],m0e(i));const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","topP"],a);const u=v(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const f=v(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","mediaResolution"],d);const p=v(t,["seed"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","seed"],p);const m=v(t,["speechConfig"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","speechConfig"],oN(m));const y=v(t,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const b=v(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],b);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],On(S));const N=v(t,["tools"]);if(e!==void 0&&N!=null){let I=Ad(N);Array.isArray(I)&&(I=I.map(A=>I0e(Cd(A)))),x(e,["setup","tools"],I)}const E=v(t,["sessionResumption"]);e!==void 0&&E!=null&&x(e,["setup","sessionResumption"],E);const R=v(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","inputAudioTranscription"],R);const U=v(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&x(e,["setup","outputAudioTranscription"],U);const j=v(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&x(e,["setup","realtimeInputConfig"],j);const B=v(t,["contextWindowCompression"]);e!==void 0&&B!=null&&x(e,["setup","contextWindowCompression"],B);const O=v(t,["proactivity"]);e!==void 0&&O!=null&&x(e,["setup","proactivity"],O);const P=v(t,["explicitVadSignal"]);return e!==void 0&&P!=null&&x(e,["setup","explicitVadSignal"],P),n}function b0e(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["setup","model"],gt(t,i));const r=v(e,["config"]);return r!=null&&x(n,["config"],v0e(r,n)),n}function _0e(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["setup","model"],gt(t,i));const r=v(e,["config"]);return r!=null&&x(n,["config"],x0e(r,n)),n}function w0e(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&x(e,["musicGenerationConfig"],n),e}function S0e(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),x(e,["weightedPrompts"],i)}return e}function T0e(t){const e={},n=v(t,["media"]);if(n!=null){let d=RV(n);Array.isArray(d)&&(d=d.map(p=>Kg(p))),x(e,["mediaChunks"],d)}const i=v(t,["audio"]);i!=null&&x(e,["audio"],Kg(PV(i)));const r=v(t,["audioStreamEnd"]);r!=null&&x(e,["audioStreamEnd"],r);const s=v(t,["video"]);s!=null&&x(e,["video"],Kg(jV(s)));const a=v(t,["text"]);a!=null&&x(e,["text"],a);const u=v(t,["activityStart"]);u!=null&&x(e,["activityStart"],u);const f=v(t,["activityEnd"]);return f!=null&&x(e,["activityEnd"],f),e}function E0e(t){const e={},n=v(t,["media"]);if(n!=null){let d=RV(n);Array.isArray(d)&&(d=d.map(p=>p)),x(e,["mediaChunks"],d)}const i=v(t,["audio"]);i!=null&&x(e,["audio"],PV(i));const r=v(t,["audioStreamEnd"]);r!=null&&x(e,["audioStreamEnd"],r);const s=v(t,["video"]);s!=null&&x(e,["video"],jV(s));const a=v(t,["text"]);a!=null&&x(e,["text"],a);const u=v(t,["activityStart"]);u!=null&&x(e,["activityStart"],u);const f=v(t,["activityEnd"]);return f!=null&&x(e,["activityEnd"],f),e}function N0e(t){const e={},n=v(t,["setupComplete"]);n!=null&&x(e,["setupComplete"],n);const i=v(t,["serverContent"]);i!=null&&x(e,["serverContent"],i);const r=v(t,["toolCall"]);r!=null&&x(e,["toolCall"],r);const s=v(t,["toolCallCancellation"]);s!=null&&x(e,["toolCallCancellation"],s);const a=v(t,["usageMetadata"]);a!=null&&x(e,["usageMetadata"],R0e(a));const u=v(t,["goAway"]);u!=null&&x(e,["goAway"],u);const f=v(t,["sessionResumptionUpdate"]);f!=null&&x(e,["sessionResumptionUpdate"],f);const d=v(t,["voiceActivityDetectionSignal"]);d!=null&&x(e,["voiceActivityDetectionSignal"],d);const p=v(t,["voiceActivity"]);return p!=null&&x(e,["voiceActivity"],j0e(p)),e}function C0e(t){const e={},n=v(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&x(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&x(e,["fileData"],f0e(s));const a=v(t,["functionCall"]);a!=null&&x(e,["functionCall"],h0e(a));const u=v(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=v(t,["inlineData"]);f!=null&&x(e,["inlineData"],Kg(f));const d=v(t,["text"]);d!=null&&x(e,["text"],d);const p=v(t,["thought"]);p!=null&&x(e,["thought"],p);const m=v(t,["thoughtSignature"]);m!=null&&x(e,["thoughtSignature"],m);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function A0e(t){const e={},n=v(t,["handle"]);if(n!=null&&x(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function k0e(t){const e={};if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["computerUse"]);n!=null&&x(e,["computerUse"],n);const i=v(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const r=v(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=v(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),x(e,["functionDeclarations"],p)}const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],g0e(a));const u=v(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],y0e(u));const f=v(t,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const d=v(t,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}function I0e(t){const e={},n=v(t,["retrieval"]);n!=null&&x(e,["retrieval"],n);const i=v(t,["computerUse"]);if(i!=null&&x(e,["computerUse"],i),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=v(t,["codeExecution"]);r!=null&&x(e,["codeExecution"],r);const s=v(t,["enterpriseWebSearch"]);s!=null&&x(e,["enterpriseWebSearch"],s);const a=v(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(y=>p0e(y))),x(e,["functionDeclarations"],m)}const u=v(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],u);const f=v(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],f);const d=v(t,["googleSearchRetrieval"]);d!=null&&x(e,["googleSearchRetrieval"],d);const p=v(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function R0e(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const i=v(t,["cachedContentTokenCount"]);i!=null&&x(e,["cachedContentTokenCount"],i);const r=v(t,["candidatesTokenCount"]);r!=null&&x(e,["responseTokenCount"],r);const s=v(t,["toolUsePromptTokenCount"]);s!=null&&x(e,["toolUsePromptTokenCount"],s);const a=v(t,["thoughtsTokenCount"]);a!=null&&x(e,["thoughtsTokenCount"],a);const u=v(t,["totalTokenCount"]);u!=null&&x(e,["totalTokenCount"],u);const f=v(t,["promptTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(S=>S)),x(e,["promptTokensDetails"],b)}const d=v(t,["cacheTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(S=>S)),x(e,["cacheTokensDetails"],b)}const p=v(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(S=>S)),x(e,["responseTokensDetails"],b)}const m=v(t,["toolUsePromptTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(S=>S)),x(e,["toolUsePromptTokensDetails"],b)}const y=v(t,["trafficType"]);return y!=null&&x(e,["trafficType"],y),e}function j0e(t){const e={},n=v(t,["type"]);return n!=null&&x(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P0e(t,e){const n={},i=v(t,["data"]);if(i!=null&&x(n,["data"],i),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["mimeType"]);return r!=null&&x(n,["mimeType"],r),n}function M0e(t,e){const n={},i=v(t,["content"]);i!=null&&x(n,["content"],i);const r=v(t,["citationMetadata"]);r!=null&&x(n,["citationMetadata"],D0e(r));const s=v(t,["tokenCount"]);s!=null&&x(n,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&x(n,["finishReason"],a);const u=v(t,["avgLogprobs"]);u!=null&&x(n,["avgLogprobs"],u);const f=v(t,["groundingMetadata"]);f!=null&&x(n,["groundingMetadata"],f);const d=v(t,["index"]);d!=null&&x(n,["index"],d);const p=v(t,["logprobsResult"]);p!=null&&x(n,["logprobsResult"],p);const m=v(t,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(S=>S)),x(n,["safetyRatings"],b)}const y=v(t,["urlContextMetadata"]);return y!=null&&x(n,["urlContextMetadata"],y),n}function D0e(t,e){const n={},i=v(t,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),x(n,["citations"],r)}return n}function O0e(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["contents"]);if(s!=null){let a=Ji(s);Array.isArray(a)&&(a=a.map(u=>u)),x(i,["contents"],a)}return i}function L0e(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(n,["tokensInfo"],s)}return n}function z0e(t,e){const n={},i=v(t,["values"]);i!=null&&x(n,["values"],i);const r=v(t,["statistics"]);return r!=null&&x(n,["statistics"],U0e(r)),n}function U0e(t,e){const n={},i=v(t,["truncated"]);i!=null&&x(n,["truncated"],i);const r=v(t,["token_count"]);return r!=null&&x(n,["tokenCount"],r),n}function yp(t,e){const n={},i=v(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Yye(a))),x(n,["parts"],s)}const r=v(t,["role"]);return r!=null&&x(n,["role"],r),n}function V0e(t,e){const n={},i=v(t,["controlType"]);i!=null&&x(n,["controlType"],i);const r=v(t,["enableControlImageComputation"]);return r!=null&&x(n,["computeControl"],r),n}function F0e(t,e){const n={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function H0e(t,e,n){const i={},r=v(t,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],On(r));const s=v(t,["tools"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>KV(f))),x(e,["tools"],u)}const a=v(t,["generationConfig"]);return e!==void 0&&a!=null&&x(e,["generationConfig"],Pye(a)),i}function B0e(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["contents"]);if(s!=null){let u=Ji(s);Array.isArray(u)&&(u=u.map(f=>yp(f))),x(i,["contents"],u)}const a=v(e,["config"]);return a!=null&&F0e(a),i}function $0e(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["contents"]);if(s!=null){let u=Ji(s);Array.isArray(u)&&(u=u.map(f=>f)),x(i,["contents"],u)}const a=v(e,["config"]);return a!=null&&H0e(a,i),i}function q0e(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["totalTokens"]);r!=null&&x(n,["totalTokens"],r);const s=v(t,["cachedContentTokenCount"]);return s!=null&&x(n,["cachedContentTokenCount"],s),n}function G0e(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["totalTokens"]);return r!=null&&x(n,["totalTokens"],r),n}function K0e(t,e,n){const i={},r=v(e,["model"]);return r!=null&&x(i,["_url","name"],gt(t,r)),i}function Y0e(t,e,n){const i={},r=v(e,["model"]);return r!=null&&x(i,["_url","name"],gt(t,r)),i}function W0e(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&x(n,["sdkHttpResponse"],i),n}function X0e(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&x(n,["sdkHttpResponse"],i),n}function J0e(t,e,n){const i={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&x(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const u=v(t,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const f=v(t,["guidanceScale"]);e!==void 0&&f!=null&&x(e,["parameters","guidanceScale"],f);const d=v(t,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const p=v(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&x(e,["parameters","safetySetting"],p);const m=v(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const y=v(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&x(e,["parameters","includeSafetyAttributes"],y);const b=v(t,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const S=v(t,["language"]);e!==void 0&&S!=null&&x(e,["parameters","language"],S);const N=v(t,["outputMimeType"]);e!==void 0&&N!=null&&x(e,["parameters","outputOptions","mimeType"],N);const E=v(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","compressionQuality"],E);const R=v(t,["addWatermark"]);e!==void 0&&R!=null&&x(e,["parameters","addWatermark"],R);const U=v(t,["labels"]);e!==void 0&&U!=null&&x(e,["labels"],U);const j=v(t,["editMode"]);e!==void 0&&j!=null&&x(e,["parameters","editMode"],j);const B=v(t,["baseSteps"]);return e!==void 0&&B!=null&&x(e,["parameters","editConfig","baseSteps"],B),i}function Q0e(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["prompt"]);s!=null&&x(i,["instances[0]","prompt"],s);const a=v(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(d=>eve(d))),x(i,["instances[0]","referenceImages"],f)}const u=v(e,["config"]);return u!=null&&J0e(u,i),i}function Z0e(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Av(a))),x(n,["generatedImages"],s)}return n}function eye(t,e,n){const i={},r=v(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const s=v(t,["title"]);e!==void 0&&s!=null&&x(e,["requests[]","title"],s);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function tye(t,e,n){const i={};let r=v(n,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const d=v(t,["taskType"]);e!==void 0&&d!=null&&x(e,["instances[]","task_type"],d)}else if(r==="EMBED_CONTENT"){const d=v(t,["taskType"]);e!==void 0&&d!=null&&x(e,["taskType"],d)}let s=v(n,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const d=v(t,["title"]);e!==void 0&&d!=null&&x(e,["instances[]","title"],d)}else if(s==="EMBED_CONTENT"){const d=v(t,["title"]);e!==void 0&&d!=null&&x(e,["title"],d)}let a=v(n,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const d=v(t,["outputDimensionality"]);e!==void 0&&d!=null&&x(e,["parameters","outputDimensionality"],d)}else if(a==="EMBED_CONTENT"){const d=v(t,["outputDimensionality"]);e!==void 0&&d!=null&&x(e,["outputDimensionality"],d)}let u=v(n,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="PREDICT"){const d=v(t,["mimeType"]);e!==void 0&&d!=null&&x(e,["instances[]","mimeType"],d)}let f=v(n,["embeddingApiType"]);if(f===void 0&&(f="PREDICT"),f==="PREDICT"){const d=v(t,["autoTruncate"]);e!==void 0&&d!=null&&x(e,["parameters","autoTruncate"],d)}else if(f==="EMBED_CONTENT"){const d=v(t,["autoTruncate"]);e!==void 0&&d!=null&&x(e,["autoTruncate"],d)}return i}function nye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["contents"]);if(s!=null){let d=iN(t,s);Array.isArray(d)&&(d=d.map(p=>p)),x(i,["requests[]","content"],d)}const a=v(e,["content"]);a!=null&&yp(On(a));const u=v(e,["config"]);u!=null&&eye(u,i);const f=v(e,["model"]);return f!==void 0&&x(i,["requests[]","model"],gt(t,f)),i}function iye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));let s=v(n,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const f=v(e,["contents"]);if(f!=null){let d=iN(t,f);Array.isArray(d)&&(d=d.map(p=>p)),x(i,["instances[]","content"],d)}}let a=v(n,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="EMBED_CONTENT"){const f=v(e,["content"]);f!=null&&x(i,["content"],On(f))}const u=v(e,["config"]);return u!=null&&tye(u,i,n),i}function rye(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),x(n,["embeddings"],a)}const s=v(t,["metadata"]);return s!=null&&x(n,["metadata"],s),n}function sye(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>z0e(u))),x(n,["embeddings"],a)}const s=v(t,["metadata"]);if(s!=null&&x(n,["metadata"],s),e&&v(e,["embeddingApiType"])==="EMBED_CONTENT"){const a=v(t,["embedding"]),u=v(t,["usageMetadata"]),f=v(t,["truncated"]);if(a){const d={};u&&u.promptTokenCount&&(d.tokenCount=u.promptTokenCount),f&&(d.truncated=f),a.statistics=d,x(n,["embeddings"],[a])}}return n}function oye(t,e){const n={},i=v(t,["endpoint"]);i!=null&&x(n,["name"],i);const r=v(t,["deployedModelId"]);return r!=null&&x(n,["deployedModelId"],r),n}function aye(t,e){const n={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["fileUri"]);i!=null&&x(n,["fileUri"],i);const r=v(t,["mimeType"]);return r!=null&&x(n,["mimeType"],r),n}function lye(t,e){const n={},i=v(t,["id"]);i!=null&&x(n,["id"],i);const r=v(t,["args"]);r!=null&&x(n,["args"],r);const s=v(t,["name"]);if(s!=null&&x(n,["name"],s),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function cye(t,e){const n={},i=v(t,["allowedFunctionNames"]);i!=null&&x(n,["allowedFunctionNames"],i);const r=v(t,["mode"]);if(r!=null&&x(n,["mode"],r),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function uye(t,e){const n={},i=v(t,["description"]);i!=null&&x(n,["description"],i);const r=v(t,["name"]);r!=null&&x(n,["name"],r);const s=v(t,["parameters"]);s!=null&&x(n,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&x(n,["parametersJsonSchema"],a);const u=v(t,["response"]);u!=null&&x(n,["response"],u);const f=v(t,["responseJsonSchema"]);if(f!=null&&x(n,["responseJsonSchema"],f),v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function dye(t,e,n,i){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&x(n,["systemInstruction"],yp(On(s)));const a=v(e,["temperature"]);a!=null&&x(r,["temperature"],a);const u=v(e,["topP"]);u!=null&&x(r,["topP"],u);const f=v(e,["topK"]);f!=null&&x(r,["topK"],f);const d=v(e,["candidateCount"]);d!=null&&x(r,["candidateCount"],d);const p=v(e,["maxOutputTokens"]);p!=null&&x(r,["maxOutputTokens"],p);const m=v(e,["stopSequences"]);m!=null&&x(r,["stopSequences"],m);const y=v(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const b=v(e,["logprobs"]);b!=null&&x(r,["logprobs"],b);const S=v(e,["presencePenalty"]);S!=null&&x(r,["presencePenalty"],S);const N=v(e,["frequencyPenalty"]);N!=null&&x(r,["frequencyPenalty"],N);const E=v(e,["seed"]);E!=null&&x(r,["seed"],E);const R=v(e,["responseMimeType"]);R!=null&&x(r,["responseMimeType"],R);const U=v(e,["responseSchema"]);U!=null&&x(r,["responseSchema"],rN(U));const j=v(e,["responseJsonSchema"]);if(j!=null&&x(r,["responseJsonSchema"],j),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=v(e,["safetySettings"]);if(n!==void 0&&B!=null){let $=B;Array.isArray($)&&($=$.map(Y=>tve(Y))),x(n,["safetySettings"],$)}const O=v(e,["tools"]);if(n!==void 0&&O!=null){let $=Ad(O);Array.isArray($)&&($=$.map(Y=>lve(Cd(Y)))),x(n,["tools"],$)}const P=v(e,["toolConfig"]);if(n!==void 0&&P!=null&&x(n,["toolConfig"],ave(P)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=v(e,["cachedContent"]);n!==void 0&&I!=null&&x(n,["cachedContent"],Qo(t,I));const A=v(e,["responseModalities"]);A!=null&&x(r,["responseModalities"],A);const M=v(e,["mediaResolution"]);M!=null&&x(r,["mediaResolution"],M);const H=v(e,["speechConfig"]);if(H!=null&&x(r,["speechConfig"],sN(H)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=v(e,["thinkingConfig"]);F!=null&&x(r,["thinkingConfig"],F);const D=v(e,["imageConfig"]);D!=null&&x(r,["imageConfig"],zye(D));const z=v(e,["enableEnhancedCivicAnswers"]);if(z!=null&&x(r,["enableEnhancedCivicAnswers"],z),v(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function fye(t,e,n,i){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&x(n,["systemInstruction"],On(s));const a=v(e,["temperature"]);a!=null&&x(r,["temperature"],a);const u=v(e,["topP"]);u!=null&&x(r,["topP"],u);const f=v(e,["topK"]);f!=null&&x(r,["topK"],f);const d=v(e,["candidateCount"]);d!=null&&x(r,["candidateCount"],d);const p=v(e,["maxOutputTokens"]);p!=null&&x(r,["maxOutputTokens"],p);const m=v(e,["stopSequences"]);m!=null&&x(r,["stopSequences"],m);const y=v(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const b=v(e,["logprobs"]);b!=null&&x(r,["logprobs"],b);const S=v(e,["presencePenalty"]);S!=null&&x(r,["presencePenalty"],S);const N=v(e,["frequencyPenalty"]);N!=null&&x(r,["frequencyPenalty"],N);const E=v(e,["seed"]);E!=null&&x(r,["seed"],E);const R=v(e,["responseMimeType"]);R!=null&&x(r,["responseMimeType"],R);const U=v(e,["responseSchema"]);U!=null&&x(r,["responseSchema"],rN(U));const j=v(e,["responseJsonSchema"]);j!=null&&x(r,["responseJsonSchema"],j);const B=v(e,["routingConfig"]);B!=null&&x(r,["routingConfig"],B);const O=v(e,["modelSelectionConfig"]);O!=null&&x(r,["modelConfig"],O);const P=v(e,["safetySettings"]);if(n!==void 0&&P!=null){let oe=P;Array.isArray(oe)&&(oe=oe.map(ve=>ve)),x(n,["safetySettings"],oe)}const I=v(e,["tools"]);if(n!==void 0&&I!=null){let oe=Ad(I);Array.isArray(oe)&&(oe=oe.map(ve=>KV(Cd(ve)))),x(n,["tools"],oe)}const A=v(e,["toolConfig"]);n!==void 0&&A!=null&&x(n,["toolConfig"],A);const M=v(e,["labels"]);n!==void 0&&M!=null&&x(n,["labels"],M);const H=v(e,["cachedContent"]);n!==void 0&&H!=null&&x(n,["cachedContent"],Qo(t,H));const F=v(e,["responseModalities"]);F!=null&&x(r,["responseModalities"],F);const D=v(e,["mediaResolution"]);D!=null&&x(r,["mediaResolution"],D);const z=v(e,["speechConfig"]);z!=null&&x(r,["speechConfig"],sN(z));const $=v(e,["audioTimestamp"]);$!=null&&x(r,["audioTimestamp"],$);const Y=v(e,["thinkingConfig"]);Y!=null&&x(r,["thinkingConfig"],Y);const W=v(e,["imageConfig"]);if(W!=null&&x(r,["imageConfig"],Uye(W)),v(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const X=v(e,["modelArmorConfig"]);return n!==void 0&&X!=null&&x(n,["modelArmorConfig"],X),r}function _O(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["contents"]);if(s!=null){let u=Ji(s);Array.isArray(u)&&(u=u.map(f=>yp(f))),x(i,["contents"],u)}const a=v(e,["config"]);return a!=null&&x(i,["generationConfig"],dye(t,a,i)),i}function wO(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["contents"]);if(s!=null){let u=Ji(s);Array.isArray(u)&&(u=u.map(f=>f)),x(i,["contents"],u)}const a=v(e,["config"]);return a!=null&&x(i,["generationConfig"],fye(t,a,i)),i}function SO(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>M0e(p))),x(n,["candidates"],d)}const s=v(t,["modelVersion"]);s!=null&&x(n,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&x(n,["promptFeedback"],a);const u=v(t,["responseId"]);u!=null&&x(n,["responseId"],u);const f=v(t,["usageMetadata"]);return f!=null&&x(n,["usageMetadata"],f),n}function TO(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>m)),x(n,["candidates"],p)}const s=v(t,["createTime"]);s!=null&&x(n,["createTime"],s);const a=v(t,["modelVersion"]);a!=null&&x(n,["modelVersion"],a);const u=v(t,["promptFeedback"]);u!=null&&x(n,["promptFeedback"],u);const f=v(t,["responseId"]);f!=null&&x(n,["responseId"],f);const d=v(t,["usageMetadata"]);return d!=null&&x(n,["usageMetadata"],d),n}function hye(t,e,n){const i={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const s=v(t,["aspectRatio"]);e!==void 0&&s!=null&&x(e,["parameters","aspectRatio"],s);const a=v(t,["guidanceScale"]);if(e!==void 0&&a!=null&&x(e,["parameters","guidanceScale"],a),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=v(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&x(e,["parameters","personGeneration"],f);const d=v(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&x(e,["parameters","includeSafetyAttributes"],d);const p=v(t,["includeRaiReason"]);e!==void 0&&p!=null&&x(e,["parameters","includeRaiReason"],p);const m=v(t,["language"]);e!==void 0&&m!=null&&x(e,["parameters","language"],m);const y=v(t,["outputMimeType"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","mimeType"],y);const b=v(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&x(e,["parameters","outputOptions","compressionQuality"],b),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=v(t,["imageSize"]);if(e!==void 0&&S!=null&&x(e,["parameters","sampleImageSize"],S),v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function pye(t,e,n){const i={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&x(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const u=v(t,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const f=v(t,["guidanceScale"]);e!==void 0&&f!=null&&x(e,["parameters","guidanceScale"],f);const d=v(t,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const p=v(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&x(e,["parameters","safetySetting"],p);const m=v(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const y=v(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&x(e,["parameters","includeSafetyAttributes"],y);const b=v(t,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const S=v(t,["language"]);e!==void 0&&S!=null&&x(e,["parameters","language"],S);const N=v(t,["outputMimeType"]);e!==void 0&&N!=null&&x(e,["parameters","outputOptions","mimeType"],N);const E=v(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","compressionQuality"],E);const R=v(t,["addWatermark"]);e!==void 0&&R!=null&&x(e,["parameters","addWatermark"],R);const U=v(t,["labels"]);e!==void 0&&U!=null&&x(e,["labels"],U);const j=v(t,["imageSize"]);e!==void 0&&j!=null&&x(e,["parameters","sampleImageSize"],j);const B=v(t,["enhancePrompt"]);return e!==void 0&&B!=null&&x(e,["parameters","enhancePrompt"],B),i}function mye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["prompt"]);s!=null&&x(i,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&hye(a,i),i}function gye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["prompt"]);s!=null&&x(i,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&pye(a,i),i}function yye(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>kye(u))),x(n,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&x(n,["positivePromptSafetyAttributes"],qV(s)),n}function vye(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Av(u))),x(n,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&x(n,["positivePromptSafetyAttributes"],GV(s)),n}function xye(t,e,n){const i={},r=v(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=v(t,["durationSeconds"]);if(e!==void 0&&s!=null&&x(e,["parameters","durationSeconds"],s),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const u=v(t,["resolution"]);e!==void 0&&u!=null&&x(e,["parameters","resolution"],u);const f=v(t,["personGeneration"]);if(e!==void 0&&f!=null&&x(e,["parameters","personGeneration"],f),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=v(t,["negativePrompt"]);e!==void 0&&d!=null&&x(e,["parameters","negativePrompt"],d);const p=v(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&x(e,["parameters","enhancePrompt"],p),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=v(t,["lastFrame"]);e!==void 0&&m!=null&&x(e,["instances[0]","lastFrame"],kv(m));const y=v(t,["referenceImages"]);if(e!==void 0&&y!=null){let b=y;Array.isArray(b)&&(b=b.map(S=>_ve(S))),x(e,["instances[0]","referenceImages"],b)}if(v(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function bye(t,e,n){const i={},r=v(t,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const s=v(t,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const a=v(t,["fps"]);e!==void 0&&a!=null&&x(e,["parameters","fps"],a);const u=v(t,["durationSeconds"]);e!==void 0&&u!=null&&x(e,["parameters","durationSeconds"],u);const f=v(t,["seed"]);e!==void 0&&f!=null&&x(e,["parameters","seed"],f);const d=v(t,["aspectRatio"]);e!==void 0&&d!=null&&x(e,["parameters","aspectRatio"],d);const p=v(t,["resolution"]);e!==void 0&&p!=null&&x(e,["parameters","resolution"],p);const m=v(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const y=v(t,["pubsubTopic"]);e!==void 0&&y!=null&&x(e,["parameters","pubsubTopic"],y);const b=v(t,["negativePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","negativePrompt"],b);const S=v(t,["enhancePrompt"]);e!==void 0&&S!=null&&x(e,["parameters","enhancePrompt"],S);const N=v(t,["generateAudio"]);e!==void 0&&N!=null&&x(e,["parameters","generateAudio"],N);const E=v(t,["lastFrame"]);e!==void 0&&E!=null&&x(e,["instances[0]","lastFrame"],cs(E));const R=v(t,["referenceImages"]);if(e!==void 0&&R!=null){let B=R;Array.isArray(B)&&(B=B.map(O=>wve(O))),x(e,["instances[0]","referenceImages"],B)}const U=v(t,["mask"]);e!==void 0&&U!=null&&x(e,["instances[0]","mask"],bve(U));const j=v(t,["compressionQuality"]);return e!==void 0&&j!=null&&x(e,["parameters","compressionQuality"],j),i}function _ye(t,e){const n={},i=v(t,["name"]);i!=null&&x(n,["name"],i);const r=v(t,["metadata"]);r!=null&&x(n,["metadata"],r);const s=v(t,["done"]);s!=null&&x(n,["done"],s);const a=v(t,["error"]);a!=null&&x(n,["error"],a);const u=v(t,["response","generateVideoResponse"]);return u!=null&&x(n,["response"],Eye(u)),n}function wye(t,e){const n={},i=v(t,["name"]);i!=null&&x(n,["name"],i);const r=v(t,["metadata"]);r!=null&&x(n,["metadata"],r);const s=v(t,["done"]);s!=null&&x(n,["done"],s);const a=v(t,["error"]);a!=null&&x(n,["error"],a);const u=v(t,["response"]);return u!=null&&x(n,["response"],Nye(u)),n}function Sye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["prompt"]);s!=null&&x(i,["instances[0]","prompt"],s);const a=v(e,["image"]);a!=null&&x(i,["instances[0]","image"],kv(a));const u=v(e,["video"]);u!=null&&x(i,["instances[0]","video"],YV(u));const f=v(e,["source"]);f!=null&&Cye(f,i);const d=v(e,["config"]);return d!=null&&xye(d,i),i}function Tye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["prompt"]);s!=null&&x(i,["instances[0]","prompt"],s);const a=v(e,["image"]);a!=null&&x(i,["instances[0]","image"],cs(a));const u=v(e,["video"]);u!=null&&x(i,["instances[0]","video"],WV(u));const f=v(e,["source"]);f!=null&&Aye(f,i);const d=v(e,["config"]);return d!=null&&bye(d,i),i}function Eye(t,e){const n={},i=v(t,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Rye(u))),x(n,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&x(n,["raiMediaFilteredCount"],r);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&x(n,["raiMediaFilteredReasons"],s),n}function Nye(t,e){const n={},i=v(t,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>jye(u))),x(n,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&x(n,["raiMediaFilteredCount"],r);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&x(n,["raiMediaFilteredReasons"],s),n}function Cye(t,e,n){const i={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=v(t,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],kv(s));const a=v(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],YV(a)),i}function Aye(t,e,n){const i={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=v(t,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],cs(s));const a=v(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],WV(a)),i}function kye(t,e){const n={},i=v(t,["_self"]);i!=null&&x(n,["image"],Vye(i));const r=v(t,["raiFilteredReason"]);r!=null&&x(n,["raiFilteredReason"],r);const s=v(t,["_self"]);return s!=null&&x(n,["safetyAttributes"],qV(s)),n}function Av(t,e){const n={},i=v(t,["_self"]);i!=null&&x(n,["image"],$V(i));const r=v(t,["raiFilteredReason"]);r!=null&&x(n,["raiFilteredReason"],r);const s=v(t,["_self"]);s!=null&&x(n,["safetyAttributes"],GV(s));const a=v(t,["prompt"]);return a!=null&&x(n,["enhancedPrompt"],a),n}function Iye(t,e){const n={},i=v(t,["_self"]);i!=null&&x(n,["mask"],$V(i));const r=v(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(n,["labels"],s)}return n}function Rye(t,e){const n={},i=v(t,["video"]);return i!=null&&x(n,["video"],vve(i)),n}function jye(t,e){const n={},i=v(t,["_self"]);return i!=null&&x(n,["video"],xve(i)),n}function Pye(t,e){const n={},i=v(t,["modelSelectionConfig"]);i!=null&&x(n,["modelConfig"],i);const r=v(t,["responseJsonSchema"]);r!=null&&x(n,["responseJsonSchema"],r);const s=v(t,["audioTimestamp"]);s!=null&&x(n,["audioTimestamp"],s);const a=v(t,["candidateCount"]);a!=null&&x(n,["candidateCount"],a);const u=v(t,["enableAffectiveDialog"]);u!=null&&x(n,["enableAffectiveDialog"],u);const f=v(t,["frequencyPenalty"]);f!=null&&x(n,["frequencyPenalty"],f);const d=v(t,["logprobs"]);d!=null&&x(n,["logprobs"],d);const p=v(t,["maxOutputTokens"]);p!=null&&x(n,["maxOutputTokens"],p);const m=v(t,["mediaResolution"]);m!=null&&x(n,["mediaResolution"],m);const y=v(t,["presencePenalty"]);y!=null&&x(n,["presencePenalty"],y);const b=v(t,["responseLogprobs"]);b!=null&&x(n,["responseLogprobs"],b);const S=v(t,["responseMimeType"]);S!=null&&x(n,["responseMimeType"],S);const N=v(t,["responseModalities"]);N!=null&&x(n,["responseModalities"],N);const E=v(t,["responseSchema"]);E!=null&&x(n,["responseSchema"],E);const R=v(t,["routingConfig"]);R!=null&&x(n,["routingConfig"],R);const U=v(t,["seed"]);U!=null&&x(n,["seed"],U);const j=v(t,["speechConfig"]);j!=null&&x(n,["speechConfig"],j);const B=v(t,["stopSequences"]);B!=null&&x(n,["stopSequences"],B);const O=v(t,["temperature"]);O!=null&&x(n,["temperature"],O);const P=v(t,["thinkingConfig"]);P!=null&&x(n,["thinkingConfig"],P);const I=v(t,["topK"]);I!=null&&x(n,["topK"],I);const A=v(t,["topP"]);if(A!=null&&x(n,["topP"],A),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function Mye(t,e,n){const i={},r=v(e,["model"]);return r!=null&&x(i,["_url","name"],gt(t,r)),i}function Dye(t,e,n){const i={},r=v(e,["model"]);return r!=null&&x(i,["_url","name"],gt(t,r)),i}function Oye(t,e){const n={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=v(t,["enableWidget"]);return i!=null&&x(n,["enableWidget"],i),n}function Lye(t,e){const n={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=v(t,["timeRangeFilter"]);return i!=null&&x(n,["timeRangeFilter"],i),n}function zye(t,e){const n={},i=v(t,["aspectRatio"]);i!=null&&x(n,["aspectRatio"],i);const r=v(t,["imageSize"]);if(r!=null&&x(n,["imageSize"],r),v(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(v(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(v(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function Uye(t,e){const n={},i=v(t,["aspectRatio"]);i!=null&&x(n,["aspectRatio"],i);const r=v(t,["imageSize"]);r!=null&&x(n,["imageSize"],r);const s=v(t,["personGeneration"]);s!=null&&x(n,["personGeneration"],s);const a=v(t,["outputMimeType"]);a!=null&&x(n,["imageOutputOptions","mimeType"],a);const u=v(t,["outputCompressionQuality"]);return u!=null&&x(n,["imageOutputOptions","compressionQuality"],u),n}function Vye(t,e){const n={},i=v(t,["bytesBase64Encoded"]);i!=null&&x(n,["imageBytes"],cl(i));const r=v(t,["mimeType"]);return r!=null&&x(n,["mimeType"],r),n}function $V(t,e){const n={},i=v(t,["gcsUri"]);i!=null&&x(n,["gcsUri"],i);const r=v(t,["bytesBase64Encoded"]);r!=null&&x(n,["imageBytes"],cl(r));const s=v(t,["mimeType"]);return s!=null&&x(n,["mimeType"],s),n}function kv(t,e){const n={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=v(t,["imageBytes"]);i!=null&&x(n,["bytesBase64Encoded"],cl(i));const r=v(t,["mimeType"]);return r!=null&&x(n,["mimeType"],r),n}function cs(t,e){const n={},i=v(t,["gcsUri"]);i!=null&&x(n,["gcsUri"],i);const r=v(t,["imageBytes"]);r!=null&&x(n,["bytesBase64Encoded"],cl(r));const s=v(t,["mimeType"]);return s!=null&&x(n,["mimeType"],s),n}function Fye(t,e,n,i){const r={},s=v(e,["pageSize"]);n!==void 0&&s!=null&&x(n,["_query","pageSize"],s);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const u=v(e,["filter"]);n!==void 0&&u!=null&&x(n,["_query","filter"],u);const f=v(e,["queryBase"]);return n!==void 0&&f!=null&&x(n,["_url","models_url"],LV(t,f)),r}function Hye(t,e,n,i){const r={},s=v(e,["pageSize"]);n!==void 0&&s!=null&&x(n,["_query","pageSize"],s);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const u=v(e,["filter"]);n!==void 0&&u!=null&&x(n,["_query","filter"],u);const f=v(e,["queryBase"]);return n!==void 0&&f!=null&&x(n,["_url","models_url"],LV(t,f)),r}function Bye(t,e,n){const i={},r=v(e,["config"]);return r!=null&&Fye(t,r,i),i}function $ye(t,e,n){const i={},r=v(e,["config"]);return r!=null&&Hye(t,r,i),i}function qye(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&x(n,["nextPageToken"],r);const s=v(t,["_self"]);if(s!=null){let a=zV(s);Array.isArray(a)&&(a=a.map(u=>fS(u))),x(n,["models"],a)}return n}function Gye(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&x(n,["nextPageToken"],r);const s=v(t,["_self"]);if(s!=null){let a=zV(s);Array.isArray(a)&&(a=a.map(u=>hS(u))),x(n,["models"],a)}return n}function Kye(t,e){const n={},i=v(t,["maskMode"]);i!=null&&x(n,["maskMode"],i);const r=v(t,["segmentationClasses"]);r!=null&&x(n,["maskClasses"],r);const s=v(t,["maskDilation"]);return s!=null&&x(n,["dilation"],s),n}function fS(t,e){const n={},i=v(t,["name"]);i!=null&&x(n,["name"],i);const r=v(t,["displayName"]);r!=null&&x(n,["displayName"],r);const s=v(t,["description"]);s!=null&&x(n,["description"],s);const a=v(t,["version"]);a!=null&&x(n,["version"],a);const u=v(t,["_self"]);u!=null&&x(n,["tunedModelInfo"],cve(u));const f=v(t,["inputTokenLimit"]);f!=null&&x(n,["inputTokenLimit"],f);const d=v(t,["outputTokenLimit"]);d!=null&&x(n,["outputTokenLimit"],d);const p=v(t,["supportedGenerationMethods"]);p!=null&&x(n,["supportedActions"],p);const m=v(t,["temperature"]);m!=null&&x(n,["temperature"],m);const y=v(t,["maxTemperature"]);y!=null&&x(n,["maxTemperature"],y);const b=v(t,["topP"]);b!=null&&x(n,["topP"],b);const S=v(t,["topK"]);S!=null&&x(n,["topK"],S);const N=v(t,["thinking"]);return N!=null&&x(n,["thinking"],N),n}function hS(t,e){const n={},i=v(t,["name"]);i!=null&&x(n,["name"],i);const r=v(t,["displayName"]);r!=null&&x(n,["displayName"],r);const s=v(t,["description"]);s!=null&&x(n,["description"],s);const a=v(t,["versionId"]);a!=null&&x(n,["version"],a);const u=v(t,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(b=>oye(b))),x(n,["endpoints"],y)}const f=v(t,["labels"]);f!=null&&x(n,["labels"],f);const d=v(t,["_self"]);d!=null&&x(n,["tunedModelInfo"],uve(d));const p=v(t,["defaultCheckpointId"]);p!=null&&x(n,["defaultCheckpointId"],p);const m=v(t,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(b=>b)),x(n,["checkpoints"],y)}return n}function Yye(t,e){const n={},i=v(t,["mediaResolution"]);i!=null&&x(n,["mediaResolution"],i);const r=v(t,["codeExecutionResult"]);r!=null&&x(n,["codeExecutionResult"],r);const s=v(t,["executableCode"]);s!=null&&x(n,["executableCode"],s);const a=v(t,["fileData"]);a!=null&&x(n,["fileData"],aye(a));const u=v(t,["functionCall"]);u!=null&&x(n,["functionCall"],lye(u));const f=v(t,["functionResponse"]);f!=null&&x(n,["functionResponse"],f);const d=v(t,["inlineData"]);d!=null&&x(n,["inlineData"],P0e(d));const p=v(t,["text"]);p!=null&&x(n,["text"],p);const m=v(t,["thought"]);m!=null&&x(n,["thought"],m);const y=v(t,["thoughtSignature"]);y!=null&&x(n,["thoughtSignature"],y);const b=v(t,["videoMetadata"]);return b!=null&&x(n,["videoMetadata"],b),n}function Wye(t,e){const n={},i=v(t,["productImage"]);return i!=null&&x(n,["image"],cs(i)),n}function Xye(t,e,n){const i={},r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const s=v(t,["baseSteps"]);e!==void 0&&s!=null&&x(e,["parameters","baseSteps"],s);const a=v(t,["outputGcsUri"]);e!==void 0&&a!=null&&x(e,["parameters","storageUri"],a);const u=v(t,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const f=v(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&x(e,["parameters","personGeneration"],d);const p=v(t,["addWatermark"]);e!==void 0&&p!=null&&x(e,["parameters","addWatermark"],p);const m=v(t,["outputMimeType"]);e!==void 0&&m!=null&&x(e,["parameters","outputOptions","mimeType"],m);const y=v(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","compressionQuality"],y);const b=v(t,["enhancePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","enhancePrompt"],b);const S=v(t,["labels"]);return e!==void 0&&S!=null&&x(e,["labels"],S),i}function Jye(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["source"]);s!=null&&Zye(s,i);const a=v(e,["config"]);return a!=null&&Xye(a,i),i}function Qye(t,e){const n={},i=v(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Av(s))),x(n,["generatedImages"],r)}return n}function Zye(t,e,n){const i={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=v(t,["personImage"]);e!==void 0&&s!=null&&x(e,["instances[0]","personImage","image"],cs(s));const a=v(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>Wye(f))),x(e,["instances[0]","productImages"],u)}return i}function eve(t,e){const n={},i=v(t,["referenceImage"]);i!=null&&x(n,["referenceImage"],cs(i));const r=v(t,["referenceId"]);r!=null&&x(n,["referenceId"],r);const s=v(t,["referenceType"]);s!=null&&x(n,["referenceType"],s);const a=v(t,["maskImageConfig"]);a!=null&&x(n,["maskImageConfig"],Kye(a));const u=v(t,["controlImageConfig"]);u!=null&&x(n,["controlImageConfig"],V0e(u));const f=v(t,["styleImageConfig"]);f!=null&&x(n,["styleImageConfig"],f);const d=v(t,["subjectImageConfig"]);return d!=null&&x(n,["subjectImageConfig"],d),n}function qV(t,e){const n={},i=v(t,["safetyAttributes","categories"]);i!=null&&x(n,["categories"],i);const r=v(t,["safetyAttributes","scores"]);r!=null&&x(n,["scores"],r);const s=v(t,["contentType"]);return s!=null&&x(n,["contentType"],s),n}function GV(t,e){const n={},i=v(t,["safetyAttributes","categories"]);i!=null&&x(n,["categories"],i);const r=v(t,["safetyAttributes","scores"]);r!=null&&x(n,["scores"],r);const s=v(t,["contentType"]);return s!=null&&x(n,["contentType"],s),n}function tve(t,e){const n={},i=v(t,["category"]);if(i!=null&&x(n,["category"],i),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=v(t,["threshold"]);return r!=null&&x(n,["threshold"],r),n}function nve(t,e){const n={},i=v(t,["image"]);return i!=null&&x(n,["image"],cs(i)),n}function ive(t,e,n){const i={},r=v(t,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const s=v(t,["maxPredictions"]);e!==void 0&&s!=null&&x(e,["parameters","maxPredictions"],s);const a=v(t,["confidenceThreshold"]);e!==void 0&&a!=null&&x(e,["parameters","confidenceThreshold"],a);const u=v(t,["maskDilation"]);e!==void 0&&u!=null&&x(e,["parameters","maskDilation"],u);const f=v(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&x(e,["parameters","binaryColorThreshold"],f);const d=v(t,["labels"]);return e!==void 0&&d!=null&&x(e,["labels"],d),i}function rve(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["source"]);s!=null&&ove(s,i);const a=v(e,["config"]);return a!=null&&ive(a,i),i}function sve(t,e){const n={},i=v(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Iye(s))),x(n,["generatedMasks"],r)}return n}function ove(t,e,n){const i={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=v(t,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],cs(s));const a=v(t,["scribbleImage"]);return e!==void 0&&a!=null&&x(e,["instances[0]","scribble"],nve(a)),i}function ave(t,e){const n={},i=v(t,["retrievalConfig"]);i!=null&&x(n,["retrievalConfig"],i);const r=v(t,["functionCallingConfig"]);return r!=null&&x(n,["functionCallingConfig"],cye(r)),n}function lve(t,e){const n={};if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["computerUse"]);i!=null&&x(n,["computerUse"],i);const r=v(t,["fileSearch"]);r!=null&&x(n,["fileSearch"],r);const s=v(t,["codeExecution"]);if(s!=null&&x(n,["codeExecution"],s),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=v(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(y=>y)),x(n,["functionDeclarations"],m)}const u=v(t,["googleMaps"]);u!=null&&x(n,["googleMaps"],Oye(u));const f=v(t,["googleSearch"]);f!=null&&x(n,["googleSearch"],Lye(f));const d=v(t,["googleSearchRetrieval"]);d!=null&&x(n,["googleSearchRetrieval"],d);const p=v(t,["urlContext"]);return p!=null&&x(n,["urlContext"],p),n}function KV(t,e){const n={},i=v(t,["retrieval"]);i!=null&&x(n,["retrieval"],i);const r=v(t,["computerUse"]);if(r!=null&&x(n,["computerUse"],r),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=v(t,["codeExecution"]);s!=null&&x(n,["codeExecution"],s);const a=v(t,["enterpriseWebSearch"]);a!=null&&x(n,["enterpriseWebSearch"],a);const u=v(t,["functionDeclarations"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(b=>uye(b))),x(n,["functionDeclarations"],y)}const f=v(t,["googleMaps"]);f!=null&&x(n,["googleMaps"],f);const d=v(t,["googleSearch"]);d!=null&&x(n,["googleSearch"],d);const p=v(t,["googleSearchRetrieval"]);p!=null&&x(n,["googleSearchRetrieval"],p);const m=v(t,["urlContext"]);return m!=null&&x(n,["urlContext"],m),n}function cve(t,e){const n={},i=v(t,["baseModel"]);i!=null&&x(n,["baseModel"],i);const r=v(t,["createTime"]);r!=null&&x(n,["createTime"],r);const s=v(t,["updateTime"]);return s!=null&&x(n,["updateTime"],s),n}function uve(t,e){const n={},i=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&x(n,["baseModel"],i);const r=v(t,["createTime"]);r!=null&&x(n,["createTime"],r);const s=v(t,["updateTime"]);return s!=null&&x(n,["updateTime"],s),n}function dve(t,e,n){const i={},r=v(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const s=v(t,["description"]);e!==void 0&&s!=null&&x(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),i}function fve(t,e,n){const i={},r=v(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const s=v(t,["description"]);e!==void 0&&s!=null&&x(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),i}function hve(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","name"],gt(t,r));const s=v(e,["config"]);return s!=null&&dve(s,i),i}function pve(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["config"]);return s!=null&&fve(s,i),i}function mve(t,e,n){const i={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const s=v(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&x(e,["parameters","safetySetting"],s);const a=v(t,["personGeneration"]);e!==void 0&&a!=null&&x(e,["parameters","personGeneration"],a);const u=v(t,["includeRaiReason"]);e!==void 0&&u!=null&&x(e,["parameters","includeRaiReason"],u);const f=v(t,["outputMimeType"]);e!==void 0&&f!=null&&x(e,["parameters","outputOptions","mimeType"],f);const d=v(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&x(e,["parameters","outputOptions","compressionQuality"],d);const p=v(t,["enhanceInputImage"]);e!==void 0&&p!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],p);const m=v(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const y=v(t,["labels"]);e!==void 0&&y!=null&&x(e,["labels"],y);const b=v(t,["numberOfImages"]);e!==void 0&&b!=null&&x(e,["parameters","sampleCount"],b);const S=v(t,["mode"]);return e!==void 0&&S!=null&&x(e,["parameters","mode"],S),i}function gve(t,e,n){const i={},r=v(e,["model"]);r!=null&&x(i,["_url","model"],gt(t,r));const s=v(e,["image"]);s!=null&&x(i,["instances[0]","image"],cs(s));const a=v(e,["upscaleFactor"]);a!=null&&x(i,["parameters","upscaleConfig","upscaleFactor"],a);const u=v(e,["config"]);return u!=null&&mve(u,i),i}function yve(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Av(a))),x(n,["generatedImages"],s)}return n}function vve(t,e){const n={},i=v(t,["uri"]);i!=null&&x(n,["uri"],i);const r=v(t,["encodedVideo"]);r!=null&&x(n,["videoBytes"],cl(r));const s=v(t,["encoding"]);return s!=null&&x(n,["mimeType"],s),n}function xve(t,e){const n={},i=v(t,["gcsUri"]);i!=null&&x(n,["uri"],i);const r=v(t,["bytesBase64Encoded"]);r!=null&&x(n,["videoBytes"],cl(r));const s=v(t,["mimeType"]);return s!=null&&x(n,["mimeType"],s),n}function bve(t,e){const n={},i=v(t,["image"]);i!=null&&x(n,["_self"],cs(i));const r=v(t,["maskMode"]);return r!=null&&x(n,["maskMode"],r),n}function _ve(t,e){const n={},i=v(t,["image"]);i!=null&&x(n,["image"],kv(i));const r=v(t,["referenceType"]);return r!=null&&x(n,["referenceType"],r),n}function wve(t,e){const n={},i=v(t,["image"]);i!=null&&x(n,["image"],cs(i));const r=v(t,["referenceType"]);return r!=null&&x(n,["referenceType"],r),n}function YV(t,e){const n={},i=v(t,["uri"]);i!=null&&x(n,["uri"],i);const r=v(t,["videoBytes"]);r!=null&&x(n,["encodedVideo"],cl(r));const s=v(t,["mimeType"]);return s!=null&&x(n,["encoding"],s),n}function WV(t,e){const n={},i=v(t,["uri"]);i!=null&&x(n,["gcsUri"],i);const r=v(t,["videoBytes"]);r!=null&&x(n,["bytesBase64Encoded"],cl(r));const s=v(t,["mimeType"]);return s!=null&&x(n,["mimeType"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sve(t,e){const n={},i=v(t,["displayName"]);return e!==void 0&&i!=null&&x(e,["displayName"],i),n}function Tve(t){const e={},n=v(t,["config"]);return n!=null&&Sve(n,e),e}function Eve(t,e){const n={},i=v(t,["force"]);return e!==void 0&&i!=null&&x(e,["_query","force"],i),n}function Nve(t){const e={},n=v(t,["name"]);n!=null&&x(e,["_url","name"],n);const i=v(t,["config"]);return i!=null&&Eve(i,e),e}function Cve(t){const e={},n=v(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function Ave(t,e){const n={},i=v(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["customMetadata"],s)}const r=v(t,["chunkingConfig"]);return e!==void 0&&r!=null&&x(e,["chunkingConfig"],r),n}function kve(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const i=v(t,["metadata"]);i!=null&&x(e,["metadata"],i);const r=v(t,["done"]);r!=null&&x(e,["done"],r);const s=v(t,["error"]);s!=null&&x(e,["error"],s);const a=v(t,["response"]);return a!=null&&x(e,["response"],Rve(a)),e}function Ive(t){const e={},n=v(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const i=v(t,["fileName"]);i!=null&&x(e,["fileName"],i);const r=v(t,["config"]);return r!=null&&Ave(r,e),e}function Rve(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&x(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&x(e,["documentName"],r),e}function jve(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function Pve(t){const e={},n=v(t,["config"]);return n!=null&&jve(n,e),e}function Mve(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["fileSearchStores"],s)}return e}function XV(t,e){const n={},i=v(t,["mimeType"]);e!==void 0&&i!=null&&x(e,["mimeType"],i);const r=v(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const s=v(t,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>f)),x(e,["customMetadata"],u)}const a=v(t,["chunkingConfig"]);return e!==void 0&&a!=null&&x(e,["chunkingConfig"],a),n}function Dve(t){const e={},n=v(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const i=v(t,["config"]);return i!=null&&XV(i,e),e}function Ove(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lve="Content-Type",zve="X-Server-Timeout",Uve="User-Agent",pS="x-goog-api-client",Vve="1.42.0",Fve=`google-genai-sdk/${Vve}`,Hve="v1beta1",Bve="v1beta",$ve=5,qve=[408,429,500,502,503,504];class Gve{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Hve}else{if(!this.clientOptions.apiKey)throw new Hh({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Bve,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===lS.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&Kve(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await EO(r),new cS(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await EO(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ss(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const u="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:p}=yield Ye(r.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=s.decode(p,{stream:!0});try{const S=JSON.parse(m);if("error"in S){const N=JSON.parse(JSON.stringify(S.error)),E=N.status,R=N.code,U=`got status: ${E}. ${JSON.stringify(S)}`;if(R>=400&&R<600)throw new Hh({message:U,status:R})}}catch(S){if(S.name==="ApiError")throw S}a+=m;let y=-1,b=0;for(;;){y=-1,b=0;for(const E of f){const R=a.indexOf(E);R!==-1&&(y===-1||R<y)&&(y=R,b=E.length)}if(y===-1)break;const S=a.substring(0,y);a=a.substring(y+b);const N=S.trim();if(N.startsWith(u)){const E=N.substring(u.length).trim();try{const R=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ye(new cS(R))}catch(R){throw new Error(`exception parsing stream chunk ${E}. ${R}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const r=this.clientOptions.httpOptions.retryOptions;return Dpe(async()=>{const a=await fetch(e,n);if(a.ok)return a;throw qve.includes(a.status)?new Error(`Retryable HTTP Error: ${a.statusText}`):new AV.AbortError(`Non-retryable exception ${a.statusText} sending request`)},{retries:((i=r.attempts)!==null&&i!==void 0?i:$ve)-1})}getDefaultHeaders(){const e={},n=Fve+" "+this.clientOptions.userAgentExtra;return e[Uve]=n,e[pS]=n,e[Lve]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(zve,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const f={file:r},d=this.getFileName(e),p=ke("upload/v1beta/files",f._url),m=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,d,f,n==null?void 0:n.httpOptions);return s.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,i){var r;const s=this.clientOptions.uploader,a=await s.stat(n),u=String(a.size),f=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),m={};i!=null&&XV(i,m);const y=await this.fetchUploadUrl(d,u,f,p,m,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,s,a){var u;let f={};a?f=a:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:f});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function EO(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Hh({message:r,status:n}):new Error(r)}}function Kve(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){const u=Object.assign({},s);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],p=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?u[f]=i(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yve="mcp_used/unknown";let Wve=!1;function JV(t){for(const e of t)if(Xve(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Wve}function QV(t){var e;const n=(e=t[pS])!==null&&e!==void 0?e:"";t[pS]=(n+` ${Yve}`).trimStart()}function Xve(t){return t!==null&&typeof t=="object"&&t instanceof aN}function Jve(t){return ss(this,arguments,function*(n,i=100){let r,s=0;for(;s<i;){const a=yield Ye(n.listTools({cursor:r}));for(const u of a.tools)yield yield Ye(u),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class aN{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new aN(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const p of this.mcpClients)try{for(var u=!0,f=(n=void 0,os(Jve(p))),d;d=await f.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const m=r;a.push(m);const y=m.name;if(s[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);s[y]=p}}catch(m){n={error:m}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Sme(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Qve(t,e,n){const i=new mme;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class Zve{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=nxe(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const p=new Promise(j=>{d=j}),m=e.callbacks,y=function(){d({})},b=this.apiClient,S={onopen:y,onmessage:j=>{Qve(b,m.onmessage,j)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(j){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(j){}},N=this.webSocketFactory.create(f,txe(a),S);N.connect(),await p;const U={setup:{model:gt(this.apiClient,e.model)}};return N.send(JSON.stringify(U)),new exe(N,this.apiClient)}}class exe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=S0e(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=w0e(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ru.PLAY)}pause(){this.sendPlaybackControl(Ru.PAUSE)}stop(){this.sendPlaybackControl(Ru.STOP)}resetContext(){this.sendPlaybackControl(Ru.RESET_CONTEXT)}close(){this.conn.close()}}function txe(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function nxe(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ixe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rxe(t,e,n){const i=new pme;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const a=N0e(s);Object.assign(i,a)}else Object.assign(i,s);e(i)}class sxe{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Zve(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&JV(e.config.tools)&&QV(m);const y=cxe(m);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),H=this.apiClient.getLocation(),F=this.apiClient.getApiKey(),D=!!M&&!!H||!!F;this.apiClient.getCustomBaseUrl()&&!D?p=f:(p=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,p))}else{const M=this.apiClient.getApiKey();let H="BidiGenerateContent",F="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",F="access_token"),p=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${H}?${F}=${M}`}let b=()=>{};const S=new Promise(M=>{b=M}),N=e.callbacks,E=function(){var M;(M=N==null?void 0:N.onopen)===null||M===void 0||M.call(N),b({})},R=this.apiClient,U={onopen:E,onmessage:M=>{rxe(R,N.onmessage,M)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(M){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(M){}},j=this.webSocketFactory.create(p,lxe(y),U);j.connect(),await S;let B=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&B.startsWith("publishers/")){const M=this.apiClient.getProject(),H=this.apiClient.getLocation();M&&H&&(B=`projects/${M}/locations/${H}/`+B)}let O={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[uy.AUDIO]}:e.config.responseModalities=[uy.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],I=[];for(const M of P)if(this.isCallableTool(M)){const H=M;I.push(await H.tool())}else I.push(M);I.length>0&&(e.config.tools=I);const A={model:B,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=_0e(this.apiClient,A):O=b0e(this.apiClient,A),delete O.config,j.send(JSON.stringify(O)),new axe(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oxe={turnComplete:!0};class axe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ji(n.turns),e.isVertexAI()||(i=i.map(r=>yp(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(ixe)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},oxe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:E0e(e)}:n={realtimeInput:T0e(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function lxe(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function cxe(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NO=10;function CO(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Fu(a)){r=!0;break}if(!r)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Fu(t){return"callTool"in t&&typeof t.callTool=="function"}function uxe(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Fu(r)))!==null&&i!==void 0?i:!1}function AO(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(Fu(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function kO(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dxe extends Jo{constructor(e){super(),this.apiClient=e,this.embedContent=async n=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(n);if(n.model.includes("gemini")&&n.model!=="gemini-embedding-001"||n.model.includes("maas")){const r=Ji(n.contents);if(r.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const s=Object.assign(Object.assign({},n),{content:r[0],embeddingApiType:dy.EMBED_CONTENT});return await this.embedContentInternal(s)}else{const r=Object.assign(Object.assign({},n),{embeddingApiType:dy.PREDICT});return await this.embedContentInternal(r)}},this.generateContent=async n=>{var i,r,s,a,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!uxe(n)||CO(n.config))return await this.generateContentInternal(f);const d=AO(n);if(d.length>0){const N=d.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,m;const y=Ji(f.contents),b=(s=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:NO;let S=0;for(;S<b&&(p=await this.generateContentInternal(f),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,E=[];for(const R of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Fu(R)){const j=await R.callTool(p.functionCalls);E.push(...j)}S++,m={role:"user",parts:E},f.contents=Ji(f.contents),f.contents.push(N),f.contents.push(m),kO(f.config)&&(y.push(N),y.push(m))}return kO(f.config)&&(p.automaticFunctionCallingHistory=y),p},this.generateContentStream=async n=>{var i,r,s,a,u;if(this.maybeMoveToResponseJsonSchem(n),CO(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const f=AO(n);if(f.length>0){const m=f.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,p=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const a=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=f==null?void 0:f.safetyAttributes:a.push(f);let u;return s?u={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Cc(Vo.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,a,u,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((f=(u=n.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const a=await Promise.all(s.map(async f=>Fu(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&JV(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),QV(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Fu(a)){const u=a,f=await u.tool();for(const d of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,u)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:NO;let a=!1,u=0;const f=await this.initAfcToolsMap(e);return(function(d,p,m){return ss(this,arguments,function*(){for(var y,b,S,N,E,R;u<s;){a&&(u++,a=!1);const O=yield Ye(d.processParamsMaybeAddMcpUsage(m)),P=yield Ye(d.generateContentStreamInternal(O)),I=[],A=[];try{for(var U=!0,j=(b=void 0,os(P)),B;B=yield Ye(j.next()),y=B.done,!y;U=!0){N=B.value,U=!1;const M=N;if(yield yield Ye(M),M.candidates&&(!((E=M.candidates[0])===null||E===void 0)&&E.content)){A.push(M.candidates[0].content);for(const H of(R=M.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(u<s&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(H.functionCall.name)){const F=yield Ye(p.get(H.functionCall.name).callTool([H.functionCall]));I.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(M){b={error:M}}finally{try{!U&&!y&&(S=j.return)&&(yield Ye(S.call(j)))}finally{if(b)throw b.error}}if(I.length>0){a=!0;const M=new qf;M.candidates=[{content:{role:"user",parts:I}}],yield yield Ye(M);const H=[];H.push(...A),H.push({role:"user",parts:I});const F=Ji(m.contents).concat(H);m.contents=F}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=wO(this.apiClient,e);return u=ke("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=TO(p),y=new qf;return Object.assign(y,m),y})}else{const d=_O(this.apiClient,e);return u=ke("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=SO(p),y=new qf;return Object.assign(y,m),y})}}async generateContentStreamInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=wO(this.apiClient,e);return u=ke("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(m){return ss(this,arguments,function*(){var y,b,S,N;try{for(var E=!0,R=os(m),U;U=yield Ye(R.next()),y=U.done,!y;E=!0){N=U.value,E=!1;const j=N,B=TO(yield Ye(j.json()),e);B.sdkHttpResponse={headers:j.headers};const O=new qf;Object.assign(O,B),yield yield Ye(O)}}catch(j){b={error:j}}finally{try{!E&&!y&&(S=R.return)&&(yield Ye(S.call(R)))}finally{if(b)throw b.error}}})})}else{const d=_O(this.apiClient,e);return u=ke("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(m){return ss(this,arguments,function*(){var y,b,S,N;try{for(var E=!0,R=os(m),U;U=yield Ye(R.next()),y=U.done,!y;E=!0){N=U.value,E=!1;const j=N,B=SO(yield Ye(j.json()),e);B.sdkHttpResponse={headers:j.headers};const O=new qf;Object.assign(O,B),yield yield Ye(O)}}catch(j){b={error:j}}finally{try{!E&&!y&&(S=R.return)&&(yield Ye(S.call(R)))}finally{if(b)throw b.error}}})})}}async embedContentInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=iye(this.apiClient,e,e),p=Eme(e.model)?"{model}:embedContent":"{model}:predict";return u=ke(p,d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{const b=y;return b.sdkHttpResponse={headers:m.headers},b})),a.then(m=>{const y=sye(m,e),b=new rO;return Object.assign(b,y),b})}else{const d=nye(this.apiClient,e);return u=ke("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=rye(p),y=new rO;return Object.assign(y,m),y})}}async generateImagesInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=gye(this.apiClient,e);return u=ke("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=vye(p),y=new sO;return Object.assign(y,m),y})}else{const d=mye(this.apiClient,e);return u=ke("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=yye(p),y=new sO;return Object.assign(y,m),y})}}async editImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=Q0e(this.apiClient,e);return s=ke("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=Z0e(f),p=new nme;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=gve(this.apiClient,e);return s=ke("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=yve(f),p=new ime;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=Jye(this.apiClient,e);return s=ke("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=Qye(f),p=new rme;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=rve(this.apiClient,e);return s=ke("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=sve(f),p=new sme;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Dye(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>hS(p))}else{const d=Mye(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>fS(p))}}async listInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=$ye(this.apiClient,e);return u=ke("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=Gye(p),y=new oO;return Object.assign(y,m),y})}else{const d=Bye(this.apiClient,e);return u=ke("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=qye(p),y=new oO;return Object.assign(y,m),y})}}async update(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=pve(this.apiClient,e);return u=ke("{model}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>hS(p))}else{const d=hve(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>fS(p))}}async delete(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Y0e(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=X0e(p),y=new aO;return Object.assign(y,m),y})}else{const d=K0e(this.apiClient,e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=W0e(p),y=new aO;return Object.assign(y,m),y})}}async countTokens(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=$0e(this.apiClient,e);return u=ke("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=G0e(p),y=new lO;return Object.assign(y,m),y})}else{const d=B0e(this.apiClient,e);return u=ke("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=q0e(p),y=new lO;return Object.assign(y,m),y})}}async computeTokens(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=O0e(this.apiClient,e);return s=ke("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=L0e(f),p=new ome;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Tye(this.apiClient,e);return u=ke("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const m=wye(p),y=new fy;return Object.assign(y,m),y})}else{const d=Sye(this.apiClient,e);return u=ke("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=_ye(p),y=new fy;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fxe extends Jo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Xpe(e);return u=ke("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a}else{const d=Wpe(e);return u=ke("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=Hpe(e);return s=ke("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hxe(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function pxe(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Sxe(s))),x(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&x(e,["role"],i),e}function mxe(t,e,n){const i={},r=v(e,["expireTime"]);n!==void 0&&r!=null&&x(n,["expireTime"],r);const s=v(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&x(n,["newSessionExpireTime"],s);const a=v(e,["uses"]);n!==void 0&&a!=null&&x(n,["uses"],a);const u=v(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&x(n,["bidiGenerateContentSetup"],wxe(t,u));const f=v(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&x(n,["fieldMask"],f),i}function gxe(t,e){const n={},i=v(e,["config"]);return i!=null&&x(n,["config"],mxe(t,i,n)),n}function yxe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function vxe(t){const e={},n=v(t,["id"]);n!=null&&x(e,["id"],n);const i=v(t,["args"]);i!=null&&x(e,["args"],i);const r=v(t,["name"]);if(r!=null&&x(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xxe(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function bxe(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function _xe(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig"],i);const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","topP"],a);const u=v(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const f=v(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","mediaResolution"],d);const p=v(t,["seed"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","seed"],p);const m=v(t,["speechConfig"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","speechConfig"],oN(m));const y=v(t,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const b=v(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],b);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],pxe(On(S)));const N=v(t,["tools"]);if(e!==void 0&&N!=null){let P=Ad(N);Array.isArray(P)&&(P=P.map(I=>Exe(Cd(I)))),x(e,["setup","tools"],P)}const E=v(t,["sessionResumption"]);e!==void 0&&E!=null&&x(e,["setup","sessionResumption"],Txe(E));const R=v(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","inputAudioTranscription"],R);const U=v(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&x(e,["setup","outputAudioTranscription"],U);const j=v(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&x(e,["setup","realtimeInputConfig"],j);const B=v(t,["contextWindowCompression"]);e!==void 0&&B!=null&&x(e,["setup","contextWindowCompression"],B);const O=v(t,["proactivity"]);if(e!==void 0&&O!=null&&x(e,["setup","proactivity"],O),v(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wxe(t,e){const n={},i=v(e,["model"]);i!=null&&x(n,["setup","model"],gt(t,i));const r=v(e,["config"]);return r!=null&&x(n,["config"],_xe(r,n)),n}function Sxe(t){const e={},n=v(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&x(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&x(e,["fileData"],yxe(s));const a=v(t,["functionCall"]);a!=null&&x(e,["functionCall"],vxe(a));const u=v(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=v(t,["inlineData"]);f!=null&&x(e,["inlineData"],hxe(f));const d=v(t,["text"]);d!=null&&x(e,["text"],d);const p=v(t,["thought"]);p!=null&&x(e,["thought"],p);const m=v(t,["thoughtSignature"]);m!=null&&x(e,["thoughtSignature"],m);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function Txe(t){const e={},n=v(t,["handle"]);if(n!=null&&x(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Exe(t){const e={};if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=v(t,["computerUse"]);n!=null&&x(e,["computerUse"],n);const i=v(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const r=v(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=v(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),x(e,["functionDeclarations"],p)}const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],xxe(a));const u=v(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],bxe(u));const f=v(t,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const d=v(t,["urlContext"]);return d!=null&&x(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nxe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function Cxe(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=Nxe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];s&&f.push(s),u.length>0&&f.push(...u),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Axe extends Jo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=gxe(this.apiClient,e);s=ke("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=Cxe(u,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kxe(t,e){const n={},i=v(t,["force"]);return e!==void 0&&i!=null&&x(e,["_query","force"],i),n}function Ixe(t){const e={},n=v(t,["name"]);n!=null&&x(e,["_url","name"],n);const i=v(t,["config"]);return i!=null&&kxe(i,e),e}function Rxe(t){const e={},n=v(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function jxe(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),n}function Pxe(t){const e={},n=v(t,["parent"]);n!=null&&x(e,["_url","parent"],n);const i=v(t,["config"]);return i!=null&&jxe(i,e),e}function Mxe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&x(e,["nextPageToken"],i);const r=v(t,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dxe extends Jo{constructor(e){super(),this.apiClient=e,this.list=async n=>new Cc(Vo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rxe(e);return s=ke("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ixe(e);r=ke("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Pxe(e);return s=ke("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=Mxe(f),p=new ame;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oxe extends Jo{constructor(e,n=new Dxe(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Cc(Vo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tve(e);return s=ke("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Cve(e);return s=ke("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Nve(e);r=ke("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Pve(e);return s=ke("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=Mve(f),p=new lme;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Dve(e);return s=ke("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=Ove(f),p=new cme;return Object.assign(p,d),p})}}async importFile(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ive(e);return s=ke("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=kve(f),p=new tN;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZV=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return ZV=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Lxe=()=>ZV();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mS(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const gS=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ar extends Error{}class Si extends Ar{constructor(e,n,i,r){super(`${Si.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Iv({message:i,cause:gS(n)});const s=n;return e===400?new t9(e,s,i,r):e===401?new n9(e,s,i,r):e===403?new i9(e,s,i,r):e===404?new r9(e,s,i,r):e===409?new s9(e,s,i,r):e===422?new o9(e,s,i,r):e===429?new a9(e,s,i,r):e>=500?new l9(e,s,i,r):new Si(e,s,i,r)}}class yS extends Si{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Iv extends Si{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class e9 extends Iv{constructor({message:e}={}){super({message:e??"Request timed out."})}}class t9 extends Si{}class n9 extends Si{}class i9 extends Si{}class r9 extends Si{}class s9 extends Si{}class o9 extends Si{}class a9 extends Si{}class l9 extends Si{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zxe=/^[a-z][a-z0-9+.-]*:/i,Uxe=t=>zxe.test(t);let vS=t=>(vS=Array.isArray,vS(t));const Vxe=vS;let Fxe=Vxe;const IO=Fxe;function Hxe(t){if(!t)return!0;for(const e in t)return!1;return!0}function Bxe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const $xe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ar(`${t} must be an integer`);if(e<0)throw new Ar(`${t} must be a positive integer`);return e},qxe=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gxe=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kxe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Yxe=()=>{var t,e,n,i,r;const s=Kxe();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":jO(Deno.build.os),"X-Stainless-Arch":RO(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":jO((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":RO((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=Wxe();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Wxe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${s}.${a}`}}}return null}const RO=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",jO=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let bg;const Xxe=()=>bg??(bg=Yxe());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jxe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function c9(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Qxe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return c9({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function u9(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Zxe(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ebe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d9=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function O_(t,e,n){return d9(),new File(t,e??"unknown_file",n)}function tbe(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const nbe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f9=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ibe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&f9(t),rbe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function sbe(t,e,n){if(d9(),t=await t,ibe(t))return t instanceof File?t:O_([await t.arrayBuffer()],t.name);if(rbe(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),O_(await xS(r),e,n)}const i=await xS(t);if(e||(e=tbe(t)),!(n!=null&&n.type)){const r=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return O_(i,e,n)}async function xS(t){var e,n,i,r,s;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(f9(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(nbe(t))try{for(var u=!0,f=os(t),d;d=await f.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const p=r;a.push(...await xS(p))}}catch(p){n={error:p}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}else{const p=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${p?`; constructor: ${p}`:""}${obe(t)}`)}return a}function obe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h9{constructor(e){this._client=e}}h9._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p9(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PO=Object.freeze(Object.create(null)),abe=(t=p9)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const s=[],a=n.reduce((p,m,y)=>{var b,S,N;/[?#]/.test(m)&&(r=!0);const E=i[y];let R=(r?encodeURIComponent:t)(""+E);return y!==i.length&&(E==null||typeof E=="object"&&E.toString===((N=Object.getPrototypeOf((S=Object.getPrototypeOf((b=E.hasOwnProperty)!==null&&b!==void 0?b:PO))!==null&&S!==void 0?S:PO))===null||N===void 0?void 0:N.toString))&&(R=E+"",s.push({start:p.length+m.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),p+m+(y===i.length?"":R)},""),u=a.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(u))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((p,m)=>p.start-m.start),s.length>0){let p=0;const m=s.reduce((y,b)=>{const S=" ".repeat(b.start-p),N="^".repeat(b.length);return p=b.start+b.length,y+S+N},"");throw new Ar(`Path parameters result in path with invalid segments:
${s.map(y=>y.error).join(`
`)}
${a}
${m}`)}return a}),_g=abe(p9);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m9 extends h9{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,s=py(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Ar("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Ar("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_g`/${r}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(_g`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(_g`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const s=n??{},{api_version:a=this._client.apiVersion}=s,u=py(s,["api_version"]);return this._client.get(_g`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}m9._key=Object.freeze(["interactions"]);class g9 extends m9{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lbe(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let wg;function lN(t){let e;return(wg??(e=new globalThis.TextEncoder,wg=e.encode.bind(e)))(t)}let Sg;function MO(t){let e;return(Sg??(e=new globalThis.TextDecoder,Sg=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rv{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lN(e):e;this.buffer=lbe([this.buffer,n]);const i=[];let r;for(;(r=cbe(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(MO(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=MO(this.buffer.subarray(0,s));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Rv.NEWLINE_CHARS=new Set([`
`,"\r"]);Rv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cbe(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function ube(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const my={off:0,error:200,warn:300,info:400,debug:500},DO=(t,e,n)=>{if(t){if(Bxe(my,t))return t;vi(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(my))}`)}};function nh(){}function Tg(t,e,n){return!e||my[t]>my[n]?nh:e[t].bind(e)}const dbe={error:nh,warn:nh,info:nh,debug:nh};let OO=new WeakMap;function vi(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return dbe;const r=OO.get(n);if(r&&r[0]===i)return r[1];const s={error:Tg("error",n,i),warn:Tg("warn",n,i),info:Tg("info",n,i),debug:Tg("debug",n,i)};return OO.set(n,[i,s]),s}const Gl=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ju{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const s=i?vi(i):console;function a(){return ss(this,arguments,function*(){var f,d,p,m;if(r)throw new Ar("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var b=!0,S=os(fbe(e,n)),N;N=yield Ye(S.next()),f=N.done,!f;b=!0){m=N.value,b=!1;const E=m;if(!y)if(E.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield Ye(JSON.parse(E.data))}catch(R){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),R}}}catch(E){d={error:E}}finally{try{!b&&!f&&(p=S.return)&&(yield Ye(p.call(S)))}finally{if(d)throw d.error}}y=!0}catch(E){if(mS(E))return yield Ye(void 0);throw E}finally{y||n.abort()}})}return new ju(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function s(){return ss(this,arguments,function*(){var f,d,p,m;const y=new Rv,b=u9(e);try{for(var S=!0,N=os(b),E;E=yield Ye(N.next()),f=E.done,!f;S=!0){m=E.value,S=!1;const R=m;for(const U of y.decode(R))yield yield Ye(U)}}catch(R){d={error:R}}finally{try{!S&&!f&&(p=N.return)&&(yield Ye(p.call(N)))}finally{if(d)throw d.error}}for(const R of y.flush())yield yield Ye(R)})}function a(){return ss(this,arguments,function*(){var f,d,p,m;if(r)throw new Ar("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var b=!0,S=os(s()),N;N=yield Ye(S.next()),f=N.done,!f;b=!0){m=N.value,b=!1;const E=m;y||E&&(yield yield Ye(JSON.parse(E)))}}catch(E){d={error:E}}finally{try{!b&&!f&&(p=S.return)&&(yield Ye(p.call(S)))}finally{if(d)throw d.error}}y=!0}catch(E){if(mS(E))return yield Ye(void 0);throw E}finally{y||n.abort()}})}return new ju(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const a=i.next();e.push(a),n.push(a)}return s.shift()}});return[new ju(()=>r(e),this.controller,this.client),new ju(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return c9({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:s}=await n.next();if(s)return i.close();const a=lN(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function fbe(t,e){return ss(this,arguments,function*(){var i,r,s,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ar("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ar("Attempted to iterate over a response with no body");const u=new pbe,f=new Rv,d=u9(t.body);try{for(var p=!0,m=os(hbe(d)),y;y=yield Ye(m.next()),i=y.done,!i;p=!0){a=y.value,p=!1;const b=a;for(const S of f.decode(b)){const N=u.decode(S);N&&(yield yield Ye(N))}}}catch(b){r={error:b}}finally{try{!p&&!i&&(s=m.return)&&(yield Ye(s.call(m)))}finally{if(r)throw r.error}}for(const b of f.flush()){const S=u.decode(b);S&&(yield yield Ye(S))}})}function hbe(t){return ss(this,arguments,function*(){var n,i,r,s;let a=new Uint8Array;try{for(var u=!0,f=os(t),d;d=yield Ye(f.next()),n=d.done,!n;u=!0){s=d.value,u=!1;const p=s;if(p==null)continue;const m=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?lN(p):p;let y=new Uint8Array(a.length+m.length);y.set(a),y.set(m,a.length),a=y;let b;for(;(b=ube(a))!==-1;)yield yield Ye(a.slice(0,b)),a=a.slice(b)}}catch(p){i={error:p}}finally{try{!u&&!n&&(r=f.return)&&(yield Ye(r.call(f)))}finally{if(i)throw i.error}}a.length>0&&(yield yield Ye(a))})}class pbe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=mbe(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function mbe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gbe(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:s}=e,a=await(async()=>{var u;if(e.options.stream)return vi(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ju.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type"),d=(u=f==null?void 0:f.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return vi(t).debug(`[${i}] response parsed`,Gl({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cN extends Promise{constructor(e,n,i=gbe){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new cN(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y9=Symbol("brand.privateNullableHeaders");function*ybe(t){if(!t)return;if(y9 in t){const{values:i,nulls:r}=t;yield*i.entries();for(const s of r)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():IO(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const s=IO(i[1])?i[1]:[i[1]];let a=!1;for(const u of s)u!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,u])}}const Gf=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[s,a]of ybe(i)){const u=s.toLowerCase();r.has(u)||(e.delete(s),r.add(u)),a===null?(e.delete(s),n.add(u)):(e.append(s,a),n.delete(u))}}return{[y9]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L_=t=>{var e,n,i,r,s,a;if(typeof globalThis.process<"u")return(i=(n=(e=Ope)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var v9;class jv{constructor(e){var n,i,r,s,a,u,f,{baseURL:d=L_("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=L_("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,y=py(e,["baseURL","apiKey","apiVersion"]);const b=Object.assign(Object.assign({apiKey:p,apiVersion:m},y),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=b.baseURL,this.timeout=(i=b.timeout)!==null&&i!==void 0?i:jv.DEFAULT_TIMEOUT,this.logger=(r=b.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(a=(s=DO(b.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:DO(L_("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:S,this.fetchOptions=b.fetchOptions,this.maxRetries=(u=b.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(f=b.fetch)!==null&&f!==void 0?f:Jxe(),this.encoder=ebe,this._options=b,this.apiKey=p,this.apiVersion=m,this.clientAdapter=b.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Gf([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Gf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Gf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ar(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Nu}`}defaultIdempotencyKey(){return`stainless-node-retry-${Lxe()}`}makeStatusError(e,n,i,r){return Si.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,s=Uxe(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return Hxe(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new cN(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,s,a;const u=await e,f=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=f),await this.prepareOptions(u);const{req:d,url:p,timeout:m}=await this.buildRequest(u,{retryCount:f-n});await this.prepareRequest(d,{url:p,options:u});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=i===void 0?"":`, retryOf: ${i}`,S=Date.now();if(vi(this).debug(`[${y}] sending request`,Gl({retryOfRequestLogID:i,method:u.method,url:p,options:u,headers:d.headers})),!((s=u.signal)===null||s===void 0)&&s.aborted)throw new yS;const N=new AbortController,E=await this.fetchWithTimeout(p,d,m,N).catch(gS),R=Date.now();if(E instanceof globalThis.Error){const j=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new yS;const B=mS(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return vi(this).info(`[${y}] connection ${B?"timed out":"failed"} - ${j}`),vi(this).debug(`[${y}] connection ${B?"timed out":"failed"} (${j})`,Gl({retryOfRequestLogID:i,url:p,durationMs:R-S,message:E.message})),this.retryRequest(u,n,i??y);throw vi(this).info(`[${y}] connection ${B?"timed out":"failed"} - error; no more retries left`),vi(this).debug(`[${y}] connection ${B?"timed out":"failed"} (error; no more retries left)`,Gl({retryOfRequestLogID:i,url:p,durationMs:R-S,message:E.message})),B?new e9:new Iv({cause:E})}const U=`[${y}${b}] ${d.method} ${p} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${R-S}ms`;if(!E.ok){const j=await this.shouldRetry(E);if(n&&j){const M=`retrying, ${n} attempts remaining`;return await Zxe(E.body),vi(this).info(`${U} - ${M}`),vi(this).debug(`[${y}] response error (${M})`,Gl({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:R-S})),this.retryRequest(u,n,i??y,E.headers)}const B=j?"error; no more retries left":"error; not retryable";vi(this).info(`${U} - ${B}`);const O=await E.text().catch(M=>gS(M).message),P=qxe(O),I=P?void 0:O;throw vi(this).debug(`[${y}] response error (${B})`,Gl({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:I,durationMs:Date.now()-S})),this.makeStatusError(E.status,P,I,E.headers)}return vi(this).info(U),vi(this).debug(`[${y}] response start`,Gl({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:R-S})),{response:E,options:u,controller:N,requestLogID:y,retryOfRequestLogID:i,startTime:S}}async fetchWithTimeout(e,n,i,r){const s=n||{},{signal:a,method:u}=s,f=py(s,["signal","method"]),d=this._makeAbort(r);a&&a.addEventListener("abort",d,{once:!0});const p=setTimeout(d,i),m=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},m?{duplex:"half"}:{}),{method:"GET"}),f);u&&(y.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var s;let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(a=d)}const f=r==null?void 0:r.get("retry-after");if(f&&!a){const d=parseFloat(f);Number.isNaN(d)?a=Date.parse(f)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Gxe(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,s;const a=Object.assign({},e),{method:u,path:f,query:d,defaultBaseURL:p}=a,m=this.buildURL(f,d,p);"timeout"in a&&$xe("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:y,body:b}=this.buildBody({options:a}),S=await this.buildHeaders({options:e,method:u,bodyHeaders:y,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:S},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:m,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=Gf([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Xxe()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(u),u.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Gf([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Qxe(e)}:typeof e=="object"&&i.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:i})}}jv.DEFAULT_TIMEOUT=6e4;class Fn extends jv{constructor(){super(...arguments),this.interactions=new g9(this)}}v9=Fn;Fn.GeminiNextGenAPIClient=v9;Fn.GeminiNextGenAPIClientError=Ar;Fn.APIError=Si;Fn.APIConnectionError=Iv;Fn.APIConnectionTimeoutError=e9;Fn.APIUserAbortError=yS;Fn.NotFoundError=r9;Fn.ConflictError=s9;Fn.RateLimitError=a9;Fn.BadRequestError=t9;Fn.AuthenticationError=n9;Fn.InternalServerError=l9;Fn.PermissionDeniedError=i9;Fn.UnprocessableEntityError=o9;Fn.toFile=sbe;Fn.Interactions=g9;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vbe(t,e){const n={},i=v(t,["name"]);return i!=null&&x(n,["_url","name"],i),n}function xbe(t,e){const n={},i=v(t,["name"]);return i!=null&&x(n,["_url","name"],i),n}function bbe(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&x(n,["sdkHttpResponse"],i),n}function _be(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&x(n,["sdkHttpResponse"],i),n}function wbe(t,e,n){const i={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=v(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&x(e,["displayName"],r),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=v(t,["epochCount"]);e!==void 0&&s!=null&&x(e,["tuningTask","hyperparameters","epochCount"],s);const a=v(t,["learningRateMultiplier"]);if(a!=null&&x(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(v(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(v(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const u=v(t,["batchSize"]);e!==void 0&&u!=null&&x(e,["tuningTask","hyperparameters","batchSize"],u);const f=v(t,["learningRate"]);if(e!==void 0&&f!=null&&x(e,["tuningTask","hyperparameters","learningRate"],f),v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(v(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(v(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(v(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(v(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(v(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(v(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function Sbe(t,e,n){const i={};let r=v(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const P=v(t,["validationDataset"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec"],z_(P))}else if(r==="PREFERENCE_TUNING"){const P=v(t,["validationDataset"]);e!==void 0&&P!=null&&x(e,["preferenceOptimizationSpec"],z_(P))}else if(r==="DISTILLATION"){const P=v(t,["validationDataset"]);e!==void 0&&P!=null&&x(e,["distillationSpec"],z_(P))}const s=v(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&x(e,["tunedModelDisplayName"],s);const a=v(t,["description"]);e!==void 0&&a!=null&&x(e,["description"],a);let u=v(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const P=v(t,["epochCount"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(u==="PREFERENCE_TUNING"){const P=v(t,["epochCount"]);e!==void 0&&P!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(u==="DISTILLATION"){const P=v(t,["epochCount"]);e!==void 0&&P!=null&&x(e,["distillationSpec","hyperParameters","epochCount"],P)}let f=v(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const P=v(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(f==="PREFERENCE_TUNING"){const P=v(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(f==="DISTILLATION"){const P=v(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&x(e,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let d=v(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const P=v(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(d==="PREFERENCE_TUNING"){const P=v(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(d==="DISTILLATION"){const P=v(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&x(e,["distillationSpec","exportLastCheckpointOnly"],P)}let p=v(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const P=v(t,["adapterSize"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(p==="PREFERENCE_TUNING"){const P=v(t,["adapterSize"]);e!==void 0&&P!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(p==="DISTILLATION"){const P=v(t,["adapterSize"]);e!==void 0&&P!=null&&x(e,["distillationSpec","hyperParameters","adapterSize"],P)}let m=v(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const P=v(t,["tuningMode"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","tuningMode"],P)}const y=v(t,["customBaseModel"]);e!==void 0&&y!=null&&x(e,["customBaseModel"],y);let b=v(n,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const P=v(t,["batchSize"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let S=v(n,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const P=v(t,["learningRate"]);e!==void 0&&P!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRate"],P)}const N=v(t,["labels"]);e!==void 0&&N!=null&&x(e,["labels"],N);const E=v(t,["beta"]);e!==void 0&&E!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],E);const R=v(t,["baseTeacherModel"]);e!==void 0&&R!=null&&x(e,["distillationSpec","baseTeacherModel"],R);const U=v(t,["tunedTeacherModelSource"]);e!==void 0&&U!=null&&x(e,["distillationSpec","tunedTeacherModelSource"],U);const j=v(t,["sftLossWeightMultiplier"]);e!==void 0&&j!=null&&x(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],j);const B=v(t,["outputUri"]);e!==void 0&&B!=null&&x(e,["outputUri"],B);const O=v(t,["encryptionSpec"]);return e!==void 0&&O!=null&&x(e,["encryptionSpec"],O),i}function Tbe(t,e){const n={},i=v(t,["baseModel"]);i!=null&&x(n,["baseModel"],i);const r=v(t,["preTunedModel"]);r!=null&&x(n,["preTunedModel"],r);const s=v(t,["trainingDataset"]);s!=null&&Dbe(s);const a=v(t,["config"]);return a!=null&&wbe(a,n),n}function Ebe(t,e){const n={},i=v(t,["baseModel"]);i!=null&&x(n,["baseModel"],i);const r=v(t,["preTunedModel"]);r!=null&&x(n,["preTunedModel"],r);const s=v(t,["trainingDataset"]);s!=null&&Obe(s,n,e);const a=v(t,["config"]);return a!=null&&Sbe(a,n,e),n}function Nbe(t,e){const n={},i=v(t,["name"]);return i!=null&&x(n,["_url","name"],i),n}function Cbe(t,e){const n={},i=v(t,["name"]);return i!=null&&x(n,["_url","name"],i),n}function Abe(t,e,n){const i={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),i}function kbe(t,e,n){const i={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),i}function Ibe(t,e){const n={},i=v(t,["config"]);return i!=null&&Abe(i,n),n}function Rbe(t,e){const n={},i=v(t,["config"]);return i!=null&&kbe(i,n),n}function jbe(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&x(n,["nextPageToken"],r);const s=v(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>x9(u))),x(n,["tuningJobs"],a)}return n}function Pbe(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&x(n,["nextPageToken"],r);const s=v(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>bS(u))),x(n,["tuningJobs"],a)}return n}function Mbe(t,e){const n={},i=v(t,["name"]);i!=null&&x(n,["model"],i);const r=v(t,["name"]);return r!=null&&x(n,["endpoint"],r),n}function Dbe(t,e){const n={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=v(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),x(n,["examples","examples"],r)}return n}function Obe(t,e,n){const i={};let r=v(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(r==="DISTILLATION"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&x(e,["distillationSpec","promptDatasetUri"],a)}let s=v(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(s==="DISTILLATION"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&x(e,["distillationSpec","promptDatasetUri"],a)}if(v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function x9(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&x(n,["name"],r);const s=v(t,["state"]);s!=null&&x(n,["state"],DV(s));const a=v(t,["createTime"]);a!=null&&x(n,["createTime"],a);const u=v(t,["tuningTask","startTime"]);u!=null&&x(n,["startTime"],u);const f=v(t,["tuningTask","completeTime"]);f!=null&&x(n,["endTime"],f);const d=v(t,["updateTime"]);d!=null&&x(n,["updateTime"],d);const p=v(t,["description"]);p!=null&&x(n,["description"],p);const m=v(t,["baseModel"]);m!=null&&x(n,["baseModel"],m);const y=v(t,["_self"]);return y!=null&&x(n,["tunedModel"],Mbe(y)),n}function bS(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&x(n,["name"],r);const s=v(t,["state"]);s!=null&&x(n,["state"],DV(s));const a=v(t,["createTime"]);a!=null&&x(n,["createTime"],a);const u=v(t,["startTime"]);u!=null&&x(n,["startTime"],u);const f=v(t,["endTime"]);f!=null&&x(n,["endTime"],f);const d=v(t,["updateTime"]);d!=null&&x(n,["updateTime"],d);const p=v(t,["error"]);p!=null&&x(n,["error"],p);const m=v(t,["description"]);m!=null&&x(n,["description"],m);const y=v(t,["baseModel"]);y!=null&&x(n,["baseModel"],y);const b=v(t,["tunedModel"]);b!=null&&x(n,["tunedModel"],b);const S=v(t,["preTunedModel"]);S!=null&&x(n,["preTunedModel"],S);const N=v(t,["supervisedTuningSpec"]);N!=null&&x(n,["supervisedTuningSpec"],N);const E=v(t,["preferenceOptimizationSpec"]);E!=null&&x(n,["preferenceOptimizationSpec"],E);const R=v(t,["distillationSpec"]);R!=null&&x(n,["distillationSpec"],R);const U=v(t,["tuningDataStats"]);U!=null&&x(n,["tuningDataStats"],U);const j=v(t,["encryptionSpec"]);j!=null&&x(n,["encryptionSpec"],j);const B=v(t,["partnerModelTuningSpec"]);B!=null&&x(n,["partnerModelTuningSpec"],B);const O=v(t,["customBaseModel"]);O!=null&&x(n,["customBaseModel"],O);const P=v(t,["experiment"]);P!=null&&x(n,["experiment"],P);const I=v(t,["labels"]);I!=null&&x(n,["labels"],I);const A=v(t,["outputUri"]);A!=null&&x(n,["outputUri"],A);const M=v(t,["pipelineJob"]);M!=null&&x(n,["pipelineJob"],M);const H=v(t,["serviceAccount"]);H!=null&&x(n,["serviceAccount"],H);const F=v(t,["tunedModelDisplayName"]);F!=null&&x(n,["tunedModelDisplayName"],F);const D=v(t,["veoTuningSpec"]);return D!=null&&x(n,["veoTuningSpec"],D),n}function Lbe(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&x(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&x(n,["name"],r);const s=v(t,["metadata"]);s!=null&&x(n,["metadata"],s);const a=v(t,["done"]);a!=null&&x(n,["done"],a);const u=v(t,["error"]);return u!=null&&x(n,["error"],u),n}function z_(t,e){const n={},i=v(t,["gcsUri"]);i!=null&&x(n,["validationDatasetUri"],i);const r=v(t,["vertexDatasetResource"]);return r!=null&&x(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zbe extends Jo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cc(Vo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:aS.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Cbe(e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>bS(p))}else{const d=Nbe(e);return u=ke("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>x9(p))}}async listInternal(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Rbe(e);return u=ke("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=Pbe(p),y=new cO;return Object.assign(y,m),y})}else{const d=Ibe(e);return u=ke("tunedModels",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=jbe(p),y=new cO;return Object.assign(y,m),y})}}async cancel(e){var n,i,r,s;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=xbe(e);return u=ke("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=_be(p),y=new uO;return Object.assign(y,m),y})}else{const d=vbe(e);return u=ke("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),a.then(p=>{const m=bbe(p),y=new uO;return Object.assign(y,m),y})}}async tuneInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=Ebe(e,e);return s=ke("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>bS(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tbe(e);return s=ke("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>Lbe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ube{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Vbe=1024*1024*8,Fbe=3,Hbe=1e3,Bbe=2,gy="x-goog-upload-status";async function $be(t,e,n){var i;const r=await b9(t,e,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[gy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function qbe(t,e,n){var i;const r=await b9(t,e,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[gy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=kV(s),u=new nN;return Object.assign(u,a),u}async function b9(t,e,n){var i,r;let s=0,a=0,u=new cS(new Response),f="upload";for(s=t.size;a<s;){const d=Math.min(Vbe,s-a),p=t.slice(a,a+d);a+d>=s&&(f+=", finalize");let m=0,y=Hbe;for(;m<Fbe&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[gy]));)m++,await Kbe(y),y=y*Bbe;if(a+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[gy])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Gbe(t){return{size:t.size,type:t.type}}function Kbe(t){return new Promise(e=>setTimeout(e,t))}class Ybe{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $be(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qbe(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Gbe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wbe{create(e,n,i){return new Xbe(e,n,i)}}class Xbe{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LO="x-goog-api-key";class Jbe{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(LO)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(LO,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qbe="gl-node/";class Zbe{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new Fn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Vpe(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new Jbe(this.apiKey);this.apiClient=new Gve({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Qbe+"web",uploader:new Ybe,downloader:new Ube}),this.models=new dxe(this.apiClient),this.live=new sxe(this.apiClient,r,new Wbe),this.batches=new yge(this.apiClient),this.chats=new Qge(this.models,this.apiClient),this.caches=new Wge(this.apiClient),this.files=new u0e(this.apiClient),this.operations=new fxe(this.apiClient),this.authTokens=new Axe(this.apiClient),this.tunings=new zbe(this.apiClient),this.fileSearchStores=new Oxe(this.apiClient)}}const e1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.themes&&Array.isArray(e.themes)&&(e.themes.forEach(r=>n.lifeDispatch.addTheme(r)),i.push(`${e.themes.length} Themes`),e.themes.length>0&&setTimeout(()=>n.lifeDispatch.setTheme(e.themes[0].id),500))},t1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.skills&&Array.isArray(e.skills)&&(e.skills.forEach(r=>{n.skillDispatch.addSkill(r.title,r.relatedStats,r.description)}),i.push(`${e.skills.length} Skills`))},uN=t=>!t||!Array.isArray(t)?[]:t.map((e,n)=>{const i=typeof e=="string"?e:e.title,r=typeof e=="object"&&e.isCompleted?e.isCompleted:!1;return{id:`st_ai_${Date.now()}_${n}`,title:i||"Unknown Step",isCompleted:r}}),dN=t=>!t||!Array.isArray(t)?[]:t.map((e,n)=>({id:`rem_ai_${Date.now()}_${n}`,minutesBefore:e,isSent:!1})),n1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.habits&&Array.isArray(e.habits)&&(e.habits.forEach(r=>{let s=r.type||"daily",a=r.specificDays,u=r.intervalValue,f=r.pattern;r.frequency&&(s=r.frequency.type||s,a=r.frequency.specificDays||a,u=r.frequency.intervalValue||u,f=r.frequency.matrixPattern||f);const d=uN(r.subtasks),p=dN(r.reminders);r.id&&r.id.startsWith("h_")?n.habitDispatch.updateHabit(r.id,{title:r.title,description:r.description,difficulty:r.difficulty,stat:r.stat,skillId:r.skillId,type:s,specificDays:a,intervalValue:u,pattern:f,subtasks:d,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,scheduledTime:r.scheduledTime,reminders:p,dailyTarget:r.dailyTarget,history:r.history,streak:r.streak}):n.habitDispatch.addHabit({title:r.title,description:r.description,difficulty:r.difficulty||"normal",stat:r.stat||"DIS",skillId:r.skillId,type:s,specificDays:a,intervalValue:u,pattern:f,subtasks:d,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,scheduledTime:r.scheduledTime,reminders:p,dailyTarget:r.dailyTarget||1})}),i.push(`${e.habits.length} Habits processed`))},i1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.raids&&Array.isArray(e.raids)&&(e.raids.forEach(r=>{const s=(r.steps||[]).map((a,u)=>({id:a.id||`rs_ai_${Date.now()}_${u}`,title:typeof a=="string"?a:a.title,notes:a.notes||"",isCompleted:a.isCompleted||!1,isLocked:a.isLocked!==void 0?a.isLocked:u>0,scheduledTime:a.scheduledTime,deadline:a.deadline,reminders:dN(a.reminders),isTimed:!!a.durationMinutes,durationMinutes:a.durationMinutes,difficulty:a.difficulty,stat:a.stat,subtasks:uN(a.subtasks)}));r.id&&r.id.startsWith("rd_")?(n.raidDispatch.updateRaid(r.id,{title:r.title,description:r.description,difficulty:r.difficulty,stats:r.stats,skillId:r.skillId,deadline:r.deadline,isCampaign:r.isCampaign}),s.length>0&&n.raidDispatch.mergeRaidSteps(r.id,s)):n.raidDispatch.addRaid({title:r.title,description:r.description,difficulty:r.difficulty||"hard",stats:r.stats||["STR"],skillId:r.skillId,deadline:r.deadline,steps:s,isCampaign:r.isCampaign||void 0})}),i.push(`${e.raids.length} Ops`))},r1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.tasks&&Array.isArray(e.tasks)&&(e.tasks.forEach(r=>{const s=uN(r.subtasks),a=dN(r.reminders);r.id&&r.id.startsWith("t_")?n.taskDispatch.updateTask(r.id,{title:r.title,description:r.description,difficulty:r.difficulty,stat:r.stat,skillId:r.skillId,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,deadline:r.deadline,scheduledTime:r.scheduledTime,subtasks:s,reminders:a,isCampaign:r.isCampaign}):n.taskDispatch.addTask({title:r.title,description:r.description,difficulty:r.difficulty||"normal",stat:r.stat||"STR",skillId:r.skillId,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,deadline:r.deadline,scheduledTime:r.scheduledTime,subtasks:s,reminders:a,isCampaign:r.isCampaign||!1})}),i.push(`${e.tasks.length} Missions`))},s1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.storeItems&&e.storeItems.length>0&&(n.shopDispatch.addStoreItems(e.storeItems),i.push(`${e.storeItems.length} Rewards`))},o1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.badges&&Array.isArray(e.badges)&&(e.badges.forEach(r=>{r.id||(r.id=`bdg_ai_${Date.now()}_${Math.random().toString(36).substr(2,5)}`),n.lifeDispatch.addBadge(r)}),i.push(`${e.badges.length} Badges`))},a1e=t=>{const{payload:e,dispatchers:n,summary:i}=t;e.laws&&Array.isArray(e.laws)&&(e.laws.forEach(r=>{n.taskDispatch.addLaw(r.title||"Unknown Law",r.penaltyType||"gold",r.penaltyValue||50,r.statTarget||void 0)}),i.push(`${e.laws.length} Laws`))},fN={MAX_ITEMS_PER_TYPE:50,MAX_TEXT_LENGTH:500,MAX_NUMBER_VALUE:1e6},zO=t=>t?t.replace(/[<>]/g,"").trim().slice(0,fN.MAX_TEXT_LENGTH):"",l1e=t=>typeof t!="number"||isNaN(t)?0:Math.min(Math.max(0,t),fN.MAX_NUMBER_VALUE),c1e=t=>{const e={meta:t.meta||{}},n=(i,r)=>!i||!Array.isArray(i)?void 0:i.slice(0,fN.MAX_ITEMS_PER_TYPE).map(a=>{const u={};for(const f in a)typeof a[f]=="string"?u[f]=zO(a[f]):typeof a[f]=="number"?u[f]=l1e(a[f]):typeof a[f]=="boolean"?u[f]=a[f]:Array.isArray(a[f])?u[f]=a[f].slice(0,20).map(d=>typeof d=="string"?zO(d):d):typeof a[f]=="object"&&a[f]!==null&&(u[f]=a[f]);return u});return t.tasks&&(e.tasks=n(t.tasks)),t.habits&&(e.habits=n(t.habits)),t.raids&&(e.raids=n(t.raids)),t.skills&&(e.skills=n(t.skills)),t.storeItems&&(e.storeItems=n(t.storeItems)),t.badges&&(e.badges=n(t.badges)),t.themes&&(e.themes=n(t.themes)),t.laws&&(e.laws=n(t.laws)),e},u1e=(t,e)=>{var i;const{lifeDispatch:n}=e;try{const r=t.replace(/```json/g,"").replace(/```/g,"").trim(),s=JSON.parse(r),a=c1e(s),u={payload:a,dispatchers:e,summary:[]};e1e(u),t1e(u),n1e(u),i1e(u),r1e(u),s1e(u),o1e(u),a1e(u);const f=((i=a.meta)==null?void 0:i.packName)||"Unknown Protocol";return u.summary.length===0?{success:!1,message:"Warning: Valid JSON but no recognizable data found."}:(n.addToast(`Injecting: ${f}...`,"level-up"),{success:!0,message:`SECURE INJECTION SUCCESS: ${f}.
Verified & Added: ${u.summary.join(", ")}.`})}catch(r){return console.error("Injection Failed:",r),{success:!1,message:`SECURITY BLOCK: Invalid Data Structure.
${r.message}`}}},_9=({onClose:t})=>{var M;const{state:e,dispatch:n}=De(),{taskState:i,taskDispatch:r}=Oi(),{habitState:s,habitDispatch:a}=Li(),{raidState:u,raidDispatch:f}=ls(),{skillDispatch:d}=Sn(),{shopDispatch:p}=Hy(),{campaignDispatch:m}=md(),[y,b]=C.useState(""),[S,N]=C.useState("idle"),[E,R]=C.useState("System Ready. Paste JSON Code or Upload Backup File."),U=C.useRef(null),j=H=>{var z;const F=(z=H.target.files)==null?void 0:z[0];if(!F)return;const D=new FileReader;D.onload=$=>{var W;const Y=(W=$.target)==null?void 0:W.result;b(Y),R(`File Loaded: ${F.name}
Ready to Execute.`),N("idle")},D.readAsText(F)},B=()=>{try{if(!y.trim())return;const H=JSON.parse(y);b(JSON.stringify(H,null,2)),R("JSON Formatted. Structure Valid."),N("idle")}catch{R("Format Error: Invalid JSON Syntax."),N("error")}},O=()=>{b(""),R("Buffer Cleared."),N("idle")},P=H=>{var Y;const F=s.habits.map(W=>W.title).join(", "),D=u.raids.map(W=>W.title).join(", "),z=e.badgesRegistry.map(W=>W.name).join(", "),$=((Y=i.laws)==null?void 0:Y.map(W=>W.title).join(", "))||"";return`
        ROLE: You are the "Refiner Node" (QA & Compiler).
        TASK: Validate and Fix the INCOMING JSON Payload for the LifeOS System.
        
        CURRENT DATABASE SNAPSHOT:
        - Existing Habits: [${F}]
        - Existing Raids: [${D}]
        - Existing Badges: [${z}]
        - Existing Laws: [${$}]

        INCOMING JSON:
        ${H}

        RULES:
        1. BADGE LINKAGE: If the JSON adds a Badge with 'triggerType': 'habit' or 'raid', verify the 'metricKey' matches an EXACT title in 'Existing Habits/Raids' OR a new habit/raid being added in this same JSON.
           - If there's a mismatch (e.g. Badge says "Drink Water" but Habit is "Drinking Water"), UPDATE the Badge's 'metricKey' to match the Habit exactly.
           - If the metricKey refers to a generic term, try to match it to the closest existing item.
        
        2. LAWS & CONSEQUENCES:
           - If the input describes a rule, punishment, or consequence (e.g., "If I upset my girlfriend, deduct Emotion points"), convert it into a "laws" array.
           - Structure: { "title": "Short Title", "penaltyType": "gold" | "xp" | "stat" | "honor", "penaltyValue": number, "statTarget": "STR" | "INT" | "DIS" | "HEA" | "CRT" | "SPR" | "REL" | "FIN" (only if type is stat) }
           - Example: "If I miss prayer, lose 50 Honor" -> { "laws": [{ "title": "Missed Prayer", "penaltyType": "honor", "penaltyValue": 50 }] }

        3. STRUCTURE: Ensure strict valid JSON. No trailing commas.
        4. OUTPUT:
           - Return ONLY the clean, fixed JSON string. No markdown code blocks. No explanations.
           - If the JSON is fundamentally broken and unfixable, return: "ERROR: [Reason]"
        `},I=async()=>{var H;if(!y.trim()){R("Error: Empty Payload.");return}try{const F=JSON.parse(y);if(F.user&&F.badgesRegistry){N("restoring"),R(` FULL SYSTEM BACKUP DETECTED.
Initiating Total Recall Protocol...`),setTimeout(()=>{n.importData(y),F.tasks&&r.restoreData(F.tasks,F.taskCategories||[],F.laws||[]),F.habits&&a.restoreData(F.habits,F.habitCategories||[]),F.raids&&f.restoreData(F.raids),F.skills&&d.restoreData(F.skills),F.storeItems&&p.restoreData(F.storeItems),F.campaign&&m.restoreData(F.campaign),N("success"),R(` SYSTEM RESTORED SUCCESSFULLY.
Rebooting UI...`),setTimeout(t,2e3)},1e3);return}let D=y;const z=e.user.preferences.apiKeys,$=e.user.preferences.enableRefiner;if(z!=null&&z.refiner&&$)try{N("refining"),R(" Refiner Node Active: Validating Logic...");const W=new Zbe({apiKey:z.refiner}),X=P(y),ve=(H=(await W.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:"Fix this payload."}]}],config:{systemInstruction:X}})).text)==null?void 0:H.trim();if(ve&&ve.startsWith("ERROR:")){N("error"),R(`Refiner Blocked Injection:
${ve}`);return}else if(ve){const Ee=ve.match(/```json\n([\s\S]*?)\n```/)||ve.match(/{[\s\S]*}/);D=Ee?Ee[1]||Ee[0]:ve,b(D),R(" Payload Refined & Optimized.")}}catch(W){console.error("Refiner failed",W),R(" Refiner Offline. Attempting Raw Injection...")}const Y=u1e(D,{lifeDispatch:n,taskDispatch:r,habitDispatch:a,raidDispatch:f,skillDispatch:d,shopDispatch:p});Y.success?(N("success"),R(Y.message),setTimeout(t,2500)):(N("error"),R(Y.message))}catch(F){N("error"),R("JSON Parse Error: "+F.message)}},A=((M=e.user.preferences.apiKeys)==null?void 0:M.refiner)&&e.user.preferences.enableRefiner;return l.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right fade-in duration-300 h-full flex flex-col",children:[l.jsxs("div",{className:"bg-life-black border border-life-gold/20 p-3 rounded-lg flex items-start gap-3 shadow-[0_0_10px_rgba(251,191,36,0.1)]",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-md text-life-gold animate-pulse-slow",children:l.jsx(Oy,{size:18})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"text-xs font-black uppercase text-life-gold tracking-widest mb-1",children:"Data Uplink"}),l.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-bold uppercase bg-life-easy/10 text-life-easy px-1.5 py-0.5 rounded border border-life-easy/20",children:[l.jsx(v0,{size:8})," Protected"]})]}),l.jsxs("div",{className:"text-[10px] text-life-muted leading-relaxed",children:["Paste ",l.jsx("b",{children:"Backup JSON"})," to restore, or ",l.jsx("b",{children:"AI Code"})," to inject items. The system will auto-detect the type.",A&&l.jsxs("span",{className:"block text-life-easy/80 mt-1 flex items-center gap-1",children:[l.jsx(x0,{size:8})," Refiner Node Active"]})]})]})]}),l.jsxs("div",{className:"flex-1 relative group flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:["Input Stream (",y.length," chars)"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"file",ref:U,onChange:j,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var H;return(H=U.current)==null?void 0:H.click()},className:"text-[9px] flex items-center gap-1 text-life-black bg-life-easy hover:bg-emerald-400 px-3 py-1 rounded font-bold transition-all shadow-[0_0_10px_rgba(16,185,129,0.2)]",children:[l.jsx(_0,{size:10})," Upload File"]}),l.jsxs("button",{onClick:B,className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-gold bg-life-black px-2 py-1 rounded border border-zinc-800 hover:border-life-gold/30 transition-all",children:[l.jsx(pd,{size:10})," Format"]}),l.jsxs("button",{onClick:O,className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-hard bg-life-black px-2 py-1 rounded border border-zinc-800 hover:border-life-hard/30 transition-all",children:[l.jsx(bT,{size:10})," Clear"]})]})]}),l.jsx("div",{className:"relative flex-1",children:l.jsx("textarea",{value:y,onChange:H=>b(H.target.value),placeholder:`// PASTE HERE:
// 1. Full Backup JSON (to Restore)
// 2. AI Code (to Inject)`,className:"w-full h-full min-h-[180px] bg-[#050505] text-life-easy font-mono text-[10px] p-4 rounded-lg border border-zinc-800 focus:border-life-gold focus:outline-none resize-none shadow-inner leading-relaxed",spellCheck:!1,maxLength:2e5})})]}),l.jsxs("div",{className:`p-2 rounded border font-mono text-[9px] whitespace-pre-wrap transition-colors duration-300 ${S==="error"?"bg-life-hard/10 border-life-hard text-life-hard":S==="success"?"bg-life-easy/10 border-life-easy text-life-easy":S==="refining"||S==="restoring"?"bg-life-gold/10 border-life-gold text-life-gold":"bg-life-black border-zinc-800 text-life-muted"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-50 border-b border-zinc-800 pb-1",children:[l.jsx(_i,{size:10}),l.jsx("span",{children:"SYSTEM LOG"})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"opacity-50 mr-2",children:[new Date().toLocaleTimeString(),":"]}),E]})]}),l.jsxs("button",{onClick:I,disabled:S==="refining"||S==="restoring",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all
                    ${S==="success"?"bg-life-easy text-black":"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]"}
                    ${S==="refining"||S==="restoring"?"opacity-70 cursor-wait":""}
                `,children:[S==="success"?l.jsx(Ws,{size:16}):S==="refining"||S==="restoring"?l.jsx(bW,{size:16,className:"animate-spin"}):l.jsx(_0,{size:16}),S==="success"?"Operation Complete":S==="refining"?"Refining Logic...":S==="restoring"?"Restoring System...":"Execute Data"]}),S==="error"&&l.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-life-hard opacity-70",children:[l.jsx(y0,{size:10})," Operation Halted. Check Logs."]})]})},d1e=()=>{const{state:t,dispatch:e}=De(),{modalData:n}=t.ui,[i,r]=C.useState(()=>n&&n.defaultType?n.defaultType:"mission"),[s,a]=C.useState(!1),u=()=>{a(!0),setTimeout(()=>{e.setModal("none")},200)},f=()=>{e.setModal("none")};return l.jsx("div",{onClick:u,className:`fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 transition-all duration-200 ${s?"opacity-0 pointer-events-none":"animate-in fade-in bg-black/80 backdrop-blur-sm"}`,children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:`
            bg-life-paper w-full max-w-lg rounded-t-2xl sm:rounded-2xl border border-life-muted/20 shadow-2xl overflow-hidden flex flex-col max-h-[95vh]
            transition-transform duration-300 pb-[env(safe-area-inset-bottom)]
            ${s?"translate-y-full sm:scale-95":"animate-in slide-in-from-bottom-full sm:zoom-in-95"}
        `,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-black/50 shrink-0",children:[l.jsxs("h3",{className:"text-lg font-black tracking-tight text-life-text flex items-center gap-2",children:[l.jsx("span",{className:"text-life-gold",children:"///"})," COMMAND LINE"]}),l.jsx("button",{onClick:u,className:"w-8 h-8 rounded-full flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/20 transition-all",children:l.jsx(dt,{size:20})})]}),l.jsx("div",{className:"px-4 py-3 bg-life-black/40 border-b border-life-muted/10 shrink-0",children:l.jsxs("div",{className:"flex p-1 bg-life-black rounded-xl border border-life-muted/20 overflow-x-auto no-scrollbar gap-1",children:[l.jsxs("button",{onClick:()=>r("mission"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${i==="mission"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[l.jsx(Tr,{size:14})," Mission"]}),l.jsxs("button",{onClick:()=>r("protocol"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${i==="protocol"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[l.jsx(Ir,{size:14})," Protocol"]}),l.jsxs("button",{onClick:()=>r("operation"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${i==="operation"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[l.jsx(Sc,{size:14})," Raid"]}),l.jsxs("button",{onClick:()=>r("injection"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${i==="injection"?"bg-life-easy/20 text-life-easy border border-life-easy/30 shadow-sm":"text-life-muted hover:text-life-easy"}`,children:[l.jsx(_i,{size:14})," Inject"]})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-[300px]",children:[i==="mission"&&l.jsx(Epe,{onClose:f}),i==="protocol"&&l.jsx(Ape,{onClose:f}),i==="operation"&&l.jsx(Ipe,{onClose:f}),i==="injection"&&l.jsx(_9,{onClose:f})]})]})})},f1e=()=>{const{state:t,dispatch:e}=De(),{user:n}=t,i=()=>{e.setModal("none")};return l.jsx("div",{onClick:i,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-500",children:l.jsxs("div",{onClick:r=>r.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center animate-in zoom-in-50 slide-in-from-bottom-10 duration-700",children:[l.jsx("div",{className:"absolute inset-0 bg-life-gold/20 blur-[100px] rounded-full animate-pulse-slow pointer-events-none"}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-24 h-24 rounded-full bg-life-gold border-4 border-life-black shadow-[0_0_50px_rgba(251,191,36,0.6)] flex items-center justify-center animate-bounce",children:l.jsx(Dy,{size:48,className:"text-life-black",strokeWidth:2.5})}),l.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center animate-spin",children:l.jsx(x0,{size:16,className:"text-life-gold"})}),l.jsx("div",{className:"absolute -bottom-2 -left-2 w-8 h-8 bg-life-crimson rounded-full flex items-center justify-center animate-pulse",children:l.jsx(Vy,{size:16,className:"text-white"})})]}),l.jsx("h2",{className:"text-5xl font-black text-white tracking-tighter italic mb-2 drop-shadow-lg",children:"LEVEL UP!"}),l.jsxs("div",{className:"text-2xl font-mono font-bold text-life-gold mb-8 tracking-widest border px-4 py-1 rounded border-life-gold/50 bg-life-gold/10",children:["LEVEL ",n.level]}),l.jsxs("div",{className:"w-full bg-life-paper/80 border border-life-gold/30 rounded-xl p-6 mb-8 shadow-2xl backdrop-blur-md",children:[l.jsx("h3",{className:"text-xs text-life-muted uppercase font-bold tracking-widest mb-4 text-center",children:"Rewards Acquired"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[l.jsx("span",{className:"text-sm font-bold text-life-gold",children:"Gold Currency"}),l.jsx("span",{className:"text-sm font-mono text-white",children:"+100 G"})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[l.jsx("span",{className:"text-sm font-bold text-life-diamond",children:"Shield Max Capacity"}),l.jsx("span",{className:"text-sm font-mono text-white",children:"REFILLED"})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[l.jsx("span",{className:"text-sm font-bold text-life-easy",children:"XP Threshold"}),l.jsx("span",{className:"text-sm font-mono text-white",children:"INCREASED"})]})]})]}),l.jsxs("button",{onClick:i,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.4)] transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2",children:[l.jsx(_t,{size:20,strokeWidth:3}),"Evolve & Continue"]})]})})},h1e=()=>{const{state:t,dispatch:e}=De(),{user:n}=t,i=mT(n.streak),r=m0(n.streak),s=n.streak-r,a=100,u=10,f=a-u*2,d=f*2*Math.PI,p=Math.min(100,n.dailyXP/n.dailyTarget*100),m=d-p/100*d,y=p>=100,b=y?"#10b981":"#fbbf24",S={filter:y?"drop-shadow(0 0 10px rgba(16,185,129,0.6))":"drop-shadow(0 0 10px rgba(251,191,36,0.6))",transition:"stroke-dashoffset 1s ease-in-out, filter 0.5s ease"},N=new Date,E=N.getDay(),R=E===0?6:E-1,U=new Date(N);U.setDate(N.getDate()-R);const j=Array.from({length:7},(P,I)=>{var F;const A=new Date(U);A.setDate(U.getDate()+I);const M=A.toISOString().split("T")[0];let H="future";if(I>R)H="future";else if(I===R)n.dailyXP>=n.dailyTarget?H="success":H="pending";else{const D=(F=n.streakHistory)==null?void 0:F[M];D?H=D:H="fail"}return{label:A.toLocaleDateString("en-US",{weekday:"narrow"}),date:A.getDate(),outcome:H}}),B=P=>{e.updateUser({pendingMode:P}),e.addToast(`Protocol Updated: ${P.toUpperCase()}`,"info")},O=()=>{e.setModal("none")};return l.jsx("div",{onClick:O,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:P=>P.stopPropagation(),className:"bg-life-black border border-life-gold/20 w-full max-w-sm rounded-[2rem] relative overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-8 duration-500 flex flex-col max-h-[90vh]",children:[l.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-full h-64 blur-[90px] rounded-full pointer-events-none transition-colors duration-1000 ${y?"bg-life-easy/5":"bg-life-gold/5"}`}),l.jsx("button",{onClick:O,className:"absolute top-5 right-5 text-life-muted hover:text-white transition-colors z-20 bg-black/40 rounded-full p-1.5 backdrop-blur-sm",children:l.jsx(dt,{size:20})}),l.jsxs("div",{className:"p-6 flex flex-col items-center relative z-10 overflow-y-auto no-scrollbar",children:[l.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-life-muted mb-4 opacity-60",children:"System Integrity"}),l.jsxs("div",{className:"relative flex items-center justify-center mb-6",style:{width:a*2.2,height:a*2.2},children:[l.jsxs("svg",{height:a*2.2,width:a*2.2,className:"overflow-visible transform rotate-90",children:[l.jsx("circle",{stroke:"#1a1a1a",strokeWidth:u,fill:"transparent",r:f,cx:a*1.1,cy:a*1.1}),l.jsx("circle",{stroke:b,strokeWidth:u,strokeDasharray:d+" "+d,style:{strokeDashoffset:m,...S},strokeLinecap:"round",fill:"transparent",r:f,cx:a*1.1,cy:a*1.1})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:[l.jsx("div",{className:`text-6xl font-black drop-shadow-md flex items-center gap-1 leading-[0.8] tracking-tighter ${y?"text-life-easy":"text-life-gold"}`,children:n.streak}),l.jsxs("div",{className:"flex items-center gap-1.5 text-life-muted mt-2 mb-2",children:[l.jsx(hi,{size:14,className:y?"fill-life-easy text-life-easy":"fill-life-gold text-life-gold"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"Days Active"})]}),l.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded border text-[9px] font-black uppercase tracking-widest ${i.phaseColor} bg-black/50 backdrop-blur-sm`,children:[n.dailyXP," / ",n.dailyTarget," XP"]})]})]}),l.jsxs("div",{className:"w-full mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[l.jsx(Vy,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Evolution Gate"})]}),l.jsxs("span",{className:"text-[9px] font-mono text-life-gold",children:[i.progress,"% to Next"]})]}),l.jsxs("div",{className:"relative py-4 bg-life-black/30 rounded-xl border border-life-muted/10",children:[l.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-life-muted/10 -translate-y-1/2 z-0"}),l.jsx("div",{className:"flex items-center gap-4 relative z-10 overflow-x-auto no-scrollbar pb-2 px-4 snap-x",children:ui.map(P=>{const I=n.streak>=P,A=!I&&n.streak<P&&n.streak>=(ui[ui.indexOf(P)-1]||0),M=P===i.prevCheckpoint;return l.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[40px] snap-center shrink-0",children:[l.jsxs("div",{className:`
                                                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all relative
                                                    ${I?"bg-life-gold border-life-gold text-life-black shadow-[0_0_10px_rgba(251,191,36,0.3)]":A?"bg-life-black border-life-gold text-life-gold animate-pulse scale-110 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"bg-life-black border-life-muted/20 text-life-muted/30"}
                                                `,children:[I?l.jsx(Ws,{size:14}):A?l.jsx(Sc,{size:14}):l.jsx(hd,{size:12}),M&&l.jsx("div",{className:"absolute -bottom-2 -right-2 bg-life-black border border-life-muted/50 rounded-full p-0.5",title:"Safety Net",children:l.jsx(is,{size:8,className:"text-life-text"})})]}),l.jsx("span",{className:`text-[9px] font-mono font-bold ${I||A?"text-life-text":"text-life-muted/30"}`,children:P})]},P)})})]})]}),l.jsxs("div",{className:"w-full bg-life-black rounded-lg p-3 border border-life-muted/20 flex items-start gap-3 relative overflow-hidden group mb-6",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-hard/50"}),l.jsx(Bo,{size:16,className:"text-life-hard shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-life-muted",children:"Failure Consequence"}),l.jsxs("span",{className:"text-[10px] font-black text-life-hard uppercase",children:["Streak -",s]})]}),l.jsxs("div",{className:"text-xs text-life-text",children:["If daily target is missed, streak falls to ",l.jsx("span",{className:"font-mono font-bold text-life-gold",children:r})," (Safety Net)."]})]})]}),l.jsxs("div",{className:"w-full mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3 px-2",children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Weekly Survival Log"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-life-diamond/10 border border-life-diamond/20",children:[l.jsx(is,{size:12,className:"text-life-diamond fill-life-diamond/20"}),l.jsxs("span",{className:"text-[10px] text-life-diamond font-bold font-mono",children:[n.shields," ",l.jsx("span",{className:"text-life-diamond/50 text-[8px] uppercase",children:"Stock"})]})]})})]}),l.jsx("div",{className:"flex justify-between bg-life-black/50 p-2.5 rounded-2xl border border-life-muted/10 backdrop-blur-sm",children:j.map((P,I)=>l.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[l.jsxs("div",{className:`
                                        w-7 h-7 rounded-full flex items-center justify-center border transition-all shadow-sm
                                        ${P.outcome==="success"?"bg-life-easy/10 border-life-easy text-life-easy shadow-[0_0_8px_rgba(16,185,129,0.15)]":P.outcome==="shield"?"bg-life-diamond/10 border-life-diamond text-life-diamond":P.outcome==="fail"?"bg-life-hard/10 border-life-hard text-life-hard":P.outcome==="pending"?"bg-life-gold/5 border-life-gold text-life-gold animate-pulse":"bg-transparent border-transparent text-life-muted/10"}
                                    `,children:[P.outcome==="success"&&l.jsx(Ws,{size:12}),P.outcome==="shield"&&l.jsx(is,{size:12}),P.outcome==="fail"&&l.jsx(AY,{size:12}),P.outcome==="pending"&&l.jsx("div",{className:"w-1.5 h-1.5 bg-life-gold rounded-full shadow-[0_0_5px_currentColor]"}),P.outcome==="future"&&l.jsx("div",{className:"w-1 h-1 bg-life-muted/10 rounded-full"})]}),l.jsx("span",{className:`text-[7px] font-black uppercase tracking-wider ${P.outcome==="future"?"text-life-muted/20":"text-life-muted"}`,children:P.label[0]})]},I))})]}),l.jsxs("div",{className:"w-full pt-6 border-t border-life-muted/10",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-5 text-life-muted/60",children:[l.jsx(bt,{size:12}),l.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em]",children:"Next Cycle Protocol"})]}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.values(Mn).map(P=>{const I=n.pendingMode===P,M={[Mn.EASY]:{color:"text-life-easy",border:"border-life-easy",shadow:"shadow-life-easy/20"},[Mn.NORMAL]:{color:"text-life-normal",border:"border-life-normal",shadow:"shadow-life-normal/20"},[Mn.HARD]:{color:"text-life-hard",border:"border-life-hard",shadow:"shadow-life-hard/20"}}[P];let H="",F=_S[P],D=50;return P===Mn.EASY&&(H="Recover",D=50),P===Mn.NORMAL&&(H="Maintain",D=100),P===Mn.HARD&&(H="War",D=200),l.jsxs("button",{onClick:()=>B(P),className:`
                                            relative flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all duration-300
                                            ${I?`bg-transparent border-2 ${M.border} ${M.color} shadow-[0_0_20px_-5px] ${M.shadow} scale-105`:"bg-life-black border border-life-muted/10 text-life-muted/50 hover:border-life-muted/30 hover:text-life-muted"}
                                        `,children:[l.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1.5",children:H}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("span",{className:"text-sm font-black font-mono tracking-tight",children:[F," XP"]}),l.jsxs("span",{className:"text-[9px] opacity-60 font-mono mt-0.5",children:["+",D," G"]})]}),I&&l.jsx("div",{className:`absolute top-2 right-2 w-1.5 h-1.5 rounded-full ${M.color.replace("text-","bg-")} shadow-[0_0_5px_currentColor] animate-pulse`})]},P)})})]})]})]})})},p1e=({dateOverride:t,setDateOverride:e,handleDateChange:n})=>{const{state:i,dispatch:r}=De(),[s,a]=C.useState(""),[u,f]=C.useState(""),d=(p,m)=>{const y=parseInt(s);if(!y||y<=0){r.addToast("Invalid Amount","error");return}if(!u.trim()){r.addToast("Reason Required","error");return}const S=y*(m==="add"?1:-1),N={},E=new Date().toISOString();p==="gold"?N.gold=i.user.gold+S:N.currentXP=i.user.currentXP+S;const R={id:`man_${Date.now()}`,itemId:"manual_override",title:`[${p.toUpperCase()}] ${u}`,cost:-S,timestamp:E};N.purchaseHistory=[R,...i.user.purchaseHistory||[]].slice(0,100),r.updateUser(N),r.addToast("Transaction Logged","success"),a(""),f("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-life-gold font-bold flex items-center gap-2",children:[l.jsx(dW,{size:14})," Manual Override"]}),l.jsxs("div",{className:"bg-life-black border border-life-muted/20 p-3 rounded-lg space-y-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-[9px] text-life-muted uppercase font-bold block mb-1",children:"Reason"}),l.jsxs("div",{className:"flex items-center gap-2 bg-[#0a0a0a] border border-life-muted/30 rounded px-2",children:[l.jsx(ep,{size:10,className:"text-life-muted"}),l.jsx("input",{type:"text",value:u,onChange:p=>f(p.target.value),placeholder:"Reason...",className:"w-full bg-transparent p-2 text-xs outline-none"})]})]}),l.jsxs("div",{className:"w-1/3",children:[l.jsx("label",{className:"text-[9px] text-life-muted uppercase font-bold block mb-1",children:"Amount"}),l.jsx("input",{type:"number",value:s,onChange:p=>a(p.target.value),placeholder:"0",className:"w-full bg-[#0a0a0a] border border-life-muted/30 rounded p-2 text-xs outline-none text-center font-mono font-bold"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[9px] text-center text-life-gold font-bold uppercase",children:"Gold"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("button",{onClick:()=>d("gold","add"),className:"flex-1 bg-life-gold/20 text-life-gold border border-life-gold/30 hover:bg-life-gold/30 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(wn,{size:12})," Add"]}),l.jsxs("button",{onClick:()=>d("gold","sub"),className:"flex-1 bg-life-black text-life-muted border border-life-muted/30 hover:text-red-400 hover:border-red-400 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(uw,{size:12})," Sub"]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[9px] text-center text-life-easy font-bold uppercase",children:"XP"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("button",{onClick:()=>d("xp","add"),className:"flex-1 bg-life-easy/20 text-life-easy border border-life-easy/30 hover:bg-life-easy/30 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(wn,{size:12})," Add"]}),l.jsxs("button",{onClick:()=>d("xp","sub"),className:"flex-1 bg-life-black text-life-muted border border-life-muted/30 hover:text-red-400 hover:border-red-400 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(uw,{size:12})," Sub"]})]})]})]})]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-life-muted/10",children:[l.jsxs("h3",{className:"text-life-muted font-bold flex items-center gap-2",children:[l.jsx(Jt,{size:14})," Chronos"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"date",value:t,onChange:p=>e(p.target.value),className:"bg-life-black border border-life-muted/30 rounded p-2 text-white focus:border-life-gold outline-none flex-1"}),l.jsx("button",{onClick:n,className:"bg-life-muted/10 border border-life-muted/30 px-4 py-2 rounded hover:bg-life-muted/20 uppercase font-bold text-[10px]",children:"Shift Time"})]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-life-muted/10",children:[l.jsxs("h3",{className:"text-red-500 font-bold flex items-center gap-2",children:[l.jsx(y0,{size:14})," Danger Zone"]}),l.jsxs("button",{onClick:()=>r.triggerDailyReset(),className:"w-full bg-red-900/20 border border-red-500/30 text-red-400 p-2 rounded hover:bg-red-900/30 flex items-center justify-center gap-2 uppercase font-bold",children:[l.jsx(vT,{size:14})," Force Midnight Protocol"]}),l.jsxs("button",{onClick:()=>r.setModal("resetConfirm"),className:"w-full bg-red-900/20 border border-red-500/30 text-red-400 p-2 rounded hover:bg-red-900/30 flex items-center justify-center gap-2 uppercase font-bold",children:[l.jsx(y0,{size:14})," Wipe Save Data"]})]})]})},Fl=(t,e,n,i,r)=>{const s=r.user.preferences[n];return l.jsxs("button",{onClick:()=>i.togglePreference(n),className:"w-full flex items-center justify-between p-3 rounded-lg bg-life-black border border-life-muted/20 hover:border-life-gold/50 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:s?"text-life-gold":"text-life-muted",children:e}),l.jsx("span",{className:"text-[10px] font-bold text-life-text uppercase tracking-wider",children:t})]}),l.jsx("div",{className:`w-8 h-4 rounded-full relative transition-colors ${s?"bg-life-gold":"bg-life-muted/30"}`,children:l.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${s?"left-4.5":"left-0.5"}`})})]})},m1e=()=>{const{state:t,dispatch:e}=De();return l.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-2",children:[l.jsx("div",{className:"p-3 bg-life-gold/5 border border-life-gold/10 rounded text-[9px] text-life-gold/70 uppercase font-bold tracking-widest",children:"Core System Toggles & Calibration"}),l.jsxs("div",{className:"w-full flex items-center justify-between p-3 rounded-lg bg-life-black border border-life-muted/20",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Jt,{size:16,className:"text-life-gold"}),l.jsx("span",{className:"text-[10px] font-bold uppercase text-life-text",children:"Day Start (Reset Hour)"})]}),l.jsx("select",{value:t.user.preferences.dayStartHour??4,onChange:n=>e.setDayStartHour(parseInt(n.target.value)),className:"bg-black border border-life-gold/30 rounded px-2 py-1 text-xs font-mono font-bold text-life-gold outline-none",children:Array.from({length:24}).map((n,i)=>l.jsxs("option",{value:i,children:[i.toString().padStart(2,"0"),":00"]},i))})]}),l.jsxs("div",{className:"space-y-2",children:[Fl("Neural Feedback (Sound)",l.jsx(PX,{size:16}),"soundEnabled",e,t),Fl("Google Calendar Sync",l.jsx(er,{size:16}),"showCalendarSync",e,t),Fl("AI Context: History Logs",l.jsx(ep,{size:16}),"copyIncludesHistory",e,t),Fl("System Alerts (Push)",l.jsx(dc,{size:16}),"deviceNotificationsEnabled",e,t)]}),l.jsx("div",{className:"h-px bg-life-muted/10 my-2"}),l.jsxs("div",{className:"space-y-2",children:[Fl("Show Spear Tip (Highlights)",l.jsx(bt,{size:16}),"showHighlights",e,t),Fl("Campaign Module UI",l.jsx(MY,{size:16}),"showCampaignUI",e,t),Fl("Horus Eye (Unlock Weeks)",l.jsx(Ly,{size:16}),"unlockAllWeeks",e,t)]})]})},Kf={commander:{title:"The Commander",role:"Strategic General & NLP Core",content:`/// CLASSIFIED: COMMANDER NODE MANUAL ///

1. OVERVIEW
The Commander is the central interface for the user. It is the only node that maintains conversational context (Memory). It acts as a router, deciding whether to handle a query itself or delegate it to a Specialist Node (Executor, Designer, etc.).

2. PERSONALITY PROFILE
- Tone: "The Godfather" / "Strategic General".
- Traits: Ruthless, Efficient, Protective, Authoritative.
- Language: Professional Arabic (Gulf/Saudi Dialect) or English (Based on toggle).

3. TRIGGERS & BEHAVIOR
- "Hello/Hi": Responds with status report.
- "Help/Guide": Explains the system.
- General Chat: Discusses productivity strategies.
- Complex Commands: If a user asks for multiple things ("Add a task AND change theme"), the Commander breaks this down or asks for clarification.

4. MEMORY PROTOCOL
- Storage: 'LIFE_OS_ORACLE_HISTORY' (Local Storage).
- Context Window: Sends last 20 messages to Gemini to maintain conversation flow.
- Reset: Can be purged via "Purge Context Memory" button.

5. DIRECTIVE
"If the user asks to create something, do NOT ask follow-up questions. Deploy defaults immediately."
`},executor:{title:"The Executor",role:"Tactical Injection Engine",content:`/// CLASSIFIED: EXECUTOR NODE MANUAL ///

1. OVERVIEW
The Executor is a "Silent Agent". It does not speak. It outputs raw JSON payloads to modify the application state directly. It handles Tasks, Habits, and Raids.

2. TRIGGER KEYWORDS
- Tasks: "Add task", "Mission", "Remind me to..."
- Habits: "New habit", "Protocol", "Routine..."
- Raids: "Start project", "Operation", "Plan a raid..."

3. JSON SCHEMA (TASKS)
{
  "tasks": [
    {
      "title": "String (Required)",
      "difficulty": "easy | normal | hard",
      "stat": "STR | INT | DIS | HEA | CRT | SPR | REL | FIN",
      "deadline": "YYYY-MM-DD",
      "subtasks": ["Step 1", "Step 2"]
    }
  ]
}

4. JSON SCHEMA (HABITS)
{
  "habits": [
    {
      "title": "String",
      "type": "daily | specific_days | interval",
      "stat": "DIS",
      "dailyTarget": 1
    }
  ]
}

5. ERROR HANDLING
If the Executor outputs invalid JSON, the "Refiner Node" (if active) attempts to repair syntax errors before injection.
`},designer:{title:"The Designer",role:"Visual Cortex & Theme Engine",content:`/// CLASSIFIED: DESIGNER NODE MANUAL ///

1. OVERVIEW
The Designer has full control over the CSS Variables and DOM styling of LifeOS. It can generate themes on the fly based on abstract descriptions (e.g., "Make it look like Cyberpunk 2077").

2. TRIGGER KEYWORDS
- "Change theme", "Colors", "Design", "Look like..."

3. INJECTION CAPABILITIES
- Colors: Modifies --color-life-black, --color-life-gold, etc.
- CSS: Can inject raw CSS blocks to change border-radius, fonts, or layout shapes.

4. JSON SCHEMA (THEMES)
{
  "themes": [
    {
      "id": "unique_id",
      "name": "Display Name",
      "colors": {
        "--color-life-black": "#000000",
        "--color-life-paper": "#111111",
        "--color-life-gold": "#FFD700",
        "--color-life-text": "#FFFFFF"
      },
      "customCss": "body { font-family: 'Courier New'; }"
    }
  ]
}

5. PERSISTENCE
Themes created by the Designer are saved to 'user.unlockedThemes' and persist across reloads.
`},observer:{title:"The Observer",role:"Data Analyst & Critic",content:`/// CLASSIFIED: OBSERVER NODE MANUAL ///

1. OVERVIEW
The Observer has read-only access to the entire User Profile (JSON). It analyzes Stats, Metrics, Streaks, and Badge History to provide tough love or strategic insights.

2. TRIGGER KEYWORDS
- "Analyze my stats", "How am I doing?", "Report", "Status"

3. DATA ACCESS LEVEL
- user.stats (STR, INT, DIS...)
- user.metrics (Total Tasks, Completion Rates)
- user.streakHistory (Calendar Heatmap)
- user.inventory (Items owned)

4. ANALYSIS MODES
- Roast Mode: Cruelly points out weaknesses (Low DIS stat).
- Coach Mode: Suggests which Skill Tree to focus on based on lowest stats.
- Prediction: Estimates time to next Level Up based on current XP velocity.

5. OUTPUT
Returns text-only analysis. Does not modify state.
`}},g1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(null),i=()=>{confirm(` PURGE NEURAL MEMORY?
This will erase the AI's conversation history. Context will be reset.`)&&(localStorage.removeItem("LIFE_OS_ORACLE_HISTORY"),window.dispatchEvent(new Event("oracle-memory-cleared")),t.addToast("Neural Memory Purged","success"))},r=()=>{if(!e)return;const a=Kf[e],u=new Blob([a.content],{type:"text/plain"}),f=URL.createObjectURL(u),d=document.createElement("a");d.href=f,d.download=`Manual_${a.title.replace(/\s+/g,"_")}.txt`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(f),t.addToast("Manual Downloaded","success")},s=()=>{e&&(navigator.clipboard.writeText(Kf[e].content),t.addToast("Manual Copied to Clipboard","success"))};return e?l.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right-4",children:[l.jsxs("button",{onClick:()=>n(null),className:"flex items-center gap-2 text-life-muted hover:text-life-gold mb-3 uppercase font-bold text-[10px]",children:[l.jsx(g3,{size:12})," Back to Gem List"]}),l.jsxs("div",{className:"flex-1 bg-life-black/50 border border-life-muted/20 rounded-xl overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-3 border-b border-life-muted/20 bg-life-black flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-black text-life-text uppercase tracking-widest",children:Kf[e].title}),l.jsx("p",{className:"text-[9px] text-life-gold font-mono",children:Kf[e].role})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:s,className:"p-2 text-life-muted hover:text-life-easy hover:bg-life-easy/10 rounded transition-all",title:"Copy Text",children:l.jsx(nr,{size:16})}),l.jsx("button",{onClick:r,className:"p-2 text-life-muted hover:text-life-gold hover:bg-life-gold/10 rounded transition-all",title:"Download File",children:l.jsx(Th,{size:16})})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4",children:l.jsx("pre",{className:"whitespace-pre-wrap font-mono text-[10px] text-life-text/80 leading-relaxed",children:Kf[e].content})})]})]}):l.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-2",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-life-gold font-bold uppercase tracking-widest text-[10px] flex items-center gap-2",children:[l.jsx(Oy,{size:14})," Gem Architecture (Select for Manual)"]}),l.jsxs("button",{onClick:()=>n("commander"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-life-easy/50 hover:bg-life-easy/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-life-easy/10 text-life-easy rounded-full",children:l.jsx(_n,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-life-easy",children:"The Commander"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Strategic oversight & general conversation."})]}),l.jsx(xi,{size:14,className:"text-life-muted group-hover:text-life-easy"})]}),l.jsxs("button",{onClick:()=>n("executor"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-purple-400/50 hover:bg-purple-400/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-purple-500/10 text-purple-400 rounded-full",children:l.jsx(_i,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-purple-400",children:"The Executor"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Tactical ops: Instantly Adds Tasks, Habits, Raids."})]}),l.jsx(xi,{size:14,className:"text-life-muted group-hover:text-purple-400"})]}),l.jsxs("button",{onClick:()=>n("designer"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-pink-400/50 hover:bg-pink-400/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-pink-500/10 text-pink-400 rounded-full",children:l.jsx(pi,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-pink-400",children:"The Designer"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Visual cortex: Changes App Themes & Colors."})]}),l.jsx(xi,{size:14,className:"text-life-muted group-hover:text-pink-400"})]}),l.jsxs("button",{onClick:()=>n("observer"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-blue-400/50 hover:bg-blue-400/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-full",children:l.jsx(y3,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-blue-400",children:"The Observer"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Analyzes your Stats, Metrics & Performance."})]}),l.jsx(xi,{size:14,className:"text-life-muted group-hover:text-blue-400"})]})]}),l.jsxs("div",{className:"border-t border-life-muted/10 pt-4",children:[l.jsxs("h3",{className:"text-life-gold font-bold uppercase tracking-widest text-[10px] flex items-center gap-2 mb-3",children:[l.jsx(bt,{size:14})," Maintenance"]}),l.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-red-950/20 border border-red-900/30 text-red-400 hover:bg-red-900/30 transition-all uppercase font-bold text-[10px]",children:[l.jsx(ei,{size:14})," Purge Context Memory"]})]})]})},y1e=()=>{const{state:t,dispatch:e}=De();return l.jsx("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in slide-in-from-right-2",children:t.user.unlockedThemes.map(n=>{const i=t.user.preferences.theme===n.id;return l.jsxs("button",{onClick:()=>e.setTheme(n.id),className:`p-3 rounded-xl border flex flex-col gap-2 transition-all text-left relative overflow-hidden ${i?"border-life-gold bg-life-gold/10":"border-life-muted/20 bg-life-black hover:border-life-gold/30"}`,children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("div",{className:"w-3 h-3 rounded-full border border-zinc-800",style:{backgroundColor:n.colors["--color-life-black"]}}),l.jsx("div",{className:"w-3 h-3 rounded-full border border-zinc-800",style:{backgroundColor:n.colors["--color-life-paper"]}}),l.jsx("div",{className:"w-3 h-3 rounded-full border border-zinc-800",style:{backgroundColor:n.colors["--color-life-gold"]}})]}),l.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${i?"text-life-gold":"text-life-muted"}`,children:n.name}),i&&l.jsx("div",{className:"absolute top-1 right-1",children:l.jsx(_t,{size:10,className:"text-life-gold"})})]},n.id)})})},v1e=()=>{const{state:t}=De();return l.jsxs("div",{className:"p-3 bg-life-black border border-life-muted/20 rounded animate-in fade-in",children:[l.jsxs("h3",{className:"text-life-gold font-bold mb-2 flex items-center gap-2",children:[l.jsx(Ly,{size:12})," Data Snapshot"]}),l.jsx("pre",{className:"whitespace-pre-wrap opacity-70 text-[9px]",children:JSON.stringify(t.user,null,2)})]})},x1e=()=>{var e;const{state:t}=De();return l.jsx("div",{className:"space-y-2 animate-in fade-in",children:(e=t.ui.systemLogs)==null?void 0:e.map(n=>l.jsxs("div",{className:"flex gap-2 border-b border-life-muted/10 pb-1",children:[l.jsx("span",{className:"text-[9px] text-life-muted min-w-[50px]",children:n.timestamp?new Date(n.timestamp).toLocaleTimeString():"---"}),l.jsxs("span",{className:`font-bold text-[9px] uppercase ${n.type==="error"?"text-red-500":"text-life-gold"}`,children:["[",n.type,"]"]}),l.jsx("span",{className:"text-[9px]",children:n.message})]},n.id))})},b1e=()=>{const{state:t,dispatch:e}=De(),n=i=>{var s;const r=(s=i.target.files)==null?void 0:s[0];r&&e.setCustomAudio(r)};return l.jsxs("div",{className:"p-4 bg-life-black border border-life-gold/20 rounded-lg text-center space-y-4 animate-in fade-in",children:[l.jsx("div",{className:"w-16 h-16 bg-life-gold/10 rounded-full flex items-center justify-center mx-auto border border-life-gold/30",children:l.jsx(g0,{size:32,className:"text-life-gold"})}),l.jsxs("label",{className:"block w-full cursor-pointer",children:[l.jsx("input",{type:"file",accept:"audio/*",onChange:n,className:"hidden"}),l.jsxs("div",{className:"w-full py-3 border border-dashed border-life-muted/50 rounded-lg hover:border-life-gold hover:bg-life-gold/5 transition-all flex items-center justify-center gap-2 text-life-text",children:[l.jsx(_0,{size:14})," Neural Audio Sync"]})]}),t.ui.customAudio&&l.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-2 rounded text-green-400 text-[10px]",children:["Active Uplink: ",l.jsx("span",{className:"font-bold text-white",children:t.ui.customAudio.name})]})]})},_1e=()=>{const{state:t,dispatch:e}=De(),{campaignDispatch:n}=md(),[i,r]=C.useState("system"),[s,a]=C.useState("");C.useEffect(()=>{t.ui.debugDate&&a(t.ui.debugDate.split("T")[0])},[t.ui.debugDate]);const u=()=>{if(!s)e.setDebugDate(null),e.addToast("Debug Time: Synced","info");else{const d=new Date(s);d.setHours(12,0,0,0),e.setDebugDate(d.toISOString()),n.updateStartDate(d.toISOString()),e.addToast(`Time Shift: ${s}`,"level-up")}},f=()=>{switch(i){case"system":return l.jsx(m1e,{});case"oracle":return l.jsx(g1e,{});case"actions":return l.jsx(p1e,{dateOverride:s,setDateOverride:a,handleDateChange:u});case"themes":return l.jsx(y1e,{});case"state":return l.jsx(v1e,{});case"log":return l.jsx(x1e,{});case"media":return l.jsx(b1e,{});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{className:"bg-[#0a0a0a] border border-life-gold/30 w-full max-w-lg rounded-xl shadow-2xl flex flex-col h-[85vh] overflow-hidden font-mono text-xs",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-gold/20 bg-life-gold/5",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-gold",children:[l.jsx(_i,{size:18}),l.jsx("span",{className:"font-black uppercase tracking-[0.2em] text-sm",children:"God Mode Shell"})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-gold hover:text-white p-1",children:l.jsx(dt,{size:20})})]}),l.jsx("div",{className:"flex border-b border-life-muted/10 overflow-x-auto no-scrollbar bg-black/40",children:[{id:"system",icon:l.jsx(ZW,{size:12})},{id:"oracle",icon:l.jsx(_n,{size:12})},{id:"actions",icon:l.jsx(bt,{size:12})},{id:"themes",icon:l.jsx(pi,{size:12})},{id:"state",icon:l.jsx(Ly,{size:12})},{id:"log",icon:l.jsx(_i,{size:12})},{id:"media",icon:l.jsx(g0,{size:12})}].map(d=>l.jsxs("button",{onClick:()=>r(d.id),className:`flex-1 min-w-[75px] py-4 flex flex-col items-center gap-1 uppercase font-black text-[9px] transition-all border-b-2 ${i===d.id?"bg-life-gold/10 text-life-gold border-life-gold":"text-life-muted border-transparent hover:text-life-silver"}`,children:[d.icon,d.id]},d.id))}),l.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#050505] text-life-text/80",children:f()})]})})},w1e=({editTime:t,setEditTime:e,editReminders:n,setEditReminders:i,editSubtasks:r,setEditSubtasks:s,newSubtaskTitle:a,setNewSubtaskTitle:u,hideSubtasks:f=!1})=>{const d=S=>{if(S===-1)return;n.some(E=>E.minutesBefore===S)||i([...n,{id:`rem_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,minutesBefore:S,isSent:!1}].sort((E,R)=>E.minutesBefore-R.minutesBefore))},p=S=>{i(n.filter(N=>N.id!==S))},m=()=>{if(!a.trim())return;const S={id:`st_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:a.trim(),isCompleted:!1};s([...r,S]),u("")},y=S=>{s(r.filter(N=>N.id!==S))},b=S=>S===0?"At time":S===60?"1h before":S===1440?"1d before":`${S}m before`;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4 space-y-3 bg-life-black/30 p-3 rounded-lg border border-life-muted/10",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[l.jsx(Jt,{size:10})," Scheduled Time"]}),l.jsx("input",{type:"datetime-local",value:t,onChange:S=>e(S.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded p-2 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[l.jsx(dc,{size:10})," Reminders"]}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.map(S=>l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-life-gold/10 border border-life-gold/30 rounded text-[9px] text-life-gold",children:[l.jsx("span",{children:b(S.minutesBefore)}),l.jsx("button",{type:"button",onClick:()=>p(S.id),className:"hover:text-white",children:l.jsx(dt,{size:10})})]},S.id))}),l.jsxs("select",{value:-1,onChange:S=>d(Number(S.target.value)),className:"w-full bg-life-black border border-life-muted/30 rounded p-1.5 text-xs text-life-muted focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:-1,children:"+ Add Alert"}),l.jsx("option",{value:0,children:"At scheduled time"}),l.jsx("option",{value:15,children:"15 mins before"}),l.jsx("option",{value:60,children:"1 hour before"})]})]})]}),!f&&l.jsxs("div",{className:"border-t border-life-muted/10 pt-4 mt-2",children:[l.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(_t,{size:10})," Subtasks"]}),l.jsx("div",{className:"space-y-2 mb-2",children:r.map(S=>l.jsxs("div",{className:"flex items-center justify-between bg-life-black px-2 py-1.5 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text truncate",children:S.title}),l.jsx("button",{onClick:()=>y(S.id),className:"text-life-muted hover:text-life-hard p-1",children:l.jsx(ei,{size:12})})]},S.id))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:a,onChange:S=>u(S.target.value),onKeyDown:S=>S.key==="Enter"&&(S.preventDefault(),m()),placeholder:"Add subtask...",className:"flex-1 bg-life-black border border-life-muted/30 rounded px-2 py-1.5 text-xs text-life-text focus:border-life-gold outline-none"}),l.jsx("button",{onClick:m,className:"bg-life-gold/10 hover:bg-life-gold/20 text-life-gold border border-life-gold/30 rounded px-2",children:l.jsx(wn,{size:14})})]})]})]})},Eg=({stat:t,size:e=14})=>{switch(t){case ee.STR:return l.jsx(ir,{size:e});case ee.INT:return l.jsx(_n,{size:e});case ee.DIS:return l.jsx(bt,{size:e});case ee.HEA:return l.jsx(kr,{size:e});case ee.CRT:return l.jsx(pi,{size:e});case ee.SPR:return l.jsx(hi,{size:e});case ee.REL:return l.jsx(Rr,{size:e});case ee.FIN:return l.jsx(ii,{size:e});default:return l.jsx(Qt,{size:e})}},S1e=()=>{const{state:t,dispatch:e}=De(),{taskState:n,taskDispatch:i}=Oi(),{habitState:r,habitDispatch:s}=Li(),{raidState:a,raidDispatch:u}=ls(),{skillState:f}=Sn(),{modalData:d}=t.ui,p=C.useMemo(()=>{if(!d)return null;const{itemId:Z,type:he,parentId:Ne}=d;if(he==="task"){const pe=n.tasks.find(ue=>ue.id===Z);return pe?{item:pe,title:pe.title,desc:pe.description,difficulty:pe.difficulty,stat:pe.stat,skillId:pe.skillId,scheduledTime:pe.scheduledTime||pe.deadline,reminders:pe.reminders,subtasks:pe.subtasks,isEditable:!0,canArchive:!0,isFullControl:!0}:null}if(he==="habit"){const pe=r.habits.find(ue=>ue.id===Z);return pe?{item:pe,title:pe.title,desc:pe.description,difficulty:pe.difficulty,stat:pe.stat,skillId:pe.skillId,scheduledTime:pe.scheduledTime,reminders:pe.reminders,subtasks:pe.subtasks,isEditable:!0,canArchive:!1,isFullControl:!0}:null}if(he==="raid"||he==="raid_step")if(he==="raid"){const pe=a.raids.find(re=>re.id===Z);if(!pe)return null;const ue=pe.stats&&pe.stats.length>0?pe.stats[0]:ee.STR;return{item:pe,title:pe.title,desc:pe.description,difficulty:pe.difficulty,stat:ue,skillId:pe.skillId,scheduledTime:pe.deadline,reminders:[],subtasks:[],isEditable:!0,canArchive:!0,isFullControl:!0}}else{const pe=a.raids.find(Se=>Se.id===Ne),ue=pe==null?void 0:pe.steps.find(Se=>Se.id===Z);if(!ue||!pe)return null;const re=ue.stat||(pe.stats&&pe.stats.length>0?pe.stats[0]:ee.STR),Re=ue.difficulty||pe.difficulty,$e=pe.skillId;return{item:ue,parentRaid:pe,title:ue.title,desc:ue.notes,difficulty:Re,stat:re,skillId:$e,scheduledTime:ue.scheduledTime,reminders:ue.reminders,subtasks:ue.subtasks,isTimed:ue.isTimed,durationMinutes:ue.durationMinutes,isEditable:!0,canArchive:!0,isFullControl:!0,isSkillLocked:!0}}return null},[d,n.tasks,r.habits,a.raids]),[m,y]=C.useState(!1),[b,S]=C.useState(""),[N,E]=C.useState(""),[R,U]=C.useState(""),[j,B]=C.useState([]),[O,P]=C.useState([]),[I,A]=C.useState(""),[M,H]=C.useState(void 0),[F,D]=C.useState(void 0),[z,$]=C.useState("");if(C.useEffect(()=>{if(p){S(p.title),E(p.desc||""),H(p.difficulty),D(p.stat),$(p.skillId||"");let Z=p.scheduledTime||"";if((d==null?void 0:d.type)!=="habit"&&Z){const he=new Date(Z);if(!isNaN(he.getTime())){const Ne=he.getTimezoneOffset()*6e4;Z=new Date(he.getTime()-Ne).toISOString().slice(0,16)}}U(Z),B(p.reminders||[]),P(p.subtasks||[])}},[p]),!d||!p)return null;const Y=()=>e.setModal("none"),W=()=>{const Z={...p.item};(t.user.preferences.copyIncludesHistory??!0)||(delete Z.history,delete Z.streak,delete Z.streakHistory,delete Z.purchaseHistory);let Ne={};d.type==="habit"?Ne={habits:[Z]}:d.type==="task"?Ne={tasks:[Z]}:d.type==="raid"?Ne={raids:[Z]}:Ne=Z,navigator.clipboard.writeText(JSON.stringify(Ne,null,2)),e.addToast("Item Copied to Clipboard (JSON)","success")},X=()=>{if(!b.trim())return;const{itemId:Z,type:he,parentId:Ne}=d;let pe=R||void 0;if(pe&&he!=="habit"){const re=new Date(pe);isNaN(re.getTime())||(pe=re.toISOString())}const ue={title:b,reminders:j.length>0?j:void 0,subtasks:O};he==="raid_step"?(ue.notes=N,ue.scheduledTime=pe,ue.difficulty=M,ue.stat=F,ue.isTimed=p.item.isTimed):(ue.description=N,ue.difficulty=M,ue.stat=F,ue.skillId=z||void 0,he==="raid"?(ue.deadline=pe,ue.stats=[F]):(ue.scheduledTime=pe,he==="task"&&(ue.deadline=pe))),he==="task"?i.updateTask(Z,ue):he==="habit"?s.updateHabit(Z,ue):he==="raid"?u.updateRaid(Z,ue):he==="raid_step"&&Ne&&u.updateRaidStep(Ne,Z,ue),y(!1),e.addToast("Changes applied successfully","success")},oe=()=>{d.type==="task"?i.archiveTask(d.itemId):d.type==="raid"?u.archiveRaid(d.itemId):d.type==="raid_step"&&u.archiveRaidStep(d.parentId,d.itemId),Y()},ve=()=>{e.setModal("confirmation",{title:"Confirm Deletion",message:"Permanently delete this item?",confirmText:"Delete",isDangerous:!0,onConfirm:()=>{d.type==="task"?i.deleteTask(d.itemId):d.type==="habit"?s.deleteHabit(d.itemId):d.type==="raid"?u.deleteRaid(d.itemId):d.type==="raid_step"&&u.deleteRaidStep(d.parentId,d.itemId)}})},Ee=()=>{p.scheduledTime&&ST(p.title,p.desc||"",p.scheduledTime)},K=Wi[p.difficulty],te=xt[p.stat],ge=p.skillId?f.skills.find(Z=>Z.id===p.skillId):null;return l.jsx("div",{onClick:Y,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{onClick:Z=>Z.stopPropagation(),className:"bg-life-paper w-full max-w-md rounded-xl border border-zinc-800 shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95 duration-300 relative group",children:[l.jsxs("div",{className:"p-5 border-b border-zinc-800 flex justify-between items-start bg-life-black/40",children:[l.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-life-gold bg-life-gold/10 px-2 py-0.5 rounded border border-life-gold/20",children:d.type.replace("_"," ")}),d.parentId&&l.jsx("span",{className:"text-[9px] text-life-muted border border-zinc-800 px-1.5 py-0.5 rounded bg-life-black",children:"Linked"})]}),m?l.jsx("input",{type:"text",value:b,onChange:Z=>S(Z.target.value),className:"w-full bg-black border border-life-gold/50 rounded px-2 py-1 text-lg font-bold text-life-text focus:outline-none",autoFocus:!0}):l.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight font-mono",children:p.title})]}),l.jsx("button",{onClick:Y,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:18})})]}),!m&&l.jsxs("div",{className:"px-5 py-3 bg-life-black border-b border-zinc-800 flex flex-wrap gap-2 items-center",children:[l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded border text-[10px] font-black uppercase ${K} bg-opacity-10`,children:[l.jsx(hd,{size:10}),p.difficulty]}),l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded border text-[10px] font-black uppercase bg-life-paper",style:{borderColor:`${te}40`,color:te},children:[l.jsx(Eg,{stat:p.stat,size:10}),p.stat]}),ge&&l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded border border-life-gold/30 text-life-gold bg-life-gold/5 text-[10px] font-bold",children:[l.jsx(Sr,{size:10})," ",ge.title]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-life-paper relative",children:m?l.jsxs("div",{className:"space-y-4",children:[p.isFullControl&&l.jsxs("div",{className:"bg-life-black/30 p-3 rounded-lg border border-zinc-800 space-y-3",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Difficulty"}),!M&&d.type==="raid_step"&&l.jsx("span",{className:"text-[8px] uppercase font-black text-life-gold/50 tracking-widest",children:"Inherited"})]}),l.jsx("div",{className:"grid grid-cols-3 gap-1",children:Object.values(Ge).map(Z=>{const Ne=(M||p.difficulty)===Z;return l.jsx("button",{onClick:()=>{H(M===Z?void 0:Z)},className:`py-2 rounded text-[9px] font-black uppercase border transition-all ${Ne?`${Wi[Z]} ${Bh[Z]} shadow-sm`:"border-zinc-800 text-life-muted hover:bg-life-muted/5"}`,children:Z},Z)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1",children:["Skill Link ",p.isSkillLocked&&l.jsx("span",{className:"text-life-gold/50",children:"(Inherited)"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:z,onChange:Z=>$(Z.target.value),disabled:p.isSkillLocked,className:`w-full bg-life-black border border-zinc-800 rounded p-1.5 pl-2 text-[10px] text-life-text appearance-none outline-none ${p.isSkillLocked?"opacity-50 cursor-not-allowed":"focus:border-life-gold"}`,children:[l.jsx("option",{value:"",children:"None"}),f.skills.map(Z=>l.jsx("option",{value:Z.id,children:Z.title},Z.id))]}),!p.isSkillLocked&&l.jsx(Pi,{size:10,className:"absolute right-2 top-1/2 -translate-x-1/2 text-life-muted pointer-events-none"})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Attribute"}),!F&&d.type==="raid_step"&&l.jsx("span",{className:"text-[8px] uppercase font-black text-life-gold/50 tracking-widest",children:"Inherited"})]}),l.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-1",children:Object.values(ee).map(Z=>{const Ne=(F||p.stat)===Z;return l.jsx("button",{onClick:()=>{D(F===Z?void 0:Z)},className:`w-7 h-7 shrink-0 rounded flex items-center justify-center border transition-all ${Ne?"bg-life-muted/20 border-life-muted text-life-text":"border-zinc-800 text-life-muted opacity-50"}`,style:{color:Ne?xt[Z]:void 0},children:l.jsx(Eg,{stat:Z,size:12})},Z)})})]})]})]}),l.jsx(w1e,{editTime:R,setEditTime:U,editReminders:j,setEditReminders:B,editSubtasks:O,setEditSubtasks:P,newSubtaskTitle:I,setNewSubtaskTitle:A,hideSubtasks:d.type==="raid"}),d.type==="raid"&&p.item.steps&&l.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold flex items-center gap-1",children:[l.jsx(Qt,{size:12})," Operation Steps"]}),l.jsx("button",{onClick:()=>{const Z={id:`rs_new_${Date.now()}`,title:"New Tactical Step",isCompleted:!1,isLocked:!1,difficulty:p.difficulty,stat:p.stat},he=[...p.item.steps,Z];u.updateRaid(d.itemId,{steps:he}),e.addToast("Step Added","success")},className:"text-[9px] bg-life-gold/10 text-life-gold px-2 py-1 rounded border border-life-gold/20 hover:bg-life-gold/20 transition-colors",children:"+ Add Step"})]}),l.jsx("div",{className:"space-y-2",children:p.item.steps.map((Z,he)=>{var Ne;return l.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-life-black border border-life-muted/20 group hover:border-life-gold/30 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[9px] font-mono text-life-muted opacity-50",children:(he+1).toString().padStart(2,"0")}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:`text-xs font-bold ${Z.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:Z.title}),l.jsxs("div",{className:"flex gap-1 mt-0.5",children:[Z.difficulty&&Z.difficulty!==p.item.difficulty&&l.jsx("span",{className:`text-[7px] font-black uppercase px-1 rounded border ${Wi[Z.difficulty]}`,children:Z.difficulty}),Z.stat&&Z.stat!==((Ne=p.item.stats)==null?void 0:Ne[0])&&l.jsxs("span",{className:"text-[7px] font-black uppercase px-1 rounded border border-life-muted/20 flex items-center gap-0.5",style:{color:xt[Z.stat],borderColor:`${xt[Z.stat]}40`},children:[l.jsx(Eg,{stat:Z.stat,size:6})," ",Z.stat]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:pe=>{pe.stopPropagation(),e.setModal("itemDetails",{itemId:Z.id,type:"raid_step",parentId:d.itemId})},className:"p-1.5 rounded bg-life-muted/10 hover:bg-life-gold/20 text-life-muted hover:text-life-gold",children:l.jsx(Lg,{size:10})}),l.jsx("button",{onClick:pe=>{pe.stopPropagation(),u.deleteRaidStep(d.itemId,Z.id)},className:"p-1.5 rounded bg-life-hard/10 hover:bg-life-hard/20 text-life-hard",children:l.jsx(ei,{size:10})})]})]},Z.id)})})]}),l.jsxs("div",{className:"relative flex flex-col mt-4",children:[l.jsx("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"Description / Intel"}),l.jsx("textarea",{value:N,onChange:Z=>E(Z.target.value),className:"w-full h-24 bg-life-black border border-zinc-800 rounded-lg p-3 text-sm text-life-text focus:border-life-gold outline-none resize-none font-mono"})]})]}):l.jsxs("div",{className:"space-y-4",children:[p.scheduledTime&&l.jsxs("div",{className:"flex gap-2 items-center text-xs text-life-gold bg-life-gold/10 px-3 py-2 rounded-lg border border-life-gold/20 inline-flex",children:[l.jsx(Jt,{size:12}),l.jsx("span",{className:"font-mono font-bold",children:d.type==="habit"?`Daily at ${p.scheduledTime}`:new Date(p.scheduledTime).toLocaleString()}),l.jsx("button",{onClick:Ee,className:"ml-2 border-l border-life-gold/30 pl-2 text-life-gold hover:text-white",children:l.jsx(gT,{size:14})})]}),l.jsx("p",{className:"text-sm text-life-text/90 leading-relaxed font-mono whitespace-pre-wrap",children:p.desc||l.jsx("span",{className:"text-life-muted italic",children:"No Description"})}),p.subtasks&&p.subtasks.length>0&&l.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold mb-2 flex items-center gap-1",children:[l.jsx(_t,{size:12})," Steps"]}),l.jsx("div",{className:"space-y-2",children:p.subtasks.map(Z=>l.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-life-black border border-zinc-800",children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${Z.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-zinc-800"}`,children:l.jsx(_t,{size:12,strokeWidth:3})}),l.jsx("span",{className:`text-xs ${Z.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:Z.title})]},Z.id))})]}),d.type==="raid"&&p.item.steps&&l.jsxs("div",{className:"mt-6 border-t border-zinc-800 pt-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold flex items-center gap-1",children:[l.jsx(Qt,{size:12})," Operation Steps"]}),l.jsx("button",{onClick:()=>{const Z={id:`rs_new_${Date.now()}`,title:"New Tactical Step",isCompleted:!1,isLocked:!1,difficulty:p.difficulty,stat:p.stat},he=[...p.item.steps,Z];u.updateRaid(d.itemId,{steps:he}),e.addToast("Step Added","success")},className:"text-[9px] bg-life-gold/10 text-life-gold px-2 py-1 rounded border border-life-gold/20 hover:bg-life-gold/20 transition-colors",children:"+ Add Step"})]}),l.jsx("div",{className:"space-y-2",children:p.item.steps.map((Z,he)=>{var Ne;return l.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-life-black border border-life-muted/20 group hover:border-life-gold/30 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[9px] font-mono text-life-muted opacity-50",children:(he+1).toString().padStart(2,"0")}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:`text-xs font-bold ${Z.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:Z.title}),l.jsxs("div",{className:"flex gap-1 mt-0.5",children:[Z.difficulty&&Z.difficulty!==p.item.difficulty&&l.jsx("span",{className:`text-[7px] font-black uppercase px-1 rounded border ${Wi[Z.difficulty]}`,children:Z.difficulty}),Z.stat&&Z.stat!==((Ne=p.item.stats)==null?void 0:Ne[0])&&l.jsxs("span",{className:"text-[7px] font-black uppercase px-1 rounded border border-life-muted/20 flex items-center gap-0.5",style:{color:xt[Z.stat],borderColor:`${xt[Z.stat]}40`},children:[l.jsx(Eg,{stat:Z.stat,size:6})," ",Z.stat]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:pe=>{pe.stopPropagation(),e.setModal("itemDetails",{itemId:Z.id,type:"raid_step",parentId:d.itemId})},className:"p-1.5 rounded bg-life-muted/10 hover:bg-life-gold/20 text-life-muted hover:text-life-gold",children:l.jsx(Lg,{size:10})}),l.jsx("button",{onClick:pe=>{pe.stopPropagation(),u.deleteRaidStep(d.itemId,Z.id)},className:"p-1.5 rounded bg-life-hard/10 hover:bg-life-hard/20 text-life-hard",children:l.jsx(ei,{size:10})})]})]},Z.id)})})]})]})}),l.jsxs("div",{className:"p-4 bg-life-black border-t border-zinc-800 flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ve,className:"p-2 rounded-lg text-life-hard hover:bg-life-hard/10",children:l.jsx(ei,{size:16})}),p.canArchive&&l.jsx("button",{onClick:oe,className:"p-2 rounded-lg text-life-muted hover:bg-life-muted/10",children:l.jsx(Sh,{size:16})}),l.jsx("button",{onClick:W,className:"p-2 rounded-lg text-life-gold hover:bg-life-gold/10 border border-life-gold/20",title:"Copy JSON Code",children:l.jsx(nr,{size:16})})]}),m?l.jsxs("button",{onClick:X,className:"px-6 py-2 rounded-lg bg-life-gold text-life-black text-xs font-black uppercase hover:bg-yellow-400 flex items-center gap-2",children:[l.jsx(KW,{size:14})," Save"]}):l.jsxs("button",{onClick:()=>y(!0),className:"px-6 py-2 rounded-lg border border-zinc-800 bg-life-paper text-life-text hover:text-life-gold text-xs font-black uppercase flex items-center gap-2",children:[l.jsx(Lg,{size:14})," Edit"]})]})]})})},T1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(""),[i,r]=C.useState(!1),s=()=>{r(!0),setTimeout(()=>{t.resetSystem()},1500)},a=()=>{t.setModal("none")};return l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-xl animate-in fade-in duration-300",children:l.jsxs("div",{className:"w-full max-w-md bg-[#0f0505] border-2 border-red-600 rounded-2xl shadow-[0_0_50px_rgba(220,38,38,0.3)] overflow-hidden relative flex flex-col animate-in zoom-in-95 slide-in-from-bottom-8 duration-500",children:[l.jsx("div",{className:"h-2 w-full bg-[repeating-linear-gradient(45deg,#dc2626,#dc2626_10px,#000_10px,#000_20px)]"}),l.jsxs("div",{className:"p-6 text-center border-b border-red-900/30 relative",children:[l.jsx("div",{className:"absolute top-4 right-4",children:l.jsx("button",{onClick:a,className:"text-red-800 hover:text-red-500 transition-colors",children:l.jsx(dt,{size:24})})}),l.jsx("div",{className:"w-20 h-20 bg-red-900/10 border border-red-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:l.jsx(C3,{size:40,className:"text-red-600"})}),l.jsx("h2",{className:"text-2xl font-black text-red-500 tracking-tighter uppercase mb-1",children:"System Rebirth"}),l.jsx("p",{className:"text-[10px] text-red-400/60 font-mono tracking-widest uppercase",children:"Protocol 99: New Game Plus"})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"text-center text-sm text-red-200/80 leading-relaxed font-medium",children:["Are you sure you want to wipe the current timeline? This action is ",l.jsx("span",{className:"text-red-500 font-bold underline decoration-red-500/50",children:"irreversible"}),"."]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-2 border-b border-red-900/30 pb-2",children:[l.jsx(ei,{size:14}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Deleted"})]}),l.jsxs("ul",{className:"space-y-1.5",children:[l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Active Missions"]}),l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Habit Streaks"]}),l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Raid Progress"]}),l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Gold & XP"]})]})]}),l.jsxs("div",{className:"bg-green-950/20 border border-green-900/30 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2 border-b border-green-900/30 pb-2",children:[l.jsx(v0,{size:14}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Preserved"})]}),l.jsxs("ul",{className:"space-y-1.5",children:[l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(_t,{size:10})," Earned Badges"]}),l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(_t,{size:10})," Store Items"]}),l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(_t,{size:10})," Unlocked Themes"]}),l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(_t,{size:10})," Skill Trees (Lvl 1)"]})]})]})]})]}),l.jsxs("div",{className:"p-6 pt-0",children:[l.jsx("button",{onClick:s,disabled:i,className:`
                            w-full py-4 rounded-xl font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 transition-all
                            ${i?"bg-red-900 cursor-wait text-red-400":"bg-red-600 hover:bg-red-500 text-black shadow-[0_0_20px_rgba(220,38,38,0.5)] hover:scale-[1.02] active:scale-[0.98]"}
                        `,children:i?l.jsxs(l.Fragment,{children:[l.jsx(E3,{size:18,className:"animate-spin"}),"Wiping System..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Bo,{size:18,fill:"currentColor",className:"text-red-900"}),"EXECUTE REBIRTH"]})}),!i&&l.jsx("button",{onClick:a,className:"w-full mt-3 py-2 text-[10px] font-bold text-red-500/50 uppercase tracking-widest hover:text-red-400",children:"Cancel Operation"})]})]})})},E1e=()=>{const{state:t,dispatch:e}=De(),{modalData:n}=t.ui;if(!n)return null;const{title:i,message:r,onConfirm:s,confirmText:a="Confirm",isDangerous:u=!1}=n,f=()=>{s&&s(),e.setModal("none")};return l.jsx("div",{onClick:()=>e.setModal("none"),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:"bg-life-paper border border-life-muted/20 w-full max-w-sm rounded-xl shadow-2xl p-6 relative overflow-hidden",children:[u&&l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-life-hard"}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("h3",{className:"text-lg font-black text-life-text uppercase tracking-tight flex items-center gap-2",children:[u&&l.jsx(Bo,{size:20,className:"text-life-hard"}),i||"Confirmation"]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:18})})]}),l.jsx("p",{className:"text-sm text-life-muted mb-6 leading-relaxed font-medium",children:r}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>e.setModal("none"),className:"flex-1 py-3 rounded-lg border border-life-muted/20 text-life-muted hover:text-life-text text-xs font-bold uppercase tracking-wider transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:f,className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 transition-all shadow-lg ${u?"bg-life-hard text-life-black hover:bg-red-500":"bg-life-gold text-life-black hover:bg-yellow-400"}`,children:[u?l.jsx(ei,{size:14}):l.jsx(_t,{size:14}),a]})]})]})})},N1e=()=>{const{state:t,dispatch:e}=De(),{modalData:n}=t.ui;if(!n)return null;const{title:i,xp:r,gold:s,multiplier:a,message:u}=n,f=()=>{e.setModal("none")};return l.jsx("div",{onClick:f,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-200",children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-50 slide-in-from-bottom-12 duration-500",children:[l.jsx("div",{className:"absolute inset-0 bg-life-gold/30 blur-[80px] rounded-full animate-pulse-slow pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 bg-life-diamond/20 blur-[120px] rounded-full animate-pulse pointer-events-none"}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-28 h-28 rounded-full bg-life-gold border-4 border-life-black shadow-[0_0_50px_rgba(251,191,36,0.8)] flex items-center justify-center animate-[bounce_1s_infinite]",children:l.jsx(bt,{size:56,className:"text-life-black fill-life-black"})}),l.jsx(x0,{className:"absolute -top-4 -right-4 text-life-diamond animate-spin-slow w-10 h-10"}),l.jsx(x0,{className:"absolute bottom-0 -left-4 text-life-easy animate-pulse w-8 h-8"})]}),l.jsxs("div",{className:"space-y-2 mb-8 relative z-10",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] text-life-gold animate-pulse",children:"Critical Success"}),l.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter drop-shadow-2xl italic",children:i}),l.jsx("p",{className:"text-life-muted text-xs font-mono bg-black/50 px-3 py-1 rounded border border-life-muted/30 inline-block",children:u})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full mb-8 relative z-10",children:[l.jsxs("div",{className:"bg-life-paper/90 border border-life-gold/50 px-4 py-4 rounded-2xl shadow-[0_0_20px_rgba(251,191,36,0.2)] flex flex-col items-center",children:[l.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"XP Gain"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-black text-life-text",children:r}),l.jsxs("span",{className:"text-xs font-bold text-life-gold bg-life-gold/10 px-1 rounded",children:["x",a]})]})]}),l.jsxs("div",{className:"bg-life-paper/90 border border-life-gold/50 px-4 py-4 rounded-2xl shadow-[0_0_20px_rgba(251,191,36,0.2)] flex flex-col items-center",children:[l.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"Gold Loot"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-black text-life-gold",children:s}),l.jsxs("span",{className:"text-xs font-bold text-life-gold bg-life-gold/10 px-1 rounded",children:["x",a]})]})]})]}),l.jsx("button",{onClick:f,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest text-black bg-life-gold shadow-[0_0_30px_rgba(251,191,36,0.6)] hover:scale-105 active:scale-95 transition-all relative z-10",children:"Claim Rewards"})]})})},C1e=()=>{const{state:t,dispatch:e}=De(),{taskState:n,taskDispatch:i}=Oi(),{habitState:r,habitDispatch:s}=Li(),{modalData:a}=t.ui,[u,f]=C.useState("");if(!a||!a.itemId)return null;const{itemId:d,type:p}=a;let m="Item";if(p==="task"){const b=n.tasks.find(S=>S.id===d);b&&(m=b.title)}else if(p==="habit"){const b=r.habits.find(S=>S.id===d);b&&(m=b.title)}const y=b=>{if(b.preventDefault(),!u.trim())return;const S={id:`st_quick_${Date.now()}`,title:u.trim(),isCompleted:!1};if(p==="task"){const N=n.tasks.find(E=>E.id===d);N&&i.updateTask(d,{subtasks:[...N.subtasks,S]})}else if(p==="habit"){const N=r.habits.find(E=>E.id===d);N&&s.updateHabit(d,{subtasks:[...N.subtasks,S]})}e.addToast("Side Mission Added","success"),e.setModal("none")};return l.jsx("div",{onClick:()=>e.setModal("none"),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{onClick:b=>b.stopPropagation(),className:"bg-life-paper border border-life-gold/30 w-full max-w-sm rounded-xl shadow-2xl p-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-widest mb-1",children:"Add Side Mission"}),l.jsx("p",{className:"text-sm font-bold text-white truncate max-w-[200px]",children:m})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:20})})]}),l.jsxs("form",{onSubmit:y,children:[l.jsx("input",{type:"text",value:u,onChange:b=>f(b.target.value),placeholder:"Type additional requirement...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none mb-4"}),l.jsxs("button",{type:"submit",className:"w-full py-3 bg-life-gold text-life-black font-black uppercase tracking-widest rounded-lg hover:bg-yellow-400 flex items-center justify-center gap-2",children:[l.jsx(_t,{size:16})," Confirm"]})]})]})})},A1e=()=>{const{state:t,dispatch:e}=De(),{modalData:n}=t.ui,i=(n==null?void 0:n.mode)||"export",r=(n==null?void 0:n.title)||(i==="export"?"System Backup":"Neural Injection Protocol"),s=(n==null?void 0:n.data)||"",[a,u]=C.useState(s),[f,d]=C.useState(!1),p=C.useRef(null),m=()=>{e.setModal("none")},y=()=>{p.current&&(p.current.select(),navigator.clipboard.writeText(a),d(!0),Ae("success",!0),e.addToast("Copied to Clipboard","success"),setTimeout(()=>d(!1),2e3))},b=()=>{const S=new Blob([a],{type:"application/json"}),N=URL.createObjectURL(S),E=document.createElement("a");E.href=N,E.download=`lifeos-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(N),e.addToast("Backup Downloaded","success"),Ae("success",!0)};return l.jsx("div",{onClick:m,className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:S=>S.stopPropagation(),className:"bg-life-black border border-life-gold/30 w-full max-w-lg rounded-xl shadow-2xl flex flex-col h-[85vh] relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-paper/50 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[i==="export"?l.jsx(Th,{size:18,className:"text-life-gold"}):l.jsx(Oy,{size:18,className:"text-life-easy"}),l.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-life-text",children:r})]}),l.jsx("button",{onClick:m,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:20})})]}),l.jsx("div",{className:"flex-1 p-4 relative overflow-hidden flex flex-col",children:i==="import"?l.jsx("div",{className:"h-full overflow-y-auto pr-1",children:l.jsx(_9,{onClose:m})}):l.jsxs(l.Fragment,{children:[l.jsx("textarea",{ref:p,value:a,onChange:S=>u(S.target.value),readOnly:!0,className:"w-full h-full bg-[#050505] rounded-lg border border-life-muted/20 p-4 font-mono text-[10px] leading-relaxed resize-none focus:outline-none text-life-gold focus:border-life-gold/50 cursor-text",spellCheck:!1,onClick:S=>S.target.select()}),l.jsx("div",{className:"absolute bottom-6 right-6 text-[9px] text-life-muted/50 pointer-events-none",children:"SYSTEM DUMP // READ ONLY"})]})}),i==="export"&&l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/50 shrink-0 flex gap-3",children:[l.jsxs("button",{onClick:b,className:"flex-1 py-3 rounded-lg font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-life-gold text-black hover:bg-yellow-400 shadow-[0_0_15px_rgba(251,191,36,0.3)]",children:[l.jsx(Th,{size:16}),"Download JSON"]}),l.jsx("button",{onClick:y,className:`px-6 py-3 rounded-lg font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all border border-life-muted/30 hover:bg-white/5 ${f?"text-life-easy border-life-easy":"text-life-muted"}`,children:f?l.jsx(_t,{size:16}):l.jsx(nr,{size:16})})]})]})})},k1e=()=>{const{state:t,dispatch:e}=De(),{user:n}=t,{taskState:i}=Oi(),{habitState:r}=Li(),{raidState:s}=ls(),[a,u]=C.useState("today"),{historyData:f,monthAverage:d,monthName:p,year:m,startOffset:y,daysInMonth:b}=C.useMemo(()=>{const O=n.honorDailyLog||{},P=t.ui.debugDate?new Date(t.ui.debugDate):new Date,I=P.getFullYear(),A=P.getMonth(),M=[],H=new Date(I,A+1,0).getDate();for(let z=1;z<=H;z++){const $=`${I}-${String(A+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`,Y=O[$];M.push({date:z,score:Y,fullDate:$})}const F=M.filter(z=>z.score!==void 0).map(z=>z.score),D=F.length>0?Math.round(F.reduce((z,$)=>z+$,0)/F.length):0;return{historyData:M,monthAverage:D,monthName:P.toLocaleString("default",{month:"long"}),year:I,startOffset:new Date(I,A,1).getDay(),daysInMonth:H}},[n.honorDailyLog,t.ui.debugDate]),{items:S,totalWeight:N}=C.useMemo(()=>d3(i.tasks,r.habits,s.raids,t.ui.debugDate),[i.tasks,r.habits,s.raids,t.ui.debugDate]),E=()=>{e.setModal("none")},R=O=>O==="task"?l.jsx(Ir,{size:12}):O==="habit"?l.jsx(ir,{size:12}):l.jsx(Sc,{size:12}),U=S.filter(O=>O.isCompleted).reduce((O,P)=>O+P.weight,0),j=N>0?Math.round(U/N*100):100,B=O=>O===void 0?"bg-life-muted/5 border-life-muted/10 text-life-muted/30":O>=100?"bg-life-crimson/20 border-life-crimson text-life-crimson shadow-[0_0_10px_rgba(220,38,38,0.2)]":O>=90?"bg-cyan-500/20 border-cyan-500 text-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.2)]":O>=80?"bg-life-gold/20 border-life-gold text-life-gold":O>=60?"bg-indigo-500/20 border-indigo-500 text-indigo-400":"bg-red-500/20 border-red-500 text-red-500";return l.jsx("div",{onClick:E,className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:O=>O.stopPropagation(),className:"bg-life-black border border-indigo-500/30 w-full max-w-md rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-8 duration-500 flex flex-col max-h-[85vh]",children:[l.jsxs("div",{className:"p-5 border-b border-indigo-500/10 bg-indigo-950/20 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx(il,{size:20})," Honor Protocol"]}),l.jsx("p",{className:"text-[10px] text-indigo-300/60 mt-1 uppercase tracking-wider",children:a==="today"?"Daily Integrity Breakdown":"Monthly Integrity Log"})]}),l.jsx("button",{onClick:E,className:"text-life-muted hover:text-white",children:l.jsx(dt,{size:20})})]}),a==="today"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-6 flex flex-col items-center border-b border-life-muted/10 bg-life-black/50 animate-in slide-in-from-left-4 duration-300",children:[l.jsxs("div",{className:"text-4xl font-black text-white font-mono mb-2",children:[j,"%"]}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest mb-4",children:"Projected Daily Score"}),l.jsx("div",{className:"w-full max-w-[200px] h-1.5 bg-life-muted/20 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-700",style:{width:`${j}%`}})}),l.jsxs("button",{onClick:()=>u("history"),className:"mt-6 flex items-center gap-2 px-4 py-2 rounded-lg bg-life-paper border border-life-muted/20 hover:border-indigo-500/50 hover:text-indigo-400 transition-all text-[10px] font-bold uppercase tracking-wider",children:[l.jsx(er,{size:14}),"View Monthly History"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-life-muted",children:"Today's Obligations"})}),S.length===0?l.jsx("div",{className:"text-center py-8 text-life-muted/50 italic text-xs",children:"No obligations scheduled for today."}):S.map(O=>l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${O.isCompleted?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/20"}`,children:[l.jsx("div",{className:"flex flex-col items-center justify-center w-10 h-10 rounded bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 font-bold font-mono",children:l.jsxs("span",{className:"text-xs",children:[O.percentage,"%"]})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("div",{className:`text-[9px] uppercase font-black px-1.5 py-px rounded border ${Wi[O.difficulty]}`,children:O.difficulty}),l.jsxs("div",{className:"text-life-muted/50 flex items-center gap-1 text-[9px] uppercase font-bold",children:[R(O.type)," ",O.type]})]}),l.jsx("div",{className:`text-xs font-bold truncate ${O.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:O.title})]}),l.jsx("div",{children:O.isCompleted?l.jsx(Ws,{size:16,className:"text-life-easy"}):l.jsx(SY,{size:16,className:"text-life-hard animate-pulse"})})]},`${O.type}-${O.id}`))]})]}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex-1 flex flex-col p-4 animate-in slide-in-from-right-4 duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("button",{onClick:()=>u("today"),className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-life-muted hover:text-white transition-colors",children:[l.jsx(g3,{size:14})," Back"]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase tracking-widest text-life-muted",children:"Month Average"}),l.jsxs("span",{className:`text-lg font-black font-mono ${d>=90?"text-life-gold":"text-indigo-400"}`,children:[d,"%"]})]})]}),l.jsx("div",{className:"mb-4 text-center",children:l.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest text-white",children:[p," ",m]})}),l.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["S","M","T","W","T","F","S"].map((O,P)=>l.jsx("div",{className:"text-center text-[8px] font-bold text-life-muted/30",children:O},P)),Array.from({length:y}).map((O,P)=>l.jsx("div",{className:"aspect-square"},`empty-${P}`)),f.map(O=>l.jsxs("div",{className:`
                                            aspect-square rounded-lg border flex flex-col items-center justify-center relative group cursor-default
                                            ${B(O.score)}
                                        `,children:[l.jsx("span",{className:"text-[10px] font-bold",children:O.date}),O.score!==void 0&&l.jsxs("span",{className:"text-[8px] font-mono opacity-80",children:[O.score,"%"]}),O.score!==void 0&&l.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:flex flex-col items-center bg-life-black border border-life-muted/20 p-2 rounded-lg z-10 shadow-xl whitespace-nowrap pointer-events-none",children:[l.jsx("span",{className:"text-[10px] font-bold text-white",children:O.fullDate}),l.jsxs("span",{className:`text-xs font-black ${O.score>=100?"text-life-gold":"text-life-muted"}`,children:[O.score,"%"]})]})]},O.date))]}),l.jsx("div",{className:"mt-auto p-3 bg-indigo-950/20 border border-indigo-500/10 rounded-lg text-[10px] text-indigo-300/60 text-center",children:"Calendar reflects recorded daily integrity scores."})]})}),l.jsx("div",{className:"p-3 bg-indigo-950/20 border-t border-indigo-500/10 text-[9px] text-indigo-300/60 text-center",children:a==="today"?"Harder tasks carry more weight. Failure hurts more.":"Consistency builds the strongest alloy."})]})})},I1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are "The Quest Forge" ( ).
GOAL: Generate RPG-style quests (Tasks) for a high-performance individual.

WHEN I ASK FOR A MISSION, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a goal, or provide an existing Task JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "t_123..."), YOU MUST include it in the output to UPDATE that task instead of creating a new one.
2. **Title:** Action-oriented (e.g., "Operation: Deep Dive").
3. **Difficulty:** "easy" (Scout), "normal" (Infantry), "hard" (SpecOps).
4. **Stat:** [STR, INT, DIS, HEA, CRT, SPR, REL, FIN].
5. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
6. **Reminders:** Array of minutes before due (e.g., [15, 60] = 15 mins & 1 hour before).
7. **Campaign:** Set "isCampaign": true if this is a strategic quarterly goal (G12).
8. **Time:**
   - "scheduledTime": ISO String (YYYY-MM-DDTHH:mm) for specific execution time.
   - "deadline": YYYY-MM-DD for due date.
   - "durationMinutes": Number (if timed session).

--- JSON TEMPLATE ---

\`\`\`json
{
  "tasks": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "QUEST_TITLE",
      "difficulty": "hard",
      "stat": "INT",
      "skillId": "OPTIONAL_SKILL_ID",
      "description": " Objective: ... \\n Skill: ...",
      "subtasks": [
        "Step 1 (5m)",
        "Step 2 (10m)"
      ],
      "reminders": [15, 30],
      "isTimed": true,
      "durationMinutes": 45,
      "scheduledTime": "2024-10-25T09:00:00",
      "deadline": "2024-10-25",
      "isCampaign": false
    }
  ],
  "habits": [
    {
      "title": "HABIT_TITLE",
      "difficulty": "normal",
      "stat": "DIS",
      "skillId": "OPTIONAL_SKILL_ID",
      "type": "daily",
      "dailyTarget": 5,
      "description": "e.g. Drink 5 glasses of water"
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Study Physics tomorrow at 10 AM, remind me 30 mins before."
**Output:**
\`\`\`json
{
  "tasks": [
    {
      "title": "Operation: Quantum Mechanics",
      "difficulty": "hard",
      "stat": "INT",
      "description": " Focus: Thermodynamics Chapter 4.",
      "subtasks": ["Review Notes", "Solve 3 Problems"],
      "scheduledTime": "2024-10-26T10:00:00",
      "reminders": [30],
      "isTimed": true,
      "durationMinutes": 60
    }
  ]
}
\`\`\`

**Input:** "Update task 't_999' to be harder and add a subtask."
**Output:**
\`\`\`json
{
  "tasks": [
    {
      "id": "t_999",
      "difficulty": "hard",
      "subtasks": ["Original Step 1", "New Step 2"]
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(_n,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["The Quest Forge ",l.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V5"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Protocol Configuration"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-blue-400 mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-blue-300 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-blue-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),l.jsx("li",{children:'Command the AI to generate tasks (e.g., "Study for exam").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},R1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are "The Protocol Foundry" ( ).
GOAL: Design sustainable Habits (Protocols).

WHEN I ASK FOR A HABIT, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a routine, or provide an existing Habit JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "h_123..."), YOU MUST include it to UPDATE the habit.
2. **Algorithm (Type):** "daily", "specific_days" (requires "specificDays": [0-6]), "interval" (requires "intervalValue": number).
3. **Repetitions:** Use "dailyTarget" (number) for habits that repeat within a day (e.g., "Drink Water" with dailyTarget: 8).
4. **Subtasks:** Habits can have steps! (e.g., Routine -> [Drink Water, Stretch]).
5. **Difficulty:** "easy", "normal", "hard".
6. **Stat:** Primary attribute [STR, INT, DIS, HEA, CRT, SPR, REL, FIN].
7. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
8. **Reminders:** Array of minutes before (e.g., [0, 10]).
9. **Time:** "scheduledTime" (24h format "HH:mm").

--- JSON TEMPLATE ---

\`\`\`json
{
  "habits": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "HABIT_TITLE",
      "stat": "DIS",
      "skillId": "OPTIONAL_SKILL_ID",
      "difficulty": "normal",
      "type": "daily", 
      "dailyTarget": 1,
      "scheduledTime": "07:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Step 1" },
        { "title": "Step 2" }
      ],
      "description": " Cue: ..."
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a Morning Routine (Water, Meditate, Plan) at 6 AM."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "title": "Protocol: Morning Prime",
      "stat": "SPR",
      "difficulty": "hard",
      "type": "daily",
      "dailyTarget": 1,
      "scheduledTime": "06:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Hydrate (500ml)" },
        { "title": "Meditate (10m)" },
        { "title": "Tactical Planning" }
      ]
    }
  ]
}
\`\`\`

**Input:** "Drink 8 glasses of water daily."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "title": "Protocol: Hydration",
      "stat": "HEA",
      "difficulty": "easy",
      "type": "daily",
      "dailyTarget": 8,
      "description": " Goal: 8 glasses (250ml each)."
    }
  ]
}
\`\`\`

**Input:** "Update habit 'h_555' to be every 2 days."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "id": "h_555",
      "type": "interval",
      "intervalValue": 2
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-easy/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-easy/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-easy/10 rounded-lg text-life-easy border border-life-easy/20",children:l.jsx(Qt,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-easy flex items-center gap-2",children:["The Protocol Foundry ",l.jsx("span",{className:"text-[9px] bg-life-easy text-black px-1.5 rounded font-mono",children:"V2"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Habit Engineering Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-life-easy/10 border border-life-easy/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-life-easy mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-life-easy uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-life-easy",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:'Command the AI to design habits (e.g., "Build a morning routine").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-easy text-black hover:bg-emerald-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-easy/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},j1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are "The Treasury Archive" ( ).
GOAL: Understand the LifeOS Economy (XP, Gold, & Stats) to advise on growth strategies.

--- 1. CURRENCY & GROWTH ---
- **XP (Experience):** Levels up the User and Skills.
- **Gold (G):** Currency to buy Items, Themes, and Potions.
- **Stats (Attributes):** Core attributes (STR, INT, DIS, etc.) that level up based on actions.

--- 2. INCOME SOURCES (REVENUE STREAMS) ---

A. ACTIVE DUTY (Tasks & Habits)
   - **Easy:** 
     - XP: 20 | Gold: 10
     - Stat Points: +0.5 (to the linked Stat)
   - **Normal:** 
     - XP: 50 | Gold: 30
     - Stat Points: +1 (to the linked Stat)
   - **Hard:** 
     - XP: 100 | Gold: 100
     - Stat Points: +2 (to the linked Stat)
   
   * Note: Habits build "Streaks". High streaks increase "Daily Salary".
   * **Repetitions (Reps):** Habits can have a "Daily Target" (e.g., Drink Water 8x). 
     - Rewards and Streaks are ONLY awarded after ALL reps are completed.
     - Partial reps do not grant XP/Gold but prevent "Failure" penalties if at least 1 rep is done.

B. OPERATIONS (Raids)
   - **Raid Step (Sub-objective):** 
     - Treated as a Task based on difficulty (Easy/Normal/Hard).
     - Grants XP, Gold, and Stat Points immediately upon completion.
   - **Raid Completion (Victory):** 
     - **Bonus:** 5x the rewards of the final step.
     - **Loot:** Chance for rare items or badges.

C. DAILY SALARY (The Streak)
   - **Easy Mode:** Requires 300 XP.
   - **Normal Mode:** Requires 400 XP.
   - **Hard Mode:** Requires 500 XP.
   - Reward: 50-200 Gold (Scales with Streak length).

D. ACHIEVEMENTS (Badges)
   - **Bronze:** 500 XP | 100 G
   - **Silver:** 1000 XP | 250 G
   - **Gold:** 2000 XP | 500 G
   - **Diamond:** 5000 XP | 1000 G

--- 3. EXPENDITURES (GOLD USAGE) ---
- **Potions:** Restore Energy or Health (Cost: 50-150 G).
- **Artifacts:** Permanent buffs to XP/Gold gain (Cost: 500-5000 G).
- **Themes:** Visual skins for the OS (Cost: 1000+ G).
- **Penalties:** Failing tasks/habits deducts Gold.

--- 4. SKILL MASTERY ---
- Every Task/Habit linked to a Skill (e.g., "Coding") feeds 50% of its XP to that Skill.
- Leveling Skills unlocks specialized Badges.

--- HOW TO USE THIS DATA ---
When I ask "How do I get rich?" or "Plan my leveling", use these values to calculate the optimal path.`,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(ii,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["The Treasury Archive ",l.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Economy Logic Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-life-gold/10 border border-life-gold/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-life-gold mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-life-gold uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-life-gold",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Paste it into your AI's ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:"Now the AI understands how to reward you and plan your economy."})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},P1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are "The War Room" ( ).
GOAL: Plan complex Operations (Raids) for a high-performance individual.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a project, goal, or campaign.

--- OUTPUT RULES ---
1. **Structure:** A Raid is a container for multiple "Steps" (Missions).
2. **Title:** Military/Tactical naming (e.g., "Operation: Apollo").
3. **Difficulty:** "easy", "normal", "hard".
4. **Stats:** Array of primary attributes (e.g., ["STR", "INT"]).
5. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
6. **Steps (The Missions):**
   - Each step acts like a Task.
   - **Inheritance:** Steps inherit Difficulty/Stat from the Raid unless specified.
   - **Anomalies:** You CAN override a step's difficulty/stat (e.g., a "Hard" step in a "Normal" raid).
   - **Skill Lock:** Steps ALWAYS inherit the Raid's Skill. You cannot change this per step.

--- JSON TEMPLATE ---

\`\`\`json
{
  "raids": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "Operation: PROJECT_NAME",
      "difficulty": "hard",
      "stats": ["INT"],
      "skillId": "OPTIONAL_SKILL_ID",
      "description": "Brief tactical overview.",
      "deadline": "YYYY-MM-DD",
      "steps": [
        {
          "title": "Phase 1: Recon",
          "difficulty": "easy", 
          "stat": "INT",
          "subtasks": ["Research", "Draft Plan"]
        },
        {
          "title": "Phase 2: Execution",
          "difficulty": "hard",
          "stat": "DIS", 
          "isTimed": true,
          "durationMinutes": 120
        }
      ]
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Plan a workout month. 3 days cardio, 3 days weights."
**Output:**
\`\`\`json
{
  "raids": [
    {
      "title": "Operation: Iron Body",
      "difficulty": "hard",
      "stats": ["STR"],
      "description": "Monthly physical conditioning cycle.",
      "steps": [
        { "title": "Week 1: Endurance", "difficulty": "normal", "stat": "STR" },
        { "title": "Week 2: Hypertrophy", "difficulty": "hard", "stat": "STR" }
      ]
    }
  ]
}
\`\`\`

**Input:** "Launch a blog. Needs design and coding."
**Output:**
\`\`\`json
{
  "raids": [
    {
      "title": "Operation: Digital Voice",
      "difficulty": "normal",
      "stats": ["INT"],
      "steps": [
        { "title": "UI Design", "stat": "CRT", "difficulty": "normal" },
        { "title": "Backend Setup", "stat": "INT", "difficulty": "hard" }
      ]
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-red-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-red-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg text-red-500 border border-red-500/20",children:l.jsx(is,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-red-500 flex items-center gap-2",children:["The War Room ",l.jsx("span",{className:"text-[9px] bg-red-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Raid Operations Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-red-500 mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-red-500 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-red-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Paste it into your AI's ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:'Command the AI to plan complex projects (e.g., "Plan a marketing campaign").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-red-500 text-black hover:bg-red-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-red-500/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},M1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are the Skill Tree Architect.
GOAL: Define and track long-term proficiencies.

1. **Structure:** Skills are the "containers" for XP earned from Tasks/Habits.
2. **Linking:** Every Task/Habit/Raid SHOULD be linked to a \`skillId\` if possible.
   - When a task is completed, 50% of its XP goes to the linked Skill.
3. **Leveling:**
   - Skills level up independently from the User Level.
   - **Formula:** Next Level XP = 100 * (Level ^ 1.5).
   - **Ranks:**
     - Level 1-9: Novice
     - Level 10-24: Adept
     - Level 25-49: Expert
     - Level 50-99: Master
     - Level 100+: Grandmaster
4. **Rust:** Skills decay if not practiced for 30 days (Rust State).
   - To cure rust: Complete a task linked to that skill.

--- JSON TEMPLATE (SKILLS) ---

\`\`\`json
{
  "skills": [
    {
      "title": "Python Programming",
      "relatedStats": ["INT", "CRT"],
      "description": "Backend development and data science."
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "I want to learn Guitar."
**Output:**
\`\`\`json
{
  "skills": [
    {
      "title": "Guitar Mastery",
      "relatedStats": ["CRT", "DIS"],
      "description": "Acoustic and Electric guitar techniques."
    }
  ]
}
\`\`\`

**Input:** "Add a skill for Cooking."
**Output:**
\`\`\`json
{
  "skills": [
    {
      "title": "Culinary Arts",
      "relatedStats": ["CRT", "HEA"],
      "description": "Mastering flavors and techniques."
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-blue-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-blue-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-500 border border-blue-500/20",children:l.jsx(_n,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-blue-500 flex items-center gap-2",children:["Skill Tree Architect ",l.jsx("span",{className:"text-[9px] bg-blue-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Mastery Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-blue-500 mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-blue-500 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-blue-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Paste it into your AI's ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:'Command the AI to define new skills (e.g., "Add a skill for Guitar").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-blue-500 text-black hover:bg-blue-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-blue-500/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},D1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are "The Bazaar Architect" ( ).
GOAL: Generate RPG-style Shop Items for a gamified productivity app.

WHEN I ASK FOR ITEMS, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a theme (e.g., "Cyberpunk Gear", "Magic Potions") or specific items.

--- OUTPUT RULES ---
1. **IDs:** Must be unique strings (e.g., "item_cyber_deck").
2. **Type:** 
   - "custom": Consumables (e.g., "Skip Gym", "Cheat Meal").
   - "artifact": Permanent passive bonuses (e.g., +10% INT XP).
   - "redemption": Real-world rewards (e.g., "1 Hour Gaming").
3. **Cost:** Balanced (100-500 for consumables, 1000+ for artifacts).
4. **Icons:** Use Lucide React icon names (e.g., "Zap", "Shield", "Coffee").
5. **Effects:** Only for "artifact" type.
   - "xp_boost": Multiplier for XP (0.1 = +10%).
   - "gold_boost": Multiplier for Gold.
   - "stat": Optional. If set (STR, INT, etc.), applies only to that stat.

--- JSON TEMPLATE ---

\`\`\`json
{
  "storeItems": [
    {
      "id": "item_unique_id",
      "title": "ITEM_NAME",
      "description": "Flavor text description.",
      "cost": 500,
      "icon": "Zap",
      "type": "artifact",
      "isInfinite": false,
      "effect": {
        "type": "xp_boost",
        "value": 0.1,
        "stat": "INT"
      }
    },
    {
      "id": "item_potion_01",
      "title": "Health Potion",
      "description": "Restores energy instantly.",
      "cost": 50,
      "icon": "Heart",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a set of productivity potions."
**Output:**
\`\`\`json
{
  "storeItems": [
    {
      "id": "pot_focus",
      "title": "Elixir of Focus",
      "description": "Grants deep work capability for 2 hours.",
      "cost": 150,
      "icon": "FlaskConical",
      "type": "custom",
      "isInfinite": true
    },
    {
      "id": "pot_rest",
      "title": "Draught of Sleep",
      "description": "Ensures a perfect night's rest.",
      "cost": 100,
      "icon": "Moon",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\`\`\`
`,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-pink-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-pink-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-pink-500/10 rounded-lg text-pink-500 border border-pink-500/20",children:l.jsx(N3,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-pink-500 flex items-center gap-2",children:["Shop Archives ",l.jsx("span",{className:"text-[9px] bg-pink-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Economy Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-pink-500/10 border border-pink-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-pink-400 mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-pink-300 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-pink-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),l.jsx("li",{children:'Command the AI to generate items (e.g., "Create legendary coding artifacts").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-pink-500 text-black hover:bg-pink-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-pink-500/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},O1e=()=>{const{state:t,dispatch:e}=De(),{taskState:n}=Oi(),{habitState:i}=Li(),{raidState:r}=ls(),{shopState:s}=Hy(),[a,u]=C.useState(!1),f={user:{level:t.user.level,title:t.user.title,stats:t.user.stats,gold:t.user.gold,xp:t.user.currentXP},activeTasks:n.tasks.filter(m=>!m.isCompleted).map(m=>({title:m.title,difficulty:m.difficulty,stat:m.stat})),habits:i.habits.map(m=>({title:m.title,type:m.type})),activeRaids:r.raids.filter(m=>m.status==="active").map(m=>({title:m.title,difficulty:m.difficulty,progress:m.progress})),shopItems:s.storeItems.map(m=>({title:m.title,cost:m.cost,type:m.type}))},d=`
ROLE: You are the Codex Arbiter (AI_CODEX_GEN).
GOAL: Analyze the user's LifeOS data and generate a strict "Codex of Laws" (Consequences) to enforce discipline.

USER DATA SNAPSHOT:
${JSON.stringify(f,null,2)}

INSTRUCTIONS:
1. Analyze their Tasks, Habits, and Raids to identify potential areas of failure or laziness.
2. Create 5-10 "Laws" (Consequences) that punish them for specific failures.
   - Example: "If I miss [Habit Name], I lose 50 Gold."
   - Example: "If I abandon a Raid Step, I lose 100 XP."
   - Example: "If I buy a useless item, I lose 5 Honor."
3. Use the existing Shop Items to suggest "Fines" (e.g., must buy a "Penalty Token").

PENALTY GUIDELINES (DO NOT EXAGGERATE PUNISHMENT):
- **Stat Points:** -1 to -5 (Use sparingly for severe neglect).
- **Gold:** 50 to 1000 G (Scale with severity).
- **XP:** 100 to 1000 XP (Scale with severity).
- **Honor:** 5% to 25% (Reserved for breaking core habits or oaths).

4. RETURN ONLY VALID JSON in the following format (compatible with the injection engine):

{
  "laws": [
    {
      "title": "Law Name (e.g. Neglect of [Habit])",
      "penaltyType": "gold" | "xp" | "stat" | "honor",
      "penaltyValue": 50,
      "statTarget": "DIS" (only if penaltyType is 'stat')
    }
  ]
}

CRITICAL: Return ONLY the JSON. No markdown.
`,p=()=>{navigator.clipboard.writeText(d),u(!0),setTimeout(()=>u(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-indigo-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-indigo-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400 border border-indigo-500/20",children:l.jsx(Uy,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-indigo-400 flex items-center gap-2",children:["Codex Arbiter ",l.jsx("span",{className:"text-[9px] bg-indigo-500 text-white px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Law Generation Protocol"})]})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-indigo-400 mt-1",children:l.jsx(_3,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-indigo-400 uppercase mb-1",children:"How to Legislate"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-indigo-400",children:[l.jsx("li",{children:"Copy the System Prompt below (it includes your data)."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsx("li",{children:"Paste the text. The AI will analyze your habits/tasks."}),l.jsx("li",{children:'It will generate a list of "Laws" (Consequences).'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${a?"bg-green-500 text-black":"bg-indigo-500 text-white hover:bg-indigo-400"}`,children:[a?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),a?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-indigo-500/30 selection:text-white",children:d})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},L1e=()=>{const{dispatch:t}=De(),[e,n]=C.useState(!1),i=`ROLE: You are "The Badge Architect" ( ).
GOAL: Generate achievement badges for a gamified life operating system.

WHEN I ASK FOR BADGES, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a category (e.g., "Fitness", "Coding") or a specific achievement.

--- OUTPUT RULES ---
1. **ID:** Unique identifier (snake_case), e.g., "early_riser".
2. **Name:** Creative title (e.g., "Dawn Breaker").
3. **Description:** Clear criteria for unlocking.
4. **Icon:** A valid Lucide React icon name (e.g., "Sun", "Dumbbell", "Code").
5. **Category:** One of: "progression", "combat", "warfare", "consistency", "resilience", "economy", "mastery", "skill", "special".
6. **Trigger Type:** One of: "stat", "metric", "manual", "skill", "habit", "raid".
7. **Metric Key:** The specific metric to track (e.g., "totalTasksCompleted", "stats.STR", or the exact Habit Title).
8. **Levels:** Array of 4 tiers ("silver", "gold", "diamond", "crimson"). Each level needs a "target" (number), "quote" (string), and "rewards" (xp and gold).

--- JSON TEMPLATE ---

\`\`\`json
{
  "badges": [
    {
      "id": "badge_unique_id",
      "name": "Badge Name",
      "description": "Unlock criteria description.",
      "icon": "Award",
      "category": "combat",
      "triggerType": "metric",
      "metricKey": "totalTasksCompleted",
      "levels": [
        {
          "tier": "silver",
          "target": 10,
          "quote": "A good start.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 50,
          "quote": "You are getting stronger.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 100,
          "quote": "Unstoppable force.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 500,
          "quote": "A legend is born.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a badge for reading books."
**Output:**
\`\`\`json
{
  "badges": [
    {
      "id": "badge_bookworm",
      "name": "Keeper of Knowledge",
      "description": "Awarded for consistent reading habits.",
      "icon": "BookOpen",
      "category": "special",
      "triggerType": "habit",
      "metricKey": "Read a Book",
      "levels": [
        {
          "tier": "silver",
          "target": 5,
          "quote": "The mind is a muscle.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 20,
          "quote": "Knowledge is power.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 50,
          "quote": "A library in your head.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 100,
          "quote": "Omniscience achieved.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\`\`\`

**Input:** "Create a system badge for daily streaks."
**Output:**
\`\`\`json
{
  "badges": [
    {
      "id": "badge_streak_master",
      "name": "Time Walker",
      "description": "Awarded for maintaining a daily streak.",
      "icon": "Flame",
      "category": "consistency",
      "triggerType": "metric",
      "metricKey": "currentStreak",
      "levels": [
        {
          "tier": "silver",
          "target": 7,
          "quote": "A week of focus.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 30,
          "quote": "A month of discipline.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 100,
          "quote": "A hundred days of power.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 365,
          "quote": "A year of mastery.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\`\`\`
`,r=()=>{navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(il,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["Badge Architect ",l.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Protocol Configuration"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(dt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-purple-400 mt-1",children:l.jsx(Tc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-purple-300 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-purple-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),l.jsx("li",{children:'Command the AI to generate badges (e.g., "Create badges for fitness").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?l.jsx(_t,{size:12}):l.jsx(nr,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:i})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(_i,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},z1e={silver:"text-gray-300 border-gray-300 bg-gray-300/10",gold:"text-yellow-400 border-yellow-400 bg-yellow-400/10",diamond:"text-cyan-400 border-cyan-400 bg-cyan-400/10",crimson:"text-red-600 border-red-600 bg-red-600/10 shadow-[0_0_20px_rgba(220,38,38,0.4)]"},U1e=({data:t,onClose:e})=>{var I;const{badge:n,currentTier:i,history:r,currentValue:s}=t,{state:a,dispatch:u}=De(),{user:f}=a,d=()=>{if(!i)return 0;const A=n.levels.findIndex(M=>M.tier===i);return A>=0?A:0},[p,m]=C.useState(d()),y=n.levels[p],b=y.tier,S=!!r[b],N=!S&&(p===0||!!r[n.levels[p-1].tier]),E=z1e[b],R=E.split(" ")[0],U=(I=f.featuredBadges)==null?void 0:I.includes(n.id),j=()=>{let A=[...f.featuredBadges||[]];if(U)A=A.filter(M=>M!==n.id),u.addToast("Badge unpinned","info");else{if(A.length>=3){u.addToast("Max 3 pinned badges allowed","error");return}A.push(n.id),u.addToast("Badge pinned to Profile","success")}u.updateUser({featuredBadges:A})},B=A=>{A.stopPropagation(),p>0&&m(p-1)},O=A=>{A.stopPropagation(),p<n.levels.length-1&&m(p+1)};let P=0;if(S)P=100;else if(N){const A=p>0?n.levels[p-1].target:0;y.target-A,P=Math.min(100,s/y.target*100)}else P=0;return l.jsx("div",{onClick:e,className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:A=>A.stopPropagation(),className:"w-full max-w-sm bg-life-paper border border-life-muted/20 rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 flex flex-col",children:[l.jsxs("div",{className:`relative p-6 text-center border-b border-life-muted/10 overflow-hidden transition-colors duration-500 ${b==="crimson"?"bg-red-900/10":""}`,children:[l.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-48 h-48 bg-current opacity-10 blur-[60px] rounded-full pointer-events-none transition-colors duration-500 ${R}`}),l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-life-muted hover:text-white z-20",children:l.jsx(dt,{size:20})}),i&&l.jsx("button",{onClick:j,className:`absolute top-4 left-4 p-2 rounded-full border transition-all z-20 ${U?"bg-life-gold text-life-black border-life-gold":"bg-transparent text-life-muted border-life-muted/20 hover:text-white"}`,title:U?"Unpin":"Pin to Profile",children:l.jsx(LW,{size:16,className:U?"fill-current":""})}),l.jsxs("div",{className:"flex items-center justify-between mt-2 mb-4 relative z-10",children:[l.jsx("button",{onClick:B,disabled:p===0,className:`p-2 rounded-full transition-all ${p===0?"opacity-0 pointer-events-none":"text-life-gold hover:bg-life-gold/10 hover:scale-110"}`,children:l.jsx(My,{size:32,strokeWidth:3})}),l.jsx("div",{className:`w-28 h-28 rounded-full border-4 flex items-center justify-center text-5xl shadow-2xl transition-all duration-500 bg-life-black ${E} ${S?"scale-100":"scale-90 opacity-50 grayscale"}`,children:S?n.icon:l.jsx(hd,{size:40})}),l.jsx("button",{onClick:O,disabled:p===n.levels.length-1,className:`p-2 rounded-full transition-all ${p===n.levels.length-1?"opacity-0 pointer-events-none":"text-life-gold hover:bg-life-gold/10 hover:scale-110"}`,children:l.jsx(xi,{size:32,strokeWidth:3})})]}),l.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight text-white mb-1",children:n.name}),l.jsx("div",{className:`inline-block px-3 py-0.5 rounded text-[10px] font-black uppercase tracking-[0.2em] border transition-colors duration-500 ${E}`,children:b})]}),l.jsxs("div",{className:"p-6 space-y-6 flex-1 bg-life-paper relative",children:[l.jsx("div",{className:"text-center flex flex-col items-center justify-center min-h-[40px]",children:l.jsxs("p",{className:"text-sm italic font-serif text-life-muted/80 leading-relaxed animate-in fade-in duration-500",children:['"',y.quote,'"']},p)}),l.jsxs("div",{className:"bg-life-black/40 rounded-xl p-3 border border-life-muted/10 text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-gold/50"}),l.jsxs("span",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest block mb-1 flex items-center justify-center gap-1",children:[l.jsx(Ir,{size:10})," Requirement"]}),l.jsxs("p",{className:"text-xs text-life-text font-medium leading-relaxed",children:[n.description," ",l.jsx("br",{}),l.jsxs("span",{className:"text-life-gold font-bold bg-life-gold/10 px-2 py-0.5 rounded mt-1 inline-block",children:["Target: ",y.target]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-[10px] font-mono font-bold uppercase tracking-wider",children:[l.jsx("span",{className:"text-life-muted",children:"Progress"}),l.jsx("span",{className:S?"text-life-easy":"text-life-gold",children:S?"COMPLETE":`${s} / ${y.target}`})]}),l.jsx("div",{className:"h-2 bg-life-black rounded-full overflow-hidden border border-life-muted/20",children:l.jsx("div",{className:`h-full transition-all duration-500 ${S?"bg-life-easy":"bg-life-gold"}`,style:{width:`${P}%`}})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[l.jsxs("div",{className:`p-3 rounded-xl border flex flex-col items-center justify-center gap-1 transition-colors duration-500 ${S?"bg-life-easy/10 border-life-easy/30":"bg-life-black border-life-muted/20"}`,children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Status"}),l.jsx("span",{className:`text-xs font-black uppercase tracking-wider ${S?"text-life-easy":"text-life-muted"}`,children:S?"ACQUIRED":"LOCKED"})]}),S&&r[b]?l.jsxs("div",{className:"p-3 rounded-xl bg-life-black border border-life-muted/20 flex flex-col items-center justify-center gap-1",children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Unlocked"}),l.jsx("span",{className:"text-[10px] font-mono text-life-text",children:(()=>{const A=r[b]||"";return A.length>=6?`20${A.substring(0,2)}-${A.substring(2,4)}-${A.substring(4,6)}`:"Unknown"})()})]}):l.jsxs("div",{className:"p-3 rounded-xl bg-life-black border border-life-muted/20 flex flex-col items-center justify-center gap-1 opacity-60",children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Reward"}),l.jsxs("span",{className:"text-xs font-bold text-life-gold",children:[y.rewards.gold," G"]})]})]})]}),l.jsx("div",{className:"p-4 bg-life-black border-t border-life-muted/10 flex justify-center gap-2",children:n.levels.map((A,M)=>l.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${M===p?"bg-life-gold w-3":"bg-life-muted/30"}`},M))})]})})},V1e=[{id:"all",label:"All"},{id:"honor",label:"Honor"},{id:"progression",label:"Progression"},{id:"combat",label:"Combat"},{id:"warfare",label:"Warfare"},{id:"consistency",label:"Consistency"},{id:"resilience",label:"Resilience"},{id:"economy",label:"Economy"},{id:"mastery",label:"Stats"}],F1e=()=>{const{getAllBadges:t}=H3(),e=t(),[n,i]=C.useState("all"),[r,s]=C.useState(null),[a,u]=C.useState(!1),f=n==="all"?e:n==="honor"?e.filter(b=>b.badge.id.startsWith("bdg_honor_")):e.filter(b=>b.badge.category===n),d=r?e.find(b=>b.badge.id===r):null,p=e.filter(b=>b.isUnlocked).length,m=Math.round(p/e.length*100),y={silver:e.filter(b=>b.currentTier==="silver").length,gold:e.filter(b=>b.currentTier==="gold").length,diamond:e.filter(b=>b.currentTier==="diamond").length,crimson:e.filter(b=>b.currentTier==="crimson").length};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"HALL OF GLORY"}),l.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:["The Crimson Legacy  ",m,"% Complete"]})]}),l.jsx("div",{className:"text-life-crimson opacity-50 animate-pulse-slow",children:l.jsx(il,{size:28})})]}),l.jsxs("button",{onClick:()=>u(!a),className:"w-full mb-6 py-3 px-4 bg-life-black border border-life-muted/20 rounded-xl flex items-center justify-between hover:bg-life-muted/5 transition-all group shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-text",children:[l.jsx(y3,{size:16}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Protocol Analysis"})]}),a?l.jsx(Zr,{size:16,className:"text-life-muted"}):l.jsx(Pi,{size:16,className:"text-life-muted"})]}),a&&l.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6 animate-in slide-in-from-top-2",children:[l.jsxs("div",{className:"bg-life-black border border-life-muted/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-gray-400",children:y.silver}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Silver"})]}),l.jsxs("div",{className:"bg-life-black border border-yellow-500/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-yellow-500",children:y.gold}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Gold"})]}),l.jsxs("div",{className:"bg-life-black border border-cyan-500/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-cyan-400",children:y.diamond}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Diamond"})]}),l.jsxs("div",{className:"bg-life-black border border-red-600/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-red-500",children:y.crimson}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Crimson"})]})]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar mb-6 pb-2",children:V1e.map(b=>l.jsx("button",{onClick:()=>i(b.id),className:`
                            px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap border transition-all
                            ${n===b.id?"bg-life-gold text-life-black border-life-gold":"bg-life-black text-life-muted border-life-muted/20 hover:border-life-gold/50"}
                        `,children:b.label},b.id))}),l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:f.map(b=>{const{badge:S,currentTier:N,isUnlocked:E}=b;let R="border-life-muted/10",U="text-life-muted/20",j="";return N==="silver"&&(R="border-gray-400/50",U="text-gray-300"),N==="gold"&&(R="border-yellow-500/50",U="text-yellow-400",j="shadow-[0_0_15px_rgba(250,204,21,0.1)]"),N==="diamond"&&(R="border-cyan-500/50",U="text-cyan-400",j="shadow-[0_0_20px_rgba(34,211,238,0.2)]"),N==="crimson"&&(R="border-red-600",U="text-red-500",j="shadow-[0_0_25px_rgba(220,38,38,0.3)] bg-red-900/10"),l.jsxs("button",{onClick:()=>s(S.id),className:`
                                aspect-square rounded-xl border bg-life-paper relative flex flex-col items-center justify-center p-2 group transition-all
                                ${R} ${j}
                                ${E?"hover:scale-105 active:scale-95 cursor-pointer":"opacity-50 grayscale hover:opacity-70"}
                            `,children:[l.jsx("div",{className:`text-3xl mb-2 transition-transform group-hover:scale-110 ${U}`,children:E?S.icon:l.jsx(hd,{size:24})}),l.jsx("div",{className:"text-[8px] font-bold text-center uppercase leading-tight text-life-text/80 line-clamp-2",children:S.name}),N&&l.jsx("div",{className:`absolute top-1 right-1 w-2 h-2 rounded-full ${U.replace("text-","bg-")}`})]},S.id)})}),f.length===0&&l.jsx("div",{className:"py-12 text-center text-life-muted italic text-xs",children:"No badges found in this category."}),d&&l.jsx(U1e,{data:d,onClose:()=>s(null)})]})},H1e=()=>{const{state:t,dispatch:e}=De(),{modalData:n}=t.ui;if(!n||!n.badge)return null;const{badge:i,tier:r,rewards:s}=n,a=()=>{e.setModal("none")};let u="text-gray-300 border-gray-300",f="bg-gray-500";return r==="gold"&&(u="text-yellow-400 border-yellow-400",f="bg-yellow-500"),r==="diamond"&&(u="text-cyan-400 border-cyan-400",f="bg-cyan-500"),r==="crimson"&&(u="text-red-600 border-red-600",f="bg-red-600"),l.jsx("div",{onClick:a,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-50 slide-in-from-bottom-8 duration-700",children:[l.jsx("div",{className:`absolute inset-0 ${f} blur-[120px] opacity-20 rounded-full animate-pulse-slow pointer-events-none`}),l.jsxs("div",{className:"relative mb-6 group",children:[l.jsx("div",{className:`w-32 h-32 rounded-full border-4 flex items-center justify-center text-6xl bg-life-black shadow-[0_0_50px_currentColor] animate-bounce ${u}`,children:i.icon}),l.jsxs("div",{className:"absolute inset-0 animate-[spin_4s_linear_infinite] pointer-events-none",children:[l.jsx(b0,{size:24,className:`absolute -top-4 left-1/2 -translate-x-1/2 ${u.split(" ")[0]} fill-current`}),l.jsx(b0,{size:24,className:`absolute -bottom-4 left-1/2 -translate-x-1/2 ${u.split(" ")[0]} fill-current`})]})]}),l.jsxs("div",{className:"space-y-2 mb-8 relative z-10",children:[l.jsx("h3",{className:`text-sm font-black uppercase tracking-[0.3em] ${u.split(" ")[0]}`,children:"Protocol Achievement"}),l.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter drop-shadow-xl",children:i.name}),l.jsxs("div",{className:`inline-block px-3 py-1 rounded border text-xs font-black uppercase tracking-widest bg-black/50 ${u}`,children:[r," Rank"]})]}),l.jsxs("div",{className:"flex gap-4 mb-8",children:[l.jsxs("div",{className:"bg-life-paper/80 border border-life-muted/30 px-4 py-2 rounded-xl",children:[l.jsx("span",{className:"block text-[10px] text-life-muted uppercase font-bold",children:"XP Gain"}),l.jsxs("span",{className:"text-lg font-mono font-bold text-white",children:["+",s.xp]})]}),l.jsxs("div",{className:"bg-life-paper/80 border border-life-muted/30 px-4 py-2 rounded-xl",children:[l.jsx("span",{className:"block text-[10px] text-life-muted uppercase font-bold",children:"Gold"}),l.jsxs("span",{className:"text-lg font-mono font-bold text-life-gold",children:["+",s.gold]})]})]}),l.jsx("button",{onClick:a,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-black shadow-xl hover:scale-105 active:scale-95 transition-all ${f.replace("bg-","bg-")}`,children:"Claim Glory"})]})})},B1e=({toast:t,onDismiss:e})=>{const[n,i]=C.useState(null),[r,s]=C.useState(0),[a,u]=C.useState(!1),f=t.message.split("|"),d=f[0].trim(),p=f.length>1?f[1].trim():null,m=N=>{i(N.targetTouches[0].clientX)},y=N=>{if(n===null)return;const R=N.targetTouches[0].clientX-n;R>0&&s(R)},b=()=>{r>100?S():(s(0),i(null))},S=()=>{u(!0),s(500),setTimeout(()=>{e(t.id)},200)};return l.jsxs("div",{onTouchStart:m,onTouchMove:y,onTouchEnd:b,onClick:S,style:{transform:`translateX(${r}px)`,opacity:a?0:1-r/300,transition:n!==null?"none":"all 0.2s ease-out"},className:`
                pointer-events-auto cursor-pointer relative overflow-hidden touch-pan-y
                min-w-[280px] max-w-sm w-full backdrop-blur-xl border shadow-2xl rounded-xl p-3
                flex items-center gap-3 animate-in slide-in-from-top-4 fade-in duration-300
                ${t.type==="error"?"bg-red-950/90 border-red-500/50 shadow-red-900/20":t.type==="level-up"?"bg-life-gold/20 border-life-gold bg-black/90 shadow-life-gold/20":t.type==="success"?"bg-green-950/90 border-green-500/50 shadow-green-900/20":"bg-life-black/90 border-life-muted/30 shadow-black/50"}
            `,children:[l.jsxs("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center shrink-0 border
                ${t.type==="error"?"bg-red-500/20 border-red-500 text-red-500":t.type==="level-up"?"bg-life-gold text-black border-life-gold animate-bounce":t.type==="success"?"bg-green-500/20 border-green-500 text-green-500":"bg-life-muted/20 border-life-muted text-life-muted"}
            `,children:[t.type==="error"&&l.jsx(Bo,{size:20}),t.type==="level-up"&&l.jsx(Fy,{size:20,strokeWidth:2.5}),t.type==="success"&&l.jsx(Ws,{size:20}),t.type==="info"&&l.jsx(cW,{size:20}),t.type==="crit"&&l.jsx(bt,{size:20})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsx("span",{className:"text-xs font-bold text-white leading-tight",children:d}),p&&l.jsx("span",{className:`text-[10px] font-mono font-bold uppercase tracking-wider mt-1 truncate ${t.type==="error"?"text-red-300":"text-life-gold"}`,children:p})]}),l.jsx("div",{className:"text-life-muted/50 hover:text-white transition-colors",children:l.jsx(dt,{size:14})})]})},$1e=()=>{const{state:t,dispatch:e}=De(),{toasts:n}=t.ui;return n.length===0?null:l.jsx("div",{className:"fixed top-20 left-0 right-0 z-[150] flex flex-col items-center gap-2 pointer-events-none px-4",children:n.map(i=>l.jsx(B1e,{toast:i,onDismiss:r=>e.removeToast(r)},i.id))})},q1e=({onGuestLogin:t})=>{const[e,n]=C.useState(null),[i,r]=C.useState(!1),s=async()=>{r(!0),n(null);const u=new Os;try{await R5(Ya,u)}catch(f){console.error("Login Error:",f),f.code==="auth/unauthorized-domain"?n(`Domain not authorized: ${window.location.hostname}. Please add this domain to Firebase Console > Authentication > Settings.`):n(f.message||"Access Denied. Neural Link Failed."),r(!1)}},a=()=>{navigator.clipboard.writeText(window.location.hostname),alert("Domain copied to clipboard!")};return l.jsxs("div",{className:"min-h-screen bg-life-black text-life-text flex flex-col items-center justify-center p-6 relative overflow-hidden font-mono selection:bg-life-gold selection:text-life-black",children:[l.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-life-gold/50 to-transparent opacity-50"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-life-gold/50 to-transparent opacity-50"}),l.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,18,18,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-[1] bg-[length:100%_2px,3px_100%] pointer-events-none"}),l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-life-gold/5 rounded-full blur-[100px] animate-pulse"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-life-crimson/5 rounded-full blur-[80px] animate-pulse delay-1000"})]}),l.jsxs("div",{className:"relative z-10 w-full max-w-md bg-life-paper/80 backdrop-blur-xl border border-zinc-800 p-8 rounded-2xl shadow-2xl animate-in fade-in zoom-in-95 duration-500 group",children:[l.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 border-life-gold rounded-tl-lg"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 border-t-2 border-r-2 border-life-gold rounded-tr-lg"}),l.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 border-b-2 border-l-2 border-life-gold rounded-bl-lg"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-life-gold rounded-br-lg"}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-20 h-20 bg-life-black border-2 border-life-gold rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_20px_rgba(251,191,36,0.3)] group-hover:shadow-[0_0_30px_rgba(251,191,36,0.5)] transition-all duration-500",children:l.jsx(bt,{size:40,className:"text-life-gold animate-pulse"})}),l.jsx("h1",{className:"text-4xl font-black uppercase tracking-tighter text-white mb-2 glitch-text","data-text":"LIFE OS",children:"LIFE OS"}),l.jsx("p",{className:"text-xs text-life-gold font-bold uppercase tracking-[0.3em] opacity-80",children:"Neural Interface v2.0"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs text-life-muted font-mono border-b border-zinc-800 pb-2",children:[l.jsx(_i,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["System Status: ",l.jsx("span",{className:"text-life-easy",children:"ONLINE"})]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-life-muted font-mono border-b border-zinc-800 pb-2",children:[l.jsx(is,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["Security Protocol: ",l.jsx("span",{className:"text-life-easy",children:"ACTIVE"})]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-life-muted font-mono border-b border-zinc-800 pb-2",children:[l.jsx(eW,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["Network Uplink: ",l.jsx("span",{className:"text-life-easy",children:"READY"})]})]})]}),e&&l.jsxs("div",{className:"bg-life-hard/10 border border-life-hard/30 text-life-hard text-xs p-3 rounded-lg text-center font-bold animate-shake flex flex-col gap-2",children:[l.jsxs("span",{children:[" ",e]}),e.includes("Domain not authorized")&&l.jsx("button",{onClick:a,className:"text-[10px] underline text-life-gold hover:text-white",children:"Copy Domain"}),l.jsx("button",{onClick:t,className:"mt-2 py-2 px-4 bg-life-muted/20 hover:bg-life-muted/30 text-life-muted hover:text-white rounded border border-life-muted/30 text-[10px] uppercase tracking-wider transition-colors",children:"Continue as Guest (Dev Mode)"})]}),l.jsx("button",{onClick:s,disabled:i,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.2)] hover:shadow-[0_0_30px_rgba(251,191,36,0.4)] transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 group/btn",children:i?l.jsx("span",{className:"animate-pulse",children:"Initializing..."}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),l.jsx("p",{className:"text-[10px] text-life-muted text-center uppercase tracking-wider opacity-60",children:"By connecting, you accept the Neural Link Protocol."})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-[10px] text-life-muted font-mono opacity-40",children:["SYSTEM_ID: ",Math.random().toString(36).substring(7).toUpperCase()," // SECURE_CONNECTION"]})]})},G1e=()=>{const{state:t,dispatch:e}=De(),{ui:n,user:i}=t,[r,s]=C.useState(!1);if(C.useEffect(()=>{const u=()=>{s(!0),setTimeout(()=>s(!1),500)};return window.addEventListener("trigger-shake",u),()=>window.removeEventListener("trigger-shake",u)},[]),!i.hasOnboarded)return l.jsx(pJ,{});const a=()=>{switch(n.currentView){case"profile":return l.jsx(QJ,{});case"shop":return l.jsx(jJ,{});case"tasks":return l.jsx(SJ,{});case"habits":return l.jsx(NJ,{});case"raids":return l.jsx(AJ,{});case"campaign":return l.jsx(tQ,{});case"skills":return l.jsx(rQ,{});case"hall_of_fame":return l.jsx(F1e,{});default:return null}};return l.jsxs("div",{className:`flex flex-col h-[100dvh] bg-life-black text-life-text overflow-hidden select-none font-sans ${r?"animate-shake":""} pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]`,children:[l.jsx(vJ,{}),l.jsx($1e,{}),l.jsx(GX,{}),l.jsxs("main",{className:"flex-1 overflow-y-auto relative p-4 scroll-smooth",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px)",backgroundSize:"20px 20px"}}),l.jsx("div",{className:"max-w-md mx-auto h-full",children:a()})]}),n.activeModal==="addTask"&&l.jsx(d1e,{}),n.activeModal==="levelUp"&&l.jsx(f1e,{}),n.activeModal==="badgeUnlock"&&l.jsx(H1e,{}),n.activeModal==="streak"&&l.jsx(h1e,{}),n.activeModal==="devConsole"&&l.jsx(_1e,{}),n.activeModal==="itemDetails"&&l.jsx(S1e,{}),n.activeModal==="resetConfirm"&&l.jsx(T1e,{}),n.activeModal==="confirmation"&&l.jsx(E1e,{}),n.activeModal==="loot"&&l.jsx(N1e,{}),n.activeModal==="quickSubtask"&&l.jsx(C1e,{}),n.activeModal==="dataExchange"&&l.jsx(A1e,{}),n.activeModal==="login"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("button",{onClick:()=>e.setModal("none"),className:"absolute top-4 right-4 z-50 text-life-muted hover:text-white",children:""}),l.jsx(q1e,{onGuestLogin:()=>e.setModal("none")})]})}),n.activeModal==="honorBreakdown"&&l.jsx(k1e,{})," ",n.activeModal==="questForge"&&l.jsx(I1e,{})," ",n.activeModal==="habitProtocol"&&l.jsx(R1e,{})," ",n.activeModal==="economyProtocol"&&l.jsx(j1e,{})," ",n.activeModal==="raidProtocol"&&l.jsx(P1e,{})," ",n.activeModal==="skillProtocol"&&l.jsx(M1e,{})," ",n.activeModal==="shopProtocol"&&l.jsx(D1e,{})," ",n.activeModal==="codexArbiter"&&l.jsx(O1e,{})," ",n.activeModal==="badgeProtocol"&&l.jsx(L1e,{})," ",l.jsx(hJ,{}),l.jsx(wpe,{}),l.jsx(Tpe,{}),l.jsx(VX,{})]})},K1e=()=>{const[t,e]=C.useState(null),[n,i]=C.useState(!0);return C.useEffect(()=>{const r=MS(Ya,s=>{e(s),i(!1)});return()=>r()},[]),n?l.jsx("div",{className:"h-screen bg-life-black flex items-center justify-center text-life-gold font-mono animate-pulse",children:"INITIALIZING SYSTEM..."}):l.jsx(G1e,{})},UO=document.getElementById("root");UO&&uF.createRoot(UO).render(l.jsx(VO.StrictMode,{children:l.jsx(QK,{children:l.jsx(qX,{children:l.jsx(eJ,{children:l.jsx(rJ,{children:l.jsx(yJ,{children:l.jsx(IJ,{children:l.jsx(xJ,{children:l.jsx(DJ,{children:l.jsx(K1e,{})})})})})})})})})}));export{Cu as I,uh as N,SS as W};
