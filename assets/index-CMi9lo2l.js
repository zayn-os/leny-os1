(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function l(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=l(r);fetch(r.href,d)}})();function N0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Jd={exports:{}},ao={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function x1(){if(nx)return ao;nx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function l(o,r,d){var u=null;if(d!==void 0&&(u=""+d),r.key!==void 0&&(u=""+r.key),"key"in r){d={};for(var h in r)h!=="key"&&(d[h]=r[h])}else d=r;return r=d.ref,{$$typeof:i,type:o,key:u,ref:r!==void 0?r:null,props:d}}return ao.Fragment=e,ao.jsx=l,ao.jsxs=l,ao}var sx;function g1(){return sx||(sx=1,Jd.exports=x1()),Jd.exports}var n=g1(),Xd={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function b1(){if(lx)return je;lx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function N(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function I(D,J,se){this.props=D,this.context=J,this.refs=w,this.updater=se||C}I.prototype.isReactComponent={},I.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},I.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function H(){}H.prototype=I.prototype;function _(D,J,se){this.props=D,this.context=J,this.refs=w,this.updater=se||C}var P=_.prototype=new H;P.constructor=_,E(P,I.prototype),P.isPureReactComponent=!0;var M=Array.isArray;function j(){}var z={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function q(D,J,se){var $=se.ref;return{$$typeof:i,type:D,key:J,ref:$!==void 0?$:null,props:se}}function G(D,J){return q(D.type,J,D.props)}function Q(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function F(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(se){return J[se]})}var ae=/\/+/g;function X(D,J){return typeof D=="object"&&D!==null&&D.key!=null?F(""+D.key):J.toString(36)}function L(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(j,j):(D.status="pending",D.then(function(J){D.status==="pending"&&(D.status="fulfilled",D.value=J)},function(J){D.status==="pending"&&(D.status="rejected",D.reason=J)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function k(D,J,se,$,de){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var ie=!1;if(D===null)ie=!0;else switch(he){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(D.$$typeof){case i:case e:ie=!0;break;case y:return ie=D._init,k(ie(D._payload),J,se,$,de)}}if(ie)return de=de(D),ie=$===""?"."+X(D,0):$,M(de)?(se="",ie!=null&&(se=ie.replace(ae,"$&/")+"/"),k(de,J,se,"",function(Oe){return Oe})):de!=null&&(Q(de)&&(de=G(de,se+(de.key==null||D&&D.key===de.key?"":(""+de.key).replace(ae,"$&/")+"/")+ie)),J.push(de)),1;ie=0;var be=$===""?".":$+":";if(M(D))for(var Te=0;Te<D.length;Te++)$=D[Te],he=be+X($,Te),ie+=k($,J,se,he,de);else if(Te=N(D),typeof Te=="function")for(D=Te.call(D),Te=0;!($=D.next()).done;)$=$.value,he=be+X($,Te++),ie+=k($,J,se,he,de);else if(he==="object"){if(typeof D.then=="function")return k(L(D),J,se,$,de);throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ie}function R(D,J,se){if(D==null)return D;var $=[],de=0;return k(D,$,"","",function(he){return J.call(se,he,de++)}),$}function V(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(se){(D._status===0||D._status===-1)&&(D._status=1,D._result=se)},function(se){(D._status===0||D._status===-1)&&(D._status=2,D._result=se)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var te=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},pe={map:R,forEach:function(D,J,se){R(D,function(){J.apply(this,arguments)},se)},count:function(D){var J=0;return R(D,function(){J++}),J},toArray:function(D){return R(D,function(J){return J})||[]},only:function(D){if(!Q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return je.Activity=v,je.Children=pe,je.Component=I,je.Fragment=l,je.Profiler=r,je.PureComponent=_,je.StrictMode=o,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,je.__COMPILER_RUNTIME={__proto__:null,c:function(D){return z.H.useMemoCache(D)}},je.cache=function(D){return function(){return D.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(D,J,se){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var $=E({},D.props),de=D.key;if(J!=null)for(he in J.key!==void 0&&(de=""+J.key),J)!B.call(J,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&J.ref===void 0||($[he]=J[he]);var he=arguments.length-2;if(he===1)$.children=se;else if(1<he){for(var ie=Array(he),be=0;be<he;be++)ie[be]=arguments[be+2];$.children=ie}return q(D.type,de,$)},je.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:d,_context:D},D},je.createElement=function(D,J,se){var $,de={},he=null;if(J!=null)for($ in J.key!==void 0&&(he=""+J.key),J)B.call(J,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(de[$]=J[$]);var ie=arguments.length-2;if(ie===1)de.children=se;else if(1<ie){for(var be=Array(ie),Te=0;Te<ie;Te++)be[Te]=arguments[Te+2];de.children=be}if(D&&D.defaultProps)for($ in ie=D.defaultProps,ie)de[$]===void 0&&(de[$]=ie[$]);return q(D,he,de)},je.createRef=function(){return{current:null}},je.forwardRef=function(D){return{$$typeof:h,render:D}},je.isValidElement=Q,je.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:V}},je.memo=function(D,J){return{$$typeof:m,type:D,compare:J===void 0?null:J}},je.startTransition=function(D){var J=z.T,se={};z.T=se;try{var $=D(),de=z.S;de!==null&&de(se,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(j,te)}catch(he){te(he)}finally{J!==null&&se.types!==null&&(J.types=se.types),z.T=J}},je.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},je.use=function(D){return z.H.use(D)},je.useActionState=function(D,J,se){return z.H.useActionState(D,J,se)},je.useCallback=function(D,J){return z.H.useCallback(D,J)},je.useContext=function(D){return z.H.useContext(D)},je.useDebugValue=function(){},je.useDeferredValue=function(D,J){return z.H.useDeferredValue(D,J)},je.useEffect=function(D,J){return z.H.useEffect(D,J)},je.useEffectEvent=function(D){return z.H.useEffectEvent(D)},je.useId=function(){return z.H.useId()},je.useImperativeHandle=function(D,J,se){return z.H.useImperativeHandle(D,J,se)},je.useInsertionEffect=function(D,J){return z.H.useInsertionEffect(D,J)},je.useLayoutEffect=function(D,J){return z.H.useLayoutEffect(D,J)},je.useMemo=function(D,J){return z.H.useMemo(D,J)},je.useOptimistic=function(D,J){return z.H.useOptimistic(D,J)},je.useReducer=function(D,J,se){return z.H.useReducer(D,J,se)},je.useRef=function(D){return z.H.useRef(D)},je.useState=function(D){return z.H.useState(D)},je.useSyncExternalStore=function(D,J,se){return z.H.useSyncExternalStore(D,J,se)},je.useTransition=function(){return z.H.useTransition()},je.version="19.2.4",je}var ox;function Ru(){return ox||(ox=1,Xd.exports=b1()),Xd.exports}var U=Ru();const y1=N0(U);var Kd={exports:{}},ro={},Qd={exports:{}},Wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function v1(){return ax||(ax=1,(function(i){function e(k,R){var V=k.length;k.push(R);e:for(;0<V;){var te=V-1>>>1,pe=k[te];if(0<r(pe,R))k[te]=R,k[V]=pe,V=te;else break e}}function l(k){return k.length===0?null:k[0]}function o(k){if(k.length===0)return null;var R=k[0],V=k.pop();if(V!==R){k[0]=V;e:for(var te=0,pe=k.length,D=pe>>>1;te<D;){var J=2*(te+1)-1,se=k[J],$=J+1,de=k[$];if(0>r(se,V))$<pe&&0>r(de,se)?(k[te]=de,k[$]=V,te=$):(k[te]=se,k[J]=V,te=J);else if($<pe&&0>r(de,V))k[te]=de,k[$]=V,te=$;else break e}}return R}function r(k,R){var V=k.sortIndex-R.sortIndex;return V!==0?V:k.id-R.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var g=[],m=[],y=1,v=null,S=3,N=!1,C=!1,E=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function P(k){for(var R=l(m);R!==null;){if(R.callback===null)o(m);else if(R.startTime<=k)o(m),R.sortIndex=R.expirationTime,e(g,R);else break;R=l(m)}}function M(k){if(E=!1,P(k),!C)if(l(g)!==null)C=!0,j||(j=!0,F());else{var R=l(m);R!==null&&L(M,R.startTime-k)}}var j=!1,z=-1,B=5,q=-1;function G(){return w?!0:!(i.unstable_now()-q<B)}function Q(){if(w=!1,j){var k=i.unstable_now();q=k;var R=!0;try{e:{C=!1,E&&(E=!1,H(z),z=-1),N=!0;var V=S;try{t:{for(P(k),v=l(g);v!==null&&!(v.expirationTime>k&&G());){var te=v.callback;if(typeof te=="function"){v.callback=null,S=v.priorityLevel;var pe=te(v.expirationTime<=k);if(k=i.unstable_now(),typeof pe=="function"){v.callback=pe,P(k),R=!0;break t}v===l(g)&&o(g),P(k)}else o(g);v=l(g)}if(v!==null)R=!0;else{var D=l(m);D!==null&&L(M,D.startTime-k),R=!1}}break e}finally{v=null,S=V,N=!1}R=void 0}}finally{R?F():j=!1}}}var F;if(typeof _=="function")F=function(){_(Q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,X=ae.port2;ae.port1.onmessage=Q,F=function(){X.postMessage(null)}}else F=function(){I(Q,0)};function L(k,R){z=I(function(){k(i.unstable_now())},R)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(k){switch(S){case 1:case 2:case 3:var R=3;break;default:R=S}var V=S;S=R;try{return k()}finally{S=V}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(k,R){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var V=S;S=k;try{return R()}finally{S=V}},i.unstable_scheduleCallback=function(k,R,V){var te=i.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,k){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=V+pe,k={id:y++,callback:R,priorityLevel:k,startTime:V,expirationTime:pe,sortIndex:-1},V>te?(k.sortIndex=V,e(m,k),l(g)===null&&k===l(m)&&(E?(H(z),z=-1):E=!0,L(M,V-te))):(k.sortIndex=pe,e(g,k),C||N||(C=!0,j||(j=!0,F()))),k},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(k){var R=S;return function(){var V=S;S=R;try{return k.apply(this,arguments)}finally{S=V}}}})(Wd)),Wd}var rx;function S1(){return rx||(rx=1,Qd.exports=v1()),Qd.exports}var Zd={exports:{}},It={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function N1(){if(cx)return It;cx=1;var i=Ru();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(e(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,It.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return d(g,m,null,y)},It.flushSync=function(g){var m=u.T,y=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=m,o.p=y,o.d.f()}},It.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},It.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},It.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=h(y,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:N}):y==="script"&&o.d.X(g,{crossOrigin:v,integrity:S,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},It.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},It.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=h(y,m.crossOrigin);o.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},It.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=h(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},It.requestFormReset=function(g){o.d.r(g)},It.unstable_batchedUpdates=function(g,m){return g(m)},It.useFormState=function(g,m,y){return u.H.useFormState(g,m,y)},It.useFormStatus=function(){return u.H.useHostTransitionStatus()},It.version="19.2.4",It}var dx;function T1(){if(dx)return Zd.exports;dx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zd.exports=N1(),Zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function C1(){if(ux)return ro;ux=1;var i=S1(),e=Ru(),l=T1();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(d(t)!==t)throw Error(o(188))}function m(t){var s=t.alternate;if(!s){if(s=d(t),s===null)throw Error(o(188));return s!==t?null:t}for(var a=t,c=s;;){var x=a.return;if(x===null)break;var b=x.alternate;if(b===null){if(c=x.return,c!==null){a=c;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===a)return g(x),t;if(b===c)return g(x),s;b=b.sibling}throw Error(o(188))}if(a.return!==c.return)a=x,c=b;else{for(var T=!1,A=x.child;A;){if(A===a){T=!0,a=x,c=b;break}if(A===c){T=!0,c=x,a=b;break}A=A.sibling}if(!T){for(A=b.child;A;){if(A===a){T=!0,a=b,c=x;break}if(A===c){T=!0,c=b,a=x;break}A=A.sibling}if(!T)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),_=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=Q&&t[Q]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Symbol.for("react.client.reference");function X(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ae?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case I:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case j:return"SuspenseList";case q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case _:return t.displayName||"Context";case H:return(t._context.displayName||"Context")+".Consumer";case P:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z:return s=t.displayName||null,s!==null?s:X(t.type)||"Memo";case B:s=t._payload,t=t._init;try{return X(t(s))}catch{}}return null}var L=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},te=[],pe=-1;function D(t){return{current:t}}function J(t){0>pe||(t.current=te[pe],te[pe]=null,pe--)}function se(t,s){pe++,te[pe]=t.current,t.current=s}var $=D(null),de=D(null),he=D(null),ie=D(null);function be(t,s){switch(se(he,s),se(de,t),se($,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?kh(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=kh(s),t=_h(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J($),se($,t)}function Te(){J($),J(de),J(he)}function Oe(t){t.memoizedState!==null&&se(ie,t);var s=$.current,a=_h(s,t.type);s!==a&&(se(de,t),se($,a))}function ct(t){de.current===t&&(J($),J(de)),ie.current===t&&(J(ie),no._currentValue=V)}var nt,pi;function ge(t){if(nt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);nt=s&&s[1]||"",pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+t+pi}var me=!1;function oe(t,s){if(!t||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(le){var ne=le}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(le){ne=le}t.call(ue.prototype)}}else{try{throw Error()}catch(le){ne=le}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=c.DetermineComponentFrameRoot(),T=b[0],A=b[1];if(T&&A){var O=T.split(`
`),ee=A.split(`
`);for(x=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;x<ee.length&&!ee[x].includes("DetermineComponentFrameRoot");)x++;if(c===O.length||x===ee.length)for(c=O.length-1,x=ee.length-1;1<=c&&0<=x&&O[c]!==ee[x];)x--;for(;1<=c&&0<=x;c--,x--)if(O[c]!==ee[x]){if(c!==1||x!==1)do if(c--,x--,0>x||O[c]!==ee[x]){var re=`
`+O[c].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=c&&0<=x);break}}}finally{me=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ge(a):""}function Se(t,s){switch(t.tag){case 26:case 27:case 5:return ge(t.type);case 16:return ge("Lazy");case 13:return t.child!==s&&s!==null?ge("Suspense Fallback"):ge("Suspense");case 19:return ge("SuspenseList");case 0:case 15:return oe(t.type,!1);case 11:return oe(t.type.render,!1);case 1:return oe(t.type,!0);case 31:return ge("Activity");default:return""}}function $e(t){try{var s="",a=null;do s+=Se(t,a),a=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var dt=Object.prototype.hasOwnProperty,Gn=i.unstable_scheduleCallback,Lr=i.unstable_cancelCallback,Jb=i.unstable_shouldYield,Xb=i.unstable_requestPaint,Wt=i.unstable_now,Kb=i.unstable_getCurrentPriorityLevel,sf=i.unstable_ImmediatePriority,lf=i.unstable_UserBlockingPriority,Co=i.unstable_NormalPriority,Qb=i.unstable_LowPriority,of=i.unstable_IdlePriority,Wb=i.log,Zb=i.unstable_setDisableYieldValue,hl=null,Zt=null;function fn(t){if(typeof Wb=="function"&&Zb(t),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(hl,t)}catch{}}var ei=Math.clz32?Math.clz32:iy,ey=Math.log,ty=Math.LN2;function iy(t){return t>>>=0,t===0?32:31-(ey(t)/ty|0)|0}var wo=256,ko=262144,_o=4194304;function Vn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Eo(t,s,a){var c=t.pendingLanes;if(c===0)return 0;var x=0,b=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=c&134217727;return A!==0?(c=A&~b,c!==0?x=Vn(c):(T&=A,T!==0?x=Vn(T):a||(a=A&~t,a!==0&&(x=Vn(a))))):(A=c&~b,A!==0?x=Vn(A):T!==0?x=Vn(T):a||(a=c&~t,a!==0&&(x=Vn(a)))),x===0?0:s!==0&&s!==x&&(s&b)===0&&(b=x&-x,a=s&-s,b>=a||b===32&&(a&4194048)!==0)?s:x}function xl(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ny(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function af(){var t=_o;return _o<<=1,(_o&62914560)===0&&(_o=4194304),t}function zr(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function gl(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function sy(t,s,a,c,x,b){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,O=t.expirationTimes,ee=t.hiddenUpdates;for(a=T&~a;0<a;){var re=31-ei(a),ue=1<<re;A[re]=0,O[re]=-1;var ne=ee[re];if(ne!==null)for(ee[re]=null,re=0;re<ne.length;re++){var le=ne[re];le!==null&&(le.lane&=-536870913)}a&=~ue}c!==0&&rf(t,c,0),b!==0&&x===0&&t.tag!==0&&(t.suspendedLanes|=b&~(T&~s))}function rf(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-ei(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|a&261930}function cf(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var c=31-ei(a),x=1<<c;x&s|t[c]&s&&(t[c]|=s),a&=~x}}function df(t,s){var a=s&-s;return a=(a&42)!==0?1:Pr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Pr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ur(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function uf(){var t=R.p;return t!==0?t:(t=window.event,t===void 0?32:Kh(t.type))}function ff(t,s){var a=R.p;try{return R.p=t,s()}finally{R.p=a}}var pn=Math.random().toString(36).slice(2),_t="__reactFiber$"+pn,Ot="__reactProps$"+pn,ps="__reactContainer$"+pn,Or="__reactEvents$"+pn,ly="__reactListeners$"+pn,oy="__reactHandles$"+pn,pf="__reactResources$"+pn,bl="__reactMarker$"+pn;function Hr(t){delete t[_t],delete t[Ot],delete t[Or],delete t[ly],delete t[oy]}function ms(t){var s=t[_t];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ps]||a[_t]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Ih(t);t!==null;){if(a=t[_t])return a;t=Ih(t)}return s}t=a,a=t.parentNode}return null}function hs(t){if(t=t[_t]||t[ps]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function yl(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function xs(t){var s=t[pf];return s||(s=t[pf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(t){t[bl]=!0}var mf=new Set,hf={};function qn(t,s){gs(t,s),gs(t+"Capture",s)}function gs(t,s){for(hf[t]=s,t=0;t<s.length;t++)mf.add(s[t])}var ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xf={},gf={};function ry(t){return dt.call(gf,t)?!0:dt.call(xf,t)?!1:ay.test(t)?gf[t]=!0:(xf[t]=!0,!1)}function jo(t,s,a){if(ry(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Ao(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Vi(t,s,a,c){if(c===null)t.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+c)}}function mi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bf(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cy(t,s,a){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,b=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return x.call(this)},set:function(T){a=""+T,b.call(this,T)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Gr(t){if(!t._valueTracker){var s=bf(t)?"checked":"value";t._valueTracker=cy(t,s,""+t[s])}}function yf(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return t&&(c=bf(t)?t.checked?"true":"false":t.value),t=c,t!==a?(s.setValue(t),!0):!1}function Mo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var dy=/[\n"\\]/g;function hi(t){return t.replace(dy,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vr(t,s,a,c,x,b,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),s!=null?T==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+mi(s)):t.value!==""+mi(s)&&(t.value=""+mi(s)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),s!=null?qr(t,T,mi(s)):a!=null?qr(t,T,mi(a)):c!=null&&t.removeAttribute("value"),x==null&&b!=null&&(t.defaultChecked=!!b),x!=null&&(t.checked=x&&typeof x!="function"&&typeof x!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+mi(A):t.removeAttribute("name")}function vf(t,s,a,c,x,b,T,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.type=b),s!=null||a!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){Gr(t);return}a=a!=null?""+mi(a):"",s=s!=null?""+mi(s):a,A||s===t.value||(t.value=s),t.defaultValue=s}c=c??x,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=A?t.checked:!!c,t.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Gr(t)}function qr(t,s,a){s==="number"&&Mo(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function bs(t,s,a,c){if(t=t.options,s){s={};for(var x=0;x<a.length;x++)s["$"+a[x]]=!0;for(a=0;a<t.length;a++)x=s.hasOwnProperty("$"+t[a].value),t[a].selected!==x&&(t[a].selected=x),x&&c&&(t[a].defaultSelected=!0)}else{for(a=""+mi(a),s=null,x=0;x<t.length;x++){if(t[x].value===a){t[x].selected=!0,c&&(t[x].defaultSelected=!0);return}s!==null||t[x].disabled||(s=t[x])}s!==null&&(s.selected=!0)}}function Sf(t,s,a){if(s!=null&&(s=""+mi(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+mi(a):""}function Nf(t,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(L(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=mi(s),t.defaultValue=a,c=t.textContent,c===a&&c!==""&&c!==null&&(t.value=c),Gr(t)}function ys(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var uy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tf(t,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,a):typeof a!="number"||a===0||uy.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Cf(t,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var x in s)c=s[x],s.hasOwnProperty(x)&&a[x]!==c&&Tf(t,x,c)}else for(var b in s)s.hasOwnProperty(b)&&Tf(t,b,s[b])}function Br(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),py=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ro(t){return py.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qi(){}var $r=null;function Fr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vs=null,Ss=null;function wf(t){var s=hs(t);if(s&&(t=s.stateNode)){var a=t[Ot]||null;e:switch(t=s.stateNode,s.type){case"input":if(Vr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hi(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==t&&c.form===t.form){var x=c[Ot]||null;if(!x)throw Error(o(90));Vr(c,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===t.form&&yf(c)}break e;case"textarea":Sf(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&bs(t,!!a.multiple,s,!1)}}}var Yr=!1;function kf(t,s,a){if(Yr)return t(s,a);Yr=!0;try{var c=t(s);return c}finally{if(Yr=!1,(vs!==null||Ss!==null)&&(ya(),vs&&(s=vs,t=Ss,Ss=vs=null,wf(s),t)))for(s=0;s<t.length;s++)wf(t[s])}}function vl(t,s){var a=t.stateNode;if(a===null)return null;var c=a[Ot]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jr=!1;if(Bi)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){Jr=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{Jr=!1}var mn=null,Xr=null,Do=null;function _f(){if(Do)return Do;var t,s=Xr,a=s.length,c,x="value"in mn?mn.value:mn.textContent,b=x.length;for(t=0;t<a&&s[t]===x[t];t++);var T=a-t;for(c=1;c<=T&&s[a-c]===x[b-c];c++);return Do=x.slice(t,1<c?1-c:void 0)}function Io(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Lo(){return!0}function Ef(){return!1}function Ht(t){function s(a,c,x,b,T){this._reactName=a,this._targetInst=x,this.type=c,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Lo:Ef,this.isPropagationStopped=Ef,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),s}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=Ht(Bn),Nl=v({},Bn,{view:0,detail:0}),my=Ht(Nl),Kr,Qr,Tl,Po=v({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(Kr=t.screenX-Tl.screenX,Qr=t.screenY-Tl.screenY):Qr=Kr=0,Tl=t),Kr)},movementY:function(t){return"movementY"in t?t.movementY:Qr}}),jf=Ht(Po),hy=v({},Po,{dataTransfer:0}),xy=Ht(hy),gy=v({},Nl,{relatedTarget:0}),Wr=Ht(gy),by=v({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=Ht(by),vy=v({},Bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sy=Ht(vy),Ny=v({},Bn,{data:0}),Af=Ht(Ny),Ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ky(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=wy[t])?!!s[t]:!1}function Zr(){return ky}var _y=v({},Nl,{key:function(t){if(t.key){var s=Ty[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(t){return t.type==="keypress"?Io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ey=Ht(_y),jy=v({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=Ht(jy),Ay=v({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),My=Ht(Ay),Ry=v({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dy=Ht(Ry),Iy=v({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ly=Ht(Iy),zy=v({},Bn,{newState:0,oldState:0}),Py=Ht(zy),Uy=[9,13,27,32],ec=Bi&&"CompositionEvent"in window,Cl=null;Bi&&"documentMode"in document&&(Cl=document.documentMode);var Oy=Bi&&"TextEvent"in window&&!Cl,Rf=Bi&&(!ec||Cl&&8<Cl&&11>=Cl),Df=" ",If=!1;function Lf(t,s){switch(t){case"keyup":return Uy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function Hy(t,s){switch(t){case"compositionend":return zf(s);case"keypress":return s.which!==32?null:(If=!0,Df);case"textInput":return t=s.data,t===Df&&If?null:t;default:return null}}function Gy(t,s){if(Ns)return t==="compositionend"||!ec&&Lf(t,s)?(t=_f(),Do=Xr=mn=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Rf&&s.locale!=="ko"?null:s.data;default:return null}}var Vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Vy[t.type]:s==="textarea"}function Uf(t,s,a,c){vs?Ss?Ss.push(c):Ss=[c]:vs=c,s=ka(s,"onChange"),0<s.length&&(a=new zo("onChange","change",null,a,c),t.push({event:a,listeners:s}))}var wl=null,kl=null;function qy(t){vh(t,0)}function Uo(t){var s=yl(t);if(yf(s))return t}function Of(t,s){if(t==="change")return s}var Hf=!1;if(Bi){var tc;if(Bi){var ic="oninput"in document;if(!ic){var Gf=document.createElement("div");Gf.setAttribute("oninput","return;"),ic=typeof Gf.oninput=="function"}tc=ic}else tc=!1;Hf=tc&&(!document.documentMode||9<document.documentMode)}function Vf(){wl&&(wl.detachEvent("onpropertychange",qf),kl=wl=null)}function qf(t){if(t.propertyName==="value"&&Uo(kl)){var s=[];Uf(s,kl,t,Fr(t)),kf(qy,s)}}function By(t,s,a){t==="focusin"?(Vf(),wl=s,kl=a,wl.attachEvent("onpropertychange",qf)):t==="focusout"&&Vf()}function $y(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uo(kl)}function Fy(t,s){if(t==="click")return Uo(s)}function Yy(t,s){if(t==="input"||t==="change")return Uo(s)}function Jy(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ti=typeof Object.is=="function"?Object.is:Jy;function _l(t,s){if(ti(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var x=a[c];if(!dt.call(s,x)||!ti(t[x],s[x]))return!1}return!0}function Bf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $f(t,s){var a=Bf(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=s&&c>=s)return{node:a,offset:s-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bf(a)}}function Ff(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ff(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Yf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Mo(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Mo(t.document)}return s}function nc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Xy=Bi&&"documentMode"in document&&11>=document.documentMode,Ts=null,sc=null,El=null,lc=!1;function Jf(t,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lc||Ts==null||Ts!==Mo(c)||(c=Ts,"selectionStart"in c&&nc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),El&&_l(El,c)||(El=c,c=ka(sc,"onSelect"),0<c.length&&(s=new zo("onSelect","select",null,s,a),t.push({event:s,listeners:c}),s.target=Ts)))}function $n(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Cs={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionrun:$n("Transition","TransitionRun"),transitionstart:$n("Transition","TransitionStart"),transitioncancel:$n("Transition","TransitionCancel"),transitionend:$n("Transition","TransitionEnd")},oc={},Xf={};Bi&&(Xf=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function Fn(t){if(oc[t])return oc[t];if(!Cs[t])return t;var s=Cs[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Xf)return oc[t]=s[a];return t}var Kf=Fn("animationend"),Qf=Fn("animationiteration"),Wf=Fn("animationstart"),Ky=Fn("transitionrun"),Qy=Fn("transitionstart"),Wy=Fn("transitioncancel"),Zf=Fn("transitionend"),ep=new Map,ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ac.push("scrollEnd");function ki(t,s){ep.set(t,s),qn(s,[t])}var Oo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},xi=[],ws=0,rc=0;function Ho(){for(var t=ws,s=rc=ws=0;s<t;){var a=xi[s];xi[s++]=null;var c=xi[s];xi[s++]=null;var x=xi[s];xi[s++]=null;var b=xi[s];if(xi[s++]=null,c!==null&&x!==null){var T=c.pending;T===null?x.next=x:(x.next=T.next,T.next=x),c.pending=x}b!==0&&tp(a,x,b)}}function Go(t,s,a,c){xi[ws++]=t,xi[ws++]=s,xi[ws++]=a,xi[ws++]=c,rc|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function cc(t,s,a,c){return Go(t,s,a,c),Vo(t)}function Yn(t,s){return Go(t,null,null,s),Vo(t)}function tp(t,s,a){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a);for(var x=!1,b=t.return;b!==null;)b.childLanes|=a,c=b.alternate,c!==null&&(c.childLanes|=a),b.tag===22&&(t=b.stateNode,t===null||t._visibility&1||(x=!0)),t=b,b=b.return;return t.tag===3?(b=t.stateNode,x&&s!==null&&(x=31-ei(a),t=b.hiddenUpdates,c=t[x],c===null?t[x]=[s]:c.push(s),s.lane=a|536870912),b):null}function Vo(t){if(50<Kl)throw Kl=0,bd=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ks={};function Zy(t,s,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(t,s,a,c){return new Zy(t,s,a,c)}function dc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,s){var a=t.alternate;return a===null?(a=ii(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ip(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function qo(t,s,a,c,x,b){var T=0;if(c=t,typeof t=="function")dc(t)&&(T=1);else if(typeof t=="string")T=s1(t,a,$.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case q:return t=ii(31,a,s,x),t.elementType=q,t.lanes=b,t;case E:return Jn(a.children,x,b,s);case w:T=8,x|=24;break;case I:return t=ii(12,a,s,x|2),t.elementType=I,t.lanes=b,t;case M:return t=ii(13,a,s,x),t.elementType=M,t.lanes=b,t;case j:return t=ii(19,a,s,x),t.elementType=j,t.lanes=b,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:T=10;break e;case H:T=9;break e;case P:T=11;break e;case z:T=14;break e;case B:T=16,c=null;break e}T=29,a=Error(o(130,t===null?"null":typeof t,"")),c=null}return s=ii(T,a,s,x),s.elementType=t,s.type=c,s.lanes=b,s}function Jn(t,s,a,c){return t=ii(7,t,c,s),t.lanes=a,t}function uc(t,s,a){return t=ii(6,t,null,s),t.lanes=a,t}function np(t){var s=ii(18,null,null,0);return s.stateNode=t,s}function fc(t,s,a){return s=ii(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var sp=new WeakMap;function gi(t,s){if(typeof t=="object"&&t!==null){var a=sp.get(t);return a!==void 0?a:(s={value:t,source:s,stack:$e(s)},sp.set(t,s),s)}return{value:t,source:s,stack:$e(s)}}var _s=[],Es=0,Bo=null,jl=0,bi=[],yi=0,hn=null,zi=1,Pi="";function Fi(t,s){_s[Es++]=jl,_s[Es++]=Bo,Bo=t,jl=s}function lp(t,s,a){bi[yi++]=zi,bi[yi++]=Pi,bi[yi++]=hn,hn=t;var c=zi;t=Pi;var x=32-ei(c)-1;c&=~(1<<x),a+=1;var b=32-ei(s)+x;if(30<b){var T=x-x%5;b=(c&(1<<T)-1).toString(32),c>>=T,x-=T,zi=1<<32-ei(s)+x|a<<x|c,Pi=b+t}else zi=1<<b|a<<x|c,Pi=t}function pc(t){t.return!==null&&(Fi(t,1),lp(t,1,0))}function mc(t){for(;t===Bo;)Bo=_s[--Es],_s[Es]=null,jl=_s[--Es],_s[Es]=null;for(;t===hn;)hn=bi[--yi],bi[yi]=null,Pi=bi[--yi],bi[yi]=null,zi=bi[--yi],bi[yi]=null}function op(t,s){bi[yi++]=zi,bi[yi++]=Pi,bi[yi++]=hn,zi=s.id,Pi=s.overflow,hn=t}var Et=null,Ze=null,Pe=!1,xn=null,vi=!1,hc=Error(o(519));function gn(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Al(gi(s,t)),hc}function ap(t){var s=t.stateNode,a=t.type,c=t.memoizedProps;switch(s[_t]=t,s[Ot]=c,a){case"dialog":De("cancel",s),De("close",s);break;case"iframe":case"object":case"embed":De("load",s);break;case"video":case"audio":for(a=0;a<Wl.length;a++)De(Wl[a],s);break;case"source":De("error",s);break;case"img":case"image":case"link":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"input":De("invalid",s),vf(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":De("invalid",s);break;case"textarea":De("invalid",s),Nf(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||Ch(s.textContent,a)?(c.popover!=null&&(De("beforetoggle",s),De("toggle",s)),c.onScroll!=null&&De("scroll",s),c.onScrollEnd!=null&&De("scrollend",s),c.onClick!=null&&(s.onclick=qi),s=!0):s=!1,s||gn(t,!0)}function rp(t){for(Et=t.return;Et;)switch(Et.tag){case 5:case 31:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:Et=Et.return}}function js(t){if(t!==Et)return!1;if(!Pe)return rp(t),Pe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Dd(t.type,t.memoizedProps)),a=!a),a&&Ze&&gn(t),rp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ze=Dh(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ze=Dh(t)}else s===27?(s=Ze,Mn(t.type)?(t=Ud,Ud=null,Ze=t):Ze=s):Ze=Et?Ni(t.stateNode.nextSibling):null;return!0}function Xn(){Ze=Et=null,Pe=!1}function xc(){var t=xn;return t!==null&&(Bt===null?Bt=t:Bt.push.apply(Bt,t),xn=null),t}function Al(t){xn===null?xn=[t]:xn.push(t)}var gc=D(null),Kn=null,Yi=null;function bn(t,s,a){se(gc,s._currentValue),s._currentValue=a}function Ji(t){t._currentValue=gc.current,J(gc)}function bc(t,s,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===a)break;t=t.return}}function yc(t,s,a,c){var x=t.child;for(x!==null&&(x.return=t);x!==null;){var b=x.dependencies;if(b!==null){var T=x.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=x;for(var O=0;O<s.length;O++)if(A.context===s[O]){b.lanes|=a,A=b.alternate,A!==null&&(A.lanes|=a),bc(b.return,a,t),c||(T=null);break e}b=A.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(o(341));T.lanes|=a,b=T.alternate,b!==null&&(b.lanes|=a),bc(T,a,t),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===t){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function As(t,s,a,c){t=null;for(var x=s,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var A=x.type;ti(x.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(x===ie.current){if(T=x.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(t!==null?t.push(no):t=[no])}x=x.return}t!==null&&yc(s,t,a,c),s.flags|=262144}function $o(t){for(t=t.firstContext;t!==null;){if(!ti(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Qn(t){Kn=t,Yi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function jt(t){return cp(Kn,t)}function Fo(t,s){return Kn===null&&Qn(t),cp(t,s)}function cp(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Yi===null){if(t===null)throw Error(o(308));Yi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Yi=Yi.next=s;return a}var ev=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},tv=i.unstable_scheduleCallback,iv=i.unstable_NormalPriority,ut={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vc(){return{controller:new ev,data:new Map,refCount:0}}function Ml(t){t.refCount--,t.refCount===0&&tv(iv,function(){t.controller.abort()})}var Rl=null,Sc=0,Ms=0,Rs=null;function nv(t,s){if(Rl===null){var a=Rl=[];Sc=0,Ms=Cd(),Rs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Sc++,s.then(dp,dp),s}function dp(){if(--Sc===0&&Rl!==null){Rs!==null&&(Rs.status="fulfilled");var t=Rl;Rl=null,Ms=0,Rs=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function sv(t,s){var a=[],c={status:"pending",value:null,reason:null,then:function(x){a.push(x)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var x=0;x<a.length;x++)(0,a[x])(s)},function(x){for(c.status="rejected",c.reason=x,x=0;x<a.length;x++)(0,a[x])(void 0)}),c}var up=k.S;k.S=function(t,s){Jm=Wt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&nv(t,s),up!==null&&up(t,s)};var Wn=D(null);function Nc(){var t=Wn.current;return t!==null?t:Qe.pooledCache}function Yo(t,s){s===null?se(Wn,Wn.current):se(Wn,s.pool)}function fp(){var t=Nc();return t===null?null:{parent:ut._currentValue,pool:t}}var Ds=Error(o(460)),Tc=Error(o(474)),Jo=Error(o(542)),Xo={then:function(){}};function pp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function mp(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(qi,qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,xp(t),t;default:if(typeof s.status=="string")s.then(qi,qi);else{if(t=Qe,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=c}},function(c){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,xp(t),t}throw es=s,Ds}}function Zn(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(es=a,Ds):a}}var es=null;function hp(){if(es===null)throw Error(o(459));var t=es;return es=null,t}function xp(t){if(t===Ds||t===Jo)throw Error(o(483))}var Is=null,Dl=0;function Ko(t){var s=Dl;return Dl+=1,Is===null&&(Is=[]),mp(Is,t,s)}function Il(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Qo(t,s){throw s.$$typeof===S?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function gp(t){function s(K,Y){if(t){var Z=K.deletions;Z===null?(K.deletions=[Y],K.flags|=16):Z.push(Y)}}function a(K,Y){if(!t)return null;for(;Y!==null;)s(K,Y),Y=Y.sibling;return null}function c(K){for(var Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function x(K,Y){return K=$i(K,Y),K.index=0,K.sibling=null,K}function b(K,Y,Z){return K.index=Z,t?(Z=K.alternate,Z!==null?(Z=Z.index,Z<Y?(K.flags|=67108866,Y):Z):(K.flags|=67108866,Y)):(K.flags|=1048576,Y)}function T(K){return t&&K.alternate===null&&(K.flags|=67108866),K}function A(K,Y,Z,ce){return Y===null||Y.tag!==6?(Y=uc(Z,K.mode,ce),Y.return=K,Y):(Y=x(Y,Z),Y.return=K,Y)}function O(K,Y,Z,ce){var Ce=Z.type;return Ce===E?re(K,Y,Z.props.children,ce,Z.key):Y!==null&&(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===B&&Zn(Ce)===Y.type)?(Y=x(Y,Z.props),Il(Y,Z),Y.return=K,Y):(Y=qo(Z.type,Z.key,Z.props,null,K.mode,ce),Il(Y,Z),Y.return=K,Y)}function ee(K,Y,Z,ce){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=fc(Z,K.mode,ce),Y.return=K,Y):(Y=x(Y,Z.children||[]),Y.return=K,Y)}function re(K,Y,Z,ce,Ce){return Y===null||Y.tag!==7?(Y=Jn(Z,K.mode,ce,Ce),Y.return=K,Y):(Y=x(Y,Z),Y.return=K,Y)}function ue(K,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=uc(""+Y,K.mode,Z),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:return Z=qo(Y.type,Y.key,Y.props,null,K.mode,Z),Il(Z,Y),Z.return=K,Z;case C:return Y=fc(Y,K.mode,Z),Y.return=K,Y;case B:return Y=Zn(Y),ue(K,Y,Z)}if(L(Y)||F(Y))return Y=Jn(Y,K.mode,Z,null),Y.return=K,Y;if(typeof Y.then=="function")return ue(K,Ko(Y),Z);if(Y.$$typeof===_)return ue(K,Fo(K,Y),Z);Qo(K,Y)}return null}function ne(K,Y,Z,ce){var Ce=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ce!==null?null:A(K,Y,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return Z.key===Ce?O(K,Y,Z,ce):null;case C:return Z.key===Ce?ee(K,Y,Z,ce):null;case B:return Z=Zn(Z),ne(K,Y,Z,ce)}if(L(Z)||F(Z))return Ce!==null?null:re(K,Y,Z,ce,null);if(typeof Z.then=="function")return ne(K,Y,Ko(Z),ce);if(Z.$$typeof===_)return ne(K,Y,Fo(K,Z),ce);Qo(K,Z)}return null}function le(K,Y,Z,ce,Ce){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(Z)||null,A(Y,K,""+ce,Ce);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case N:return K=K.get(ce.key===null?Z:ce.key)||null,O(Y,K,ce,Ce);case C:return K=K.get(ce.key===null?Z:ce.key)||null,ee(Y,K,ce,Ce);case B:return ce=Zn(ce),le(K,Y,Z,ce,Ce)}if(L(ce)||F(ce))return K=K.get(Z)||null,re(Y,K,ce,Ce,null);if(typeof ce.then=="function")return le(K,Y,Z,Ko(ce),Ce);if(ce.$$typeof===_)return le(K,Y,Z,Fo(Y,ce),Ce);Qo(Y,ce)}return null}function ve(K,Y,Z,ce){for(var Ce=null,He=null,Ne=Y,Me=Y=0,ze=null;Ne!==null&&Me<Z.length;Me++){Ne.index>Me?(ze=Ne,Ne=null):ze=Ne.sibling;var Ge=ne(K,Ne,Z[Me],ce);if(Ge===null){Ne===null&&(Ne=ze);break}t&&Ne&&Ge.alternate===null&&s(K,Ne),Y=b(Ge,Y,Me),He===null?Ce=Ge:He.sibling=Ge,He=Ge,Ne=ze}if(Me===Z.length)return a(K,Ne),Pe&&Fi(K,Me),Ce;if(Ne===null){for(;Me<Z.length;Me++)Ne=ue(K,Z[Me],ce),Ne!==null&&(Y=b(Ne,Y,Me),He===null?Ce=Ne:He.sibling=Ne,He=Ne);return Pe&&Fi(K,Me),Ce}for(Ne=c(Ne);Me<Z.length;Me++)ze=le(Ne,K,Me,Z[Me],ce),ze!==null&&(t&&ze.alternate!==null&&Ne.delete(ze.key===null?Me:ze.key),Y=b(ze,Y,Me),He===null?Ce=ze:He.sibling=ze,He=ze);return t&&Ne.forEach(function(zn){return s(K,zn)}),Pe&&Fi(K,Me),Ce}function we(K,Y,Z,ce){if(Z==null)throw Error(o(151));for(var Ce=null,He=null,Ne=Y,Me=Y=0,ze=null,Ge=Z.next();Ne!==null&&!Ge.done;Me++,Ge=Z.next()){Ne.index>Me?(ze=Ne,Ne=null):ze=Ne.sibling;var zn=ne(K,Ne,Ge.value,ce);if(zn===null){Ne===null&&(Ne=ze);break}t&&Ne&&zn.alternate===null&&s(K,Ne),Y=b(zn,Y,Me),He===null?Ce=zn:He.sibling=zn,He=zn,Ne=ze}if(Ge.done)return a(K,Ne),Pe&&Fi(K,Me),Ce;if(Ne===null){for(;!Ge.done;Me++,Ge=Z.next())Ge=ue(K,Ge.value,ce),Ge!==null&&(Y=b(Ge,Y,Me),He===null?Ce=Ge:He.sibling=Ge,He=Ge);return Pe&&Fi(K,Me),Ce}for(Ne=c(Ne);!Ge.done;Me++,Ge=Z.next())Ge=le(Ne,K,Me,Ge.value,ce),Ge!==null&&(t&&Ge.alternate!==null&&Ne.delete(Ge.key===null?Me:Ge.key),Y=b(Ge,Y,Me),He===null?Ce=Ge:He.sibling=Ge,He=Ge);return t&&Ne.forEach(function(h1){return s(K,h1)}),Pe&&Fi(K,Me),Ce}function Ke(K,Y,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===E&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:e:{for(var Ce=Z.key;Y!==null;){if(Y.key===Ce){if(Ce=Z.type,Ce===E){if(Y.tag===7){a(K,Y.sibling),ce=x(Y,Z.props.children),ce.return=K,K=ce;break e}}else if(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===B&&Zn(Ce)===Y.type){a(K,Y.sibling),ce=x(Y,Z.props),Il(ce,Z),ce.return=K,K=ce;break e}a(K,Y);break}else s(K,Y);Y=Y.sibling}Z.type===E?(ce=Jn(Z.props.children,K.mode,ce,Z.key),ce.return=K,K=ce):(ce=qo(Z.type,Z.key,Z.props,null,K.mode,ce),Il(ce,Z),ce.return=K,K=ce)}return T(K);case C:e:{for(Ce=Z.key;Y!==null;){if(Y.key===Ce)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){a(K,Y.sibling),ce=x(Y,Z.children||[]),ce.return=K,K=ce;break e}else{a(K,Y);break}else s(K,Y);Y=Y.sibling}ce=fc(Z,K.mode,ce),ce.return=K,K=ce}return T(K);case B:return Z=Zn(Z),Ke(K,Y,Z,ce)}if(L(Z))return ve(K,Y,Z,ce);if(F(Z)){if(Ce=F(Z),typeof Ce!="function")throw Error(o(150));return Z=Ce.call(Z),we(K,Y,Z,ce)}if(typeof Z.then=="function")return Ke(K,Y,Ko(Z),ce);if(Z.$$typeof===_)return Ke(K,Y,Fo(K,Z),ce);Qo(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(a(K,Y.sibling),ce=x(Y,Z),ce.return=K,K=ce):(a(K,Y),ce=uc(Z,K.mode,ce),ce.return=K,K=ce),T(K)):a(K,Y)}return function(K,Y,Z,ce){try{Dl=0;var Ce=Ke(K,Y,Z,ce);return Is=null,Ce}catch(Ne){if(Ne===Ds||Ne===Jo)throw Ne;var He=ii(29,Ne,null,K.mode);return He.lanes=ce,He.return=K,He}finally{}}}var ts=gp(!0),bp=gp(!1),yn=!1;function Cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wc(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(t,s,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var x=c.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),c.pending=s,s=Vo(t),tp(t,null,a),s}return Go(t,c,s,a),Vo(t)}function Ll(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,cf(t,a)}}function kc(t,s){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var x=null,b=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};b===null?x=b=T:b=b.next=T,a=a.next}while(a!==null);b===null?x=b=s:b=b.next=s}else x=b=s;a={baseState:c.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:c.shared,callbacks:c.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var _c=!1;function zl(){if(_c){var t=Rs;if(t!==null)throw t}}function Pl(t,s,a,c){_c=!1;var x=t.updateQueue;yn=!1;var b=x.firstBaseUpdate,T=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var O=A,ee=O.next;O.next=null,T===null?b=ee:T.next=ee,T=O;var re=t.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==T&&(A===null?re.firstBaseUpdate=ee:A.next=ee,re.lastBaseUpdate=O))}if(b!==null){var ue=x.baseState;T=0,re=ee=O=null,A=b;do{var ne=A.lane&-536870913,le=ne!==A.lane;if(le?(Le&ne)===ne:(c&ne)===ne){ne!==0&&ne===Ms&&(_c=!0),re!==null&&(re=re.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ve=t,we=A;ne=s;var Ke=a;switch(we.tag){case 1:if(ve=we.payload,typeof ve=="function"){ue=ve.call(Ke,ue,ne);break e}ue=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,ne=typeof ve=="function"?ve.call(Ke,ue,ne):ve,ne==null)break e;ue=v({},ue,ne);break e;case 2:yn=!0}}ne=A.callback,ne!==null&&(t.flags|=64,le&&(t.flags|=8192),le=x.callbacks,le===null?x.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?(ee=re=le,O=ue):re=re.next=le,T|=ne;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;le=A,A=le.next,le.next=null,x.lastBaseUpdate=le,x.shared.pending=null}}while(!0);re===null&&(O=ue),x.baseState=O,x.firstBaseUpdate=ee,x.lastBaseUpdate=re,b===null&&(x.shared.lanes=0),kn|=T,t.lanes=T,t.memoizedState=ue}}function yp(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function vp(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yp(a[t],s)}var Ls=D(null),Wo=D(0);function Sp(t,s){t=sn,se(Wo,t),se(Ls,s),sn=t|s.baseLanes}function Ec(){se(Wo,sn),se(Ls,Ls.current)}function jc(){sn=Wo.current,J(Ls),J(Wo)}var ni=D(null),Si=null;function Nn(t){var s=t.alternate;se(at,at.current&1),se(ni,t),Si===null&&(s===null||Ls.current!==null||s.memoizedState!==null)&&(Si=t)}function Ac(t){se(at,at.current),se(ni,t),Si===null&&(Si=t)}function Np(t){t.tag===22?(se(at,at.current),se(ni,t),Si===null&&(Si=t)):Tn()}function Tn(){se(at,at.current),se(ni,ni.current)}function si(t){J(ni),Si===t&&(Si=null),J(at)}var at=D(0);function Zo(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||zd(a)||Pd(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xi=0,Ae=null,Je=null,ft=null,ea=!1,zs=!1,is=!1,ta=0,Ul=0,Ps=null,lv=0;function st(){throw Error(o(321))}function Mc(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!ti(t[a],s[a]))return!1;return!0}function Rc(t,s,a,c,x,b){return Xi=b,Ae=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=t===null||t.memoizedState===null?lm:Yc,is=!1,b=a(c,x),is=!1,zs&&(b=Cp(s,a,c,x)),Tp(t),b}function Tp(t){k.H=Gl;var s=Je!==null&&Je.next!==null;if(Xi=0,ft=Je=Ae=null,ea=!1,Ul=0,Ps=null,s)throw Error(o(300));t===null||pt||(t=t.dependencies,t!==null&&$o(t)&&(pt=!0))}function Cp(t,s,a,c){Ae=t;var x=0;do{if(zs&&(Ps=null),Ul=0,zs=!1,25<=x)throw Error(o(301));if(x+=1,ft=Je=null,t.updateQueue!=null){var b=t.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}k.H=om,b=s(a,c)}while(zs);return b}function ov(){var t=k.H,s=t.useState()[0];return s=typeof s.then=="function"?Ol(s):s,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Ae.flags|=1024),s}function Dc(){var t=ta!==0;return ta=0,t}function Ic(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Lc(t){if(ea){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ea=!1}Xi=0,ft=Je=Ae=null,zs=!1,Ul=ta=0,Ps=null}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ae.memoizedState=ft=t:ft=ft.next=t,ft}function rt(){if(Je===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var s=ft===null?Ae.memoizedState:ft.next;if(s!==null)ft=s,Je=t;else{if(t===null)throw Ae.alternate===null?Error(o(467)):Error(o(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ft===null?Ae.memoizedState=ft=t:ft=ft.next=t}return ft}function ia(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(t){var s=Ul;return Ul+=1,Ps===null&&(Ps=[]),t=mp(Ps,t,s),s=Ae,(ft===null?s.memoizedState:ft.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?lm:Yc),t}function na(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ol(t);if(t.$$typeof===_)return jt(t)}throw Error(o(438,String(t)))}function zc(t){var s=null,a=Ae.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Ae.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ia(),Ae.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),c=0;c<t;c++)a[c]=G;return s.index++,a}function Ki(t,s){return typeof s=="function"?s(t):s}function sa(t){var s=rt();return Pc(s,Je,t)}function Pc(t,s,a){var c=t.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var x=t.baseQueue,b=c.pending;if(b!==null){if(x!==null){var T=x.next;x.next=b.next,b.next=T}s.baseQueue=x=b,c.pending=null}if(b=t.baseState,x===null)t.memoizedState=b;else{s=x.next;var A=T=null,O=null,ee=s,re=!1;do{var ue=ee.lane&-536870913;if(ue!==ee.lane?(Le&ue)===ue:(Xi&ue)===ue){var ne=ee.revertLane;if(ne===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ue===Ms&&(re=!0);else if((Xi&ne)===ne){ee=ee.next,ne===Ms&&(re=!0);continue}else ue={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(A=O=ue,T=b):O=O.next=ue,Ae.lanes|=ne,kn|=ne;ue=ee.action,is&&a(b,ue),b=ee.hasEagerState?ee.eagerState:a(b,ue)}else ne={lane:ue,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(A=O=ne,T=b):O=O.next=ne,Ae.lanes|=ue,kn|=ue;ee=ee.next}while(ee!==null&&ee!==s);if(O===null?T=b:O.next=A,!ti(b,t.memoizedState)&&(pt=!0,re&&(a=Rs,a!==null)))throw a;t.memoizedState=b,t.baseState=T,t.baseQueue=O,c.lastRenderedState=b}return x===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Uc(t){var s=rt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=t;var c=a.dispatch,x=a.pending,b=s.memoizedState;if(x!==null){a.pending=null;var T=x=x.next;do b=t(b,T.action),T=T.next;while(T!==x);ti(b,s.memoizedState)||(pt=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),a.lastRenderedState=b}return[b,c]}function wp(t,s,a){var c=Ae,x=rt(),b=Pe;if(b){if(a===void 0)throw Error(o(407));a=a()}else a=s();var T=!ti((Je||x).memoizedState,a);if(T&&(x.memoizedState=a,pt=!0),x=x.queue,Gc(Ep.bind(null,c,x,t),[t]),x.getSnapshot!==s||T||ft!==null&&ft.memoizedState.tag&1){if(c.flags|=2048,Us(9,{destroy:void 0},_p.bind(null,c,x,a,s),null),Qe===null)throw Error(o(349));b||(Xi&127)!==0||kp(c,s,a)}return a}function kp(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ae.updateQueue,s===null?(s=ia(),Ae.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function _p(t,s,a,c){s.value=a,s.getSnapshot=c,jp(s)&&Ap(t)}function Ep(t,s,a){return a(function(){jp(s)&&Ap(t)})}function jp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!ti(t,a)}catch{return!0}}function Ap(t){var s=Yn(t,2);s!==null&&$t(s,t,2)}function Oc(t){var s=zt();if(typeof t=="function"){var a=t;if(t=a(),is){fn(!0);try{a()}finally{fn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},s}function Mp(t,s,a,c){return t.baseState=a,Pc(t,Je,typeof c=="function"?c:Ki)}function av(t,s,a,c,x){if(aa(t))throw Error(o(485));if(t=s.action,t!==null){var b={payload:x,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};k.T!==null?a(!0):b.isTransition=!1,c(b),a=s.pending,a===null?(b.next=s.pending=b,Rp(s,b)):(b.next=a.next,s.pending=a.next=b)}}function Rp(t,s){var a=s.action,c=s.payload,x=t.state;if(s.isTransition){var b=k.T,T={};k.T=T;try{var A=a(x,c),O=k.S;O!==null&&O(T,A),Dp(t,s,A)}catch(ee){Hc(t,s,ee)}finally{b!==null&&T.types!==null&&(b.types=T.types),k.T=b}}else try{b=a(x,c),Dp(t,s,b)}catch(ee){Hc(t,s,ee)}}function Dp(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Ip(t,s,c)},function(c){return Hc(t,s,c)}):Ip(t,s,a)}function Ip(t,s,a){s.status="fulfilled",s.value=a,Lp(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Rp(t,a)))}function Hc(t,s,a){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Lp(s),s=s.next;while(s!==c)}t.action=null}function Lp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function zp(t,s){return s}function Pp(t,s){if(Pe){var a=Qe.formState;if(a!==null){e:{var c=Ae;if(Pe){if(Ze){t:{for(var x=Ze,b=vi;x.nodeType!==8;){if(!b){x=null;break t}if(x=Ni(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){Ze=Ni(x.nextSibling),c=x.data==="F!";break e}}gn(c)}c=!1}c&&(s=a[0])}}return a=zt(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:s},a.queue=c,a=im.bind(null,Ae,c),c.dispatch=a,c=Oc(!1),b=Fc.bind(null,Ae,!1,c.queue),c=zt(),x={state:s,dispatch:null,action:t,pending:null},c.queue=x,a=av.bind(null,Ae,x,b,a),x.dispatch=a,c.memoizedState=t,[s,a,!1]}function Up(t){var s=rt();return Op(s,Je,t)}function Op(t,s,a){if(s=Pc(t,s,zp)[0],t=sa(Ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ol(s)}catch(T){throw T===Ds?Jo:T}else c=s;s=rt();var x=s.queue,b=x.dispatch;return a!==s.memoizedState&&(Ae.flags|=2048,Us(9,{destroy:void 0},rv.bind(null,x,a),null)),[c,b,t]}function rv(t,s){t.action=s}function Hp(t){var s=rt(),a=Je;if(a!==null)return Op(s,a,t);rt(),s=s.memoizedState,a=rt();var c=a.queue.dispatch;return a.memoizedState=t,[s,c,!1]}function Us(t,s,a,c){return t={tag:t,create:a,deps:c,inst:s,next:null},s=Ae.updateQueue,s===null&&(s=ia(),Ae.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,s.lastEffect=t),t}function Gp(){return rt().memoizedState}function la(t,s,a,c){var x=zt();Ae.flags|=t,x.memoizedState=Us(1|s,{destroy:void 0},a,c===void 0?null:c)}function oa(t,s,a,c){var x=rt();c=c===void 0?null:c;var b=x.memoizedState.inst;Je!==null&&c!==null&&Mc(c,Je.memoizedState.deps)?x.memoizedState=Us(s,b,a,c):(Ae.flags|=t,x.memoizedState=Us(1|s,b,a,c))}function Vp(t,s){la(8390656,8,t,s)}function Gc(t,s){oa(2048,8,t,s)}function cv(t){Ae.flags|=4;var s=Ae.updateQueue;if(s===null)s=ia(),Ae.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function qp(t){var s=rt().memoizedState;return cv({ref:s,nextImpl:t}),function(){if((qe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Bp(t,s){return oa(4,2,t,s)}function $p(t,s){return oa(4,4,t,s)}function Fp(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Yp(t,s,a){a=a!=null?a.concat([t]):null,oa(4,4,Fp.bind(null,s,t),a)}function Vc(){}function Jp(t,s){var a=rt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Mc(s,c[1])?c[0]:(a.memoizedState=[t,s],t)}function Xp(t,s){var a=rt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Mc(s,c[1]))return c[0];if(c=t(),is){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[c,s],c}function qc(t,s,a){return a===void 0||(Xi&1073741824)!==0&&(Le&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=Km(),Ae.lanes|=t,kn|=t,a)}function Kp(t,s,a,c){return ti(a,s)?a:Ls.current!==null?(t=qc(t,a,c),ti(t,s)||(pt=!0),t):(Xi&42)===0||(Xi&1073741824)!==0&&(Le&261930)===0?(pt=!0,t.memoizedState=a):(t=Km(),Ae.lanes|=t,kn|=t,s)}function Qp(t,s,a,c,x){var b=R.p;R.p=b!==0&&8>b?b:8;var T=k.T,A={};k.T=A,Fc(t,!1,s,a);try{var O=x(),ee=k.S;if(ee!==null&&ee(A,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var re=sv(O,c);Hl(t,s,re,ai(t))}else Hl(t,s,c,ai(t))}catch(ue){Hl(t,s,{then:function(){},status:"rejected",reason:ue},ai())}finally{R.p=b,T!==null&&A.types!==null&&(T.types=A.types),k.T=T}}function dv(){}function Bc(t,s,a,c){if(t.tag!==5)throw Error(o(476));var x=Wp(t).queue;Qp(t,x,s,V,a===null?dv:function(){return Zp(t),a(c)})}function Wp(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:V},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Zp(t){var s=Wp(t);s.next===null&&(s=t.alternate.memoizedState),Hl(t,s.next.queue,{},ai())}function $c(){return jt(no)}function em(){return rt().memoizedState}function tm(){return rt().memoizedState}function uv(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=ai();t=vn(a);var c=Sn(s,t,a);c!==null&&($t(c,s,a),Ll(c,s,a)),s={cache:vc()},t.payload=s;return}s=s.return}}function fv(t,s,a){var c=ai();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},aa(t)?nm(s,a):(a=cc(t,s,a,c),a!==null&&($t(a,t,c),sm(a,s,c)))}function im(t,s,a){var c=ai();Hl(t,s,a,c)}function Hl(t,s,a,c){var x={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(aa(t))nm(s,x);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var T=s.lastRenderedState,A=b(T,a);if(x.hasEagerState=!0,x.eagerState=A,ti(A,T))return Go(t,s,x,0),Qe===null&&Ho(),!1}catch{}finally{}if(a=cc(t,s,x,c),a!==null)return $t(a,t,c),sm(a,s,c),!0}return!1}function Fc(t,s,a,c){if(c={lane:2,revertLane:Cd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},aa(t)){if(s)throw Error(o(479))}else s=cc(t,a,c,2),s!==null&&$t(s,t,2)}function aa(t){var s=t.alternate;return t===Ae||s!==null&&s===Ae}function nm(t,s){zs=ea=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function sm(t,s,a){if((a&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,cf(t,a)}}var Gl={readContext:jt,use:na,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};Gl.useEffectEvent=st;var lm={readContext:jt,use:na,useCallback:function(t,s){return zt().memoizedState=[t,s===void 0?null:s],t},useContext:jt,useEffect:Vp,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,la(4194308,4,Fp.bind(null,s,t),a)},useLayoutEffect:function(t,s){return la(4194308,4,t,s)},useInsertionEffect:function(t,s){la(4,2,t,s)},useMemo:function(t,s){var a=zt();s=s===void 0?null:s;var c=t();if(is){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(t,s,a){var c=zt();if(a!==void 0){var x=a(s);if(is){fn(!0);try{a(s)}finally{fn(!1)}}}else x=s;return c.memoizedState=c.baseState=x,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:x},c.queue=t,t=t.dispatch=fv.bind(null,Ae,t),[c.memoizedState,t]},useRef:function(t){var s=zt();return t={current:t},s.memoizedState=t},useState:function(t){t=Oc(t);var s=t.queue,a=im.bind(null,Ae,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Vc,useDeferredValue:function(t,s){var a=zt();return qc(a,t,s)},useTransition:function(){var t=Oc(!1);return t=Qp.bind(null,Ae,t.queue,!0,!1),zt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var c=Ae,x=zt();if(Pe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),Qe===null)throw Error(o(349));(Le&127)!==0||kp(c,s,a)}x.memoizedState=a;var b={value:a,getSnapshot:s};return x.queue=b,Vp(Ep.bind(null,c,b,t),[t]),c.flags|=2048,Us(9,{destroy:void 0},_p.bind(null,c,b,a,s),null),a},useId:function(){var t=zt(),s=Qe.identifierPrefix;if(Pe){var a=Pi,c=zi;a=(c&~(1<<32-ei(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=ta++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=lv++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:$c,useFormState:Pp,useActionState:Pp,useOptimistic:function(t){var s=zt();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Fc.bind(null,Ae,!0,a),a.dispatch=s,[t,s]},useMemoCache:zc,useCacheRefresh:function(){return zt().memoizedState=uv.bind(null,Ae)},useEffectEvent:function(t){var s=zt(),a={impl:t};return s.memoizedState=a,function(){if((qe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Yc={readContext:jt,use:na,useCallback:Jp,useContext:jt,useEffect:Gc,useImperativeHandle:Yp,useInsertionEffect:Bp,useLayoutEffect:$p,useMemo:Xp,useReducer:sa,useRef:Gp,useState:function(){return sa(Ki)},useDebugValue:Vc,useDeferredValue:function(t,s){var a=rt();return Kp(a,Je.memoizedState,t,s)},useTransition:function(){var t=sa(Ki)[0],s=rt().memoizedState;return[typeof t=="boolean"?t:Ol(t),s]},useSyncExternalStore:wp,useId:em,useHostTransitionStatus:$c,useFormState:Up,useActionState:Up,useOptimistic:function(t,s){var a=rt();return Mp(a,Je,t,s)},useMemoCache:zc,useCacheRefresh:tm};Yc.useEffectEvent=qp;var om={readContext:jt,use:na,useCallback:Jp,useContext:jt,useEffect:Gc,useImperativeHandle:Yp,useInsertionEffect:Bp,useLayoutEffect:$p,useMemo:Xp,useReducer:Uc,useRef:Gp,useState:function(){return Uc(Ki)},useDebugValue:Vc,useDeferredValue:function(t,s){var a=rt();return Je===null?qc(a,t,s):Kp(a,Je.memoizedState,t,s)},useTransition:function(){var t=Uc(Ki)[0],s=rt().memoizedState;return[typeof t=="boolean"?t:Ol(t),s]},useSyncExternalStore:wp,useId:em,useHostTransitionStatus:$c,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,s){var a=rt();return Je!==null?Mp(a,Je,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:zc,useCacheRefresh:tm};om.useEffectEvent=qp;function Jc(t,s,a,c){s=t.memoizedState,a=a(c,s),a=a==null?s:v({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xc={enqueueSetState:function(t,s,a){t=t._reactInternals;var c=ai(),x=vn(c);x.payload=s,a!=null&&(x.callback=a),s=Sn(t,x,c),s!==null&&($t(s,t,c),Ll(s,t,c))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var c=ai(),x=vn(c);x.tag=1,x.payload=s,a!=null&&(x.callback=a),s=Sn(t,x,c),s!==null&&($t(s,t,c),Ll(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=ai(),c=vn(a);c.tag=2,s!=null&&(c.callback=s),s=Sn(t,c,a),s!==null&&($t(s,t,a),Ll(s,t,a))}};function am(t,s,a,c,x,b,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,b,T):s.prototype&&s.prototype.isPureReactComponent?!_l(a,c)||!_l(x,b):!0}function rm(t,s,a,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==t&&Xc.enqueueReplaceState(s,s.state,null)}function ns(t,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(t=t.defaultProps){a===s&&(a=v({},a));for(var x in t)a[x]===void 0&&(a[x]=t[x])}return a}function cm(t){Oo(t)}function dm(t){console.error(t)}function um(t){Oo(t)}function ra(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function fm(t,s,a){try{var c=t.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Kc(t,s,a){return a=vn(a),a.tag=3,a.payload={element:null},a.callback=function(){ra(t,s)},a}function pm(t){return t=vn(t),t.tag=3,t}function mm(t,s,a,c){var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var b=c.value;t.payload=function(){return x(b)},t.callback=function(){fm(s,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){fm(s,a,c),typeof x!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function pv(t,s,a,c,x){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&As(s,a,x,!0),a=ni.current,a!==null){switch(a.tag){case 31:case 13:return Si===null?va():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=x,c===Xo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Sd(t,c,x)),!1;case 22:return a.flags|=65536,c===Xo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Sd(t,c,x)),!1}throw Error(o(435,a.tag))}return Sd(t,c,x),va(),!1}if(Pe)return s=ni.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,c!==hc&&(t=Error(o(422),{cause:c}),Al(gi(t,a)))):(c!==hc&&(s=Error(o(423),{cause:c}),Al(gi(s,a))),t=t.current.alternate,t.flags|=65536,x&=-x,t.lanes|=x,c=gi(c,a),x=Kc(t.stateNode,c,x),kc(t,x),lt!==4&&(lt=2)),!1;var b=Error(o(520),{cause:c});if(b=gi(b,a),Xl===null?Xl=[b]:Xl.push(b),lt!==4&&(lt=2),s===null)return!0;c=gi(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=x&-x,a.lanes|=t,t=Kc(a.stateNode,c,t),kc(a,t),!1;case 1:if(s=a.type,b=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(_n===null||!_n.has(b))))return a.flags|=65536,x&=-x,a.lanes|=x,x=pm(x),mm(x,t,a,c),kc(a,x),!1}a=a.return}while(a!==null);return!1}var Qc=Error(o(461)),pt=!1;function At(t,s,a,c){s.child=t===null?bp(s,null,a,c):ts(s,t.child,a,c)}function hm(t,s,a,c,x){a=a.render;var b=s.ref;if("ref"in c){var T={};for(var A in c)A!=="ref"&&(T[A]=c[A])}else T=c;return Qn(s),c=Rc(t,s,a,T,b,x),A=Dc(),t!==null&&!pt?(Ic(t,s,x),Qi(t,s,x)):(Pe&&A&&pc(s),s.flags|=1,At(t,s,c,x),s.child)}function xm(t,s,a,c,x){if(t===null){var b=a.type;return typeof b=="function"&&!dc(b)&&b.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=b,gm(t,s,b,c,x)):(t=qo(a.type,null,c,s,s.mode,x),t.ref=s.ref,t.return=s,s.child=t)}if(b=t.child,!ld(t,x)){var T=b.memoizedProps;if(a=a.compare,a=a!==null?a:_l,a(T,c)&&t.ref===s.ref)return Qi(t,s,x)}return s.flags|=1,t=$i(b,c),t.ref=s.ref,t.return=s,s.child=t}function gm(t,s,a,c,x){if(t!==null){var b=t.memoizedProps;if(_l(b,c)&&t.ref===s.ref)if(pt=!1,s.pendingProps=c=b,ld(t,x))(t.flags&131072)!==0&&(pt=!0);else return s.lanes=t.lanes,Qi(t,s,x)}return Wc(t,s,a,c,x)}function bm(t,s,a,c){var x=c.children,b=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|a:a,t!==null){for(c=s.child=t.child,x=0;c!==null;)x=x|c.lanes|c.childLanes,c=c.sibling;c=x&~b}else c=0,s.child=null;return ym(t,s,b,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yo(s,b!==null?b.cachePool:null),b!==null?Sp(s,b):Ec(),Np(s);else return c=s.lanes=536870912,ym(t,s,b!==null?b.baseLanes|a:a,a,c)}else b!==null?(Yo(s,b.cachePool),Sp(s,b),Tn(),s.memoizedState=null):(t!==null&&Yo(s,null),Ec(),Tn());return At(t,s,x,a),s.child}function Vl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ym(t,s,a,c,x){var b=Nc();return b=b===null?null:{parent:ut._currentValue,pool:b},s.memoizedState={baseLanes:a,cachePool:b},t!==null&&Yo(s,null),Ec(),Np(s),t!==null&&As(t,s,c,!0),s.childLanes=x,null}function ca(t,s){return s=ua({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function vm(t,s,a){return ts(s,t.child,null,a),t=ca(s,s.pendingProps),t.flags|=2,si(s),s.memoizedState=null,t}function mv(t,s,a){var c=s.pendingProps,x=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Pe){if(c.mode==="hidden")return t=ca(s,c),s.lanes=536870912,Vl(null,t);if(Ac(s),(t=Ze)?(t=Rh(t,vi),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:hn!==null?{id:zi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=np(t),a.return=s,s.child=a,Et=s,Ze=null)):t=null,t===null)throw gn(s);return s.lanes=536870912,null}return ca(s,c)}var b=t.memoizedState;if(b!==null){var T=b.dehydrated;if(Ac(s),x)if(s.flags&256)s.flags&=-257,s=vm(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(pt||As(t,s,a,!1),x=(a&t.childLanes)!==0,pt||x){if(c=Qe,c!==null&&(T=df(c,a),T!==0&&T!==b.retryLane))throw b.retryLane=T,Yn(t,T),$t(c,t,T),Qc;va(),s=vm(t,s,a)}else t=b.treeContext,Ze=Ni(T.nextSibling),Et=s,Pe=!0,xn=null,vi=!1,t!==null&&op(s,t),s=ca(s,c),s.flags|=4096;return s}return t=$i(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function da(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Wc(t,s,a,c,x){return Qn(s),a=Rc(t,s,a,c,void 0,x),c=Dc(),t!==null&&!pt?(Ic(t,s,x),Qi(t,s,x)):(Pe&&c&&pc(s),s.flags|=1,At(t,s,a,x),s.child)}function Sm(t,s,a,c,x,b){return Qn(s),s.updateQueue=null,a=Cp(s,c,a,x),Tp(t),c=Dc(),t!==null&&!pt?(Ic(t,s,b),Qi(t,s,b)):(Pe&&c&&pc(s),s.flags|=1,At(t,s,a,b),s.child)}function Nm(t,s,a,c,x){if(Qn(s),s.stateNode===null){var b=ks,T=a.contextType;typeof T=="object"&&T!==null&&(b=jt(T)),b=new a(c,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Xc,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=c,b.state=s.memoizedState,b.refs={},Cc(s),T=a.contextType,b.context=typeof T=="object"&&T!==null?jt(T):ks,b.state=s.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Jc(s,a,T,c),b.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Xc.enqueueReplaceState(b,b.state,null),Pl(s,c,b,x),zl(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){b=s.stateNode;var A=s.memoizedProps,O=ns(a,A);b.props=O;var ee=b.context,re=a.contextType;T=ks,typeof re=="object"&&re!==null&&(T=jt(re));var ue=a.getDerivedStateFromProps;re=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,re||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||ee!==T)&&rm(s,b,c,T),yn=!1;var ne=s.memoizedState;b.state=ne,Pl(s,c,b,x),zl(),ee=s.memoizedState,A||ne!==ee||yn?(typeof ue=="function"&&(Jc(s,a,ue,c),ee=s.memoizedState),(O=yn||am(s,a,O,c,ne,ee,T))?(re||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ee),b.props=c,b.state=ee,b.context=T,c=O):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{b=s.stateNode,wc(t,s),T=s.memoizedProps,re=ns(a,T),b.props=re,ue=s.pendingProps,ne=b.context,ee=a.contextType,O=ks,typeof ee=="object"&&ee!==null&&(O=jt(ee)),A=a.getDerivedStateFromProps,(ee=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ue||ne!==O)&&rm(s,b,c,O),yn=!1,ne=s.memoizedState,b.state=ne,Pl(s,c,b,x),zl();var le=s.memoizedState;T!==ue||ne!==le||yn||t!==null&&t.dependencies!==null&&$o(t.dependencies)?(typeof A=="function"&&(Jc(s,a,A,c),le=s.memoizedState),(re=yn||am(s,a,re,c,ne,le,O)||t!==null&&t.dependencies!==null&&$o(t.dependencies))?(ee||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,le,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,le,O)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=le),b.props=c,b.state=le,b.context=O,c=re):(typeof b.componentDidUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&ne===t.memoizedState||(s.flags|=1024),c=!1)}return b=c,da(t,s),c=(s.flags&128)!==0,b||c?(b=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,t!==null&&c?(s.child=ts(s,t.child,null,x),s.child=ts(s,null,a,x)):At(t,s,a,x),s.memoizedState=b.state,t=s.child):t=Qi(t,s,x),t}function Tm(t,s,a,c){return Xn(),s.flags|=256,At(t,s,a,c),s.child}var Zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ed(t){return{baseLanes:t,cachePool:fp()}}function td(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=oi),t}function Cm(t,s,a){var c=s.pendingProps,x=!1,b=(s.flags&128)!==0,T;if((T=b)||(T=t!==null&&t.memoizedState===null?!1:(at.current&2)!==0),T&&(x=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,t===null){if(Pe){if(x?Nn(s):Tn(),(t=Ze)?(t=Rh(t,vi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:hn!==null?{id:zi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=np(t),a.return=s,s.child=a,Et=s,Ze=null)):t=null,t===null)throw gn(s);return Pd(t)?s.lanes=32:s.lanes=536870912,null}var A=c.children;return c=c.fallback,x?(Tn(),x=s.mode,A=ua({mode:"hidden",children:A},x),c=Jn(c,x,a,null),A.return=s,c.return=s,A.sibling=c,s.child=A,c=s.child,c.memoizedState=ed(a),c.childLanes=td(t,T,a),s.memoizedState=Zc,Vl(null,c)):(Nn(s),id(s,A))}var O=t.memoizedState;if(O!==null&&(A=O.dehydrated,A!==null)){if(b)s.flags&256?(Nn(s),s.flags&=-257,s=nd(t,s,a)):s.memoizedState!==null?(Tn(),s.child=t.child,s.flags|=128,s=null):(Tn(),A=c.fallback,x=s.mode,c=ua({mode:"visible",children:c.children},x),A=Jn(A,x,a,null),A.flags|=2,c.return=s,A.return=s,c.sibling=A,s.child=c,ts(s,t.child,null,a),c=s.child,c.memoizedState=ed(a),c.childLanes=td(t,T,a),s.memoizedState=Zc,s=Vl(null,c));else if(Nn(s),Pd(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var ee=T.dgst;T=ee,c=Error(o(419)),c.stack="",c.digest=T,Al({value:c,source:null,stack:null}),s=nd(t,s,a)}else if(pt||As(t,s,a,!1),T=(a&t.childLanes)!==0,pt||T){if(T=Qe,T!==null&&(c=df(T,a),c!==0&&c!==O.retryLane))throw O.retryLane=c,Yn(t,c),$t(T,t,c),Qc;zd(A)||va(),s=nd(t,s,a)}else zd(A)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,Ze=Ni(A.nextSibling),Et=s,Pe=!0,xn=null,vi=!1,t!==null&&op(s,t),s=id(s,c.children),s.flags|=4096);return s}return x?(Tn(),A=c.fallback,x=s.mode,O=t.child,ee=O.sibling,c=$i(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,ee!==null?A=$i(ee,A):(A=Jn(A,x,a,null),A.flags|=2),A.return=s,c.return=s,c.sibling=A,s.child=c,Vl(null,c),c=s.child,A=t.child.memoizedState,A===null?A=ed(a):(x=A.cachePool,x!==null?(O=ut._currentValue,x=x.parent!==O?{parent:O,pool:O}:x):x=fp(),A={baseLanes:A.baseLanes|a,cachePool:x}),c.memoizedState=A,c.childLanes=td(t,T,a),s.memoizedState=Zc,Vl(t.child,c)):(Nn(s),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,t!==null&&(T=s.deletions,T===null?(s.deletions=[t],s.flags|=16):T.push(t)),s.child=a,s.memoizedState=null,a)}function id(t,s){return s=ua({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ua(t,s){return t=ii(22,t,null,s),t.lanes=0,t}function nd(t,s,a){return ts(s,t.child,null,a),t=id(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function wm(t,s,a){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),bc(t.return,s,a)}function sd(t,s,a,c,x,b){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:x,treeForkCount:b}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=a,T.tailMode=x,T.treeForkCount=b)}function km(t,s,a){var c=s.pendingProps,x=c.revealOrder,b=c.tail;c=c.children;var T=at.current,A=(T&2)!==0;if(A?(T=T&1|2,s.flags|=128):T&=1,se(at,T),At(t,s,c,a),c=Pe?jl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wm(t,a,s);else if(t.tag===19)wm(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(x){case"forwards":for(a=s.child,x=null;a!==null;)t=a.alternate,t!==null&&Zo(t)===null&&(x=a),a=a.sibling;a=x,a===null?(x=s.child,s.child=null):(x=a.sibling,a.sibling=null),sd(s,!1,x,a,b,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,x=s.child,s.child=null;x!==null;){if(t=x.alternate,t!==null&&Zo(t)===null){s.child=x;break}t=x.sibling,x.sibling=a,a=x,x=t}sd(s,!0,a,null,b,c);break;case"together":sd(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Qi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),kn|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(As(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,a=$i(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function ld(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&$o(t)))}function hv(t,s,a){switch(s.tag){case 3:be(s,s.stateNode.containerInfo),bn(s,ut,t.memoizedState.cache),Xn();break;case 27:case 5:Oe(s);break;case 4:be(s,s.stateNode.containerInfo);break;case 10:bn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ac(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Nn(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Cm(t,s,a):(Nn(s),t=Qi(t,s,a),t!==null?t.sibling:null);Nn(s);break;case 19:var x=(t.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(As(t,s,a,!1),c=(a&s.childLanes)!==0),x){if(c)return km(t,s,a);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(at,at.current),c)break;return null;case 22:return s.lanes=0,bm(t,s,a,s.pendingProps);case 24:bn(s,ut,t.memoizedState.cache)}return Qi(t,s,a)}function _m(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)pt=!0;else{if(!ld(t,a)&&(s.flags&128)===0)return pt=!1,hv(t,s,a);pt=(t.flags&131072)!==0}else pt=!1,Pe&&(s.flags&1048576)!==0&&lp(s,jl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=Zn(s.elementType),s.type=t,typeof t=="function")dc(t)?(c=ns(t,c),s.tag=1,s=Nm(null,s,t,c,a)):(s.tag=0,s=Wc(null,s,t,c,a));else{if(t!=null){var x=t.$$typeof;if(x===P){s.tag=11,s=hm(null,s,t,c,a);break e}else if(x===z){s.tag=14,s=xm(null,s,t,c,a);break e}}throw s=X(t)||t,Error(o(306,s,""))}}return s;case 0:return Wc(t,s,s.type,s.pendingProps,a);case 1:return c=s.type,x=ns(c,s.pendingProps),Nm(t,s,c,x,a);case 3:e:{if(be(s,s.stateNode.containerInfo),t===null)throw Error(o(387));c=s.pendingProps;var b=s.memoizedState;x=b.element,wc(t,s),Pl(s,c,null,a);var T=s.memoizedState;if(c=T.cache,bn(s,ut,c),c!==b.cache&&yc(s,[ut],a,!0),zl(),c=T.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=Tm(t,s,c,a);break e}else if(c!==x){x=gi(Error(o(424)),s),Al(x),s=Tm(t,s,c,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ze=Ni(t.firstChild),Et=s,Pe=!0,xn=null,vi=!0,a=bp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xn(),c===x){s=Qi(t,s,a);break e}At(t,s,c,a)}s=s.child}return s;case 26:return da(t,s),t===null?(a=Uh(s.type,null,s.pendingProps,null))?s.memoizedState=a:Pe||(a=s.type,t=s.pendingProps,c=_a(he.current).createElement(a),c[_t]=s,c[Ot]=t,Mt(c,a,t),St(c),s.stateNode=c):s.memoizedState=Uh(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Oe(s),t===null&&Pe&&(c=s.stateNode=Lh(s.type,s.pendingProps,he.current),Et=s,vi=!0,x=Ze,Mn(s.type)?(Ud=x,Ze=Ni(c.firstChild)):Ze=x),At(t,s,s.pendingProps.children,a),da(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Pe&&((x=c=Ze)&&(c=$v(c,s.type,s.pendingProps,vi),c!==null?(s.stateNode=c,Et=s,Ze=Ni(c.firstChild),vi=!1,x=!0):x=!1),x||gn(s)),Oe(s),x=s.type,b=s.pendingProps,T=t!==null?t.memoizedProps:null,c=b.children,Dd(x,b)?c=null:T!==null&&Dd(x,T)&&(s.flags|=32),s.memoizedState!==null&&(x=Rc(t,s,ov,null,null,a),no._currentValue=x),da(t,s),At(t,s,c,a),s.child;case 6:return t===null&&Pe&&((t=a=Ze)&&(a=Fv(a,s.pendingProps,vi),a!==null?(s.stateNode=a,Et=s,Ze=null,t=!0):t=!1),t||gn(s)),null;case 13:return Cm(t,s,a);case 4:return be(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=ts(s,null,c,a):At(t,s,c,a),s.child;case 11:return hm(t,s,s.type,s.pendingProps,a);case 7:return At(t,s,s.pendingProps,a),s.child;case 8:return At(t,s,s.pendingProps.children,a),s.child;case 12:return At(t,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,bn(s,s.type,c.value),At(t,s,c.children,a),s.child;case 9:return x=s.type._context,c=s.pendingProps.children,Qn(s),x=jt(x),c=c(x),s.flags|=1,At(t,s,c,a),s.child;case 14:return xm(t,s,s.type,s.pendingProps,a);case 15:return gm(t,s,s.type,s.pendingProps,a);case 19:return km(t,s,a);case 31:return mv(t,s,a);case 22:return bm(t,s,a,s.pendingProps);case 24:return Qn(s),c=jt(ut),t===null?(x=Nc(),x===null&&(x=Qe,b=vc(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=a),x=b),s.memoizedState={parent:c,cache:x},Cc(s),bn(s,ut,x)):((t.lanes&a)!==0&&(wc(t,s),Pl(s,null,null,a),zl()),x=t.memoizedState,b=s.memoizedState,x.parent!==c?(x={parent:c,cache:c},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),bn(s,ut,c)):(c=b.cache,bn(s,ut,c),c!==x.cache&&yc(s,[ut],a,!0))),At(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Wi(t){t.flags|=4}function od(t,s,a,c,x){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(x&335544128)===x)if(t.stateNode.complete)t.flags|=8192;else if(eh())t.flags|=8192;else throw es=Xo,Tc}else t.flags&=-16777217}function Em(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!qh(s))if(eh())t.flags|=8192;else throw es=Xo,Tc}function fa(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?af():536870912,t.lanes|=s,Vs|=s)}function ql(t,s){if(!Pe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function et(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(s)for(var x=t.child;x!==null;)a|=x.lanes|x.childLanes,c|=x.subtreeFlags&65011712,c|=x.flags&65011712,x.return=t,x=x.sibling;else for(x=t.child;x!==null;)a|=x.lanes|x.childLanes,c|=x.subtreeFlags,c|=x.flags,x.return=t,x=x.sibling;return t.subtreeFlags|=c,t.childLanes=a,s}function xv(t,s,a){var c=s.pendingProps;switch(mc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(s),null;case 1:return et(s),null;case 3:return a=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ji(ut),Te(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(js(s)?Wi(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xc())),et(s),null;case 26:var x=s.type,b=s.memoizedState;return t===null?(Wi(s),b!==null?(et(s),Em(s,b)):(et(s),od(s,x,null,c,a))):b?b!==t.memoizedState?(Wi(s),et(s),Em(s,b)):(et(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&Wi(s),et(s),od(s,x,t,c,a)),null;case 27:if(ct(s),a=he.current,x=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Wi(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return et(s),null}t=$.current,js(s)?ap(s):(t=Lh(x,c,a),s.stateNode=t,Wi(s))}return et(s),null;case 5:if(ct(s),x=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Wi(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return et(s),null}if(b=$.current,js(s))ap(s);else{var T=_a(he.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?b.multiple=!0:c.size&&(b.size=c.size);break;default:b=typeof c.is=="string"?T.createElement(x,{is:c.is}):T.createElement(x)}}b[_t]=s,b[Ot]=c;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=b;e:switch(Mt(b,x,c),x){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Wi(s)}}return et(s),od(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&Wi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(t=he.current,js(s)){if(t=s.stateNode,a=s.memoizedProps,c=null,x=Et,x!==null)switch(x.tag){case 27:case 5:c=x.memoizedProps}t[_t]=s,t=!!(t.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Ch(t.nodeValue,a)),t||gn(s,!0)}else t=_a(t).createTextNode(c),t[_t]=s,s.stateNode=t}return et(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(c=js(s),a!==null){if(t===null){if(!c)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[_t]=s}else Xn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;et(s),t=!1}else a=xc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(si(s),s):(si(s),null);if((s.flags&128)!==0)throw Error(o(558))}return et(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(x=js(s),c!==null&&c.dehydrated!==null){if(t===null){if(!x)throw Error(o(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));x[_t]=s}else Xn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;et(s),x=!1}else x=xc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(si(s),s):(si(s),null)}return si(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,t=t!==null&&t.memoizedState!==null,a&&(c=s.child,x=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(x=c.alternate.memoizedState.cachePool.pool),b=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==x&&(c.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),fa(s,s.updateQueue),et(s),null);case 4:return Te(),t===null&&Ed(s.stateNode.containerInfo),et(s),null;case 10:return Ji(s.type),et(s),null;case 19:if(J(at),c=s.memoizedState,c===null)return et(s),null;if(x=(s.flags&128)!==0,b=c.rendering,b===null)if(x)ql(c,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(b=Zo(t),b!==null){for(s.flags|=128,ql(c,!1),t=b.updateQueue,s.updateQueue=t,fa(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)ip(a,t),a=a.sibling;return se(at,at.current&1|2),Pe&&Fi(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&Wt()>ga&&(s.flags|=128,x=!0,ql(c,!1),s.lanes=4194304)}else{if(!x)if(t=Zo(b),t!==null){if(s.flags|=128,x=!0,t=t.updateQueue,s.updateQueue=t,fa(s,t),ql(c,!0),c.tail===null&&c.tailMode==="hidden"&&!b.alternate&&!Pe)return et(s),null}else 2*Wt()-c.renderingStartTime>ga&&a!==536870912&&(s.flags|=128,x=!0,ql(c,!1),s.lanes=4194304);c.isBackwards?(b.sibling=s.child,s.child=b):(t=c.last,t!==null?t.sibling=b:s.child=b,c.last=b)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Wt(),t.sibling=null,a=at.current,se(at,x?a&1|2:a&1),Pe&&Fi(s,c.treeForkCount),t):(et(s),null);case 22:case 23:return si(s),jc(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(et(s),s.subtreeFlags&6&&(s.flags|=8192)):et(s),a=s.updateQueue,a!==null&&fa(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),t!==null&&J(Wn),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ji(ut),et(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function gv(t,s){switch(mc(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ji(ut),Te(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return ct(s),null;case 31:if(s.memoizedState!==null){if(si(s),s.alternate===null)throw Error(o(340));Xn()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(si(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Xn()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return J(at),null;case 4:return Te(),null;case 10:return Ji(s.type),null;case 22:case 23:return si(s),jc(),t!==null&&J(Wn),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Ji(ut),null;case 25:return null;default:return null}}function jm(t,s){switch(mc(s),s.tag){case 3:Ji(ut),Te();break;case 26:case 27:case 5:ct(s);break;case 4:Te();break;case 31:s.memoizedState!==null&&si(s);break;case 13:si(s);break;case 19:J(at);break;case 10:Ji(s.type);break;case 22:case 23:si(s),jc(),t!==null&&J(Wn);break;case 24:Ji(ut)}}function Bl(t,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var x=c.next;a=x;do{if((a.tag&t)===t){c=void 0;var b=a.create,T=a.inst;c=b(),T.destroy=c}a=a.next}while(a!==x)}}catch(A){Ye(s,s.return,A)}}function Cn(t,s,a){try{var c=s.updateQueue,x=c!==null?c.lastEffect:null;if(x!==null){var b=x.next;c=b;do{if((c.tag&t)===t){var T=c.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,x=s;var O=a,ee=A;try{ee()}catch(re){Ye(x,O,re)}}}c=c.next}while(c!==b)}}catch(re){Ye(s,s.return,re)}}function Am(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{vp(s,a)}catch(c){Ye(t,t.return,c)}}}function Mm(t,s,a){a.props=ns(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(c){Ye(t,s,c)}}function $l(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(x){Ye(t,s,x)}}function Ui(t,s){var a=t.ref,c=t.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(x){Ye(t,s,x)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(x){Ye(t,s,x)}else a.current=null}function Rm(t){var s=t.type,a=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(x){Ye(t,t.return,x)}}function ad(t,s,a){try{var c=t.stateNode;Ov(c,t.type,a,s),c[Ot]=s}catch(x){Ye(t,t.return,x)}}function Dm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Mn(t.type)||t.tag===4}function rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Mn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cd(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=qi));else if(c!==4&&(c===27&&Mn(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(cd(t,s,a),t=t.sibling;t!==null;)cd(t,s,a),t=t.sibling}function pa(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(c!==4&&(c===27&&Mn(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(pa(t,s,a),t=t.sibling;t!==null;)pa(t,s,a),t=t.sibling}function Im(t){var s=t.stateNode,a=t.memoizedProps;try{for(var c=t.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);Mt(s,c,a),s[_t]=t,s[Ot]=a}catch(b){Ye(t,t.return,b)}}var Zi=!1,mt=!1,dd=!1,Lm=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function bv(t,s){if(t=t.containerInfo,Md=Ia,t=Yf(t),nc(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var x=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{a.nodeType,b.nodeType}catch{a=null;break e}var T=0,A=-1,O=-1,ee=0,re=0,ue=t,ne=null;t:for(;;){for(var le;ue!==a||x!==0&&ue.nodeType!==3||(A=T+x),ue!==b||c!==0&&ue.nodeType!==3||(O=T+c),ue.nodeType===3&&(T+=ue.nodeValue.length),(le=ue.firstChild)!==null;)ne=ue,ue=le;for(;;){if(ue===t)break t;if(ne===a&&++ee===x&&(A=T),ne===b&&++re===c&&(O=T),(le=ue.nextSibling)!==null)break;ue=ne,ne=ue.parentNode}ue=le}a=A===-1||O===-1?null:{start:A,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rd={focusedElem:t,selectionRange:a},Ia=!1,Nt=s;Nt!==null;)if(s=Nt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Nt=t;else for(;Nt!==null;){switch(s=Nt,b=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)x=t[a],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&b!==null){t=void 0,a=s,x=b.memoizedProps,b=b.memoizedState,c=a.stateNode;try{var ve=ns(a.type,x);t=c.getSnapshotBeforeUpdate(ve,b),c.__reactInternalSnapshotBeforeUpdate=t}catch(we){Ye(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Ld(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ld(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Nt=t;break}Nt=s.return}}function zm(t,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:tn(t,a),c&4&&Bl(5,a);break;case 1:if(tn(t,a),c&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(T){Ye(a,a.return,T)}else{var x=ns(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(x,s,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ye(a,a.return,T)}}c&64&&Am(a),c&512&&$l(a,a.return);break;case 3:if(tn(t,a),c&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{vp(t,s)}catch(T){Ye(a,a.return,T)}}break;case 27:s===null&&c&4&&Im(a);case 26:case 5:tn(t,a),s===null&&c&4&&Rm(a),c&512&&$l(a,a.return);break;case 12:tn(t,a);break;case 31:tn(t,a),c&4&&Om(t,a);break;case 13:tn(t,a),c&4&&Hm(t,a),c&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=_v.bind(null,a),Yv(t,a))));break;case 22:if(c=a.memoizedState!==null||Zi,!c){s=s!==null&&s.memoizedState!==null||mt,x=Zi;var b=mt;Zi=c,(mt=s)&&!b?nn(t,a,(a.subtreeFlags&8772)!==0):tn(t,a),Zi=x,mt=b}break;case 30:break;default:tn(t,a)}}function Pm(t){var s=t.alternate;s!==null&&(t.alternate=null,Pm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Hr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,Gt=!1;function en(t,s,a){for(a=a.child;a!==null;)Um(t,s,a),a=a.sibling}function Um(t,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(hl,a)}catch{}switch(a.tag){case 26:mt||Ui(a,s),en(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:mt||Ui(a,s);var c=it,x=Gt;Mn(a.type)&&(it=a.stateNode,Gt=!1),en(t,s,a),eo(a.stateNode),it=c,Gt=x;break;case 5:mt||Ui(a,s);case 6:if(c=it,x=Gt,it=null,en(t,s,a),it=c,Gt=x,it!==null)if(Gt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(b){Ye(a,s,b)}else try{it.removeChild(a.stateNode)}catch(b){Ye(a,s,b)}break;case 18:it!==null&&(Gt?(t=it,Ah(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ks(t)):Ah(it,a.stateNode));break;case 4:c=it,x=Gt,it=a.stateNode.containerInfo,Gt=!0,en(t,s,a),it=c,Gt=x;break;case 0:case 11:case 14:case 15:Cn(2,a,s),mt||Cn(4,a,s),en(t,s,a);break;case 1:mt||(Ui(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Mm(a,s,c)),en(t,s,a);break;case 21:en(t,s,a);break;case 22:mt=(c=mt)||a.memoizedState!==null,en(t,s,a),mt=c;break;default:en(t,s,a)}}function Om(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ks(t)}catch(a){Ye(s,s.return,a)}}}function Hm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ks(t)}catch(a){Ye(s,s.return,a)}}function yv(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Lm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Lm),s;default:throw Error(o(435,t.tag))}}function ma(t,s){var a=yv(t);s.forEach(function(c){if(!a.has(c)){a.add(c);var x=Ev.bind(null,t,c);c.then(x,x)}})}function Vt(t,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var x=a[c],b=t,T=s,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Mn(A.type)){it=A.stateNode,Gt=!1;break e}break;case 5:it=A.stateNode,Gt=!1;break e;case 3:case 4:it=A.stateNode.containerInfo,Gt=!0;break e}A=A.return}if(it===null)throw Error(o(160));Um(b,T,x),it=null,Gt=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Gm(s,t),s=s.sibling}var _i=null;function Gm(t,s){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vt(s,t),qt(t),c&4&&(Cn(3,t,t.return),Bl(3,t),Cn(5,t,t.return));break;case 1:Vt(s,t),qt(t),c&512&&(mt||a===null||Ui(a,a.return)),c&64&&Zi&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var x=_i;if(Vt(s,t),qt(t),c&512&&(mt||a===null||Ui(a,a.return)),c&4){var b=a!==null?a.memoizedState:null;if(c=t.memoizedState,a===null)if(c===null)if(t.stateNode===null){e:{c=t.type,a=t.memoizedProps,x=x.ownerDocument||x;t:switch(c){case"title":b=x.getElementsByTagName("title")[0],(!b||b[bl]||b[_t]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(c),x.head.insertBefore(b,x.querySelector("head > title"))),Mt(b,c,a),b[_t]=t,St(b),c=b;break e;case"link":var T=Gh("link","href",x).get(c+(a.href||""));if(T){for(var A=0;A<T.length;A++)if(b=T[A],b.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&b.getAttribute("rel")===(a.rel==null?null:a.rel)&&b.getAttribute("title")===(a.title==null?null:a.title)&&b.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(A,1);break t}}b=x.createElement(c),Mt(b,c,a),x.head.appendChild(b);break;case"meta":if(T=Gh("meta","content",x).get(c+(a.content||""))){for(A=0;A<T.length;A++)if(b=T[A],b.getAttribute("content")===(a.content==null?null:""+a.content)&&b.getAttribute("name")===(a.name==null?null:a.name)&&b.getAttribute("property")===(a.property==null?null:a.property)&&b.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&b.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(A,1);break t}}b=x.createElement(c),Mt(b,c,a),x.head.appendChild(b);break;default:throw Error(o(468,c))}b[_t]=t,St(b),c=b}t.stateNode=c}else Vh(x,t.type,t.stateNode);else t.stateNode=Hh(x,c,t.memoizedProps);else b!==c?(b===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):b.count--,c===null?Vh(x,t.type,t.stateNode):Hh(x,c,t.memoizedProps)):c===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:Vt(s,t),qt(t),c&512&&(mt||a===null||Ui(a,a.return)),a!==null&&c&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Vt(s,t),qt(t),c&512&&(mt||a===null||Ui(a,a.return)),t.flags&32){x=t.stateNode;try{ys(x,"")}catch(ve){Ye(t,t.return,ve)}}c&4&&t.stateNode!=null&&(x=t.memoizedProps,ad(t,x,a!==null?a.memoizedProps:x)),c&1024&&(dd=!0);break;case 6:if(Vt(s,t),qt(t),c&4){if(t.stateNode===null)throw Error(o(162));c=t.memoizedProps,a=t.stateNode;try{a.nodeValue=c}catch(ve){Ye(t,t.return,ve)}}break;case 3:if(Aa=null,x=_i,_i=Ea(s.containerInfo),Vt(s,t),_i=x,qt(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ks(s.containerInfo)}catch(ve){Ye(t,t.return,ve)}dd&&(dd=!1,Vm(t));break;case 4:c=_i,_i=Ea(t.stateNode.containerInfo),Vt(s,t),qt(t),_i=c;break;case 12:Vt(s,t),qt(t);break;case 31:Vt(s,t),qt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ma(t,c)));break;case 13:Vt(s,t),qt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xa=Wt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ma(t,c)));break;case 22:x=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,ee=Zi,re=mt;if(Zi=ee||x,mt=re||O,Vt(s,t),mt=re,Zi=ee,qt(t),c&8192)e:for(s=t.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(a===null||O||Zi||mt||ss(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(b=O.stateNode,x)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=O.stateNode;var ue=O.memoizedProps.style,ne=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;A.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ve){Ye(O,O.return,ve)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=x?"":O.memoizedProps}catch(ve){Ye(O,O.return,ve)}}}else if(s.tag===18){if(a===null){O=s;try{var le=O.stateNode;x?Mh(le,!0):Mh(O.stateNode,!1)}catch(ve){Ye(O,O.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ma(t,a))));break;case 19:Vt(s,t),qt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ma(t,c)));break;case 30:break;case 21:break;default:Vt(s,t),qt(t)}}function qt(t){var s=t.flags;if(s&2){try{for(var a,c=t.return;c!==null;){if(Dm(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var x=a.stateNode,b=rd(t);pa(t,b,x);break;case 5:var T=a.stateNode;a.flags&32&&(ys(T,""),a.flags&=-33);var A=rd(t);pa(t,A,T);break;case 3:case 4:var O=a.stateNode.containerInfo,ee=rd(t);cd(t,ee,O);break;default:throw Error(o(161))}}catch(re){Ye(t,t.return,re)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Vm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Vm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function tn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)zm(t,s.alternate,s),s=s.sibling}function ss(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Cn(4,s,s.return),ss(s);break;case 1:Ui(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Mm(s,s.return,a),ss(s);break;case 27:eo(s.stateNode);case 26:case 5:Ui(s,s.return),ss(s);break;case 22:s.memoizedState===null&&ss(s);break;case 30:ss(s);break;default:ss(s)}t=t.sibling}}function nn(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,x=t,b=s,T=b.flags;switch(b.tag){case 0:case 11:case 15:nn(x,b,a),Bl(4,b);break;case 1:if(nn(x,b,a),c=b,x=c.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ee){Ye(c,c.return,ee)}if(c=b,x=c.updateQueue,x!==null){var A=c.stateNode;try{var O=x.shared.hiddenCallbacks;if(O!==null)for(x.shared.hiddenCallbacks=null,x=0;x<O.length;x++)yp(O[x],A)}catch(ee){Ye(c,c.return,ee)}}a&&T&64&&Am(b),$l(b,b.return);break;case 27:Im(b);case 26:case 5:nn(x,b,a),a&&c===null&&T&4&&Rm(b),$l(b,b.return);break;case 12:nn(x,b,a);break;case 31:nn(x,b,a),a&&T&4&&Om(x,b);break;case 13:nn(x,b,a),a&&T&4&&Hm(x,b);break;case 22:b.memoizedState===null&&nn(x,b,a),$l(b,b.return);break;case 30:break;default:nn(x,b,a)}s=s.sibling}}function ud(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ml(a))}function fd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ml(t))}function Ei(t,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qm(t,s,a,c),s=s.sibling}function qm(t,s,a,c){var x=s.flags;switch(s.tag){case 0:case 11:case 15:Ei(t,s,a,c),x&2048&&Bl(9,s);break;case 1:Ei(t,s,a,c);break;case 3:Ei(t,s,a,c),x&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ml(t)));break;case 12:if(x&2048){Ei(t,s,a,c),t=s.stateNode;try{var b=s.memoizedProps,T=b.id,A=b.onPostCommit;typeof A=="function"&&A(T,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){Ye(s,s.return,O)}}else Ei(t,s,a,c);break;case 31:Ei(t,s,a,c);break;case 13:Ei(t,s,a,c);break;case 23:break;case 22:b=s.stateNode,T=s.alternate,s.memoizedState!==null?b._visibility&2?Ei(t,s,a,c):Fl(t,s):b._visibility&2?Ei(t,s,a,c):(b._visibility|=2,Os(t,s,a,c,(s.subtreeFlags&10256)!==0||!1)),x&2048&&ud(T,s);break;case 24:Ei(t,s,a,c),x&2048&&fd(s.alternate,s);break;default:Ei(t,s,a,c)}}function Os(t,s,a,c,x){for(x=x&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=t,T=s,A=a,O=c,ee=T.flags;switch(T.tag){case 0:case 11:case 15:Os(b,T,A,O,x),Bl(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?Os(b,T,A,O,x):Fl(b,T):(re._visibility|=2,Os(b,T,A,O,x)),x&&ee&2048&&ud(T.alternate,T);break;case 24:Os(b,T,A,O,x),x&&ee&2048&&fd(T.alternate,T);break;default:Os(b,T,A,O,x)}s=s.sibling}}function Fl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,c=s,x=c.flags;switch(c.tag){case 22:Fl(a,c),x&2048&&ud(c.alternate,c);break;case 24:Fl(a,c),x&2048&&fd(c.alternate,c);break;default:Fl(a,c)}s=s.sibling}}var Yl=8192;function Hs(t,s,a){if(t.subtreeFlags&Yl)for(t=t.child;t!==null;)Bm(t,s,a),t=t.sibling}function Bm(t,s,a){switch(t.tag){case 26:Hs(t,s,a),t.flags&Yl&&t.memoizedState!==null&&l1(a,_i,t.memoizedState,t.memoizedProps);break;case 5:Hs(t,s,a);break;case 3:case 4:var c=_i;_i=Ea(t.stateNode.containerInfo),Hs(t,s,a),_i=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Yl,Yl=16777216,Hs(t,s,a),Yl=c):Hs(t,s,a));break;default:Hs(t,s,a)}}function $m(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Jl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Nt=c,Ym(c,t)}$m(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fm(t),t=t.sibling}function Fm(t){switch(t.tag){case 0:case 11:case 15:Jl(t),t.flags&2048&&Cn(9,t,t.return);break;case 3:Jl(t);break;case 12:Jl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ha(t)):Jl(t);break;default:Jl(t)}}function ha(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Nt=c,Ym(c,t)}$m(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Cn(8,s,s.return),ha(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ha(s));break;default:ha(s)}t=t.sibling}}function Ym(t,s){for(;Nt!==null;){var a=Nt;switch(a.tag){case 0:case 11:case 15:Cn(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Nt=c;else e:for(a=t;Nt!==null;){c=Nt;var x=c.sibling,b=c.return;if(Pm(c),c===a){Nt=null;break e}if(x!==null){x.return=b,Nt=x;break e}Nt=b}}}var vv={getCacheForType:function(t){var s=jt(ut),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return jt(ut).controller.signal}},Sv=typeof WeakMap=="function"?WeakMap:Map,qe=0,Qe=null,Re=null,Le=0,Fe=0,li=null,wn=!1,Gs=!1,pd=!1,sn=0,lt=0,kn=0,ls=0,md=0,oi=0,Vs=0,Xl=null,Bt=null,hd=!1,xa=0,Jm=0,ga=1/0,ba=null,_n=null,bt=0,En=null,qs=null,ln=0,xd=0,gd=null,Xm=null,Kl=0,bd=null;function ai(){return(qe&2)!==0&&Le!==0?Le&-Le:k.T!==null?Cd():uf()}function Km(){if(oi===0)if((Le&536870912)===0||Pe){var t=ko;ko<<=1,(ko&3932160)===0&&(ko=262144),oi=t}else oi=536870912;return t=ni.current,t!==null&&(t.flags|=32),oi}function $t(t,s,a){(t===Qe&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)&&(Bs(t,0),jn(t,Le,oi,!1)),gl(t,a),((qe&2)===0||t!==Qe)&&(t===Qe&&((qe&2)===0&&(ls|=a),lt===4&&jn(t,Le,oi,!1)),Oi(t))}function Qm(t,s,a){if((qe&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&t.expiredLanes)===0||xl(t,s),x=c?Cv(t,s):vd(t,s,!0),b=c;do{if(x===0){Gs&&!c&&jn(t,s,0,!1);break}else{if(a=t.current.alternate,b&&!Nv(a)){x=vd(t,s,!1),b=!1;continue}if(x===2){if(b=s,t.errorRecoveryDisabledLanes&b)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var A=t;x=Xl;var O=A.current.memoizedState.isDehydrated;if(O&&(Bs(A,T).flags|=256),T=vd(A,T,!1),T!==2){if(pd&&!O){A.errorRecoveryDisabledLanes|=b,ls|=b,x=4;break e}b=Bt,Bt=x,b!==null&&(Bt===null?Bt=b:Bt.push.apply(Bt,b))}x=T}if(b=!1,x!==2)continue}}if(x===1){Bs(t,0),jn(t,s,0,!0);break}e:{switch(c=t,b=x,b){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:jn(c,s,oi,!wn);break e;case 2:Bt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(x=xa+300-Wt(),10<x)){if(jn(c,s,oi,!wn),Eo(c,0,!0)!==0)break e;ln=s,c.timeoutHandle=Eh(Wm.bind(null,c,a,Bt,ba,hd,s,oi,ls,Vs,wn,b,"Throttled",-0,0),x);break e}Wm(c,a,Bt,ba,hd,s,oi,ls,Vs,wn,b,null,-0,0)}}break}while(!0);Oi(t)}function Wm(t,s,a,c,x,b,T,A,O,ee,re,ue,ne,le){if(t.timeoutHandle=-1,ue=s.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qi},Bm(s,b,ue);var ve=(b&62914560)===b?xa-Wt():(b&4194048)===b?Jm-Wt():0;if(ve=o1(ue,ve),ve!==null){ln=b,t.cancelPendingCommit=ve(oh.bind(null,t,s,b,a,c,x,T,A,O,re,ue,null,ne,le)),jn(t,b,T,!ee);return}}oh(t,s,b,a,c,x,T,A,O)}function Nv(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var x=a[c],b=x.getSnapshot;x=x.value;try{if(!ti(b(),x))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function jn(t,s,a,c){s&=~md,s&=~ls,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var x=s;0<x;){var b=31-ei(x),T=1<<b;c[b]=-1,x&=~T}a!==0&&rf(t,a,s)}function ya(){return(qe&6)===0?(Ql(0),!1):!0}function yd(){if(Re!==null){if(Fe===0)var t=Re.return;else t=Re,Yi=Kn=null,Lc(t),Is=null,Dl=0,t=Re;for(;t!==null;)jm(t.alternate,t),t=t.return;Re=null}}function Bs(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Vv(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ln=0,yd(),Qe=t,Re=a=$i(t.current,null),Le=s,Fe=0,li=null,wn=!1,Gs=xl(t,s),pd=!1,Vs=oi=md=ls=kn=lt=0,Bt=Xl=null,hd=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var x=31-ei(c),b=1<<x;s|=t[x],c&=~b}return sn=s,Ho(),a}function Zm(t,s){Ae=null,k.H=Gl,s===Ds||s===Jo?(s=hp(),Fe=3):s===Tc?(s=hp(),Fe=4):Fe=s===Qc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,li=s,Re===null&&(lt=1,ra(t,gi(s,t.current)))}function eh(){var t=ni.current;return t===null?!0:(Le&4194048)===Le?Si===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Si:!1}function th(){var t=k.H;return k.H=Gl,t===null?Gl:t}function ih(){var t=k.A;return k.A=vv,t}function va(){lt=4,wn||(Le&4194048)!==Le&&ni.current!==null||(Gs=!0),(kn&134217727)===0&&(ls&134217727)===0||Qe===null||jn(Qe,Le,oi,!1)}function vd(t,s,a){var c=qe;qe|=2;var x=th(),b=ih();(Qe!==t||Le!==s)&&(ba=null,Bs(t,s)),s=!1;var T=lt;e:do try{if(Fe!==0&&Re!==null){var A=Re,O=li;switch(Fe){case 8:yd(),T=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(s=!0);var ee=Fe;if(Fe=0,li=null,$s(t,A,O,ee),a&&Gs){T=0;break e}break;default:ee=Fe,Fe=0,li=null,$s(t,A,O,ee)}}Tv(),T=lt;break}catch(re){Zm(t,re)}while(!0);return s&&t.shellSuspendCounter++,Yi=Kn=null,qe=c,k.H=x,k.A=b,Re===null&&(Qe=null,Le=0,Ho()),T}function Tv(){for(;Re!==null;)nh(Re)}function Cv(t,s){var a=qe;qe|=2;var c=th(),x=ih();Qe!==t||Le!==s?(ba=null,ga=Wt()+500,Bs(t,s)):Gs=xl(t,s);e:do try{if(Fe!==0&&Re!==null){s=Re;var b=li;t:switch(Fe){case 1:Fe=0,li=null,$s(t,s,b,1);break;case 2:case 9:if(pp(b)){Fe=0,li=null,sh(s);break}s=function(){Fe!==2&&Fe!==9||Qe!==t||(Fe=7),Oi(t)},b.then(s,s);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:pp(b)?(Fe=0,li=null,sh(s)):(Fe=0,li=null,$s(t,s,b,7));break;case 5:var T=null;switch(Re.tag){case 26:T=Re.memoizedState;case 5:case 27:var A=Re;if(T?qh(T):A.stateNode.complete){Fe=0,li=null;var O=A.sibling;if(O!==null)Re=O;else{var ee=A.return;ee!==null?(Re=ee,Sa(ee)):Re=null}break t}}Fe=0,li=null,$s(t,s,b,5);break;case 6:Fe=0,li=null,$s(t,s,b,6);break;case 8:yd(),lt=6;break e;default:throw Error(o(462))}}wv();break}catch(re){Zm(t,re)}while(!0);return Yi=Kn=null,k.H=c,k.A=x,qe=a,Re!==null?0:(Qe=null,Le=0,Ho(),lt)}function wv(){for(;Re!==null&&!Jb();)nh(Re)}function nh(t){var s=_m(t.alternate,t,sn);t.memoizedProps=t.pendingProps,s===null?Sa(t):Re=s}function sh(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Sm(a,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=Sm(a,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:Lc(s);default:jm(a,s),s=Re=ip(s,sn),s=_m(a,s,sn)}t.memoizedProps=t.pendingProps,s===null?Sa(t):Re=s}function $s(t,s,a,c){Yi=Kn=null,Lc(s),Is=null,Dl=0;var x=s.return;try{if(pv(t,x,s,a,Le)){lt=1,ra(t,gi(a,t.current)),Re=null;return}}catch(b){if(x!==null)throw Re=x,b;lt=1,ra(t,gi(a,t.current)),Re=null;return}s.flags&32768?(Pe||c===1?t=!0:Gs||(Le&536870912)!==0?t=!1:(wn=t=!0,(c===2||c===9||c===3||c===6)&&(c=ni.current,c!==null&&c.tag===13&&(c.flags|=16384))),lh(s,t)):Sa(s)}function Sa(t){var s=t;do{if((s.flags&32768)!==0){lh(s,wn);return}t=s.return;var a=xv(s.alternate,s,sn);if(a!==null){Re=a;return}if(s=s.sibling,s!==null){Re=s;return}Re=s=t}while(s!==null);lt===0&&(lt=5)}function lh(t,s){do{var a=gv(t.alternate,t);if(a!==null){a.flags&=32767,Re=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Re=t;return}Re=t=a}while(t!==null);lt=6,Re=null}function oh(t,s,a,c,x,b,T,A,O){t.cancelPendingCommit=null;do Na();while(bt!==0);if((qe&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(b=s.lanes|s.childLanes,b|=rc,sy(t,a,b,T,A,O),t===Qe&&(Re=Qe=null,Le=0),qs=s,En=t,ln=a,xd=b,gd=x,Xm=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,jv(Co,function(){return uh(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,x=R.p,R.p=2,T=qe,qe|=4;try{bv(t,s,a)}finally{qe=T,R.p=x,k.T=c}}bt=1,ah(),rh(),ch()}}function ah(){if(bt===1){bt=0;var t=En,s=qs,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var c=R.p;R.p=2;var x=qe;qe|=4;try{Gm(s,t);var b=Rd,T=Yf(t.containerInfo),A=b.focusedElem,O=b.selectionRange;if(T!==A&&A&&A.ownerDocument&&Ff(A.ownerDocument.documentElement,A)){if(O!==null&&nc(A)){var ee=O.start,re=O.end;if(re===void 0&&(re=ee),"selectionStart"in A)A.selectionStart=ee,A.selectionEnd=Math.min(re,A.value.length);else{var ue=A.ownerDocument||document,ne=ue&&ue.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),ve=A.textContent.length,we=Math.min(O.start,ve),Ke=O.end===void 0?we:Math.min(O.end,ve);!le.extend&&we>Ke&&(T=Ke,Ke=we,we=T);var K=$f(A,we),Y=$f(A,Ke);if(K&&Y&&(le.rangeCount!==1||le.anchorNode!==K.node||le.anchorOffset!==K.offset||le.focusNode!==Y.node||le.focusOffset!==Y.offset)){var Z=ue.createRange();Z.setStart(K.node,K.offset),le.removeAllRanges(),we>Ke?(le.addRange(Z),le.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),le.addRange(Z))}}}}for(ue=[],le=A;le=le.parentNode;)le.nodeType===1&&ue.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ue.length;A++){var ce=ue[A];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Ia=!!Md,Rd=Md=null}finally{qe=x,R.p=c,k.T=a}}t.current=s,bt=2}}function rh(){if(bt===2){bt=0;var t=En,s=qs,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var c=R.p;R.p=2;var x=qe;qe|=4;try{zm(t,s.alternate,s)}finally{qe=x,R.p=c,k.T=a}}bt=3}}function ch(){if(bt===4||bt===3){bt=0,Xb();var t=En,s=qs,a=ln,c=Xm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?bt=5:(bt=0,qs=En=null,dh(t,t.pendingLanes));var x=t.pendingLanes;if(x===0&&(_n=null),Ur(a),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(hl,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=k.T,x=R.p,R.p=2,k.T=null;try{for(var b=t.onRecoverableError,T=0;T<c.length;T++){var A=c[T];b(A.value,{componentStack:A.stack})}}finally{k.T=s,R.p=x}}(ln&3)!==0&&Na(),Oi(t),x=t.pendingLanes,(a&261930)!==0&&(x&42)!==0?t===bd?Kl++:(Kl=0,bd=t):Kl=0,Ql(0)}}function dh(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Ml(s)))}function Na(){return ah(),rh(),ch(),uh()}function uh(){if(bt!==5)return!1;var t=En,s=xd;xd=0;var a=Ur(ln),c=k.T,x=R.p;try{R.p=32>a?32:a,k.T=null,a=gd,gd=null;var b=En,T=ln;if(bt=0,qs=En=null,ln=0,(qe&6)!==0)throw Error(o(331));var A=qe;if(qe|=4,Fm(b.current),qm(b,b.current,T,a),qe=A,Ql(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(hl,b)}catch{}return!0}finally{R.p=x,k.T=c,dh(t,s)}}function fh(t,s,a){s=gi(a,s),s=Kc(t.stateNode,s,2),t=Sn(t,s,2),t!==null&&(gl(t,2),Oi(t))}function Ye(t,s,a){if(t.tag===3)fh(t,t,a);else for(;s!==null;){if(s.tag===3){fh(s,t,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(_n===null||!_n.has(c))){t=gi(a,t),a=pm(2),c=Sn(s,a,2),c!==null&&(mm(a,c,s,t),gl(c,2),Oi(c));break}}s=s.return}}function Sd(t,s,a){var c=t.pingCache;if(c===null){c=t.pingCache=new Sv;var x=new Set;c.set(s,x)}else x=c.get(s),x===void 0&&(x=new Set,c.set(s,x));x.has(a)||(pd=!0,x.add(a),t=kv.bind(null,t,s,a),s.then(t,t))}function kv(t,s,a){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Qe===t&&(Le&a)===a&&(lt===4||lt===3&&(Le&62914560)===Le&&300>Wt()-xa?(qe&2)===0&&Bs(t,0):md|=a,Vs===Le&&(Vs=0)),Oi(t)}function ph(t,s){s===0&&(s=af()),t=Yn(t,s),t!==null&&(gl(t,s),Oi(t))}function _v(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),ph(t,a)}function Ev(t,s){var a=0;switch(t.tag){case 31:case 13:var c=t.stateNode,x=t.memoizedState;x!==null&&(a=x.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),ph(t,a)}function jv(t,s){return Gn(t,s)}var Ta=null,Fs=null,Nd=!1,Ca=!1,Td=!1,An=0;function Oi(t){t!==Fs&&t.next===null&&(Fs===null?Ta=Fs=t:Fs=Fs.next=t),Ca=!0,Nd||(Nd=!0,Mv())}function Ql(t,s){if(!Td&&Ca){Td=!0;do for(var a=!1,c=Ta;c!==null;){if(t!==0){var x=c.pendingLanes;if(x===0)var b=0;else{var T=c.suspendedLanes,A=c.pingedLanes;b=(1<<31-ei(42|t)+1)-1,b&=x&~(T&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(a=!0,gh(c,b))}else b=Le,b=Eo(c,c===Qe?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(b&3)===0||xl(c,b)||(a=!0,gh(c,b));c=c.next}while(a);Td=!1}}function Av(){mh()}function mh(){Ca=Nd=!1;var t=0;An!==0&&Gv()&&(t=An);for(var s=Wt(),a=null,c=Ta;c!==null;){var x=c.next,b=hh(c,s);b===0?(c.next=null,a===null?Ta=x:a.next=x,x===null&&(Fs=a)):(a=c,(t!==0||(b&3)!==0)&&(Ca=!0)),c=x}bt!==0&&bt!==5||Ql(t),An!==0&&(An=0)}function hh(t,s){for(var a=t.suspendedLanes,c=t.pingedLanes,x=t.expirationTimes,b=t.pendingLanes&-62914561;0<b;){var T=31-ei(b),A=1<<T,O=x[T];O===-1?((A&a)===0||(A&c)!==0)&&(x[T]=ny(A,s)):O<=s&&(t.expiredLanes|=A),b&=~A}if(s=Qe,a=Le,a=Eo(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,a===0||t===s&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Lr(c),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||xl(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(c!==null&&Lr(c),Ur(a)){case 2:case 8:a=lf;break;case 32:a=Co;break;case 268435456:a=of;break;default:a=Co}return c=xh.bind(null,t),a=Gn(a,c),t.callbackPriority=s,t.callbackNode=a,s}return c!==null&&c!==null&&Lr(c),t.callbackPriority=2,t.callbackNode=null,2}function xh(t,s){if(bt!==0&&bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Na()&&t.callbackNode!==a)return null;var c=Le;return c=Eo(t,t===Qe?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Qm(t,c,s),hh(t,Wt()),t.callbackNode!=null&&t.callbackNode===a?xh.bind(null,t):null)}function gh(t,s){if(Na())return null;Qm(t,s,!0)}function Mv(){qv(function(){(qe&6)!==0?Gn(sf,Av):mh()})}function Cd(){if(An===0){var t=Ms;t===0&&(t=wo,wo<<=1,(wo&261888)===0&&(wo=256)),An=t}return An}function bh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ro(""+t)}function yh(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Rv(t,s,a,c,x){if(s==="submit"&&a&&a.stateNode===x){var b=bh((x[Ot]||null).action),T=c.submitter;T&&(s=(s=T[Ot]||null)?bh(s.formAction):T.getAttribute("formAction"),s!==null&&(b=s,T=null));var A=new zo("action","action",null,c,x);t.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(An!==0){var O=T?yh(x,T):new FormData(x);Bc(a,{pending:!0,data:O,method:x.method,action:b},null,O)}}else typeof b=="function"&&(A.preventDefault(),O=T?yh(x,T):new FormData(x),Bc(a,{pending:!0,data:O,method:x.method,action:b},b,O))},currentTarget:x}]})}}for(var wd=0;wd<ac.length;wd++){var kd=ac[wd],Dv=kd.toLowerCase(),Iv=kd[0].toUpperCase()+kd.slice(1);ki(Dv,"on"+Iv)}ki(Kf,"onAnimationEnd"),ki(Qf,"onAnimationIteration"),ki(Wf,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Ky,"onTransitionRun"),ki(Qy,"onTransitionStart"),ki(Wy,"onTransitionCancel"),ki(Zf,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function vh(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],x=c.event;c=c.listeners;e:{var b=void 0;if(s)for(var T=c.length-1;0<=T;T--){var A=c[T],O=A.instance,ee=A.currentTarget;if(A=A.listener,O!==b&&x.isPropagationStopped())break e;b=A,x.currentTarget=ee;try{b(x)}catch(re){Oo(re)}x.currentTarget=null,b=O}else for(T=0;T<c.length;T++){if(A=c[T],O=A.instance,ee=A.currentTarget,A=A.listener,O!==b&&x.isPropagationStopped())break e;b=A,x.currentTarget=ee;try{b(x)}catch(re){Oo(re)}x.currentTarget=null,b=O}}}}function De(t,s){var a=s[Or];a===void 0&&(a=s[Or]=new Set);var c=t+"__bubble";a.has(c)||(Sh(s,t,2,!1),a.add(c))}function _d(t,s,a){var c=0;s&&(c|=4),Sh(a,t,c,s)}var wa="_reactListening"+Math.random().toString(36).slice(2);function Ed(t){if(!t[wa]){t[wa]=!0,mf.forEach(function(a){a!=="selectionchange"&&(Lv.has(a)||_d(a,!1,t),_d(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[wa]||(s[wa]=!0,_d("selectionchange",!1,s))}}function Sh(t,s,a,c){switch(Kh(s)){case 2:var x=c1;break;case 8:x=d1;break;default:x=qd}a=x.bind(null,s,a,t),x=void 0,!Jr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),c?x!==void 0?t.addEventListener(s,a,{capture:!0,passive:x}):t.addEventListener(s,a,!0):x!==void 0?t.addEventListener(s,a,{passive:x}):t.addEventListener(s,a,!1)}function jd(t,s,a,c,x){var b=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var A=c.stateNode.containerInfo;if(A===x)break;if(T===4)for(T=c.return;T!==null;){var O=T.tag;if((O===3||O===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;A!==null;){if(T=ms(A),T===null)return;if(O=T.tag,O===5||O===6||O===26||O===27){c=b=T;continue e}A=A.parentNode}}c=c.return}kf(function(){var ee=b,re=Fr(a),ue=[];e:{var ne=ep.get(t);if(ne!==void 0){var le=zo,ve=t;switch(t){case"keypress":if(Io(a)===0)break e;case"keydown":case"keyup":le=Ey;break;case"focusin":ve="focus",le=Wr;break;case"focusout":ve="blur",le=Wr;break;case"beforeblur":case"afterblur":le=Wr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=My;break;case Kf:case Qf:case Wf:le=yy;break;case Zf:le=Dy;break;case"scroll":case"scrollend":le=my;break;case"wheel":le=Ly;break;case"copy":case"cut":case"paste":le=Sy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Mf;break;case"toggle":case"beforetoggle":le=Py}var we=(s&4)!==0,Ke=!we&&(t==="scroll"||t==="scrollend"),K=we?ne!==null?ne+"Capture":null:ne;we=[];for(var Y=ee,Z;Y!==null;){var ce=Y;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||K===null||(ce=vl(Y,K),ce!=null&&we.push(Zl(Y,ce,Z))),Ke)break;Y=Y.return}0<we.length&&(ne=new le(ne,ve,null,a,re),ue.push({event:ne,listeners:we}))}}if((s&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",ne&&a!==$r&&(ve=a.relatedTarget||a.fromElement)&&(ms(ve)||ve[ps]))break e;if((le||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(ve=a.relatedTarget||a.toElement,le=ee,ve=ve?ms(ve):null,ve!==null&&(Ke=d(ve),we=ve.tag,ve!==Ke||we!==5&&we!==27&&we!==6)&&(ve=null)):(le=null,ve=ee),le!==ve)){if(we=jf,ce="onMouseLeave",K="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(we=Mf,ce="onPointerLeave",K="onPointerEnter",Y="pointer"),Ke=le==null?ne:yl(le),Z=ve==null?ne:yl(ve),ne=new we(ce,Y+"leave",le,a,re),ne.target=Ke,ne.relatedTarget=Z,ce=null,ms(re)===ee&&(we=new we(K,Y+"enter",ve,a,re),we.target=Z,we.relatedTarget=Ke,ce=we),Ke=ce,le&&ve)t:{for(we=zv,K=le,Y=ve,Z=0,ce=K;ce;ce=we(ce))Z++;ce=0;for(var Ce=Y;Ce;Ce=we(Ce))ce++;for(;0<Z-ce;)K=we(K),Z--;for(;0<ce-Z;)Y=we(Y),ce--;for(;Z--;){if(K===Y||Y!==null&&K===Y.alternate){we=K;break t}K=we(K),Y=we(Y)}we=null}else we=null;le!==null&&Nh(ue,ne,le,we,!1),ve!==null&&Ke!==null&&Nh(ue,Ke,ve,we,!0)}}e:{if(ne=ee?yl(ee):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var He=Of;else if(Pf(ne))if(Hf)He=Yy;else{He=$y;var Ne=By}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Br(ee.elementType)&&(He=Of):He=Fy;if(He&&(He=He(t,ee))){Uf(ue,He,a,re);break e}Ne&&Ne(t,ne,ee),t==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&qr(ne,"number",ne.value)}switch(Ne=ee?yl(ee):window,t){case"focusin":(Pf(Ne)||Ne.contentEditable==="true")&&(Ts=Ne,sc=ee,El=null);break;case"focusout":El=sc=Ts=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Jf(ue,a,re);break;case"selectionchange":if(Xy)break;case"keydown":case"keyup":Jf(ue,a,re)}var Me;if(ec)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ns?Lf(t,a)&&(ze="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Rf&&a.locale!=="ko"&&(Ns||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ns&&(Me=_f()):(mn=re,Xr="value"in mn?mn.value:mn.textContent,Ns=!0)),Ne=ka(ee,ze),0<Ne.length&&(ze=new Af(ze,t,null,a,re),ue.push({event:ze,listeners:Ne}),Me?ze.data=Me:(Me=zf(a),Me!==null&&(ze.data=Me)))),(Me=Oy?Hy(t,a):Gy(t,a))&&(ze=ka(ee,"onBeforeInput"),0<ze.length&&(Ne=new Af("onBeforeInput","beforeinput",null,a,re),ue.push({event:Ne,listeners:ze}),Ne.data=Me)),Rv(ue,t,ee,a,re)}vh(ue,s)})}function Zl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ka(t,s){for(var a=s+"Capture",c=[];t!==null;){var x=t,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=vl(t,a),x!=null&&c.unshift(Zl(t,x,b)),x=vl(t,s),x!=null&&c.push(Zl(t,x,b))),t.tag===3)return c;t=t.return}return[]}function zv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Nh(t,s,a,c,x){for(var b=s._reactName,T=[];a!==null&&a!==c;){var A=a,O=A.alternate,ee=A.stateNode;if(A=A.tag,O!==null&&O===c)break;A!==5&&A!==26&&A!==27||ee===null||(O=ee,x?(ee=vl(a,b),ee!=null&&T.unshift(Zl(a,ee,O))):x||(ee=vl(a,b),ee!=null&&T.push(Zl(a,ee,O)))),a=a.return}T.length!==0&&t.push({event:s,listeners:T})}var Pv=/\r\n?/g,Uv=/\u0000|\uFFFD/g;function Th(t){return(typeof t=="string"?t:""+t).replace(Pv,`
`).replace(Uv,"")}function Ch(t,s){return s=Th(s),Th(t)===s}function Xe(t,s,a,c,x,b){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ys(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ys(t,""+c);break;case"className":Ao(t,"class",c);break;case"tabIndex":Ao(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ao(t,a,c);break;case"style":Cf(t,c,b);break;case"data":if(s!=="object"){Ao(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=Ro(""+c),t.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(a==="formAction"?(s!=="input"&&Xe(t,s,"name",x.name,x,null),Xe(t,s,"formEncType",x.formEncType,x,null),Xe(t,s,"formMethod",x.formMethod,x,null),Xe(t,s,"formTarget",x.formTarget,x,null)):(Xe(t,s,"encType",x.encType,x,null),Xe(t,s,"method",x.method,x,null),Xe(t,s,"target",x.target,x,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=Ro(""+c),t.setAttribute(a,c);break;case"onClick":c!=null&&(t.onclick=qi);break;case"onScroll":c!=null&&De("scroll",t);break;case"onScrollEnd":c!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(x.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}a=Ro(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""+c):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":c===!0?t.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,c):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(a,c):t.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(a):t.setAttribute(a,c);break;case"popover":De("beforetoggle",t),De("toggle",t),jo(t,"popover",c);break;case"xlinkActuate":Vi(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Vi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Vi(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Vi(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Vi(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Vi(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Vi(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Vi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Vi(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":jo(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fy.get(a)||a,jo(t,a,c))}}function Ad(t,s,a,c,x,b){switch(a){case"style":Cf(t,c,b);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(x.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"children":typeof c=="string"?ys(t,c):(typeof c=="number"||typeof c=="bigint")&&ys(t,""+c);break;case"onScroll":c!=null&&De("scroll",t);break;case"onScrollEnd":c!=null&&De("scrollend",t);break;case"onClick":c!=null&&(t.onclick=qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hf.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(x=a.endsWith("Capture"),s=a.slice(2,x?a.length-7:void 0),b=t[Ot]||null,b=b!=null?b[a]:null,typeof b=="function"&&t.removeEventListener(s,b,x),typeof c=="function")){typeof b!="function"&&b!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,c,x);break e}a in t?t[a]=c:c===!0?t.setAttribute(a,""):jo(t,a,c)}}}function Mt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var c=!1,x=!1,b;for(b in a)if(a.hasOwnProperty(b)){var T=a[b];if(T!=null)switch(b){case"src":c=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Xe(t,s,b,T,a,null)}}x&&Xe(t,s,"srcSet",a.srcSet,a,null),c&&Xe(t,s,"src",a.src,a,null);return;case"input":De("invalid",t);var A=b=T=x=null,O=null,ee=null;for(c in a)if(a.hasOwnProperty(c)){var re=a[c];if(re!=null)switch(c){case"name":x=re;break;case"type":T=re;break;case"checked":O=re;break;case"defaultChecked":ee=re;break;case"value":b=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,s));break;default:Xe(t,s,c,re,a,null)}}vf(t,b,A,O,ee,T,x,!1);return;case"select":De("invalid",t),c=T=b=null;for(x in a)if(a.hasOwnProperty(x)&&(A=a[x],A!=null))switch(x){case"value":b=A;break;case"defaultValue":T=A;break;case"multiple":c=A;default:Xe(t,s,x,A,a,null)}s=b,a=T,t.multiple=!!c,s!=null?bs(t,!!c,s,!1):a!=null&&bs(t,!!c,a,!0);return;case"textarea":De("invalid",t),b=x=c=null;for(T in a)if(a.hasOwnProperty(T)&&(A=a[T],A!=null))switch(T){case"value":c=A;break;case"defaultValue":x=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:Xe(t,s,T,A,a,null)}Nf(t,c,x,b);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(c=a[O],c!=null))switch(O){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Xe(t,s,O,c,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(c=0;c<Wl.length;c++)De(Wl[c],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in a)if(a.hasOwnProperty(ee)&&(c=a[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Xe(t,s,ee,c,a,null)}return;default:if(Br(s)){for(re in a)a.hasOwnProperty(re)&&(c=a[re],c!==void 0&&Ad(t,s,re,c,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(c=a[A],c!=null&&Xe(t,s,A,c,a,null))}function Ov(t,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,T=null,A=null,O=null,ee=null,re=null;for(le in a){var ue=a[le];if(a.hasOwnProperty(le)&&ue!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":O=ue;default:c.hasOwnProperty(le)||Xe(t,s,le,null,c,ue)}}for(var ne in c){var le=c[ne];if(ue=a[ne],c.hasOwnProperty(ne)&&(le!=null||ue!=null))switch(ne){case"type":b=le;break;case"name":x=le;break;case"checked":ee=le;break;case"defaultChecked":re=le;break;case"value":T=le;break;case"defaultValue":A=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,s));break;default:le!==ue&&Xe(t,s,ne,le,c,ue)}}Vr(t,T,A,O,ee,re,b,x);return;case"select":le=T=A=ne=null;for(b in a)if(O=a[b],a.hasOwnProperty(b)&&O!=null)switch(b){case"value":break;case"multiple":le=O;default:c.hasOwnProperty(b)||Xe(t,s,b,null,c,O)}for(x in c)if(b=c[x],O=a[x],c.hasOwnProperty(x)&&(b!=null||O!=null))switch(x){case"value":ne=b;break;case"defaultValue":A=b;break;case"multiple":T=b;default:b!==O&&Xe(t,s,x,b,c,O)}s=A,a=T,c=le,ne!=null?bs(t,!!a,ne,!1):!!c!=!!a&&(s!=null?bs(t,!!a,s,!0):bs(t,!!a,a?[]:"",!1));return;case"textarea":le=ne=null;for(A in a)if(x=a[A],a.hasOwnProperty(A)&&x!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Xe(t,s,A,null,c,x)}for(T in c)if(x=c[T],b=a[T],c.hasOwnProperty(T)&&(x!=null||b!=null))switch(T){case"value":ne=x;break;case"defaultValue":le=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(o(91));break;default:x!==b&&Xe(t,s,T,x,c,b)}Sf(t,ne,le);return;case"option":for(var ve in a)if(ne=a[ve],a.hasOwnProperty(ve)&&ne!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":t.selected=!1;break;default:Xe(t,s,ve,null,c,ne)}for(O in c)if(ne=c[O],le=a[O],c.hasOwnProperty(O)&&ne!==le&&(ne!=null||le!=null))switch(O){case"selected":t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Xe(t,s,O,ne,c,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)ne=a[we],a.hasOwnProperty(we)&&ne!=null&&!c.hasOwnProperty(we)&&Xe(t,s,we,null,c,ne);for(ee in c)if(ne=c[ee],le=a[ee],c.hasOwnProperty(ee)&&ne!==le&&(ne!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,s));break;default:Xe(t,s,ee,ne,c,le)}return;default:if(Br(s)){for(var Ke in a)ne=a[Ke],a.hasOwnProperty(Ke)&&ne!==void 0&&!c.hasOwnProperty(Ke)&&Ad(t,s,Ke,void 0,c,ne);for(re in c)ne=c[re],le=a[re],!c.hasOwnProperty(re)||ne===le||ne===void 0&&le===void 0||Ad(t,s,re,ne,c,le);return}}for(var K in a)ne=a[K],a.hasOwnProperty(K)&&ne!=null&&!c.hasOwnProperty(K)&&Xe(t,s,K,null,c,ne);for(ue in c)ne=c[ue],le=a[ue],!c.hasOwnProperty(ue)||ne===le||ne==null&&le==null||Xe(t,s,ue,ne,c,le)}function wh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hv(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var x=a[c],b=x.transferSize,T=x.initiatorType,A=x.duration;if(b&&A&&wh(T)){for(T=0,A=x.responseEnd,c+=1;c<a.length;c++){var O=a[c],ee=O.startTime;if(ee>A)break;var re=O.transferSize,ue=O.initiatorType;re&&wh(ue)&&(O=O.responseEnd,T+=re*(O<A?1:(A-ee)/(O-ee)))}if(--c,s+=8*(b+T)/(x.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Md=null,Rd=null;function _a(t){return t.nodeType===9?t:t.ownerDocument}function kh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _h(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Dd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Id=null;function Gv(){var t=window.event;return t&&t.type==="popstate"?t===Id?!1:(Id=t,!0):(Id=null,!1)}var Eh=typeof setTimeout=="function"?setTimeout:void 0,Vv=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,qv=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(t){return jh.resolve(null).then(t).catch(Bv)}:Eh;function Bv(t){setTimeout(function(){throw t})}function Mn(t){return t==="head"}function Ah(t,s){var a=s,c=0;do{var x=a.nextSibling;if(t.removeChild(a),x&&x.nodeType===8)if(a=x.data,a==="/$"||a==="/&"){if(c===0){t.removeChild(x),Ks(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")eo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,eo(a);for(var b=a.firstChild;b;){var T=b.nextSibling,A=b.nodeName;b[bl]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}else a==="body"&&eo(t.ownerDocument.body);a=x}while(a);Ks(s)}function Mh(t,s){var a=t;t=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=c}while(a)}function Ld(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ld(a),Hr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function $v(t,s,a,c){for(;t.nodeType===1;){var x=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[bl])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(b=t.getAttribute("rel"),b==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(b!==x.rel||t.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||t.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||t.getAttribute("title")!==(x.title==null?null:x.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(b=t.getAttribute("src"),(b!==(x.src==null?null:x.src)||t.getAttribute("type")!==(x.type==null?null:x.type)||t.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&t.getAttribute("name")===b)return t}else return t;if(t=Ni(t.nextSibling),t===null)break}return null}function Fv(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ni(t.nextSibling),t===null))return null;return t}function Rh(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ni(t.nextSibling),t===null))return null;return t}function zd(t){return t.data==="$?"||t.data==="$~"}function Pd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Yv(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Ni(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Ud=null;function Dh(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Ni(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Ih(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function Lh(t,s,a){switch(s=_a(a),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function eo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Hr(t)}var Ti=new Map,zh=new Set;function Ea(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var on=R.d;R.d={f:Jv,r:Xv,D:Kv,C:Qv,L:Wv,m:Zv,X:t1,S:e1,M:i1};function Jv(){var t=on.f(),s=ya();return t||s}function Xv(t){var s=hs(t);s!==null&&s.tag===5&&s.type==="form"?Zp(s):on.r(t)}var Ys=typeof document>"u"?null:document;function Ph(t,s,a){var c=Ys;if(c&&typeof s=="string"&&s){var x=hi(s);x='link[rel="'+t+'"][href="'+x+'"]',typeof a=="string"&&(x+='[crossorigin="'+a+'"]'),zh.has(x)||(zh.add(x),t={rel:t,crossOrigin:a,href:s},c.querySelector(x)===null&&(s=c.createElement("link"),Mt(s,"link",t),St(s),c.head.appendChild(s)))}}function Kv(t){on.D(t),Ph("dns-prefetch",t,null)}function Qv(t,s){on.C(t,s),Ph("preconnect",t,s)}function Wv(t,s,a){on.L(t,s,a);var c=Ys;if(c&&t&&s){var x='link[rel="preload"][as="'+hi(s)+'"]';s==="image"&&a&&a.imageSrcSet?(x+='[imagesrcset="'+hi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(x+='[imagesizes="'+hi(a.imageSizes)+'"]')):x+='[href="'+hi(t)+'"]';var b=x;switch(s){case"style":b=Js(t);break;case"script":b=Xs(t)}Ti.has(b)||(t=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Ti.set(b,t),c.querySelector(x)!==null||s==="style"&&c.querySelector(to(b))||s==="script"&&c.querySelector(io(b))||(s=c.createElement("link"),Mt(s,"link",t),St(s),c.head.appendChild(s)))}}function Zv(t,s){on.m(t,s);var a=Ys;if(a&&t){var c=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+hi(c)+'"][href="'+hi(t)+'"]',b=x;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Xs(t)}if(!Ti.has(b)&&(t=v({rel:"modulepreload",href:t},s),Ti.set(b,t),a.querySelector(x)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(io(b)))return}c=a.createElement("link"),Mt(c,"link",t),St(c),a.head.appendChild(c)}}}function e1(t,s,a){on.S(t,s,a);var c=Ys;if(c&&t){var x=xs(c).hoistableStyles,b=Js(t);s=s||"default";var T=x.get(b);if(!T){var A={loading:0,preload:null};if(T=c.querySelector(to(b)))A.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Ti.get(b))&&Od(t,a);var O=T=c.createElement("link");St(O),Mt(O,"link",t),O._p=new Promise(function(ee,re){O.onload=ee,O.onerror=re}),O.addEventListener("load",function(){A.loading|=1}),O.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ja(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:A},x.set(b,T)}}}function t1(t,s){on.X(t,s);var a=Ys;if(a&&t){var c=xs(a).hoistableScripts,x=Xs(t),b=c.get(x);b||(b=a.querySelector(io(x)),b||(t=v({src:t,async:!0},s),(s=Ti.get(x))&&Hd(t,s),b=a.createElement("script"),St(b),Mt(b,"link",t),a.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(x,b))}}function i1(t,s){on.M(t,s);var a=Ys;if(a&&t){var c=xs(a).hoistableScripts,x=Xs(t),b=c.get(x);b||(b=a.querySelector(io(x)),b||(t=v({src:t,async:!0,type:"module"},s),(s=Ti.get(x))&&Hd(t,s),b=a.createElement("script"),St(b),Mt(b,"link",t),a.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(x,b))}}function Uh(t,s,a,c){var x=(x=he.current)?Ea(x):null;if(!x)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Js(a.href),a=xs(x).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Js(a.href);var b=xs(x).hoistableStyles,T=b.get(t);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(t,T),(b=x.querySelector(to(t)))&&!b._p&&(T.instance=b,T.state.loading=5),Ti.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ti.set(t,a),b||n1(x,t,a,T.state))),s&&c===null)throw Error(o(528,""));return T}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xs(a),a=xs(x).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Js(t){return'href="'+hi(t)+'"'}function to(t){return'link[rel="stylesheet"]['+t+"]"}function Oh(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function n1(t,s,a,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Mt(s,"link",a),St(s),t.head.appendChild(s))}function Xs(t){return'[src="'+hi(t)+'"]'}function io(t){return"script[async]"+t}function Hh(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+hi(a.href)+'"]');if(c)return s.instance=c,St(c),c;var x=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),St(c),Mt(c,"style",x),ja(c,a.precedence,t),s.instance=c;case"stylesheet":x=Js(a.href);var b=t.querySelector(to(x));if(b)return s.state.loading|=4,s.instance=b,St(b),b;c=Oh(a),(x=Ti.get(x))&&Od(c,x),b=(t.ownerDocument||t).createElement("link"),St(b);var T=b;return T._p=new Promise(function(A,O){T.onload=A,T.onerror=O}),Mt(b,"link",c),s.state.loading|=4,ja(b,a.precedence,t),s.instance=b;case"script":return b=Xs(a.src),(x=t.querySelector(io(b)))?(s.instance=x,St(x),x):(c=a,(x=Ti.get(b))&&(c=v({},a),Hd(c,x)),t=t.ownerDocument||t,x=t.createElement("script"),St(x),Mt(x,"link",c),t.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,ja(c,a.precedence,t));return s.instance}function ja(t,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=c.length?c[c.length-1]:null,b=x,T=0;T<c.length;T++){var A=c[T];if(A.dataset.precedence===s)b=A;else if(b!==x)break}b?b.parentNode.insertBefore(t,b.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Od(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Hd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Aa=null;function Gh(t,s,a){if(Aa===null){var c=new Map,x=Aa=new Map;x.set(a,c)}else x=Aa,c=x.get(a),c||(c=new Map,x.set(a,c));if(c.has(t))return c;for(c.set(t,null),a=a.getElementsByTagName(t),x=0;x<a.length;x++){var b=a[x];if(!(b[bl]||b[_t]||t==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(s)||"";T=t+T;var A=c.get(T);A?A.push(b):c.set(T,[b])}}return c}function Vh(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function s1(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function qh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function l1(t,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var x=Js(c.href),b=s.querySelector(to(x));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Ma.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=b,St(b);return}b=s.ownerDocument||s,c=Oh(c),(x=Ti.get(x))&&Od(c,x),b=b.createElement("link"),St(b);var T=b;T._p=new Promise(function(A,O){T.onload=A,T.onerror=O}),Mt(b,"link",c),a.instance=b}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ma.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Gd=0;function o1(t,s){return t.stylesheets&&t.count===0&&Da(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var c=setTimeout(function(){if(t.stylesheets&&Da(t,t.stylesheets),t.unsuspend){var b=t.unsuspend;t.unsuspend=null,b()}},6e4+s);0<t.imgBytes&&Gd===0&&(Gd=62500*Hv());var x=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Da(t,t.stylesheets),t.unsuspend)){var b=t.unsuspend;t.unsuspend=null,b()}},(t.imgBytes>Gd?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(x)}}:null}function Ma(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Da(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ra=null;function Da(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ra=new Map,s.forEach(a1,t),Ra=null,Ma.call(t))}function a1(t,s){if(!(s.state.loading&4)){var a=Ra.get(t);if(a)var c=a.get(null);else{a=new Map,Ra.set(t,a);for(var x=t.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var T=x[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}x=s.instance,T=x.getAttribute("data-precedence"),b=a.get(T)||c,b===c&&a.set(null,x),a.set(T,x),this.count++,c=Ma.bind(this),x.addEventListener("load",c),x.addEventListener("error",c),b?b.parentNode.insertBefore(x,b.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(x,t.firstChild)),s.state.loading|=4}}var no={$$typeof:_,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function r1(t,s,a,c,x,b,T,A,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.hiddenUpdates=zr(null),this.identifierPrefix=c,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Bh(t,s,a,c,x,b,T,A,O,ee,re,ue){return t=new r1(t,s,a,T,O,ee,re,ue,A),s=1,b===!0&&(s|=24),b=ii(3,null,null,s),t.current=b,b.stateNode=t,s=vc(),s.refCount++,t.pooledCache=s,s.refCount++,b.memoizedState={element:c,isDehydrated:a,cache:s},Cc(b),t}function $h(t){return t?(t=ks,t):ks}function Fh(t,s,a,c,x,b){x=$h(x),c.context===null?c.context=x:c.pendingContext=x,c=vn(s),c.payload={element:a},b=b===void 0?null:b,b!==null&&(c.callback=b),a=Sn(t,c,s),a!==null&&($t(a,t,s),Ll(a,t,s))}function Yh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Vd(t,s){Yh(t,s),(t=t.alternate)&&Yh(t,s)}function Jh(t){if(t.tag===13||t.tag===31){var s=Yn(t,67108864);s!==null&&$t(s,t,67108864),Vd(t,67108864)}}function Xh(t){if(t.tag===13||t.tag===31){var s=ai();s=Pr(s);var a=Yn(t,s);a!==null&&$t(a,t,s),Vd(t,s)}}var Ia=!0;function c1(t,s,a,c){var x=k.T;k.T=null;var b=R.p;try{R.p=2,qd(t,s,a,c)}finally{R.p=b,k.T=x}}function d1(t,s,a,c){var x=k.T;k.T=null;var b=R.p;try{R.p=8,qd(t,s,a,c)}finally{R.p=b,k.T=x}}function qd(t,s,a,c){if(Ia){var x=Bd(c);if(x===null)jd(t,s,c,La,a),Qh(t,c);else if(f1(x,t,s,a,c))c.stopPropagation();else if(Qh(t,c),s&4&&-1<u1.indexOf(t)){for(;x!==null;){var b=hs(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Vn(b.pendingLanes);if(T!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var O=1<<31-ei(T);A.entanglements[1]|=O,T&=~O}Oi(b),(qe&6)===0&&(ga=Wt()+500,Ql(0))}}break;case 31:case 13:A=Yn(b,2),A!==null&&$t(A,b,2),ya(),Vd(b,2)}if(b=Bd(c),b===null&&jd(t,s,c,La,a),b===x)break;x=b}x!==null&&c.stopPropagation()}else jd(t,s,c,null,a)}}function Bd(t){return t=Fr(t),$d(t)}var La=null;function $d(t){if(La=null,t=ms(t),t!==null){var s=d(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===31){if(t=h(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return La=t,null}function Kh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kb()){case sf:return 2;case lf:return 8;case Co:case Qb:return 32;case of:return 268435456;default:return 32}default:return 32}}var Fd=!1,Rn=null,Dn=null,In=null,so=new Map,lo=new Map,Ln=[],u1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qh(t,s){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":so.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(s.pointerId)}}function oo(t,s,a,c,x,b){return t===null||t.nativeEvent!==b?(t={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:b,targetContainers:[x]},s!==null&&(s=hs(s),s!==null&&Jh(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),t)}function f1(t,s,a,c,x){switch(s){case"focusin":return Rn=oo(Rn,t,s,a,c,x),!0;case"dragenter":return Dn=oo(Dn,t,s,a,c,x),!0;case"mouseover":return In=oo(In,t,s,a,c,x),!0;case"pointerover":var b=x.pointerId;return so.set(b,oo(so.get(b)||null,t,s,a,c,x)),!0;case"gotpointercapture":return b=x.pointerId,lo.set(b,oo(lo.get(b)||null,t,s,a,c,x)),!0}return!1}function Wh(t){var s=ms(t.target);if(s!==null){var a=d(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,ff(t.priority,function(){Xh(a)});return}}else if(s===31){if(s=h(a),s!==null){t.blockedOn=s,ff(t.priority,function(){Xh(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function za(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Bd(t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);$r=c,a.target.dispatchEvent(c),$r=null}else return s=hs(a),s!==null&&Jh(s),t.blockedOn=a,!1;s.shift()}return!0}function Zh(t,s,a){za(t)&&a.delete(s)}function p1(){Fd=!1,Rn!==null&&za(Rn)&&(Rn=null),Dn!==null&&za(Dn)&&(Dn=null),In!==null&&za(In)&&(In=null),so.forEach(Zh),lo.forEach(Zh)}function Pa(t,s){t.blockedOn===s&&(t.blockedOn=null,Fd||(Fd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,p1)))}var Ua=null;function ex(t){Ua!==t&&(Ua=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ua===t&&(Ua=null);for(var s=0;s<t.length;s+=3){var a=t[s],c=t[s+1],x=t[s+2];if(typeof c!="function"){if($d(c||a)===null)continue;break}var b=hs(a);b!==null&&(t.splice(s,3),s-=3,Bc(b,{pending:!0,data:x,method:a.method,action:c},c,x))}}))}function Ks(t){function s(O){return Pa(O,t)}Rn!==null&&Pa(Rn,t),Dn!==null&&Pa(Dn,t),In!==null&&Pa(In,t),so.forEach(s),lo.forEach(s);for(var a=0;a<Ln.length;a++){var c=Ln[a];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ln.length&&(a=Ln[0],a.blockedOn===null);)Wh(a),a.blockedOn===null&&Ln.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var x=a[c],b=a[c+1],T=x[Ot]||null;if(typeof b=="function")T||ex(a);else if(T){var A=null;if(b&&b.hasAttribute("formAction")){if(x=b,T=b[Ot]||null)A=T.formAction;else if($d(x)!==null)continue}else A=T.action;typeof A=="function"?a[c+1]=A:(a.splice(c,3),c-=3),ex(a)}}}function tx(){function t(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function s(){x!==null&&(x(),x=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,x=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),x!==null&&(x(),x=null)}}}function Yd(t){this._internalRoot=t}Oa.prototype.render=Yd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=ai();Fh(a,c,t,s,null,null)},Oa.prototype.unmount=Yd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Fh(t.current,2,null,t,null,null),ya(),s[ps]=null}};function Oa(t){this._internalRoot=t}Oa.prototype.unstable_scheduleHydration=function(t){if(t){var s=uf();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Ln.length&&s!==0&&s<Ln[a].priority;a++);Ln.splice(a,0,t),a===0&&Wh(t)}};var ix=e.version;if(ix!=="19.2.4")throw Error(o(527,ix,"19.2.4"));R.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=m(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var m1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{hl=Ha.inject(m1),Zt=Ha}catch{}}return ro.createRoot=function(t,s){if(!r(t))throw Error(o(299));var a=!1,c="",x=cm,b=dm,T=um;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Bh(t,1,!1,null,null,a,c,null,x,b,T,tx),t[ps]=s.current,Ed(t),new Yd(s)},ro.hydrateRoot=function(t,s,a){if(!r(t))throw Error(o(299));var c=!1,x="",b=cm,T=dm,A=um,O=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onUncaughtError!==void 0&&(b=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=Bh(t,1,!0,s,a??null,c,x,O,b,T,A,tx),s.context=$h(null),a=s.current,c=ai(),c=Pr(c),x=vn(c),x.callback=null,Sn(a,x,c),a=c,s.current.lanes=a,gl(s,a),Oi(s),t[ps]=s.current,Ed(t),new Oa(s)},ro.version="19.2.4",ro}var fx;function w1(){if(fx)return Kd.exports;fx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Kd.exports=C1(),Kd.exports}var k1=w1();/*! Capacitor: https://capacitorjs.com/ - MIT License */var ll;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(ll||(ll={}));class eu extends Error{constructor(e,l,o){super(e),this.message=e,this.code=l,this.data=o}}const _1=i=>{var e,l;return i!=null&&i.androidBridge?"android":!((l=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||l===void 0)&&l.bridge?"ios":"web"},E1=i=>{const e=i.CapacitorCustomPlatform||null,l=i.Capacitor||{},o=l.Plugins=l.Plugins||{},r=()=>e!==null?e.name:_1(i),d=()=>r()!=="web",u=v=>{const S=m.get(v);return!!(S!=null&&S.platforms.has(r())||h(v))},h=v=>{var S;return(S=l.PluginHeaders)===null||S===void 0?void 0:S.find(N=>N.name===v)},g=v=>i.console.error(v),m=new Map,y=(v,S={})=>{const N=m.get(v);if(N)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),N.proxy;const C=r(),E=h(v);let w;const I=async()=>(!w&&C in S?w=typeof S[C]=="function"?w=await S[C]():w=S[C]:e!==null&&!w&&"web"in S&&(w=typeof S.web=="function"?w=await S.web():w=S.web),w),H=(B,q)=>{var G,Q;if(E){const F=E==null?void 0:E.methods.find(ae=>q===ae.name);if(F)return F.rtype==="promise"?ae=>l.nativePromise(v,q.toString(),ae):(ae,X)=>l.nativeCallback(v,q.toString(),ae,X);if(B)return(G=B[q])===null||G===void 0?void 0:G.bind(B)}else{if(B)return(Q=B[q])===null||Q===void 0?void 0:Q.bind(B);throw new eu(`"${v}" plugin is not implemented on ${C}`,ll.Unimplemented)}},_=B=>{let q;const G=(...Q)=>{const F=I().then(ae=>{const X=H(ae,B);if(X){const L=X(...Q);return q=L==null?void 0:L.remove,L}else throw new eu(`"${v}.${B}()" is not implemented on ${C}`,ll.Unimplemented)});return B==="addListener"&&(F.remove=async()=>q()),F};return G.toString=()=>`${B.toString()}() { [capacitor code] }`,Object.defineProperty(G,"name",{value:B,writable:!1,configurable:!1}),G},P=_("addListener"),M=_("removeListener"),j=(B,q)=>{const G=P({eventName:B},q),Q=async()=>{const ae=await G;M({eventName:B,callbackId:ae},q)},F=new Promise(ae=>G.then(()=>ae({remove:Q})));return F.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Q()},F},z=new Proxy({},{get(B,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return E?j:P;case"removeListener":return M;default:return _(q)}}});return o[v]=z,m.set(v,{name:v,proxy:z,platforms:new Set([...Object.keys(S),...E?[C]:[]])}),z};return l.convertFileSrc||(l.convertFileSrc=v=>v),l.getPlatform=r,l.handleError=g,l.isNativePlatform=d,l.isPluginAvailable=u,l.registerPlugin=y,l.Exception=eu,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l},j1=i=>i.Capacitor=E1(i),Hi=j1(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),cl=Hi.registerPlugin;class Du{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,l){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(l);const d=this.windowListeners[e];d&&!d.registered&&this.addWindowListener(d),o&&this.sendRetainedArgumentsForEvent(e);const u=async()=>this.removeListener(e,l);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,l,o){const r=this.listeners[e];if(!r){if(o){let d=this.retainedEventArguments[e];d||(d=[]),d.push(l),this.retainedEventArguments[e]=d}return}r.forEach(d=>d(l))}hasListeners(e){var l;return!!(!((l=this.listeners[e])===null||l===void 0)&&l.length)}registerWindowListener(e,l){this.windowListeners[l]={registered:!1,windowEventName:e,pluginEventName:l,handler:o=>{this.notifyListeners(l,o)}}}unimplemented(e="not implemented"){return new Hi.Exception(e,ll.Unimplemented)}unavailable(e="not available"){return new Hi.Exception(e,ll.Unavailable)}async removeListener(e,l){const o=this.listeners[e];if(!o)return;const r=o.indexOf(l);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const l=this.retainedEventArguments[e];l&&(delete this.retainedEventArguments[e],l.forEach(o=>{this.notifyListeners(e,o)}))}}const px=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),mx=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class A1 extends Du{async getCookies(){const e=document.cookie,l={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[r,d]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=mx(r).trim(),d=mx(d).trim(),l[r]=d}),l}async setCookie(e){try{const l=px(e.key),o=px(e.value),r=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",d=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${l}=${o||""}${r}; path=${d}; ${u};`}catch(l){return Promise.reject(l)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(l){return Promise.reject(l)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const l of e)document.cookie=l.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}cl("CapacitorCookies",{web:()=>new A1});const M1=async i=>new Promise((e,l)=>{const o=new FileReader;o.onload=()=>{const r=o.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},o.onerror=r=>l(r),o.readAsDataURL(i)}),R1=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(r=>r.toLocaleLowerCase()).reduce((r,d,u)=>(r[d]=i[e[u]],r),{})},D1=(i,e=!0)=>i?Object.entries(i).reduce((o,r)=>{const[d,u]=r;let h,g;return Array.isArray(u)?(g="",u.forEach(m=>{h=e?encodeURIComponent(m):m,g+=`${d}=${h}&`}),g.slice(0,-1)):(h=e?encodeURIComponent(u):u,g=`${d}=${h}`),`${o}&${g}`},"").substr(1):null,I1=(i,e={})=>{const l=Object.assign({method:i.method||"GET",headers:i.headers},e),r=R1(i.headers)["content-type"]||"";if(typeof i.data=="string")l.body=i.data;else if(r.includes("application/x-www-form-urlencoded")){const d=new URLSearchParams;for(const[u,h]of Object.entries(i.data||{}))d.set(u,h);l.body=d.toString()}else if(r.includes("multipart/form-data")||i.data instanceof FormData){const d=new FormData;if(i.data instanceof FormData)i.data.forEach((h,g)=>{d.append(g,h)});else for(const h of Object.keys(i.data))d.append(h,i.data[h]);l.body=d;const u=new Headers(l.headers);u.delete("content-type"),l.headers=u}else(r.includes("application/json")||typeof i.data=="object")&&(l.body=JSON.stringify(i.data));return l};class L1 extends Du{async request(e){const l=I1(e,e.webFetchExtra),o=D1(e.params,e.shouldEncodeUrlParams),r=o?`${e.url}?${o}`:e.url,d=await fetch(r,l),u=d.headers.get("content-type")||"";let{responseType:h="text"}=d.ok?e:{};u.includes("application/json")&&(h="json");let g,m;switch(h){case"arraybuffer":case"blob":m=await d.blob(),g=await M1(m);break;case"json":g=await d.json();break;case"document":case"text":default:g=await d.text()}const y={};return d.headers.forEach((v,S)=>{y[S]=v}),{data:g,headers:y,status:d.status,url:d.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}cl("CapacitorHttp",{web:()=>new L1});var hx;(function(i){i.Dark="DARK",i.Light="LIGHT",i.Default="DEFAULT"})(hx||(hx={}));var xx;(function(i){i.StatusBar="StatusBar",i.NavigationBar="NavigationBar"})(xx||(xx={}));class z1 extends Du{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}cl("SystemBars",{web:()=>new z1});const P1="modulepreload",U1=function(i){return"/leny-os1/"+i},gx={},Iu=function(e,l,o){let r=Promise.resolve();if(l&&l.length>0){let u=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=u(l.map(m=>{if(m=U1(m),m in gx)return;gx[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":P1,y||(S.as="script"),S.crossOrigin="",S.href=m,g&&S.setAttribute("nonce",g),document.head.appendChild(S),y)return new Promise((N,C)=>{S.addEventListener("load",N),S.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return r.then(u=>{for(const h of u||[])h.status==="rejected"&&d(h.reason);return e().catch(d)})};var el;(function(i){i.Heavy="HEAVY",i.Medium="MEDIUM",i.Light="LIGHT"})(el||(el={}));var xo;(function(i){i.Success="SUCCESS",i.Warning="WARNING",i.Error="ERROR"})(xo||(xo={}));const os=cl("Haptics",{web:()=>Iu(()=>import("./web-Czogh40N.js"),[]).then(i=>new i.HapticsWeb)});let tu=null;const O1=()=>(tu||(tu=new(window.AudioContext||window.webkitAudioContext)),tu),Ci={C4:261.63,G4:392,C5:523.25,E5:659.25,G5:783.99,A5:880,C6:1046.5},Qs={click:[5],success:[10,30,10],error:[50,20,50,20,50],levelUp:[50,50,50,50,100,50,200],crit:[10,10,10,50,50,100],delete:[30]},Tt=(i,e,l,o,r,d=.1)=>{const u=i.createOscillator(),h=i.createGain();u.type=l,u.frequency.setValueAtTime(e,o),h.gain.setValueAtTime(0,o),h.gain.linearRampToValueAtTime(d,o+.01),h.gain.exponentialRampToValueAtTime(.001,o+r),u.connect(h),h.connect(i.destination),u.start(o),u.stop(o+r+.1)},xe=async(i,e=!0)=>{if(e){if(Hi.isNativePlatform())try{switch(i){case"click":await os.impact({style:el.Light});break;case"hover":break;case"success":await os.notification({type:xo.Success});break;case"level-up":await os.notification({type:xo.Success});break;case"crit":await os.impact({style:el.Heavy});break;case"error":await os.notification({type:xo.Error});break;case"delete":await os.impact({style:el.Medium});break;default:await os.impact({style:el.Light})}}catch{}else if(navigator.vibrate)switch(i){case"click":navigator.vibrate(Qs.click);break;case"success":navigator.vibrate(Qs.success);break;case"level-up":navigator.vibrate(Qs.levelUp);break;case"crit":navigator.vibrate(Qs.crit);break;case"error":navigator.vibrate(Qs.error);break;case"delete":navigator.vibrate(Qs.delete);break}}if(!e)return;const l=O1();l.state==="suspended"&&l.resume();const o=l.currentTime;switch(i){case"success":Tt(l,Ci.C5,"sine",o,.2,.1),Tt(l,Ci.E5,"sine",o+.05,.2,.1),Tt(l,Ci.G5,"sine",o+.1,.4,.08);break;case"coin":Tt(l,1200,"square",o,.1,.05),Tt(l,1800,"square",o+.05,.2,.05);break;case"level-up":Tt(l,Ci.C4,"triangle",o,.2,.15),Tt(l,Ci.G4,"triangle",o+.15,.2,.15),Tt(l,Ci.C5,"triangle",o+.3,.4,.15),Tt(l,Ci.E5,"triangle",o+.45,.6,.15),Tt(l,Ci.C5,"sine",o,.8,.05);break;case"crit":Tt(l,Ci.G5,"sine",o,.3,.2),Tt(l,Ci.C6,"sine",o+.05,.4,.2),Tt(l,Ci.E5,"square",o,.1,.05),Tt(l,Ci.A5,"triangle",o+.1,.5,.1);break;case"delete":const r=l.createOscillator(),d=l.createGain();r.frequency.setValueAtTime(200,o),r.frequency.exponentialRampToValueAtTime(50,o+.3),d.gain.setValueAtTime(.1,o),d.gain.linearRampToValueAtTime(0,o+.3),r.connect(d),d.connect(l.destination),r.start(o),r.stop(o+.3);break;case"click":Tt(l,800,"sine",o,.05,.02);break;case"hover":Tt(l,400,"sine",o,.02,.005);break;case"error":Tt(l,150,"sawtooth",o,.3,.1),Tt(l,140,"sawtooth",o+.05,.3,.1);break}};var bx;(function(i){i[i.Sunday=1]="Sunday",i[i.Monday=2]="Monday",i[i.Tuesday=3]="Tuesday",i[i.Wednesday=4]="Wednesday",i[i.Thursday=5]="Thursday",i[i.Friday=6]="Friday",i[i.Saturday=7]="Saturday"})(bx||(bx={}));const rs=cl("LocalNotifications",{web:()=>Iu(()=>import("./web-O_7CRup3.js"),[]).then(i=>new i.LocalNotificationsWeb)}),T0="lifeos_dashboard_channel",C0="lifeos_alerts_channel",w0=async()=>{if(Hi.isNativePlatform())try{await rs.createChannel({id:T0,name:"LifeOS Dashboard",description:"Persistent Daily Summary",importance:2,visibility:1,sound:void 0,vibration:!1}),await rs.createChannel({id:C0,name:"Mission Alerts",description:"Time-sensitive reminders",importance:5,visibility:1,sound:"beep.wav",vibration:!0}),await rs.registerActionTypes({types:[{id:"DASHBOARD_ACTIONS",actions:[{id:"OPEN_APP",title:" Open Command",foreground:!0}]},{id:"MISSION_ALERTS",actions:[{id:"COMPLETE",title:" Complete",foreground:!1},{id:"SNOOZE",title:" Snooze 10m",foreground:!1}]}]}),console.log(" Channels Registered: Dashboard (Silent) & Alerts (Loud)")}catch(i){console.error("Failed to register channels",i)}},k0=async()=>Hi.isNativePlatform()?(await rs.requestPermissions()).display==="granted"?(await w0(),!0):!1:"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support desktop notification"),!1),H1=async(i,e)=>{if(Hi.isNativePlatform())try{await rs.schedule({notifications:[{id:99999,title:i,body:e,ongoing:!0,autoCancel:!1,silent:!0,smallIcon:"ic_stat_icon_config_sample",channelId:T0,actionTypeId:"DASHBOARD_ACTIONS",schedule:{at:new Date(Date.now()+100)}}]})}catch(l){console.error("Dashboard Update Failed",l)}},nr=async(i,e,l,o)=>{if(console.log(` sendAlert called: ${e} - ${l}`),Hi.isNativePlatform())try{await rs.schedule({notifications:[{id:i,title:` ${e}`,body:l,schedule:{at:new Date(Date.now()+100)},sound:"beep.wav",smallIcon:"ic_stat_icon_config_sample",actionTypeId:"MISSION_ALERTS",extra:o||null,channelId:C0}]})}catch(r){console.error("Native alert failed:",r)}else{if(!("Notification"in window)){alert("This browser does not support desktop notification");return}if(Notification.permission!=="granted"&&(console.log(" Permission not granted, requesting..."),await Notification.requestPermission()!=="granted")){alert("Please enable notifications to receive alerts.");return}try{if("serviceWorker"in navigator&&navigator.serviceWorker.controller)await(await navigator.serviceWorker.ready).showNotification(e,{body:l,icon:"/logo192.png",badge:"/logo192.png",vibrate:[200,100,200],tag:String(i),requireInteraction:!0,data:{url:window.location.href}}),console.log(" Service Worker notification sent");else{const r=new Notification(e,{body:l,icon:"/logo192.png",badge:"/logo192.png",vibrate:[200,100,200],tag:String(i),requireInteraction:!0});r.onclick=()=>{window.focus(),r.close()},console.log(" Web notification sent (Classic API)")}}catch(r){console.error("Web notification failed:",r),alert("Failed to send notification. See console for details.")}}},Ga=async(i,e)=>{const l=Math.floor(Date.now()+Math.random()*1e4);await nr(l,i,e)};var _e=(i=>(i.EASY="easy",i.NORMAL="normal",i.HARD="hard",i))(_e||{}),Ct=(i=>(i.EASY="easy",i.NORMAL="normal",i.HARD="hard",i))(Ct||{}),W=(i=>(i.DIS="DIS",i.STR="STR",i.INT="INT",i.PCE="PCE",i.EMT="EMT",i.CAM="CAM",i.CRT="CRT",i))(W||{});const ri={[_e.EASY]:"border-life-easy text-life-easy",[_e.NORMAL]:"border-life-normal text-life-normal",[_e.HARD]:"border-life-hard text-life-hard"},No={[_e.EASY]:"bg-life-easy/10",[_e.NORMAL]:"bg-life-normal/10",[_e.HARD]:"bg-life-hard/10"},tt={[W.DIS]:"#60a5fa",[W.STR]:"#ef4444",[W.INT]:"#a855f7",[W.PCE]:"#10b981",[W.EMT]:"#f43f5e",[W.CAM]:"#fbbf24",[W.CRT]:"#e879f9"},Lu={[Ct.EASY]:300,[Ct.NORMAL]:400,[Ct.HARD]:500},G1={7:300,21:1e3,50:2500,100:5e3},V1={[_e.EASY]:{xp:20,gold:10},[_e.NORMAL]:{xp:50,gold:30},[_e.HARD]:{xp:100,gold:100}},q1={[_e.EASY]:{xp:50,gold:20,stat:2},[_e.NORMAL]:{xp:30,gold:10,stat:1},[_e.HARD]:{xp:10,gold:0,stat:0}},xu=[{id:"standard",name:"Shadow Protocol",colors:{"--color-life-black":"#0a0a0a","--color-life-paper":"#121212","--color-life-gold":"#fbbf24","--color-life-text":"#e5e5e5"}},{id:"zayn",name:"Zayn Protocol",colors:{"--color-life-black":"#0a0a0a","--color-life-paper":"#121212","--color-life-gold":"#fbbf24","--color-life-text":"#e5e5e5","--color-life-muted":"#525252","--color-life-crimson":"#dc2626","--color-life-diamond":"#60a5fa","--color-life-hard":"#ef4444"}},{id:"grey",name:"Zenith Grey",colors:{"--color-life-black":"#18181b","--color-life-paper":"#27272a","--color-life-gold":"#a1a1aa","--color-life-text":"#f4f4f5"}},{id:"gold",name:"Midas Touch",colors:{"--color-life-black":"#1a1200","--color-life-paper":"#261a00","--color-life-gold":"#ffd700","--color-life-text":"#fffae6"},customCss:`
            /* Royal Fonts & Shapes */
            @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap');
            
            body { 
                font-family: 'Cinzel', serif !important; 
            }
            .rounded-xl, .rounded-lg, .rounded-2xl {
                border-radius: 2px !important;
                border: 1px double #ffd700 !important;
            }
            .bg-life-gold {
                background: linear-gradient(135deg, #ffd700 0%, #b8860b 100%) !important;
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            }
        `},{id:"light",name:"Light Protocol",colors:{"--color-life-black":"#f3f4f6","--color-life-paper":"#ffffff","--color-life-gold":"#d97706","--color-life-text":"#111827"}},{id:"crimson",name:"Crimson Ops",colors:{"--color-life-black":"#1a0505","--color-life-paper":"#2b0a0a","--color-life-gold":"#ef4444","--color-life-text":"#fecaca"}},{id:"sunset",name:"Sunset Drive",colors:{"--color-life-black":"#2e1065","--color-life-paper":"#4c1d95","--color-life-gold":"#f472b6","--color-life-text":"#fae8ff"}},{id:"mint",name:"Mint Protocol",colors:{"--color-life-black":"#f0fdf4","--color-life-paper":"#dcfce7","--color-life-gold":"#16a34a","--color-life-text":"#064e3b"}},{id:"azure",name:"Azure Citadel",colors:{"--color-life-black":"#082f49","--color-life-paper":"#0c4a6e","--color-life-gold":"#38bdf8","--color-life-text":"#f0f9ff"}},{id:"toxic",name:"Toxic Grid",colors:{"--color-life-black":"#052e16","--color-life-paper":"#064e3b","--color-life-gold":"#a3e635","--color-life-text":"#ecfccb"}},{id:"cyberpunk",name:"Neon City",colors:{"--color-life-black":"#020617","--color-life-paper":"#0f172a","--color-life-gold":"#22d3ee","--color-life-text":"#e0f2fe"},customCss:`
            /* Cyberpunk Aesthetics */
            @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
            
            body { 
                font-family: 'Share Tech Mono', monospace !important; 
                letter-spacing: 0.5px;
            }
            
            /* Hard Corners */
            .rounded-xl, .rounded-lg, .rounded-2xl, .rounded-full, .rounded-md, button {
                border-radius: 0px !important;
                clip-path: polygon(
                    0 0, 
                    100% 0, 
                    100% calc(100% - 10px), 
                    calc(100% - 10px) 100%, 
                    0 100%
                );
            }
            
            /* Neon Borders */
            .border {
                border-color: rgba(34, 211, 238, 0.4) !important;
            }
            
            /* Icons Glow */
            svg {
                filter: drop-shadow(0 0 2px currentColor);
            }
            
            .bg-life-gold {
                box-shadow: 0 0 15px #22d3ee, inset 0 0 10px rgba(0,0,0,0.5);
            }
        `},{id:"gamify",name:"Super Duo",colors:{"--color-life-black":"#ffffff","--color-life-paper":"#f3f4f6","--color-life-gold":"#58cc02","--color-life-text":"#3c3c3c"},customCss:`
            /* Bubbly UI */
            @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
            
            body { font-family: 'Nunito', sans-serif !important; }
            
            .rounded-xl, .rounded-lg {
                border-radius: 20px !important;
            }
            
            /* 3D Buttons */
            button, .bg-life-paper {
                border-bottom-width: 4px !important;
                border-color: rgba(0,0,0,0.1) !important;
                transition: transform 0.1s;
            }
            
            button:active {
                transform: translateY(4px);
                border-bottom-width: 0px !important;
            }
            
            .bg-life-gold {
                border-color: #46a302 !important; /* Darker Green Border */
            }
        `},{id:"gamify_purple",name:"Super Duo Dark",colors:{"--color-life-black":"#13111C","--color-life-paper":"#1F1C2E","--color-life-gold":"#9333ea","--color-life-text":"#E9D5FF"},customCss:`
            /* Bubbly Dark UI */
            @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
            
            body { font-family: 'Nunito', sans-serif !important; }
            
            .rounded-xl, .rounded-lg {
                border-radius: 20px !important;
            }
            
            /* 3D Buttons */
            button, .bg-life-paper {
                border-bottom-width: 4px !important;
                border-color: rgba(0,0,0,0.4) !important;
                transition: transform 0.1s;
            }
            
            button:active {
                transform: translateY(4px);
                border-bottom-width: 0px !important;
            }
        `}],Pn={user:{name:"Shadow Walker",title:"Initiate",level:1,currentXP:0,targetXP:1e3,gold:450,honor:100,honorDailyLog:{},streak:0,shields:1,inventory:[],equippedItems:[],hasOnboarded:!1,purchaseHistory:[],badges:[],badgeTiers:{},badgeHistory:{},featuredBadges:[],dailyXP:0,dailyTarget:Lu[Ct.NORMAL],currentMode:Ct.NORMAL,pendingMode:Ct.NORMAL,lastProcessedDate:new Date().toISOString(),consecutiveShields:0,streakHistory:{},metrics:{totalTasksCompleted:0,tasksByDifficulty:{[_e.EASY]:0,[_e.NORMAL]:0,[_e.HARD]:0},totalRaidsWon:0,raidsByDifficulty:{[_e.EASY]:0,[_e.NORMAL]:0,[_e.HARD]:0},totalGoldEarned:450,totalXPEarned:0,highestStreak:0,habitsFixed:0,shieldsUsed:0,resetsCount:0},unlockedThemes:xu,stats:{[W.DIS]:1,[W.STR]:1,[W.INT]:1,[W.PCE]:1,[W.EMT]:1,[W.CAM]:1,[W.CRT]:1},lastOnline:new Date().toISOString(),preferences:{soundEnabled:!0,deviceNotificationsEnabled:!1,theme:"standard",showHighlights:!0,showCampaignUI:!0,unlockAllWeeks:!1,showCalendarSync:!0,statsViewMode:"radar",enableRefiner:!0,copyIncludesHistory:!0,dayStartHour:4,apiKeys:{discussion:"",tasks:"",habits:"",raids:"",themes:"",monitoring:"",refiner:""}}},badgesRegistry:[],ui:{currentView:"tasks",activeModal:"none",modalQueue:[],toasts:[],systemLogs:[],debugDate:null,focusSession:null,habitsViewMode:"list",tasksViewMode:"missions"}},Wa="LIFE_OS_V1_DATA",yx="LIFE_OS_V1_DATA_AUTO_BACKUP",B1=()=>{var i,e,l,o,r,d,u,h,g,m,y,v,S,N;try{const C=localStorage.getItem(Wa);if(C){localStorage.setItem(yx,C);const E=JSON.parse(C);return{user:{...Pn.user,...E.user,metrics:{...Pn.user.metrics,...((i=E.user)==null?void 0:i.metrics)||{}},preferences:{...Pn.user.preferences,...((e=E.user)==null?void 0:e.preferences)||{}},stats:{...Pn.user.stats,...((l=E.user)==null?void 0:l.stats)||{}},inventory:((o=E.user)==null?void 0:o.inventory)||[],equippedItems:((r=E.user)==null?void 0:r.equippedItems)||[],badges:((d=E.user)==null?void 0:d.badges)||[],featuredBadges:((u=E.user)==null?void 0:u.featuredBadges)||[],unlockedThemes:(h=E.user)!=null&&h.unlockedThemes?[...E.user.unlockedThemes,...xu.filter(I=>!E.user.unlockedThemes.some(H=>H.id===I.id))]:xu,lastOnline:((g=E.user)==null?void 0:g.lastOnline)||new Date().toISOString(),hasOnboarded:((m=E.user)==null?void 0:m.hasOnboarded)??((y=E.user)==null?void 0:y.name)!=="Shadow Walker"},badgesRegistry:E.badgesRegistry||[],ui:{...Pn.ui,...E.ui,currentView:((v=E.ui)==null?void 0:v.currentView)||"tasks",debugDate:((S=E.ui)==null?void 0:S.debugDate)||null,habitsViewMode:((N=E.ui)==null?void 0:N.habitsViewMode)||"list",modalQueue:[]}}}}catch(C){console.error("CRITICAL: Failed to load persistence. Recovering...",C);try{const E=localStorage.getItem(yx);if(E){console.warn("Restoring from Auto-Backup...");const w=JSON.parse(E);return{...Pn,...w,user:{...Pn.user,...w.user}}}}catch(E){console.error("Backup also corrupted.",E)}}return Pn},$1=i=>{try{if(i.user.hasOnboarded===!1&&localStorage.getItem(Wa)){const e=localStorage.getItem(Wa);if(e&&e.includes('"hasOnboarded":true')){console.warn(" Prevented overwriting initialized data with empty state.");return}}localStorage.setItem(Wa,JSON.stringify(i))}catch(e){console.error("Save failed:",e)}},Lt=[1,2,3,5,8,13,21,34,55,89,144,233,377,610],zu=i=>{let e=Lt.findIndex(m=>m>i)-1;i===0&&(e=-1),i>=610&&(e=Lt.length-1),e<-1&&(e=Lt.length-1);const l=e+1;let o="Initiate",r="text-gray-500 border-gray-500/20";l<=7?(o="Foundation",r="text-gray-400 border-gray-500/30"):l<=10?(o="Solid State",r="text-life-silver border-life-silver/50"):l<=12?(o="Mastery",r="text-life-gold border-life-gold"):l===13?(o="Legendary",r="text-life-diamond border-life-diamond shadow-[0_0_10px_rgba(96,165,250,0.5)]"):(o="The Godfather",r="text-life-crimson border-life-crimson shadow-[0_0_15px_rgba(220,38,38,0.6)]");const d=e>=0?Lt[e]:0,u=e+1<Lt.length?Lt[e+1]:610,h=i>=610;let g=0;if(h)g=100;else{const m=u-d,y=i-d;g=Math.min(100,Math.max(0,y/m*100))}return{level:l,phase:o,phaseColor:r,nextCheckpoint:u,prevCheckpoint:d,progress:g,isMaxLevel:h}},sr=i=>{if(i<=1)return 0;let e=Lt.findIndex(r=>r>i);e===-1&&(e=Lt.length);const l=e-1,o=Lt[l]||0;return i>o?o:Lt[l-1]||0},ol=(i,e)=>{const l=e?new Date(e):new Date,o=new Date(i.createdAt||new Date().toISOString());l.setHours(0,0,0,0),o.setHours(0,0,0,0);const r=l.getTime()-o.getTime(),d=Math.floor(r/(1e3*60*60*24));if(d<0)return!0;switch(i.type){case"daily":return!0;case"specific_days":return!i.specificDays||i.specificDays.length===0?!0:i.specificDays.includes(l.getDay());case"interval":const u=i.intervalValue||1;return d%u===0;case"custom":if(!i.pattern||i.pattern.length===0)return!0;const h=d%i.pattern.length;return i.pattern[h]==="1";default:return!0}},F1={Wood:"  .    .",Copper:"    .",Iron:"      .",Silver:" .     .",Gold:"    .  .",Diamond:"  .    .",Crimson:" .     ."},Za={[_e.EASY]:1,[_e.NORMAL]:3,[_e.HARD]:9},_0=(i,e,l,o=null)=>{const r=o?new Date(o):new Date,d=r.toISOString().split("T")[0],u=[];let h=0;i.forEach(m=>{if(!m.isArchived){const y=m.deadline||m.scheduledTime;if(y&&y.startsWith(d)){const v=Za[m.difficulty]||1;u.push({id:m.id,title:m.title,type:"task",difficulty:m.difficulty,weight:v,percentage:0,isCompleted:m.isCompleted}),h+=v}}}),e.forEach(m=>{if(ol(m,r.toISOString())){const y=Za[m.difficulty]||1;u.push({id:m.id,title:m.title,type:"habit",difficulty:m.difficulty,weight:y,percentage:0,isCompleted:m.status==="completed"}),h+=y}}),l.forEach(m=>{m.status==="active"&&m.steps.forEach(y=>{const v=y.scheduledTime||y.scheduledDate;if(v&&v.startsWith(d)){const S=Za[m.difficulty]||3;u.push({id:y.id,title:`${m.title}: ${y.title}`,type:"raid",difficulty:m.difficulty,weight:S,percentage:0,isCompleted:y.isCompleted}),h+=S}})});const g=u.map(m=>({...m,percentage:h>0?Math.round(m.weight/h*100):0}));return g.sort((m,y)=>y.weight-m.weight),{items:g,totalWeight:h}},E0=i=>{try{const e=JSON.parse(localStorage.getItem("LIFE_OS_TASKS_DATA")||"[]"),l=JSON.parse(localStorage.getItem("LIFE_OS_HABITS_DATA")||"[]"),o=JSON.parse(localStorage.getItem("LIFE_OS_RAIDS_DATA")||"[]"),{totalWeight:r}=_0(e,l,o),d=Za[i]||1,u=Math.max(d,r);return Math.round(d/u*100)}catch(e){return console.error("Honor Calc Failed:",e),5}},Y1=i=>i>=99?{material:"Crimson",icon:"",tier:"crimson"}:i>=90?{material:"Diamond",icon:"",tier:"diamond"}:i>=80?{material:"Gold",icon:"",tier:"gold"}:i>=70?{material:"Silver",icon:"",tier:"silver"}:i>=60?{material:"Iron",icon:"",tier:"silver"}:i>=40?{material:"Copper",icon:"",tier:"silver"}:{material:"Wood",icon:"",tier:"silver"},go=(i,e=null)=>{const o=(e?new Date(e):new Date).toISOString().slice(0,7),r=Object.entries(i).filter(([u])=>u.startsWith(o)).map(([,u])=>u);if(r.length===0)return 100;const d=r.reduce((u,h)=>u+h,0);return Math.round(d/r.length)},J1=(i,e=null)=>{const o=(e?new Date(e):new Date).toISOString().slice(0,7),r=Object.entries(i).filter(([g])=>g.startsWith(o));if(r.length===0)return{updatedLog:i,newAverage:100,redeemedDate:null};r.sort((g,m)=>g[1]-m[1]);const d=r[0];if(d[1]>=100)return{updatedLog:i,newAverage:100,redeemedDate:null};const u={...i};u[d[0]]=100;const h=go(u,e);return{updatedLog:u,newAverage:h,redeemedDate:d[0]}},X1=(i,e,l)=>{const{material:o,icon:r,tier:d}=Y1(i),u=F1[o],h=Math.floor(i*15),g=Math.floor(i*10);return{id:`bdg_honor_${e.toLowerCase()}_${l}`,name:`${o} Honor: ${e} ${l}`,icon:r,description:`Achieved ${i}% Integrity Score in ${e} ${l}. Rank: ${o}.`,category:"consistency",triggerType:"manual",levels:[{tier:d,target:1,quote:u,rewards:{xp:h,gold:g}}]}},vx=(i,e)=>{const l=i.dailyTarget,r=i.dailyXP>=l,d=e?new Date(e):new Date,u=new Date(d);u.setDate(u.getDate()-1);const h=u.toISOString().split("T")[0],g={...i.honorDailyLog||{}};let m=g[h]!==void 0?g[h]:100;r&&(m+=10),m=Math.min(110,Math.max(0,m)),g[h]=m;let y,v="";if(d.getDate()===1){const z=new Date(d);z.setMonth(z.getMonth()-1);const B=z.toLocaleString("default",{month:"long"}),q=z.getFullYear(),G=z.toISOString().slice(0,7),Q=Object.entries(g).filter(([F])=>F.startsWith(G)).map(([,F])=>F);if(Q.length>0){const F=Q.reduce((X,L)=>X+L,0),ae=Math.round(F/Q.length);y=X1(ae,B,q),v=` |  ${B} Rank: ${ae}%`}}const S=go(g,d.toISOString());let N=i.streak,C=i.gold,E=i.shields,w=i.consecutiveShields||0,I=i.metrics.shieldsUsed,H="",_="info";if(r){N++,w=0;const z=i.currentMode===Ct.HARD?200:i.currentMode===Ct.NORMAL?100:50;C+=z,m>100?(H=` Flawless Victory! Honor Overcharged (${m}%) | +${z}G`,_="crit"):(H=` New Day! Streak ${N} | +${z}G | Honor +10%`,_="success");const B=G1[N];B?(C+=B,H=` Milestone: ${N} Days! +${B}G`,_="level-up",i.preferences.deviceNotificationsEnabled&&Ga(" Milestone Reached!",`You hit a ${N} day streak! Bonus ${B}G awarded.`)):i.preferences.deviceNotificationsEnabled&&Ga(" Protocol Reset",`New day initiated. Streak: ${N}. Honor: ${m}%.`)}else{const z=E>0,B=w<3;z&&B?(E--,w++,I++,H=` Streak Saved by Shield (${E} Remaining)`,_="info",i.preferences.deviceNotificationsEnabled&&Ga(" Shield Deployed",`Your streak was saved. ${E} shields remaining.`)):(z&&!B?H=" Shield Limit Exceeded! Streak Shattered.":H=" Target Missed. Streak Lost.",N=0,w=0,_="error",i.preferences.deviceNotificationsEnabled&&Ga(" Streak Lost","Protocol failed. System reset to Day 0."))}v&&(H+=v,_="level-up");const P=i.pendingMode,M=Lu[P];return{newUser:{...i,streak:N,gold:C,shields:E,honor:S,honorDailyLog:g,consecutiveShields:w,dailyXP:0,dailyTarget:M,currentMode:P,lastProcessedDate:d.toISOString(),lastOnline:d.toISOString(),metrics:{...i.metrics,shieldsUsed:I,highestStreak:Math.max(i.metrics.highestStreak,N)}},toastMessage:H,toastType:_,newBadge:y}},iu=cl("App",{web:()=>Iu(()=>import("./web-DuLfrdln.js"),[]).then(i=>new i.AppWeb)}),K1=(i,e)=>{const l=U.useRef(i);U.useEffect(()=>{l.current=i},[i]),U.useEffect(()=>((async()=>{try{await iu.addListener("backButton",({canGoBack:r})=>{const d=l.current,{ui:u}=d;if(u.focusSession){e(h=>({...h,ui:{...h.ui,focusSession:null}}));return}if(u.activeModal!=="none"){e(h=>({...h,ui:{...h.ui,activeModal:"none",modalData:void 0}}));return}if(u.currentView!=="tasks"){e(h=>({...h,ui:{...h.ui,currentView:"tasks"}}));return}iu.exitApp()})}catch(r){console.warn("Native back button listener failed",r)}})(),()=>{iu.removeAllListeners()}),[]),U.useEffect(()=>{const o=r=>{e(d=>d.ui.activeModal!=="none"?{...d,ui:{...d.ui,activeModal:"none",modalData:void 0}}:r.state&&r.state.view?{...d,ui:{...d.ui,currentView:r.state.view}}:d)};return window.addEventListener("popstate",o),window.history.replaceState({view:i.ui.currentView},""),()=>window.removeEventListener("popstate",o)},[])},j0=U.createContext(void 0),Q1=({children:i})=>{const[e,l]=U.useState(B1);K1(e,l),U.useEffect(()=>{const L=e.user.preferences.theme,k=e.user.unlockedThemes.find(pe=>pe.id===L)||e.user.unlockedThemes[0],R=document.documentElement;k&&Object.entries(k.colors).forEach(([pe,D])=>R.style.setProperty(pe,D)),document.body.setAttribute("data-theme",L);const V="theme-custom-structural-css";let te=document.getElementById(V);k!=null&&k.customCss?(te||(te=document.createElement("style"),te.id=V,document.head.appendChild(te)),te.innerHTML=k.customCss):te&&(te.innerHTML="")},[e.user.preferences.theme,e.user.unlockedThemes]),U.useEffect(()=>{const L=()=>{const R=e.ui.debugDate?new Date(e.ui.debugDate):new Date,V=new Date(e.user.lastProcessedDate),te=e.user.preferences.dayStartHour??4,pe=se=>{const $=new Date(se);return $.setHours(se.getHours()-te),$},D=pe(R),J=pe(V);if(D.getDate()!==J.getDate()||D.getMonth()!==J.getMonth()){const se=`day_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$=new Date().toISOString();l(de=>{const{newUser:he,toastMessage:ie,toastType:be,newBadge:Te}=vx(de.user,de.ui.debugDate),Oe={id:se,message:ie,type:be,timestamp:$};let ct=de.badgesRegistry;return Te&&(ct=[...de.badgesRegistry,Te],he.badges.includes(Te.id)||(he.badges.push(Te.id),he.badgeTiers[Te.id]="gold",he.badgeHistory[Te.id]||(he.badgeHistory[Te.id]={}),he.badgeHistory[Te.id].gold=new Date().toISOString())),{...de,user:he,badgesRegistry:ct,ui:{...de.ui,toasts:[...de.ui.toasts,Oe],systemLogs:[Oe,...de.ui.systemLogs||[]].slice(0,100)}}})}else l(se=>({...se,user:{...se.user,lastOnline:R.toISOString()}}))};L();const k=setInterval(L,5e3);return()=>clearInterval(k)},[e.ui.debugDate,e.user.lastProcessedDate,e.user.preferences.dayStartHour]),U.useEffect(()=>{const L=setTimeout(()=>$1(e),500);return()=>clearTimeout(L)},[e]),U.useEffect(()=>{if(e.user.currentXP<e.user.targetXP)return;let L={...e.user},k=!1;const R=L.level;for(;L.currentXP>=L.targetXP;){k=!0;const V=L.currentXP-L.targetXP,te=L.level+1,pe=Math.round(L.targetXP*1.15);L={...L,level:te,currentXP:V,targetXP:pe}}if(k){const V=L;l(te=>({...te,user:V,ui:{...te.ui,activeModal:"levelUp",modalData:{newLevel:V.level,oldLevel:R}}})),xe("level-up",e.user.preferences.soundEnabled)}},[e.user.currentXP,e.user.targetXP]);const o=e.user.preferences.soundEnabled,r=L=>l(k=>({...k,user:{...k.user,...L}})),d=L=>{L!==e.ui.currentView&&(xe("click",o),window.history.pushState({view:L},"",""),l(k=>({...k,ui:{...k.ui,currentView:L}})))},u=L=>{xe("click",o),l(k=>({...k,ui:{...k.ui,habitsViewMode:L}}))},h=L=>{xe("click",o),l(k=>({...k,ui:{...k.ui,tasksViewMode:L}}))},g=(L,k)=>{L!=="none"&&xe("click",o),l(R=>({...R,ui:{...R.ui,activeModal:L,modalData:k}}))},m=(L,k="info")=>{const R=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;l(V=>({...V,ui:{...V.ui,toasts:[...V.ui.toasts,{id:R,message:L,type:k,timestamp:new Date().toISOString()}],systemLogs:[{id:R,message:L,type:k,timestamp:new Date().toISOString()},...V.ui.systemLogs||[]].slice(0,100)}})),setTimeout(()=>y(R),3e3)},y=L=>l(k=>({...k,ui:{...k.ui,toasts:k.ui.toasts.filter(R=>R.id!==L)}})),v=(L,k,R="task")=>{xe("click",o),l(V=>({...V,ui:{...V.ui,focusSession:{itemId:L,startTime:new Date().toISOString(),durationMinutes:k,isActive:!0,itemType:R}}}))},S=()=>l(L=>({...L,ui:{...L.ui,focusSession:null}})),N=()=>r({preferences:{...e.user.preferences,soundEnabled:!e.user.preferences.soundEnabled}}),C=L=>{if(L==="deviceNotificationsEnabled"&&!e.user.preferences.deviceNotificationsEnabled){w();return}r({preferences:{...e.user.preferences,[L]:!e.user.preferences[L]}}),xe("click",o)},E=L=>{r({preferences:{...e.user.preferences,dayStartHour:L}}),m(`Day Start set to ${L}:00`,"info")},w=async()=>{const L=await k0();return r({preferences:{...e.user.preferences,deviceNotificationsEnabled:L}}),m(L?"Notifications Enabled":"Permission Denied",L?"success":"error"),L},I=()=>{localStorage.clear(),xe("delete",o),window.location.reload()},H=(L,k,R)=>r({name:L,title:k,hasOnboarded:!0,stats:{...e.user.stats,[R]:e.user.stats[R]+2}}),_=L=>{let k=[...e.user.inventory];if(L.type==="custom"||L.type==="redemption"||!L.isInfinite){const V=k.indexOf(L.id);V>-1&&k.splice(V,1)}L.id==="item_potion_xp"?(r({currentXP:e.user.currentXP+500,inventory:k}),xe("level-up",o),m("Potion Consumed: +500 XP","success")):(r({inventory:k}),m(`${L.title} Used`,"info"))},P=L=>{let k=[...e.user.equippedItems];if(k.includes(L))k=k.filter(R=>R!==L),m("Artifact Unequipped","info");else{if(k.length>=3){m("Max 3 Artifacts","error");return}k.push(L),m("Artifact Equipped","success")}r({equippedItems:k}),xe("click",o)},M=L=>{e.badgesRegistry.some(k=>k.id===L.id)||l(k=>({...k,badgesRegistry:[...k.badgesRegistry,L]}))},j=L=>{e.user.badges.includes(L)||(r({badges:[...e.user.badges,L]}),m("New Badge!","level-up"),xe("level-up",o))},z=L=>{e.user.unlockedThemes.some(k=>k.id===L.id)||r({unlockedThemes:[...e.user.unlockedThemes,L]})},B=L=>{e.user.preferences.theme===L&&q("standard"),r({unlockedThemes:e.user.unlockedThemes.filter(k=>k.id!==L)}),m("Theme Deleted","info")},q=L=>{r({preferences:{...e.user.preferences,theme:L}}),xe("click",o)},G=L=>{try{const k=JSON.parse(L);if(!k.user)throw new Error;l(k),m("System Restored","success"),xe("level-up",o)}catch{m("Import Failed","error")}},Q=()=>JSON.stringify(e,null,2),F=()=>{const{newUser:L,toastMessage:k,toastType:R,newBadge:V}=vx(e.user,e.ui.debugDate);let te=e.badgesRegistry;V&&(te=[...e.badgesRegistry,V],L.badges.includes(V.id)||(L.badges.push(V.id),L.badgeTiers[V.id]="gold",L.badgeHistory[V.id]||(L.badgeHistory[V.id]={}),L.badgeHistory[V.id].gold=new Date().toISOString())),l(pe=>({...pe,user:L,badgesRegistry:te})),m(k,R),xe("level-up",o)},ae=L=>l(k=>({...k,ui:{...k.ui,debugDate:L}})),X=L=>{const k=URL.createObjectURL(L);l(R=>({...R,ui:{...R.ui,customAudio:{name:L.name,url:k}}})),m(`Audio Loaded: ${L.name}`,"success")};return n.jsx(j0.Provider,{value:{state:e,dispatch:{updateUser:r,setView:d,setModal:g,addToast:m,removeToast:y,resetSystem:I,toggleSound:N,togglePreference:C,useItem:_,addBadge:M,awardBadge:j,addTheme:z,deleteTheme:B,setTheme:q,importData:G,exportData:Q,triggerDailyReset:F,setDebugDate:ae,startFocusSession:v,endFocusSession:S,completeOnboarding:H,setHabitsViewMode:u,setTasksViewMode:h,toggleEquip:P,enableNotifications:w,setCustomAudio:X,setDayStartHour:E}},children:i})},ke=()=>{const i=U.useContext(j0);if(!i)throw new Error("useLifeOS must be used within a LifeOSProvider");return i};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=(...i)=>i.filter((e,l,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===l).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,l,o)=>o?o.toUpperCase():l.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=i=>{const e=Z1(i);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=U.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:r="",children:d,iconNode:u,...h},g)=>U.createElement("svg",{ref:g,...eS,width:e,height:e,stroke:i,strokeWidth:o?Number(l)*24/Number(e):l,className:A0("lucide",r),...!d&&!tS(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,y])=>U.createElement(m,y)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(i,e)=>{const l=U.forwardRef(({className:o,...r},d)=>U.createElement(iS,{ref:d,iconNode:e,className:A0(`lucide-${W1(Sx(i))}`,`lucide-${i}`,o),...r}));return l.displayName=Sx(i),l};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ue=fe("activity",nS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],bo=fe("archive",sS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],M0=fe("arrow-left",lS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],On=fe("award",oS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],an=fe("bell",aS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],di=fe("book-open",rS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],dS=fe("box",cS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],xt=fe("brain",uS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],vr=fe("calendar-plus",fS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jt=fe("calendar",pS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],R0=fe("chart-column",mS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Be=fe("check",hS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ft=fe("chevron-down",xS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],D0=fe("chevron-left",gS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ht=fe("chevron-right",bS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ji=fe("chevron-up",yS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],SS=fe("circle-alert",vS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Gi=fe("circle-check-big",NS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CS=fe("circle-check",TS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],kS=fe("circle-x",wS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ES=fe("circle",_S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yt=fe("clock",jS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Nx=fe("cloud-rain",AS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],RS=fe("code",MS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],I0=fe("coffee",DS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],yo=fe("coins",IS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ui=fe("copy",LS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],al=fe("crown",zS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],cs=fe("crosshair",PS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Sr=fe("database",US);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],lr=fe("download",OS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Xt=fe("dumbbell",HS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],er=fe("eye",GS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dl=fe("file-text",VS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Nr=fe("flame",qS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],L0=fe("flask-conical",BS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],Pu=fe("folder-input",$S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],z0=fe("folder-plus",FS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],P0=fe("folder",YS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],XS=fe("gamepad",JS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],U0=fe("gavel",KS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],O0=fe("gift",QS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ZS=fe("hash",WS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],fi=fe("heart",eN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],iN=fe("hexagon",tN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],sN=fe("history",nN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oN=fe("info",lN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],rN=fe("landmark",aN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dN=fe("layout-grid",cN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],fN=fe("layout-list",uN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Tx=fe("list-todo",pN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],hN=fe("list",mN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gN=fe("loader-circle",xN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ds=fe("lock",bN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],vN=fe("log-out",yN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],vo=fe("maximize-2",SN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M5 12h14",key:"1ays0h"}]],or=fe("minus",NN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Uu=fe("moon",TN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ar=fe("music",CN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],kN=fe("package",wN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Dt=fe("palette",_N);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],jN=fe("pause",EN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],nu=fe("pen",AN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ou=fe("pencil",MN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],DN=fe("pin",RN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Tr=fe("play",IN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gt=fe("plus",LN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],PN=fe("refresh-ccw",zN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],H0=fe("refresh-cw",UN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],G0=fe("repeat",ON);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Hu=fe("rotate-ccw",HN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],VN=fe("save",GN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Cr=fe("scale",qN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],$N=fe("scroll",BN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],us=fe("scroll-text",FN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],JN=fe("settings-2",YN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KN=fe("settings",XN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],rr=fe("shield-alert",QN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cr=fe("shield-check",WN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ot=fe("shield",ZN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Gu=fe("shopping-bag",e2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],V0=fe("shopping-cart",t2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],q0=fe("skull",i2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],Cx=fe("snowflake",n2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dr=fe("sparkles",s2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ri=fe("square-check-big",l2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],a2=fe("square-pen",o2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],c2=fe("square",r2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ur=fe("star",d2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],wx=fe("sticky-note",u2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Di=fe("target",f2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Yt=fe("terminal",p2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],wr=fe("text-align-start",m2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],x2=fe("timer",h2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rt=fe("trash-2",g2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],B0=fe("trash",b2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kr=fe("trending-up",y2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cn=fe("triangle-alert",v2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],_r=fe("trophy",S2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fr=fe("upload",N2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vu=fe("user",T2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],w2=fe("utensils",C2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],_2=fe("volume-2",k2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],kx=fe("volume-x",E2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],_x=fe("waves",j2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],M2=fe("wheat",A2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ie=fe("x",R2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],We=fe("zap",D2),I2=()=>{const{state:i,dispatch:e}=ke(),{currentView:l,habitsViewMode:o,tasksViewMode:r}=i.ui,{user:d}=i,u=d.preferences.showCampaignUI,[h,g]=U.useState("profile"),[m,y]=U.useState("raids"),v=()=>{if(l===h){let j="profile";h==="profile"?j="skills":h==="skills"?j="shop":j="profile",g(j),e.setView(j)}else e.setView(h)},S=()=>{if(!u){l!=="raids"&&e.setView("raids");return}if(l===m){let j="raids";m==="raids"?j="campaign":j="raids",y(j),e.setView(j)}else e.setView(m)},N=()=>{if(l==="tasks"){const j=r==="missions"?"codex":"missions";e.setTasksViewMode(j)}else e.setView("tasks")},C=()=>{let j="mission";l==="habits"?j="protocol":(l==="raids"||l==="campaign")&&(j="operation"),e.setModal("addTask",{defaultType:j})},E=()=>{if(l==="habits"){const j=o==="list"?"calendar":"list";e.setHabitsViewMode(j)}else e.setView("habits")},w=j=>l===j,I=w("profile")||w("shop")||w("skills"),H=w("raids")||w("campaign"),_=w("tasks"),P=w("habits"),M=!u&&m==="campaign"?"raids":m;return n.jsxs("nav",{className:"h-24 pb-6 pt-2 bg-life-black/80 backdrop-blur-xl border-t border-white/5 flex items-center justify-around px-4 z-30 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] relative",children:[n.jsxs("button",{onClick:v,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative group ${I?"text-life-gold bg-life-gold/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`transition-all duration-300 transform ${h==="profile"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(Vu,{size:24})}),n.jsx("div",{className:`transition-all duration-300 transform ${h==="skills"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(di,{size:24})}),n.jsx("div",{className:`transition-all duration-300 transform ${h==="shop"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(Gu,{size:24})})]}),n.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:h}),I&&n.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-gold rounded-full"})]}),n.jsxs("button",{onClick:N,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${_?r==="codex"?"text-red-500 bg-red-950/20 scale-105":"text-life-easy bg-life-easy/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`transition-all duration-300 transform ${r==="missions"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(Ri,{size:24})}),n.jsx("div",{className:`transition-all duration-300 transform ${r==="codex"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(Cr,{size:24})})]}),n.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:r==="codex"?"Codex":"Missions"}),_&&n.jsx("div",{className:`absolute -bottom-1 w-1 h-1 rounded-full ${r==="codex"?"bg-red-500":"bg-life-easy"}`})]}),n.jsxs("div",{className:"relative -mt-12 group z-20",children:[n.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-life-crimson/40 blur-[30px] rounded-full pointer-events-none group-hover:bg-life-crimson/60 transition-colors duration-500 animate-pulse-slow"}),n.jsx("button",{onClick:C,className:"relative w-16 h-16 bg-gradient-to-br from-life-crimson to-red-700 rounded-full shadow-[0_8px_30px_rgba(220,38,38,0.4)] flex items-center justify-center text-white hover:scale-110 active:scale-95 transition-all duration-300 border-4 border-life-black ring-2 ring-life-crimson/20",children:n.jsx(gt,{size:32,strokeWidth:3,className:"group-active:rotate-90 transition-transform duration-300 drop-shadow-md"})})]}),n.jsxs("button",{onClick:E,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${P?"text-life-normal bg-life-normal/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`transition-all duration-300 transform ${o==="list"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(Di,{size:24})}),n.jsx("div",{className:`transition-all duration-300 transform ${o==="calendar"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(Jt,{size:24})})]}),n.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:o==="calendar"?"Planner":"Habits"}),P&&n.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-normal rounded-full"})]}),n.jsxs("button",{onClick:S,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${H?"text-life-hard bg-life-hard/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`transition-all duration-300 transform ${M==="raids"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(We,{size:24})}),u&&n.jsx("div",{className:`transition-all duration-300 transform ${M==="campaign"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:n.jsx(fN,{size:24})})]}),n.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:M}),H&&n.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-hard rounded-full"})]})]})},Ex=i=>Math.floor(100*Math.pow(i,1.5)),L2=i=>i>=100?"Grandmaster":i>=50?"Master":i>=25?"Expert":i>=10?"Adept":"Novice",z2=i=>{const e=new Date(i),o=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(o/(1e3*60*60*24))>30},su="LIFE_OS_SKILLS_DATA",jx=[{id:"sk_01",title:"Coding",description:"Building the matrix.",relatedStats:[W.INT],level:1,currentXP:0,targetXP:100,rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()}],$0=U.createContext(void 0),P2=({children:i})=>{const{state:e,dispatch:l}=ke(),o=e.user.preferences.soundEnabled,r=()=>{try{const C=localStorage.getItem(su);if(C){const E=JSON.parse(C);return Array.isArray(E)?E:jx}}catch(C){console.warn("Failed to load skills:",C)}return jx},[d,u]=U.useState(r),[h,g]=U.useState(null);U.useEffect(()=>{const C=setTimeout(()=>{(d.length>0||localStorage.getItem(su))&&localStorage.setItem(su,JSON.stringify(d))},500);return()=>clearTimeout(C)},[d]),U.useEffect(()=>{(()=>{u(E=>E.map(w=>({...w,isRusty:z2(w.lastPracticed)})))})()},[]);const m=C=>{C&&xe("click",o),g(C)},y=(C,E,w="")=>{const I={id:`sk_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:C,description:w,relatedStats:E,level:1,currentXP:0,targetXP:Ex(1),rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()};xe("click",o),u(H=>[...H,I]),l.addToast(`Skill Acquired: ${C}`,"success")},v=(C,E)=>{u(w=>w.map(I=>{if(I.id!==C)return I;const H=I.isRusty;let _=I.currentXP+E,P=I.level,M=I.targetXP,j=!1;for(;_>=M;)_-=M,P++,M=Ex(P),j=!0;const z=L2(P);return j&&(xe("level-up",o),l.addToast(`${I.title} reached Level ${P}!`,"level-up")),H&&l.addToast(`${I.title} is no longer Rusty!`,"success"),{...I,level:P,currentXP:_,targetXP:M,rank:z,lastPracticed:new Date().toISOString(),isRusty:!1}}))},S=C=>{xe("delete",o),u(E=>E.filter(w=>w.id!==C)),h===C&&g(null),l.addToast("Skill Deleted","info")},N=C=>{u(C),l.addToast("Skills Restored","success")};return n.jsx($0.Provider,{value:{skillState:{skills:d,activeSkillId:h},skillDispatch:{addSkill:y,addSkillXP:v,deleteSkill:S,setActiveSkill:m,restoreData:N}},children:i})},vt=()=>{const i=U.useContext($0);if(i===void 0)throw new Error("useSkills must be used within a SkillProvider");return i},U2=()=>{const{state:i,dispatch:e}=ke(),{user:l}=i,{skillState:o}=vt(),r=(o==null?void 0:o.skills)||[];let d=l.title;const u=l.preferences.useSkillAsTitle&&l.preferences.linkedSkillId?r.find(_=>_.id===l.preferences.linkedSkillId):null;u?d=`${u.rank} ${u.title}`:d=l.title;const h=Math.min(100,l.currentXP/l.targetXP*100),g=Math.min(100,l.dailyXP/l.dailyTarget*100),m=g>=100,y=18,v=3,S=y-v*2,N=S*2*Math.PI,C=N-g/100*N,[E,w]=U.useState(0);U.useEffect(()=>{if(E>0){const _=setTimeout(()=>w(0),1e3);return()=>clearTimeout(_)}},[E]);const I=()=>{w(_=>{const P=_+1;return P>=5?(xe("level-up",!0),e.setModal("devConsole"),0):P}),i.ui.currentView!=="profile"&&e.setView("profile")},H=()=>{xe("click",!0),e.setModal("honorBreakdown")};return n.jsxs("header",{className:"h-16 px-4 border-b border-white/5 flex items-center justify-between bg-life-black/60 backdrop-blur-xl z-20 shadow-lg transition-all duration-300 select-none sticky top-0",children:[n.jsxs("div",{onClick:I,className:"flex items-center gap-3 cursor-pointer active:opacity-80 transition-opacity",children:[n.jsxs("div",{className:"w-10 h-10 rounded-full bg-life-muted/20 border border-life-silver flex items-center justify-center relative overflow-hidden ring-1 ring-life-muted/50 group",children:[u&&u.icon?n.jsx("span",{className:"text-xl",children:u.icon}):n.jsx(Vu,{size:20,className:"text-life-silver group-hover:scale-110 transition-transform"}),n.jsxs("div",{className:"absolute bottom-0 right-0 bg-life-gold text-life-black text-[9px] font-black px-1.5 py-0.5 rounded-tl-md shadow-sm z-10",children:["L",l.level]}),E>0&&n.jsx("div",{className:"absolute inset-0 bg-life-crimson/20 animate-pulse"})]}),n.jsxs("div",{className:"flex flex-col justify-center",children:[n.jsx("h1",{className:"text-sm font-bold leading-none tracking-wide text-life-text/90 mb-1.5 truncate max-w-[150px] sm:max-w-none",children:d.toUpperCase()}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-mono text-[9px] text-life-gold/80",children:[l.currentXP,"/",l.targetXP," XP"]}),n.jsx("div",{className:"w-20 h-1.5 bg-gray-800 rounded-full overflow-hidden border border-gray-700/50",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-life-gold to-yellow-200 transition-all duration-700 ease-out shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${h}%`}})})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>e.setModal("devConsole"),className:"p-2 rounded-full text-life-muted hover:text-life-gold hover:bg-life-gold/10 transition-all active:scale-95",title:"System Settings",children:n.jsx(KN,{size:20})}),n.jsxs("div",{className:"hidden sm:flex flex-col items-end gap-0.5 mr-1",children:[n.jsxs("div",{className:"flex items-center text-life-gold font-mono text-xs",children:[n.jsx("span",{className:"mr-1.5 text-xs",children:""})," ",l.gold]}),n.jsxs("div",{onClick:H,className:"flex items-center text-indigo-400 font-mono text-xs cursor-pointer hover:text-indigo-300 hover:scale-105 transition-all",children:[n.jsx(On,{size:10,className:"mr-1 fill-current opacity-80"})," ",l.honor,"%"]})]}),n.jsxs("div",{className:"sm:hidden flex items-center gap-2 mr-1",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center w-8 h-8 rounded bg-life-gold/10 border border-life-gold/20",children:[n.jsx("span",{className:"text-[8px]",children:""}),n.jsx("span",{className:"text-[9px] font-bold text-life-gold",children:l.gold})]}),n.jsxs("div",{onClick:H,className:"flex flex-col items-center justify-center w-8 h-8 rounded bg-indigo-500/10 border border-indigo-500/20 cursor-pointer active:scale-95 transition-transform",children:[n.jsx(On,{size:8,className:"text-indigo-400 mb-0.5"}),n.jsxs("span",{className:"text-[9px] font-bold text-indigo-400",children:[l.honor,"%"]})]})]}),n.jsxs("div",{onClick:()=>e.setModal("streak"),className:"relative w-12 h-12 flex items-center justify-center group cursor-pointer hover:scale-105 transition-transform",children:[n.jsxs("svg",{height:y*2,width:y*2,className:"transform -rotate-90 absolute z-0",children:[n.jsx("circle",{stroke:"#333",strokeWidth:v,fill:"transparent",r:S,cx:y,cy:y,opacity:.3}),n.jsx("circle",{stroke:m?"#10b981":"#fbbf24",strokeWidth:v,strokeDasharray:N+" "+N,style:{strokeDashoffset:C,transition:"stroke-dashoffset 0.5s ease-in-out"},strokeLinecap:"round",fill:"transparent",r:S,cx:y,cy:y,className:m?"drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]":""})]}),n.jsxs("div",{className:`
                w-8 h-8 rounded-full flex flex-col items-center justify-center z-10 transition-colors
                ${m?"bg-life-easy/10":"bg-life-black"}
             `,children:[n.jsx(Nr,{size:12,className:`
                    absolute -top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity 
                    ${m?"text-life-easy fill-life-easy/50":"text-life-crimson fill-life-crimson/50"}
                `}),n.jsx("span",{className:"text-[6px] text-life-muted uppercase leading-none mt-0.5 tracking-tighter",children:"Day"}),n.jsx("span",{className:`text-sm font-black leading-none ${m?"text-life-easy":"text-life-crimson"}`,children:l.streak})]})]})]})]})},F0=i=>{const e=/\[?w(\d{1,2})d(\d)\]?/i,l=i.match(e);if(l){const o=parseInt(l[1],10),r=parseInt(l[2],10);return{cleanedTitle:i.replace(e,"").replace(/\s+/," ").trim(),timeCode:{week:o,day:r}}}return{cleanedTitle:i,timeCode:null}},O2=i=>{const e=/\b(\d{10})\b/,l=i.match(e);if(l){const o=l[1],r=parseInt(o.substring(0,2),10),d=parseInt(o.substring(2,4),10)-1,u=parseInt(o.substring(4,6),10),h=parseInt(o.substring(6,8),10),g=parseInt(o.substring(8,10),10),m=2e3+r,y=new Date(m,d,u,h,g);if(!isNaN(y.getTime()))return{cleanedTitle:i.replace(e,"").replace(/\s+/," ").trim(),dateIso:y.toISOString()}}return{cleanedTitle:i,dateIso:null}},H2=(i,e,l)=>{const o=new Date(i),r=(e-1)*7+(l-1),d=new Date(o);return d.setDate(d.getDate()+r),d.toISOString()},G2=(i,e)=>{if(!i||!e)return null;const l=new Date(i),o=new Date(e);l.setHours(0,0,0,0),o.setHours(0,0,0,0);const r=o.getTime()-l.getTime(),d=Math.floor(r/(1e3*60*60*24));if(d<0)return null;const u=Math.floor(d/7)+1,h=d%7+1;return`W${u}D${h}`},V2=()=>{try{const i=localStorage.getItem("LIFE_OS_CAMPAIGN_DATA_V2");if(i){const e=JSON.parse(i);if(e.isActive&&e.startDate)return e}}catch{return null}return null},rl=(i,e,l,o,r)=>{const d=V1[i];let u=1,h=1;return e===Ct.HARD?(u+=.2,h+=.5):e===Ct.EASY&&(u-=.2),{xp:Math.floor(d.xp*u),gold:Math.floor(d.gold*h)}},Va="LIFE_OS_TASKS_DATA",Ax="LIFE_OS_TASK_CATEGORIES",Mx="LIFE_OS_LAWS_DATA",q2=[{id:"t_01",title:"Initialize LifeOS Protocol",description:"System calibration complete.",difficulty:_e.HARD,stat:W.INT,isCompleted:!1,isTimed:!1,deadline:"2024-12-31",subtasks:[{id:"st_1",title:"Check Audio Systems",isCompleted:!0},{id:"st_2",title:"Verify Data Persistence",isCompleted:!1}],energyLevel:"high"}],B2=[{id:"cat_work",title:" Work Operations",isCollapsed:!1},{id:"cat_personal",title:" Personal Logs",isCollapsed:!1}],Y0=U.createContext(void 0),$2=({children:i})=>{const{state:e,dispatch:l}=ke(),{skillDispatch:o,skillState:r}=vt(),d=e.user.preferences.soundEnabled,u=(L,k)=>{try{const R=localStorage.getItem(L);if(R)return JSON.parse(R)}catch(R){console.warn(`Failed to load ${L}`,R)}return k},h=()=>{const L=u(Va,[]);return L.length===0&&!localStorage.getItem(Va)?q2:L.map(k=>{let R=k.reminders||[];return!k.reminders&&k.reminderMinutes&&k.reminderMinutes>0&&(R=[{id:`mig_${Date.now()}_${Math.random()}`,minutesBefore:k.reminderMinutes,isSent:!!k.isReminderSent}]),{difficulty:_e.NORMAL,stat:W.STR,subtasks:[],energyLevel:"medium",isTimed:!1,isArchived:!1,isCompleted:!1,isCampaign:!1,reminders:R,...k}})},[g,m]=U.useState(h),[y,v]=U.useState(()=>u(Ax,B2)),[S,N]=U.useState(()=>u(Mx,[]));U.useEffect(()=>{const L=setTimeout(()=>{(g.length>0||localStorage.getItem(Va))&&localStorage.setItem(Va,JSON.stringify(g)),y.length>0&&localStorage.setItem(Ax,JSON.stringify(y)),S.length>0&&localStorage.setItem(Mx,JSON.stringify(S))},500);return()=>clearTimeout(L)},[g,y,S]);const C=L=>{let{cleanedTitle:k,timeCode:R}=F0(L.title);const V=O2(k);let te=L.deadline,pe=L.scheduledTime,D=L.isCampaign||!1,J=L.isCalendarEvent||!1;if(R){D=!0;const $=V2();$?(te=H2($.startDate,R.week,R.day),l.addToast(`G12: Scheduled for W${R.week} D${R.day}`,"info")):l.addToast(`No active G12 campaign found for [W${R.week}D${R.day}]`,"error")}V.dateIso&&(k=V.cleanedTitle,pe=V.dateIso,te=V.dateIso,J=!0,l.addToast("C30: Scheduled via Code","info"));const se={...L,title:k,deadline:te,scheduledTime:pe,isCampaign:D,isCalendarEvent:J,id:`t_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isCompleted:!1,isArchived:!1};xe("click",d),m($=>[se,...$]),l.setModal("none")},E=(L,k)=>{m(R=>R.map(V=>V.id===L?{...V,...k}:V)),xe("click",d)},w=L=>{const k=g.find(te=>te.id===L);if(!k)return;const R=!k.isCompleted;let V=null;if(R){let te=rl(k.difficulty,e.user.currentMode);k.isCampaign&&(te.xp=Math.ceil(te.xp*1.1));const pe=Math.random(),D=k.difficulty===_e.HARD&&pe>.85||k.difficulty===_e.NORMAL&&pe>.9;let J=null;D?(te.xp*=2,te.gold*=2,V="crit",J={title:k.title,xp:te.xp,gold:te.gold,multiplier:2,message:"Luck favors the bold."}):V="success";const se=e.user.metrics,$={...se,totalTasksCompleted:se.totalTasksCompleted+1,tasksByDifficulty:{...se.tasksByDifficulty,[k.difficulty]:(se.tasksByDifficulty[k.difficulty]||0)+1},totalGoldEarned:se.totalGoldEarned+te.gold,totalXPEarned:se.totalXPEarned+te.xp},de=k.difficulty===_e.HARD?2:k.difficulty===_e.NORMAL?1:.5;l.updateUser({currentXP:e.user.currentXP+te.xp,dailyXP:e.user.dailyXP+te.xp,gold:e.user.gold+te.gold,stats:{...e.user.stats,[k.stat]:e.user.stats[k.stat]+de},metrics:$});let he=`+${te.xp} XP  +${te.gold} G`;if(k.skillId){const ie=Math.ceil(te.xp*.5);o.addSkillXP(k.skillId,ie);const be=r.skills.find(Te=>Te.id===k.skillId);be&&(he+=`  +${ie} ${be.title}`)}J?setTimeout(()=>l.setModal("loot",J),200):l.addToast(`Mission Complete: ${k.title} | ${he}`,"success")}else{const te=rl(k.difficulty,e.user.currentMode);k.isCampaign&&(te.xp=Math.ceil(te.xp*1.1));const pe=e.user.metrics,D={...pe,totalTasksCompleted:Math.max(0,pe.totalTasksCompleted-1),tasksByDifficulty:{...pe.tasksByDifficulty,[k.difficulty]:Math.max(0,(pe.tasksByDifficulty[k.difficulty]||0)-1)},totalGoldEarned:Math.max(0,pe.totalGoldEarned-te.gold),totalXPEarned:Math.max(0,pe.totalXPEarned-te.xp)},J=k.difficulty===_e.HARD?2:k.difficulty===_e.NORMAL?1:.5;l.updateUser({currentXP:Math.max(0,e.user.currentXP-te.xp),dailyXP:Math.max(0,e.user.dailyXP-te.xp),gold:Math.max(0,e.user.gold-te.gold),stats:{...e.user.stats,[k.stat]:Math.max(0,e.user.stats[k.stat]-J)},metrics:D})}V&&d&&xe(V,d),m(te=>te.map(pe=>pe.id===L?{...pe,isCompleted:R}:pe))},I=(L,k)=>{m(R=>R.map(V=>{if(V.id!==L)return V;const te=V.subtasks.map(pe=>pe.id===k?{...pe,isCompleted:!pe.isCompleted}:pe);return{...V,subtasks:te}})),xe("click",d)},H=L=>{const k=g.find(R=>R.id===L);if(k){if(!k.isCompleted&&!k.isArchived){const R=q1[k.difficulty],V=E0(k.difficulty),te=e.ui.debugDate?new Date(e.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],pe=e.user.honorDailyLog[te]!==void 0?e.user.honorDailyLog[te]:100,D=Math.max(0,pe-V),J={...e.user.honorDailyLog,[te]:D},se=go(J,e.ui.debugDate);l.updateUser({currentXP:Math.max(0,e.user.currentXP-R.xp),gold:Math.max(0,e.user.gold-R.gold),stats:{...e.user.stats,[k.stat]:Math.max(0,e.user.stats[k.stat]-R.stat)},honorDailyLog:J,honor:se}),l.addToast(`Mission Failed: -${V}% Honor | -${R.xp} XP`,"error"),xe("error",d)}else xe("delete",d);m(R=>R.filter(V=>V.id!==L))}},_=L=>{const k={id:`cat_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:L,isCollapsed:!1};v(R=>[...R,k]),xe("click",d)},P=L=>{v(k=>k.filter(R=>R.id!==L)),m(k=>k.map(R=>R.categoryId===L?{...R,categoryId:void 0}:R)),xe("delete",d)},M=(L,k)=>{v(R=>R.map(V=>V.id===L?{...V,title:k}:V))},j=L=>{v(k=>k.map(R=>R.id===L?{...R,isCollapsed:!R.isCollapsed}:R))},z=(L,k)=>{m(R=>R.map(V=>V.id===L?{...V,categoryId:k}:V)),xe("click",d)},B=L=>{m(k=>k.map(R=>R.id===L?{...R,isArchived:!0}:R)),l.addToast("Mission moved to Backlog","info"),xe("click",d)},q=L=>{m(k=>k.map(R=>R.id===L?{...R,isArchived:!1}:R)),l.addToast("Mission Restored","success"),xe("click",d)},G=(L,k,R,V)=>{const te={id:`law_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:L,penaltyType:k,penaltyValue:R,statTarget:V,timesBroken:0};N(pe=>[...pe,te]),xe("click",d),l.addToast("New Law Enacted","info")},Q=(L,k)=>{N(R=>R.map(V=>V.id===L?{...V,...k}:V)),xe("click",d)},F=L=>{N(k=>k.filter(R=>R.id!==L)),xe("delete",d)},ae=L=>{const k=S.find(R=>R.id===L);if(k){if(k.penaltyType==="gold")l.updateUser({gold:e.user.gold-k.penaltyValue}),l.addToast(`Law Broken: ${k.title} | -${k.penaltyValue} Gold`,"error");else if(k.penaltyType==="xp")l.updateUser({currentXP:e.user.currentXP-k.penaltyValue}),l.addToast(`Law Broken: ${k.title} | -${k.penaltyValue} XP`,"error");else if(k.penaltyType==="stat"&&k.statTarget)l.updateUser({stats:{...e.user.stats,[k.statTarget]:e.user.stats[k.statTarget]-k.penaltyValue}}),l.addToast(`Law Broken: ${k.title} | -${k.penaltyValue} ${k.statTarget}`,"error");else if(k.penaltyType==="honor"){const R=e.ui.debugDate?new Date(e.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],V=e.user.honorDailyLog[R]!==void 0?e.user.honorDailyLog[R]:100,te=Math.max(0,V-k.penaltyValue),pe={...e.user.honorDailyLog,[R]:te},D=go(pe,e.ui.debugDate);l.updateUser({honorDailyLog:pe,honor:D}),l.addToast(`Law Broken: ${k.title} | -${k.penaltyValue} Honor`,"error")}N(R=>R.map(V=>V.id===L?{...V,timesBroken:V.timesBroken+1}:V)),xe("error",d)}},X=(L,k,R)=>{m(L),v(k),N(R),l.addToast("Tasks & Laws Restored","success")};return n.jsx(Y0.Provider,{value:{taskState:{tasks:g,categories:y,laws:S},taskDispatch:{addTask:C,updateTask:E,toggleTask:w,deleteTask:H,addCategory:_,deleteCategory:P,renameCategory:M,toggleCategory:j,moveTask:z,archiveTask:B,restoreTask:q,toggleSubtask:I,addLaw:G,deleteLaw:F,enforceLaw:ae,updateLaw:Q,restoreData:X}},children:i})},Kt=()=>{const i=U.useContext(Y0);if(i===void 0)throw new Error("useTasks must be used within a TaskProvider");return i},qa="LIFE_OS_HABITS_DATA",Rx="LIFE_OS_HABIT_CATEGORIES",F2=[{id:"h_1771593541489_o581bvlg5",title:"Clean room ",description:"",difficulty:_e.NORMAL,stat:W.DIS,type:"specific_days",specificDays:[1,4,5,6],isTimed:!1,reminders:[],subtasks:[],dailyTarget:1,streak:0,status:"pending",history:[],checkpoint:0,bestStreak:0,createdAt:"2026-02-20T13:19:01.489Z",dailyProgress:0}],Y2=[{id:"cat_morning",title:" Morning Protocol",isCollapsed:!1},{id:"cat_health",title:" Health & Body",isCollapsed:!1},{id:"cat_night",title:" Night Routine",isCollapsed:!1}],J0=U.createContext(void 0),J2=({children:i})=>{const{state:e,dispatch:l}=ke(),{skillDispatch:o,skillState:r}=vt(),d=e.user.preferences.soundEnabled,u=(G,Q)=>{try{const F=localStorage.getItem(G);if(F)return JSON.parse(F)}catch(F){console.warn(`Failed to load ${G}`,F)}return Q},h=()=>{const G=u(qa,[]);return G.length===0&&!localStorage.getItem(qa)?F2:G.map(Q=>{let F=Q.reminders||[];return!Q.reminders&&Q.reminderMinutes&&Q.reminderMinutes>0&&(F=[{id:`mig_${Date.now()}_${Math.random()}`,minutesBefore:Q.reminderMinutes,isSent:!!Q.isReminderSent}]),{difficulty:_e.NORMAL,stat:W.DIS,type:"daily",history:[],streak:0,checkpoint:0,bestStreak:0,status:"pending",isTimed:!1,durationMinutes:0,reminders:F,subtasks:[],dailyTarget:Q.dailyTarget||1,dailyProgress:Q.dailyProgress||0,...Q}})},[g,m]=U.useState(h),[y,v]=U.useState(()=>u(Rx,Y2)),[S,N]=U.useState(null);U.useEffect(()=>{const G=setTimeout(()=>{(g.length>0||localStorage.getItem(qa))&&localStorage.setItem(qa,JSON.stringify(g)),y.length>0&&localStorage.setItem(Rx,JSON.stringify(y))},500);return()=>clearTimeout(G)},[g,y]),U.useEffect(()=>{const G=()=>{const F=new Date,ae=new Date(e.user.lastOnline),X=e.user.preferences.dayStartHour??4,L=te=>{const pe=new Date(te);return pe.setHours(te.getHours()-X),pe},k=L(F),R=L(ae);if(k.getDate()!==R.getDate()||k.getMonth()!==R.getMonth()){const te=new Date(F);te.setDate(te.getDate()-1);const pe=te.toISOString();let D=e.user.shields,J=0,se={},$=0,de=0;const he=g.map(ie=>{const be=ie.reminders?ie.reminders.map(nt=>({...nt,isSent:!1})):[],Te=ie.subtasks?ie.subtasks.map(nt=>({...nt,isCompleted:!1})):[],Oe={reminders:be,subtasks:Te,dailyProgress:0};if(ie.status==="completed")return{...ie,...Oe,status:"pending",shieldUsed:!1,history:[...ie.history,pe]};if(ie.status==="failed")return{...ie,...Oe,status:"pending",shieldUsed:!1};if(ol(ie,pe)&&ie.status==="pending"){if((ie.dailyProgress||0)>0)return de++,{...ie,...Oe,status:"pending",shieldUsed:!1};if(D>0)return D--,J++,l.addToast(` Shield protected: ${ie.title}`,"info"),{...ie,...Oe,status:"pending",shieldUsed:!0};const nt=sr(ie.streak);return se[ie.stat]=(se[ie.stat]||0)+1,$+=1,l.addToast(` Missed ${ie.title}: -1 ${ie.stat} & -1 DIS`,"error"),{...ie,...Oe,streak:nt,status:"pending",shieldUsed:!1}}return{...ie,...Oe,status:"pending",shieldUsed:!1}});if(m(he),J>0&&(l.updateUser({shields:D}),xe("success",d)),de>0&&l.addToast(`${de} habits partially completed (Rest Day recorded)`,"info"),$>0){xe("error",d);const ie={...e.user.stats};Object.entries(se).forEach(([be,Te])=>{const Oe=be;ie[Oe]=Math.max(0,ie[Oe]-Te)}),ie[W.DIS]=Math.max(0,ie[W.DIS]-$),l.updateUser({stats:ie})}}};G();const Q=setInterval(G,6e4);return()=>clearInterval(Q)},[e.user.lastOnline,g,e.user.preferences.dayStartHour]);const C=G=>{G&&xe("click",d),N(G)},E=G=>{const Q={id:`h_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...G,streak:0,status:"pending",history:[],checkpoint:0,bestStreak:0,createdAt:new Date().toISOString(),dailyProgress:0};xe("click",d),m(F=>[...F,Q]),l.setModal("none")},w=(G,Q)=>{m(F=>F.map(ae=>ae.id===G?{...ae,...Q}:ae)),xe("click",d)},I=(G,Q)=>{m(F=>F.map(ae=>{if(ae.id!==G)return ae;const X=ae.subtasks.map(L=>L.id===Q?{...L,isCompleted:!L.isCompleted}:L);return{...ae,subtasks:X}})),xe("click",d)},H=(G,Q)=>{const F=g.find(k=>k.id===G);if(!F)return;if(Q==="completed"&&F.dailyTarget&&F.dailyTarget>1){const R=(F.dailyProgress||0)+1;if(R<F.dailyTarget){m(V=>V.map(te=>te.id===G?{...te,dailyProgress:R}:te)),xe("click",d),l.addToast(`${F.title}: Rep ${R}/${F.dailyTarget}`,"info");return}}let ae=F.streak,X=F.history,L="success";if(Q==="completed"){ae+=1;const k=new Date().toISOString().split("T")[0];X.some(pe=>pe.startsWith(k))||(X=[...X,new Date().toISOString()]);let R=rl(F.difficulty,e.user.currentMode);Math.random()>.95?(R.xp*=2,R.gold*=2,L="crit",l.setModal("loot",{title:F.title,xp:R.xp,gold:R.gold,multiplier:2,message:"Consistency is Power."})):l.addToast(`${F.title} Complete | +${R.xp} XP`,"success");const te=F.difficulty===_e.HARD?2:F.difficulty===_e.NORMAL?1:.5;if(l.updateUser({currentXP:e.user.currentXP+R.xp,dailyXP:e.user.dailyXP+R.xp,gold:e.user.gold+R.gold,stats:{...e.user.stats,[F.stat]:e.user.stats[F.stat]+te},metrics:{...e.user.metrics,habitsFixed:e.user.metrics.habitsFixed+1}}),F.skillId){const pe=Math.ceil(R.xp*.5);o.addSkillXP(F.skillId,pe)}}else if(Q==="failed"){ae=sr(F.streak),L="error";const k=E0(F.difficulty),R=e.ui.debugDate?new Date(e.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],V=e.user.honorDailyLog[R]!==void 0?e.user.honorDailyLog[R]:100,te=Math.max(0,V-k),pe={...e.user.honorDailyLog,[R]:te},D=go(pe,e.ui.debugDate);l.updateUser({honorDailyLog:pe,honor:D}),l.addToast(`${F.title} Failed | Streak Reset & -${k}% Honor`,"error")}m(k=>k.map(R=>R.id===G?{...R,status:Q,streak:ae,history:X,bestStreak:Math.max(R.bestStreak,ae),dailyProgress:Q==="completed"?R.dailyTarget:R.dailyProgress}:R)),xe(L,d)},_=G=>{m(Q=>Q.filter(F=>F.id!==G)),xe("delete",d),l.addToast("Protocol Deleted","info"),S===G&&N(null)},P=G=>{const Q={id:`cat_h_${Date.now()}`,title:G,isCollapsed:!1};v(F=>[...F,Q]),xe("click",d)},M=G=>{v(Q=>Q.filter(F=>F.id!==G)),m(Q=>Q.map(F=>F.categoryId===G?{...F,categoryId:void 0}:F)),xe("delete",d)},j=(G,Q)=>{v(F=>F.map(ae=>ae.id===G?{...ae,title:Q}:ae))},z=G=>{v(Q=>Q.map(F=>F.id===G?{...F,isCollapsed:!F.isCollapsed}:F))},B=(G,Q)=>{m(F=>F.map(ae=>ae.id===G?{...ae,categoryId:Q}:ae)),xe("click",d)},q=(G,Q)=>{m(G),v(Q),l.addToast("Habits Restored","success")};return n.jsx(J0.Provider,{value:{habitState:{habits:g,categories:y,activeHabitId:S},habitDispatch:{addHabit:E,updateHabit:w,processHabit:H,deleteHabit:_,setActiveHabit:C,addCategory:P,deleteCategory:M,renameCategory:j,toggleCategory:z,moveHabit:B,toggleSubtask:I,restoreData:q}},children:i})},Qt=()=>{const i=U.useContext(J0);if(i===void 0)throw new Error("useHabits must be used within a HabitProvider");return i},X2=()=>{var V,te,pe;const{state:i,dispatch:e}=ke(),{taskState:l,taskDispatch:o}=Kt(),{habitState:r,habitDispatch:d}=Qt(),{focusSession:u}=i.ui,h=U.useRef(null),g=U.useRef(null),m=U.useRef(null),y=U.useRef(null),[v,S]=U.useState(0),[N,C]=U.useState(!1),[E,w]=U.useState("none"),[I,H]=U.useState(!1),[_,P]=U.useState("none"),[M,j]=U.useState(""),z=U.useMemo(()=>u?u.itemType==="habit"?r.habits.find(J=>J.id===u.itemId):l.tasks.find(J=>J.id===u.itemId):null,[u,r.habits,l.tasks]),B=()=>{if(g.current){try{g.current.stop(),g.current.disconnect()}catch{}g.current=null}if(m.current){try{m.current.disconnect()}catch{}m.current=null}if(h.current&&h.current.state!=="closed"){try{h.current.close()}catch{}h.current=null}y.current&&(y.current.pause(),y.current.src="",y.current=null)};if(U.useEffect(()=>{u&&(S(u.durationMinutes*60),C(!1))},[u==null?void 0:u.itemId,u==null?void 0:u.startTime]),U.useEffect(()=>()=>B(),[]),U.useEffect(()=>{u&&!z&&(B(),e.endFocusSession())},[u,z,e]),U.useEffect(()=>{var D;if(B(),!(E==="none"||!u)){if(E==="custom"){if((D=i.ui.customAudio)!=null&&D.url){const J=new Audio(i.ui.customAudio.url);J.loop=!0,J.volume=.5,J.play().catch(se=>console.error("Playback failed",se)),y.current=J}else e.addToast("No Custom Track Loaded","error"),w("none");return}try{h.current=new(window.AudioContext||window.webkitAudioContext);const J=h.current;m.current=J.createGain(),m.current.connect(J.destination);let se=null;if(E==="brown"){const $=2*J.sampleRate;se=J.createBuffer(1,$,J.sampleRate);const de=se.getChannelData(0);let he=0;for(let ie=0;ie<$;ie++){const be=Math.random()*2-1;de[ie]=(he+.02*be)/1.02,he=de[ie],de[ie]*=3.5}m.current.gain.value=.15}else if(E==="rain"){const $=2*J.sampleRate;se=J.createBuffer(1,$,J.sampleRate);const de=se.getChannelData(0);let he=0,ie=0,be=0,Te=0,Oe=0,ct=0,nt=0;for(let pi=0;pi<$;pi++){const ge=Math.random()*2-1;he=.99886*he+ge*.0555179,ie=.99332*ie+ge*.0750759,be=.969*be+ge*.153852,Te=.8665*Te+ge*.3104856,Oe=.55*Oe+ge*.5329522,ct=-.7616*ct-ge*.016898,de[pi]=(he+ie+be+Te+Oe+ct+nt+ge*.5362)*.11,nt=ge*.115926}m.current.gain.value=.2}else if(E==="clock"){const $=J.sampleRate;se=J.createBuffer(1,$,J.sampleRate);const de=se.getChannelData(0);for(let he=0;he<$;he++){const ie=he/J.sampleRate;if(ie<.15){const be=(Math.random()*2-1)*Math.exp(-ie*80),Te=Math.sin(2*Math.PI*2800*ie)*Math.exp(-ie*100),Oe=Math.sin(2*Math.PI*180*ie)*Math.exp(-ie*60);de[he]=be*.4+Te*.3+Oe*.3}else de[he]=0}m.current.gain.value=.5}se&&(g.current=J.createBufferSource(),g.current.buffer=se,g.current.loop=!0,g.current.connect(m.current),g.current.start(0))}catch(J){console.error("Audio failed",J)}return()=>B()}},[E,!!u]),U.useEffect(()=>{let D;return!N&&v>0&&u?D=window.setInterval(()=>{S(J=>J-1)},1e3):v===0&&!N&&u&&(xe("level-up",!0),C(!0)),()=>clearInterval(D)},[N,v,!!u]),!u||!z)return null;const q=u.itemType==="habit",G=z.subtasks&&z.subtasks.length>0,Q=((V=z.subtasks)==null?void 0:V.filter(D=>D.isCompleted).length)||0,F=((te=z.subtasks)==null?void 0:te.length)||0,ae=D=>{const J=Math.floor(D/60),se=D%60;return`${J.toString().padStart(2,"0")}:${se.toString().padStart(2,"0")}`},X=(D=!1)=>{B();const se=u.durationMinutes*60-v,$=Math.floor(se/60);if($>=1){const de=Math.floor($*2);e.updateUser({currentXP:i.user.currentXP+de,dailyXP:i.user.dailyXP+de}),e.addToast(`Focused for ${$}m (+${de} XP)`,"success")}if(M.trim()){const de=M.split(`
`).filter(he=>he.trim().length>0);de.forEach(he=>{o.addTask({title:he.trim(),difficulty:_e.EASY,stat:W.INT,energyLevel:"low",isTimed:!1,subtasks:[],categoryId:void 0})}),e.addToast(`${de.length} Missions added from notes`,"info")}D&&(q?d.processHabit(z.id,"completed"):o.toggleTask(z.id)),e.endFocusSession()},L=D=>{xe("click",!0),q?d.toggleSubtask(z.id,D):o.toggleSubtask(z.id,D)},k=()=>{switch(E){case"brown":return"Brown";case"rain":return"Rain";case"clock":return"Tick";case"custom":return"Track";default:return"Mute"}},R=()=>{switch(E){case"brown":return n.jsx(_x,{size:18});case"rain":return n.jsx(Nx,{size:18});case"clock":return n.jsx(yt,{size:18});case"custom":return n.jsx(ar,{size:18});default:return n.jsx(kx,{size:18})}};return n.jsxs("div",{className:"fixed inset-0 z-[200] bg-black text-white flex flex-col animate-in fade-in duration-500",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0a0a0a] to-[#1a1a1a] pointer-events-none"}),n.jsx("div",{className:`absolute inset-0 bg-life-gold/5 blur-[100px] rounded-full transition-opacity duration-[3000ms] ${N?"opacity-10":"opacity-40 animate-pulse-slow"}`}),n.jsxs("div",{className:"relative z-10 flex justify-between items-center p-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-life-muted",children:"Focus Protocol Active"})]}),n.jsxs("button",{onClick:()=>X(!1),className:"p-2 rounded-full hover:bg-white/10 text-life-muted hover:text-life-hard transition-all flex items-center gap-1",children:[n.jsx("span",{className:"text-[10px] font-bold uppercase hidden sm:inline",children:"Abort"}),n.jsx(vN,{size:18})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 p-6 text-center",children:[n.jsxs("div",{className:"mb-4 text-[9px] font-black uppercase tracking-[0.2em] bg-white/5 px-3 py-1 rounded-full border border-white/10 text-life-gold",children:[q?"PROTOCOL":"MISSION"," TARGET"]}),n.jsx("h2",{className:"text-2xl md:text-4xl font-black tracking-tight mb-8 max-w-2xl leading-tight",children:z.title}),n.jsxs("div",{className:"relative mb-12",children:[n.jsxs("svg",{className:"w-64 h-64 md:w-80 md:h-80 transform -rotate-90",children:[n.jsx("circle",{cx:"50%",cy:"50%",r:"48%",className:"stroke-life-muted/10 fill-none",strokeWidth:"4"}),n.jsx("circle",{cx:"50%",cy:"50%",r:"48%",className:`fill-none transition-all duration-1000 ${N?"stroke-life-muted":"stroke-life-gold"}`,strokeWidth:"4",strokeDasharray:"301.59",strokeDashoffset:301.59*(1-v/(u.durationMinutes*60)),pathLength:"301.59",strokeLinecap:"round",style:{filter:N?"none":"drop-shadow(0 0 15px rgba(251,191,36,0.5))"}})]}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-6xl md:text-8xl font-mono font-bold tracking-tighter tabular-nums",children:ae(v)}),n.jsxs("button",{onClick:()=>C(!N),className:"mt-4 px-6 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 text-xs font-bold uppercase tracking-widest flex items-center gap-2 transition-all",children:[N?n.jsx(Tr,{size:12,fill:"currentColor"}):n.jsx(jN,{size:12,fill:"currentColor"})," ",N?"Resume":"Pause"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 w-full justify-center max-w-md relative",children:[n.jsxs("div",{className:"relative",children:[I&&n.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-life-black border border-life-gold/30 rounded-xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-2 z-50 flex flex-col",children:[{id:"none",label:"Mute",icon:n.jsx(kx,{size:14})},{id:"brown",label:"Brown Noise",icon:n.jsx(_x,{size:14})},{id:"rain",label:"Rain",icon:n.jsx(Nx,{size:14})},{id:"clock",label:"Tick",icon:n.jsx(yt,{size:14})},{id:"custom",label:"Custom",icon:n.jsx(ar,{size:14})}].map(D=>n.jsxs("button",{onClick:()=>{w(D.id),H(!1)},className:`flex items-center gap-3 px-4 py-3 text-xs font-bold uppercase tracking-wider hover:bg-life-gold/10 transition-colors ${E===D.id?"text-life-gold bg-life-gold/5":"text-life-muted"}`,children:[D.icon," ",D.label]},D.id))}),n.jsxs("button",{onClick:()=>H(!I),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${E!=="none"?"bg-life-gold/20 border-life-gold text-life-gold":"bg-white/5 border-white/10 text-life-muted hover:text-white"}`,children:[R(),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-[8px] font-bold uppercase",children:k()}),n.jsx(ji,{size:8})]})]})]}),n.jsxs("button",{onClick:()=>P(_==="notes"?"none":"notes"),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${_==="notes"?"bg-life-easy/20 border-life-easy text-life-easy":"bg-white/5 border-white/10 text-life-muted hover:text-white"}`,children:[n.jsx(wx,{size:18}),n.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Notes"})]}),G&&n.jsxs("button",{onClick:()=>P(_==="subtasks"?"none":"subtasks"),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${_==="subtasks"?"bg-life-gold/20 border-life-gold text-life-gold":"bg-white/5 border-white/10 text-life-muted hover:text-white"}`,children:[n.jsx(Tx,{size:18}),n.jsxs("div",{className:"flex flex-col items-center leading-none",children:[n.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Steps"}),n.jsxs("span",{className:"text-[7px] opacity-60",children:[Q,"/",F]})]})]}),n.jsxs("button",{onClick:()=>X(!0),className:"p-3 rounded-xl border border-life-easy/50 bg-life-easy/10 text-life-easy hover:bg-life-easy hover:text-black transition-all flex flex-col items-center gap-1 w-20 shrink-0 group",children:[n.jsx(Gi,{size:18,className:"group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Done"})]})]}),n.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-[#111] border-t border-white/10 p-6 rounded-t-3xl transition-transform duration-300 ease-out z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] h-[40vh] flex flex-col ${_==="notes"?"translate-y-0":"translate-y-full"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[n.jsxs("h3",{className:"text-xs font-bold uppercase text-life-muted tracking-widest flex items-center gap-2",children:[n.jsx(wx,{size:14})," Distraction Pad"]}),n.jsx("button",{onClick:()=>P("none"),className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:16})})]}),n.jsx("textarea",{value:M,onChange:D=>j(D.target.value),placeholder:"Dump thoughts here...",className:"w-full h-full bg-black/50 rounded-xl border border-white/10 p-4 text-sm text-life-text focus:outline-none focus:border-life-gold resize-none font-mono leading-relaxed"})]}),n.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-[#111] border-t border-white/10 p-6 rounded-t-3xl transition-transform duration-300 ease-out z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] h-[50vh] flex flex-col text-left ${_==="subtasks"?"translate-y-0":"translate-y-full"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[n.jsxs("h3",{className:"text-xs font-bold uppercase text-life-gold tracking-widest flex items-center gap-2",children:[n.jsx(Tx,{size:14})," Tactical Objectives"]}),n.jsx("button",{onClick:()=>P("none"),className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:16})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:(pe=z.subtasks)==null?void 0:pe.map(D=>n.jsxs("div",{onClick:()=>L(D.id),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${D.isCompleted?"bg-life-gold/10 border-life-gold/30 opacity-60":"bg-white/5 border-white/10 hover:bg-white/10"}`,children:[n.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors shrink-0 ${D.isCompleted?"bg-life-gold border-life-gold text-black":"border-life-muted text-transparent"}`,children:n.jsx(Be,{size:12,strokeWidth:4})}),n.jsx("span",{className:`text-sm ${D.isCompleted?"line-through text-life-gold":"text-life-text"}`,children:D.title})]},D.id))})]})]})]})},K2=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(0),[o,r]=U.useState(""),[d,u]=U.useState(!1),[h,g]=U.useState(""),[m,y]=U.useState("INITIALIZING NEURAL LINK..."),[v,S]=U.useState(!0);U.useEffect(()=>{g(""),S(!0);let E=0;const w=setInterval(()=>{g(m.slice(0,E+1)),E++,E>=m.length&&(clearInterval(w),S(!1))},30);return()=>clearInterval(w)},[m]);const N=()=>{xe("click",!0),e===0?(y("IDENTITY VERIFICATION REQUIRED."),l(1)):e===1&&o&&(y("SYNCHRONIZATION COMPLETE. WELCOME."),l(2))},C=()=>{o&&(u(!0),xe("level-up",!0),setTimeout(()=>{i.completeOnboarding(o,"Initiate",W.DIS)},1e3))};return d?n.jsx("div",{className:"fixed inset-0 z-[999] bg-black flex items-center justify-center animate-out fade-out duration-1000",children:n.jsx("div",{className:"text-life-gold text-sm font-mono animate-pulse",children:"SYSTEM ONLINE"})}):n.jsxs("div",{className:"fixed inset-0 z-[999] bg-[#050505] flex flex-col items-center justify-center p-6 font-mono overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:"linear-gradient(0deg, transparent 24%, #222 25%, #222 26%, transparent 27%, transparent 74%, #222 75%, #222 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, #222 25%, #222 26%, transparent 27%, transparent 74%, #222 75%, #222 76%, transparent 77%, transparent)",backgroundSize:"50px 50px"}}),n.jsxs("div",{className:"w-full max-w-md relative z-10 flex flex-col h-full justify-center",children:[n.jsxs("div",{className:"mb-8 min-h-[60px] border-l-2 border-life-gold pl-4 py-2",children:[n.jsxs("div",{className:"text-xs text-life-gold/50 mb-1 flex items-center gap-2",children:[n.jsx(Yt,{size:12})," PROTOCOL_INIT_V1.0"]}),n.jsxs("h1",{className:"text-lg md:text-xl text-life-gold font-bold leading-tight",children:[h,n.jsx("span",{className:"animate-pulse",children:"_"})]})]}),e===0&&n.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-8 duration-700",children:[n.jsxs("div",{className:"w-24 h-24 bg-life-gold/10 rounded-full border border-life-gold/30 flex items-center justify-center mx-auto mb-8 relative",children:[n.jsx(Ue,{size:40,className:"text-life-gold animate-pulse-slow"}),n.jsx("div",{className:"absolute inset-0 border border-life-gold rounded-full animate-[spin_10s_linear_infinite] opacity-30 border-t-transparent border-l-transparent"})]}),n.jsx("p",{className:"text-center text-life-muted text-xs mb-12 max-w-xs mx-auto leading-relaxed",children:"Welcome to LifeOS. This interface will augment your daily operations, turning chaos into order and effort into progression."}),n.jsx("button",{onClick:N,disabled:v,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all hover:scale-[1.02]",children:"Initialize System"})]}),e===1&&n.jsxs("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Codename"}),n.jsx("input",{type:"text",value:o,onChange:E=>r(E.target.value),placeholder:"Enter Name...",autoFocus:!0,className:"w-full bg-transparent border-b-2 border-life-muted/30 py-2 text-2xl font-bold text-white focus:outline-none focus:border-life-gold transition-colors text-center"})]}),n.jsx("button",{onClick:N,disabled:!o,className:"w-full py-4 border border-life-gold text-life-gold hover:bg-life-gold hover:text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Identity"})]}),e===2&&n.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-700 text-center",children:[n.jsxs("div",{className:"mb-8 border border-life-gold/30 bg-life-gold/5 p-6 rounded-lg relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-life-gold animate-[loading_2s_ease-in-out_infinite]"}),n.jsx("h2",{className:"text-2xl font-black text-white uppercase mb-1",children:o}),n.jsx("p",{className:"text-life-gold font-mono text-sm uppercase tracking-widest",children:"READY"}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-life-gold/20 flex justify-center gap-4 text-[10px] text-life-muted uppercase font-bold",children:[n.jsx("span",{children:"Lvl 1"}),n.jsx("span",{children:"Status: ONLINE"})]})]}),n.jsxs("button",{onClick:C,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all hover:scale-[1.02] flex items-center justify-center gap-2",children:["Enter LifeOS ",n.jsx(ht,{size:18})]})]})]}),n.jsx("div",{className:"absolute bottom-8 flex gap-2",children:[0,1,2].map(E=>n.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors ${E===e?"bg-life-gold":"bg-life-muted/20"}`},E))}),n.jsx("style",{children:`
                @keyframes loading {
                    0% { transform: translateX(-100%); }
                    50% { transform: translateX(0); }
                    100% { transform: translateX(100%); }
                }
            `})]})},lu="LIFE_OS_RAIDS_DATA",X0=U.createContext(void 0),Q2=({children:i})=>{const{state:e,dispatch:l}=ke(),{skillDispatch:o}=vt(),r=e.user.preferences.soundEnabled,d=()=>{try{const P=localStorage.getItem(lu);if(P)return JSON.parse(P)}catch(P){console.warn("Failed to load raids:",P)}return[]},[u,h]=U.useState(d);U.useEffect(()=>{const P=setTimeout(()=>{(u.length>0||localStorage.getItem(lu))&&localStorage.setItem(lu,JSON.stringify(u))},500);return()=>clearTimeout(P)},[u]);const g=P=>{const M={id:`rd_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...P,status:"active",progress:0,isCampaign:P.isCampaign||!1};h(j=>[M,...j]),xe("click",r),l.addToast("Operation Initialized","success")},m=(P,M)=>{h(j=>j.map(z=>z.id===P?{...z,...M}:z)),xe("click",r)},y=P=>{h(M=>M.filter(j=>j.id!==P)),xe("delete",r),l.addToast("Operation Deleted","info")},v=P=>{h(M=>M.map(j=>j.id===P?{...j,status:"archived"}:j)),l.addToast("Operation Archived","info")},S=P=>{h(M=>M.map(j=>j.id===P?{...j,status:"active"}:j)),l.addToast("Operation Restored","success")},N=(P,M)=>{h(j=>j.map(z=>{if(z.id!==P)return z;const B=z.steps.map(q=>q.id===M?{...q,isArchived:!0}:q);return{...z,steps:B}}))},C=(P,M)=>{h(j=>j.map(z=>{if(z.id!==P)return z;const B=z.steps.filter(q=>q.id!==M);return{...z,steps:B}})),l.setModal("none")},E=(P,M,j)=>{h(z=>z.map(B=>{if(B.id!==P)return B;const q=B.steps.map(G=>G.id===M?{...G,...j}:G);return{...B,steps:q}}))},w=(P,M)=>{h(j=>j.map(z=>{if(z.id!==P)return z;const B=new Map(M.map(G=>[G.id,G])),q=z.steps.map(G=>{if(B.has(G.id)){const Q=B.get(G.id);return{...G,...Q,isCompleted:Q.isCompleted!==void 0?Q.isCompleted:G.isCompleted}}return G});return{...z,steps:q}})),l.addToast("Raid Steps Updated","success")},I=(P,M,j)=>{h(z=>z.map(B=>{if(B.id!==P)return B;const q=B.steps.map(G=>{var F;if(G.id!==M)return G;const Q=((F=G.subtasks)==null?void 0:F.map(ae=>ae.id===j?{...ae,isCompleted:!ae.isCompleted}:ae))||[];return{...G,subtasks:Q}});return{...B,steps:q}})),xe("click",r)},H=(P,M)=>{const j=u.find(J=>J.id===P);if(!j)return;const z=j.steps.findIndex(J=>J.id===M);if(z===-1)return;const B=j.steps[z],q=!B.isCompleted,G=B.difficulty||j.difficulty,Q=B.stat||(j.stats&&j.stats.length>0?j.stats[0]:W.STR),F=B.skillId||j.skillId,ae=rl(G,e.user.currentMode),X=ae.xp,L=ae.gold,k=G===_e.HARD?2:G===_e.NORMAL?1:.5,R=[...j.steps];R[z]={...B,isCompleted:q};const V=R.filter(J=>J.isCompleted).length,te=Math.round(V/R.length*100),pe=te===100;let D=null;q?(l.updateUser({currentXP:e.user.currentXP+X,dailyXP:e.user.dailyXP+X,gold:e.user.gold+L,stats:{...e.user.stats,[Q]:e.user.stats[Q]+k}}),F&&o.addSkillXP(F,Math.ceil(X*.5)),pe?(xe("crit",r),D={title:`Operation Conquered: ${j.title}`,xp:X*5,gold:L*5,multiplier:5,message:"Sector Secured. Tactical Superiority Achieved."},l.updateUser({currentXP:e.user.currentXP+X*5,gold:e.user.gold+L*5,metrics:{...e.user.metrics,totalRaidsWon:e.user.metrics.totalRaidsWon+1}})):(xe("success",r),l.addToast(`Step Secured | +${X} XP`,"success"))):(l.updateUser({currentXP:Math.max(0,e.user.currentXP-X),dailyXP:Math.max(0,e.user.dailyXP-X),gold:Math.max(0,e.user.gold-L),stats:{...e.user.stats,[Q]:Math.max(0,e.user.stats[Q]-k)}}),j.status==="completed"?(l.updateUser({currentXP:Math.max(0,e.user.currentXP-X*5),gold:Math.max(0,e.user.gold-L*5),metrics:{...e.user.metrics,totalRaidsWon:Math.max(0,e.user.metrics.totalRaidsWon-1)}}),l.addToast("Step Revoked | Completion Bonus Removed","info")):l.addToast("Step Revoked","info"),xe("delete",r)),h(J=>J.map(se=>{if(se.id!==P)return se;const $=[...se.steps];return $[z]={...B,isCompleted:q},q&&z+1<$.length&&($[z+1]={...$[z+1],isLocked:!1}),{...se,steps:$,progress:te,status:pe?"completed":se.status==="completed"?"active":se.status}})),D&&setTimeout(()=>l.setModal("loot",D),300)},_=P=>{h(P),l.addToast("Raids Restored","success")};return n.jsx(X0.Provider,{value:{raidState:{raids:u},raidDispatch:{addRaid:g,updateRaid:m,deleteRaid:y,archiveRaid:v,restoreRaid:S,toggleRaidStep:H,updateRaidStep:E,mergeRaidSteps:w,toggleRaidStepSubtask:I,archiveRaidStep:N,deleteRaidStep:C,restoreData:_}},children:i})},Ii=()=>{const i=U.useContext(X0);if(i===void 0)throw new Error("useRaids must be used within a RaidProvider");return i},W2=()=>{const{state:i,dispatch:e}=ke(),{taskState:l,taskDispatch:o}=Kt(),{habitState:r,habitDispatch:d}=Qt(),{raidState:u,raidDispatch:h}=Ii(),{deviceNotificationsEnabled:g}=i.user.preferences,m=U.useRef("");return U.useEffect(()=>{Hi.isNativePlatform()&&(w0(),rs.addListener("localNotificationActionPerformed",y=>{const v=y.actionId,S=y.notification.extra;if(v==="COMPLETE"&&S){const{itemId:N,type:C,parentId:E}=S;C==="task"?(o.toggleTask(N),e.addToast("Mission Completed via Uplink","success")):C==="habit"?(d.processHabit(N,"completed"),e.addToast("Protocol Executed via Uplink","success")):C==="raid_step"&&E&&(h.toggleRaidStep(E,N),e.addToast("Operation Step Secured","success")),xe("success",!0)}v==="SNOOZE"&&e.addToast("Alert Snoozed (Simulation)","info")}))},[]),U.useEffect(()=>{if(!g||!Hi.isNativePlatform())return;const v=setTimeout(()=>{const S=i.ui.debugDate?new Date(i.ui.debugDate).toISOString():new Date().toISOString(),N=r.habits.filter(M=>M.status==="pending"&&ol(M,S)),C=l.tasks.filter(M=>!M.isCompleted&&!M.isArchived&&(!M.scheduledTime||new Date(M.scheduledTime)<=new Date(new Date().getTime()+864e5)));let E=0;u.raids.forEach(M=>{M.status==="active"&&(E+=M.steps.filter(j=>!j.isCompleted&&!j.isLocked).length)});const w=N.length+C.length+E,I=Math.floor(i.user.dailyXP/i.user.dailyTarget*100),H=`LifeOS Active: ${w} Pending`,_=` ${C.length} Missions     ${N.length} Protocols     ${I}% XP`,P=H+_;m.current!==P&&(H1(H,_),m.current=P)},1e3);return()=>clearTimeout(v)},[l.tasks,r.habits,u.raids,i.user.dailyXP,g]),U.useEffect(()=>{if(!g)return;const v=setInterval(()=>{const S=new Date().getTime(),N=300*1e3;l.tasks.forEach(C=>{if(!(C.isCompleted||C.isArchived||!C.scheduledTime)&&C.reminders){const E=new Date(C.scheduledTime).getTime();let w=!1;const I=C.reminders.map(H=>{if(H.isSent)return H;const _=E-H.minutesBefore*6e4;return S>=_&&S<_+N?(nr(parseInt(C.id.replace(/\D/g,"").slice(-8))||Date.now(),`Mission Critical: ${C.title}`,`Time: ${new Date(C.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,{itemId:C.id,type:"task"}),w=!0,{...H,isSent:!0}):H});w&&o.updateTask(C.id,{reminders:I})}}),r.habits.forEach(C=>{if(C.status==="completed"||!C.scheduledTime||!C.reminders)return;const[E,w]=C.scheduledTime.split(":").map(Number),I=new Date;I.setHours(E,w,0,0);const H=I.getTime();let _=!1;const P=C.reminders.map(M=>{if(M.isSent)return M;const j=H-M.minutesBefore*6e4;return S>=j&&S<j+N?(nr(parseInt(C.id.replace(/\D/g,"").slice(-8))||Date.now(),`Protocol: ${C.title}`,`Time: ${C.scheduledTime}`,{itemId:C.id,type:"habit"}),_=!0,{...M,isSent:!0}):M});_&&d.updateHabit(C.id,{reminders:P})})},15e3);return()=>clearInterval(v)},[l.tasks,r.habits,g]),null},ou="LIFE_OS_CAMPAIGN_DATA_V2",Ba={id:"campaign_root",title:"",startDate:null,isFrozen:!1,currentWeek:0,currentDay:0,totalWeeks:12,isActive:!1},K0=U.createContext(void 0),Z2=({children:i})=>{const{state:e,dispatch:l}=ke(),o=e.user.preferences.soundEnabled,r=()=>{try{const N=localStorage.getItem(ou);if(N)return JSON.parse(N)}catch(N){console.warn("Failed to load campaign persistence:",N)}return Ba},[d,u]=U.useState(r);U.useEffect(()=>{if(!d.startDate||!d.isActive)return;const N=()=>{if(d.isFrozen)return;const E=e.ui.debugDate,w=E?new Date(E):new Date,I=new Date(d.startDate),H=w.getTime()-I.getTime(),_=Math.floor(H/(1e3*60*60*24));if(_<0)u(P=>({...P,currentWeek:0,currentDay:0}));else{const P=Math.floor(_/7)+1,M=_%7+1,j=Math.min(P,13);u(z=>z.currentWeek!==j||z.currentDay!==M?{...z,currentWeek:j,currentDay:M}:z)}};N();const C=setInterval(N,6e4);return()=>clearInterval(C)},[d.startDate,d.isActive,d.isFrozen,e.ui.debugDate]),U.useEffect(()=>{const N=setTimeout(()=>{(d.isActive||localStorage.getItem(ou))&&localStorage.setItem(ou,JSON.stringify(d))},500);return()=>clearTimeout(N)},[d]);const h=(N,C)=>{const E={...Ba,id:`cmp_${Date.now()}`,title:N,startDate:C,isActive:!0};xe("success",o),u(E),l.addToast("Operation Tempo Initiated","success")},g=()=>{const N=!d.isFrozen;u(C=>({...C,isFrozen:N})),xe("click",o),l.addToast(N?"Timeline Frozen ":"Timeline Resumed ","info")},m=()=>{u(Ba),xe("delete",o),l.addToast("Campaign Aborted","info")},y=()=>{confirm(` REAP THE HARVEST?
This will conclude the current 12-week cycle and archive the results. Are you ready for the reset?`)&&(u(Ba),xe("level-up",o),l.addToast("Harvest Complete. Cycle Reset.","success"))},v=N=>{u(C=>({...C,startDate:N})),xe("click",o),l.addToast("Timeline Shifted","info")},S=N=>{u(N),l.addToast("Campaign Restored","success")};return n.jsx(K0.Provider,{value:{campaignState:{campaign:d},campaignDispatch:{initCampaign:h,toggleFreeze:g,resetCampaign:m,completeCampaign:y,updateStartDate:v,restoreData:S}},children:i})},ul=()=>{const i=U.useContext(K0);if(i===void 0)throw new Error("useCampaign must be used within a CampaignProvider");return i},Dx=i=>new Date(i).toISOString().replace(/-|:|\.\d{3}/g,""),Er=(i,e="",l,o=60)=>{if(!l){alert("    .");return}const r=new Date(l),d=new Date(r.getTime()+o*6e4),u=Dx(r.toISOString()),h=Dx(d.toISOString()),g=encodeURIComponent(`${e}

Generated by LifeOS`),m=encodeURIComponent(`[LifeOS] ${i}`),y=encodeURIComponent("LifeOS HQ"),v=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${m}&dates=${u}/${h}&details=${g}&location=${y}`;window.open(v,"_blank")},eT=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(Ue,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(Ue,{size:e})}},Ws=({task:i,onToggle:e,onDelete:l})=>{var F,ae;const{dispatch:o,state:r}=ke(),{skillState:d}=vt(),{taskState:u,taskDispatch:h}=Kt(),{campaignState:g}=ul(),m=i.skillId?d.skills.find(X=>X.id===i.skillId):null,y=tt[i.stat],v=ri[i.difficulty].split(" ")[0],S=r.user.preferences.showCalendarSync??!0,N=rl(i.difficulty,r.user.currentMode),C=i.isCampaign?Math.ceil(N.xp*1.1):N.xp,E=i.isCampaign?G2(g.campaign.startDate,i.deadline||i.scheduledTime):null,[w,I]=U.useState(!1),H=((F=i.subtasks)==null?void 0:F.filter(X=>X.isCompleted).length)||0,_=((ae=i.subtasks)==null?void 0:ae.length)||0,P=_>0?H/_*100:0,M=X=>`${X}m`,j=X=>{X.stopPropagation(),o.startFocusSession(i.id,i.durationMinutes||25)},z=X=>{X.stopPropagation(),o.setModal("itemDetails",{itemId:i.id,type:"task"})},B=X=>{X.stopPropagation(),l(i.id)},q=X=>{const L=X.target.value;h.moveTask(i.id,L||void 0)},G=X=>{X.stopPropagation(),Er(i.title,i.description,i.scheduledTime||i.deadline,i.durationMinutes||60)},Q=i.reminders?i.reminders.length:0;return n.jsxs("div",{onClick:()=>I(!w),className:`
        relative group flex flex-col p-4 mb-3 rounded-xl border border-white/5 bg-life-black/40 backdrop-blur-sm shadow-sm cursor-pointer transition-all duration-300 overflow-hidden
        ${i.isCompleted?"opacity-50 grayscale border-gray-800":"hover:border-white/10 hover:bg-life-black/60 hover:shadow-md"}
        ${w?"ring-1 ring-life-gold/20 bg-life-black/80":""}
      `,children:[n.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${v.replace("border-","bg-")}`}),_>0&&!i.isCompleted&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-life-muted/10",children:n.jsx("div",{className:"h-full bg-life-gold transition-all duration-500",style:{width:`${P}%`}})}),n.jsxs("div",{className:"flex items-center w-full",children:[n.jsx("div",{className:"mr-4 relative",children:n.jsx("div",{onClick:X=>{X.stopPropagation(),e(i.id)},className:`
                w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 hover:scale-110
                ${i.isCompleted?"bg-life-easy border-life-easy text-life-black":"border-life-muted group-hover:border-life-silver bg-transparent"}
                `,children:n.jsx(Be,{size:16,className:`transition-transform duration-300 ${i.isCompleted?"scale-100":"scale-0"}`,strokeWidth:3})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[i.isCampaign&&n.jsxs("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded border border-indigo-500/50 bg-indigo-500/10 text-indigo-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_8px_rgba(99,102,241,0.2)]",children:[n.jsx(Di,{size:10}),E?`G12  ${E}`:"G12"]}),i.isCalendarEvent&&!i.isCampaign&&n.jsxs("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded border border-blue-500/50 bg-blue-500/10 text-blue-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_8px_rgba(59,130,246,0.2)]",children:[n.jsx(Jt,{size:10})," C30"]}),n.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border flex items-center gap-1 uppercase tracking-wider ${i.isCompleted?"border-gray-600 text-gray-500":""}`,style:{borderColor:i.isCompleted?void 0:`${y}40`,color:i.isCompleted?void 0:y,backgroundColor:i.isCompleted?void 0:`${y}10`},children:[n.jsx(eT,{stat:i.stat,size:10}),i.stat]}),!i.isCompleted&&n.jsxs("span",{className:"text-[9px] font-mono font-bold text-life-muted bg-life-black px-1.5 py-0.5 rounded border border-life-muted/20",children:["+",C," XP"]}),m&&n.jsxs("span",{className:"text-[9px] text-life-gold border border-life-gold/30 bg-life-gold/10 px-1.5 py-0.5 rounded flex items-center gap-1 uppercase tracking-wider",children:[n.jsx(di,{size:10})," ",m.title]}),i.isTimed&&!w&&n.jsxs("span",{className:"text-[10px] flex items-center gap-1 text-life-muted",children:[n.jsx(yt,{size:10})," ",M(i.durationMinutes||0)]}),i.scheduledTime&&!w&&n.jsxs("span",{className:"text-[9px] flex items-center gap-1 text-life-gold bg-life-gold/10 px-1.5 py-0.5 rounded border border-life-gold/20",children:[new Date(i.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Q>0&&n.jsx(an,{size:8,className:"fill-current"})]})]}),n.jsx("h3",{className:`text-sm font-medium truncate pr-2 ${i.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:i.title})]})]}),w&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-life-muted/10 animate-in slide-in-from-top-2",children:[n.jsx("div",{className:"flex justify-end mb-3",children:n.jsxs("div",{className:"flex items-center gap-1 bg-life-black/50 rounded-lg p-0.5 border border-life-muted/10",children:[!i.isCompleted&&!i.isArchived&&(i.scheduledTime||i.deadline)&&S&&n.jsx("button",{onClick:G,className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:bg-blue-500/10 rounded transition-all",title:"Add to Google Calendar",children:n.jsx(vr,{size:12})}),!i.isCompleted&&!i.isArchived&&n.jsx("button",{onClick:j,className:"w-6 h-6 flex items-center justify-center text-life-gold hover:bg-life-gold/10 rounded transition-all",title:"Enter Focus Citadel",children:n.jsx(Tr,{size:12,fill:"currentColor"})}),!i.isCompleted&&!i.isArchived&&n.jsxs("div",{className:"relative group/move w-6 h-6 flex items-center justify-center",onClick:X=>X.stopPropagation(),children:[n.jsx("button",{className:"text-life-muted hover:text-life-gold transition-colors",children:n.jsx(Pu,{size:12})}),n.jsxs("select",{onChange:q,value:i.categoryId||"",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",title:"Move to Section",children:[n.jsx("option",{value:"",children:"(Uncategorized)"}),u.categories.map(X=>n.jsx("option",{value:X.id,children:X.title},X.id))]})]}),n.jsx("button",{onClick:z,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/10 rounded transition-colors",title:"Mission Details",children:n.jsx(vo,{size:12})}),n.jsx("button",{onClick:B,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded transition-colors",title:"Delete Mission",children:n.jsx(Rt,{size:12})})]})}),i.description&&n.jsxs("div",{className:"flex gap-2 text-xs text-life-muted mb-3",children:[n.jsx(wr,{size:14,className:"shrink-0 mt-0.5"}),n.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:i.description})]}),_>0&&n.jsx("div",{className:"mb-3 space-y-1 pl-1",children:i.subtasks.map(X=>n.jsxs("div",{onClick:L=>{L.stopPropagation(),h.toggleSubtask(i.id,X.id)},className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-life-muted/10 p-1 rounded transition-colors group/sub",children:[n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${X.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover/sub:border-life-gold"}`,children:n.jsx(Be,{size:12,strokeWidth:3})}),n.jsx("span",{className:X.isCompleted?"text-life-muted line-through":"text-life-text",children:X.title})]},X.id))}),n.jsx("div",{className:"flex justify-between items-end mt-2",children:n.jsx("div",{className:"flex gap-2 text-[10px] text-life-muted uppercase tracking-wider items-center",children:i.scheduledTime?n.jsxs(n.Fragment,{children:[n.jsx(an,{size:12})," ",Q," Alerts | ",new Date(i.scheduledTime).toLocaleString()]}):i.deadline&&n.jsxs(n.Fragment,{children:[n.jsx(Jt,{size:12})," Due: ",new Date(i.deadline).toLocaleString()]})})})]})]})},tT=({raidOperations:i,expandedNotes:e,expandedSubtasks:l,toggleNotes:o,toggleSubtasksView:r,raidDispatch:d,openRaidStepDetails:u})=>n.jsxs("div",{className:"mb-6 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 px-1 text-life-hard animate-pulse-slow",children:[n.jsx(cs,{size:14}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Operations (Tip of the Spear)"})]}),i.map(({raid:h,step:g})=>{var N,C;const m=e.has(g.id),y=l.has(g.id),v=((N=g.subtasks)==null?void 0:N.length)||0,S=((C=g.subtasks)==null?void 0:C.filter(E=>E.isCompleted).length)||0;return n.jsxs("div",{onClick:()=>r(g.id),className:`bg-life-paper border-l-4 rounded-r-xl shadow-lg relative overflow-hidden group transition-all duration-300 cursor-pointer ${ri[h.difficulty].split(" ")[0]} hover:bg-white/5`,children:[n.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"8px 8px"}}),n.jsxs("div",{className:"p-3",children:[n.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[n.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[n.jsx("div",{className:"flex items-center gap-2 mb-1",children:n.jsxs("span",{className:"text-[9px] bg-life-black px-1.5 py-0.5 rounded text-life-muted font-bold uppercase tracking-wider border border-life-muted/20",children:["OP: ",h.title]})}),n.jsx("h3",{className:"text-sm font-bold text-life-text flex items-center gap-2",children:g.title})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:E=>{E.stopPropagation(),o(g.id)},className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${m?"text-life-gold bg-life-gold/10":"text-life-muted hover:text-white hover:bg-life-muted/10"}`,children:n.jsx(dl,{size:16})}),n.jsx("button",{onClick:E=>{E.stopPropagation(),d.toggleRaidStep(h.id,g.id)},className:"w-8 h-8 rounded-lg bg-life-black border border-life-muted/30 flex items-center justify-center text-life-muted hover:text-life-gold hover:border-life-gold transition-all relative z-20",children:n.jsx(Ri,{size:16})})]})]}),n.jsxs("div",{className:"mt-2 flex items-center gap-3 text-[10px] text-life-muted/60",children:[n.jsx("span",{className:"uppercase font-bold text-life-hard",children:h.difficulty}),n.jsx("span",{children:""}),n.jsxs("span",{children:["Step ",h.steps.findIndex(E=>E.id===g.id)+1," of ",h.steps.length]}),v>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsxs("span",{className:`flex items-center gap-1 ${y?"text-life-gold":""}`,children:[n.jsx(Ri,{size:10})," ",S,"/",v," Subtasks"]})]})]}),m&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-life-muted/10 animate-in slide-in-from-top-2 cursor-default",onClick:E=>E.stopPropagation(),children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(wr,{size:12,className:"text-life-gold mt-0.5 shrink-0"}),n.jsx("div",{className:"text-xs text-life-text leading-relaxed whitespace-pre-wrap flex-1",children:g.notes||n.jsx("span",{className:"text-life-muted italic",children:"No intel provided."})})]}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsxs("button",{onClick:E=>{E.stopPropagation(),u(g.id,h.id)},className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-gold bg-life-black px-2 py-1 rounded border border-life-muted/20",children:[n.jsx(vo,{size:10})," Full View"]})})]}),y&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-life-muted/10 animate-in slide-in-from-top-2 cursor-default",onClick:E=>E.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h4",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-1",children:[n.jsx(Be,{size:10})," Tactical Checklist"]}),n.jsxs("button",{onClick:E=>{E.stopPropagation(),u(g.id,h.id)},className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-white",children:[n.jsx(a2,{size:10})," Edit"]})]}),v>0?n.jsx("div",{className:"space-y-1 pl-1 mb-2",children:g.subtasks.map(E=>n.jsxs("div",{onClick:w=>{w.stopPropagation(),d.toggleRaidStepSubtask(h.id,g.id,E.id)},className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-all border ${E.isCompleted?"bg-life-black border-life-muted/10 opacity-60":"bg-life-paper/50 border-life-muted/20 hover:border-life-gold/30 hover:bg-life-muted/10"}`,children:[n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all shrink-0 ${E.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover:border-life-gold"}`,children:n.jsx(Be,{size:12,strokeWidth:4,className:E.isCompleted?"scale-100":"scale-0"})}),n.jsx("span",{className:`text-xs font-medium leading-tight ${E.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:E.title})]},E.id))}):n.jsx("div",{className:"text-[10px] text-life-muted italic text-center py-2 border border-dashed border-life-muted/10 rounded mb-2",children:"No subtasks defined."})]})]})]},g.id)})]}),iT=({onClose:i})=>n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-4 mb-6 animate-in fade-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-2 bg-red-900/20 rounded-lg text-red-500",children:n.jsx(cn,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-wider",children:"Sentencing Guidelines"}),n.jsx("p",{className:"text-[10px] text-life-muted",children:"Economy of Pain & Discipline"})]})]}),n.jsx("button",{onClick:i,className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:16})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-white/5 pb-3",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-blue-400 font-black text-xs",children:"XP (Experience)"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Growth Metric"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[n.jsx("span",{children:"Easy Mission Reward"}),n.jsx("span",{className:"text-life-easy",children:"+100 XP"})]}),n.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[n.jsx("span",{children:"Hard Mission Reward"}),n.jsx("span",{className:"text-life-gold",children:"+500 XP"})]}),n.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[n.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Recommended Penalties:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[n.jsx("span",{className:"text-zinc-400",children:"Minor Slip"})," ",n.jsx("span",{className:"text-red-400",children:"-50 XP"}),n.jsx("span",{className:"text-zinc-400",children:"Bad Habit"})," ",n.jsx("span",{className:"text-red-400",children:"-200 XP"}),n.jsx("span",{className:"text-zinc-400",children:"Major Failure"})," ",n.jsx("span",{className:"text-red-400",children:"-1000 XP"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-white/5 pb-3",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-life-gold font-black text-xs",children:"Gold (Currency)"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Reward Power"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[n.jsx("span",{children:"1 Hour of Work"}),n.jsx("span",{className:"text-life-gold",children:"~50-100 G"})]}),n.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[n.jsx("span",{children:"Day of Perfection"}),n.jsx("span",{className:"text-life-gold",children:"~500 G"})]}),n.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[n.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Fines:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[n.jsx("span",{className:"text-zinc-400",children:"Wasted Time"})," ",n.jsx("span",{className:"text-red-400",children:"-10 G / min"}),n.jsx("span",{className:"text-zinc-400",children:"Impulse Buy"})," ",n.jsx("span",{className:"text-red-400",children:"-100 G"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-white/5 pb-3",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-purple-400 font-black text-xs",children:"Attributes"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Core Stats"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Stats are ",n.jsx("span",{className:"text-white font-bold",children:"extremely hard"})," to earn. You only get ",n.jsx("span",{className:"text-purple-400",children:"+1"})," per completed mission."]}),n.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[n.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Severe Punishment:"}),n.jsxs("div",{className:"text-[9px] text-zinc-400",children:["Losing ",n.jsx("span",{className:"text-red-400",children:"-1 Stat"})," is equivalent to erasing a completed mission from your history. Use sparingly for character flaws (e.g., Anger = -1 EMT)."]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-indigo-400 font-black text-xs",children:"Honor"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Integrity Score"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Your daily score starts at ",n.jsx("span",{className:"text-indigo-400",children:"100%"}),"."]}),n.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[n.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Impact:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[n.jsx("span",{className:"text-zinc-400",children:"Disappointment"})," ",n.jsx("span",{className:"text-red-400",children:"-5%"}),n.jsx("span",{className:"text-zinc-400",children:"Broken Promise"})," ",n.jsx("span",{className:"text-red-400",children:"-20%"}),n.jsx("span",{className:"text-zinc-400",children:"Betrayal"})," ",n.jsx("span",{className:"text-red-400",children:"-50%"})]})]})]})]})]})]}),nT=()=>{const{taskState:i,taskDispatch:e}=Kt(),{laws:l}=i,[o,r]=U.useState(""),[d,u]=U.useState("honor"),[h,g]=U.useState(50),[m,y]=U.useState(W.DIS),[v,S]=U.useState(!1),[N,C]=U.useState(!1),[E,w]=U.useState(null),[I,H]=U.useState(""),[_,P]=U.useState("honor"),[M,j]=U.useState(0),[z,B]=U.useState(W.DIS),q=F=>{F.preventDefault(),o.trim()&&(e.addLaw(o,d,h,d==="stat"?m:void 0),r(""),g(50),S(!1))},G=F=>{w(F.id),H(F.title),P(F.penaltyType),j(F.penaltyValue),B(F.statTarget||W.DIS)},Q=()=>{!E||!I.trim()||(e.updateLaw(E,{title:I,penaltyType:_,penaltyValue:M,statTarget:_==="stat"?z:void 0}),w(null))};return n.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-500 pb-20",children:[n.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 p-4 rounded-xl mb-6 text-center relative",children:[n.jsx(rr,{className:"w-8 h-8 text-red-500 mx-auto mb-2 animate-pulse"}),n.jsx("h2",{className:"text-lg font-black text-red-500 uppercase tracking-widest mb-1",children:"The Codex"}),n.jsx("p",{className:"text-[10px] text-red-400/70 font-mono uppercase tracking-wider",children:'"He who cannot obey himself will be commanded."'}),n.jsx("button",{onClick:()=>C(!N),className:"absolute top-4 right-4 text-red-500/50 hover:text-red-400 transition-colors",title:"Sentencing Guidelines",children:n.jsx(di,{size:16})})]}),N&&n.jsx(iT,{onClose:()=>C(!1)}),n.jsxs("div",{className:"space-y-3 mb-8",children:[l.map(F=>E===F.id?n.jsxs("div",{className:"bg-life-black border border-life-gold/50 p-4 rounded-xl space-y-3 animate-in fade-in",children:[n.jsx("input",{type:"text",value:I,onChange:X=>H(X.target.value),className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1 flex bg-[#0a0a0a] rounded-lg p-1 border border-red-900/30",children:[n.jsx("button",{type:"button",onClick:()=>P("honor"),className:`flex-1 py-1 rounded text-[9px] font-bold ${_==="honor"?"bg-indigo-500 text-white":"text-zinc-500"}`,children:n.jsx(On,{size:10,className:"mx-auto"})}),n.jsx("button",{type:"button",onClick:()=>P("gold"),className:`flex-1 py-1 rounded text-[9px] font-bold ${_==="gold"?"bg-life-gold text-black":"text-zinc-500"}`,children:n.jsx(yo,{size:10,className:"mx-auto"})}),n.jsx("button",{type:"button",onClick:()=>P("xp"),className:`flex-1 py-1 rounded text-[9px] font-bold ${_==="xp"?"bg-blue-500 text-white":"text-zinc-500"}`,children:n.jsx(We,{size:10,className:"mx-auto"})}),n.jsx("button",{type:"button",onClick:()=>P("stat"),className:`flex-1 py-1 rounded text-[9px] font-bold ${_==="stat"?"bg-purple-500 text-white":"text-zinc-500"}`,children:n.jsx(Ue,{size:10,className:"mx-auto"})})]}),n.jsx("input",{type:"number",value:M,onChange:X=>j(Number(X.target.value)),className:"w-20 bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500 text-center"})]}),_==="stat"&&n.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-1",children:Object.values(W).map(X=>n.jsx("button",{onClick:()=>B(X),className:`w-6 h-6 shrink-0 rounded flex items-center justify-center border transition-all text-[9px] ${z===X?"bg-red-900/50 border-red-500 text-white":"border-zinc-800 text-zinc-500"}`,children:X},X))}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx("button",{onClick:()=>w(null),className:"flex-1 py-2 rounded bg-life-black border border-life-muted/20 text-life-muted text-xs font-bold hover:text-white",children:"Cancel"}),n.jsxs("button",{onClick:Q,className:"flex-1 py-2 rounded bg-life-gold text-black text-xs font-bold hover:bg-yellow-400 flex items-center justify-center gap-1",children:[n.jsx(Be,{size:12})," Save"]})]})]},F.id):n.jsxs("div",{className:"bg-[#0f0505] border border-red-900/30 p-4 rounded-xl flex items-center justify-between group hover:border-red-600/50 transition-all",children:[n.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[n.jsx("h3",{className:"text-sm font-bold text-red-100 mb-1",children:F.title}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-[9px] bg-red-900/30 text-red-400 px-2 py-0.5 rounded border border-red-900/50 uppercase font-black tracking-wider",children:["Penalty: -",F.penaltyValue," ",F.penaltyType==="stat"?F.statTarget:F.penaltyType.toUpperCase()]}),F.timesBroken>0&&n.jsxs("span",{className:"text-[9px] text-zinc-600 font-mono",children:["Broken ",F.timesBroken,"x"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>e.enforceLaw(F.id),className:"bg-red-600 hover:bg-red-500 text-white text-[10px] font-black uppercase tracking-widest px-3 py-2 rounded-lg shadow-[0_0_15px_rgba(220,38,38,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center gap-1 mr-1",children:[n.jsx(U0,{size:12})," Pay Fine"]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:()=>G(F),className:"text-zinc-600 hover:text-life-gold transition-colors p-1",children:n.jsx(Ou,{size:12})}),n.jsx("button",{onClick:()=>e.deleteLaw(F.id),className:"text-zinc-600 hover:text-red-500 transition-colors p-1",children:n.jsx(Ie,{size:12})})]})]})]},F.id)),l.length===0&&n.jsx("div",{className:"text-center py-8 border-2 border-dashed border-red-900/20 rounded-xl bg-red-950/10",children:n.jsx("p",{className:"text-xs text-red-800/50 font-bold uppercase",children:"No Laws Enacted"})})]}),n.jsx("div",{className:"border-t border-red-900/20 pt-6",children:v?n.jsxs("form",{onSubmit:q,className:"bg-black/40 border border-red-900/30 p-4 rounded-xl space-y-4 animate-in slide-in-from-bottom-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Offense Name"}),n.jsx("input",{type:"text",value:o,onChange:F=>r(F.target.value),placeholder:"e.g. Ate Sugar, Missed Prayer...",className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500",autoFocus:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Penalty Type"}),n.jsxs("div",{className:"flex bg-[#0a0a0a] rounded-lg p-1 border border-red-900/30",children:[n.jsx("button",{type:"button",onClick:()=>u("honor"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${d==="honor"?"bg-indigo-500 text-white":"text-zinc-500"}`,title:"Honor",children:n.jsx(On,{size:12,className:"mx-auto"})}),n.jsx("button",{type:"button",onClick:()=>u("gold"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${d==="gold"?"bg-life-gold text-black":"text-zinc-500"}`,title:"Gold",children:n.jsx(yo,{size:12,className:"mx-auto"})}),n.jsx("button",{type:"button",onClick:()=>u("xp"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${d==="xp"?"bg-blue-500 text-white":"text-zinc-500"}`,title:"XP",children:n.jsx(We,{size:12,className:"mx-auto"})}),n.jsx("button",{type:"button",onClick:()=>u("stat"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${d==="stat"?"bg-purple-500 text-white":"text-zinc-500"}`,title:"Stat",children:n.jsx(Ue,{size:12,className:"mx-auto"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Cost Value"}),n.jsx("input",{type:"number",value:h,onChange:F=>g(Number(F.target.value)),className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500 text-center font-mono"})]})]}),d==="stat"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Target Attribute"}),n.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:Object.values(W).map(F=>n.jsx("button",{type:"button",onClick:()=>y(F),className:`px-3 py-1.5 rounded border text-[9px] font-bold transition-all ${m===F?"bg-red-900/50 border-red-500 text-white":"border-zinc-800 text-zinc-500"}`,style:{color:m===F?tt[F]:void 0,borderColor:m===F?tt[F]:void 0},children:F},F))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>S(!1),className:"flex-1 py-2 rounded-lg border border-zinc-800 text-zinc-500 text-[10px] font-bold uppercase hover:bg-zinc-900",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 py-2 rounded-lg bg-red-600 text-white text-[10px] font-bold uppercase hover:bg-red-500 shadow-[0_0_10px_rgba(220,38,38,0.3)]",children:"Confirm Law"})]})]}):n.jsxs("button",{onClick:()=>S(!0),className:"w-full py-3 border border-dashed border-red-900/40 text-red-500/70 rounded-xl flex items-center justify-center gap-2 text-xs font-bold uppercase hover:bg-red-950/20 hover:text-red-400 hover:border-red-500/50 transition-all",children:[n.jsx(gt,{size:14})," Enact New Law"]})})]})},sT=()=>{const{state:i,dispatch:e}=ke(),{taskState:l,taskDispatch:o}=Kt(),{raidState:r,raidDispatch:d}=Ii(),{campaignState:u}=ul(),{tasks:h,categories:g}=l,{raids:m}=r,{campaign:y}=u,{showHighlights:v}=i.user.preferences,{tasksViewMode:S}=i.ui,[N,C]=U.useState(!1),[E,w]=U.useState(!1),[I,H]=U.useState(!1),[_,P]=U.useState(!1),[M,j]=U.useState(!0),[z,B]=U.useState(new Set),[q,G]=U.useState(new Set),[Q,F]=U.useState(""),[ae,X]=U.useState(!1),[L,k]=U.useState(null),[R,V]=U.useState(""),te=m.filter(me=>me.status==="active").map(me=>{const oe=me.steps.find(Se=>!Se.isCompleted&&!Se.isLocked&&!Se.isArchived);return oe?{raid:me,step:oe}:null}).filter(Boolean);m.flatMap(me=>me.steps.filter(oe=>oe.isArchived).map(oe=>({raid:me,step:oe})));const pe=i.ui.debugDate?new Date(i.ui.debugDate):new Date;pe.setHours(0,0,0,0);let D=null,J=null;if(y.isActive&&y.startDate){const me=new Date(y.startDate);me.setHours(0,0,0,0);const oe=Math.max(0,y.currentWeek-1);D=new Date(me),D.setDate(me.getDate()+oe*7),J=new Date(D),J.setDate(D.getDate()+6),J.setHours(23,59,59,999)}const se=[],$=[],de=[],he=[],ie=[];h.forEach(me=>{if(me.isArchived){ie.push(me);return}if(me.isCompleted){he.push(me);return}if(me.isCampaign&&y.isActive){const{timeCode:dt}=F0(me.title);if(dt&&dt.week>y.currentWeek)return}const oe=me.scheduledTime||me.deadline?new Date(me.scheduledTime||me.deadline):null;oe&&oe.setHours(0,0,0,0);const Se=oe&&oe.getTime()>pe.getTime();let $e=!1;me.isCampaign&&D&&J&&oe&&oe.getTime()>=D.getTime()&&oe.getTime()<=J.getTime()&&($e=!0),$e?de.push(me):Se?me.isCampaign||$.push(me):se.push(me)});const be=me=>{me.preventDefault(),Q.trim()&&(o.addCategory(Q),F(""),X(!1))},Te=me=>{R.trim()&&(o.renameCategory(me,R),k(null))},Oe=(me,oe)=>e.setModal("itemDetails",{itemId:me,parentId:oe,type:"raid_step"}),ct=me=>B(oe=>{const Se=new Set(oe);return Se.has(me)?Se.delete(me):Se.add(me),Se}),nt=me=>G(oe=>{const Se=new Set(oe);return Se.has(me)?Se.delete(me):Se.add(me),Se}),pi=me=>{h.some(Se=>Se.categoryId===me)?e.setModal("confirmation",{title:"Delete Section?",message:"Items will be moved to Uncategorized.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>o.deleteCategory(me)}):o.deleteCategory(me)},ge=me=>{const oe=h.find(Se=>Se.id===me);oe&&(!oe.isCompleted&&!oe.isArchived?e.setModal("confirmation",{title:"Abort Mission?",message:"Abandoning incurs a penalty.",confirmText:"Abort",isDangerous:!0,onConfirm:()=>o.deleteTask(me)}):e.setModal("confirmation",{title:"Delete Log?",message:"Permanently remove entry.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>o.deleteTask(me)}))};return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-end justify-between px-1",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase",children:S==="missions"?"ACTIVE OPS":"THE CODEX"}),n.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:S==="missions"?`${se.length} Missions Pending`:"Strict Liability Protocol"})]}),n.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center ${S==="codex"?"border-red-500 text-red-500 bg-red-950/30":"border-life-gold text-life-gold bg-life-gold/10"}`,children:S==="missions"?n.jsx("div",{className:"w-5 h-5 rounded-full bg-life-gold/80",style:{opacity:h.length>0?he.length/h.length:0}}):n.jsx(Cr,{size:16})})]})}),S==="codex"?n.jsx(nT,{}):n.jsxs(n.Fragment,{children:[v&&te.length>0&&n.jsx(tT,{raidOperations:te,expandedNotes:z,expandedSubtasks:q,toggleNotes:ct,toggleSubtasksView:nt,raidDispatch:d,openRaidStepDetails:Oe}),de.length>0&&n.jsxs("div",{className:"mb-4 animate-in slide-in-from-bottom-2",children:[n.jsxs("button",{onClick:()=>j(!M),className:"w-full flex items-center justify-between p-3 rounded-xl border bg-indigo-950/20 border-indigo-500/20 hover:bg-indigo-900/30 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Di,{size:16,className:"text-indigo-400 group-hover:scale-110 transition-transform"}),n.jsx("div",{className:"text-left",children:n.jsxs("span",{className:"text-xs font-bold text-indigo-300 uppercase tracking-widest flex items-center gap-2",children:["Week ",y.currentWeek," Objectives"]})})]}),n.jsx("div",{className:"text-indigo-400/50",children:M?n.jsx(ji,{size:16}):n.jsx(Ft,{size:16})})]}),M&&n.jsx("div",{className:"mt-2 pl-2 border-l-2 border-indigo-500/10 space-y-2",children:de.map(me=>n.jsx(Ws,{task:me,onToggle:o.toggleTask,onDelete:ge},me.id))})]}),n.jsx("div",{className:"mb-4 flex justify-end",children:ae?n.jsxs("form",{onSubmit:be,className:"flex gap-2 animate-in fade-in",children:[n.jsx("input",{type:"text",value:Q,onChange:me=>F(me.target.value),placeholder:"Section Title...",autoFocus:!0,className:"bg-life-black border border-life-muted/30 rounded-lg px-3 py-1 text-xs text-life-text focus:border-life-gold outline-none"}),n.jsx("button",{type:"submit",className:"text-life-gold hover:bg-life-gold/10 p-1 rounded",children:n.jsx(gt,{size:16})}),n.jsx("button",{type:"button",onClick:()=>X(!1),className:"text-life-muted hover:text-white p-1",children:n.jsx(gt,{size:16,className:"rotate-45"})})]}):n.jsxs("button",{onClick:()=>X(!0),className:"text-[10px] uppercase font-bold text-life-muted hover:text-life-gold flex items-center gap-1 transition-colors",children:[n.jsx(z0,{size:14})," Add Section"]})}),n.jsxs("div",{className:"space-y-4 mb-4",children:[g.map(me=>{const oe=se.filter(Se=>Se.categoryId===me.id);return n.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2 group relative",children:[L===me.id?n.jsx("div",{className:"flex gap-2 w-full",children:n.jsx("input",{type:"text",value:R,onChange:Se=>V(Se.target.value),className:"bg-life-black border border-life-muted/30 rounded px-2 py-0.5 text-xs text-life-text w-full focus:border-life-gold outline-none",autoFocus:!0,onBlur:()=>Te(me.id),onKeyDown:Se=>Se.key==="Enter"&&Te(me.id)})}):n.jsxs("button",{onClick:()=>o.toggleCategory(me.id),className:"flex items-center gap-2 text-life-muted hover:text-life-text transition-colors flex-1 text-left py-1",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold/80",children:me.isCollapsed?n.jsx(ht,{size:12}):n.jsx(Ft,{size:12})}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:me.title}),n.jsx("span",{className:"text-[9px] bg-life-muted/10 px-1.5 rounded-full text-life-muted",children:oe.length})]}),n.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:[n.jsx("button",{onClick:Se=>{Se.stopPropagation(),k(me.id),V(me.title)},className:"p-2 text-life-muted hover:text-white hover:bg-life-muted/10 rounded cursor-pointer",children:n.jsx(Ou,{size:14})}),n.jsx("button",{onClick:Se=>{Se.stopPropagation(),pi(me.id)},className:"p-2 text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded cursor-pointer",children:n.jsx(B0,{size:14})})]})]}),!me.isCollapsed&&n.jsxs("div",{className:"space-y-1 pl-1",children:[oe.map(Se=>n.jsx(Ws,{task:Se,onToggle:o.toggleTask,onDelete:ge},Se.id)),oe.length===0&&n.jsx("div",{className:"text-[10px] text-life-muted/40 italic pl-2",children:"No active missions in section."})]})]},me.id)}),se.filter(me=>!me.categoryId).length>0&&n.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2 text-life-muted/50 px-1",children:n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"General / Uncategorized"})}),n.jsx("div",{className:"space-y-1",children:se.filter(me=>!me.categoryId).map(me=>n.jsx(Ws,{task:me,onToggle:o.toggleTask,onDelete:ge},me.id))})]}),se.length===0&&te.length===0&&de.length===0&&n.jsx("div",{className:"py-8 text-center border-2 border-dashed border-life-muted/20 rounded-xl bg-life-paper/50",children:n.jsx("p",{className:"text-life-muted text-sm font-medium",children:"All active missions cleared."})})]}),$.length>0&&n.jsxs("div",{className:"mb-6 animate-in slide-in-from-bottom-2",children:[n.jsxs("button",{onClick:()=>P(!_),className:"w-full flex items-center justify-between p-3 rounded-xl border border-life-muted/10 bg-life-black hover:bg-life-muted/5 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Uu,{size:16,className:"text-life-muted group-hover:text-life-text transition-colors"}),n.jsx("div",{className:"text-left",children:n.jsxs("span",{className:"text-xs font-bold text-life-muted group-hover:text-life-text uppercase tracking-widest transition-colors",children:["Future / Sleeping (",$.length,")"]})})]}),n.jsx("div",{className:"text-life-muted/50",children:_?n.jsx(ji,{size:16}):n.jsx(Ft,{size:16})})]}),_&&n.jsx("div",{className:"mt-2 pl-2 border-l border-life-muted/10 space-y-2 opacity-80",children:$.map(me=>n.jsx("div",{className:"scale-95 origin-top-left",children:n.jsx(Ws,{task:me,onToggle:o.toggleTask,onDelete:ge})},me.id))})]}),ie.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:()=>w(!E),className:"w-full flex items-center justify-between p-2 rounded-lg border border-life-muted/10 bg-life-black hover:bg-life-muted/5 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-gold",children:[n.jsx(bo,{size:14}),n.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:["Mission Backlog (",ie.length,")"]})]}),E?n.jsx(ji,{size:14,className:"text-life-muted"}):n.jsx(Ft,{size:14,className:"text-life-muted"})]}),E&&n.jsxs("div",{className:"space-y-2 mt-2 pl-2 border-l border-life-muted/10",children:[ie.map(me=>n.jsx("div",{className:"opacity-70 grayscale hover:grayscale-0 transition-all",children:n.jsx(Ws,{task:me,onToggle:()=>o.restoreTask(me.id),onDelete:ge})},me.id)),n.jsx("div",{className:"text-center py-1 text-[9px] text-life-muted",children:"Click Checkbox to Restore  Trash to Delete Permanently"})]})]}),he.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:()=>H(!I),className:"w-full flex items-center justify-between p-2 rounded-lg border border-life-muted/10 bg-life-black hover:bg-life-muted/5 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-easy",children:[n.jsx(CS,{size:14}),n.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:["Completed Log (",he.length,")"]})]}),I?n.jsx(ji,{size:14,className:"text-life-muted"}):n.jsx(Ft,{size:14,className:"text-life-muted"})]}),I&&n.jsx("div",{className:"space-y-1 mt-2 pl-2 border-l border-life-muted/10 opacity-60 hover:opacity-100 transition-opacity animate-in slide-in-from-top-1",children:he.map(me=>n.jsx(Ws,{task:me,onToggle:o.toggleTask,onDelete:ge},me.id))})]})]})]})},Ix=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(Ue,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(Ue,{size:e})}},co=({habit:i,onProcess:e,onDelete:l})=>{var X;const{habitState:o,habitDispatch:r}=Qt(),{dispatch:d,state:u}=ke(),{categories:h}=o,[g,m]=U.useState(!1),y=zu(i.streak),v=i.skillId?((X=u.user.skills)==null?void 0:X.find(L=>L.id===i.skillId))||skillState.skills.find(L=>L.id===i.skillId):null,S=i.status==="completed",N=i.status==="failed",C=i.status==="pending",E=rl(i.difficulty,u.user.currentMode),w=i.dailyProgress||0,I=i.dailyTarget||1,H=Math.min(100,w/I*100),_=i.subtasks||[],P=_.filter(L=>L.isCompleted).length,M=_.length,j=M>0?P/M*100:0;let z="";S?z="border-life-easy bg-life-easy/5":N?z="border-life-hard bg-life-hard/5":i.shieldUsed?z="border-life-diamond/40 bg-life-diamond/5":z=`${ri[i.difficulty]} border-l-[6px]`;const B=L=>{const k=L.target.value;r.moveHabit(i.id,k||void 0)},q=L=>{L.stopPropagation(),d.setModal("itemDetails",{itemId:i.id,type:"habit"})},G=L=>{L.stopPropagation(),r.setActiveHabit(i.id)},Q=L=>{L.stopPropagation(),l(i.id)},F=L=>{L.stopPropagation(),d.startFocusSession(i.id,i.durationMinutes||25,"habit")},ae=Array.from({length:7}).map((L,k)=>{const R=new Date;R.setDate(R.getDate()-(6-k));const V=R.toISOString().split("T")[0],te=i.history.some(J=>J.startsWith(V)),pe=k===6;let D="bg-life-muted/10";return te?D="bg-life-easy":pe&&(S?D="bg-life-easy":N?D="bg-life-hard":D="bg-life-muted/30 border border-life-muted/50"),{isoDate:V,statusColor:D,isToday:pe}});return n.jsxs("div",{onClick:()=>m(!g),className:`
        relative overflow-hidden mb-3 rounded-xl border bg-life-paper transition-all duration-300 group cursor-pointer
        ${z}
        ${C?"hover:bg-white/5 hover:scale-[1.01]":""}
      `,children:[n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/50",children:n.jsx("div",{className:`h-full transition-all duration-700 ease-out ${S?"bg-life-easy":N?"bg-life-hard":i.shieldUsed?"bg-life-diamond":"bg-life-gold"}`,style:{width:`${y.progress}%`,opacity:.5}})}),I>1&&C&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-full pointer-events-none",children:n.jsx("div",{className:"h-full bg-life-easy/10 transition-all duration-300",style:{width:`${H}%`}})}),M>0&&C&&n.jsx("div",{className:"absolute bottom-1 left-0 right-0 h-0.5 bg-life-muted/10",children:n.jsx("div",{className:"h-full bg-life-gold transition-all duration-500",style:{width:`${j}%`}})}),n.jsxs("div",{className:"flex items-center justify-between p-3 relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 overflow-hidden",children:[n.jsxs("div",{className:"relative shrink-0",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors duration-300 bg-life-black
                    ${S?"border-life-easy text-life-easy":N?"border-life-hard text-life-hard":i.shieldUsed?"border-life-diamond text-life-diamond shadow-[0_0_10px_rgba(96,165,250,0.3)]":"border-life-muted/30 text-life-muted"}`,children:i.shieldUsed&&C?n.jsx(ot,{size:16}):N?n.jsx(Ie,{size:16}):S?n.jsx(Be,{size:16}):n.jsx(Ix,{stat:i.stat,size:16})}),n.jsxs("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 px-1 py-px rounded text-[7px] font-black uppercase tracking-tighter border bg-life-black whitespace-nowrap ${y.phaseColor}`,children:["LVL ",y.level]})]}),n.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[n.jsx("h3",{className:`font-bold text-sm leading-tight truncate ${S?"text-life-easy":N?"text-life-hard":"text-life-text"}`,children:i.title}),C&&n.jsxs("span",{className:"text-[9px] font-mono font-bold text-life-muted bg-life-black px-1.5 py-0.5 rounded border border-life-muted/20",children:["+",E.xp," XP"]}),i.isTimed&&n.jsxs("span",{className:"text-[9px] flex items-center gap-0.5 text-life-muted bg-life-muted/10 px-1.5 py-0.5 rounded",children:[n.jsx(yt,{size:8})," ",i.durationMinutes,"m"]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"text-[9px] text-life-muted font-mono flex items-center gap-0.5",children:[n.jsx(Nr,{size:8,className:i.streak>0?"text-life-gold":"text-life-muted"})," ",i.streak]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-life-muted/20 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:tt[i.stat],borderColor:`${tt[i.stat]}40`},children:[n.jsx(Ix,{stat:i.stat,size:8})," ",i.stat]}),v&&n.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-life-gold/30 bg-life-gold/5 text-life-gold flex items-center gap-1 uppercase tracking-wider",children:[n.jsx(xt,{size:8})," ",v.title]})]}),n.jsx("div",{className:"flex items-center gap-0.5",children:ae.map((L,k)=>n.jsx("div",{className:`w-1 h-1 rounded-full ${L.statusColor} ${L.isToday&&C?"animate-pulse":""}`,title:L.isoDate},k))})]})]})]}),n.jsx("div",{className:"flex flex-col items-end gap-1.5 shrink-0 ml-2",children:n.jsx("div",{className:"flex items-center gap-2",children:C?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:L=>{L.stopPropagation(),e(i.id,"failed")},className:"w-8 h-8 rounded-lg border border-life-muted/20 hover:border-life-hard hover:bg-life-hard/10 text-life-muted hover:text-life-hard flex items-center justify-center transition-all active:scale-95 bg-life-black",title:"Fail",children:n.jsx(Ie,{size:16,strokeWidth:3})}),n.jsxs("button",{onClick:L=>{L.stopPropagation(),e(i.id,"completed")},className:"w-8 h-8 rounded-lg border border-life-muted/30 hover:border-life-easy hover:bg-life-easy/10 text-life-muted hover:text-life-easy flex items-center justify-center transition-all active:scale-95 shadow-sm bg-life-black relative overflow-hidden",title:I>1?`Repetition ${w+1} of ${I}`:"Complete",children:[I>1?n.jsxs("div",{className:"flex flex-col items-center leading-none z-10",children:[n.jsxs("span",{className:`text-[10px] font-black ${w>0?"text-life-easy":""}`,children:[w,"/",I]}),n.jsx("span",{className:"text-[6px] uppercase font-bold text-life-muted/70",children:"Reps"})]}):n.jsx(Be,{size:18,strokeWidth:3}),I>1&&n.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-life-muted/20",children:n.jsx("div",{className:"h-full bg-life-easy transition-all duration-300",style:{width:`${H}%`}})})]})]}):n.jsx("div",{className:`h-8 px-3 flex items-center justify-center rounded-lg border text-[10px] font-black uppercase tracking-wider ${S?"bg-life-easy/10 border-life-easy text-life-easy":"bg-life-hard/10 border-life-hard text-life-hard"}`,children:S?"DONE":"MISS"})})})]}),g&&n.jsxs("div",{className:"px-3 pb-3 animate-in slide-in-from-top-2 border-t border-life-muted/10 pt-2",children:[n.jsx("div",{className:"flex justify-end mb-3",children:n.jsxs("div",{className:"flex items-center gap-1 bg-life-black/50 rounded-lg p-0.5 border border-life-muted/10",children:[n.jsx("button",{onClick:G,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-gold hover:bg-life-gold/10 rounded transition-colors",title:"View Progress Ladder",children:n.jsx(kr,{size:12})}),i.isTimed&&C&&n.jsx("button",{onClick:F,className:"w-6 h-6 flex items-center justify-center text-life-gold hover:bg-life-gold/10 rounded transition-colors",title:"Enter Focus Citadel",children:n.jsx(Tr,{size:12,fill:"currentColor"})}),n.jsx("button",{onClick:q,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/10 rounded transition-colors",title:"Details & Edit",children:n.jsx(vo,{size:12})}),n.jsxs("div",{className:"relative group/move w-6 h-6 flex items-center justify-center",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{className:"text-life-muted hover:text-life-gold transition-colors",children:n.jsx(Pu,{size:12})}),n.jsxs("select",{onChange:B,value:i.categoryId||"",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",children:[n.jsx("option",{value:"",children:"(Uncat)"}),h.map(L=>n.jsx("option",{value:L.id,children:L.title},L.id))]})]}),n.jsx("button",{onClick:Q,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded transition-colors",title:"Delete",children:n.jsx(Rt,{size:12})})]})}),_.length>0&&n.jsx("div",{className:"space-y-1",children:_.map(L=>n.jsxs("div",{onClick:k=>{k.stopPropagation(),r.toggleSubtask(i.id,L.id)},className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-life-muted/10 p-1.5 rounded transition-colors group/sub",children:[n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${L.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover/sub:border-life-gold"}`,children:n.jsx(Be,{size:12,strokeWidth:3})}),n.jsx("span",{className:L.isCompleted?"text-life-muted line-through":"text-life-text",children:L.title})]},L.id))})]})]})},lT=["S","M","T","W","T","F","S"],oT=()=>{const{habitState:i}=Qt(),{taskState:e,taskDispatch:l}=Kt(),{dispatch:o}=ke(),[r,d]=U.useState(new Date),[u,h]=U.useState(new Date),g=r.getFullYear(),m=r.getMonth(),y=new Date(g,m+1,0).getDate(),v=new Date(g,m,1).getDay(),S=()=>{d(new Date(g,m-1,1)),xe("click",!0)},N=()=>{d(new Date(g,m+1,1)),xe("click",!0)},C=_=>{const P=new Date(g,m,_);h(P),xe("click",!0)},E=_=>{const P=_.toISOString(),M=P.split("T")[0],j=i.habits.filter(B=>{const q=new Date(B.createdAt);return _<q&&_.getDate()!==q.getDate()?!1:ol(B,P)}).map(B=>({id:B.id,title:B.title,type:"habit",isCompleted:B.history.some(q=>q.startsWith(M)),stat:B.stat})),z=e.tasks.filter(B=>{if(!B.deadline&&!B.scheduledTime)return!1;const q=B.scheduledTime?new Date(B.scheduledTime):new Date(B.deadline);return q.getDate()===_.getDate()&&q.getMonth()===_.getMonth()&&q.getFullYear()===_.getFullYear()}).map(B=>({id:B.id,title:B.title,type:"task",isCompleted:B.isCompleted,stat:B.stat}));return[...j,...z]},w=U.useMemo(()=>E(u),[u,i.habits,e.tasks]),I=_=>{const P=new Date(g,m,_);return E(P).length>0},H=()=>{const P=new Date(u.getTime()-u.getTimezoneOffset()*6e4).toISOString().split("T")[0];o.setModal("addTask",{defaultType:"mission",date:P,origin:"calendar"})};return n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right duration-500",children:[n.jsxs("div",{className:"bg-life-paper border border-life-muted/20 rounded-2xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("button",{onClick:S,className:"p-2 hover:bg-life-muted/10 rounded-full text-life-muted hover:text-white transition-colors",children:n.jsx(D0,{size:18})}),n.jsx("h3",{className:"text-sm font-black text-life-text uppercase tracking-widest",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:N,className:"p-2 hover:bg-life-muted/10 rounded-full text-life-muted hover:text-white transition-colors",children:n.jsx(ht,{size:18})})]}),n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:lT.map((_,P)=>n.jsx("div",{className:"text-center text-[9px] font-bold text-life-muted/50 py-1",children:_},P))}),n.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:v}).map((_,P)=>n.jsx("div",{className:"aspect-square"},`empty-${P}`)),Array.from({length:y}).map((_,P)=>{const M=P+1,j=new Date(g,m,M),z=j.toDateString()===u.toDateString(),B=j.toDateString()===new Date().toDateString(),q=I(M);return n.jsxs("button",{onClick:()=>C(M),className:`
                                    aspect-square rounded-lg flex flex-col items-center justify-center relative transition-all duration-200
                                    ${z?"bg-life-gold text-life-black font-black shadow-[0_0_15px_rgba(251,191,36,0.4)] scale-110 z-10":"hover:bg-life-muted/10 text-life-text"}
                                    ${B&&!z?"border border-life-gold/50 text-life-gold":""}
                                `,children:[n.jsx("span",{className:"text-xs",children:M}),q&&n.jsx("div",{className:`w-1 h-1 rounded-full mt-1 ${z?"bg-black":"bg-life-muted"}`})]},M)})]})]}),n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-2xl p-0 overflow-hidden shadow-lg min-h-[200px] flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/10 flex justify-between items-center bg-life-paper/50",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-black uppercase text-life-muted tracking-widest",children:"Tactical Log"}),n.jsx("p",{className:"text-sm font-bold text-life-text mt-0.5",children:u.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),n.jsx("button",{onClick:H,className:"bg-life-gold/10 hover:bg-life-gold/20 text-life-gold border border-life-gold/30 p-2 rounded-lg transition-all",title:"Add Mission for this Day",children:n.jsx(gt,{size:16})})]}),n.jsx("div",{className:"p-2 flex-1 overflow-y-auto max-h-[300px]",children:w.length>0?n.jsx("div",{className:"space-y-1",children:w.map((_,P)=>n.jsxs("div",{className:`
                                        flex items-center gap-3 p-3 rounded-xl border transition-all
                                        ${_.isCompleted?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/10 hover:border-life-gold/30"}
                                    `,children:[n.jsx("div",{className:`
                                        w-8 h-8 rounded-full flex items-center justify-center border-2
                                        ${_.isCompleted?"bg-life-muted border-life-muted text-life-black":_.type==="habit"?"border-life-gold/30 text-life-gold bg-life-gold/5":"border-life-muted/30 text-life-muted"}
                                    `,children:_.type==="habit"?n.jsx(Di,{size:14}):n.jsx(cs,{size:14})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`text-xs font-bold ${_.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:_.title}),n.jsxs("div",{className:"text-[9px] text-life-muted uppercase tracking-wider flex items-center gap-1",children:[_.type==="habit"?"Protocol":"Mission","  ",_.stat]})]}),_.type==="task"&&!_.isCompleted&&n.jsx("button",{onClick:()=>l.toggleTask(_.id),className:"w-6 h-6 rounded border border-life-muted/30 hover:border-life-gold hover:text-life-gold flex items-center justify-center transition-colors",children:n.jsx(ES,{size:14})}),_.isCompleted&&n.jsx(Gi,{size:14,className:"text-life-muted"})]},`${_.type}-${_.id}-${P}`))}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-life-muted/40",children:[n.jsx(Jt,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"No orders for this sector"})]})})]})]})},aT=()=>{const{habitState:i,habitDispatch:e}=Qt(),{state:l,dispatch:o}=ke(),{habits:r,categories:d}=i,u=l.ui.habitsViewMode,[h,g]=U.useState(!1),[m,y]=U.useState(()=>localStorage.getItem("LIFE_OS_LOG_OPEN")==="true");U.useEffect(()=>{localStorage.setItem("LIFE_OS_LOG_OPEN",String(m))},[m]);const[v,S]=U.useState(""),[N,C]=U.useState(!1),[E,w]=U.useState(null),[I,H]=U.useState(""),_=[],P=[],M=[];r.forEach(X=>{if(X.status!=="pending"){M.push(X);return}ol(X)?_.push(X):P.push(X)});const j=new Date;j.setDate(j.getDate()-1);const z=j.toISOString(),B=z.split("T")[0],q=r.filter(X=>{const L=new Date(X.createdAt);return L>j&&L.getDate()!==j.getDate()?!1:ol(X,z)}).map(X=>{const k=X.history.some(R=>R.startsWith(B))?"completed":"failed";return{...X,id:`log_yesterday_${X.id}`,status:k,shieldUsed:!1}}),G=X=>{X.preventDefault(),v.trim()&&(e.addCategory(v),S(""),C(!1))},Q=X=>{I.trim()&&(e.renameCategory(X,I),w(null))},F=X=>{r.some(k=>k.categoryId===X)?o.setModal("confirmation",{title:"Delete Section?",message:"This section contains protocols. They will be moved to Uncategorized.",confirmText:"Delete Section",isDangerous:!0,onConfirm:()=>e.deleteCategory(X)}):e.deleteCategory(X)},ae=X=>{o.setModal("confirmation",{title:"Delete Protocol?",message:"This action is permanent.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>e.deleteHabit(X)})};return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsx("div",{className:"flex items-end justify-between mb-6 px-1",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2 uppercase",children:u==="calendar"?"Tactical Planner":"Habit Engine"}),n.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:u==="calendar"?"Long-term Strategy":`Execution Mode  ${_.length} Remaining`})]})}),u==="calendar"?n.jsx(oT,{}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-4 flex justify-end",children:N?n.jsxs("form",{onSubmit:G,className:"flex gap-2 animate-in fade-in",children:[n.jsx("input",{type:"text",value:v,onChange:X=>S(X.target.value),placeholder:"Section Title...",autoFocus:!0,className:"bg-life-black border border-life-muted/30 rounded-lg px-3 py-1 text-xs text-life-text focus:border-life-gold outline-none"}),n.jsx("button",{type:"submit",className:"text-life-gold hover:bg-life-gold/10 p-1 rounded",children:n.jsx(gt,{size:16})}),n.jsx("button",{type:"button",onClick:()=>C(!1),className:"text-life-muted hover:text-white p-1",children:n.jsx(gt,{size:16,className:"rotate-45"})})]}):n.jsxs("button",{onClick:()=>C(!0),className:"text-[10px] uppercase font-bold text-life-muted hover:text-life-gold flex items-center gap-1 transition-colors",children:[n.jsx(z0,{size:14})," Add Section"]})}),n.jsxs("div",{className:"space-y-4 mb-8",children:[d.map(X=>{const L=_.filter(k=>k.categoryId===X.id);return n.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2 group relative",children:[E===X.id?n.jsx("div",{className:"flex gap-2 w-full",children:n.jsx("input",{type:"text",value:I,onChange:k=>H(k.target.value),className:"bg-life-black border border-life-muted/30 rounded px-2 py-0.5 text-xs text-life-text w-full focus:border-life-gold outline-none",autoFocus:!0,onBlur:()=>Q(X.id),onKeyDown:k=>k.key==="Enter"&&Q(X.id)})}):n.jsxs("button",{onClick:()=>e.toggleCategory(X.id),className:"flex items-center gap-2 text-life-muted hover:text-life-text transition-colors flex-1 text-left py-1",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold/80",children:X.isCollapsed?n.jsx(ht,{size:12}):n.jsx(Ft,{size:12})}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:X.title}),n.jsx("span",{className:"text-[9px] bg-life-muted/10 px-1.5 rounded-full text-life-muted",children:L.length})]}),n.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:[n.jsx("button",{onClick:k=>{k.stopPropagation(),w(X.id),H(X.title)},className:"p-2 text-life-muted hover:text-white hover:bg-life-muted/10 rounded cursor-pointer",title:"Edit Name",children:n.jsx(Ou,{size:14})}),n.jsx("button",{onClick:k=>{k.stopPropagation(),F(X.id)},className:"p-2 text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded cursor-pointer",title:"Delete Section",children:n.jsx(B0,{size:14})})]})]}),!X.isCollapsed&&n.jsxs("div",{className:"space-y-1 pl-1",children:[L.map(k=>n.jsx(co,{habit:k,onProcess:e.processHabit,onDelete:ae},k.id)),L.length===0&&n.jsx("div",{className:"text-[10px] text-life-muted/40 italic pl-2 py-1",children:"No active protocols in section."})]})]},X.id)}),_.filter(X=>!X.categoryId).length>0&&n.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2 text-life-muted/50 px-1",children:n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"General / Uncategorized"})}),n.jsx("div",{className:"space-y-1",children:_.filter(X=>!X.categoryId).map(X=>n.jsx(co,{habit:X,onProcess:e.processHabit,onDelete:ae},X.id))})]}),_.length===0&&d.length===0&&n.jsxs("div",{className:"py-8 text-center border-2 border-dashed border-life-muted/20 rounded-xl bg-life-paper/50",children:[n.jsx("p",{className:"text-life-muted text-sm font-medium",children:"All protocols executed."}),n.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1",children:"Check the Daily Log."})]})]}),(M.length>0||q.length>0)&&n.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in mb-4",children:[n.jsxs("button",{onClick:()=>y(!m),className:"w-full flex items-center justify-between p-3 rounded-lg border border-life-muted/20 bg-life-paper hover:bg-life-muted/5 transition-all mb-3 group shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bo,{size:16,className:"text-life-gold group-hover:scale-110 transition-transform"}),n.jsxs("span",{className:"text-xs font-bold text-life-text uppercase tracking-widest",children:["Activity Log (",M.length+q.length,")"]})]}),n.jsx("div",{className:"text-life-muted",children:m?n.jsx(ji,{size:16}):n.jsx(Ft,{size:16})})]}),m&&n.jsxs("div",{className:"space-y-4 opacity-90 pb-4",children:[q.length>0&&n.jsxs("div",{className:"animate-in slide-in-from-top-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 text-life-muted/60",children:[n.jsx(Jt,{size:12}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Yesterday's Report"})]}),n.jsx("div",{className:"space-y-1",children:q.map(X=>n.jsx("div",{className:"scale-95 origin-top opacity-80 hover:opacity-100 transition-opacity",children:n.jsx(co,{habit:X,onProcess:()=>{},onDelete:()=>{}})},X.id))})]}),M.length>0&&n.jsxs("div",{className:"animate-in slide-in-from-top-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 text-life-muted/60",children:[n.jsx(yt,{size:12}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Today's Activity"})]}),n.jsx("div",{className:"space-y-1",children:M.map(X=>n.jsx("div",{className:"scale-95 origin-top",children:n.jsx(co,{habit:X,onProcess:e.processHabit,onDelete:ae})},X.id))})]})]})]}),P.length>0&&n.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in",children:[n.jsxs("button",{onClick:()=>g(!h),className:"w-full flex items-center justify-between p-3 rounded-lg border border-life-muted/10 bg-life-black hover:bg-life-muted/5 transition-all mb-3 group",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uu,{size:16,className:"text-life-muted group-hover:text-life-gold transition-colors"}),n.jsxs("span",{className:"text-xs font-bold text-life-muted uppercase tracking-widest",children:["Sleep Archive (",P.length,")"]})]}),n.jsx("div",{className:"text-life-muted",children:h?n.jsx(ji,{size:16}):n.jsx(Ft,{size:16})})]}),h&&n.jsxs("div",{className:"space-y-1 opacity-70 hover:opacity-100 transition-opacity",children:[P.map(X=>n.jsx("div",{className:"scale-95 origin-top",children:n.jsx(co,{habit:X,onProcess:e.processHabit,onDelete:ae})},X.id)),n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Recovery Mode  No Streak Penalty"})})]})]})]})]})},au=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(Ue,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(Ue,{size:e})}},ru=({raid:i,onToggleStep:e})=>{const{dispatch:l}=ke(),[o,r]=U.useState(!1),{skillState:d}=vt(),[u,h]=U.useState(!1),[g,m]=U.useState(new Set),y=i.skillId?d.skills.find(_=>_.id===i.skillId):null;let v=!1,S="";if(i.requirements){const _=d.skills.find(P=>P.id===i.requirements.skillId);_&&_.level<i.requirements.minLevel?(v=!0,S=`Rec: ${_.title} Lv.${i.requirements.minLevel}`):_||(v=!0,S=`Req: Lv.${i.requirements.minLevel}`)}const N=i.stats&&i.stats.length>0?i.stats[0]:W.STR,C=tt[N],E=_=>{_.stopPropagation(),l.setModal("itemDetails",{itemId:i.id,type:"raid"})},w=(_,P)=>{_.stopPropagation(),l.setModal("itemDetails",{itemId:P,parentId:i.id,type:"raid_step"})},I=_=>{m(P=>{const M=new Set(P);return M.has(_)?M.delete(_):M.add(_),M})},H=_=>{_.stopPropagation();const P=i.steps.filter(j=>g.has(j.id));if(P.length===0)return;const M={context:"UPDATE_RAID_STEPS",raidId:i.id,raidTitle:i.title,selectedSteps:P.map(j=>({id:j.id,title:j.title,notes:j.notes,difficulty:j.difficulty,stat:j.stat})),instruction:'Update these steps with more details, better notes, or adjust difficulty/stats. CRITICAL: Preserve all IDs. Return valid JSON: { "raids": [{ "id": "...", "steps": [...] }] }'};navigator.clipboard.writeText(JSON.stringify(M,null,2)),l.addToast(`${g.size} Steps Copied for AI`,"info"),h(!1),m(new Set)};return n.jsxs("div",{className:`mb-4 bg-life-paper border rounded-xl overflow-hidden shadow-lg relative transition-all ${v?"border-orange-500/30":"border-life-muted/20"}`,children:[n.jsxs("div",{onClick:()=>r(!o),className:"p-4 bg-life-paper relative cursor-pointer active:bg-life-muted/5 transition-colors group",children:[n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-life-muted/20",children:n.jsx("div",{className:"h-full transition-all duration-700 ease-out",style:{width:`${i.progress}%`,backgroundColor:C}})}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-lg border-2 flex flex-col items-center justify-center bg-life-black ${ri[i.difficulty]}`,style:{borderColor:C},children:n.jsx("div",{className:"flex flex-wrap items-center justify-center gap-0.5 p-0.5",children:(i.stats||[]).slice(0,4).map(_=>n.jsx("div",{style:{color:tt[_]},children:n.jsx(au,{stat:_,size:10})},_))})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h3",{className:"font-bold text-base text-life-text leading-tight",children:i.title}),i.isCampaign&&n.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-indigo-500/50 bg-indigo-500/10 text-indigo-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_5px_rgba(99,102,241,0.2)]",children:[n.jsx(Di,{size:8})," G12"]}),y&&n.jsxs("span",{className:"text-[8px] border px-1.5 py-px rounded flex items-center gap-1 uppercase tracking-wider text-life-gold border-life-gold/30 bg-life-gold/10",children:[n.jsx(di,{size:8})," ",y.title]}),n.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-life-muted/20 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:C,borderColor:`${C}40`},children:[n.jsx(au,{stat:N,size:8})," ",N]})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-[10px] font-mono text-life-muted bg-life-muted/10 px-1.5 rounded",children:i.difficulty.toUpperCase()}),i.deadline&&n.jsxs("span",{className:"text-[10px] font-mono text-life-muted flex items-center gap-1",children:[n.jsx(Jt,{size:10})," ",new Date(i.deadline).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),v&&n.jsxs("span",{className:"text-[9px] font-bold text-orange-400 flex items-center gap-1 bg-orange-400/10 px-1.5 rounded border border-orange-400/20",children:[n.jsx(cn,{size:10})," ",S]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-life-muted",children:[n.jsx("button",{onClick:_=>{_.stopPropagation(),h(!u),r(!0)},className:`p-1.5 rounded-full transition-all ${u?"bg-life-gold text-black":"hover:bg-life-muted/10 text-life-muted"}`,title:"Select Steps for AI Update",children:n.jsx(Ri,{size:16})}),n.jsx("button",{onClick:E,className:"p-1.5 rounded-full hover:bg-life-muted/10 opacity-0 group-hover:opacity-100 transition-all",children:n.jsx(vo,{size:16})}),o?n.jsx(ji,{size:20}):n.jsx(Ft,{size:20})]})]})]}),o&&n.jsxs("div",{className:"bg-black/20 border-t border-life-muted/10 p-2",children:[u&&n.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 animate-in slide-in-from-top-2",children:[n.jsxs("span",{className:"text-[10px] font-bold text-life-gold uppercase tracking-widest",children:[g.size," Selected"]}),n.jsxs("button",{onClick:H,disabled:g.size===0,className:"flex items-center gap-1 bg-life-gold text-black px-3 py-1 rounded text-[10px] font-black uppercase hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ui,{size:10})," Copy for AI"]})]}),n.jsx("div",{className:"space-y-1",children:i.steps.map(_=>{var B;const P=_.difficulty&&_.difficulty!==i.difficulty,M=_.stat&&_.stat!==N,j=g.has(_.id);let z=C;return P&&(_.difficulty==="easy"?z="#10b981":_.difficulty==="normal"?z="#3b82f6":_.difficulty==="hard"&&(z="#ef4444")),n.jsxs("div",{className:"group flex gap-2 items-center",children:[u&&n.jsx("button",{onClick:()=>I(_.id),className:`shrink-0 transition-all ${j?"text-life-gold":"text-life-muted/30 hover:text-life-muted"}`,children:j?n.jsx(Ri,{size:18}):n.jsx(c2,{size:18})}),n.jsx("div",{className:`
                                    w-full flex items-center justify-between p-3 rounded-lg text-left transition-all
                                    ${_.isCompleted?"bg-life-easy/5 text-life-muted line-through opacity-70":_.isLocked?"bg-transparent text-life-muted/30":"bg-life-paper hover:bg-life-muted/10 text-life-text border-l-2"}
                                `,style:{borderLeftColor:!_.isLocked&&!_.isCompleted?z:"transparent"},children:n.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>!u&&w({stopPropagation:()=>{}},_.id),children:[!u&&n.jsxs("button",{disabled:_.isLocked,onClick:q=>{q.stopPropagation(),e(i.id,_.id)},className:`
                                                w-5 h-5 rounded border flex items-center justify-center transition-all shrink-0
                                                ${_.isCompleted?"bg-life-easy border-life-easy text-life-black":_.isLocked?"border-life-muted/20 bg-life-muted/5 cursor-not-allowed":"border-life-muted text-transparent hover:border-life-gold"}
                                            `,children:[_.isCompleted&&n.jsx(Be,{size:14,strokeWidth:3}),_.isLocked&&!_.isCompleted&&n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-life-muted/30"})]}),n.jsx("div",{className:"flex flex-col flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-xs font-medium truncate",children:_.title}),P&&n.jsx("span",{className:`text-[7px] font-black px-1 rounded border uppercase tracking-tighter ${_.difficulty==="easy"?"border-life-easy text-life-easy bg-life-easy/5":_.difficulty==="normal"?"border-blue-500 text-blue-400 bg-blue-500/5":"border-life-hard text-life-hard bg-life-hard/5"}`,children:(B=_.difficulty)==null?void 0:B.substring(0,3)}),M&&n.jsxs("span",{className:"text-[7px] font-black px-1 rounded border border-life-muted/20 bg-life-black flex items-center gap-0.5 uppercase tracking-tighter",style:{color:tt[_.stat],borderColor:`${tt[_.stat]}40`},children:[n.jsx(au,{stat:_.stat,size:6})," ",_.stat]})]})}),!u&&n.jsx("button",{onClick:q=>w(q,_.id),className:"p-1 rounded-full text-life-muted hover:text-life-gold transition-colors",children:_.notes?n.jsx(dl,{size:12,className:"text-life-gold"}):n.jsx(vo,{size:12})})]})})]},_.id)})})]})]})},rT=({onClose:i})=>n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-4 mb-6 animate-in fade-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-2 bg-indigo-900/20 rounded-lg text-indigo-400",children:n.jsx(di,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-wider",children:"Field Manual: Operations"}),n.jsx("p",{className:"text-[10px] text-life-muted",children:"Tactical Guide & AI Uplink"})]})]}),n.jsx("button",{onClick:i,className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:16})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-start border-b border-white/5 pb-3",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-life-gold font-black text-xs",children:"Structure"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Raid Anatomy"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] text-zinc-400 leading-relaxed",children:[n.jsx("span",{className:"text-white font-bold",children:"Raids"})," are multi-step projects. Each step is a tactical objective."]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[n.jsxs("div",{className:"bg-life-black p-1.5 rounded border border-white/10 text-[9px] text-zinc-500",children:[n.jsx("span",{className:"text-life-easy font-bold",children:"Easy:"})," +100 XP"]}),n.jsxs("div",{className:"bg-life-black p-1.5 rounded border border-white/10 text-[9px] text-zinc-500",children:[n.jsx("span",{className:"text-life-hard font-bold",children:"Hard:"})," +500 XP"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-start border-b border-white/5 pb-3",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-indigo-400 font-black text-xs",children:"AI Uplink"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Update Steps"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-[10px] text-zinc-400 leading-relaxed",children:"You can ask AI to refine specific steps without rewriting the whole Raid."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[n.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:n.jsx(Ri,{size:10})}),n.jsxs("span",{children:["1. Click ",n.jsx("span",{className:"text-life-gold font-bold",children:"Select Mode"})," on Raid Card."]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[n.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:n.jsx(Ri,{size:10})}),n.jsx("span",{children:"2. Select the steps you want to improve."})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[n.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:n.jsx(ui,{size:10})}),n.jsxs("span",{children:["3. Click ",n.jsx("span",{className:"text-life-gold font-bold",children:"Copy for AI"}),"."]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[n.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:n.jsx(We,{size:10})}),n.jsxs("span",{children:["4. Paste into AI, then paste result into ",n.jsx("span",{className:"text-life-gold font-bold",children:"Data Uplink"}),"."]})]})]}),n.jsx("div",{className:"p-2 bg-indigo-900/10 border border-indigo-500/20 rounded text-[9px] text-indigo-300 italic",children:'"The system will intelligently merge the new details into your existing progress."'})]})]}),n.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center",children:[n.jsxs("div",{className:"text-right pr-2 border-r border-white/10",children:[n.jsx("div",{className:"text-purple-400 font-black text-xs",children:"Victory"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Completion"})]}),n.jsx("div",{className:"space-y-1",children:n.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Completing a Raid grants a massive ",n.jsx("span",{className:"text-life-gold font-bold",children:"5x Bonus"})," to XP and Gold."]})})]})]})]}),cT=()=>{const{raidState:i,raidDispatch:e}=Ii(),{raids:l}=i,[o,r]=U.useState(!1),[d,u]=U.useState(!1),[h,g]=U.useState(!1),m=l.filter(S=>S.status==="active"),y=l.filter(S=>S.status==="completed"),v=l.filter(S=>S.status==="archived");return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase",children:"Active Operations"}),n.jsx("button",{onClick:()=>g(!h),className:"text-life-muted hover:text-life-gold transition-colors p-1",title:"Field Manual",children:n.jsx(di,{size:16})})]}),n.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:[m.length," Strategic Objectives In-Progress"]})]}),n.jsx("div",{className:"text-life-hard opacity-50",children:n.jsx(We,{size:24})})]}),h&&n.jsx(rT,{onClose:()=>g(!1)}),n.jsx("div",{className:"space-y-4",children:m.length>0?m.map(S=>n.jsxs("div",{className:"relative group",children:[n.jsx(ru,{raid:S,onToggleStep:e.toggleRaidStep}),n.jsxs("div",{className:"absolute -right-2 -top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[n.jsx("button",{onClick:()=>e.archiveRaid(S.id),className:"bg-life-black border border-life-muted/30 text-life-muted hover:text-life-text p-1.5 rounded-full shadow-sm hover:scale-110 transition-transform",title:"Archive Operation",children:n.jsx(bo,{size:12})}),n.jsx("button",{onClick:()=>e.deleteRaid(S.id),className:"bg-life-black border border-life-muted/30 text-life-muted hover:text-life-hard p-1.5 rounded-full shadow-sm hover:scale-110 transition-transform",title:"Abort / Delete Operation",children:n.jsx(Rt,{size:12})})]})]},S.id)):n.jsxs("div",{className:"py-12 text-center border-2 border-dashed border-life-muted/20 rounded-xl bg-life-paper/30",children:[n.jsx("p",{className:"text-life-muted text-sm font-bold",children:"No Active Operations"}),n.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1 uppercase tracking-wider",children:"Initiate a new Raid via Command Line (+)."})]})}),v.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsxs("button",{onClick:()=>u(!d),className:"w-full flex items-center justify-between p-3 rounded-xl border border-life-muted/10 bg-life-black hover:bg-life-muted/5 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-life-muted/10 text-life-muted group-hover:text-life-text transition-colors",children:n.jsx(Pu,{size:16})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"text-xs font-black text-life-muted uppercase tracking-widest group-hover:text-life-text transition-colors",children:"Declassified Ops (Archive)"}),n.jsxs("p",{className:"text-[9px] text-life-muted/60 uppercase tracking-wider",children:[v.length," Operations Stored"]})]})]}),n.jsx("div",{className:"text-life-muted/50",children:d?n.jsx(ji,{size:18}):n.jsx(Ft,{size:18})})]}),d&&n.jsx("div",{className:"mt-4 space-y-4 animate-in slide-in-from-top-2",children:v.map(S=>n.jsxs("div",{className:"opacity-60 hover:opacity-100 transition-opacity grayscale relative group",children:[n.jsx(ru,{raid:S,onToggleStep:()=>{}}),n.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 bg-life-black/80 backdrop-blur rounded-lg p-1 border border-life-muted/20",children:[n.jsxs("button",{onClick:()=>e.restoreRaid(S.id),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-life-muted/20 text-[9px] font-bold text-life-gold uppercase",children:[n.jsx(PN,{size:10})," Restore"]}),n.jsx("div",{className:"w-px bg-life-muted/20"}),n.jsxs("button",{onClick:()=>e.deleteRaid(S.id),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-life-hard/20 text-[9px] font-bold text-life-hard uppercase",children:[n.jsx(Rt,{size:10})," Delete"]})]})]},S.id))})]}),y.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-life-muted/10",children:[n.jsxs("button",{onClick:()=>r(!o),className:"w-full flex items-center justify-between p-3 rounded-xl bg-life-gold/5 border border-life-gold/10 hover:bg-life-gold/10 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-life-gold/20 text-life-gold",children:n.jsx(_r,{size:16})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-widest",children:"Victory Archive"}),n.jsxs("p",{className:"text-[9px] text-life-gold/60 uppercase tracking-wider",children:[y.length," Operations Conquered"]})]})]}),n.jsx("div",{className:"text-life-gold/50",children:o?n.jsx(ji,{size:18}):n.jsx(Ft,{size:18})})]}),o&&n.jsx("div",{className:"mt-4 space-y-4 animate-in slide-in-from-top-2",children:y.map(S=>n.jsxs("div",{className:"opacity-70 hover:opacity-100 transition-opacity grayscale hover:grayscale-0 relative group",children:[n.jsx(ru,{raid:S,onToggleStep:e.toggleRaidStep}),n.jsxs("div",{className:"absolute -right-2 -top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[n.jsx("button",{onClick:()=>e.archiveRaid(S.id),className:"bg-life-black border border-life-muted/30 text-life-muted hover:text-life-text p-1.5 rounded-full shadow-sm",title:"Move to Archive",children:n.jsx(bo,{size:12})}),n.jsx("button",{onClick:()=>e.deleteRaid(S.id),className:"bg-life-black border border-life-muted/30 text-life-muted hover:text-life-hard p-1.5 rounded-full shadow-sm",title:"Delete Log",children:n.jsx(Rt,{size:12})})]})]},S.id))})]})]})},cu="LIFE_OS_SHOP_DATA",dT=[{id:"item_shield",title:"Streak Shield",description:"Prevents your streak from resetting if you miss a day.",cost:1e3,type:"system",icon:"Shield",isInfinite:!0}],Q0=U.createContext(void 0),uT=({children:i})=>{const{state:e,dispatch:l}=ke(),{user:o}=e,r=o.preferences.soundEnabled,d=()=>{try{const N=localStorage.getItem(cu);if(N)return JSON.parse(N)}catch(N){console.warn("Failed to load shop:",N)}return dT},[u,h]=U.useState(d);U.useEffect(()=>{const N=setTimeout(()=>{(u.length>0||localStorage.getItem(cu))&&localStorage.setItem(cu,JSON.stringify(u))},500);return()=>clearTimeout(N)},[u]),U.useEffect(()=>{h(N=>{const C=new Set,E=[];for(const w of N)C.has(w.id)||(C.add(w.id),E.push(w));return E.length!==N.length?(console.log(" ShopContext: Removed duplicate items."),E):N})},[]);const g=N=>{const C=u.find(H=>H.id===N);if(!C)return!1;if(o.gold<C.cost)return xe("error",r),l.addToast("Insufficient Funds","error"),!1;if(N==="item_shield"&&o.shields>=3)return l.addToast(" Max Shield Capacity (3) Reached","error"),xe("error",r),!1;if((C.type==="system"||C.type==="artifact")&&!C.isInfinite&&o.inventory.includes(N))return l.addToast("Already Owned","error"),!1;const w={gold:o.gold-C.cost};if(N==="item_shield")w.shields=o.shields+1,l.addToast(`Shield Acquired! (${w.shields}/3)`,"info");else if(C.type==="redemption"){const{updatedLog:H,newAverage:_,redeemedDate:P}=J1(o.honorDailyLog,e.ui.debugDate);if(!P)return l.addToast("Honor is already perfect.","info"),!1;w.honorDailyLog=H,w.honor=_,l.addToast(`Honor Restored for ${P} (+100%)`,"level-up"),xe("level-up",r)}else if(C.type==="system"&&!C.isInfinite)if(w.inventory=[...o.inventory,N],N==="item_theme_gold"){const H={id:"gold",name:"Midas Touch",colors:{"--color-life-black":"#1a1200","--color-life-paper":"#261a00","--color-life-gold":"#ffd700","--color-life-text":"#fffae6"}};l.addTheme(H),l.setTheme("gold"),l.addToast("Gold Theme Activated","success")}else if(N==="item_theme_cyberpunk"){const H={id:"cyberpunk",name:"Neon City",colors:{"--color-life-black":"#020617","--color-life-paper":"#0f172a","--color-life-gold":"#22d3ee","--color-life-text":"#e0f2fe"}};l.addTheme(H),l.setTheme("cyberpunk"),l.addToast("Cyberpunk Protocol Activated","level-up")}else l.addToast(`Acquired: ${C.title}`,"success");else C.type==="artifact"?(w.inventory=[...o.inventory,N],l.addToast(`Artifact Acquired: ${C.title}`,"success"),setTimeout(()=>l.addToast("Equip it in Profile to activate.","info"),1500)):C.id==="item_potion_xp"?(w.inventory=[...o.inventory,N],l.addToast("Potion stored in Inventory","success")):C.id==="item_battery"?(w.shields=3,l.addToast("Shields Fully Recharged!","level-up")):(w.inventory=[...o.inventory,N],l.addToast(`Voucher Acquired: ${C.title}`,"success"));const I={id:`log_${Date.now()}`,itemId:C.id,title:C.title,cost:C.cost,timestamp:new Date().toISOString()};return w.purchaseHistory=[I,...o.purchaseHistory||[]].slice(0,50),l.updateUser(w),xe("coin",r),C.isInfinite||h(H=>H.filter(_=>_.id!==N)),!0},m=N=>{h(C=>{const E=C.findIndex(w=>w.id===N.id);if(E>=0){const w=[...C];return w[E]=N,w}return C.some(w=>w.title===N.title)?C:[...C,N]}),xe("click",r)},y=N=>{h(C=>{let E=[...C];return N.forEach(w=>{const I=E.findIndex(H=>H.id===w.id);I>=0?E[I]=w:E.some(H=>H.title===w.title)||E.push(w)}),E}),xe("level-up",r)},v=N=>{confirm("Remove this item from the market?")&&(h(C=>C.filter(E=>E.id!==N)),xe("delete",r))},S=N=>{h(N),l.addToast("Market Restored","success")};return n.jsx(Q0.Provider,{value:{shopState:{storeItems:u},shopDispatch:{buyItem:g,addStoreItem:m,addStoreItems:y,deleteStoreItem:v,restoreData:S}},children:i})},jr=()=>{const i=U.useContext(Q0);if(i===void 0)throw new Error("useShop must be used within a ShopProvider");return i},fT=({icon:i,size:e=24})=>{switch(i){case"Shield":return n.jsx(ot,{size:e});case"Flask":return n.jsx(L0,{size:e});case"Coffee":return n.jsx(I0,{size:e});case"Palette":return n.jsx(Dt,{size:e});case"Burger":return n.jsx(w2,{size:e});case"Game":return n.jsx(XS,{size:e});default:return n.jsx(Gu,{size:e})}},$a=({item:i,canAfford:e,onBuy:l,onInfo:o})=>n.jsxs("div",{onClick:()=>o(i),className:`
        relative flex flex-col p-4 rounded-xl border bg-life-paper transition-all duration-300 group cursor-pointer
        ${e?"border-life-muted/30 hover:border-life-gold/50 shadow-lg hover:shadow-life-gold/5":"border-life-muted/10 opacity-60"}
    `,children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsx("div",{className:`p-3 rounded-lg border bg-life-black transition-colors ${e?"border-life-gold/20 text-life-gold":"border-life-muted/20 text-life-muted"}`,children:n.jsx(fT,{icon:i.icon,size:24})}),n.jsxs("div",{className:`px-2 py-1 rounded text-xs font-mono font-bold border ${e?"bg-life-gold/10 text-life-gold border-life-gold/20":"bg-life-muted/10 text-life-muted border-life-muted/20"}`,children:[i.cost," G"]})]}),n.jsx("h3",{className:"font-bold text-life-text mb-1 truncate",children:i.title}),n.jsx("p",{className:"text-xs text-life-muted leading-relaxed mb-4 flex-1 line-clamp-2",children:i.description}),n.jsx("button",{onClick:r=>{r.stopPropagation(),e&&l(i.id)},disabled:!e,className:`
            w-full py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all active:scale-95
            ${e?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_10px_rgba(251,191,36,0.2)]":"bg-life-muted/10 text-life-muted cursor-not-allowed"}
        `,children:e?"Buy":"Locked"}),n.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 overflow-hidden pointer-events-none",children:n.jsx("div",{className:`absolute top-0 right-0 w-4 h-4 -mr-2 -mt-2 rotate-45 transform ${e?"bg-life-gold":"bg-life-muted"}`})})]}),qu=({icon:i,size:e=16})=>{switch(i){case"Shield":return n.jsx(ot,{size:e});case"Flask":return n.jsx(L0,{size:e});case"Coffee":return n.jsx(I0,{size:e});case"Palette":return n.jsx(Dt,{size:e});case"Burger":return n.jsx(Ue,{size:e});case"Gift":return n.jsx(O0,{size:e});case"Zap":return n.jsx(Ue,{size:e});case"Scroll":return n.jsx($N,{size:e});default:return n.jsx(Gu,{size:e})}},pT=()=>{const{state:i}=ke(),{shopState:e,shopDispatch:l}=jr(),{storeItems:o}=e,{user:r}=i,[d,u]=U.useState(!1),[h,g]=U.useState(""),[m,y]=U.useState(100),[v,S]=U.useState(null),[N,C]=U.useState([]),E=o.filter(M=>M.type==="system"),w=o.filter(M=>M.type==="artifact"),I=o.filter(M=>M.type==="redemption"),H=o.filter(M=>M.type==="custom"),_=(M,j)=>{if(l.buyItem(M)){const B=Array.from({length:12}).map((q,G)=>({id:Date.now()+G,x:j.clientX,y:j.clientY}));C(q=>[...q,...B])}};U.useEffect(()=>{if(N.length>0){const M=setTimeout(()=>C([]),1e3);return()=>clearTimeout(M)}},[N]);const P=M=>{if(M.preventDefault(),!h.trim()||m<0)return;const j={id:`cust_${Date.now()}`,title:h,description:"Custom User Reward",cost:Math.max(0,m),type:"custom",icon:"Gift",isInfinite:!0};l.addStoreItem(j),g(""),u(!1)};return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500 relative",children:[N.map(M=>n.jsx("div",{className:"fixed w-2 h-2 rounded-full animate-[particle_0.8s_ease-out_forwards] pointer-events-none z-[100]",style:{left:M.x,top:M.y,backgroundColor:["#fbbf24","#ffffff","#10b981"][Math.floor(Math.random()*3)],boxShadow:"0 0 10px currentColor","--tx":`${(Math.random()-.5)*200}px`,"--ty":`${(Math.random()-1)*200}px`}},M.id)),n.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"THE BAZAAR"}),n.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:"Exchange Gold for Power & Pleasure"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-life-gold bg-life-gold/5 px-3 py-1.5 rounded-lg border border-life-gold/20 shadow-[0_0_15px_rgba(251,191,36,0.1)]",children:[n.jsx(yo,{size:16,className:"text-life-gold"}),n.jsx("span",{className:"font-mono font-bold text-lg",children:r.gold})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1",children:[n.jsx(dS,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"System Upgrades"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:E.map(M=>n.jsx("div",{onClick:j=>{},children:n.jsx($a,{item:M,canAfford:r.gold>=M.cost,onBuy:j=>{const z={clientX:window.innerWidth/2,clientY:window.innerHeight/2};_(j,z)},onInfo:j=>S(j)})},M.id))})]}),w.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1",children:[n.jsx(ot,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Rare Artifacts"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(M=>n.jsx("div",{children:n.jsx($a,{item:M,canAfford:r.gold>=M.cost,onBuy:j=>{const z={clientX:window.innerWidth/2,clientY:window.innerHeight/2};_(j,z)},onInfo:j=>S(j)})},M.id))})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted",children:[n.jsx(O0,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Real World Rewards"})]}),n.jsxs("button",{onClick:()=>u(!d),className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white uppercase font-bold",children:[n.jsx(gt,{size:12})," Add Custom"]})]}),d&&n.jsxs("form",{onSubmit:P,className:"mb-4 bg-life-black border border-life-muted/20 p-3 rounded-lg flex gap-2 animate-in fade-in",children:[n.jsx("input",{type:"text",placeholder:"Reward Name...",value:h,onChange:M=>g(M.target.value),className:"flex-1 bg-transparent border-b border-life-muted/30 text-xs text-white focus:outline-none focus:border-life-gold px-2",autoFocus:!0}),n.jsx("input",{type:"number",placeholder:"Cost",value:m,min:0,onChange:M=>y(Number(M.target.value)),className:"w-16 bg-transparent border-b border-life-muted/30 text-xs text-white focus:outline-none focus:border-life-gold text-center"}),n.jsx("button",{type:"submit",className:"text-life-gold",children:n.jsx(gt,{size:16})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.map(M=>n.jsxs("div",{className:"relative group",children:[n.jsx($a,{item:M,canAfford:r.gold>=M.cost,onBuy:j=>{const z={clientX:window.innerWidth/2,clientY:window.innerHeight/2};_(j,z)},onInfo:j=>S(j)}),n.jsx("button",{onClick:()=>l.deleteStoreItem(M.id),className:"absolute -top-2 -right-2 bg-life-black border border-life-hard/30 text-life-hard p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(Ie,{size:12})})]},M.id)),H.map(M=>n.jsxs("div",{className:"relative group",children:[n.jsx($a,{item:M,canAfford:r.gold>=M.cost,onBuy:j=>{const z={clientX:window.innerWidth/2,clientY:window.innerHeight/2};_(j,z)},onInfo:j=>S(j)}),n.jsx("button",{onClick:()=>l.deleteStoreItem(M.id),className:"absolute -top-2 -right-2 bg-life-black border border-life-hard/30 text-life-hard p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(Ie,{size:12})})]},M.id)),H.length===0&&I.length===0&&n.jsx("div",{className:"col-span-2 py-8 text-center border-2 border-dashed border-life-muted/10 rounded-xl",children:n.jsx("p",{className:"text-[10px] text-life-muted",children:"No custom rewards defined."})})]})]}),n.jsxs("div",{className:"mt-8 pt-8 border-t border-life-muted/10",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1 opacity-60",children:[n.jsx(sN,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Transaction Log (Last 100)"})]}),n.jsxs("div",{className:"space-y-1 opacity-70",children:[r.purchaseHistory.map(M=>{const j=M.title.includes("[XP]"),z=M.cost<0,B=Math.abs(M.cost),q=z?"+":"-";let G="text-life-gold";j?G="text-life-easy":z?G="text-green-400":G="text-red-400";const Q=j?"XP":"G";return n.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-life-black border border-life-muted/10 text-[10px]",children:[n.jsx("span",{className:"text-life-text font-medium truncate flex-1 pr-2",children:M.title.replace("[XP] ","")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:`${G} font-mono font-bold`,children:[q,B," ",Q]}),n.jsx("span",{className:"text-life-muted opacity-50 text-[9px]",children:new Date(M.timestamp).toLocaleDateString()})]})]},M.id)}),r.purchaseHistory.length===0&&n.jsx("p",{className:"text-[10px] text-life-muted italic text-center",children:"No transaction data."})]})]}),v&&n.jsx("div",{onClick:()=>S(null),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:n.jsxs("div",{onClick:M=>M.stopPropagation(),className:"bg-life-paper w-full max-w-xs rounded-xl border border-life-muted/20 p-5 shadow-2xl relative",children:[n.jsx("button",{onClick:()=>S(null),className:"absolute top-3 right-3 text-life-muted hover:text-life-text",children:n.jsx(Ie,{size:20})}),n.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-life-black border border-life-muted/30 flex items-center justify-center mb-3 text-life-gold shadow-inner",children:n.jsx(qu,{icon:v.icon,size:40})}),n.jsx("h3",{className:"font-black uppercase tracking-widest text-life-text",children:v.title}),n.jsxs("div",{className:"mt-2 flex items-center gap-2 justify-center",children:[n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded bg-life-muted/10 text-life-muted border border-life-muted/20",children:v.type}),n.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded bg-life-gold/10 text-life-gold border border-life-gold/20",children:[v.cost," G"]})]}),n.jsx("p",{className:"text-xs text-life-muted mt-4 leading-relaxed",children:v.description}),v.effect&&n.jsxs("div",{className:"mt-4 w-full bg-life-black/50 p-3 rounded border border-life-muted/10 text-left",children:[n.jsxs("h4",{className:"text-[9px] font-bold uppercase text-life-muted mb-1 flex items-center gap-1",children:[n.jsx(We,{size:10})," Effect"]}),n.jsxs("p",{className:"text-[10px] text-life-text font-mono",children:[v.effect.type==="xp_boost"&&`+${v.effect.value*100}% XP Gain`,v.effect.type==="gold_boost"&&`+${v.effect.value*100}% Gold Gain`,v.effect.stat&&` (${v.effect.stat})`]})]})]}),n.jsx("button",{onClick:()=>{if(r.gold>=v.cost){const M={clientX:window.innerWidth/2,clientY:window.innerHeight/2};_(v.id,M),S(null)}},disabled:r.gold<v.cost,className:`
                        w-full py-3 font-black uppercase text-xs rounded-xl shadow-lg transition-all active:scale-95
                        ${r.gold>=v.cost?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}
                    `,children:r.gold>=v.cost?"Purchase Item":"Insufficient Funds"})]})}),n.jsx("style",{children:`
        @keyframes particle {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
      `})]})},mT=[{id:"bdg_ascendant",name:"The Ascendant",icon:"",description:"Rise through the ranks of existence.",category:"progression",triggerType:"metric",metricKey:"level",levels:[{tier:"silver",target:5,quote:"You have awakened.",rewards:{xp:100,gold:50}},{tier:"gold",target:10,quote:"Power is not given, it is taken.",rewards:{xp:500,gold:200}},{tier:"diamond",target:25,quote:"You are no longer a spectator.",rewards:{xp:2e3,gold:1e3}},{tier:"crimson",target:50,quote:"Godhood is a lonely path.",rewards:{xp:1e4,gold:5e3}}]},{id:"bdg_grunt",name:"The Grunt",icon:"",description:"Complete missions of Easy difficulty.",category:"combat",triggerType:"metric",metricKey:`tasksByDifficulty.${_e.EASY}`,levels:[{tier:"silver",target:10,quote:"Do the work. Don't complain.",rewards:{xp:50,gold:20}},{tier:"gold",target:50,quote:"Discipline is the bridge between goals and accomplishment.",rewards:{xp:200,gold:100}},{tier:"diamond",target:200,quote:"Routine is the weapon of the disciplined.",rewards:{xp:1e3,gold:500}},{tier:"crimson",target:500,quote:"The mundane has become your masterpiece.",rewards:{xp:5e3,gold:2e3}}]},{id:"bdg_warlord",name:"The Warlord",icon:"",description:"Complete missions of Hard difficulty.",category:"combat",triggerType:"metric",metricKey:`tasksByDifficulty.${_e.HARD}`,levels:[{tier:"silver",target:5,quote:"Pain is weakness leaving the body.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"Hardship is the forge of character.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:100,quote:"You do not survive the storm. You are the storm.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:250,quote:"Impossible is just an opinion.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_conqueror",name:"The Conqueror",icon:"",description:"Total Operations (Raids) Conquered.",category:"warfare",triggerType:"metric",metricKey:"totalRaidsWon",levels:[{tier:"silver",target:1,quote:"First blood.",rewards:{xp:150,gold:100}},{tier:"gold",target:5,quote:"Strategy requires sacrifice.",rewards:{xp:750,gold:500}},{tier:"diamond",target:20,quote:"Kings play chess on a map of the world.",rewards:{xp:3e3,gold:2e3}},{tier:"crimson",target:50,quote:"History is written by the victors.",rewards:{xp:15e3,gold:1e4}}]},{id:"bdg_immortal",name:"The Immortal",icon:"",description:"Maintain a daily login streak.",category:"consistency",triggerType:"metric",metricKey:"highestStreak",levels:[{tier:"silver",target:7,quote:"Momentum is building.",rewards:{xp:100,gold:50}},{tier:"gold",target:30,quote:"Consistency is the only currency that matters.",rewards:{xp:500,gold:250}},{tier:"diamond",target:90,quote:"You have transcended motivation.",rewards:{xp:2e3,gold:1e3}},{tier:"crimson",target:365,quote:"Time bows to your will.",rewards:{xp:1e4,gold:5e3}}]},{id:"bdg_phoenix",name:"The Phoenix",icon:"",description:"Reset the system and start over.",category:"consistency",triggerType:"metric",metricKey:"resetsCount",levels:[{tier:"silver",target:1,quote:"From the ashes, we rise.",rewards:{xp:0,gold:500}},{tier:"gold",target:3,quote:"Failure is not the end.",rewards:{xp:0,gold:1e3}},{tier:"diamond",target:5,quote:"Destruction is a form of creation.",rewards:{xp:0,gold:3e3}},{tier:"crimson",target:10,quote:"You are eternal.",rewards:{xp:0,gold:1e4}}]},{id:"bdg_deep_focus",name:"Deep Worker",icon:"",description:'Maintain a streak on any "Deep Work" habit.',category:"special",triggerType:"habit",metricKey:"Deep Work",levels:[{tier:"silver",target:7,quote:"Focus is the new oil.",rewards:{xp:300,gold:150}},{tier:"gold",target:21,quote:"Distraction is the enemy of greatness.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:66,quote:"The mind is a laser.",rewards:{xp:5e3,gold:2500}},{tier:"crimson",target:100,quote:"Flow state is your home.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_gold_hoarder",name:"Gold Hoarder",icon:"",description:"Total lifetime gold earned.",category:"economy",triggerType:"metric",metricKey:"totalGoldEarned",levels:[{tier:"silver",target:1e3,quote:"The first coin is the heaviest.",rewards:{xp:100,gold:100}},{tier:"gold",target:1e4,quote:"Wealth is a tool, not a master.",rewards:{xp:500,gold:500}},{tier:"diamond",target:1e5,quote:"You can buy armies.",rewards:{xp:2e3,gold:2e3}},{tier:"crimson",target:1e6,quote:"Midas touches you.",rewards:{xp:1e4,gold:1e4}}]},{id:"bdg_stoic",name:"The Stoic",icon:"",description:"Reach high Discipline (DIS).",category:"mastery",triggerType:"stat",metricKey:W.DIS,levels:[{tier:"silver",target:10,quote:"Control your mind.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"Emotion is a choice.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:50,quote:"Stone does not bleed.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:100,quote:"You are the mountain.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_titan",name:"The Titan",icon:"",description:"Reach high Strength (STR).",category:"mastery",triggerType:"stat",metricKey:W.STR,levels:[{tier:"silver",target:10,quote:"Lift the weight.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"The body obeys the will.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:50,quote:"Force of nature.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:100,quote:"Atlas shrugs.",rewards:{xp:2e4,gold:1e4}}]}],W0=U.createContext(void 0),hT=()=>{const i=new Date,e=l=>l.toString().padStart(2,"0");return`${i.getFullYear().toString().slice(-2)}${e(i.getMonth()+1)}${e(i.getDate())}${e(i.getHours())}${e(i.getMinutes())}`},xT=({children:i})=>{var y,v,S;const{state:e,dispatch:l}=ke(),{skillState:o}=vt(),{habitState:r}=Qt(),{raidState:d}=Ii(),{user:u}=e,h=()=>[...mT,...e.badgesRegistry],g=()=>{let N=!1,C={...u};C.badgeTiers||(C.badgeTiers={}),C.badgeHistory||(C.badgeHistory={}),h().forEach(w=>{var H;let I=0;if(w.triggerType==="metric"&&w.metricKey){const _=w.metricKey.split(".");_.length===1?I=u.metrics[_[0]]||0:_.length===2&&(I=((H=u.metrics[_[0]])==null?void 0:H[_[1]])||0),w.metricKey==="level"&&(I=u.level),w.metricKey==="highestStreak"&&(I=Math.max(u.streak,u.metrics.highestStreak))}else if(w.triggerType==="stat"&&w.metricKey)I=u.stats[w.metricKey]||0;else if(w.triggerType==="skill"&&w.metricKey){const _=o.skills.find(P=>P.id===w.metricKey);_&&(I=_.level)}else if(w.triggerType==="habit"&&w.metricKey){const _=r.habits.find(P=>P.title.toLowerCase().includes(w.metricKey.toLowerCase()));_&&(I=_.streak)}else if(w.triggerType==="raid"&&w.metricKey){const _=d.raids.find(P=>P.title.toLowerCase().includes(w.metricKey.toLowerCase()));_&&(I=_.progress)}w.levels.forEach(_=>{var j;const P=_.tier;C.badgeTiers[w.id];const M=(j=C.badgeHistory[w.id])==null?void 0:j[P];I>=_.target&&!M&&(N=!0,C.badgeTiers[w.id]=P,C.badges.includes(w.id)||C.badges.push(w.id),C.badgeHistory[w.id]||(C.badgeHistory[w.id]={}),C.badgeHistory[w.id][P]=hT(),C.currentXP+=_.rewards.xp,C.gold+=_.rewards.gold,setTimeout(()=>{l.setModal("badgeUnlock",{badge:w,tier:P,rewards:_.rewards}),xe("level-up",!0)},500))})}),N&&l.updateUser(C)};U.useEffect(()=>{const N=setTimeout(()=>{g()},1e3);return()=>clearTimeout(N)},[u.level,u.streak,(y=u.metrics)==null?void 0:y.totalTasksCompleted,(v=u.metrics)==null?void 0:v.totalGoldEarned,(S=u.metrics)==null?void 0:S.totalRaidsWon,JSON.stringify(u.stats),JSON.stringify(o.skills.map(N=>N.level)),JSON.stringify(r.habits.map(N=>N.streak)),JSON.stringify(d.raids.map(N=>N.progress))]);const m=()=>h().map(C=>{var H,_,P,M;let E=0;if(C.triggerType==="metric"&&C.metricKey){const j=C.metricKey.split(".");j.length===1?E=u.metrics[j[0]]||0:E=((H=u.metrics[j[0]])==null?void 0:H[j[1]])||0,C.metricKey==="level"&&(E=u.level),C.metricKey==="highestStreak"&&(E=Math.max(u.streak,((_=u.metrics)==null?void 0:_.highestStreak)||0))}else if(C.triggerType==="stat"&&C.metricKey)E=u.stats[C.metricKey]||0;else if(C.triggerType==="skill"&&C.metricKey){const j=o.skills.find(z=>z.id===C.metricKey);j&&(E=j.level)}else if(C.triggerType==="habit"&&C.metricKey){const j=r.habits.find(z=>z.title.toLowerCase().includes(C.metricKey.toLowerCase()));j&&(E=j.streak)}else if(C.triggerType==="raid"&&C.metricKey){const j=d.raids.find(z=>z.title.toLowerCase().includes(C.metricKey.toLowerCase()));j&&(E=j.progress)}const w=((P=u.badgeTiers)==null?void 0:P[C.id])||null;let I=C.levels[0];return w==="silver"&&(I=C.levels[1]),w==="gold"&&(I=C.levels[2]),w==="diamond"&&(I=C.levels[3]),w==="crimson"&&(I=null),{badge:C,currentValue:E,isUnlocked:!!w,currentTier:w,nextTier:I,history:((M=u.badgeHistory)==null?void 0:M[C.id])||{}}});return n.jsx(W0.Provider,{value:{getAllBadges:m,checkBadges:g},children:i})},Z0=()=>{const i=U.useContext(W0);if(!i)throw new Error("useBadges must be used within BadgeProvider");return i},gT=({user:i,dynamicTitle:e,featuredBadgesData:l})=>n.jsxs("div",{className:"bg-life-paper border border-life-muted/20 rounded-xl p-6 text-center mb-6 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-life-gold/5 to-transparent pointer-events-none"}),n.jsxs("div",{className:"w-24 h-24 mx-auto bg-life-black rounded-full border-4 border-life-muted/30 flex items-center justify-center mb-4 relative shadow-2xl z-10 transition-transform select-none",children:[n.jsx(Vu,{size:48,className:"text-life-silver"}),n.jsxs("div",{className:"absolute -bottom-2 bg-life-gold text-life-black text-xs font-black px-2 py-0.5 rounded shadow-sm border border-life-black",children:["Lvl ",i.level]})]}),n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase relative z-10",children:i.name}),n.jsx("p",{className:"text-sm text-life-gold font-mono tracking-widest opacity-80 mb-5 relative z-10",children:e}),l.length>0&&n.jsx("div",{className:"flex justify-center gap-2 mb-5 relative z-10",children:l.map(o=>{const r=o.currentTier;let d="text-gray-400";return r==="gold"&&(d="text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]"),r==="diamond"&&(d="text-cyan-400 drop-shadow-[0_0_5px_rgba(34,211,238,0.5)]"),r==="crimson"&&(d="text-red-500 drop-shadow-[0_0_8px_rgba(220,38,38,0.6)]"),n.jsxs("div",{className:"relative group/badge cursor-help",title:o.badge.name,children:[n.jsx("div",{className:`w-8 h-8 rounded-full bg-life-black border border-life-muted/30 flex items-center justify-center ${d}`,children:n.jsx("span",{className:"text-sm",children:o.badge.icon})}),n.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-life-paper bg-current ${d}`})]},o.badge.id)})}),n.jsxs("div",{className:"bg-black/40 rounded-lg p-3 backdrop-blur-sm border border-life-muted/10 relative z-10",children:[n.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted mb-1 uppercase font-bold",children:[n.jsx("span",{children:"XP Progress"}),n.jsxs("span",{className:"text-life-gold",children:[i.currentXP," ",n.jsxs("span",{className:"text-life-muted",children:["/ ",i.targetXP]})]})]}),n.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-life-gold shadow-[0_0_10px_rgba(251,191,36,0.5)] transition-all duration-700",style:{width:`${Math.min(100,i.currentXP/i.targetXP*100)}%`}})})]})]}),bT=({items:i,onSelectItem:e})=>{const l=i.reduce((r,d)=>(r[d.id]||(r[d.id]={...d,count:0}),r[d.id].count+=1,r),{}),o=Object.values(l);return n.jsxs("div",{className:"mb-8",children:[n.jsxs("h3",{className:"text-xs font-bold text-life-muted uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(kN,{size:14})," Inventory (",i.length,")"]}),o.length>0?n.jsx("div",{className:"grid grid-cols-4 gap-2",children:o.map(r=>n.jsxs("button",{onClick:()=>e(r),className:"aspect-square bg-life-paper rounded-xl border border-life-muted/20 flex flex-col items-center justify-center gap-1 hover:border-life-gold/50 hover:bg-life-muted/5 transition-all relative",children:[r.count>1&&n.jsxs("span",{className:"absolute top-1 right-1 bg-life-gold text-life-black text-[9px] font-black px-1.5 rounded-full shadow-sm",children:["x",r.count]}),n.jsx("div",{className:"text-life-gold",children:n.jsx(qu,{icon:r.icon,size:20})})]},r.id))}):n.jsx("div",{className:"text-center py-6 border border-dashed border-life-muted/20 rounded-xl",children:n.jsx("p",{className:"text-[10px] text-life-muted",children:"Inventory Empty"})})]})},yT=()=>{const[i,e]=U.useState(null),[l,o]=U.useState(!1);return U.useEffect(()=>{const d=u=>{u.preventDefault(),e(u),o(!0)};return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]),{isInstallable:l,promptInstall:async()=>{if(!i)return;i.prompt();const{outcome:d}=await i.userChoice;d==="accepted"&&(console.log("User accepted the install prompt"),e(null),o(!1))}}},vT=({user:i,dispatch:e,onExport:l,onImport:o,onForceSleep:r})=>{yT();const{skillState:d}=vt(),u=()=>{e.togglePreference("useSkillAsTitle")},h=g=>{const m=g.target.value;e.updateUser({preferences:{...i.preferences,linkedSkillId:m}})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ur,{size:14,className:"text-life-muted"}),n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Title Override"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-life-paper rounded-lg border border-life-muted/10",children:[n.jsx("label",{htmlFor:"title-override-toggle",className:"text-xs font-bold text-life-text",children:"Use Skill as Title"}),n.jsx("button",{id:"title-override-toggle",onClick:u,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${i.preferences.useSkillAsTitle?"bg-life-gold":"bg-life-muted/20"}`,children:n.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${i.preferences.useSkillAsTitle?"translate-x-6":"translate-x-1"}`})})]}),i.preferences.useSkillAsTitle&&n.jsx("div",{className:"animate-in fade-in duration-300",children:n.jsxs("select",{value:i.preferences.linkedSkillId||"",onChange:h,className:"w-full p-3 bg-life-paper border border-life-muted/20 rounded-lg text-xs font-bold text-life-text focus:outline-none focus:ring-2 focus:ring-life-gold/50",children:[n.jsx("option",{value:"",disabled:!0,children:"Select a Skill..."}),d.skills.map(g=>n.jsx("option",{value:g.id,children:g.title},g.id))]})})]}),n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Sr,{size:14,className:"text-life-muted"}),n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Data Persistence"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:l,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-gold/50 transition-all group",children:[n.jsx(lr,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Backup System"})]}),n.jsxs("button",{onClick:o,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-easy/50 transition-all group",children:[n.jsx(fr,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Restore Data"})]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 opacity-50",children:[n.jsx(cr,{size:10,className:"text-life-easy"}),n.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Local Storage Protocol Active"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>e.setModal("questForge"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-indigo-950/30 border border-indigo-500/30 hover:bg-indigo-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-indigo-500/20 rounded-lg text-indigo-400 group-hover:text-indigo-300",children:n.jsx(xt,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-200 group-hover:text-white",children:"Quest Forge (Tasks)"})]}),n.jsx("span",{className:"text-[8px] font-mono text-indigo-400/60 bg-indigo-950/50 px-2 py-1 rounded border border-indigo-500/10",children:"AI_TASK_GEN"})]}),n.jsxs("button",{onClick:()=>e.setModal("habitProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-emerald-950/30 border border-emerald-500/30 hover:bg-emerald-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-emerald-500/20 rounded-lg text-emerald-400 group-hover:text-emerald-300",children:n.jsx(Ue,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-200 group-hover:text-white",children:"Protocol Foundry (Habits)"})]}),n.jsx("span",{className:"text-[8px] font-mono text-emerald-400/60 bg-emerald-950/50 px-2 py-1 rounded border border-emerald-500/10",children:"AI_HABIT_GEN"})]}),n.jsxs("button",{onClick:()=>e.setModal("shopProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-pink-950/30 border border-pink-500/30 hover:bg-pink-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-pink-500/20 rounded-lg text-pink-400 group-hover:text-pink-300",children:n.jsx(V0,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-pink-200 group-hover:text-white",children:"Shop Archives"})]}),n.jsx("span",{className:"text-[8px] font-mono text-pink-400/60 bg-pink-950/50 px-2 py-1 rounded border border-pink-500/10",children:"AI_SHOP_DOCS"})]}),n.jsxs("button",{onClick:()=>e.setModal("economyProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-amber-950/30 border border-amber-500/30 hover:bg-amber-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-lg text-amber-400 group-hover:text-amber-300",children:n.jsx(yo,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-200 group-hover:text-white",children:"Treasury Archive (Economy)"})]}),n.jsx("span",{className:"text-[8px] font-mono text-amber-400/60 bg-amber-950/50 px-2 py-1 rounded border border-amber-500/10",children:"AI_ECON_DOCS"})]}),n.jsxs("button",{onClick:()=>e.setModal("raidProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-red-950/30 border border-red-500/30 hover:bg-red-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-red-500/20 rounded-lg text-red-400 group-hover:text-red-300",children:n.jsx(cr,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-red-200 group-hover:text-white",children:"The War Room (Raids)"})]}),n.jsx("span",{className:"text-[8px] font-mono text-red-400/60 bg-red-950/50 px-2 py-1 rounded border border-red-500/10",children:"AI_RAID_OPS"})]}),n.jsxs("button",{onClick:()=>e.setModal("codexArbiter"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-indigo-950/30 border border-indigo-500/30 hover:bg-indigo-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-indigo-500/20 rounded-lg text-indigo-400 group-hover:text-indigo-300",children:n.jsx(Cr,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-200 group-hover:text-white",children:"Codex Arbiter (Laws)"})]}),n.jsx("span",{className:"text-[8px] font-mono text-indigo-400/60 bg-indigo-950/50 px-2 py-1 rounded border border-indigo-500/10",children:"AI_CODEX_GEN"})]}),n.jsxs("button",{onClick:()=>e.setModal("badgeProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-yellow-950/30 border border-yellow-500/30 hover:bg-yellow-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-yellow-500/20 rounded-lg text-yellow-400 group-hover:text-yellow-300",children:n.jsx(ur,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-yellow-200 group-hover:text-white",children:"Badge Architect"})]}),n.jsx("span",{className:"text-[8px] font-mono text-yellow-400/60 bg-yellow-950/50 px-2 py-1 rounded border border-yellow-500/10",children:"AI_BADGE_GEN"})]}),n.jsxs("button",{onClick:()=>e.setModal("skillProtocol"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-blue-950/30 border border-blue-500/30 hover:bg-blue-900/40 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1.5 bg-blue-500/20 rounded-lg text-blue-400 group-hover:text-blue-300",children:n.jsx(xt,{size:16})}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-blue-200 group-hover:text-white",children:"Skill Tree Architect"})]}),n.jsx("span",{className:"text-[8px] font-mono text-blue-400/60 bg-blue-950/50 px-2 py-1 rounded border border-blue-500/10",children:"AI_SKILL_GEN"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:async()=>{const g=await k0();alert(g?"Notifications Enabled! ":"Notifications Denied or Not Supported ")},className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-gold/50 transition-all group",children:[n.jsx(an,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Enable Alerts"})]}),n.jsxs("button",{onClick:()=>nr(Date.now(),"Layn OS","System Test: Notifications Operational "),className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-easy/50 transition-all group",children:[n.jsx(Ue,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Test Alert"})]})]}),n.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-4 rounded-xl bg-life-black border border-life-muted/10 hover:bg-life-muted/5 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(H0,{size:16,className:"text-life-gold group-hover:rotate-180 transition-transform duration-700"}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-text",children:"Trigger Daily Reset"})]}),n.jsx("span",{className:"text-[8px] font-mono text-life-muted opacity-50",children:"MANUAL_OVERRIDE"})]}),n.jsxs("button",{onClick:()=>e.setModal("resetConfirm"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-red-950/10 border border-red-900/30 hover:bg-red-900/20 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(q0,{size:16,className:"text-red-500"}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-red-400",children:"Rebirth Protocol"})]}),n.jsx("span",{className:"text-[8px] font-mono text-red-900 font-bold",children:"DANGER_ZONE"})]})]}),n.jsx("div",{className:"text-center pt-4",children:n.jsx("p",{className:"text-[8px] text-life-muted font-mono opacity-40 uppercase tracking-[0.3em]",children:"LifeOS Neural Kernel v2.4.0 // Secured"})})]})},ST=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(al,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(al,{size:e})}},NT=({stats:i,maxVal:e=20})=>{const d=e,u=[W.DIS,W.STR,W.INT,W.CRT,W.PCE,W.EMT,W.CAM],h=(y,v,S=85)=>{const C=Math.PI*2/u.length*v-Math.PI/2,E=y/d*S,w=150+E*Math.cos(C),I=150+E*Math.sin(C);return{x:w,y:I}},g=u.map((y,v)=>{const S=Math.min(i[y],d),{x:N,y:C}=h(S,v);return`${N},${C}`}).join(" "),m=[.25,.5,.75,1].map(y=>u.map((v,S)=>{const{x:N,y:C}=h(d*y,S);return`${N},${C}`}).join(" "));return n.jsx("div",{className:"relative flex justify-center animate-in fade-in zoom-in-95 duration-500",children:n.jsxs("svg",{width:300,height:300,viewBox:"0 0 300 300",className:"overflow-visible",children:[m.map((y,v)=>n.jsx("polygon",{points:y,fill:"none",stroke:"var(--color-life-text)",strokeWidth:"1",opacity:"0.1"},v)),u.map((y,v)=>{const{x:S,y:N}=h(d,v);return n.jsx("line",{x1:150,y1:150,x2:S,y2:N,stroke:"var(--color-life-text)",strokeWidth:"1",opacity:"0.1"},v)}),n.jsx("polygon",{points:g,fill:"rgba(251, 191, 36, 0.15)",stroke:"#fbbf24",strokeWidth:"2",className:"drop-shadow-[0_0_15px_rgba(251,191,36,0.3)]"}),u.map((y,v)=>{const S=h(d,v,125),N=i[y],C=tt[y];return n.jsx("foreignObject",{x:S.x-30,y:S.y-25,width:"60",height:"50",className:"overflow-visible",children:n.jsxs("div",{className:"flex flex-col items-center justify-center text-center group cursor-pointer hover:scale-110 transition-transform",children:[n.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-life-black border shadow-sm mb-1 z-10 relative",style:{borderColor:`${C}50`,color:C,boxShadow:`0 0 10px ${C}20`},children:n.jsx(ST,{stat:y,size:12})}),n.jsxs("div",{className:"flex flex-col leading-none relative z-10 bg-life-black/80 px-1 rounded backdrop-blur-sm",children:[n.jsx("span",{className:"text-[8px] font-black uppercase tracking-wider text-life-muted group-hover:text-life-text transition-colors",children:y}),n.jsx("span",{className:"text-[10px] font-mono font-bold text-life-text group-hover:text-life-gold transition-colors",children:N})]})]})},y)}),u.map((y,v)=>{const S=Math.min(i[y],d),N=h(S,v);return n.jsx("circle",{cx:N.x,cy:N.y,r:"3",fill:"#fbbf24",stroke:"#000",strokeWidth:"1"},`dot-${v}`)})]})})},TT=i=>{switch(i){case W.STR:return Xt;case W.INT:return xt;case W.DIS:return We;case W.CRT:return Dt;case W.PCE:return ot;case W.EMT:return fi;case W.CAM:return al;default:return al}},CT=i=>{switch(i){case W.STR:return"#ef4444";case W.INT:return"#8b5cf6";case W.DIS:return"#3b82f6";case W.CRT:return"#ec4899";case W.PCE:return"#22c55e";case W.EMT:return"#f97316";case W.CAM:return"#f59e0b";default:return"#6b7280"}},wT=i=>{const e={[W.STR]:i.STR||0,[W.INT]:i.INT||0,[W.DIS]:i.DIS||0,[W.CRT]:i.CRT||0,[W.PCE]:i.PCE||0,[W.EMT]:i.EMT||0,[W.CAM]:i.CAM||0},l=Math.max(...Object.values(e));let o=20;return l>=1280?o=2560:l>=640?o=1280:l>=320?o=640:l>=160?o=320:l>=80?o=160:l>=40?o=80:l>=20&&(o=40),{xpValues:e,globalTarget:o}},kT={[W.STR]:"Strength",[W.INT]:"Intelligence",[W.DIS]:"Discipline",[W.CRT]:"Creativity",[W.PCE]:"Peace",[W.EMT]:"Emotion",[W.CAM]:"Charisma"},_T=({stat:i,xp:e,target:l})=>{const o=l>0?Math.min(e/l*100,100):0,r=TT(i),d=CT(i),u=kT[i]||i;return n.jsxs("div",{className:"flex flex-col w-full mb-3 group",children:[n.jsxs("div",{className:"flex justify-between items-end px-1 mb-1.5",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-life-black border border-life-muted/20 flex items-center justify-center shadow-sm group-hover:border-life-muted/40 transition-colors",children:n.jsx(r,{size:16,style:{color:d}})}),n.jsxs("div",{className:"flex flex-col leading-tight",children:[n.jsx("span",{className:"font-black text-xs text-life-text uppercase tracking-widest",children:u}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-mono text-life-muted font-bold opacity-50",children:i}),n.jsxs("span",{className:"text-[9px] font-mono text-life-gold font-bold bg-life-gold/10 px-1 rounded",children:["LVL ",Math.floor(e/20)+1]})]})]})]}),n.jsxs("p",{className:"text-xs font-mono text-life-text text-right",children:[n.jsx("span",{style:{color:d},className:"font-black text-sm",children:e.toFixed(0)}),n.jsxs("span",{className:"text-life-muted/40 text-[10px] ml-1",children:["/ ",l]})]})]}),n.jsxs("div",{className:"w-full bg-black h-3.5 rounded-full overflow-hidden border border-life-muted/20 relative shadow-inner",children:[n.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out relative z-10",style:{width:`${o}%`,backgroundColor:d}}),n.jsx("div",{className:"absolute inset-0 opacity-30 blur-[4px]",style:{width:`${o}%`,backgroundColor:d}})]})]})},ET=({user:i})=>{const[e,l]=U.useState("data"),{xpValues:o,globalTarget:r}=wT(i.stats),d=[W.DIS,W.STR,W.INT,W.CRT,W.PCE,W.EMT,W.CAM];return n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-5 mb-6 shadow-lg shadow-black/50 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-life-muted/30 rounded-tl-lg"}),n.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-life-muted/30 rounded-tr-lg"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-life-muted/30 rounded-bl-lg"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-life-muted/30 rounded-br-lg"}),n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-life-text flex items-center gap-2",children:[n.jsx("span",{className:"text-life-gold",children:""})," Attribute Analysis"]}),n.jsx("p",{className:"text-[9px] text-life-muted uppercase font-mono tracking-[0.1em] mt-1 opacity-60",children:"Neural_Net_v1.4 // Connected"})]}),n.jsxs("div",{className:"flex items-center bg-black border border-life-muted/20 p-1 rounded-lg gap-1",children:[n.jsxs("button",{onClick:()=>l("graph"),className:`flex items-center gap-2 px-3 py-1.5 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${e==="graph"?"bg-life-gold text-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:[n.jsx(iN,{size:12,className:e==="graph"?"fill-black stroke-black":""}),"Graph"]}),n.jsxs("button",{onClick:()=>l("data"),className:`flex items-center gap-2 px-3 py-1.5 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${e==="data"?"bg-life-gold text-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:[n.jsx(hN,{size:14}),"Data"]})]})]}),n.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:e==="graph"?n.jsx("div",{className:"relative h-64 flex items-center justify-center",children:n.jsx(NT,{stats:i.stats,maxVal:r})}):n.jsx("div",{className:"space-y-4 py-2",children:d.map(u=>n.jsx(_T,{stat:u,xp:o[u],target:r},u))})})]})},jT=()=>{var B;const{state:i,dispatch:e}=ke(),{shopState:l}=jr(),{skillState:o}=vt(),{taskState:r}=Kt(),{habitState:d}=Qt(),{raidState:u}=Ii(),{campaignState:h}=ul(),{getAllBadges:g}=Z0(),{user:m}=i,{storeItems:y}=l,[v,S]=U.useState(null),N=(o==null?void 0:o.skills)||[],C=N.length>0?N.reduce((q,G)=>q.level>G.level?q:G,N[0]):null,E=C?`${C.rank} ${C.title}`:m.title,w=m.inventory.map(q=>y.find(G=>G.id===q)).filter(Boolean),I=((B=m.badges)==null?void 0:B.length)||0,H=g(),_=(m.featuredBadges||[]).map(q=>H.find(G=>G.badge.id===q)).filter(Boolean),P=()=>{v&&(e.useItem(v),S(null))},M=()=>{const q={user:i.user,badgesRegistry:i.badgesRegistry,ui:{...i.ui,activeModal:"none",modalData:null},tasks:r.tasks,taskCategories:r.categories,laws:r.laws,habits:d.habits,habitCategories:d.categories,raids:u.raids,skills:o.skills,storeItems:l.storeItems,campaign:h.campaign,meta:{timestamp:new Date().toISOString(),version:"2.0",type:"full_backup"}},G=JSON.stringify(q,null,2);e.setModal("dataExchange",{mode:"export",title:"System Backup",data:G})},j=()=>{e.setModal("dataExchange",{mode:"import",title:"System Uplink"})},z=()=>{e.triggerDailyReset(),e.addToast("System Cycle Reset Initiated","success")};return n.jsxs("div",{className:"pb-24 animate-in fade-in zoom-in-95 duration-500 relative",children:[n.jsx(gT,{user:m,dynamicTitle:E,featuredBadgesData:_}),n.jsxs("button",{onClick:()=>e.setView("hall_of_fame"),className:"w-full mb-6 bg-life-black border border-life-muted/20 rounded-xl p-4 flex items-center justify-between hover:border-life-gold/50 hover:bg-life-gold/5 transition-all group shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-life-crimson/10 flex items-center justify-center text-life-crimson border border-life-crimson/20 group-hover:scale-110 transition-transform",children:n.jsx(On,{size:20})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"text-xs font-black text-life-text uppercase tracking-widest group-hover:text-life-gold transition-colors",children:"Hall of Glory"}),n.jsxs("p",{className:"text-[9px] text-life-muted uppercase tracking-[0.2em]",children:[I," Medals Secured"]})]})]}),n.jsx(ht,{size:20,className:"text-life-muted group-hover:text-life-gold"})]}),n.jsx(ET,{user:m}),n.jsx(bT,{items:w,onSelectItem:S}),n.jsx(vT,{user:m,dispatch:e,onForceSleep:z,onExport:M,onImport:j}),v&&n.jsx("div",{onClick:()=>S(null),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:n.jsxs("div",{onClick:q=>q.stopPropagation(),className:"bg-life-paper w-full max-w-xs rounded-xl border border-life-muted/20 p-5 shadow-2xl relative",children:[n.jsx("button",{onClick:()=>S(null),className:"absolute top-3 right-3 text-life-muted hover:text-life-text",children:n.jsx(Ie,{size:20})}),n.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-life-black border border-life-muted/30 flex items-center justify-center mb-3 text-life-gold shadow-inner",children:n.jsx(qu,{icon:v.icon,size:40})}),n.jsx("h3",{className:"font-black uppercase tracking-widest text-life-text",children:v.title}),n.jsx("p",{className:"text-[10px] text-life-muted mt-2 leading-relaxed uppercase",children:v.description})]}),n.jsx("div",{className:"flex flex-col gap-2",children:v.type==="artifact"?n.jsx("button",{onClick:()=>{e.toggleEquip(v.id),S(null)},className:`w-full py-4 font-black uppercase text-xs rounded-xl shadow-lg transition-all active:scale-95 ${m.equippedItems.includes(v.id)?"bg-life-muted/20 text-life-muted hover:bg-life-muted/30":"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20"}`,children:m.equippedItems.includes(v.id)?"Unequip Artifact":"Equip Artifact"}):n.jsx("button",{onClick:P,className:"w-full py-4 bg-life-gold text-life-black font-black uppercase text-xs rounded-xl hover:bg-yellow-400 shadow-lg shadow-life-gold/20 transition-all active:scale-95",children:"Consume Item"})})]})})]})},AT=({onStart:i})=>{const[e,l]=U.useState(""),[o,r]=U.useState(new Date().toISOString().split("T")[0]),d=u=>{u.preventDefault(),e&&i(e,o)};return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500 h-full flex flex-col justify-center",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 bg-life-black border border-life-gold rounded-full flex items-center justify-center mx-auto mb-4 shadow-[0_0_30px_rgba(251,191,36,0.2)]",children:n.jsx(Di,{size:40,className:"text-life-gold"})}),n.jsx("h2",{className:"text-3xl font-black text-life-text tracking-tighter uppercase mb-2",children:"Operation Tempo"}),n.jsx("p",{className:"text-sm text-life-muted max-w-xs mx-auto",children:'"The year is not 12 months. It is 12 weeks. No time for hesitation."'})]}),n.jsxs("form",{onSubmit:d,className:"bg-life-paper border border-life-muted/20 p-6 rounded-2xl shadow-xl space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Campaign Objective (Title)"}),n.jsx("input",{type:"text",value:e,onChange:u=>l(u.target.value),placeholder:"e.g. Project Spartan, Winter Arc...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none font-bold",autoFocus:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Start Date (Zero Point)"}),n.jsx("input",{type:"date",value:o,onChange:u=>r(u.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none"})]}),n.jsxs("button",{type:"submit",disabled:!e,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all
                        ${e?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-lg shadow-life-gold/20":"bg-life-muted/20 text-life-muted cursor-not-allowed"}
                    `,children:[n.jsx(Tr,{size:18,fill:"currentColor"})," Initiate Campaign"]})]})]})},MT=({stats:i,onComplete:e})=>{const l=i.grade==="S"?"text-life-diamond":i.grade==="A"?"text-life-gold":i.grade==="F"?"text-life-hard":"text-life-text";return n.jsxs("div",{className:"relative overflow-hidden rounded-2xl border-2 border-life-gold bg-life-black p-6 shadow-[0_0_30px_rgba(251,191,36,0.15)] animate-in zoom-in-95 duration-700",children:[n.jsx("div",{className:"absolute inset-0 bg-life-gold/5 animate-pulse-slow pointer-events-none"}),n.jsx("div",{className:"absolute -right-10 -top-10 opacity-10 rotate-12",children:n.jsx(M2,{size:150,className:"text-life-gold"})}),n.jsxs("div",{className:"relative z-10 text-center",children:[n.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-[0.3em] mb-4",children:"The Harvest is Here"}),n.jsxs("div",{className:"flex flex-col items-center mb-6",children:[n.jsx("div",{className:`text-6xl font-black ${l} drop-shadow-2xl`,children:i.grade}),n.jsx("div",{className:"text-xs text-life-muted font-bold uppercase tracking-widest mt-2 border-t border-b border-life-muted/20 py-1 px-4",children:"Campaign Rank"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20",children:[n.jsxs("div",{className:"text-2xl font-black text-life-text",children:[i.completionRate,"%"]}),n.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Efficiency"})]}),n.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20",children:[n.jsx("div",{className:"text-2xl font-black text-life-gold",children:i.raidCount}),n.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Ops Won"})]}),n.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20 col-span-2 flex items-center justify-between px-6",children:[n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"text-xl font-black text-life-text",children:[i.completedTasks," ",n.jsxs("span",{className:"text-life-muted text-sm",children:["/ ",i.totalTasks]})]}),n.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Missions Cleared"})]}),n.jsx(_r,{size:24,className:"text-life-gold opacity-50"})]})]}),n.jsxs("button",{onClick:e,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.3)] transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2",children:[n.jsx(al,{size:20,strokeWidth:3})," Reap & Reset Cycle"]}),n.jsx("p",{className:"text-[9px] text-life-muted mt-3 opacity-60",children:"Archiving this campaign will reset the timeline for the next 12-week cycle."})]})]})},Lx=({title:i,isCompleted:e,type:l,onToggle:o,onOpenDetails:r,colorClass:d})=>n.jsxs("div",{onClick:u=>{u.stopPropagation(),r()},className:`group flex items-center gap-3 p-2 rounded-lg border mb-1 cursor-pointer transition-all ${e?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/20 hover:border-life-gold/30 hover:bg-life-muted/5"}`,children:[n.jsx("div",{onClick:u=>{u.stopPropagation(),o()},className:`w-6 h-6 rounded flex items-center justify-center transition-all cursor-pointer z-10 hover:scale-110 ${e?"bg-life-muted border border-life-muted text-life-black":"border-2 border-life-muted/30 text-transparent hover:border-life-gold"}`,children:n.jsx(Gi,{size:14,strokeWidth:4,className:e?"scale-100":"scale-0"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("div",{className:`text-xs font-medium truncate ${e?"line-through text-life-muted":"text-life-text"}`,children:i})}),l==="raid"&&n.jsx("div",{className:`px-1.5 py-0.5 rounded text-[8px] font-black uppercase tracking-wider ${d} bg-opacity-10`,children:"OP"})]}),RT=()=>{const{campaignState:i,campaignDispatch:e}=ul(),{taskState:l,taskDispatch:o}=Kt(),{raidState:r,raidDispatch:d}=Ii(),{state:u,dispatch:h}=ke(),{campaign:g}=i,{unlockAllWeeks:m}=u.user.preferences,[y,v]=U.useState(null),S=()=>{h.setModal("confirmation",{title:"Abort Campaign?",message:"Terminate timeline? All schedule data will be lost.",confirmText:"Abort Protocol",isDangerous:!0,onConfirm:()=>e.resetCampaign()})},N=(M,j)=>{const z=new Date(M),B=new Date(z.getTime()+(j-1)*7*864e5),q=new Date(B.getTime()+6*864e5),G={month:"short",day:"numeric"};return`${B.toLocaleDateString(void 0,G)} - ${q.toLocaleDateString(void 0,G)}`},C=(M,j,z)=>new Date(new Date(M).getTime()+((j-1)*7+(z-1))*864e5).toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),E=(M,j,z)=>{const B=new Date(new Date(M).getTime()+((j-1)*7+(z-1))*864e5),q=G=>G.toString().padStart(2,"0");return`${B.getFullYear()}-${q(B.getMonth()+1)}-${q(B.getDate())}T12:00`},w=M=>{if(!g.startDate)return{tasks:[],raidSteps:[]};const j=new Date(g.startDate),z=new Date(j.getTime()+(M-1)*7*864e5);z.setHours(0,0,0,0);const B=new Date(z.getTime()+6*864e5);B.setHours(23,59,59,999);const q=l.tasks.filter(Q=>{if(!Q.deadline||Q.isArchived)return!1;const F=new Date(Q.deadline);return F>=z&&F<=B}),G=[];return r.raids.forEach(Q=>{Q.status!=="archived"&&Q.steps.forEach(F=>{if(F.scheduledDate&&!F.isArchived){const ae=new Date(F.scheduledDate);ae>=z&&ae<=B&&G.push({raidId:Q.id,raidTitle:Q.title,step:F})}})}),{weekTasks:q,weekRaidSteps:G}},I=()=>{if(!g.startDate)return{grade:"F",completionRate:0,totalTasks:0,completedTasks:0,raidCount:0};const M=new Date(g.startDate);let j=0,z=0,B=0;l.tasks.forEach(Q=>{Q.isArchived||Q.deadline&&new Date(Q.deadline)>=M&&(j++,Q.isCompleted&&z++)}),r.raids.forEach(Q=>{Q.status==="completed"&&B++});const q=j>0?Math.round(z/j*100):0;let G="F";return q>=95?G="S":q>=85?G="A":q>=70?G="B":q>=50?G="C":q>=30&&(G="D"),{grade:G,completionRate:q,totalTasks:j,completedTasks:z,raidCount:B}};if(!g.isActive||!g.startDate)return n.jsx(AT,{onStart:e.initCampaign});const H=g.currentWeek>=13,_=Math.min(100,(g.currentWeek-1)/12*100),P=Array.from({length:13},(M,j)=>j+1);return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase truncate max-w-[200px] sm:max-w-none",children:g.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-bold uppercase tracking-wider ${g.isFrozen?"bg-blue-500/20 text-blue-400":"bg-life-gold/20 text-life-gold"}`,children:g.isFrozen?" Frozen":H?" Harvest":`Week ${g.currentWeek} / 12`}),!H&&n.jsxs("span",{className:"text-[10px] text-life-muted uppercase tracking-widest",children:[" Day ",g.currentDay]})]})]}),n.jsxs("div",{className:"text-life-gold opacity-50 flex items-center gap-2",children:[m&&n.jsx("span",{title:"Horus Eye Active",children:n.jsx(er,{size:16,className:"animate-pulse text-life-crimson"})}),n.jsx(Di,{size:24})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-2 w-full bg-life-black rounded-full overflow-hidden border border-life-muted/20 relative",children:n.jsx("div",{className:`h-full transition-all duration-1000 ${g.isFrozen?"bg-blue-500":"bg-life-gold"}`,style:{width:`${_}%`}})}),n.jsxs("div",{className:"flex justify-between mt-1 text-[9px] text-life-muted uppercase font-mono",children:[n.jsx("span",{children:"Start"}),n.jsx("span",{children:"Week 6"}),n.jsx("span",{children:"Harvest"})]})]}),n.jsx("div",{className:"space-y-3",children:P.map(M=>{const j=M<g.currentWeek,z=M===g.currentWeek,B=z||m&&!j,q=M===13,G=N(g.startDate,M),{weekTasks:Q,weekRaidSteps:F}=w(M),ae=Q.length>0||F.length>0,X=Q.filter(R=>R.isCompleted).length+F.filter(R=>R.step.isCompleted).length,L=Q.length+F.length,k=L>0?Math.round(X/L*100):0;if(q)return n.jsx(MT,{stats:I(),onComplete:e.completeCampaign},M);if(j){const R=y===M;return n.jsxs("div",{onClick:()=>v(R?null:M),className:`border-l-4 rounded-r-lg bg-life-black transition-all cursor-pointer group ${R?"border-life-muted/50 bg-life-paper pb-2":"border-life-muted/20 opacity-60 hover:opacity-100"}`,children:[n.jsxs("div",{className:"p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"w-6 h-6 rounded bg-life-muted/20 flex items-center justify-center text-[10px] font-bold text-life-muted",children:["W",M]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-bold text-life-muted group-hover:text-life-text transition-colors flex items-center gap-2",children:[n.jsxs("span",{className:"line-through",children:["Week ",M]}),n.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-life-muted/10 text-life-muted no-underline",children:"COMPLETE"})]}),n.jsxs("p",{className:"text-[9px] text-life-muted/50 font-mono mt-0.5",children:[G,"  ",k,"% Executed"]})]})]}),n.jsx("div",{className:"text-life-muted",children:R?n.jsx(Ft,{size:14}):n.jsx(Gi,{size:14})})]}),R&&n.jsxs("div",{className:"px-3 pt-0 animate-in slide-in-from-top-2",children:[n.jsx("div",{className:"h-px w-full bg-life-muted/10 mb-2"}),ae?n.jsxs("div",{className:"space-y-1 opacity-70",children:[Q.map(V=>n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-life-muted line-through",children:[n.jsx(Ri,{size:10})," ",V.title]},V.id)),F.map(({raidTitle:V,step:te})=>n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-life-muted line-through",children:[n.jsx(cs,{size:10})," ",V,": ",te.title]},te.id))]}):n.jsx("p",{className:"text-[10px] text-life-muted italic",children:"No logs recorded."})]})]},M)}return B?n.jsxs("div",{className:`relative rounded-xl border ${z?"border-life-gold bg-life-paper":"border-life-muted/30 bg-life-black/50 border-dashed"} shadow-[0_0_15px_rgba(251,191,36,0.05)] overflow-hidden`,children:[g.isFrozen&&z&&n.jsx("div",{className:"absolute inset-0 bg-blue-500/10 backdrop-blur-[1px] z-10 flex items-center justify-center border border-blue-500/30 rounded-xl",children:n.jsxs("div",{className:"bg-life-black px-4 py-2 rounded-full border border-blue-500 text-blue-400 flex items-center gap-2 text-xs font-bold uppercase tracking-widest shadow-xl",children:[n.jsx(Cx,{size:14})," Timeline Frozen"]})}),n.jsxs("div",{className:`p-4 border-b border-life-muted/10 flex justify-between items-start ${z?"bg-life-gold/5":"bg-transparent"}`,children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:`text-xs font-black uppercase tracking-wider ${z?"text-life-gold":"text-life-muted"}`,children:["Week ",M]}),z&&n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),!z&&m&&n.jsx("div",{className:"text-[8px] border border-life-crimson text-life-crimson px-1 rounded uppercase",children:"God Mode"})]}),n.jsxs("div",{className:"text-[10px] font-mono text-life-muted flex items-center gap-1",children:[n.jsx(yt,{size:10})," ",G]})]}),z&&n.jsx("div",{className:"text-[10px] px-2 py-1 rounded bg-life-gold text-life-black font-bold uppercase tracking-widest shadow-sm",children:"Current Front"})]}),n.jsx("div",{className:"p-2 space-y-2",children:[1,2,3,4,5,6,7].map(R=>{const V=R===g.currentDay&&z,te=Q.filter(J=>new Date(J.deadline).getDate()===new Date(new Date(g.startDate).getTime()+((M-1)*7+(R-1))*864e5).getDate()),pe=F.filter(({step:J})=>new Date(J.scheduledDate).getDate()===new Date(new Date(g.startDate).getTime()+((M-1)*7+(R-1))*864e5).getDate()),D=te.length>0||pe.length>0;return!V&&!D?null:n.jsxs("div",{className:`rounded-lg border ${V?"border-life-gold/30 bg-life-gold/5":"border-life-muted/10 bg-life-black/50"} p-2`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:`text-[10px] font-black uppercase ${V?"text-life-gold":"text-life-muted"}`,children:["Day ",R]}),n.jsx("span",{className:"text-[9px] text-life-muted font-mono opacity-70",children:C(g.startDate,M,R)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[V&&n.jsx("span",{className:"text-[8px] px-1 rounded bg-life-gold text-life-black font-bold uppercase",children:"Today"}),n.jsx("button",{onClick:()=>h.setModal("addTask",{date:E(g.startDate,M,R),origin:"campaign"}),className:"w-5 h-5 rounded flex items-center justify-center bg-life-muted/10 hover:bg-life-gold text-life-muted hover:text-life-black transition-all",title:"Tactical Insert",children:n.jsx(gt,{size:12})})]})]}),D?n.jsxs("div",{className:"space-y-1",children:[te.map(J=>n.jsx(Lx,{title:J.title,isCompleted:J.isCompleted,type:"mission",onToggle:()=>o.toggleTask(J.id),onOpenDetails:()=>h.setModal("itemDetails",{itemId:J.id,type:"task"}),colorClass:"text-life-text"},J.id)),pe.map(({raidId:J,raidTitle:se,step:$})=>n.jsx(Lx,{title:`${se}: ${$.title}`,isCompleted:$.isCompleted,type:"raid",onToggle:()=>d.toggleRaidStep(J,$.id),onOpenDetails:()=>h.setModal("itemDetails",{itemId:$.id,parentId:J,type:"raid_step"}),colorClass:"text-life-hard"},$.id))]}):n.jsx("div",{className:"text-[9px] text-life-muted/30 italic text-center py-2 border border-dashed border-life-muted/10 rounded",children:"No tactical objectives."})]},R)})})]},M):n.jsxs("div",{className:"border border-life-muted/10 rounded-xl bg-life-black opacity-60 hover:opacity-100 transition-opacity",children:[n.jsxs("div",{className:"p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded bg-life-muted/10 flex items-center justify-center text-xs font-bold text-life-muted",children:M}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-bold text-life-text uppercase tracking-wider",children:["Week ",M]}),n.jsxs("p",{className:"text-[9px] text-life-muted font-mono",children:[G,"  ",L," Objectives"]})]})]}),n.jsx(ds,{size:14,className:"text-life-muted/30"})]}),ae&&n.jsxs("div",{className:"px-3 pb-3 pt-0",children:[n.jsx("div",{className:"h-px w-full bg-life-muted/10 mb-2"}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[Q.map(R=>n.jsx("div",{className:"w-2 h-2 rounded-full bg-life-muted",title:R.title},R.id)),F.map(({raidTitle:R,step:V})=>n.jsx("div",{className:"w-2 h-2 rounded-full bg-life-hard",title:`${R}: ${V.title}`},V.id))]})]})]},M)})}),n.jsxs("div",{className:"mt-8 pt-8 border-t border-life-muted/10 flex justify-between",children:[n.jsxs("button",{onClick:e.toggleFreeze,className:`flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider transition-colors ${g.isFrozen?"text-blue-400 hover:text-blue-300":"text-life-muted hover:text-blue-400"}`,children:[n.jsx(Cx,{size:14,className:g.isFrozen?"animate-pulse":""})," ",g.isFrozen?"Resume Timeline":"Freeze Time"]}),n.jsxs("button",{onClick:S,className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-life-muted hover:text-life-hard transition-colors",children:[n.jsx(Hu,{size:14})," Abort Campaign"]})]})]})},DT=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(Ue,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(Ue,{size:e})}},zx={Novice:"text-life-muted border-life-muted",Adept:"text-life-normal border-life-normal",Expert:"text-purple-400 border-purple-400",Master:"text-life-gold border-life-gold",Grandmaster:"text-life-diamond border-life-diamond"},IT=({skill:i})=>{const{skillDispatch:e}=vt(),l=Math.min(100,i.currentXP/i.targetXP*100),o=zx[i.rank]||zx.Novice,r=o.split(" ")[0];return n.jsxs("div",{onClick:()=>e.setActiveSkill(i.id),className:`
                relative bg-life-paper border rounded-xl overflow-hidden mb-3 transition-all duration-200 
                hover:bg-life-muted/5 hover:scale-[1.01] active:scale-[0.99] cursor-pointer group 
                ${i.isRusty?"border-orange-900/50":"border-life-muted/20"}
            `,children:[i.isRusty&&n.jsx("div",{className:"absolute top-2 right-2 text-orange-500 animate-pulse",title:"Skill is Rusty! Perform tasks to restore.",children:n.jsx(cn,{size:16})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:`text-base font-bold text-life-text flex items-center gap-2 ${i.isRusty?"text-life-muted line-through opacity-70":""}`,children:i.title}),n.jsx("div",{className:"flex gap-1 mt-1",children:i.relatedStats.map(d=>n.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-life-black border border-life-muted/20 text-[9px] font-bold",style:{color:tt[d],borderColor:`${tt[d]}30`},children:[n.jsx(DT,{stat:d,size:10}),n.jsx("span",{children:d})]},d))})]}),n.jsx("div",{className:`px-2 py-1 rounded border bg-life-black text-[10px] uppercase font-black tracking-wider ${o} bg-opacity-20`,children:i.rank})]}),i.description&&n.jsx("p",{className:"text-xs text-life-muted/60 mb-3 line-clamp-1",children:i.description}),n.jsxs("div",{className:"relative pt-1",children:[n.jsxs("div",{className:"flex justify-between text-[10px] font-mono font-bold mb-1",children:[n.jsxs("span",{className:r,children:["LVL ",i.level]}),n.jsxs("span",{className:"text-life-muted",children:[i.currentXP," / ",i.targetXP," XP"]})]}),n.jsx("div",{className:"h-1.5 w-full bg-life-black rounded-full overflow-hidden border border-life-muted/10",children:n.jsx("div",{className:`h-full transition-all duration-700 ${i.isRusty?"bg-life-muted":"bg-current"}`,style:{width:`${l}%`,color:i.rank==="Novice"?"#9ca3af":void 0},children:n.jsx("div",{className:`w-full h-full ${r.replace("text-","bg-")} opacity-80 shadow-[0_0_10px_currentColor]`})})})]})]})]})},LT=({onClose:i})=>{const{skillDispatch:e}=vt(),[l,o]=U.useState(""),[r,d]=U.useState(""),[u,h]=U.useState([]),g=v=>{v.preventDefault(),l.trim()&&u.length!==0&&(e.addSkill(l,u,r),i())},m=v=>{u.includes(v)?h(u.filter(S=>S!==v)):u.length<3&&h([...u,v])},y=({type:v})=>{switch(v){case W.STR:return n.jsx(Xt,{size:18});case W.INT:return n.jsx(xt,{size:18});case W.DIS:return n.jsx(We,{size:18});case W.PCE:return n.jsx(ot,{size:18});case W.EMT:return n.jsx(fi,{size:18});case W.CAM:return n.jsx(Ue,{size:18});case W.CRT:return n.jsx(Dt,{size:18});default:return n.jsx(Ue,{size:18})}};return n.jsxs("form",{onSubmit:g,className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Skill Name"}),n.jsx("input",{type:"text",value:l,onChange:v=>o(v.target.value),placeholder:"e.g. Graphic Design, MMA...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Description"}),n.jsx("textarea",{rows:2,value:r,onChange:v=>d(v.target.value),placeholder:"Define the scope of this ability...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-sm text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Parent Attributes (Select 1-3)"}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:Object.values(W).map(v=>{const S=u.includes(v);return n.jsxs("button",{type:"button",onClick:()=>m(v),className:`
                                    flex flex-col items-center justify-center p-2 rounded-lg border transition-all aspect-square relative
                                    ${S?"bg-life-muted/10 border-current shadow-lg scale-105":"border-life-muted/20 text-life-muted hover:bg-life-muted/5 opacity-70 hover:opacity-100"}
                                `,style:{color:S?tt[v]:void 0},children:[n.jsx(y,{type:v}),n.jsx("span",{className:"text-[9px] font-bold mt-1",children:v}),S&&n.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full bg-current shadow-[0_0_5px_currentColor]"})]},v)})}),u.length===0&&n.jsx("p",{className:"text-[10px] text-life-hard mt-2 opacity-80",children:"* Required: Link at least one attribute."})]}),n.jsxs("button",{type:"submit",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all mt-4
                    ${l&&u.length>0?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]":"bg-life-muted/20 text-life-muted cursor-not-allowed"}
                `,disabled:!l||u.length===0,children:["Acquire Skill ",n.jsx(ht,{size:16})]})]})},zT=()=>{const{skillState:i}=vt(),{dispatch:e}=ke(),{skills:l}=i,[o,r]=U.useState(!1),d=[...l].sort((h,g)=>h.isRusty&&!g.isRusty?-1:!h.isRusty&&g.isRusty?1:g.level-h.level),u=()=>{const h={meta:{type:"SKILL_ARSENAL_EXPORT",generatedAt:new Date().toISOString(),count:l.length},skills:l.map(m=>({id:m.id,title:m.title,level:m.level,rank:m.rank,relatedStats:m.relatedStats,description:m.description,currentXP:m.currentXP,targetXP:m.targetXP,isRusty:m.isRusty}))},g=JSON.stringify(h,null,2);e.setModal("dataExchange",{mode:"export",title:"The Arsenal Codex",data:g})};return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"THE ARSENAL"}),n.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:["Skill Tree  ",l.length," Abilities Acquired"]})]}),n.jsx("button",{onClick:u,className:"p-3 rounded-xl bg-life-paper/50 border border-life-muted/20 text-life-gold hover:bg-life-gold/10 hover:border-life-gold/50 transition-all group active:scale-95",title:"Export Skill Codex",children:n.jsx(di,{size:20,className:"group-hover:scale-110 transition-transform"})})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("button",{onClick:()=>r(!0),className:"w-full py-3 rounded-xl border border-dashed border-life-muted/30 bg-life-paper/50 text-life-muted hover:text-life-gold hover:border-life-gold/50 hover:bg-life-gold/5 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest group",children:[n.jsx(gt,{size:16,className:"group-hover:scale-110 transition-transform"}),"Acquire New Skill"]})}),n.jsx("div",{children:d.length>0?d.map(h=>n.jsx(IT,{skill:h},h.id)):n.jsxs("div",{className:"py-12 text-center border-2 border-dashed border-life-muted/20 rounded-xl bg-life-paper/30",children:[n.jsx(We,{size:32,className:"mx-auto text-life-muted mb-3 opacity-50"}),n.jsx("p",{className:"text-life-muted text-sm font-bold",children:"No Skills Learned"}),n.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1 uppercase tracking-wider",children:"Acquire new skills to track your progress."})]})}),o&&n.jsx("div",{onClick:()=>r(!1),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:n.jsxs("div",{onClick:h=>h.stopPropagation(),className:"bg-life-paper w-full max-w-lg rounded-2xl border border-life-muted/20 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-black/50",children:[n.jsxs("h3",{className:"text-sm font-black tracking-tight text-life-text flex items-center gap-2 uppercase",children:[n.jsx(di,{size:16,className:"text-life-gold"})," Acquire Skill"]}),n.jsx("button",{onClick:()=>r(!1),className:"w-8 h-8 rounded-full flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/20 transition-all",children:n.jsx(Ie,{size:20})})]}),n.jsx("div",{className:"p-6 overflow-y-auto",children:n.jsx(LT,{onClose:()=>r(!1)})})]})})]})},Px={Novice:"text-life-muted border-life-muted",Adept:"text-life-normal border-life-normal",Expert:"text-purple-400 border-purple-400",Master:"text-life-gold border-life-gold",Grandmaster:"text-life-diamond border-life-diamond"},PT=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(Ue,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(Ue,{size:e})}},UT=()=>{const{skillState:i,skillDispatch:e}=vt(),{dispatch:l}=ke(),{skills:o,activeSkillId:r}=i,d=o.find(I=>I.id===r);if(!d)return null;const u=()=>{e.setActiveSkill(null)},h=()=>{e.addSkillXP(d.id,1)},g=()=>{l.setModal("confirmation",{title:"Forget Skill?",message:"Are you sure you want to remove this skill? All accrued XP and progress will be lost permanently.",confirmText:"Forget",isDangerous:!0,onConfirm:()=>{e.deleteSkill(d.id)}})},m=Px[d.rank]||Px.Novice,y=m.split(" ")[0],v=Math.min(100,d.currentXP/d.targetXP*100),S=new Date(d.createdAt),N=new Date,C=Math.max(1,Math.floor((N.getTime()-S.getTime())/(1e3*60*60*24))),E=new Date(d.lastPracticed),w=Math.floor((N.getTime()-E.getTime())/(1e3*60*60*24));return n.jsx("div",{onClick:u,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:I=>I.stopPropagation(),className:`
                    relative bg-life-paper w-full max-w-md rounded-2xl border shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-8 duration-500
                    ${d.isRusty?"border-orange-500/30":"border-life-muted/20"}
                `,children:[d.isRusty&&n.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 opacity-10",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1' fill='#f97316'/%3E%3C/svg%3E")`}}),n.jsxs("div",{className:"relative p-6 pb-8 border-b border-life-muted/20 overflow-hidden z-10",children:[n.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-current opacity-5 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none ${y}`}),n.jsx("button",{onClick:u,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20 transition-all z-10",children:n.jsx(Ie,{size:20})}),n.jsxs("div",{children:[n.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded border bg-life-black/50 text-[10px] font-black uppercase tracking-widest mb-3 ${m}`,children:[n.jsx(_r,{size:12}),d.rank]}),n.jsx("h2",{className:`text-3xl font-black text-life-text tracking-tighter mb-1 ${d.isRusty?"opacity-80":""}`,children:d.title}),n.jsx("p",{className:"text-sm text-life-muted leading-relaxed",children:d.description||"No description provided."})]})]}),n.jsxs("div",{className:"overflow-y-auto p-6 space-y-8 relative z-10",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("span",{className:"text-4xl font-black font-mono leading-none",style:{color:v>=100?"#10b981":void 0},children:["LVL ",d.level]}),n.jsxs("span",{className:"text-xs font-mono text-life-muted mb-1",children:[n.jsx("span",{className:"text-life-text",children:d.currentXP})," / ",d.targetXP," XP"]})]}),n.jsxs("div",{className:"h-4 w-full bg-life-black rounded-full overflow-hidden border border-life-muted/20 relative",children:[n.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(90deg, transparent 95%, #000 95%)",backgroundSize:"10% 100%"}}),n.jsxs("div",{className:`h-full transition-all duration-1000 ease-out relative overflow-hidden ${d.isRusty?"grayscale":""}`,style:{width:`${v}%`},children:[n.jsx("div",{className:`absolute inset-0 opacity-80 ${y.replace("text-","bg-")} shadow-[0_0_15px_currentColor]`}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent w-full -translate-x-full animate-[shimmer_2s_infinite]"})]})]})]}),d.isRusty?n.jsxs("div",{className:"p-4 rounded-xl bg-orange-900/10 border border-orange-500/30 flex items-center gap-4 animate-pulse",children:[n.jsx("div",{className:"p-2 bg-orange-500/10 rounded-full text-orange-500",children:n.jsx(cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-orange-400",children:"Skill Rusting"}),n.jsxs("p",{className:"text-[10px] text-orange-300/70",children:["Inactive for ",w," days. XP gain is paused."]})]}),n.jsx("button",{onClick:h,className:"ml-auto px-3 py-1.5 rounded bg-orange-500 text-black text-xs font-bold uppercase tracking-wider hover:bg-orange-400 transition-colors shadow-lg shadow-orange-500/20",children:"Polish"})]}):n.jsxs("div",{className:"flex items-center gap-2 text-life-easy opacity-80 p-3 rounded-lg bg-life-easy/5 border border-life-easy/10",children:[n.jsx(We,{size:16}),n.jsxs("span",{className:"text-xs font-bold uppercase",children:["Active  ",w,"d since practice"]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-3",children:"DNA Source (Parent Stats)"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:d.relatedStats.map(I=>n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-life-black border border-life-muted/20",children:[n.jsx("div",{style:{color:tt[I]},children:n.jsx(PT,{stat:I,size:18})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-life-text leading-none",children:I}),n.jsx("span",{className:"text-[8px] text-life-muted leading-none mt-0.5",children:"Linked"})]})]},I))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"p-3 rounded-lg bg-life-black border border-life-muted/20",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted mb-1",children:[n.jsx(yt,{size:12}),n.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Time Invested"})]}),n.jsxs("span",{className:"text-xs font-mono text-life-text",children:[C," Days"]})]}),n.jsxs("div",{className:"p-3 rounded-lg bg-life-black border border-life-muted/20",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted mb-1",children:[n.jsx(Jt,{size:12}),n.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Last Session"})]}),n.jsx("span",{className:"text-xs font-mono text-life-text",children:new Date(d.lastPracticed).toLocaleDateString()})]})]}),n.jsx("div",{className:"pt-4 border-t border-life-muted/10",children:n.jsxs("button",{onClick:g,className:"w-full py-3 flex items-center justify-center gap-2 text-life-muted hover:text-life-hard hover:bg-life-hard/5 rounded-lg transition-colors text-xs font-bold uppercase tracking-widest",children:[n.jsx(Rt,{size:14}),"Forget Skill"]})})]})]})})},OT=["S","M","T","W","T","F","S"],HT=()=>{const{habitState:i,habitDispatch:e}=Qt(),{habits:l,activeHabitId:o}=i,r=l.find(w=>w.id===o);if(!r)return null;const d=zu(r.streak),u=tt[r.stat],h=sr(r.streak),g=r.streak-h,y=(()=>{const w=[],I=new Date;for(let H=29;H>=0;H--){const _=new Date;_.setDate(I.getDate()-H);const P=_.toISOString().split("T")[0],M=r.history.some(B=>B.startsWith(P)),j=H===0;let z="neutral";M?z="done":j&&(r.status==="completed"?z="done":r.status==="failed"?z="failed":z="pending"),w.push({date:_,status:z,isToday:j})}return w})(),v=r.history.length+(r.status==="completed"?1:0),S=new Date(r.createdAt),N=Math.max(1,Math.floor((new Date().getTime()-S.getTime())/(1e3*60*60*24))),C=Math.round(v/N*100),E=()=>{var w,I;switch(r.type){case"daily":return n.jsxs("div",{className:"flex items-center gap-2 text-life-text font-medium",children:[n.jsx(G0,{size:14,className:"text-life-gold"}),n.jsx("span",{children:"Daily Protocol"})]});case"interval":return n.jsxs("div",{className:"flex items-center gap-2 text-life-text font-medium",children:[n.jsx(Ue,{size:14,className:"text-life-gold"}),n.jsxs("span",{children:["Every ",n.jsx("span",{className:"text-life-gold font-bold",children:r.intervalValue})," Days"]})]});case"specific_days":return n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 text-life-text font-medium",children:[n.jsx(Jt,{size:14,className:"text-life-gold"}),n.jsx("span",{children:"Weekly Schedule"})]}),n.jsx("div",{className:"flex justify-between gap-1 bg-life-black p-1.5 rounded-lg border border-life-muted/20",children:OT.map((H,_)=>{var M;const P=(M=r.specificDays)==null?void 0:M.includes(_);return n.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center text-[10px] font-bold ${P?"bg-life-gold text-life-black":"text-life-muted/30"}`,children:H},_)})})]});case"custom":return n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 text-life-text font-medium",children:[n.jsx(dN,{size:14,className:"text-life-gold"}),n.jsxs("span",{children:["The Matrix (",(w=r.pattern)==null?void 0:w.length," Day Loop)"]})]}),n.jsx("div",{className:"flex flex-wrap gap-0.5",children:(I=r.pattern)==null?void 0:I.split("").map((H,_)=>n.jsx("div",{className:`w-2 h-4 rounded-sm ${H==="1"?"bg-life-gold":"bg-life-muted/20"}`,title:H==="1"?"Active":"Rest"},_))})]});default:return null}};return n.jsx("div",{onClick:()=>e.setActiveHabit(null),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:w=>w.stopPropagation(),className:"bg-life-paper w-full max-w-md rounded-2xl border border-life-muted/20 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in slide-in-from-bottom-8 duration-500",children:[n.jsxs("div",{className:"relative p-6 border-b border-life-muted/20 overflow-hidden bg-life-black",children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-current opacity-5 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{color:u}}),n.jsx("button",{onClick:()=>e.setActiveHabit(null),className:"absolute top-4 right-4 text-life-muted hover:text-white transition-colors z-10",children:n.jsx(Ie,{size:20})}),n.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"text-4xl font-black text-life-gold leading-none mb-1 drop-shadow-lg font-mono",children:r.streak}),n.jsxs("div",{className:"text-[9px] uppercase font-bold text-life-muted tracking-widest flex items-center gap-1",children:[n.jsx(Nr,{size:10,className:"text-life-gold",fill:"currentColor"})," Streak"]})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight mb-1 truncate",children:r.title}),n.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded border text-[9px] font-black uppercase tracking-widest ${d.phaseColor} bg-black/50`,children:["Phase: ",d.phase]})]})]})]}),n.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[n.jsxs("div",{className:"bg-life-black/40 border border-life-muted/10 rounded-xl p-4",children:[n.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-3 flex items-center gap-2",children:[n.jsx(yt,{size:12})," Execution Parameters"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"text-xs",children:E()}),n.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-life-muted/10",children:[r.scheduledTime?n.jsxs("div",{className:"flex items-center gap-2 bg-life-gold/10 px-3 py-1.5 rounded border border-life-gold/20 text-xs font-mono font-bold text-life-gold",children:[n.jsx(an,{size:12}),r.scheduledTime]}):n.jsx("div",{className:"text-xs text-life-muted italic",children:"No set time"}),r.isTimed&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-life-muted",children:[n.jsx(x2,{size:12}),n.jsxs("span",{children:["Duration: ",r.durationMinutes,"m"]})]})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[n.jsx(kr,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Fibonacci Sequence"})]}),n.jsxs("span",{className:"text-[9px] font-mono text-life-gold",children:[d.progress,"% to Next Checkpoint"]})]}),n.jsxs("div",{className:"relative py-4",children:[n.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-life-muted/10 -translate-y-1/2 z-0"}),n.jsx("div",{className:"flex items-center gap-4 relative z-10 overflow-x-auto no-scrollbar pb-4 px-2 snap-x",children:Lt.map(w=>{const I=r.streak>=w,H=!I&&r.streak<w&&r.streak>=(Lt[Lt.indexOf(w)-1]||0),_=w===d.prevCheckpoint;return n.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[50px] snap-center shrink-0",children:[n.jsxs("div",{className:`
                                                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all relative
                                                    ${I?"bg-life-gold border-life-gold text-life-black shadow-[0_0_10px_rgba(251,191,36,0.3)]":H?"bg-life-black border-life-gold text-life-gold animate-pulse scale-110 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"bg-life-black border-life-muted/20 text-life-muted/30"}
                                                `,children:[I?n.jsx(Gi,{size:14}):H?n.jsx(cs,{size:14}):n.jsx(ds,{size:12}),_&&n.jsx("div",{className:"absolute -bottom-2 -right-2 bg-life-black border border-life-muted/50 rounded-full p-0.5",title:"Safety Net",children:n.jsx(ot,{size:10,className:"text-life-text"})})]}),n.jsx("span",{className:`text-[10px] font-mono font-bold ${I||H?"text-life-text":"text-life-muted/30"}`,children:w})]},w)})})]}),n.jsxs("div",{className:"bg-life-black rounded-lg p-3 border border-life-muted/20 flex items-start gap-3 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-hard/50"}),n.jsx(cn,{size:16,className:"text-life-hard shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-[10px] font-bold uppercase text-life-muted",children:"Failure Consequence"}),n.jsxs("span",{className:"text-[10px] font-black text-life-hard uppercase",children:["Streak -",g]})]}),n.jsxs("div",{className:"text-xs text-life-text",children:["If you miss today, your streak will fall to ",n.jsx("span",{className:"font-mono font-bold text-life-gold",children:h}),"."]}),n.jsxs("div",{className:"text-[9px] text-life-muted/50 mt-1",children:["Reaching ",n.jsx("span",{className:"text-life-text",children:d.nextCheckpoint})," will secure your next safety net."]})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[n.jsx(Ue,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"30-Day Consistency"})]}),n.jsxs("span",{className:"text-[10px] font-mono text-life-text",children:[C,"%"]})]}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:y.map((w,I)=>n.jsx("div",{className:`
                                        aspect-square rounded flex items-center justify-center text-[9px] font-mono
                                        ${w.status==="done"?"bg-life-easy text-life-black":w.status==="failed"?"bg-life-hard/20 text-life-hard border border-life-hard/30":w.isToday?"bg-life-gold/20 text-life-gold border border-life-gold/30 animate-pulse":"bg-life-black border border-life-muted/10 text-life-muted/20"}
                                    `,title:w.date.toLocaleDateString(),children:w.date.getDate()},I))})]})]})]})})},GT=({onClose:i})=>{const{state:e}=ke(),{taskDispatch:l,taskState:o}=Kt(),{skillState:r}=vt(),{categories:d}=o,u=e.user.preferences.showCalendarSync??!0,[h,g]=U.useState(""),[m,y]=U.useState(""),[v,S]=U.useState(_e.EASY),[N]=U.useState("medium"),[C,E]=U.useState(W.DIS),[w,I]=U.useState(""),[H,_]=U.useState(""),[P,M]=U.useState([]),j=U.useRef([]),[z,B]=U.useState(!1);U.useEffect(()=>{var oe;if(z&&P.length>0){const Se=P.length-1;(oe=j.current[Se])==null||oe.focus(),B(!1)}},[P,z]);const q=e.ui.modalData||{},G=q.date||"",Q=G?`${G}T09:00`:"",[F,ae]=U.useState(G),[X,L]=U.useState(Q),[k,R]=U.useState(!1),[V,te]=U.useState(()=>G?[{id:`auto_rem_${Date.now()}`,minutesBefore:0,isSent:!1}]:[]),pe=q.origin,D=pe==="campaign",J=pe==="calendar",[se,$]=U.useState(!1),[de,he]=U.useState(25);U.useEffect(()=>{X&&u?R(!0):u||R(!1)},[X,u]);const ie=()=>{M([...P,""]),B(!0)},be=(oe,Se)=>{const $e=[...P];$e[oe]=Se,M($e)},Te=(oe,Se)=>{var $e;oe.key==="Enter"||oe.key==="Shift"?(oe.preventDefault(),Se<P.length-1?($e=j.current[Se+1])==null||$e.focus():ie()):oe.key==="Backspace"&&P[Se]===""&&P.length>0&&(oe.preventDefault(),Oe(Se),Se>0&&setTimeout(()=>{var dt;return(dt=j.current[Se-1])==null?void 0:dt.focus()},0))},Oe=oe=>{M(P.filter((Se,$e)=>$e!==oe))},ct=oe=>{if(oe===-1)return;V.some($e=>$e.minutesBefore===oe)||te([...V,{id:`rem_${Date.now()}`,minutesBefore:oe,isSent:!1}].sort(($e,dt)=>$e.minutesBefore-dt.minutesBefore))},nt=oe=>{te(V.filter(Se=>Se.id!==oe))},pi=oe=>oe===0?"At time of event":oe===5?"5 mins before":oe===15?"15 mins before":oe===30?"30 mins before":oe===60?"1 hour before":oe===120?"2 hours before":oe===1440?"1 day before":`${oe} mins before`,ge=oe=>{if(oe.preventDefault(),!h.trim())return;const $e=P.filter(dt=>dt.trim()!=="").map((dt,Gn)=>({id:`st_${Date.now()}_${Gn}`,title:dt,isCompleted:!1}));if(l.addTask({title:h,description:m,difficulty:v,energyLevel:N,stat:C,isTimed:se,durationMinutes:se?de:void 0,deadline:F||void 0,scheduledTime:X||void 0,reminders:V,skillId:w||void 0,categoryId:H||void 0,subtasks:$e,isCampaign:D,isCalendarEvent:J}),k&&X&&u){let dt=m;$e.length>0&&(dt+=`

Subtasks:
`+$e.map(Gn=>`- [ ] ${Gn.title}`).join(`
`)),Er(h,dt,X,se?de:60)}i()},me=({type:oe})=>{switch(oe){case W.STR:return n.jsx(Xt,{size:18});case W.INT:return n.jsx(xt,{size:18});case W.DIS:return n.jsx(We,{size:18});case W.PCE:return n.jsx(ot,{size:18});case W.EMT:return n.jsx(fi,{size:18});case W.CAM:return n.jsx(Ue,{size:18});case W.CRT:return n.jsx(Dt,{size:18});default:return n.jsx(Ue,{size:18})}};return n.jsxs("form",{onSubmit:ge,className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[D&&n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/30 p-2 rounded-lg flex items-center gap-2 mb-2",children:[n.jsx(Di,{size:16,className:"text-indigo-400"}),n.jsx("span",{className:"text-xs font-bold text-indigo-200 uppercase tracking-widest",children:"Linked to Campaign (G12)"})]}),J&&n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 p-2 rounded-lg flex items-center gap-2 mb-2",children:[n.jsx(Jt,{size:16,className:"text-blue-400"}),n.jsx("span",{className:"text-xs font-bold text-blue-200 uppercase tracking-widest",children:"Linked to Calendar (C30)"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Mission Objective"}),n.jsx("input",{type:"text",value:h,onChange:oe=>g(oe.target.value),placeholder:"e.g. Physics Homework...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 font-medium"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(yt,{size:10})," Schedule Time"]}),n.jsx("input",{type:"datetime-local",value:X,onChange:oe=>L(oe.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(Jt,{size:10})," Deadline"]}),n.jsx("input",{type:"date",value:F,onChange:oe=>ae(oe.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]})]}),X&&u&&n.jsxs("div",{onClick:()=>R(!k),className:`flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-all ${k?"bg-blue-500/10 border-blue-500/50":"bg-life-black border-life-muted/20"}`,children:[n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${k?"bg-blue-500 border-blue-500 text-white":"border-life-muted"}`,children:k&&n.jsx(vr,{size:10})}),n.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${k?"text-blue-400":"text-life-muted"}`,children:"Sync to Google Calendar"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-1",children:[n.jsx(an,{size:10})," Notifications"]})}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:V.map(oe=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-life-gold/10 border border-life-gold/30 rounded text-[10px] text-life-gold",children:[n.jsx("span",{children:pi(oe.minutesBefore)}),n.jsx("button",{type:"button",onClick:()=>nt(oe.id),className:"hover:text-life-text",children:n.jsx(Ie,{size:10})})]},oe.id))}),n.jsxs("select",{value:-1,onChange:oe=>ct(Number(oe.target.value)),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2 text-xs text-life-muted focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:-1,children:"+ Add Reminder..."}),n.jsx("option",{value:0,children:"At time of event"}),n.jsx("option",{value:5,children:"5 mins before"}),n.jsx("option",{value:15,children:"15 mins before"}),n.jsx("option",{value:30,children:"30 mins before"}),n.jsx("option",{value:60,children:"1 hour before"}),n.jsx("option",{value:120,children:"2 hours before"}),n.jsx("option",{value:1440,children:"1 day before"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-2",children:[n.jsx(wr,{size:10})," Details / Intel"]}),n.jsx("textarea",{value:m,onChange:oe=>y(oe.target.value),placeholder:"e.g. Chapter 1, Exercises 1-5...",rows:2,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-sm text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 resize-none"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Tactical Steps (Sub-objectives)"}),n.jsxs("button",{type:"button",onClick:ie,className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white uppercase font-bold",children:[n.jsx(gt,{size:12})," Add Step"]})]}),n.jsxs("div",{className:"space-y-2",children:[P.map((oe,Se)=>n.jsxs("div",{className:"flex items-center gap-2 bg-life-black px-2 py-1 rounded-lg border border-life-muted/20 focus-within:border-life-gold/50 transition-colors",children:[n.jsxs("span",{className:"text-[10px] text-life-muted font-mono w-4",children:[Se+1,"."]}),n.jsx("input",{ref:$e=>{j.current[Se]=$e},type:"text",value:oe,onChange:$e=>be(Se,$e.target.value),onKeyDown:$e=>Te($e,Se),placeholder:"Sub-objective...",enterKeyHint:"next",className:"flex-1 bg-transparent text-xs text-life-text focus:outline-none py-1"}),n.jsx("button",{type:"button",onClick:()=>Oe(Se),className:"text-life-muted hover:text-life-hard p-1",children:n.jsx(Rt,{size:12})})]},Se)),P.length===0&&n.jsx("div",{onClick:ie,className:"text-[10px] text-life-muted/40 italic border border-dashed border-life-muted/20 rounded p-2 text-center cursor-pointer hover:bg-life-muted/5 hover:text-life-muted/60",children:"No sub-objectives. Tap 'Add Step' or press + to start planning."})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Difficulty"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(_e).map(oe=>n.jsx("button",{type:"button",onClick:()=>S(oe),className:`
                                py-3 rounded-lg text-xs font-bold uppercase tracking-wider border transition-all
                                ${v===oe?`${ri[oe]} ${No[oe]} shadow-[0_0_10px_rgba(0,0,0,0.5)] scale-105`:"border-life-muted/20 text-life-muted hover:bg-life-muted/5"}
                            `,children:oe},oe))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Focus Timer"}),n.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/30 p-1 mb-2",children:[n.jsx("button",{type:"button",onClick:()=>$(!1),className:`flex-1 py-1.5 rounded text-[10px] font-bold uppercase ${se?"text-life-muted":"bg-life-muted/30 text-white"}`,children:"No Timer"}),n.jsx("button",{type:"button",onClick:()=>$(!0),className:`flex-1 py-1.5 rounded text-[10px] font-bold uppercase ${se?"bg-life-gold text-life-black":"text-life-muted"}`,children:"With Timer"})]}),se&&n.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-top-2",children:[n.jsx(yt,{size:14,className:"text-life-gold"}),n.jsx("input",{type:"number",value:de,onChange:oe=>he(parseInt(oe.target.value)||0),className:"w-16 bg-life-black border border-life-muted/30 rounded p-1 text-center text-sm font-bold focus:border-life-gold outline-none"}),n.jsx("span",{className:"text-xs text-life-muted",children:"minutes duration"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Category"}),n.jsxs("div",{className:"relative",children:[n.jsx(P0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),n.jsxs("select",{value:H,onChange:oe=>_(oe.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2 pl-9 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:"",children:"(Uncategorized)"}),d.map(oe=>n.jsx("option",{value:oe.id,children:oe.title},oe.id))]}),n.jsx(ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90",size:14})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Skill Link"}),n.jsxs("div",{className:"relative",children:[n.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),n.jsxs("select",{value:w,onChange:oe=>I(oe.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2 pl-9 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:"",children:"None"}),r.skills.map(oe=>n.jsx("option",{value:oe.id,children:oe.title},oe.id))]}),n.jsx(ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90",size:14})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Attribute"}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:Object.values(W).map(oe=>n.jsxs("button",{type:"button",onClick:()=>E(oe),className:`
                                flex flex-col items-center justify-center p-2 rounded border transition-all aspect-square
                                ${C===oe?"bg-life-muted/10 border-current shadow-sm scale-105":"border-life-muted/20 text-life-muted opacity-50 hover:opacity-100"}
                            `,style:{color:C===oe?tt[oe]:void 0},children:[n.jsx(me,{type:oe}),n.jsx("span",{className:"text-[8px] font-bold mt-1",children:oe})]},oe))})]}),n.jsxs("button",{type:"submit",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all mt-4
                    ${h?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]":"bg-life-muted/20 text-life-muted cursor-not-allowed"}
                `,disabled:!h,children:["Confirm Mission ",n.jsx(ht,{size:16})]})]})},VT=["S","M","T","W","T","F","S"],qT=({habitType:i,setHabitType:e,selectedDays:l,toggleDay:o,intervalVal:r,setIntervalVal:d,pattern:u,setPattern:h,reps:g,setReps:m})=>{const y=N=>{const C=u.split("");C[N]=C[N]==="1"?"0":"1",h(C.join(""))},v=()=>h(N=>N+"1"),S=()=>{u.length>1&&h(N=>N.slice(0,-1))};return n.jsxs("div",{className:"p-4 bg-life-black/40 rounded-xl border border-life-muted/10 space-y-4",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Habit Taxonomy"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"daily",label:"Daily",icon:n.jsx(yt,{size:14})},{id:"specific_days",label:"Specific Days",icon:n.jsx(Jt,{size:14})},{id:"interval",label:"Interval",icon:n.jsx(Ri,{size:14})},{id:"custom",label:"The Matrix",icon:n.jsx(ZS,{size:14})}].map(N=>n.jsxs("button",{type:"button",onClick:()=>e(N.id),className:`
                            flex items-center justify-center gap-2 py-3 rounded-lg border text-xs font-bold uppercase tracking-wider transition-all
                            ${i===N.id?"bg-life-gold/10 border-life-gold text-life-gold":"bg-life-black border-life-muted/20 text-life-muted hover:border-life-muted/50"}
                        `,children:[N.icon," ",N.label]},N.id))}),i==="specific_days"&&n.jsx("div",{className:"flex justify-between gap-1 pt-2",children:VT.map((N,C)=>n.jsx("button",{type:"button",onClick:()=>o(C),className:`w-10 h-10 rounded-lg border flex items-center justify-center text-sm font-bold transition-all ${l.includes(C)?"bg-life-easy border-life-easy text-life-black":"border-life-muted/30 text-life-muted hover:bg-life-muted/10"}`,children:N},C))}),i==="interval"&&n.jsxs("div",{className:"pt-2 flex items-center gap-4",children:[n.jsx("span",{className:"text-sm text-life-muted",children:"Every"}),n.jsx("input",{type:"number",min:"2",max:"365",value:r,onChange:N=>d(parseInt(N.target.value)||2),className:"w-20 bg-life-black border border-life-muted/50 rounded-lg p-2 text-center text-life-text font-mono font-bold focus:border-life-gold focus:outline-none"}),n.jsx("span",{className:"text-sm text-life-muted",children:"Days"})]}),i==="custom"&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("p",{className:"text-[10px] text-life-muted",children:"The Matrix Pattern"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:S,className:"w-6 h-6 flex items-center justify-center rounded border border-life-muted/30 text-life-muted hover:text-white hover:border-life-muted/50 transition-all",children:n.jsx(or,{size:12})}),n.jsxs("span",{className:"text-[10px] font-mono text-life-gold min-w-[24px] text-center",children:[u.length,"d"]}),n.jsx("button",{type:"button",onClick:v,className:"w-6 h-6 flex items-center justify-center rounded border border-life-muted/30 text-life-muted hover:text-white hover:border-life-muted/50 transition-all",children:n.jsx(gt,{size:12})}),n.jsx("div",{className:"w-px h-3 bg-life-muted/20 mx-1"}),n.jsxs("button",{type:"button",onClick:()=>h(u.includes("0")?"11111111111111":"00000000000000"),className:"text-[10px] text-life-gold hover:underline flex items-center gap-1",children:[n.jsx(Hu,{size:10})," Reset"]})]})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:u.split("").map((N,C)=>n.jsx("button",{type:"button",onClick:()=>y(C),className:`w-6 h-8 rounded border text-[9px] font-mono flex items-center justify-center transition-all ${N==="1"?"bg-life-gold border-life-gold text-life-black":"bg-life-black border-life-muted/20 text-life-muted/30 hover:bg-life-muted/10"}`,title:N==="1"?"Active Day":"Rest Day",children:N},C))})]})]})},BT=({onClose:i})=>{const{state:e}=ke(),{habitDispatch:l,habitState:o}=Qt(),{skillState:r}=vt(),{categories:d}=o,u=e.user.preferences.showCalendarSync??!0,[h,g]=U.useState(""),[m,y]=U.useState(_e.EASY),[v,S]=U.useState(W.DIS),[N,C]=U.useState(""),[E,w]=U.useState(""),[I,H]=U.useState("daily"),[_,P]=U.useState(""),[M,j]=U.useState([]),[z,B]=U.useState(2),[q,G]=U.useState("10101010101010"),[Q,F]=U.useState(1),[ae,X]=U.useState(!1),[L,k]=U.useState(30),[R,V]=U.useState(""),[te,pe]=U.useState([]),[D,J]=U.useState(!1),[se,$]=U.useState([]),de=U.useRef([]),[he,ie]=U.useState(!1);U.useEffect(()=>{var ge;if(he&&se.length>0){const me=se.length-1;(ge=de.current[me])==null||ge.focus(),ie(!1)}},[se,he]),U.useEffect(()=>{R&&u?J(!0):u||J(!1)},[R,u]);const be=ge=>{M.includes(ge)?j(M.filter(me=>me!==ge)):j([...M,ge].sort())},Te=()=>{$([...se,""]),ie(!0)},Oe=(ge,me)=>{const oe=[...se];oe[ge]=me,$(oe)},ct=ge=>$(se.filter((me,oe)=>oe!==ge)),nt=ge=>{if(ge.preventDefault(),!h.trim())return;const me=se.filter(oe=>oe.trim()!=="").map((oe,Se)=>({id:`st_${Date.now()}_${Se}`,title:oe,isCompleted:!1}));if(l.addHabit({title:h,description:_,skillId:E||void 0,difficulty:m,stat:v,type:I,categoryId:N||void 0,specificDays:I==="specific_days"?M:void 0,intervalValue:I==="interval"?z:void 0,pattern:I==="custom"?q:void 0,isTimed:ae,durationMinutes:ae?L:void 0,scheduledTime:R||void 0,reminders:te,subtasks:me,dailyTarget:Q}),D&&R&&u){const oe=new Date,[Se,$e]=R.split(":").map(Number),dt=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate(),Se,$e);Er(`[Protocol] ${h}`,`${_}

Generated by LifeOS`,dt.toISOString(),ae?L:30)}i()},pi=({type:ge})=>{switch(ge){case W.STR:return n.jsx(Xt,{size:18});case W.INT:return n.jsx(xt,{size:18});case W.DIS:return n.jsx(We,{size:18});case W.PCE:return n.jsx(ot,{size:18});case W.EMT:return n.jsx(fi,{size:18});case W.CAM:return n.jsx(Ue,{size:18});case W.CRT:return n.jsx(Dt,{size:18});default:return n.jsx(Ue,{size:18})}};return n.jsxs("form",{onSubmit:nt,className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Protocol Name"}),n.jsx("input",{type:"text",value:h,onChange:ge=>g(ge.target.value),placeholder:"e.g. Read 20 pages...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(yt,{size:10})," Daily Time"]}),n.jsx("input",{type:"time",value:R,onChange:ge=>V(ge.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),R&&u&&n.jsxs("div",{onClick:()=>J(!D),className:`flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-all ${D?"bg-blue-500/10 border-blue-500/50":"bg-life-black border-life-muted/20"}`,children:[n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${D?"bg-blue-500 border-blue-500 text-white":"border-life-muted"}`,children:D&&n.jsx(vr,{size:10})}),n.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${D?"text-blue-400":"text-life-muted"}`,children:"Sync to Google Calendar (Daily Event)"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Side Missions (Routine Steps)"}),n.jsxs("button",{type:"button",onClick:Te,className:"text-[10px] uppercase font-bold text-life-gold flex items-center gap-1",children:[n.jsx(gt,{size:12})," Add Step"]})]}),n.jsx("div",{className:"space-y-2",children:se.map((ge,me)=>n.jsxs("div",{className:"flex items-center gap-2 bg-life-black/40 px-2 py-1 rounded-lg border border-life-muted/10 focus-within:border-life-gold/50 transition-colors",children:[n.jsxs("span",{className:"text-[10px] text-life-muted font-mono w-4",children:[me+1,"."]}),n.jsx("input",{ref:oe=>{de.current[me]=oe},type:"text",value:ge,onChange:oe=>Oe(me,oe.target.value),className:"flex-1 bg-transparent text-xs text-life-text focus:outline-none py-1"}),n.jsx("button",{type:"button",onClick:()=>ct(me),className:"text-life-muted hover:text-life-hard p-1",children:n.jsx(Rt,{size:12})})]},me))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Category / Section"}),n.jsxs("div",{className:"relative",children:[n.jsx(P0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),n.jsxs("select",{value:N,onChange:ge=>C(ge.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-sm text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:"",children:"(Uncategorized)"}),d.map(ge=>n.jsx("option",{value:ge.id,children:ge.title},ge.id))]}),n.jsx(ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90",size:16})]})]}),r.skills.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Linked Skill"}),n.jsxs("div",{className:"relative",children:[n.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),n.jsxs("select",{value:E,onChange:ge=>w(ge.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-sm text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:"",children:"No specific skill..."}),r.skills.map(ge=>n.jsxs("option",{value:ge.id,children:[ge.title," (Lvl ",ge.level,")"]},ge.id))]}),n.jsx(ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90",size:16})]})]})]}),n.jsx(qT,{habitType:I,setHabitType:H,selectedDays:M,toggleDay:be,intervalVal:z,setIntervalVal:B,pattern:q,setPattern:G,reps:Q,setReps:F}),n.jsx("div",{className:"p-4 bg-life-black/40 rounded-xl border border-life-muted/10 space-y-2",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-2",children:[n.jsx(G0,{size:12})," Daily Iterations"]}),n.jsxs("div",{className:"flex items-center gap-3 bg-life-black rounded-lg border border-life-muted/20 p-1",children:[n.jsx("button",{type:"button",onClick:()=>F(Math.max(1,Q-1)),className:"w-8 h-8 rounded border border-life-muted/10 flex items-center justify-center hover:bg-life-muted/10 text-life-muted hover:text-white transition-colors",children:n.jsx(or,{size:14})}),n.jsx("span",{className:"text-sm font-mono font-bold text-life-gold w-6 text-center",children:Q}),n.jsx("button",{type:"button",onClick:()=>F(Math.min(99,Q+1)),className:"w-8 h-8 rounded border border-life-muted/10 flex items-center justify-center hover:bg-life-muted/10 text-life-muted hover:text-white transition-colors",children:n.jsx(gt,{size:14})})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(_e).map(ge=>n.jsx("button",{type:"button",onClick:()=>y(ge),className:`py-2 rounded-lg text-xs font-bold uppercase tracking-wider border transition-all ${m===ge?`${ri[ge]} ${No[ge]} shadow-[0_0_10px_rgba(0,0,0,0.5)] scale-105`:"border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:ge},ge))})]}),n.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/30 p-1 mb-2",children:[n.jsx("button",{type:"button",onClick:()=>X(!1),className:`flex-1 py-1.5 rounded text-[10px] font-bold uppercase ${ae?"text-life-muted":"bg-life-muted/30 text-white"}`,children:"No Timer"}),n.jsx("button",{type:"button",onClick:()=>X(!0),className:`flex-1 py-1.5 rounded text-[10px] font-bold uppercase ${ae?"bg-life-gold text-life-black":"text-life-muted"}`,children:"With Timer"})]}),ae&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yt,{size:14,className:"text-life-gold"}),n.jsx("input",{type:"number",value:L,onChange:ge=>k(parseInt(ge.target.value)||0),className:"w-16 bg-life-black border border-life-muted/30 rounded p-1 text-center text-sm font-bold focus:border-life-gold outline-none"}),n.jsx("span",{className:"text-xs text-life-muted",children:"mins"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Attribute Focus"}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:Object.values(W).map(ge=>n.jsxs("button",{type:"button",onClick:()=>S(ge),className:`flex flex-col items-center justify-center p-2 rounded-lg border transition-all aspect-square ${v===ge?"bg-life-muted/10 border-current shadow-lg scale-110":"border-life-muted/20 text-life-muted hover:bg-life-muted/5 opacity-70 hover:opacity-100"}`,style:{color:v===ge?tt[ge]:void 0},children:[n.jsx(pi,{type:ge}),n.jsx("span",{className:"text-[9px] font-bold mt-1",children:ge})]},ge))})]}),n.jsxs("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all mt-4 ${h?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]":"bg-life-muted/20 text-life-muted cursor-not-allowed"}`,disabled:!h,children:["Install Protocol ",n.jsx(ht,{size:16})]})]})},$T=({stepIndex:i,step:e,parentDifficulty:l,parentStat:o,parentSkillId:r,onUpdate:d,onClose:u,onAddSubtask:h,onRemoveSubtask:g,onChangeSubtask:m,onAddReminder:y,onRemoveReminder:v})=>{const{skillState:S}=vt(),N=U.useRef([]);U.useEffect(()=>{var _;if(e.subtasks.length>0){const P=e.subtasks.length-1;e.subtasks[P].title===""&&((_=N.current[P])==null||_.focus())}},[e.subtasks.length]);const C=e.difficulty||l,E=e.stat||o,w=S.skills.find(_=>_.id===r),I=_=>_===0?"At time":_===60?"1h before":_===1440?"1d before":`${_}m before`,H=({type:_})=>{switch(_){case W.STR:return n.jsx(Xt,{size:18});case W.INT:return n.jsx(xt,{size:18});case W.DIS:return n.jsx(We,{size:18});case W.PCE:return n.jsx(ot,{size:18});case W.EMT:return n.jsx(fi,{size:18});case W.CAM:return n.jsx(Ue,{size:18});case W.CRT:return n.jsx(Dt,{size:18});default:return n.jsx(Ue,{size:18})}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-life-paper w-full max-w-md rounded-2xl border border-life-muted/20 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-black/50 shrink-0",children:[n.jsxs("h3",{className:"text-sm font-black tracking-tight text-life-text flex items-center gap-2 uppercase",children:[n.jsx("span",{className:"text-life-gold",children:"///"})," Edit Step ",i+1]}),n.jsx("button",{onClick:u,className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"p-4 flex-1 overflow-y-auto space-y-6 custom-scrollbar",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Tactical Objective"}),n.jsx("input",{type:"text",value:e.title,onChange:_=>d(i,"title",_.target.value),placeholder:"e.g. Secure the perimeter...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-sm text-life-text font-medium placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(ds,{size:10})," Inherited Skill"]}),n.jsxs("div",{className:"flex items-center gap-3 bg-life-black/30 p-3 rounded-lg border border-life-muted/20 opacity-70",children:[n.jsx(di,{size:16,className:"text-life-gold"}),n.jsx("span",{className:"text-xs font-bold text-life-text",children:w?`${w.title} (Lvl ${w.level})`:"No Skill Linked"}),n.jsx("span",{className:"ml-auto text-[8px] uppercase font-black text-life-muted tracking-widest",children:"Locked"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Threat Level"}),!e.difficulty&&n.jsx("span",{className:"text-[8px] uppercase font-black text-life-gold/50 tracking-widest",children:"Inherited"})]}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(_e).map(_=>n.jsx("button",{type:"button",onClick:()=>{e.difficulty===_?d(i,"difficulty",void 0):d(i,"difficulty",_)},className:`py-3 rounded-lg text-xs font-bold uppercase tracking-wider border transition-all ${C===_?`${ri[_]} ${No[_]} shadow-lg scale-[1.02]`:"border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:_},_))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Attribute Focus"}),!e.stat&&n.jsx("span",{className:"text-[8px] uppercase font-black text-life-gold/50 tracking-widest",children:"Inherited"})]}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:Object.values(W).map(_=>{const P=E===_;return n.jsxs("button",{type:"button",onClick:()=>{e.stat===_?d(i,"stat",void 0):d(i,"stat",_)},className:`flex flex-col items-center justify-center p-2 rounded-lg border transition-all aspect-square relative ${P?"bg-life-muted/10 border-current shadow-lg scale-110":"border-life-muted/20 text-life-muted hover:bg-life-muted/5 opacity-70 hover:opacity-100"}`,style:{color:P?tt[_]:void 0},children:[n.jsx(H,{type:_}),n.jsx("span",{className:"text-[8px] font-bold mt-1",children:_}),P&&n.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-current shadow-[0_0_5px_currentColor]"})]},_)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Focus Timer"}),n.jsxs("div",{className:"flex bg-life-black border border-life-muted/20 rounded-lg p-1",children:[n.jsx("button",{type:"button",onClick:()=>d(i,"isTimed",!1),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${e.isTimed?"text-life-muted hover:text-life-silver":"bg-life-muted/20 text-white shadow-sm"}`,children:"No Timer"}),n.jsx("button",{type:"button",onClick:()=>d(i,"isTimed",!0),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${e.isTimed?"bg-life-gold/20 text-life-gold shadow-sm":"text-life-muted hover:text-life-silver"}`,children:"With Timer"})]}),e.isTimed&&n.jsx("div",{className:"mt-3 animate-in slide-in-from-top-2 fade-in",children:n.jsxs("div",{className:"flex items-center gap-3 bg-life-black/50 p-3 rounded-lg border border-life-gold/20",children:[n.jsx(yt,{className:"text-life-gold",size:18}),n.jsx("input",{type:"number",value:e.durationMinutes||0,onChange:_=>d(i,"durationMinutes",Number(_.target.value)),className:"flex-1 bg-transparent text-lg font-mono text-white focus:outline-none",placeholder:"0"}),n.jsx("span",{className:"text-xs font-bold text-life-muted uppercase",children:"Minutes"})]})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(yt,{size:12})," Scheduled Start (Optional)"]}),n.jsx("input",{type:"datetime-local",value:e.scheduledTime||"",onChange:_=>d(i,"scheduledTime",_.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text focus:outline-none focus:border-life-gold/50 transition-all"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Tactical Steps (Sub-objectives)"}),n.jsxs("button",{type:"button",onClick:()=>h(i),className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white transition-colors uppercase font-bold",children:[n.jsx(gt,{size:12})," Add Step"]})]}),e.subtasks.length===0?n.jsx("div",{onClick:()=>h(i),className:"border border-dashed border-life-muted/20 rounded-lg p-4 text-center cursor-pointer hover:bg-life-muted/5 transition-colors group",children:n.jsx("p",{className:"text-[10px] text-life-muted group-hover:text-life-silver",children:"No sub-objectives. Tap 'Add Step' to start planning."})}):n.jsx("div",{className:"space-y-2",children:e.subtasks.map((_,P)=>n.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded-lg border border-life-muted/20 focus-within:border-life-gold/50 transition-all",children:[n.jsx("div",{className:"w-4 h-4 rounded border border-life-muted/30 flex items-center justify-center shrink-0",children:n.jsx("div",{className:"w-2 h-2 rounded-sm bg-life-muted/20"})}),n.jsx("input",{ref:M=>{N.current[P]=M},type:"text",value:_.title,onChange:M=>m(i,P,M.target.value),onKeyDown:M=>{var j;M.key==="Enter"&&(M.preventDefault(),P<e.subtasks.length-1?(j=N.current[P+1])==null||j.focus():h(i))},placeholder:"Sub-objective...",className:"flex-1 bg-transparent text-xs text-life-text focus:outline-none"}),n.jsx("button",{type:"button",onClick:()=>g(i,_.id),className:"text-life-muted hover:text-life-hard p-1 opacity-50 hover:opacity-100",children:n.jsx(Rt,{size:12})})]},_.id))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(dl,{size:12})," Intel / Notes"]}),n.jsx("textarea",{value:e.notes,onChange:_=>d(i,"notes",_.target.value),placeholder:"Add detailed instructions, links, or coordinates...",className:"w-full h-24 bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text focus:border-life-gold outline-none resize-none font-mono leading-relaxed"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(an,{size:12})," Alerts"]}),n.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-lg p-2",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.reminders.map(_=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-life-gold/10 border border-life-gold/30 rounded text-[9px] text-life-gold font-bold",children:[n.jsx("span",{children:I(_.minutesBefore)}),n.jsx("button",{type:"button",onClick:()=>v(i,_.id),className:"hover:text-white",children:n.jsx(Ie,{size:10})})]},_.id)),e.reminders.length===0&&n.jsx("span",{className:"text-[10px] text-life-muted italic p-1",children:"No active alerts"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:-1,onChange:_=>y(i,Number(_.target.value)),className:"w-full bg-life-black/50 border border-life-muted/30 rounded p-2 text-xs text-life-muted focus:outline-none focus:border-life-gold/50 appearance-none",children:[n.jsx("option",{value:-1,children:"+ Add Reminder"}),n.jsx("option",{value:0,children:"At scheduled time"}),n.jsx("option",{value:5,children:"5 mins before"}),n.jsx("option",{value:15,children:"15 mins before"}),n.jsx("option",{value:30,children:"30 mins before"}),n.jsx("option",{value:60,children:"1 hour before"})]}),n.jsx(ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]})]})]}),n.jsx("div",{className:"h-4"})]}),n.jsx("div",{className:"p-4 bg-life-black/80 border-t border-life-muted/20 shrink-0",children:n.jsx("button",{onClick:u,className:"w-full py-3 rounded-xl bg-life-gold text-life-black font-black uppercase tracking-widest text-xs hover:bg-yellow-400 transition-all shadow-lg shadow-life-gold/10",children:"Apply Tactical Intel"})})]})})},FT=({onClose:i})=>{var L;const{state:e}=ke(),{raidDispatch:l}=Ii(),{skillState:o}=vt(),[r,d]=U.useState(""),u=(L=e.ui.modalData)!=null&&L.date?e.ui.modalData.date.split("T")[0]:"",[h,g]=U.useState(u),[m,y]=U.useState(_e.EASY),[v,S]=U.useState([W.DIS]),[N,C]=U.useState(""),[E,w]=U.useState([{id:`temp_${Date.now()}_1`,title:"",notes:"",subtasks:[],reminders:[]},{id:`temp_${Date.now()}_2`,title:"",notes:"",subtasks:[],reminders:[]}]),I=U.useRef([]),[H,_]=U.useState(null);U.useEffect(()=>{var k;if(E.length>0){const R=E.length-1;E[R].title===""&&((k=I.current[R])==null||k.focus())}},[E.length]);const P=()=>{w([...E,{id:`temp_${Date.now()}_${E.length+1}`,title:"",notes:"",subtasks:[],reminders:[],difficulty:void 0,stat:void 0}])},M=k=>{w(E.filter((R,V)=>V!==k))},j=(k,R,V)=>{const te=[...E];te[k]={...te[k],[R]:V},w(te)},z=k=>{const R={id:`st_new_${Date.now()}`,title:"",isCompleted:!1},V=[...E];V[k].subtasks.push(R),w(V)},B=(k,R,V)=>{const te=[...E];te[k].subtasks[R].title=V,w(te)},q=(k,R)=>{const V=[...E];V[k].subtasks=V[k].subtasks.filter(te=>te.id!==R),w(V)},G=(k,R)=>{if(R===-1||E[k].reminders.some(D=>D.minutesBefore===R))return;const te={id:`rem_new_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,minutesBefore:R,isSent:!1},pe=[...E];pe[k].reminders.push(te),pe[k].reminders.sort((D,J)=>D.minutesBefore-J.minutesBefore),w(pe)},Q=(k,R)=>{const V=[...E];V[k].reminders=V[k].reminders.filter(te=>te.id!==R),w(V)},F=k=>{v.includes(k)?S(v.filter(R=>R!==k)):v.length<3&&S([...v,k])},ae=k=>{if(k.preventDefault(),!r.trim()||v.length===0)return;const R=E.filter(V=>V.title.trim()!=="").map((V,te)=>({id:`rs_${Date.now()}_${te}`,title:V.title,notes:V.notes,subtasks:V.subtasks.filter(pe=>pe.title.trim()!==""),reminders:V.reminders,isCompleted:!1,isLocked:te>0,difficulty:V.difficulty,stat:V.stat,scheduledTime:V.scheduledTime,deadline:V.deadline,isTimed:V.isTimed,durationMinutes:V.durationMinutes}));if(R.length===0){alert("Operation must have at least one step.");return}l.addRaid({title:r,deadline:h||void 0,difficulty:m,stats:v,skillId:N||void 0,steps:R}),i()},X=({type:k})=>{switch(k){case W.STR:return n.jsx(Xt,{size:18});case W.INT:return n.jsx(xt,{size:18});case W.DIS:return n.jsx(We,{size:18});case W.PCE:return n.jsx(ot,{size:18});case W.EMT:return n.jsx(fi,{size:18});case W.CAM:return n.jsx(Ue,{size:18});case W.CRT:return n.jsx(Dt,{size:18});default:return n.jsx(Ue,{size:18})}};return n.jsxs(n.Fragment,{children:[n.jsxs("form",{onSubmit:ae,className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Operation Title"}),n.jsx("input",{type:"text",value:r,onChange:k=>d(k.target.value),placeholder:"e.g. Master React Native...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Deadline (Target Date)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),n.jsx("input",{type:"date",value:h,onChange:k=>g(k.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-life-text focus:outline-none focus:border-life-gold/50 text-sm"})]})]})]}),o.skills.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Linked Skill"}),n.jsxs("div",{className:"relative",children:[n.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),n.jsxs("select",{value:N,onChange:k=>C(k.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-sm text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:"",children:"No specific skill..."}),o.skills.map(k=>n.jsxs("option",{value:k.id,children:[k.title," (Lvl ",k.level,")"]},k.id))]}),n.jsx(ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90",size:16})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Tactical Steps & Intel"}),n.jsxs("button",{type:"button",onClick:P,className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white transition-colors uppercase font-bold",children:[n.jsx(gt,{size:12})," Add Step"]})]}),n.jsx("div",{className:"space-y-3",children:E.map((k,R)=>n.jsxs("div",{className:"bg-life-black/40 p-3 rounded-lg border border-life-muted/20",children:[n.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[n.jsxs("span",{className:"text-[10px] font-mono text-life-muted w-4",children:[R+1,"."]}),n.jsx("input",{ref:V=>{I.current[R]=V},type:"text",value:k.title,onChange:V=>j(R,"title",V.target.value),onKeyDown:V=>{var te;V.key==="Enter"&&(V.preventDefault(),R<E.length-1?(te=I.current[R+1])==null||te.focus():P())},placeholder:`Step ${R+1} objective...`,className:"flex-1 bg-transparent border-b border-life-muted/30 px-2 py-1 text-sm text-life-text focus:outline-none focus:border-life-gold/50"}),E.length>1&&n.jsx("button",{type:"button",onClick:()=>M(R),className:"text-life-muted hover:text-life-hard p-1",children:n.jsx(Rt,{size:14})})]}),n.jsx("div",{className:"pl-6",children:n.jsxs("button",{type:"button",onClick:()=>_(R),className:`w-full flex items-center gap-3 p-2 rounded-md border text-xs text-left transition-all ${k.notes||k.subtasks.length>0||k.reminders.length>0?"bg-life-gold/5 border-life-gold/30 text-life-text":"bg-transparent border-dashed border-life-muted/30 text-life-muted hover:text-life-gold hover:border-life-gold/50"}`,children:[n.jsx(dl,{size:14,className:k.notes?"text-life-gold":"opacity-50"}),n.jsx("div",{className:"flex-1 truncate",children:k.notes?k.notes:n.jsx("span",{className:"opacity-50",children:"+ Add Intel, Subtasks, Alerts"})}),(k.subtasks.length>0||k.reminders.length>0)&&n.jsxs("div",{className:"flex gap-2 text-[9px] font-mono font-bold",children:[k.subtasks.length>0&&n.jsxs("span",{className:"flex items-center gap-1 text-life-gold",children:[n.jsx(Ri,{size:10})," ",k.subtasks.length]}),k.reminders.length>0&&n.jsxs("span",{className:"flex items-center gap-1 text-life-gold",children:[n.jsx(an,{size:10})," ",k.reminders.length]})]})]})})]},k.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(_e).map(k=>n.jsx("button",{type:"button",onClick:()=>y(k),className:`py-2 rounded-lg text-xs font-bold uppercase tracking-wider border transition-all ${m===k?`${ri[k]} ${No[k]} shadow-[0_0_10px_rgba(0,0,0,0.5)] scale-105`:"border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:k},k))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Attribute Focus (Select 1-3)"}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:Object.values(W).map(k=>{const R=v.includes(k);return n.jsxs("button",{type:"button",onClick:()=>F(k),className:`flex flex-col items-center justify-center p-2 rounded-lg border transition-all aspect-square relative ${R?"bg-life-muted/10 border-current shadow-lg scale-110":"border-life-muted/20 text-life-muted hover:bg-life-muted/5 opacity-70 hover:opacity-100"}`,style:{color:R?tt[k]:void 0},children:[n.jsx(X,{type:k}),n.jsx("span",{className:"text-[9px] font-bold mt-1",children:k}),R&&n.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full bg-current shadow-[0_0_5px_currentColor]"})]},k)})})]}),n.jsxs("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all mt-4 ${r&&v.length>0?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]":"bg-life-muted/20 text-life-muted cursor-not-allowed"}`,disabled:!r||v.length===0,children:["Launch Operation ",n.jsx(ht,{size:16})]})]}),H!==null&&n.jsx($T,{stepIndex:H,step:E[H],parentDifficulty:m,parentStat:v[0]||W.DIS,parentSkillId:N,onUpdate:j,onClose:()=>_(null),onAddSubtask:z,onRemoveSubtask:q,onChangeSubtask:B,onAddReminder:G,onRemoveReminder:Q})]})};var uo={exports:{}},du={},uu,Ux;function YT(){if(Ux)return uu;Ux=1;function i(e,l){typeof l=="boolean"&&(l={forever:l}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=l||{},this._maxRetryTime=l&&l.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return uu=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var l=new Date().getTime();if(e&&l-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var o=this._timeouts.shift();if(o===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),o=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},o),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(e,l){this._fn=e,l&&(l.timeout&&(this._operationTimeout=l.timeout),l.cb&&(this._operationTimeoutCb=l.cb));var o=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){o._operationTimeoutCb()},o._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},i.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},i.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},l=null,o=0,r=0;r<this._errors.length;r++){var d=this._errors[r],u=d.message,h=(e[u]||0)+1;e[u]=h,h>=o&&(l=d,o=h)}return l},uu}var Ox;function JT(){return Ox||(Ox=1,(function(i){var e=YT();i.operation=function(l){var o=i.timeouts(l);return new e(o,{forever:l&&(l.forever||l.retries===1/0),unref:l&&l.unref,maxRetryTime:l&&l.maxRetryTime})},i.timeouts=function(l){if(l instanceof Array)return[].concat(l);var o={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in l)o[r]=l[r];if(o.minTimeout>o.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var d=[],u=0;u<o.retries;u++)d.push(this.createTimeout(u,o));return l&&l.forever&&!d.length&&d.push(this.createTimeout(u,o)),d.sort(function(h,g){return h-g}),d},i.createTimeout=function(l,o){var r=o.randomize?Math.random()+1:1,d=Math.round(r*Math.max(o.minTimeout,1)*Math.pow(o.factor,l));return d=Math.min(d,o.maxTimeout),d},i.wrap=function(l,o,r){if(o instanceof Array&&(r=o,o=null),!r){r=[];for(var d in l)typeof l[d]=="function"&&r.push(d)}for(var u=0;u<r.length;u++){var h=r[u],g=l[h];l[h]=(function(y){var v=i.operation(o),S=Array.prototype.slice.call(arguments,1),N=S.pop();S.push(function(C){v.retry(C)||(C&&(arguments[0]=v.mainError()),N.apply(this,arguments))}),v.attempt(function(){y.apply(l,S)})}).bind(l,g),l[h].options=o}}})(du)),du}var fu,Hx;function XT(){return Hx||(Hx=1,fu=JT()),fu}var Gx;function KT(){if(Gx)return uo.exports;Gx=1;const i=XT(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class l extends Error{constructor(h){super(),h instanceof Error?(this.originalError=h,{message:h}=h):(this.originalError=new Error(h),this.originalError.stack=this.stack),this.name="AbortError",this.message=h}}const o=(u,h,g)=>{const m=g.retries-(h-1);return u.attemptNumber=h,u.retriesLeft=m,u},r=u=>e.includes(u),d=(u,h)=>new Promise((g,m)=>{h={onFailedAttempt:()=>{},retries:10,...h};const y=i.operation(h);y.attempt(async v=>{try{g(await u(v))}catch(S){if(!(S instanceof Error)){m(new TypeError(`Non-error was thrown: "${S}". You should only throw errors.`));return}if(S instanceof l)y.stop(),m(S.originalError);else if(S instanceof TypeError&&!r(S.message))y.stop(),m(S);else{o(S,v,h);try{await h.onFailedAttempt(S)}catch(N){m(N);return}y.retry(S)||m(y.mainError())}}})});return uo.exports=d,uo.exports.default=d,uo.exports.AbortError=l,uo.exports}var eb=KT();const QT=N0(eb);var WT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZT,eC;function tC(){return{geminiUrl:ZT,vertexUrl:eC}}function iC(i,e,l,o){var r,d;if(!(i!=null&&i.baseUrl)){const u=tC();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:l:(d=u.geminiUrl)!==null&&d!==void 0?d:o}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dn{}function ye(i,e){const l=/\{([^}]+)\}/g;return i.replace(l,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const d=e[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(i,e,l){for(let d=0;d<e.length-1;d++){const u=e[d];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in i))if(Array.isArray(l))i[h]=Array.from({length:l.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(i[h])){const g=i[h];if(Array.isArray(l))for(let m=0;m<g.length;m++){const y=g[m];p(y,e.slice(d+1),l[m])}else for(const m of g)p(m,e.slice(d+1),l)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in i||(i[h]=[{}]);const g=i[h];p(g[0],e.slice(d+1),l);return}(!i[u]||typeof i[u]!="object")&&(i[u]={}),i=i[u]}const o=e[e.length-1],r=i[o];if(r!==void 0){if(!l||typeof l=="object"&&Object.keys(l).length===0||l===r)return;if(typeof r=="object"&&typeof l=="object"&&r!==null&&l!==null)Object.assign(r,l);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.assign(i,l):i[o]=l}function f(i,e,l=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let o=0;o<e.length;o++){if(typeof i!="object"||i===null)return l;const r=e[o];if(r.endsWith("[]")){const d=r.slice(0,-2);if(d in i){const u=i[d];return Array.isArray(u)?u.map(h=>f(h,e.slice(o+1),l)):l}else return l}else i=i[r]}return i}catch(o){if(o instanceof TypeError)return l;throw o}}function nC(i,e){for(const[l,o]of Object.entries(e)){const r=l.split("."),d=o.split("."),u=new Set;let h=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){h=g;break}if(h!==-1&&d.length>h)for(let g=h;g<d.length;g++){const m=d[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}gu(i,r,d,0,u)}}function gu(i,e,l,o,r){if(o>=e.length||typeof i!="object"||i===null)return;const d=e[o];if(d.endsWith("[]")){const u=d.slice(0,-2),h=i;if(u in h&&Array.isArray(h[u]))for(const g of h[u])gu(g,e,l,o+1,r)}else if(d==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const u=i,h=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of h)g[m]=u[m];for(const[m,y]of Object.entries(g)){const v=[];for(const S of l.slice(o))S==="*"?v.push(m):v.push(S);p(u,v,y)}for(const m of h)delete u[m]}}else{const u=i;d in u&&gu(u[d],e,l,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bu(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sC(i){const e={},l=f(i,["operationName"]);l!=null&&p(e,["operationName"],l);const o=f(i,["resourceName"]);return o!=null&&p(e,["_url","resourceName"],o),e}function lC(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["metadata"]);o!=null&&p(e,["metadata"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);d!=null&&p(e,["error"],d);const u=f(i,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],aC(u)),e}function oC(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["metadata"]);o!=null&&p(e,["metadata"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);d!=null&&p(e,["error"],d);const u=f(i,["response"]);return u!=null&&p(e,["response"],rC(u)),e}function aC(i){const e={},l=f(i,["generatedSamples"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(u=>cC(u))),p(e,["generatedVideos"],d)}const o=f(i,["raiMediaFilteredCount"]);o!=null&&p(e,["raiMediaFilteredCount"],o);const r=f(i,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function rC(i){const e={},l=f(i,["videos"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(u=>dC(u))),p(e,["generatedVideos"],d)}const o=f(i,["raiMediaFilteredCount"]);o!=null&&p(e,["raiMediaFilteredCount"],o);const r=f(i,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function cC(i){const e={},l=f(i,["video"]);return l!=null&&p(e,["video"],xC(l)),e}function dC(i){const e={},l=f(i,["_self"]);return l!=null&&p(e,["video"],gC(l)),e}function uC(i){const e={},l=f(i,["operationName"]);return l!=null&&p(e,["_url","operationName"],l),e}function fC(i){const e={},l=f(i,["operationName"]);return l!=null&&p(e,["_url","operationName"],l),e}function pC(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["metadata"]);o!=null&&p(e,["metadata"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);d!=null&&p(e,["error"],d);const u=f(i,["response"]);return u!=null&&p(e,["response"],mC(u)),e}function mC(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["parent"]);o!=null&&p(e,["parent"],o);const r=f(i,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function tb(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["metadata"]);o!=null&&p(e,["metadata"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);d!=null&&p(e,["error"],d);const u=f(i,["response"]);return u!=null&&p(e,["response"],hC(u)),e}function hC(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["parent"]);o!=null&&p(e,["parent"],o);const r=f(i,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function xC(i){const e={},l=f(i,["uri"]);l!=null&&p(e,["uri"],l);const o=f(i,["encodedVideo"]);o!=null&&p(e,["videoBytes"],Bu(o));const r=f(i,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function gC(i){const e={},l=f(i,["gcsUri"]);l!=null&&p(e,["uri"],l);const o=f(i,["bytesBase64Encoded"]);o!=null&&p(e,["videoBytes"],Bu(o));const r=f(i,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vx;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vx||(Vx={}));var qx;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(qx||(qx={}));var Bx;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Bx||(Bx={}));var Un;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Un||(Un={}));var $x;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})($x||($x={}));var Fx;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Fx||(Fx={}));var Yx;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Yx||(Yx={}));var Jx;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jx||(Jx={}));var Xx;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Xx||(Xx={}));var Kx;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Kx||(Kx={}));var Qx;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Qx||(Qx={}));var Wx;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(Wx||(Wx={}));var Zx;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Zx||(Zx={}));var eg;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(eg||(eg={}));var tg;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(tg||(tg={}));var ig;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(ig||(ig={}));var ng;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(ng||(ng={}));var sg;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sg||(sg={}));var lg;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(lg||(lg={}));var og;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(og||(og={}));var ag;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ag||(ag={}));var pr;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(pr||(pr={}));var rg;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rg||(rg={}));var cg;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cg||(cg={}));var dg;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dg||(dg={}));var bu;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(bu||(bu={}));var ug;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ug||(ug={}));var fg;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(fg||(fg={}));var yu;(function(i){i.COLLECTION="COLLECTION"})(yu||(yu={}));var pg;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(pg||(pg={}));var mg;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mg||(mg={}));var mr;(function(i){i.PREDICT="PREDICT",i.EMBED_CONTENT="EMBED_CONTENT"})(mr||(mr={}));var hg;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(hg||(hg={}));var xg;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(xg||(xg={}));var gg;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(gg||(gg={}));var bg;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bg||(bg={}));var yg;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yg||(yg={}));var vg;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vg||(vg={}));var Sg;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Sg||(Sg={}));var Ng;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(Ng||(Ng={}));var Tg;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Tg||(Tg={}));var Cg;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Cg||(Cg={}));var wg;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(wg||(wg={}));var kg;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(kg||(kg={}));var _g;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(_g||(_g={}));var Eg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Eg||(Eg={}));var jg;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(jg||(jg={}));var Ag;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ag||(Ag={}));var Mg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Mg||(Mg={}));var Rg;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Rg||(Rg={}));var Dg;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(Dg||(Dg={}));var Ig;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ig||(Ig={}));var Lg;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Lg||(Lg={}));var zg;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(zg||(zg={}));var Pg;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Pg||(Pg={}));var Ug;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ug||(Ug={}));var Og;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Og||(Og={}));var tl;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(tl||(tl={}));class vu{constructor(e){const l={};for(const o of e.headers.entries())l[o[0]]=o[1];this.headers=l,this.responseInternal=e}json(){return this.responseInternal.json()}}class fo{get text(){var e,l,o,r,d,u,h,g;if(((r=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const v=[];for(const S of(g=(h=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[N,C]of Object.entries(S))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(C!==null||C!==void 0)&&v.push(N);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;y=!0,m+=S.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var e,l,o,r,d,u,h,g;if(((r=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const v of(g=(h=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,N]of Object.entries(v))S!=="inlineData"&&(N!==null||N!==void 0)&&y.push(S);v.inlineData&&typeof v.inlineData.data=="string"&&(m+=atob(v.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,l,o,r,d,u,h,g;if(((r=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,l,o,r,d,u,h,g,m;if(((r=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(g=(h=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,l,o,r,d,u,h,g,m;if(((r=(o=(l=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||l===void 0?void 0:l.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(g=(h=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class Hg{}class Gg{}class bC{}class yC{}class vC{}class SC{}class Vg{}class qg{}class Bg{}class NC{}class hr{_fromAPIResponse({apiResponse:e,_isVertexAI:l}){const o=new hr;let r;const d=e;return l?r=oC(d):r=lC(d),Object.assign(o,r),o}}class $g{}class Fg{}class Yg{}class Jg{}class TC{}class CC{}class wC{}class $u{_fromAPIResponse({apiResponse:e,_isVertexAI:l}){const o=new $u,d=pC(e);return Object.assign(o,d),o}}class kC{}class _C{}class EC{}class jC{}class Xg{}class AC{get text(){var e,l,o;let r="",d=!1;const u=[];for(const h of(o=(l=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,r+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var e,l,o;let r="";const d=[];for(const u of(o=(l=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(u))h!=="inlineData"&&g!==null&&d.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Fu{_fromAPIResponse({apiResponse:e,_isVertexAI:l}){const o=new Fu,d=tb(e);return Object.assign(o,d),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const l=e.split("/",2);return`publishers/${l[0]}/models/${l[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ib(i,e){const l=Ve(i,e);return l?l.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}`:l.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${l}`:l:""}function nb(i){return Array.isArray(i)?i.map(e=>xr(e)):[xr(i)]}function xr(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function sb(i){const e=xr(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lb(i){const e=xr(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function ob(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>Kg(e)):[Kg(i)]}function Su(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Qg(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Wg(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function wt(i){if(i==null)throw new Error("ContentUnion is required");return Su(i)?i:{role:"user",parts:ob(i)}}function Yu(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(l=>{const o=wt(l);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const l=wt(e);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]}return Array.isArray(e)?e.map(l=>wt(l)):[wt(e)]}function ci(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Qg(i)||Wg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wt(i)]}const e=[],l=[],o=Su(i[0]);for(const r of i){const d=Su(r);if(d!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)e.push(r);else{if(Qg(r)||Wg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");l.push(r)}}return o||e.push({role:"user",parts:ob(l)}),e}function RC(i,e){i.includes("null")&&(e.nullable=!0);const l=i.filter(o=>o!=="null");if(l.length===1)e.type=Object.values(Un).includes(l[0].toUpperCase())?l[0].toUpperCase():Un.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of l)e.anyOf.push({type:Object.values(Un).includes(o.toUpperCase())?o.toUpperCase():Un.TYPE_UNSPECIFIED})}}function nl(i){const e={},l=["items"],o=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=i.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(e.nullable=!0,i=d[1]):d[1].type==="null"&&(e.nullable=!0,i=d[0])),i.type instanceof Array&&RC(i.type,e);for(const[u,h]of Object.entries(i))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Un).includes(h.toUpperCase())?h.toUpperCase():Un.TYPE_UNSPECIFIED}else if(l.includes(u))e[u]=nl(h);else if(o.includes(u)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(nl(m))}e[u]=g}else if(r.includes(u)){const g={};for(const[m,y]of Object.entries(h))g[m]=nl(y);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=h}return e}function Ju(i){return nl(i)}function Xu(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Ku(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function fl(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=nl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=nl(e.response));return i}function pl(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const l of i)e.push(l);return e}function DC(i,e,l,o=1){const r=!e.startsWith(`${l}/`)&&e.split("/").length===o;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${l}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}/${e}`:e:r?`${l}/${e}`:e}function un(i,e){if(typeof e!="string")throw new Error("name must be a string");return DC(i,e,"cachedContents")}function ab(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Hn(i){return Bu(i)}function IC(i){return i!=null&&typeof i=="object"&&"name"in i}function LC(i){return i!=null&&typeof i=="object"&&"video"in i}function zC(i){return i!=null&&typeof i=="object"&&"uri"in i}function rb(i){var e;let l;if(IC(i)&&(l=i.name),!(zC(i)&&(l=i.uri,l===void 0))&&!(LC(i)&&(l=(e=i.video)===null||e===void 0?void 0:e.uri,l===void 0))){if(typeof i=="string"&&(l=i),l===void 0)throw new Error("Could not extract file name from the provided input.");if(l.startsWith("https://")){const r=l.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${l}`);l=r[0]}else l.startsWith("files/")&&(l=l.split("files/")[1]);return l}}function cb(i,e){let l;return i.isVertexAI()?l=e?"publishers/google/models":"models":l=e?"models":"tunedModels",l}function db(i){for(const e of["models","tunedModels","publisherModels"])if(PC(i,e))return i[e];return[]}function PC(i,e){return i!==null&&typeof i=="object"&&e in i}function UC(i,e={}){const l=i,o={name:l.name,description:l.description,parametersJsonSchema:l.inputSchema};return l.outputSchema&&(o.responseJsonSchema=l.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function OC(i,e={}){const l=[],o=new Set;for(const r of i){const d=r.name;if(o.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);o.add(d);const u=UC(r,e);u.functionDeclarations&&l.push(...u.functionDeclarations)}return{functionDeclarations:l}}function ub(i,e){let l;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))l={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))l={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))l={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");l={inlinedRequests:e}}else l=e;const o=[l.gcsUri,l.bigqueryUri].filter(Boolean).length,r=[l.inlinedRequests,l.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return l}function HC(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fb(i){if(typeof i!="object"||i===null)return{};const e=i,l=e.inlinedResponses;if(typeof l!="object"||l===null)return i;const r=l.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let d=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){d=!0;break}}return d&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function ml(i,e){const l=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(l))return l.split("/").pop();throw new Error(`Invalid batch job name: ${l}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(l))return l.split("/").pop();if(/^\d+$/.test(l))return l;throw new Error(`Invalid batch job name: ${l}.`)}function pb(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function GC(i){return i.includes("gemini")&&i!=="gemini-embedding-001"||i.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VC(i){const e={},l=f(i,["responsesFile"]);l!=null&&p(e,["fileName"],l);const o=f(i,["inlinedResponses","inlinedResponses"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>Nw(u))),p(e,["inlinedResponses"],d)}const r=f(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["inlinedEmbedContentResponses"],d)}return e}function qC(i){const e={},l=f(i,["predictionsFormat"]);l!=null&&p(e,["format"],l);const o=f(i,["gcsDestination","outputUriPrefix"]);o!=null&&p(e,["gcsUri"],o);const r=f(i,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function BC(i){const e={},l=f(i,["format"]);l!=null&&p(e,["predictionsFormat"],l);const o=f(i,["gcsUri"]);o!=null&&p(e,["gcsDestination","outputUriPrefix"],o);const r=f(i,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),f(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function tr(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["metadata","displayName"]);o!=null&&p(e,["displayName"],o);const r=f(i,["metadata","state"]);r!=null&&p(e,["state"],pb(r));const d=f(i,["metadata","createTime"]);d!=null&&p(e,["createTime"],d);const u=f(i,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const h=f(i,["metadata","updateTime"]);h!=null&&p(e,["updateTime"],h);const g=f(i,["metadata","model"]);g!=null&&p(e,["model"],g);const m=f(i,["metadata","output"]);return m!=null&&p(e,["dest"],VC(fb(m))),e}function Nu(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["displayName"]);o!=null&&p(e,["displayName"],o);const r=f(i,["state"]);r!=null&&p(e,["state"],pb(r));const d=f(i,["error"]);d!=null&&p(e,["error"],d);const u=f(i,["createTime"]);u!=null&&p(e,["createTime"],u);const h=f(i,["startTime"]);h!=null&&p(e,["startTime"],h);const g=f(i,["endTime"]);g!=null&&p(e,["endTime"],g);const m=f(i,["updateTime"]);m!=null&&p(e,["updateTime"],m);const y=f(i,["model"]);y!=null&&p(e,["model"],y);const v=f(i,["inputConfig"]);v!=null&&p(e,["src"],$C(v));const S=f(i,["outputConfig"]);S!=null&&p(e,["dest"],qC(fb(S)));const N=f(i,["completionStats"]);return N!=null&&p(e,["completionStats"],N),e}function $C(i){const e={},l=f(i,["instancesFormat"]);l!=null&&p(e,["format"],l);const o=f(i,["gcsSource","uris"]);o!=null&&p(e,["gcsUri"],o);const r=f(i,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function FC(i,e){const l={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&p(l,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Sw(i,u))),p(l,["requests","requests"],d)}return l}function YC(i){const e={},l=f(i,["format"]);l!=null&&p(e,["instancesFormat"],l);const o=f(i,["gcsUri"]);o!=null&&p(e,["gcsSource","uris"],o);const r=f(i,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),f(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function JC(i){const e={},l=f(i,["data"]);if(l!=null&&p(e,["data"],l),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function XC(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],ml(i,o)),l}function KC(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],ml(i,o)),l}function QC(i){const e={},l=f(i,["content"]);l!=null&&p(e,["content"],l);const o=f(i,["citationMetadata"]);o!=null&&p(e,["citationMetadata"],WC(o));const r=f(i,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const d=f(i,["finishReason"]);d!=null&&p(e,["finishReason"],d);const u=f(i,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const h=f(i,["groundingMetadata"]);h!=null&&p(e,["groundingMetadata"],h);const g=f(i,["index"]);g!=null&&p(e,["index"],g);const m=f(i,["logprobsResult"]);m!=null&&p(e,["logprobsResult"],m);const y=f(i,["safetyRatings"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(N=>N)),p(e,["safetyRatings"],S)}const v=f(i,["urlContextMetadata"]);return v!=null&&p(e,["urlContextMetadata"],v),e}function WC(i){const e={},l=f(i,["citationSources"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>r)),p(e,["citations"],o)}return e}function mb(i){const e={},l=f(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>jw(d))),p(e,["parts"],r)}const o=f(i,["role"]);return o!=null&&p(e,["role"],o),e}function ZC(i,e){const l={},o=f(i,["displayName"]);if(e!==void 0&&o!=null&&p(e,["batch","displayName"],o),f(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return l}function ew(i,e){const l={},o=f(i,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const r=f(i,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],BC(HC(r))),l}function Zg(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["_url","model"],Ve(i,o));const r=f(e,["src"]);r!=null&&p(l,["batch","inputConfig"],FC(i,ub(i,r)));const d=f(e,["config"]);return d!=null&&ZC(d,l),l}function tw(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["model"],Ve(i,o));const r=f(e,["src"]);r!=null&&p(l,["inputConfig"],YC(ub(i,r)));const d=f(e,["config"]);return d!=null&&ew(d,l),l}function iw(i,e){const l={},o=f(i,["displayName"]);return e!==void 0&&o!=null&&p(e,["batch","displayName"],o),l}function nw(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["_url","model"],Ve(i,o));const r=f(e,["src"]);r!=null&&p(l,["batch","inputConfig"],dw(i,r));const d=f(e,["config"]);return d!=null&&iw(d,l),l}function sw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],ml(i,o)),l}function lw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],ml(i,o)),l}function ow(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["name"]);o!=null&&p(e,["name"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);return d!=null&&p(e,["error"],d),e}function aw(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["name"]);o!=null&&p(e,["name"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);return d!=null&&p(e,["error"],d),e}function rw(i,e){const l={},o=f(e,["contents"]);if(o!=null){let d=Yu(i,o);Array.isArray(d)&&(d=d.map(u=>u)),p(l,["requests[]","request","content"],d)}const r=f(e,["config"]);return r!=null&&(p(l,["_self"],cw(r,l)),nC(l,{"requests[].*":"requests[].request.*"})),l}function cw(i,e){const l={},o=f(i,["taskType"]);e!==void 0&&o!=null&&p(e,["requests[]","taskType"],o);const r=f(i,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const d=f(i,["outputDimensionality"]);if(e!==void 0&&d!=null&&p(e,["requests[]","outputDimensionality"],d),f(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function dw(i,e){const l={},o=f(e,["fileName"]);o!=null&&p(l,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&p(l,["requests"],rw(i,r)),l}function uw(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(i,["fileUri"]);l!=null&&p(e,["fileUri"],l);const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function fw(i){const e={},l=f(i,["id"]);l!=null&&p(e,["id"],l);const o=f(i,["args"]);o!=null&&p(e,["args"],o);const r=f(i,["name"]);if(r!=null&&p(e,["name"],r),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pw(i){const e={},l=f(i,["allowedFunctionNames"]);l!=null&&p(e,["allowedFunctionNames"],l);const o=f(i,["mode"]);if(o!=null&&p(e,["mode"],o),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mw(i,e,l){const o={},r=f(e,["systemInstruction"]);l!==void 0&&r!=null&&p(l,["systemInstruction"],mb(wt(r)));const d=f(e,["temperature"]);d!=null&&p(o,["temperature"],d);const u=f(e,["topP"]);u!=null&&p(o,["topP"],u);const h=f(e,["topK"]);h!=null&&p(o,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const y=f(e,["stopSequences"]);y!=null&&p(o,["stopSequences"],y);const v=f(e,["responseLogprobs"]);v!=null&&p(o,["responseLogprobs"],v);const S=f(e,["logprobs"]);S!=null&&p(o,["logprobs"],S);const N=f(e,["presencePenalty"]);N!=null&&p(o,["presencePenalty"],N);const C=f(e,["frequencyPenalty"]);C!=null&&p(o,["frequencyPenalty"],C);const E=f(e,["seed"]);E!=null&&p(o,["seed"],E);const w=f(e,["responseMimeType"]);w!=null&&p(o,["responseMimeType"],w);const I=f(e,["responseSchema"]);I!=null&&p(o,["responseSchema"],Ju(I));const H=f(e,["responseJsonSchema"]);if(H!=null&&p(o,["responseJsonSchema"],H),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(l!==void 0&&_!=null){let ae=_;Array.isArray(ae)&&(ae=ae.map(X=>Aw(X))),p(l,["safetySettings"],ae)}const P=f(e,["tools"]);if(l!==void 0&&P!=null){let ae=pl(P);Array.isArray(ae)&&(ae=ae.map(X=>Rw(fl(X)))),p(l,["tools"],ae)}const M=f(e,["toolConfig"]);if(l!==void 0&&M!=null&&p(l,["toolConfig"],Mw(M)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=f(e,["cachedContent"]);l!==void 0&&j!=null&&p(l,["cachedContent"],un(i,j));const z=f(e,["responseModalities"]);z!=null&&p(o,["responseModalities"],z);const B=f(e,["mediaResolution"]);B!=null&&p(o,["mediaResolution"],B);const q=f(e,["speechConfig"]);if(q!=null&&p(o,["speechConfig"],Xu(q)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=f(e,["thinkingConfig"]);G!=null&&p(o,["thinkingConfig"],G);const Q=f(e,["imageConfig"]);Q!=null&&p(o,["imageConfig"],vw(Q));const F=f(e,["enableEnhancedCivicAnswers"]);if(F!=null&&p(o,["enableEnhancedCivicAnswers"],F),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function hw(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>QC(m))),p(e,["candidates"],g)}const r=f(i,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const d=f(i,["promptFeedback"]);d!=null&&p(e,["promptFeedback"],d);const u=f(i,["responseId"]);u!=null&&p(e,["responseId"],u);const h=f(i,["usageMetadata"]);return h!=null&&p(e,["usageMetadata"],h),e}function xw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],ml(i,o)),l}function gw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],ml(i,o)),l}function bw(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=f(i,["enableWidget"]);return l!=null&&p(e,["enableWidget"],l),e}function yw(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=f(i,["timeRangeFilter"]);return l!=null&&p(e,["timeRangeFilter"],l),e}function vw(i){const e={},l=f(i,["aspectRatio"]);l!=null&&p(e,["aspectRatio"],l);const o=f(i,["imageSize"]);if(o!=null&&p(e,["imageSize"],o),f(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Sw(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["request","model"],Ve(i,o));const r=f(e,["contents"]);if(r!=null){let h=ci(r);Array.isArray(h)&&(h=h.map(g=>mb(g))),p(l,["request","contents"],h)}const d=f(e,["metadata"]);d!=null&&p(l,["metadata"],d);const u=f(e,["config"]);return u!=null&&p(l,["request","generationConfig"],mw(i,u,f(l,["request"],{}))),l}function Nw(i){const e={},l=f(i,["response"]);l!=null&&p(e,["response"],hw(l));const o=f(i,["metadata"]);o!=null&&p(e,["metadata"],o);const r=f(i,["error"]);return r!=null&&p(e,["error"],r),e}function Tw(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),f(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return l}function Cw(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const d=f(i,["filter"]);return e!==void 0&&d!=null&&p(e,["_query","filter"],d),l}function ww(i){const e={},l=f(i,["config"]);return l!=null&&Tw(l,e),e}function kw(i){const e={},l=f(i,["config"]);return l!=null&&Cw(l,e),e}function _w(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>tr(u))),p(e,["batchJobs"],d)}return e}function Ew(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Nu(u))),p(e,["batchJobs"],d)}return e}function jw(i){const e={},l=f(i,["mediaResolution"]);l!=null&&p(e,["mediaResolution"],l);const o=f(i,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const r=f(i,["executableCode"]);r!=null&&p(e,["executableCode"],r);const d=f(i,["fileData"]);d!=null&&p(e,["fileData"],uw(d));const u=f(i,["functionCall"]);u!=null&&p(e,["functionCall"],fw(u));const h=f(i,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(i,["inlineData"]);g!=null&&p(e,["inlineData"],JC(g));const m=f(i,["text"]);m!=null&&p(e,["text"],m);const y=f(i,["thought"]);y!=null&&p(e,["thought"],y);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const S=f(i,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function Aw(i){const e={},l=f(i,["category"]);if(l!=null&&p(e,["category"],l),f(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(i,["threshold"]);return o!=null&&p(e,["threshold"],o),e}function Mw(i){const e={},l=f(i,["retrievalConfig"]);l!=null&&p(e,["retrievalConfig"],l);const o=f(i,["functionCallingConfig"]);return o!=null&&p(e,["functionCallingConfig"],pw(o)),e}function Rw(i){const e={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(i,["computerUse"]);l!=null&&p(e,["computerUse"],l);const o=f(i,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const r=f(i,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["functionDeclarations"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const u=f(i,["googleMaps"]);u!=null&&p(e,["googleMaps"],bw(u));const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],yw(h));const g=f(i,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(i,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(rn||(rn={}));class fs{constructor(e,l,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=l,this.init(e,o,r)}init(e,l,o){var r,d;this.nameInternal=e,this.pageInternal=l[this.nameInternal]||[],this.sdkHttpResponseInternal=l==null?void 0:l.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=l.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(d=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dw extends dn{constructor(e){super(),this.apiClient=e,this.list=async(l={})=>new fs(rn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(l),l),this.create=async l=>(this.apiClient.isVertexAI()&&(l.config=this.formatDestination(l.src,l.config)),this.createInternal(l)),this.createEmbeddings=async l=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(l)}}createInlinedGenerateContentRequest(e){const l=Zg(this.apiClient,e),o=l._url,r=ye("{model}:batchGenerateContent",o),h=l.batch.inputConfig.requests,g=h.requests,m=[];for(const y of g){const v=Object.assign({},y);if(v.systemInstruction){const S=v.systemInstruction;delete v.systemInstruction;const N=v.request;N.systemInstruction=S,v.request=N}m.push(v)}return h.requests=m,delete l.config,delete l._url,delete l._query,{path:r,body:l}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,l){const o=l?Object.assign({},l):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const d=this.getGcsUri(e),u=this.getBigqueryUri(e);if(d)d.endsWith(".jsonl")?o.dest=`${d.slice(0,-6)}/dest`:o.dest=`${d}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=tw(this.apiClient,e);return h=ye("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>Nu(y))}else{const m=Zg(this.apiClient,e);return h=ye("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>tr(y))}}async createEmbeddingsInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nw(this.apiClient,e);return d=ye("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>tr(g))}}async get(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=gw(this.apiClient,e);return h=ye("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>Nu(y))}else{const m=xw(this.apiClient,e);return h=ye("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>tr(y))}}async cancel(e){var l,o,r,d;let u="",h={};if(this.apiClient.isVertexAI()){const g=KC(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=XC(this.apiClient,e);u=ye("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=kw(e);return h=ye("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=Ew(y),S=new Xg;return Object.assign(S,v),S})}else{const m=ww(e);return h=ye("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=_w(y),S=new Xg;return Object.assign(S,v),S})}}async delete(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=lw(this.apiClient,e);return h=ye("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>aw(y))}else{const m=sw(this.apiClient,e);return h=ye("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>ow(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iw(i){const e={},l=f(i,["data"]);if(l!=null&&p(e,["data"],l),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function e0(i){const e={},l=f(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>nk(d))),p(e,["parts"],r)}const o=f(i,["role"]);return o!=null&&p(e,["role"],o),e}function Lw(i,e){const l={},o=f(i,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const r=f(i,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const d=f(i,["displayName"]);e!==void 0&&d!=null&&p(e,["displayName"],d);const u=f(i,["contents"]);if(e!==void 0&&u!=null){let y=ci(u);Array.isArray(y)&&(y=y.map(v=>e0(v))),p(e,["contents"],y)}const h=f(i,["systemInstruction"]);e!==void 0&&h!=null&&p(e,["systemInstruction"],e0(wt(h)));const g=f(i,["tools"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>lk(v))),p(e,["tools"],y)}const m=f(i,["toolConfig"]);if(e!==void 0&&m!=null&&p(e,["toolConfig"],sk(m)),f(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return l}function zw(i,e){const l={},o=f(i,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const r=f(i,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const d=f(i,["displayName"]);e!==void 0&&d!=null&&p(e,["displayName"],d);const u=f(i,["contents"]);if(e!==void 0&&u!=null){let v=ci(u);Array.isArray(v)&&(v=v.map(S=>S)),p(e,["contents"],v)}const h=f(i,["systemInstruction"]);e!==void 0&&h!=null&&p(e,["systemInstruction"],wt(h));const g=f(i,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(S=>ok(S))),p(e,["tools"],v)}const m=f(i,["toolConfig"]);e!==void 0&&m!=null&&p(e,["toolConfig"],m);const y=f(i,["kmsKeyName"]);return e!==void 0&&y!=null&&p(e,["encryption_spec","kmsKeyName"],y),l}function Pw(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["model"],ib(i,o));const r=f(e,["config"]);return r!=null&&Lw(r,l),l}function Uw(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["model"],ib(i,o));const r=f(e,["config"]);return r!=null&&zw(r,l),l}function Ow(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],un(i,o)),l}function Hw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],un(i,o)),l}function Gw(i){const e={},l=f(i,["sdkHttpResponse"]);return l!=null&&p(e,["sdkHttpResponse"],l),e}function Vw(i){const e={},l=f(i,["sdkHttpResponse"]);return l!=null&&p(e,["sdkHttpResponse"],l),e}function qw(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(i,["fileUri"]);l!=null&&p(e,["fileUri"],l);const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function Bw(i){const e={},l=f(i,["id"]);l!=null&&p(e,["id"],l);const o=f(i,["args"]);o!=null&&p(e,["args"],o);const r=f(i,["name"]);if(r!=null&&p(e,["name"],r),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $w(i){const e={},l=f(i,["allowedFunctionNames"]);l!=null&&p(e,["allowedFunctionNames"],l);const o=f(i,["mode"]);if(o!=null&&p(e,["mode"],o),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Fw(i){const e={},l=f(i,["description"]);l!=null&&p(e,["description"],l);const o=f(i,["name"]);o!=null&&p(e,["name"],o);const r=f(i,["parameters"]);r!=null&&p(e,["parameters"],r);const d=f(i,["parametersJsonSchema"]);d!=null&&p(e,["parametersJsonSchema"],d);const u=f(i,["response"]);u!=null&&p(e,["response"],u);const h=f(i,["responseJsonSchema"]);if(h!=null&&p(e,["responseJsonSchema"],h),f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Yw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],un(i,o)),l}function Jw(i,e){const l={},o=f(e,["name"]);return o!=null&&p(l,["_url","name"],un(i,o)),l}function Xw(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=f(i,["enableWidget"]);return l!=null&&p(e,["enableWidget"],l),e}function Kw(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=f(i,["timeRangeFilter"]);return l!=null&&p(e,["timeRangeFilter"],l),e}function Qw(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),l}function Ww(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),l}function Zw(i){const e={},l=f(i,["config"]);return l!=null&&Qw(l,e),e}function ek(i){const e={},l=f(i,["config"]);return l!=null&&Ww(l,e),e}function tk(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["cachedContents"],d)}return e}function ik(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["cachedContents"],d)}return e}function nk(i){const e={},l=f(i,["mediaResolution"]);l!=null&&p(e,["mediaResolution"],l);const o=f(i,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const r=f(i,["executableCode"]);r!=null&&p(e,["executableCode"],r);const d=f(i,["fileData"]);d!=null&&p(e,["fileData"],qw(d));const u=f(i,["functionCall"]);u!=null&&p(e,["functionCall"],Bw(u));const h=f(i,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(i,["inlineData"]);g!=null&&p(e,["inlineData"],Iw(g));const m=f(i,["text"]);m!=null&&p(e,["text"],m);const y=f(i,["thought"]);y!=null&&p(e,["thought"],y);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const S=f(i,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function sk(i){const e={},l=f(i,["retrievalConfig"]);l!=null&&p(e,["retrievalConfig"],l);const o=f(i,["functionCallingConfig"]);return o!=null&&p(e,["functionCallingConfig"],$w(o)),e}function lk(i){const e={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(i,["computerUse"]);l!=null&&p(e,["computerUse"],l);const o=f(i,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const r=f(i,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["functionDeclarations"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const u=f(i,["googleMaps"]);u!=null&&p(e,["googleMaps"],Xw(u));const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],Kw(h));const g=f(i,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(i,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function ok(i){const e={},l=f(i,["retrieval"]);l!=null&&p(e,["retrieval"],l);const o=f(i,["computerUse"]);if(o!=null&&p(e,["computerUse"],o),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(i,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const d=f(i,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const u=f(i,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(S=>Fw(S))),p(e,["functionDeclarations"],v)}const h=f(i,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const g=f(i,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const m=f(i,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const y=f(i,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function ak(i,e){const l={},o=f(i,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const r=f(i,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),l}function rk(i,e){const l={},o=f(i,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const r=f(i,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),l}function ck(i,e){const l={},o=f(e,["name"]);o!=null&&p(l,["_url","name"],un(i,o));const r=f(e,["config"]);return r!=null&&ak(r,l),l}function dk(i,e){const l={},o=f(e,["name"]);o!=null&&p(l,["_url","name"],un(i,o));const r=f(e,["config"]);return r!=null&&rk(r,l),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uk extends dn{constructor(e){super(),this.apiClient=e,this.list=async(l={})=>new fs(rn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(l),l)}async create(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=Uw(this.apiClient,e);return h=ye("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const m=Pw(this.apiClient,e);return h=ye("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=Jw(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const m=Yw(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=Hw(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=Vw(y),S=new Yg;return Object.assign(S,v),S})}else{const m=Ow(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=Gw(y),S=new Yg;return Object.assign(S,v),S})}}async update(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=dk(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const m=ck(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=ek(e);return h=ye("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=ik(y),S=new Jg;return Object.assign(S,v),S})}else{const m=Zw(e);return h=ye("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=tk(y),S=new Jg;return Object.assign(S,v),S})}}}function gr(i,e){var l={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(l[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(i);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(i,o[r])&&(l[o[r]]=i[o[r]]);return l}function t0(i){var e=typeof Symbol=="function"&&Symbol.iterator,l=e&&i[e],o=0;if(l)return l.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(i){return this instanceof Ee?(this.v=i,this):new Ee(i)}function Ai(i,e,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=l.apply(i,e||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(N){return function(C){return Promise.resolve(C).then(N,v)}}function h(N,C){o[N]&&(r[N]=function(E){return new Promise(function(w,I){d.push([N,E,w,I])>1||g(N,E)})},C&&(r[N]=C(r[N])))}function g(N,C){try{m(o[N](C))}catch(E){S(d[0][3],E)}}function m(N){N.value instanceof Ee?Promise.resolve(N.value.v).then(y,v):S(d[0][2],N)}function y(N){g("next",N)}function v(N){g("throw",N)}function S(N,C){N(C),d.shift(),d.length&&g(d[0][0],d[0][1])}}function Mi(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],l;return e?e.call(i):(i=typeof t0=="function"?t0(i):i[Symbol.iterator](),l={},o("next"),o("throw"),o("return"),l[Symbol.asyncIterator]=function(){return this},l);function o(d){l[d]=i[d]&&function(u){return new Promise(function(h,g){u=i[d](u),r(h,g,u.done,u.value)})}}function r(d,u,h,g){Promise.resolve(g).then(function(m){d({value:m,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const l=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return l===void 0?!1:hb(l)}function hb(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function pk(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function i0(i){if(i===void 0||i.length===0)return[];const e=[],l=i.length;let o=0;for(;o<l;)if(i[o].role==="user")e.push(i[o]),o++;else{const r=[];let d=!0;for(;o<l&&i[o].role==="model";)r.push(i[o]),d&&!hb(i[o])&&(d=!1),o++;d?e.push(...r):e.pop()}return e}class mk{constructor(e,l){this.modelsModule=e,this.apiClient=l}create(e){return new hk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class hk{constructor(e,l,o,r={},d=[]){this.apiClient=e,this.modelsModule=l,this.model=o,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),pk(d)}async sendMessage(e){var l;await this.sendPromise;const o=wt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(l=e.config)!==null&&l!==void 0?l:this.config});return this.sendPromise=(async()=>{var d,u,h;const g=await r,m=(u=(d=g.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content,y=g.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let S=[];y!=null&&(S=(h=y.slice(v))!==null&&h!==void 0?h:[]);const N=m?[m]:[];this.recordHistory(o,N,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var l;await this.sendPromise;const o=wt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(l=e.config)!==null&&l!==void 0?l:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,o)}getHistory(e=!1){const l=e?i0(this.history):this.history;return structuredClone(l)}processStreamResponse(e,l){return Ai(this,arguments,function*(){var r,d,u,h,g,m;const y=[];try{for(var v=!0,S=Mi(e),N;N=yield Ee(S.next()),r=N.done,!r;v=!0){h=N.value,v=!1;const C=h;if(fk(C)){const E=(m=(g=C.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;E!==void 0&&y.push(E)}yield yield Ee(C)}}catch(C){d={error:C}}finally{try{!v&&!r&&(u=S.return)&&(yield Ee(u.call(S)))}finally{if(d)throw d.error}}this.recordHistory(l,y)})}recordHistory(e,l,o){let r=[];l.length>0&&l.every(d=>d.role!==void 0)?r=l:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...i0(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class So extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,So.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xk(i){const e={},l=f(i,["file"]);return l!=null&&p(e,["file"],l),e}function gk(i){const e={},l=f(i,["sdkHttpResponse"]);return l!=null&&p(e,["sdkHttpResponse"],l),e}function bk(i){const e={},l=f(i,["name"]);return l!=null&&p(e,["_url","file"],rb(l)),e}function yk(i){const e={},l=f(i,["sdkHttpResponse"]);return l!=null&&p(e,["sdkHttpResponse"],l),e}function vk(i){const e={},l=f(i,["name"]);return l!=null&&p(e,["_url","file"],rb(l)),e}function Sk(i){const e={},l=f(i,["uris"]);return l!=null&&p(e,["uris"],l),e}function Nk(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),l}function Tk(i){const e={},l=f(i,["config"]);return l!=null&&Nk(l,e),e}function Ck(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["files"],d)}return e}function wk(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>d)),p(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kk extends dn{constructor(e){super(),this.apiClient=e,this.list=async(l={})=>new fs(rn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(l),l)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(l=>l)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Tk(e);return d=ye("files",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=Ck(g),y=new kC;return Object.assign(y,m),y})}}async createInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xk(e);return d=ye("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=gk(g),y=new _C;return Object.assign(y,m),y})}}async get(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vk(e);return d=ye("files/{file}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bk(e);return d=ye("files/{file}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=yk(g),y=new EC;return Object.assign(y,m),y})}}async registerFilesInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Sk(e);return d=ye("files:register",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=wk(g),y=new jC;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ir(i){const e={},l=f(i,["data"]);if(l!=null&&p(e,["data"],l),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function _k(i){const e={},l=f(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>qk(d))),p(e,["parts"],r)}const o=f(i,["role"]);return o!=null&&p(e,["role"],o),e}function Ek(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(i,["fileUri"]);l!=null&&p(e,["fileUri"],l);const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function jk(i){const e={},l=f(i,["id"]);l!=null&&p(e,["id"],l);const o=f(i,["args"]);o!=null&&p(e,["args"],o);const r=f(i,["name"]);if(r!=null&&p(e,["name"],r),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ak(i){const e={},l=f(i,["description"]);l!=null&&p(e,["description"],l);const o=f(i,["name"]);o!=null&&p(e,["name"],o);const r=f(i,["parameters"]);r!=null&&p(e,["parameters"],r);const d=f(i,["parametersJsonSchema"]);d!=null&&p(e,["parametersJsonSchema"],d);const u=f(i,["response"]);u!=null&&p(e,["response"],u);const h=f(i,["responseJsonSchema"]);if(h!=null&&p(e,["responseJsonSchema"],h),f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Mk(i){const e={},l=f(i,["modelSelectionConfig"]);l!=null&&p(e,["modelConfig"],l);const o=f(i,["responseJsonSchema"]);o!=null&&p(e,["responseJsonSchema"],o);const r=f(i,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const d=f(i,["candidateCount"]);d!=null&&p(e,["candidateCount"],d);const u=f(i,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const h=f(i,["frequencyPenalty"]);h!=null&&p(e,["frequencyPenalty"],h);const g=f(i,["logprobs"]);g!=null&&p(e,["logprobs"],g);const m=f(i,["maxOutputTokens"]);m!=null&&p(e,["maxOutputTokens"],m);const y=f(i,["mediaResolution"]);y!=null&&p(e,["mediaResolution"],y);const v=f(i,["presencePenalty"]);v!=null&&p(e,["presencePenalty"],v);const S=f(i,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const N=f(i,["responseMimeType"]);N!=null&&p(e,["responseMimeType"],N);const C=f(i,["responseModalities"]);C!=null&&p(e,["responseModalities"],C);const E=f(i,["responseSchema"]);E!=null&&p(e,["responseSchema"],E);const w=f(i,["routingConfig"]);w!=null&&p(e,["routingConfig"],w);const I=f(i,["seed"]);I!=null&&p(e,["seed"],I);const H=f(i,["speechConfig"]);H!=null&&p(e,["speechConfig"],H);const _=f(i,["stopSequences"]);_!=null&&p(e,["stopSequences"],_);const P=f(i,["temperature"]);P!=null&&p(e,["temperature"],P);const M=f(i,["thinkingConfig"]);M!=null&&p(e,["thinkingConfig"],M);const j=f(i,["topK"]);j!=null&&p(e,["topK"],j);const z=f(i,["topP"]);if(z!=null&&p(e,["topP"],z),f(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Rk(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=f(i,["enableWidget"]);return l!=null&&p(e,["enableWidget"],l),e}function Dk(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=f(i,["timeRangeFilter"]);return l!=null&&p(e,["timeRangeFilter"],l),e}function Ik(i,e){const l={},o=f(i,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],o);const r=f(i,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const d=f(i,["temperature"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","temperature"],d);const u=f(i,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const h=f(i,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const g=f(i,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(i,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const y=f(i,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const v=f(i,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],Ku(v));const S=f(i,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const N=f(i,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const C=f(i,["systemInstruction"]);e!==void 0&&C!=null&&p(e,["setup","systemInstruction"],_k(wt(C)));const E=f(i,["tools"]);if(e!==void 0&&E!=null){let j=pl(E);Array.isArray(j)&&(j=j.map(z=>$k(fl(z)))),p(e,["setup","tools"],j)}const w=f(i,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],Bk(w));const I=f(i,["inputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","inputAudioTranscription"],I);const H=f(i,["outputAudioTranscription"]);e!==void 0&&H!=null&&p(e,["setup","outputAudioTranscription"],H);const _=f(i,["realtimeInputConfig"]);e!==void 0&&_!=null&&p(e,["setup","realtimeInputConfig"],_);const P=f(i,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const M=f(i,["proactivity"]);if(e!==void 0&&M!=null&&p(e,["setup","proactivity"],M),f(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return l}function Lk(i,e){const l={},o=f(i,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],Mk(o));const r=f(i,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const d=f(i,["temperature"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","temperature"],d);const u=f(i,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const h=f(i,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const g=f(i,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(i,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const y=f(i,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const v=f(i,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],Ku(v));const S=f(i,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const N=f(i,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const C=f(i,["systemInstruction"]);e!==void 0&&C!=null&&p(e,["setup","systemInstruction"],wt(C));const E=f(i,["tools"]);if(e!==void 0&&E!=null){let z=pl(E);Array.isArray(z)&&(z=z.map(B=>Fk(fl(B)))),p(e,["setup","tools"],z)}const w=f(i,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],w);const I=f(i,["inputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","inputAudioTranscription"],I);const H=f(i,["outputAudioTranscription"]);e!==void 0&&H!=null&&p(e,["setup","outputAudioTranscription"],H);const _=f(i,["realtimeInputConfig"]);e!==void 0&&_!=null&&p(e,["setup","realtimeInputConfig"],_);const P=f(i,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const M=f(i,["proactivity"]);e!==void 0&&M!=null&&p(e,["setup","proactivity"],M);const j=f(i,["explicitVadSignal"]);return e!==void 0&&j!=null&&p(e,["setup","explicitVadSignal"],j),l}function zk(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["setup","model"],Ve(i,o));const r=f(e,["config"]);return r!=null&&p(l,["config"],Ik(r,l)),l}function Pk(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["setup","model"],Ve(i,o));const r=f(e,["config"]);return r!=null&&p(l,["config"],Lk(r,l)),l}function Uk(i){const e={},l=f(i,["musicGenerationConfig"]);return l!=null&&p(e,["musicGenerationConfig"],l),e}function Ok(i){const e={},l=f(i,["weightedPrompts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>r)),p(e,["weightedPrompts"],o)}return e}function Hk(i){const e={},l=f(i,["media"]);if(l!=null){let m=nb(l);Array.isArray(m)&&(m=m.map(y=>ir(y))),p(e,["mediaChunks"],m)}const o=f(i,["audio"]);o!=null&&p(e,["audio"],ir(lb(o)));const r=f(i,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const d=f(i,["video"]);d!=null&&p(e,["video"],ir(sb(d)));const u=f(i,["text"]);u!=null&&p(e,["text"],u);const h=f(i,["activityStart"]);h!=null&&p(e,["activityStart"],h);const g=f(i,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function Gk(i){const e={},l=f(i,["media"]);if(l!=null){let m=nb(l);Array.isArray(m)&&(m=m.map(y=>y)),p(e,["mediaChunks"],m)}const o=f(i,["audio"]);o!=null&&p(e,["audio"],lb(o));const r=f(i,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const d=f(i,["video"]);d!=null&&p(e,["video"],sb(d));const u=f(i,["text"]);u!=null&&p(e,["text"],u);const h=f(i,["activityStart"]);h!=null&&p(e,["activityStart"],h);const g=f(i,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function Vk(i){const e={},l=f(i,["setupComplete"]);l!=null&&p(e,["setupComplete"],l);const o=f(i,["serverContent"]);o!=null&&p(e,["serverContent"],o);const r=f(i,["toolCall"]);r!=null&&p(e,["toolCall"],r);const d=f(i,["toolCallCancellation"]);d!=null&&p(e,["toolCallCancellation"],d);const u=f(i,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],Yk(u));const h=f(i,["goAway"]);h!=null&&p(e,["goAway"],h);const g=f(i,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const m=f(i,["voiceActivityDetectionSignal"]);m!=null&&p(e,["voiceActivityDetectionSignal"],m);const y=f(i,["voiceActivity"]);return y!=null&&p(e,["voiceActivity"],Jk(y)),e}function qk(i){const e={},l=f(i,["mediaResolution"]);l!=null&&p(e,["mediaResolution"],l);const o=f(i,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const r=f(i,["executableCode"]);r!=null&&p(e,["executableCode"],r);const d=f(i,["fileData"]);d!=null&&p(e,["fileData"],Ek(d));const u=f(i,["functionCall"]);u!=null&&p(e,["functionCall"],jk(u));const h=f(i,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(i,["inlineData"]);g!=null&&p(e,["inlineData"],ir(g));const m=f(i,["text"]);m!=null&&p(e,["text"],m);const y=f(i,["thought"]);y!=null&&p(e,["thought"],y);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const S=f(i,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function Bk(i){const e={},l=f(i,["handle"]);if(l!=null&&p(e,["handle"],l),f(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $k(i){const e={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(i,["computerUse"]);l!=null&&p(e,["computerUse"],l);const o=f(i,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const r=f(i,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["functionDeclarations"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const u=f(i,["googleMaps"]);u!=null&&p(e,["googleMaps"],Rk(u));const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],Dk(h));const g=f(i,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(i,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function Fk(i){const e={},l=f(i,["retrieval"]);l!=null&&p(e,["retrieval"],l);const o=f(i,["computerUse"]);if(o!=null&&p(e,["computerUse"],o),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(i,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const d=f(i,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const u=f(i,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(S=>Ak(S))),p(e,["functionDeclarations"],v)}const h=f(i,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const g=f(i,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const m=f(i,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const y=f(i,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function Yk(i){const e={},l=f(i,["promptTokenCount"]);l!=null&&p(e,["promptTokenCount"],l);const o=f(i,["cachedContentTokenCount"]);o!=null&&p(e,["cachedContentTokenCount"],o);const r=f(i,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const d=f(i,["toolUsePromptTokenCount"]);d!=null&&p(e,["toolUsePromptTokenCount"],d);const u=f(i,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const h=f(i,["totalTokenCount"]);h!=null&&p(e,["totalTokenCount"],h);const g=f(i,["promptTokensDetails"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(C=>C)),p(e,["promptTokensDetails"],N)}const m=f(i,["cacheTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(C=>C)),p(e,["cacheTokensDetails"],N)}const y=f(i,["candidatesTokensDetails"]);if(y!=null){let N=y;Array.isArray(N)&&(N=N.map(C=>C)),p(e,["responseTokensDetails"],N)}const v=f(i,["toolUsePromptTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(C=>C)),p(e,["toolUsePromptTokensDetails"],N)}const S=f(i,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}function Jk(i){const e={},l=f(i,["type"]);return l!=null&&p(e,["voiceActivityType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xk(i,e){const l={},o=f(i,["data"]);if(o!=null&&p(l,["data"],o),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(i,["mimeType"]);return r!=null&&p(l,["mimeType"],r),l}function Kk(i,e){const l={},o=f(i,["content"]);o!=null&&p(l,["content"],o);const r=f(i,["citationMetadata"]);r!=null&&p(l,["citationMetadata"],Qk(r));const d=f(i,["tokenCount"]);d!=null&&p(l,["tokenCount"],d);const u=f(i,["finishReason"]);u!=null&&p(l,["finishReason"],u);const h=f(i,["avgLogprobs"]);h!=null&&p(l,["avgLogprobs"],h);const g=f(i,["groundingMetadata"]);g!=null&&p(l,["groundingMetadata"],g);const m=f(i,["index"]);m!=null&&p(l,["index"],m);const y=f(i,["logprobsResult"]);y!=null&&p(l,["logprobsResult"],y);const v=f(i,["safetyRatings"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(C=>C)),p(l,["safetyRatings"],N)}const S=f(i,["urlContextMetadata"]);return S!=null&&p(l,["urlContextMetadata"],S),l}function Qk(i,e){const l={},o=f(i,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>d)),p(l,["citations"],r)}return l}function Wk(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["contents"]);if(d!=null){let u=ci(d);Array.isArray(u)&&(u=u.map(h=>h)),p(o,["contents"],u)}return o}function Zk(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["tokensInfo"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(l,["tokensInfo"],d)}return l}function e_(i,e){const l={},o=f(i,["values"]);o!=null&&p(l,["values"],o);const r=f(i,["statistics"]);return r!=null&&p(l,["statistics"],t_(r)),l}function t_(i,e){const l={},o=f(i,["truncated"]);o!=null&&p(l,["truncated"],o);const r=f(i,["token_count"]);return r!=null&&p(l,["tokenCount"],r),l}function To(i,e){const l={},o=f(i,["parts"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>dE(u))),p(l,["parts"],d)}const r=f(i,["role"]);return r!=null&&p(l,["role"],r),l}function i_(i,e){const l={},o=f(i,["controlType"]);o!=null&&p(l,["controlType"],o);const r=f(i,["enableControlImageComputation"]);return r!=null&&p(l,["computeControl"],r),l}function n_(i,e){const l={};if(f(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return l}function s_(i,e,l){const o={},r=f(i,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],wt(r));const d=f(i,["tools"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>yb(g))),p(e,["tools"],h)}const u=f(i,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],X_(u)),o}function l_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["contents"]);if(d!=null){let h=ci(d);Array.isArray(h)&&(h=h.map(g=>To(g))),p(o,["contents"],h)}const u=f(e,["config"]);return u!=null&&n_(u),o}function o_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["contents"]);if(d!=null){let h=ci(d);Array.isArray(h)&&(h=h.map(g=>g)),p(o,["contents"],h)}const u=f(e,["config"]);return u!=null&&s_(u,o),o}function a_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["totalTokens"]);r!=null&&p(l,["totalTokens"],r);const d=f(i,["cachedContentTokenCount"]);return d!=null&&p(l,["cachedContentTokenCount"],d),l}function r_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["totalTokens"]);return r!=null&&p(l,["totalTokens"],r),l}function c_(i,e,l){const o={},r=f(e,["model"]);return r!=null&&p(o,["_url","name"],Ve(i,r)),o}function d_(i,e,l){const o={},r=f(e,["model"]);return r!=null&&p(o,["_url","name"],Ve(i,r)),o}function u_(i,e){const l={},o=f(i,["sdkHttpResponse"]);return o!=null&&p(l,["sdkHttpResponse"],o),l}function f_(i,e){const l={},o=f(i,["sdkHttpResponse"]);return o!=null&&p(l,["sdkHttpResponse"],o),l}function p_(i,e,l){const o={},r=f(i,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const d=f(i,["negativePrompt"]);e!==void 0&&d!=null&&p(e,["parameters","negativePrompt"],d);const u=f(i,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const h=f(i,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const g=f(i,["guidanceScale"]);e!==void 0&&g!=null&&p(e,["parameters","guidanceScale"],g);const m=f(i,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const y=f(i,["safetyFilterLevel"]);e!==void 0&&y!=null&&p(e,["parameters","safetySetting"],y);const v=f(i,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const S=f(i,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const N=f(i,["includeRaiReason"]);e!==void 0&&N!=null&&p(e,["parameters","includeRaiReason"],N);const C=f(i,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const E=f(i,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const w=f(i,["outputCompressionQuality"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w);const I=f(i,["addWatermark"]);e!==void 0&&I!=null&&p(e,["parameters","addWatermark"],I);const H=f(i,["labels"]);e!==void 0&&H!=null&&p(e,["labels"],H);const _=f(i,["editMode"]);e!==void 0&&_!=null&&p(e,["parameters","editMode"],_);const P=f(i,["baseSteps"]);return e!==void 0&&P!=null&&p(e,["parameters","editConfig","baseSteps"],P),o}function m_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["prompt"]);d!=null&&p(o,["instances[0]","prompt"],d);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>xE(m))),p(o,["instances[0]","referenceImages"],g)}const h=f(e,["config"]);return h!=null&&p_(h,o),o}function h_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Ar(u))),p(l,["generatedImages"],d)}return l}function x_(i,e,l){const o={},r=f(i,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const d=f(i,["title"]);e!==void 0&&d!=null&&p(e,["requests[]","title"],d);const u=f(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function g_(i,e,l){const o={};let r=f(l,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const m=f(i,["taskType"]);e!==void 0&&m!=null&&p(e,["instances[]","task_type"],m)}else if(r==="EMBED_CONTENT"){const m=f(i,["taskType"]);e!==void 0&&m!=null&&p(e,["taskType"],m)}let d=f(l,["embeddingApiType"]);if(d===void 0&&(d="PREDICT"),d==="PREDICT"){const m=f(i,["title"]);e!==void 0&&m!=null&&p(e,["instances[]","title"],m)}else if(d==="EMBED_CONTENT"){const m=f(i,["title"]);e!==void 0&&m!=null&&p(e,["title"],m)}let u=f(l,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="PREDICT"){const m=f(i,["outputDimensionality"]);e!==void 0&&m!=null&&p(e,["parameters","outputDimensionality"],m)}else if(u==="EMBED_CONTENT"){const m=f(i,["outputDimensionality"]);e!==void 0&&m!=null&&p(e,["outputDimensionality"],m)}let h=f(l,["embeddingApiType"]);if(h===void 0&&(h="PREDICT"),h==="PREDICT"){const m=f(i,["mimeType"]);e!==void 0&&m!=null&&p(e,["instances[]","mimeType"],m)}let g=f(l,["embeddingApiType"]);if(g===void 0&&(g="PREDICT"),g==="PREDICT"){const m=f(i,["autoTruncate"]);e!==void 0&&m!=null&&p(e,["parameters","autoTruncate"],m)}else if(g==="EMBED_CONTENT"){const m=f(i,["autoTruncate"]);e!==void 0&&m!=null&&p(e,["autoTruncate"],m)}return o}function b_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["contents"]);if(d!=null){let m=Yu(i,d);Array.isArray(m)&&(m=m.map(y=>y)),p(o,["requests[]","content"],m)}const u=f(e,["content"]);u!=null&&To(wt(u));const h=f(e,["config"]);h!=null&&x_(h,o);const g=f(e,["model"]);return g!==void 0&&p(o,["requests[]","model"],Ve(i,g)),o}function y_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));let d=f(l,["embeddingApiType"]);if(d===void 0&&(d="PREDICT"),d==="PREDICT"){const g=f(e,["contents"]);if(g!=null){let m=Yu(i,g);Array.isArray(m)&&(m=m.map(y=>y)),p(o,["instances[]","content"],m)}}let u=f(l,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="EMBED_CONTENT"){const g=f(e,["content"]);g!=null&&p(o,["content"],wt(g))}const h=f(e,["config"]);return h!=null&&g_(h,o,l),o}function v_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),p(l,["embeddings"],u)}const d=f(i,["metadata"]);return d!=null&&p(l,["metadata"],d),l}function S_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>e_(h))),p(l,["embeddings"],u)}const d=f(i,["metadata"]);if(d!=null&&p(l,["metadata"],d),e&&f(e,["embeddingApiType"])==="EMBED_CONTENT"){const u=f(i,["embedding"]),h=f(i,["usageMetadata"]),g=f(i,["truncated"]);if(u){const m={};h&&h.promptTokenCount&&(m.tokenCount=h.promptTokenCount),g&&(m.truncated=g),u.statistics=m,p(l,["embeddings"],[u])}}return l}function N_(i,e){const l={},o=f(i,["endpoint"]);o!=null&&p(l,["name"],o);const r=f(i,["deployedModelId"]);return r!=null&&p(l,["deployedModelId"],r),l}function T_(i,e){const l={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["fileUri"]);o!=null&&p(l,["fileUri"],o);const r=f(i,["mimeType"]);return r!=null&&p(l,["mimeType"],r),l}function C_(i,e){const l={},o=f(i,["id"]);o!=null&&p(l,["id"],o);const r=f(i,["args"]);r!=null&&p(l,["args"],r);const d=f(i,["name"]);if(d!=null&&p(l,["name"],d),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return l}function w_(i,e){const l={},o=f(i,["allowedFunctionNames"]);o!=null&&p(l,["allowedFunctionNames"],o);const r=f(i,["mode"]);if(r!=null&&p(l,["mode"],r),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return l}function k_(i,e){const l={},o=f(i,["description"]);o!=null&&p(l,["description"],o);const r=f(i,["name"]);r!=null&&p(l,["name"],r);const d=f(i,["parameters"]);d!=null&&p(l,["parameters"],d);const u=f(i,["parametersJsonSchema"]);u!=null&&p(l,["parametersJsonSchema"],u);const h=f(i,["response"]);h!=null&&p(l,["response"],h);const g=f(i,["responseJsonSchema"]);if(g!=null&&p(l,["responseJsonSchema"],g),f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return l}function __(i,e,l,o){const r={},d=f(e,["systemInstruction"]);l!==void 0&&d!=null&&p(l,["systemInstruction"],To(wt(d)));const u=f(e,["temperature"]);u!=null&&p(r,["temperature"],u);const h=f(e,["topP"]);h!=null&&p(r,["topP"],h);const g=f(e,["topK"]);g!=null&&p(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&p(r,["candidateCount"],m);const y=f(e,["maxOutputTokens"]);y!=null&&p(r,["maxOutputTokens"],y);const v=f(e,["stopSequences"]);v!=null&&p(r,["stopSequences"],v);const S=f(e,["responseLogprobs"]);S!=null&&p(r,["responseLogprobs"],S);const N=f(e,["logprobs"]);N!=null&&p(r,["logprobs"],N);const C=f(e,["presencePenalty"]);C!=null&&p(r,["presencePenalty"],C);const E=f(e,["frequencyPenalty"]);E!=null&&p(r,["frequencyPenalty"],E);const w=f(e,["seed"]);w!=null&&p(r,["seed"],w);const I=f(e,["responseMimeType"]);I!=null&&p(r,["responseMimeType"],I);const H=f(e,["responseSchema"]);H!=null&&p(r,["responseSchema"],Ju(H));const _=f(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(e,["safetySettings"]);if(l!==void 0&&P!=null){let X=P;Array.isArray(X)&&(X=X.map(L=>gE(L))),p(l,["safetySettings"],X)}const M=f(e,["tools"]);if(l!==void 0&&M!=null){let X=pl(M);Array.isArray(X)&&(X=X.map(L=>CE(fl(L)))),p(l,["tools"],X)}const j=f(e,["toolConfig"]);if(l!==void 0&&j!=null&&p(l,["toolConfig"],TE(j)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=f(e,["cachedContent"]);l!==void 0&&z!=null&&p(l,["cachedContent"],un(i,z));const B=f(e,["responseModalities"]);B!=null&&p(r,["responseModalities"],B);const q=f(e,["mediaResolution"]);q!=null&&p(r,["mediaResolution"],q);const G=f(e,["speechConfig"]);if(G!=null&&p(r,["speechConfig"],Xu(G)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=f(e,["thinkingConfig"]);Q!=null&&p(r,["thinkingConfig"],Q);const F=f(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],eE(F));const ae=f(e,["enableEnhancedCivicAnswers"]);if(ae!=null&&p(r,["enableEnhancedCivicAnswers"],ae),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function E_(i,e,l,o){const r={},d=f(e,["systemInstruction"]);l!==void 0&&d!=null&&p(l,["systemInstruction"],wt(d));const u=f(e,["temperature"]);u!=null&&p(r,["temperature"],u);const h=f(e,["topP"]);h!=null&&p(r,["topP"],h);const g=f(e,["topK"]);g!=null&&p(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&p(r,["candidateCount"],m);const y=f(e,["maxOutputTokens"]);y!=null&&p(r,["maxOutputTokens"],y);const v=f(e,["stopSequences"]);v!=null&&p(r,["stopSequences"],v);const S=f(e,["responseLogprobs"]);S!=null&&p(r,["responseLogprobs"],S);const N=f(e,["logprobs"]);N!=null&&p(r,["logprobs"],N);const C=f(e,["presencePenalty"]);C!=null&&p(r,["presencePenalty"],C);const E=f(e,["frequencyPenalty"]);E!=null&&p(r,["frequencyPenalty"],E);const w=f(e,["seed"]);w!=null&&p(r,["seed"],w);const I=f(e,["responseMimeType"]);I!=null&&p(r,["responseMimeType"],I);const H=f(e,["responseSchema"]);H!=null&&p(r,["responseSchema"],Ju(H));const _=f(e,["responseJsonSchema"]);_!=null&&p(r,["responseJsonSchema"],_);const P=f(e,["routingConfig"]);P!=null&&p(r,["routingConfig"],P);const M=f(e,["modelSelectionConfig"]);M!=null&&p(r,["modelConfig"],M);const j=f(e,["safetySettings"]);if(l!==void 0&&j!=null){let V=j;Array.isArray(V)&&(V=V.map(te=>te)),p(l,["safetySettings"],V)}const z=f(e,["tools"]);if(l!==void 0&&z!=null){let V=pl(z);Array.isArray(V)&&(V=V.map(te=>yb(fl(te)))),p(l,["tools"],V)}const B=f(e,["toolConfig"]);l!==void 0&&B!=null&&p(l,["toolConfig"],B);const q=f(e,["labels"]);l!==void 0&&q!=null&&p(l,["labels"],q);const G=f(e,["cachedContent"]);l!==void 0&&G!=null&&p(l,["cachedContent"],un(i,G));const Q=f(e,["responseModalities"]);Q!=null&&p(r,["responseModalities"],Q);const F=f(e,["mediaResolution"]);F!=null&&p(r,["mediaResolution"],F);const ae=f(e,["speechConfig"]);ae!=null&&p(r,["speechConfig"],Xu(ae));const X=f(e,["audioTimestamp"]);X!=null&&p(r,["audioTimestamp"],X);const L=f(e,["thinkingConfig"]);L!=null&&p(r,["thinkingConfig"],L);const k=f(e,["imageConfig"]);if(k!=null&&p(r,["imageConfig"],tE(k)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const R=f(e,["modelArmorConfig"]);return l!==void 0&&R!=null&&p(l,["modelArmorConfig"],R),r}function n0(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["contents"]);if(d!=null){let h=ci(d);Array.isArray(h)&&(h=h.map(g=>To(g))),p(o,["contents"],h)}const u=f(e,["config"]);return u!=null&&p(o,["generationConfig"],__(i,u,o)),o}function s0(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["contents"]);if(d!=null){let h=ci(d);Array.isArray(h)&&(h=h.map(g=>g)),p(o,["contents"],h)}const u=f(e,["config"]);return u!=null&&p(o,["generationConfig"],E_(i,u,o)),o}function l0(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(y=>Kk(y))),p(l,["candidates"],m)}const d=f(i,["modelVersion"]);d!=null&&p(l,["modelVersion"],d);const u=f(i,["promptFeedback"]);u!=null&&p(l,["promptFeedback"],u);const h=f(i,["responseId"]);h!=null&&p(l,["responseId"],h);const g=f(i,["usageMetadata"]);return g!=null&&p(l,["usageMetadata"],g),l}function o0(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["candidates"]);if(r!=null){let y=r;Array.isArray(y)&&(y=y.map(v=>v)),p(l,["candidates"],y)}const d=f(i,["createTime"]);d!=null&&p(l,["createTime"],d);const u=f(i,["modelVersion"]);u!=null&&p(l,["modelVersion"],u);const h=f(i,["promptFeedback"]);h!=null&&p(l,["promptFeedback"],h);const g=f(i,["responseId"]);g!=null&&p(l,["responseId"],g);const m=f(i,["usageMetadata"]);return m!=null&&p(l,["usageMetadata"],m),l}function j_(i,e,l){const o={};if(f(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(i,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const d=f(i,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const u=f(i,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const g=f(i,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const m=f(i,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const y=f(i,["includeRaiReason"]);e!==void 0&&y!=null&&p(e,["parameters","includeRaiReason"],y);const v=f(i,["language"]);e!==void 0&&v!=null&&p(e,["parameters","language"],v);const S=f(i,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const N=f(i,["outputCompressionQuality"]);if(e!==void 0&&N!=null&&p(e,["parameters","outputOptions","compressionQuality"],N),f(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=f(i,["imageSize"]);if(e!==void 0&&C!=null&&p(e,["parameters","sampleImageSize"],C),f(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function A_(i,e,l){const o={},r=f(i,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const d=f(i,["negativePrompt"]);e!==void 0&&d!=null&&p(e,["parameters","negativePrompt"],d);const u=f(i,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const h=f(i,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const g=f(i,["guidanceScale"]);e!==void 0&&g!=null&&p(e,["parameters","guidanceScale"],g);const m=f(i,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const y=f(i,["safetyFilterLevel"]);e!==void 0&&y!=null&&p(e,["parameters","safetySetting"],y);const v=f(i,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const S=f(i,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const N=f(i,["includeRaiReason"]);e!==void 0&&N!=null&&p(e,["parameters","includeRaiReason"],N);const C=f(i,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const E=f(i,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const w=f(i,["outputCompressionQuality"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w);const I=f(i,["addWatermark"]);e!==void 0&&I!=null&&p(e,["parameters","addWatermark"],I);const H=f(i,["labels"]);e!==void 0&&H!=null&&p(e,["labels"],H);const _=f(i,["imageSize"]);e!==void 0&&_!=null&&p(e,["parameters","sampleImageSize"],_);const P=f(i,["enhancePrompt"]);return e!==void 0&&P!=null&&p(e,["parameters","enhancePrompt"],P),o}function M_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["prompt"]);d!=null&&p(o,["instances[0]","prompt"],d);const u=f(e,["config"]);return u!=null&&j_(u,o),o}function R_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["prompt"]);d!=null&&p(o,["instances[0]","prompt"],d);const u=f(e,["config"]);return u!=null&&A_(u,o),o}function D_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>$_(h))),p(l,["generatedImages"],u)}const d=f(i,["positivePromptSafetyAttributes"]);return d!=null&&p(l,["positivePromptSafetyAttributes"],gb(d)),l}function I_(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>Ar(h))),p(l,["generatedImages"],u)}const d=f(i,["positivePromptSafetyAttributes"]);return d!=null&&p(l,["positivePromptSafetyAttributes"],bb(d)),l}function L_(i,e,l){const o={},r=f(i,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),f(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const d=f(i,["durationSeconds"]);if(e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d),f(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(i,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const h=f(i,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const g=f(i,["personGeneration"]);if(e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g),f(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(i,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const y=f(i,["enhancePrompt"]);if(e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y),f(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(i,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],Mr(v));const S=f(i,["referenceImages"]);if(e!==void 0&&S!=null){let N=S;Array.isArray(N)&&(N=N.map(C=>PE(C))),p(e,["instances[0]","referenceImages"],N)}if(f(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function z_(i,e,l){const o={},r=f(i,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const d=f(i,["outputGcsUri"]);e!==void 0&&d!=null&&p(e,["parameters","storageUri"],d);const u=f(i,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const h=f(i,["durationSeconds"]);e!==void 0&&h!=null&&p(e,["parameters","durationSeconds"],h);const g=f(i,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const m=f(i,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const y=f(i,["resolution"]);e!==void 0&&y!=null&&p(e,["parameters","resolution"],y);const v=f(i,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const S=f(i,["pubsubTopic"]);e!==void 0&&S!=null&&p(e,["parameters","pubsubTopic"],S);const N=f(i,["negativePrompt"]);e!==void 0&&N!=null&&p(e,["parameters","negativePrompt"],N);const C=f(i,["enhancePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C);const E=f(i,["generateAudio"]);e!==void 0&&E!=null&&p(e,["parameters","generateAudio"],E);const w=f(i,["lastFrame"]);e!==void 0&&w!=null&&p(e,["instances[0]","lastFrame"],Li(w));const I=f(i,["referenceImages"]);if(e!==void 0&&I!=null){let P=I;Array.isArray(P)&&(P=P.map(M=>UE(M))),p(e,["instances[0]","referenceImages"],P)}const H=f(i,["mask"]);e!==void 0&&H!=null&&p(e,["instances[0]","mask"],zE(H));const _=f(i,["compressionQuality"]);return e!==void 0&&_!=null&&p(e,["parameters","compressionQuality"],_),o}function P_(i,e){const l={},o=f(i,["name"]);o!=null&&p(l,["name"],o);const r=f(i,["metadata"]);r!=null&&p(l,["metadata"],r);const d=f(i,["done"]);d!=null&&p(l,["done"],d);const u=f(i,["error"]);u!=null&&p(l,["error"],u);const h=f(i,["response","generateVideoResponse"]);return h!=null&&p(l,["response"],G_(h)),l}function U_(i,e){const l={},o=f(i,["name"]);o!=null&&p(l,["name"],o);const r=f(i,["metadata"]);r!=null&&p(l,["metadata"],r);const d=f(i,["done"]);d!=null&&p(l,["done"],d);const u=f(i,["error"]);u!=null&&p(l,["error"],u);const h=f(i,["response"]);return h!=null&&p(l,["response"],V_(h)),l}function O_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["prompt"]);d!=null&&p(o,["instances[0]","prompt"],d);const u=f(e,["image"]);u!=null&&p(o,["instances[0]","image"],Mr(u));const h=f(e,["video"]);h!=null&&p(o,["instances[0]","video"],vb(h));const g=f(e,["source"]);g!=null&&q_(g,o);const m=f(e,["config"]);return m!=null&&L_(m,o),o}function H_(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["prompt"]);d!=null&&p(o,["instances[0]","prompt"],d);const u=f(e,["image"]);u!=null&&p(o,["instances[0]","image"],Li(u));const h=f(e,["video"]);h!=null&&p(o,["instances[0]","video"],Sb(h));const g=f(e,["source"]);g!=null&&B_(g,o);const m=f(e,["config"]);return m!=null&&z_(m,o),o}function G_(i,e){const l={},o=f(i,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Y_(h))),p(l,["generatedVideos"],u)}const r=f(i,["raiMediaFilteredCount"]);r!=null&&p(l,["raiMediaFilteredCount"],r);const d=f(i,["raiMediaFilteredReasons"]);return d!=null&&p(l,["raiMediaFilteredReasons"],d),l}function V_(i,e){const l={},o=f(i,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>J_(h))),p(l,["generatedVideos"],u)}const r=f(i,["raiMediaFilteredCount"]);r!=null&&p(l,["raiMediaFilteredCount"],r);const d=f(i,["raiMediaFilteredReasons"]);return d!=null&&p(l,["raiMediaFilteredReasons"],d),l}function q_(i,e,l){const o={},r=f(i,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const d=f(i,["image"]);e!==void 0&&d!=null&&p(e,["instances[0]","image"],Mr(d));const u=f(i,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],vb(u)),o}function B_(i,e,l){const o={},r=f(i,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const d=f(i,["image"]);e!==void 0&&d!=null&&p(e,["instances[0]","image"],Li(d));const u=f(i,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],Sb(u)),o}function $_(i,e){const l={},o=f(i,["_self"]);o!=null&&p(l,["image"],iE(o));const r=f(i,["raiFilteredReason"]);r!=null&&p(l,["raiFilteredReason"],r);const d=f(i,["_self"]);return d!=null&&p(l,["safetyAttributes"],gb(d)),l}function Ar(i,e){const l={},o=f(i,["_self"]);o!=null&&p(l,["image"],xb(o));const r=f(i,["raiFilteredReason"]);r!=null&&p(l,["raiFilteredReason"],r);const d=f(i,["_self"]);d!=null&&p(l,["safetyAttributes"],bb(d));const u=f(i,["prompt"]);return u!=null&&p(l,["enhancedPrompt"],u),l}function F_(i,e){const l={},o=f(i,["_self"]);o!=null&&p(l,["mask"],xb(o));const r=f(i,["labels"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(l,["labels"],d)}return l}function Y_(i,e){const l={},o=f(i,["video"]);return o!=null&&p(l,["video"],IE(o)),l}function J_(i,e){const l={},o=f(i,["_self"]);return o!=null&&p(l,["video"],LE(o)),l}function X_(i,e){const l={},o=f(i,["modelSelectionConfig"]);o!=null&&p(l,["modelConfig"],o);const r=f(i,["responseJsonSchema"]);r!=null&&p(l,["responseJsonSchema"],r);const d=f(i,["audioTimestamp"]);d!=null&&p(l,["audioTimestamp"],d);const u=f(i,["candidateCount"]);u!=null&&p(l,["candidateCount"],u);const h=f(i,["enableAffectiveDialog"]);h!=null&&p(l,["enableAffectiveDialog"],h);const g=f(i,["frequencyPenalty"]);g!=null&&p(l,["frequencyPenalty"],g);const m=f(i,["logprobs"]);m!=null&&p(l,["logprobs"],m);const y=f(i,["maxOutputTokens"]);y!=null&&p(l,["maxOutputTokens"],y);const v=f(i,["mediaResolution"]);v!=null&&p(l,["mediaResolution"],v);const S=f(i,["presencePenalty"]);S!=null&&p(l,["presencePenalty"],S);const N=f(i,["responseLogprobs"]);N!=null&&p(l,["responseLogprobs"],N);const C=f(i,["responseMimeType"]);C!=null&&p(l,["responseMimeType"],C);const E=f(i,["responseModalities"]);E!=null&&p(l,["responseModalities"],E);const w=f(i,["responseSchema"]);w!=null&&p(l,["responseSchema"],w);const I=f(i,["routingConfig"]);I!=null&&p(l,["routingConfig"],I);const H=f(i,["seed"]);H!=null&&p(l,["seed"],H);const _=f(i,["speechConfig"]);_!=null&&p(l,["speechConfig"],_);const P=f(i,["stopSequences"]);P!=null&&p(l,["stopSequences"],P);const M=f(i,["temperature"]);M!=null&&p(l,["temperature"],M);const j=f(i,["thinkingConfig"]);j!=null&&p(l,["thinkingConfig"],j);const z=f(i,["topK"]);z!=null&&p(l,["topK"],z);const B=f(i,["topP"]);if(B!=null&&p(l,["topP"],B),f(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return l}function K_(i,e,l){const o={},r=f(e,["model"]);return r!=null&&p(o,["_url","name"],Ve(i,r)),o}function Q_(i,e,l){const o={},r=f(e,["model"]);return r!=null&&p(o,["_url","name"],Ve(i,r)),o}function W_(i,e){const l={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(i,["enableWidget"]);return o!=null&&p(l,["enableWidget"],o),l}function Z_(i,e){const l={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(i,["timeRangeFilter"]);return o!=null&&p(l,["timeRangeFilter"],o),l}function eE(i,e){const l={},o=f(i,["aspectRatio"]);o!=null&&p(l,["aspectRatio"],o);const r=f(i,["imageSize"]);if(r!=null&&p(l,["imageSize"],r),f(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return l}function tE(i,e){const l={},o=f(i,["aspectRatio"]);o!=null&&p(l,["aspectRatio"],o);const r=f(i,["imageSize"]);r!=null&&p(l,["imageSize"],r);const d=f(i,["personGeneration"]);d!=null&&p(l,["personGeneration"],d);const u=f(i,["outputMimeType"]);u!=null&&p(l,["imageOutputOptions","mimeType"],u);const h=f(i,["outputCompressionQuality"]);return h!=null&&p(l,["imageOutputOptions","compressionQuality"],h),l}function iE(i,e){const l={},o=f(i,["bytesBase64Encoded"]);o!=null&&p(l,["imageBytes"],Hn(o));const r=f(i,["mimeType"]);return r!=null&&p(l,["mimeType"],r),l}function xb(i,e){const l={},o=f(i,["gcsUri"]);o!=null&&p(l,["gcsUri"],o);const r=f(i,["bytesBase64Encoded"]);r!=null&&p(l,["imageBytes"],Hn(r));const d=f(i,["mimeType"]);return d!=null&&p(l,["mimeType"],d),l}function Mr(i,e){const l={};if(f(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(i,["imageBytes"]);o!=null&&p(l,["bytesBase64Encoded"],Hn(o));const r=f(i,["mimeType"]);return r!=null&&p(l,["mimeType"],r),l}function Li(i,e){const l={},o=f(i,["gcsUri"]);o!=null&&p(l,["gcsUri"],o);const r=f(i,["imageBytes"]);r!=null&&p(l,["bytesBase64Encoded"],Hn(r));const d=f(i,["mimeType"]);return d!=null&&p(l,["mimeType"],d),l}function nE(i,e,l,o){const r={},d=f(e,["pageSize"]);l!==void 0&&d!=null&&p(l,["_query","pageSize"],d);const u=f(e,["pageToken"]);l!==void 0&&u!=null&&p(l,["_query","pageToken"],u);const h=f(e,["filter"]);l!==void 0&&h!=null&&p(l,["_query","filter"],h);const g=f(e,["queryBase"]);return l!==void 0&&g!=null&&p(l,["_url","models_url"],cb(i,g)),r}function sE(i,e,l,o){const r={},d=f(e,["pageSize"]);l!==void 0&&d!=null&&p(l,["_query","pageSize"],d);const u=f(e,["pageToken"]);l!==void 0&&u!=null&&p(l,["_query","pageToken"],u);const h=f(e,["filter"]);l!==void 0&&h!=null&&p(l,["_query","filter"],h);const g=f(e,["queryBase"]);return l!==void 0&&g!=null&&p(l,["_url","models_url"],cb(i,g)),r}function lE(i,e,l){const o={},r=f(e,["config"]);return r!=null&&nE(i,r,o),o}function oE(i,e,l){const o={},r=f(e,["config"]);return r!=null&&sE(i,r,o),o}function aE(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&p(l,["nextPageToken"],r);const d=f(i,["_self"]);if(d!=null){let u=db(d);Array.isArray(u)&&(u=u.map(h=>Tu(h))),p(l,["models"],u)}return l}function rE(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&p(l,["nextPageToken"],r);const d=f(i,["_self"]);if(d!=null){let u=db(d);Array.isArray(u)&&(u=u.map(h=>Cu(h))),p(l,["models"],u)}return l}function cE(i,e){const l={},o=f(i,["maskMode"]);o!=null&&p(l,["maskMode"],o);const r=f(i,["segmentationClasses"]);r!=null&&p(l,["maskClasses"],r);const d=f(i,["maskDilation"]);return d!=null&&p(l,["dilation"],d),l}function Tu(i,e){const l={},o=f(i,["name"]);o!=null&&p(l,["name"],o);const r=f(i,["displayName"]);r!=null&&p(l,["displayName"],r);const d=f(i,["description"]);d!=null&&p(l,["description"],d);const u=f(i,["version"]);u!=null&&p(l,["version"],u);const h=f(i,["_self"]);h!=null&&p(l,["tunedModelInfo"],wE(h));const g=f(i,["inputTokenLimit"]);g!=null&&p(l,["inputTokenLimit"],g);const m=f(i,["outputTokenLimit"]);m!=null&&p(l,["outputTokenLimit"],m);const y=f(i,["supportedGenerationMethods"]);y!=null&&p(l,["supportedActions"],y);const v=f(i,["temperature"]);v!=null&&p(l,["temperature"],v);const S=f(i,["maxTemperature"]);S!=null&&p(l,["maxTemperature"],S);const N=f(i,["topP"]);N!=null&&p(l,["topP"],N);const C=f(i,["topK"]);C!=null&&p(l,["topK"],C);const E=f(i,["thinking"]);return E!=null&&p(l,["thinking"],E),l}function Cu(i,e){const l={},o=f(i,["name"]);o!=null&&p(l,["name"],o);const r=f(i,["displayName"]);r!=null&&p(l,["displayName"],r);const d=f(i,["description"]);d!=null&&p(l,["description"],d);const u=f(i,["versionId"]);u!=null&&p(l,["version"],u);const h=f(i,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(N=>N_(N))),p(l,["endpoints"],S)}const g=f(i,["labels"]);g!=null&&p(l,["labels"],g);const m=f(i,["_self"]);m!=null&&p(l,["tunedModelInfo"],kE(m));const y=f(i,["defaultCheckpointId"]);y!=null&&p(l,["defaultCheckpointId"],y);const v=f(i,["checkpoints"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(N=>N)),p(l,["checkpoints"],S)}return l}function dE(i,e){const l={},o=f(i,["mediaResolution"]);o!=null&&p(l,["mediaResolution"],o);const r=f(i,["codeExecutionResult"]);r!=null&&p(l,["codeExecutionResult"],r);const d=f(i,["executableCode"]);d!=null&&p(l,["executableCode"],d);const u=f(i,["fileData"]);u!=null&&p(l,["fileData"],T_(u));const h=f(i,["functionCall"]);h!=null&&p(l,["functionCall"],C_(h));const g=f(i,["functionResponse"]);g!=null&&p(l,["functionResponse"],g);const m=f(i,["inlineData"]);m!=null&&p(l,["inlineData"],Xk(m));const y=f(i,["text"]);y!=null&&p(l,["text"],y);const v=f(i,["thought"]);v!=null&&p(l,["thought"],v);const S=f(i,["thoughtSignature"]);S!=null&&p(l,["thoughtSignature"],S);const N=f(i,["videoMetadata"]);return N!=null&&p(l,["videoMetadata"],N),l}function uE(i,e){const l={},o=f(i,["productImage"]);return o!=null&&p(l,["image"],Li(o)),l}function fE(i,e,l){const o={},r=f(i,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const d=f(i,["baseSteps"]);e!==void 0&&d!=null&&p(e,["parameters","baseSteps"],d);const u=f(i,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const h=f(i,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const g=f(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&p(e,["parameters","safetySetting"],g);const m=f(i,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const y=f(i,["addWatermark"]);e!==void 0&&y!=null&&p(e,["parameters","addWatermark"],y);const v=f(i,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const S=f(i,["outputCompressionQuality"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S);const N=f(i,["enhancePrompt"]);e!==void 0&&N!=null&&p(e,["parameters","enhancePrompt"],N);const C=f(i,["labels"]);return e!==void 0&&C!=null&&p(e,["labels"],C),o}function pE(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["source"]);d!=null&&hE(d,o);const u=f(e,["config"]);return u!=null&&fE(u,o),o}function mE(i,e){const l={},o=f(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>Ar(d))),p(l,["generatedImages"],r)}return l}function hE(i,e,l){const o={},r=f(i,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const d=f(i,["personImage"]);e!==void 0&&d!=null&&p(e,["instances[0]","personImage","image"],Li(d));const u=f(i,["productImages"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>uE(g))),p(e,["instances[0]","productImages"],h)}return o}function xE(i,e){const l={},o=f(i,["referenceImage"]);o!=null&&p(l,["referenceImage"],Li(o));const r=f(i,["referenceId"]);r!=null&&p(l,["referenceId"],r);const d=f(i,["referenceType"]);d!=null&&p(l,["referenceType"],d);const u=f(i,["maskImageConfig"]);u!=null&&p(l,["maskImageConfig"],cE(u));const h=f(i,["controlImageConfig"]);h!=null&&p(l,["controlImageConfig"],i_(h));const g=f(i,["styleImageConfig"]);g!=null&&p(l,["styleImageConfig"],g);const m=f(i,["subjectImageConfig"]);return m!=null&&p(l,["subjectImageConfig"],m),l}function gb(i,e){const l={},o=f(i,["safetyAttributes","categories"]);o!=null&&p(l,["categories"],o);const r=f(i,["safetyAttributes","scores"]);r!=null&&p(l,["scores"],r);const d=f(i,["contentType"]);return d!=null&&p(l,["contentType"],d),l}function bb(i,e){const l={},o=f(i,["safetyAttributes","categories"]);o!=null&&p(l,["categories"],o);const r=f(i,["safetyAttributes","scores"]);r!=null&&p(l,["scores"],r);const d=f(i,["contentType"]);return d!=null&&p(l,["contentType"],d),l}function gE(i,e){const l={},o=f(i,["category"]);if(o!=null&&p(l,["category"],o),f(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(i,["threshold"]);return r!=null&&p(l,["threshold"],r),l}function bE(i,e){const l={},o=f(i,["image"]);return o!=null&&p(l,["image"],Li(o)),l}function yE(i,e,l){const o={},r=f(i,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const d=f(i,["maxPredictions"]);e!==void 0&&d!=null&&p(e,["parameters","maxPredictions"],d);const u=f(i,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const h=f(i,["maskDilation"]);e!==void 0&&h!=null&&p(e,["parameters","maskDilation"],h);const g=f(i,["binaryColorThreshold"]);e!==void 0&&g!=null&&p(e,["parameters","binaryColorThreshold"],g);const m=f(i,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),o}function vE(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["source"]);d!=null&&NE(d,o);const u=f(e,["config"]);return u!=null&&yE(u,o),o}function SE(i,e){const l={},o=f(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>F_(d))),p(l,["generatedMasks"],r)}return l}function NE(i,e,l){const o={},r=f(i,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const d=f(i,["image"]);e!==void 0&&d!=null&&p(e,["instances[0]","image"],Li(d));const u=f(i,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],bE(u)),o}function TE(i,e){const l={},o=f(i,["retrievalConfig"]);o!=null&&p(l,["retrievalConfig"],o);const r=f(i,["functionCallingConfig"]);return r!=null&&p(l,["functionCallingConfig"],w_(r)),l}function CE(i,e){const l={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(i,["computerUse"]);o!=null&&p(l,["computerUse"],o);const r=f(i,["fileSearch"]);r!=null&&p(l,["fileSearch"],r);const d=f(i,["codeExecution"]);if(d!=null&&p(l,["codeExecution"],d),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(i,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(S=>S)),p(l,["functionDeclarations"],v)}const h=f(i,["googleMaps"]);h!=null&&p(l,["googleMaps"],W_(h));const g=f(i,["googleSearch"]);g!=null&&p(l,["googleSearch"],Z_(g));const m=f(i,["googleSearchRetrieval"]);m!=null&&p(l,["googleSearchRetrieval"],m);const y=f(i,["urlContext"]);return y!=null&&p(l,["urlContext"],y),l}function yb(i,e){const l={},o=f(i,["retrieval"]);o!=null&&p(l,["retrieval"],o);const r=f(i,["computerUse"]);if(r!=null&&p(l,["computerUse"],r),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=f(i,["codeExecution"]);d!=null&&p(l,["codeExecution"],d);const u=f(i,["enterpriseWebSearch"]);u!=null&&p(l,["enterpriseWebSearch"],u);const h=f(i,["functionDeclarations"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(N=>k_(N))),p(l,["functionDeclarations"],S)}const g=f(i,["googleMaps"]);g!=null&&p(l,["googleMaps"],g);const m=f(i,["googleSearch"]);m!=null&&p(l,["googleSearch"],m);const y=f(i,["googleSearchRetrieval"]);y!=null&&p(l,["googleSearchRetrieval"],y);const v=f(i,["urlContext"]);return v!=null&&p(l,["urlContext"],v),l}function wE(i,e){const l={},o=f(i,["baseModel"]);o!=null&&p(l,["baseModel"],o);const r=f(i,["createTime"]);r!=null&&p(l,["createTime"],r);const d=f(i,["updateTime"]);return d!=null&&p(l,["updateTime"],d),l}function kE(i,e){const l={},o=f(i,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&p(l,["baseModel"],o);const r=f(i,["createTime"]);r!=null&&p(l,["createTime"],r);const d=f(i,["updateTime"]);return d!=null&&p(l,["updateTime"],d),l}function _E(i,e,l){const o={},r=f(i,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const d=f(i,["description"]);e!==void 0&&d!=null&&p(e,["description"],d);const u=f(i,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),o}function EE(i,e,l){const o={},r=f(i,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const d=f(i,["description"]);e!==void 0&&d!=null&&p(e,["description"],d);const u=f(i,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),o}function jE(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","name"],Ve(i,r));const d=f(e,["config"]);return d!=null&&_E(d,o),o}function AE(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["config"]);return d!=null&&EE(d,o),o}function ME(i,e,l){const o={},r=f(i,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const d=f(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const u=f(i,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const h=f(i,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const g=f(i,["outputMimeType"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","mimeType"],g);const m=f(i,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const y=f(i,["enhanceInputImage"]);e!==void 0&&y!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],y);const v=f(i,["imagePreservationFactor"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const S=f(i,["labels"]);e!==void 0&&S!=null&&p(e,["labels"],S);const N=f(i,["numberOfImages"]);e!==void 0&&N!=null&&p(e,["parameters","sampleCount"],N);const C=f(i,["mode"]);return e!==void 0&&C!=null&&p(e,["parameters","mode"],C),o}function RE(i,e,l){const o={},r=f(e,["model"]);r!=null&&p(o,["_url","model"],Ve(i,r));const d=f(e,["image"]);d!=null&&p(o,["instances[0]","image"],Li(d));const u=f(e,["upscaleFactor"]);u!=null&&p(o,["parameters","upscaleConfig","upscaleFactor"],u);const h=f(e,["config"]);return h!=null&&ME(h,o),o}function DE(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Ar(u))),p(l,["generatedImages"],d)}return l}function IE(i,e){const l={},o=f(i,["uri"]);o!=null&&p(l,["uri"],o);const r=f(i,["encodedVideo"]);r!=null&&p(l,["videoBytes"],Hn(r));const d=f(i,["encoding"]);return d!=null&&p(l,["mimeType"],d),l}function LE(i,e){const l={},o=f(i,["gcsUri"]);o!=null&&p(l,["uri"],o);const r=f(i,["bytesBase64Encoded"]);r!=null&&p(l,["videoBytes"],Hn(r));const d=f(i,["mimeType"]);return d!=null&&p(l,["mimeType"],d),l}function zE(i,e){const l={},o=f(i,["image"]);o!=null&&p(l,["_self"],Li(o));const r=f(i,["maskMode"]);return r!=null&&p(l,["maskMode"],r),l}function PE(i,e){const l={},o=f(i,["image"]);o!=null&&p(l,["image"],Mr(o));const r=f(i,["referenceType"]);return r!=null&&p(l,["referenceType"],r),l}function UE(i,e){const l={},o=f(i,["image"]);o!=null&&p(l,["image"],Li(o));const r=f(i,["referenceType"]);return r!=null&&p(l,["referenceType"],r),l}function vb(i,e){const l={},o=f(i,["uri"]);o!=null&&p(l,["uri"],o);const r=f(i,["videoBytes"]);r!=null&&p(l,["encodedVideo"],Hn(r));const d=f(i,["mimeType"]);return d!=null&&p(l,["encoding"],d),l}function Sb(i,e){const l={},o=f(i,["uri"]);o!=null&&p(l,["gcsUri"],o);const r=f(i,["videoBytes"]);r!=null&&p(l,["bytesBase64Encoded"],Hn(r));const d=f(i,["mimeType"]);return d!=null&&p(l,["mimeType"],d),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OE(i,e){const l={},o=f(i,["displayName"]);return e!==void 0&&o!=null&&p(e,["displayName"],o),l}function HE(i){const e={},l=f(i,["config"]);return l!=null&&OE(l,e),e}function GE(i,e){const l={},o=f(i,["force"]);return e!==void 0&&o!=null&&p(e,["_query","force"],o),l}function VE(i){const e={},l=f(i,["name"]);l!=null&&p(e,["_url","name"],l);const o=f(i,["config"]);return o!=null&&GE(o,e),e}function qE(i){const e={},l=f(i,["name"]);return l!=null&&p(e,["_url","name"],l),e}function BE(i,e){const l={},o=f(i,["customMetadata"]);if(e!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["customMetadata"],d)}const r=f(i,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),l}function $E(i){const e={},l=f(i,["name"]);l!=null&&p(e,["name"],l);const o=f(i,["metadata"]);o!=null&&p(e,["metadata"],o);const r=f(i,["done"]);r!=null&&p(e,["done"],r);const d=f(i,["error"]);d!=null&&p(e,["error"],d);const u=f(i,["response"]);return u!=null&&p(e,["response"],YE(u)),e}function FE(i){const e={},l=f(i,["fileSearchStoreName"]);l!=null&&p(e,["_url","file_search_store_name"],l);const o=f(i,["fileName"]);o!=null&&p(e,["fileName"],o);const r=f(i,["config"]);return r!=null&&BE(r,e),e}function YE(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["parent"]);o!=null&&p(e,["parent"],o);const r=f(i,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function JE(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),l}function XE(i){const e={},l=f(i,["config"]);return l!=null&&JE(l,e),e}function KE(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["fileSearchStores"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["fileSearchStores"],d)}return e}function Nb(i,e){const l={},o=f(i,["mimeType"]);e!==void 0&&o!=null&&p(e,["mimeType"],o);const r=f(i,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const d=f(i,["customMetadata"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),p(e,["customMetadata"],h)}const u=f(i,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),l}function QE(i){const e={},l=f(i,["fileSearchStoreName"]);l!=null&&p(e,["_url","file_search_store_name"],l);const o=f(i,["config"]);return o!=null&&Nb(o,e),e}function WE(i){const e={},l=f(i,["sdkHttpResponse"]);return l!=null&&p(e,["sdkHttpResponse"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZE="Content-Type",ej="X-Server-Timeout",tj="User-Agent",wu="x-goog-api-client",ij="1.42.0",nj=`google-genai-sdk/${ij}`,sj="v1beta1",lj="v1beta",oj=5,aj=[408,429,500,502,503,504];class rj{constructor(e){var l,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(l=e.httpOptions)===null||l===void 0?void 0:l.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const d={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(d.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?d.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(d.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),d.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:sj}else{if(!this.clientOptions.apiKey)throw new So({message:"API key must be set when using the Gemini API.",status:403});d.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:lj,d.baseUrl="https://generativelanguage.googleapis.com/"}d.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=d,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(d,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),l=new URL(e);return l.protocol=l.protocol=="http:"?"ws":"wss",l.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,l,o){const r=[this.getRequestUrlInternal(l)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,l){return!(l.baseUrl&&l.baseUrlResourceScope===yu.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let l=this.clientOptions.httpOptions;e.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,l),r=this.constructUrl(e.path,l,o);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))r.searchParams.append(u,String(h));let d={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=e.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,l,r.toString(),e.abortSignal),this.unaryApiCall(r,d,e.httpMethod)}patchHttpOptions(e,l){const o=JSON.parse(JSON.stringify(e));for(const[r,d]of Object.entries(l))typeof d=="object"?o[r]=Object.assign(Object.assign({},o[r]),d):d!==void 0&&(o[r]=d);return o}async requestStream(e){let l=this.clientOptions.httpOptions;e.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,l),r=this.constructUrl(e.path,l,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=e.body,d=await this.includeExtraHttpOptionsToRequestInit(d,l,r.toString(),e.abortSignal),this.streamApiCall(r,d,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,l,o,r){if(l&&l.timeout||r){const d=new AbortController,u=d.signal;if(l.timeout&&(l==null?void 0:l.timeout)>0){const h=setTimeout(()=>d.abort(),l.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{d.abort()}),e.signal=u}return l&&l.extraBody!==null&&cj(e,l.extraBody),e.headers=await this.getHeadersInternal(l,o),e}async unaryApiCall(e,l,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},l),{method:o})).then(async r=>(await a0(r),new vu(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,l,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},l),{method:o})).then(async r=>(await a0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ai(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:y}=yield Ee(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=d.decode(y,{stream:!0});try{const C=JSON.parse(v);if("error"in C){const E=JSON.parse(JSON.stringify(C.error)),w=E.status,I=E.code,H=`got status: ${w}. ${JSON.stringify(C)}`;if(I>=400&&I<600)throw new So({message:H,status:I})}}catch(C){if(C.name==="ApiError")throw C}u+=v;let S=-1,N=0;for(;;){S=-1,N=0;for(const w of g){const I=u.indexOf(w);I!==-1&&(S===-1||I<S)&&(S=I,N=w.length)}if(S===-1)break;const C=u.substring(0,S);u=u.substring(S+N);const E=C.trim();if(E.startsWith(h)){const w=E.substring(h.length).trim();try{const I=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ee(new vu(I))}catch(I){throw new Error(`exception parsing stream chunk ${w}. ${I}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,l){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,l);const r=this.clientOptions.httpOptions.retryOptions;return QT(async()=>{const u=await fetch(e,l);if(u.ok)return u;throw aj.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new eb.AbortError(`Non-retryable exception ${u.statusText} sending request`)},{retries:((o=r.attempts)!==null&&o!==void 0?o:oj)-1})}getDefaultHeaders(){const e={},l=nj+" "+this.clientOptions.userAgentExtra;return e[tj]=l,e[wu]=l,e[ZE]="application/json",e}async getHeadersInternal(e,l){const o=new Headers;if(e&&e.headers){for(const[r,d]of Object.entries(e.headers))o.append(r,d);e.timeout&&e.timeout>0&&o.append(ej,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,l),o}getFileName(e){var l;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(l=o.split(/[/\\]/).pop())!==null&&l!==void 0?l:""),o}async uploadFile(e,l){var o;const r={};l!=null&&(r.mimeType=l.mimeType,r.name=l.name,r.displayName=l.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,u=await d.stat(e);r.sizeBytes=String(u.size);const h=(o=l==null?void 0:l.mimeType)!==null&&o!==void 0?o:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g={file:r},m=this.getFileName(e),y=ye("upload/v1beta/files",g._url),v=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,m,g,l==null?void 0:l.httpOptions);return d.upload(e,v,this)}async uploadFileToFileSearchStore(e,l,o){var r;const d=this.clientOptions.uploader,u=await d.stat(l),h=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(l),v={};o!=null&&Nb(o,v);const S=await this.fetchUploadUrl(m,h,g,y,v,o==null?void 0:o.httpOptions);return d.uploadToFileSearchStore(l,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,l,o,r,d,u){var h;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(d),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function a0(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const l=i.status;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(o);throw l>=400&&l<600?new So({message:r,status:l}):new Error(r)}}function cj(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let l={};if(typeof i.body=="string"&&i.body.length>0)try{const d=JSON.parse(i.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))l=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(d,u){const h=Object.assign({},d);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],y=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?h[g]=o(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=o(l,e);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dj="mcp_used/unknown";let uj=!1;function Tb(i){for(const e of i)if(fj(e)||typeof e=="object"&&"inputSchema"in e)return!0;return uj}function Cb(i){var e;const l=(e=i[wu])!==null&&e!==void 0?e:"";i[wu]=(l+` ${dj}`).trimStart()}function fj(i){return i!==null&&typeof i=="object"&&i instanceof Qu}function pj(i){return Ai(this,arguments,function*(l,o=100){let r,d=0;for(;d<o;){const u=yield Ee(l.listTools({cursor:r}));for(const h of u.tools)yield yield Ee(h),d++;if(!u.nextCursor)break;r=u.nextCursor}})}class Qu{constructor(e=[],l){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=l}static create(e,l){return new Qu(e,l)}async initialize(){var e,l,o,r;if(this.mcpTools.length>0)return;const d={},u=[];for(const y of this.mcpClients)try{for(var h=!0,g=(l=void 0,Mi(pj(y))),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const v=r;u.push(v);const S=v.name;if(d[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);d[S]=y}}catch(v){l={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(l)throw l.error}}this.mcpTools=u,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),OC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const l=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,d);l.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mj(i,e,l){const o=new MC;let r;l.data instanceof Blob?r=JSON.parse(await l.data.text()):r=JSON.parse(l.data),Object.assign(o,r),e(o)}class hj{constructor(e,l,o){this.apiClient=e,this.auth=l,this.webSocketFactory=o}async connect(e){var l,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),u=bj(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const y=new Promise(_=>{m=_}),v=e.callbacks,S=function(){m({})},N=this.apiClient,C={onopen:S,onmessage:_=>{mj(N,v.onmessage,_)},onerror:(l=v==null?void 0:v.onerror)!==null&&l!==void 0?l:function(_){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(_){}},E=this.webSocketFactory.create(g,gj(u),C);E.connect(),await y;const H={setup:{model:Ve(this.apiClient,e.model)}};return E.send(JSON.stringify(H)),new xj(E,this.apiClient)}}class xj{constructor(e,l){this.conn=e,this.apiClient=l}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const l=Ok(e);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const l=Uk(e);this.conn.send(JSON.stringify(l))}sendPlaybackControl(e){const l={playbackControl:e};this.conn.send(JSON.stringify(l))}play(){this.sendPlaybackControl(tl.PLAY)}pause(){this.sendPlaybackControl(tl.PAUSE)}stop(){this.sendPlaybackControl(tl.STOP)}resetContext(){this.sendPlaybackControl(tl.RESET_CONTEXT)}close(){this.conn.close()}}function gj(i){const e={};return i.forEach((l,o)=>{e[o]=l}),e}function bj(i){const e=new Headers;for(const[l,o]of Object.entries(i))e.append(l,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yj="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vj(i,e,l){const o=new AC;let r;l.data instanceof Blob?r=await l.data.text():l.data instanceof ArrayBuffer?r=new TextDecoder().decode(l.data):r=l.data;const d=JSON.parse(r);if(i.isVertexAI()){const u=Vk(d);Object.assign(o,u)}else Object.assign(o,d);e(o)}class Sj{constructor(e,l,o){this.apiClient=e,this.auth=l,this.webSocketFactory=o,this.music=new hj(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var l,o,r,d,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&Tb(e.config.tools)&&Cb(v);const S=wj(v);if(this.apiClient.isVertexAI()){const q=this.apiClient.getProject(),G=this.apiClient.getLocation(),Q=this.apiClient.getApiKey(),F=!!q&&!!G||!!Q;this.apiClient.getCustomBaseUrl()&&!F?y=g:(y=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,y))}else{const q=this.apiClient.getApiKey();let G="BidiGenerateContent",Q="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),G="BidiGenerateContentConstrained",Q="access_token"),y=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${G}?${Q}=${q}`}let N=()=>{};const C=new Promise(q=>{N=q}),E=e.callbacks,w=function(){var q;(q=E==null?void 0:E.onopen)===null||q===void 0||q.call(E),N({})},I=this.apiClient,H={onopen:w,onmessage:q=>{vj(I,E.onmessage,q)},onerror:(l=E==null?void 0:E.onerror)!==null&&l!==void 0?l:function(q){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(q){}},_=this.webSocketFactory.create(y,Cj(S),H);_.connect(),await C;let P=Ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const q=this.apiClient.getProject(),G=this.apiClient.getLocation();q&&G&&(P=`projects/${q}/locations/${G}/`+P)}let M={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pr.AUDIO]}:e.config.responseModalities=[pr.AUDIO]),!((d=e.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],z=[];for(const q of j)if(this.isCallableTool(q)){const G=q;z.push(await G.tool())}else z.push(q);z.length>0&&(e.config.tools=z);const B={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=Pk(this.apiClient,B):M=zk(this.apiClient,B),delete M.config,_.send(JSON.stringify(M)),new Tj(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Nj={turnComplete:!0};class Tj{constructor(e,l){this.conn=e,this.apiClient=l}tLiveClientContent(e,l){if(l.turns!==null&&l.turns!==void 0){let o=[];try{o=ci(l.turns),e.isVertexAI()||(o=o.map(r=>To(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof l.turns}'`)}return{clientContent:{turns:o,turnComplete:l.turnComplete}}}return{clientContent:{turnComplete:l.turnComplete}}}tLiveClienttToolResponse(e,l){let o=[];if(l.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(l.functionResponses)?o=l.functionResponses:o=[l.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const d of o){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!e.isVertexAI()&&!("id"in d))throw new Error(yj)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Nj),e);const l=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(l))}sendRealtimeInput(e){let l={};this.apiClient.isVertexAI()?l={realtimeInput:Gk(e)}:l={realtimeInput:Hk(e)},this.conn.send(JSON.stringify(l))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const l=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(l))}close(){this.conn.close()}}function Cj(i){const e={};return i.forEach((l,o)=>{e[o]=l}),e}function wj(i){const e=new Headers;for(const[l,o]of Object.entries(i))e.append(l,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r0=10;function c0(i){var e,l,o;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(l=i==null?void 0:i.tools)!==null&&l!==void 0?l:[])if(sl(u)){r=!0;break}if(!r)return!0;const d=(o=i==null?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function sl(i){return"callTool"in i&&typeof i.callTool=="function"}function kj(i){var e,l,o;return(o=(l=(e=i.config)===null||e===void 0?void 0:e.tools)===null||l===void 0?void 0:l.some(r=>sl(r)))!==null&&o!==void 0?o:!1}function d0(i){var e;const l=[];return!((e=i==null?void 0:i.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((o,r)=>{if(sl(o))return;const d=o;d.functionDeclarations&&d.functionDeclarations.length>0&&l.push(r)}),l}function u0(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _j extends dn{constructor(e){super(),this.apiClient=e,this.embedContent=async l=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(l);if(l.model.includes("gemini")&&l.model!=="gemini-embedding-001"||l.model.includes("maas")){const r=ci(l.contents);if(r.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const d=Object.assign(Object.assign({},l),{content:r[0],embeddingApiType:mr.EMBED_CONTENT});return await this.embedContentInternal(d)}else{const r=Object.assign(Object.assign({},l),{embeddingApiType:mr.PREDICT});return await this.embedContentInternal(r)}},this.generateContent=async l=>{var o,r,d,u,h;const g=await this.processParamsMaybeAddMcpUsage(l);if(this.maybeMoveToResponseJsonSchem(l),!kj(l)||c0(l.config))return await this.generateContentInternal(g);const m=d0(l);if(m.length>0){const E=m.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let y,v;const S=ci(g.contents),N=(d=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:r0;let C=0;for(;C<N&&(y=await this.generateContentInternal(g),!(!y.functionCalls||y.functionCalls.length===0));){const E=y.candidates[0].content,w=[];for(const I of(h=(u=l.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(sl(I)){const _=await I.callTool(y.functionCalls);w.push(..._)}C++,v={role:"user",parts:w},g.contents=ci(g.contents),g.contents.push(E),g.contents.push(v),u0(g.config)&&(S.push(E),S.push(v))}return u0(g.config)&&(y.automaticFunctionCallingHistory=S),y},this.generateContentStream=async l=>{var o,r,d,u,h;if(this.maybeMoveToResponseJsonSchem(l),c0(l.config)){const v=await this.processParamsMaybeAddMcpUsage(l);return await this.generateContentStreamInternal(v)}const g=d0(l);if(g.length>0){const v=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(d=(r=(o=l==null?void 0:l.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||d===void 0?void 0:d.streamFunctionCallArguments,y=(h=(u=l==null?void 0:l.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(l)},this.generateImages=async l=>await this.generateImagesInternal(l).then(o=>{var r;let d;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=g==null?void 0:g.safetyAttributes:u.push(g);let h;return d?h={generatedImages:u,positivePromptSafetyAttributes:d,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async l=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),l==null?void 0:l.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new fs(rn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async l=>{const o={model:l.model,prompt:l.prompt,referenceImages:[],config:l.config};return l.referenceImages&&l.referenceImages&&(o.referenceImages=l.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async l=>{let o={numberOfImages:1,mode:"upscale"};l.config&&(o=Object.assign(Object.assign({},o),l.config));const r={model:l.model,image:l.image,upscaleFactor:l.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async l=>{var o,r,d,u,h,g;if((l.prompt||l.image||l.video)&&l.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=l.video)===null||o===void 0)&&o.uri&&(!((r=l.video)===null||r===void 0)&&r.videoBytes)?l.video={uri:l.video.uri,mimeType:l.video.mimeType}:!((u=(d=l.source)===null||d===void 0?void 0:d.video)===null||u===void 0)&&u.uri&&(!((g=(h=l.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(l.source.video={uri:l.source.video.uri,mimeType:l.source.video.mimeType})),await this.generateVideosInternal(l)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var l,o,r;const d=(l=e.config)===null||l===void 0?void 0:l.tools;if(!d)return e;const u=await Promise.all(d.map(async g=>sl(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&Tb(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Cb(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var l,o,r;const d=new Map;for(const u of(o=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&o!==void 0?o:[])if(sl(u)){const h=u,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(d.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);d.set(m.name,h)}}return d}async processAfcStream(e){var l,o,r;const d=(r=(o=(l=e.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:r0;let u=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,y,v){return Ai(this,arguments,function*(){for(var S,N,C,E,w,I;h<d;){u&&(h++,u=!1);const M=yield Ee(m.processParamsMaybeAddMcpUsage(v)),j=yield Ee(m.generateContentStreamInternal(M)),z=[],B=[];try{for(var H=!0,_=(N=void 0,Mi(j)),P;P=yield Ee(_.next()),S=P.done,!S;H=!0){E=P.value,H=!1;const q=E;if(yield yield Ee(q),q.candidates&&(!((w=q.candidates[0])===null||w===void 0)&&w.content)){B.push(q.candidates[0].content);for(const G of(I=q.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(h<d&&G.functionCall){if(!G.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(G.functionCall.name)){const Q=yield Ee(y.get(G.functionCall.name).callTool([G.functionCall]));z.push(...Q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${G.functionCall.name}`)}}}}catch(q){N={error:q}}finally{try{!H&&!S&&(C=_.return)&&(yield Ee(C.call(_)))}finally{if(N)throw N.error}}if(z.length>0){u=!0;const q=new fo;q.candidates=[{content:{role:"user",parts:z}}],yield yield Ee(q);const G=[];G.push(...B),G.push({role:"user",parts:z});const Q=ci(v.contents).concat(G);v.contents=Q}else break}})})(this,g,e)}async generateContentInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=s0(this.apiClient,e);return h=ye("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=o0(y),S=new fo;return Object.assign(S,v),S})}else{const m=n0(this.apiClient,e);return h=ye("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=l0(y),S=new fo;return Object.assign(S,v),S})}}async generateContentStreamInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=s0(this.apiClient,e);return h=ye("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(v){return Ai(this,arguments,function*(){var S,N,C,E;try{for(var w=!0,I=Mi(v),H;H=yield Ee(I.next()),S=H.done,!S;w=!0){E=H.value,w=!1;const _=E,P=o0(yield Ee(_.json()),e);P.sdkHttpResponse={headers:_.headers};const M=new fo;Object.assign(M,P),yield yield Ee(M)}}catch(_){N={error:_}}finally{try{!w&&!S&&(C=I.return)&&(yield Ee(C.call(I)))}finally{if(N)throw N.error}}})})}else{const m=n0(this.apiClient,e);return h=ye("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}),u.then(function(v){return Ai(this,arguments,function*(){var S,N,C,E;try{for(var w=!0,I=Mi(v),H;H=yield Ee(I.next()),S=H.done,!S;w=!0){E=H.value,w=!1;const _=E,P=l0(yield Ee(_.json()),e);P.sdkHttpResponse={headers:_.headers};const M=new fo;Object.assign(M,P),yield yield Ee(M)}}catch(_){N={error:_}}finally{try{!w&&!S&&(C=I.return)&&(yield Ee(C.call(I)))}finally{if(N)throw N.error}}})})}}async embedContentInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=y_(this.apiClient,e,e),y=GC(e.model)?"{model}:embedContent":"{model}:predict";return h=ye(y,m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const S=S_(v,e),N=new Hg;return Object.assign(N,S),N})}else{const m=b_(this.apiClient,e);return h=ye("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=v_(y),S=new Hg;return Object.assign(S,v),S})}}async generateImagesInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=R_(this.apiClient,e);return h=ye("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=I_(y),S=new Gg;return Object.assign(S,v),S})}else{const m=M_(this.apiClient,e);return h=ye("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=D_(y),S=new Gg;return Object.assign(S,v),S})}}async editImageInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=m_(this.apiClient,e);return d=ye("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=h_(g),y=new bC;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=RE(this.apiClient,e);return d=ye("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=DE(g),y=new yC;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=pE(this.apiClient,e);return d=ye("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=mE(g),y=new vC;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=vE(this.apiClient,e);return d=ye("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=SE(g),y=new SC;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=Q_(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>Cu(y))}else{const m=K_(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>Tu(y))}}async listInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=oE(this.apiClient,e);return h=ye("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=rE(y),S=new Vg;return Object.assign(S,v),S})}else{const m=lE(this.apiClient,e);return h=ye("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=aE(y),S=new Vg;return Object.assign(S,v),S})}}async update(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=AE(this.apiClient,e);return h=ye("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>Cu(y))}else{const m=jE(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>Tu(y))}}async delete(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=d_(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=f_(y),S=new qg;return Object.assign(S,v),S})}else{const m=c_(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=u_(y),S=new qg;return Object.assign(S,v),S})}}async countTokens(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=o_(this.apiClient,e);return h=ye("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=r_(y),S=new Bg;return Object.assign(S,v),S})}else{const m=l_(this.apiClient,e);return h=ye("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=a_(y),S=new Bg;return Object.assign(S,v),S})}}async computeTokens(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=Wk(this.apiClient,e);return d=ye("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const m=Zk(g),y=new NC;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=H_(this.apiClient,e);return h=ye("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u.then(y=>{const v=U_(y),S=new hr;return Object.assign(S,v),S})}else{const m=O_(this.apiClient,e);return h=ye("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u.then(y=>{const v=P_(y),S=new hr;return Object.assign(S,v),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ej extends dn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const l=e.operation,o=e.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let d;o&&"httpOptions"in o&&(d=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:d}});return l._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:o});return l._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const l=e.operation,o=e.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let d;o&&"httpOptions"in o&&(d=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:d}});return l._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:o});return l._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=fC(e);return h=ye("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),u}else{const m=uC(e);return h=ye("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=sC(e);return d=ye("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jj(i){const e={},l=f(i,["data"]);if(l!=null&&p(e,["data"],l),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function Aj(i){const e={},l=f(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>Oj(d))),p(e,["parts"],r)}const o=f(i,["role"]);return o!=null&&p(e,["role"],o),e}function Mj(i,e,l){const o={},r=f(e,["expireTime"]);l!==void 0&&r!=null&&p(l,["expireTime"],r);const d=f(e,["newSessionExpireTime"]);l!==void 0&&d!=null&&p(l,["newSessionExpireTime"],d);const u=f(e,["uses"]);l!==void 0&&u!=null&&p(l,["uses"],u);const h=f(e,["liveConnectConstraints"]);l!==void 0&&h!=null&&p(l,["bidiGenerateContentSetup"],Uj(i,h));const g=f(e,["lockAdditionalFields"]);return l!==void 0&&g!=null&&p(l,["fieldMask"],g),o}function Rj(i,e){const l={},o=f(e,["config"]);return o!=null&&p(l,["config"],Mj(i,o,l)),l}function Dj(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=f(i,["fileUri"]);l!=null&&p(e,["fileUri"],l);const o=f(i,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function Ij(i){const e={},l=f(i,["id"]);l!=null&&p(e,["id"],l);const o=f(i,["args"]);o!=null&&p(e,["args"],o);const r=f(i,["name"]);if(r!=null&&p(e,["name"],r),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lj(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=f(i,["enableWidget"]);return l!=null&&p(e,["enableWidget"],l),e}function zj(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=f(i,["timeRangeFilter"]);return l!=null&&p(e,["timeRangeFilter"],l),e}function Pj(i,e){const l={},o=f(i,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],o);const r=f(i,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const d=f(i,["temperature"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","temperature"],d);const u=f(i,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const h=f(i,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const g=f(i,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(i,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const y=f(i,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const v=f(i,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],Ku(v));const S=f(i,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const N=f(i,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const C=f(i,["systemInstruction"]);e!==void 0&&C!=null&&p(e,["setup","systemInstruction"],Aj(wt(C)));const E=f(i,["tools"]);if(e!==void 0&&E!=null){let j=pl(E);Array.isArray(j)&&(j=j.map(z=>Gj(fl(z)))),p(e,["setup","tools"],j)}const w=f(i,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],Hj(w));const I=f(i,["inputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","inputAudioTranscription"],I);const H=f(i,["outputAudioTranscription"]);e!==void 0&&H!=null&&p(e,["setup","outputAudioTranscription"],H);const _=f(i,["realtimeInputConfig"]);e!==void 0&&_!=null&&p(e,["setup","realtimeInputConfig"],_);const P=f(i,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const M=f(i,["proactivity"]);if(e!==void 0&&M!=null&&p(e,["setup","proactivity"],M),f(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return l}function Uj(i,e){const l={},o=f(e,["model"]);o!=null&&p(l,["setup","model"],Ve(i,o));const r=f(e,["config"]);return r!=null&&p(l,["config"],Pj(r,l)),l}function Oj(i){const e={},l=f(i,["mediaResolution"]);l!=null&&p(e,["mediaResolution"],l);const o=f(i,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const r=f(i,["executableCode"]);r!=null&&p(e,["executableCode"],r);const d=f(i,["fileData"]);d!=null&&p(e,["fileData"],Dj(d));const u=f(i,["functionCall"]);u!=null&&p(e,["functionCall"],Ij(u));const h=f(i,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(i,["inlineData"]);g!=null&&p(e,["inlineData"],jj(g));const m=f(i,["text"]);m!=null&&p(e,["text"],m);const y=f(i,["thought"]);y!=null&&p(e,["thought"],y);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const S=f(i,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function Hj(i){const e={},l=f(i,["handle"]);if(l!=null&&p(e,["handle"],l),f(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Gj(i){const e={};if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=f(i,["computerUse"]);l!=null&&p(e,["computerUse"],l);const o=f(i,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const r=f(i,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["functionDeclarations"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const u=f(i,["googleMaps"]);u!=null&&p(e,["googleMaps"],Lj(u));const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],zj(h));const g=f(i,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(i,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vj(i){const e=[];for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const o=i[l];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(d=>`${l}.${d}`);e.push(...r)}else e.push(l)}return e.join(",")}function qj(i,e){let l=null;const o=i.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const d=o.setup;typeof d=="object"&&d!==null?(i.bidiGenerateContentSetup=d,l=d):delete i.bidiGenerateContentSetup}else o!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(l){const d=Vj(l);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)d?i.fieldMask=d:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];d&&g.push(d),h.length>0&&g.push(...h),g.length>0?i.fieldMask=g.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class Bj extends dn{constructor(e){super(),this.apiClient=e}async create(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=Rj(this.apiClient,e);d=ye("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const g=qj(h,e.config);return r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $j(i,e){const l={},o=f(i,["force"]);return e!==void 0&&o!=null&&p(e,["_query","force"],o),l}function Fj(i){const e={},l=f(i,["name"]);l!=null&&p(e,["_url","name"],l);const o=f(i,["config"]);return o!=null&&$j(o,e),e}function Yj(i){const e={},l=f(i,["name"]);return l!=null&&p(e,["_url","name"],l),e}function Jj(i,e){const l={},o=f(i,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const r=f(i,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),l}function Xj(i){const e={},l=f(i,["parent"]);l!=null&&p(e,["_url","parent"],l);const o=f(i,["config"]);return o!=null&&Jj(o,e),e}function Kj(i){const e={},l=f(i,["sdkHttpResponse"]);l!=null&&p(e,["sdkHttpResponse"],l);const o=f(i,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const r=f(i,["documents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),p(e,["documents"],d)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qj extends dn{constructor(e){super(),this.apiClient=e,this.list=async l=>new fs(rn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:l.parent,config:o.config}),await this.listInternal(l),l)}async get(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Yj(e);return d=ye("{name}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var l,o;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fj(e);r=ye("{name}",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Xj(e);return d=ye("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Kj(g),y=new TC;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wj extends dn{constructor(e,l=new Qj(e)){super(),this.apiClient=e,this.documents=l,this.list=async(o={})=>new fs(rn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HE(e);return d=ye("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qE(e);return d=ye("{name}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var l,o;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=VE(e);r=ye("{name}",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XE(e);return d=ye("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=KE(g),y=new CC;return Object.assign(y,m),y})}}async uploadToFileSearchStoreInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QE(e);return d=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=WE(g),y=new wC;return Object.assign(y,m),y})}}async importFile(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=FE(e);return d=ye("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=$E(g),y=new $u;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wb=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return wb=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),l=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^l()&15>>+o/4).toString(16))};const Zj=()=>wb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ku(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const _u=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wi extends Error{}class Ut extends wi{constructor(e,l,o,r){super(`${Ut.makeMessage(e,l,o)}`),this.status=e,this.headers=r,this.error=l}static makeMessage(e,l,o){const r=l!=null&&l.message?typeof l.message=="string"?l.message:JSON.stringify(l.message):l?JSON.stringify(l):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,l,o,r){if(!e||!r)return new Rr({message:o,cause:_u(l)});const d=l;return e===400?new _b(e,d,o,r):e===401?new Eb(e,d,o,r):e===403?new jb(e,d,o,r):e===404?new Ab(e,d,o,r):e===409?new Mb(e,d,o,r):e===422?new Rb(e,d,o,r):e===429?new Db(e,d,o,r):e>=500?new Ib(e,d,o,r):new Ut(e,d,o,r)}}class Eu extends Ut{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Rr extends Ut{constructor({message:e,cause:l}){super(void 0,void 0,e||"Connection error.",void 0),l&&(this.cause=l)}}class kb extends Rr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _b extends Ut{}class Eb extends Ut{}class jb extends Ut{}class Ab extends Ut{}class Mb extends Ut{}class Rb extends Ut{}class Db extends Ut{}class Ib extends Ut{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eA=/^[a-z][a-z0-9+.-]*:/i,tA=i=>eA.test(i);let ju=i=>(ju=Array.isArray,ju(i));const iA=ju;let nA=iA;const f0=nA;function sA(i){if(!i)return!0;for(const e in i)return!1;return!0}function lA(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const oA=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wi(`${i} must be an integer`);if(e<0)throw new wi(`${i} must be a positive integer`);return e},aA=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rA=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const dA=()=>{var i,e,l,o,r;const d=cA();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zs,"X-Stainless-OS":m0(Deno.build.os),"X-Stainless-Arch":p0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zs,"X-Stainless-OS":m0((l=globalThis.process.platform)!==null&&l!==void 0?l:"unknown"),"X-Stainless-Arch":p0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=uA();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function uA(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:l}of i){const o=l.exec(navigator.userAgent);if(o){const r=o[1]||0,d=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${d}.${u}`}}}return null}const p0=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",m0=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Fa;const fA=()=>Fa??(Fa=dA());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Lb(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function mA(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Lb({start(){},async pull(l){const{done:o,value:r}=await e.next();o?l.close():l.enqueue(r)},async cancel(){var l;await((l=e.return)===null||l===void 0?void 0:l.call(e))}})}function zb(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const l=await e.read();return l!=null&&l.done&&e.releaseLock(),l}catch(l){throw e.releaseLock(),l}},async return(){const l=e.cancel();return e.releaseLock(),await l,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function hA(i){var e,l;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((l=(e=i[Symbol.asyncIterator]()).return)===null||l===void 0?void 0:l.call(e));return}const o=i.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xA=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pb=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,l=typeof((i=e==null?void 0:e.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(l?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function pu(i,e,l){return Pb(),new File(i,e??"unknown_file",l)}function gA(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const bA=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ub=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",yA=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&Ub(i),vA=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function SA(i,e,l){if(Pb(),i=await i,yA(i))return i instanceof File?i:pu([await i.arrayBuffer()],i.name);if(vA(i)){const r=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),pu(await Au(r),e,l)}const o=await Au(i);if(e||(e=gA(i)),!(l!=null&&l.type)){const r=o.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof r=="string"&&(l=Object.assign(Object.assign({},l),{type:r}))}return pu(o,e,l)}async function Au(i){var e,l,o,r,d;let u=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)u.push(i);else if(Ub(i))u.push(i instanceof Blob?i:await i.arrayBuffer());else if(bA(i))try{for(var h=!0,g=Mi(i),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const y=r;u.push(...await Au(y))}}catch(y){l={error:y}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(l)throw l.error}}else{const y=(d=i==null?void 0:i.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof i}${y?`; constructor: ${y}`:""}${NA(i)}`)}return u}function NA(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(l=>`"${l}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ob{constructor(e){this._client=e}}Ob._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hb(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const h0=Object.freeze(Object.create(null)),TA=(i=Hb)=>(function(l,...o){if(l.length===1)return l[0];let r=!1;const d=[],u=l.reduce((y,v,S)=>{var N,C,E;/[?#]/.test(v)&&(r=!0);const w=o[S];let I=(r?encodeURIComponent:i)(""+w);return S!==o.length&&(w==null||typeof w=="object"&&w.toString===((E=Object.getPrototypeOf((C=Object.getPrototypeOf((N=w.hasOwnProperty)!==null&&N!==void 0?N:h0))!==null&&C!==void 0?C:h0))===null||E===void 0?void 0:E.toString))&&(I=w+"",d.push({start:y.length+v.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),y+v+(S===o.length?"":I)},""),h=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)d.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(d.sort((y,v)=>y.start-v.start),d.length>0){let y=0;const v=d.reduce((S,N)=>{const C=" ".repeat(N.start-y),E="^".repeat(N.length);return y=N.start+N.length,S+C+E},"");throw new wi(`Path parameters result in path with invalid segments:
${d.map(S=>S.error).join(`
`)}
${u}
${v}`)}return u}),Ya=TA(Hb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gb extends Ob{create(e,l){var o;const{api_version:r=this._client.apiVersion}=e,d=gr(e,["api_version"]);if("model"in d&&"agent_config"in d)throw new wi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new wi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ya`/${r}/interactions`,Object.assign(Object.assign({body:d},l),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,l={},o){const{api_version:r=this._client.apiVersion}=l??{};return this._client.delete(Ya`/${r}/interactions/${e}`,o)}cancel(e,l={},o){const{api_version:r=this._client.apiVersion}=l??{};return this._client.post(Ya`/${r}/interactions/${e}/cancel`,o)}get(e,l={},o){var r;const d=l??{},{api_version:u=this._client.apiVersion}=d,h=gr(d,["api_version"]);return this._client.get(Ya`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(r=l==null?void 0:l.stream)!==null&&r!==void 0?r:!1}))}}Gb._key=Object.freeze(["interactions"]);class Vb extends Gb{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CA(i){let e=0;for(const r of i)e+=r.length;const l=new Uint8Array(e);let o=0;for(const r of i)l.set(r,o),o+=r.length;return l}let Ja;function Wu(i){let e;return(Ja??(e=new globalThis.TextEncoder,Ja=e.encode.bind(e)))(i)}let Xa;function x0(i){let e;return(Xa??(e=new globalThis.TextDecoder,Xa=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const l=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wu(e):e;this.buffer=CA([this.buffer,l]);const o=[];let r;for(;(r=wA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(x0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=x0(this.buffer.subarray(0,d));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Dr.NEWLINE_CHARS=new Set([`
`,"\r"]);Dr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function wA(i,e){for(let r=e??0;r<i.length;r++){if(i[r]===10)return{preceding:r,index:r+1,carriage:!1};if(i[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function kA(i){for(let o=0;o<i.length-1;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const br={off:0,error:200,warn:300,info:400,debug:500},g0=(i,e,l)=>{if(i){if(lA(br,i))return i;Pt(l).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(br))}`)}};function ho(){}function Ka(i,e,l){return!e||br[i]>br[l]?ho:e[i].bind(e)}const _A={error:ho,warn:ho,info:ho,debug:ho};let b0=new WeakMap;function Pt(i){var e;const l=i.logger,o=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!l)return _A;const r=b0.get(l);if(r&&r[0]===o)return r[1];const d={error:Ka("error",l,o),warn:Ka("warn",l,o),info:Ka("info",l,o),debug:Ka("debug",l,o)};return b0.set(l,[o,d]),d}const as=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,l])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":l]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class il{constructor(e,l,o){this.iterator=e,this.controller=l,this.client=o}static fromSSEResponse(e,l,o){let r=!1;const d=o?Pt(o):console;function u(){return Ai(this,arguments,function*(){var g,m,y,v;if(r)throw new wi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var N=!0,C=Mi(EA(e,l)),E;E=yield Ee(C.next()),g=E.done,!g;N=!0){v=E.value,N=!1;const w=v;if(!S)if(w.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ee(JSON.parse(w.data))}catch(I){throw d.error("Could not parse message into JSON:",w.data),d.error("From chunk:",w.raw),I}}}catch(w){m={error:w}}finally{try{!N&&!g&&(y=C.return)&&(yield Ee(y.call(C)))}finally{if(m)throw m.error}}S=!0}catch(w){if(ku(w))return yield Ee(void 0);throw w}finally{S||l.abort()}})}return new il(u,l,o)}static fromReadableStream(e,l,o){let r=!1;function d(){return Ai(this,arguments,function*(){var g,m,y,v;const S=new Dr,N=zb(e);try{for(var C=!0,E=Mi(N),w;w=yield Ee(E.next()),g=w.done,!g;C=!0){v=w.value,C=!1;const I=v;for(const H of S.decode(I))yield yield Ee(H)}}catch(I){m={error:I}}finally{try{!C&&!g&&(y=E.return)&&(yield Ee(y.call(E)))}finally{if(m)throw m.error}}for(const I of S.flush())yield yield Ee(I)})}function u(){return Ai(this,arguments,function*(){var g,m,y,v;if(r)throw new wi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var N=!0,C=Mi(d()),E;E=yield Ee(C.next()),g=E.done,!g;N=!0){v=E.value,N=!1;const w=v;S||w&&(yield yield Ee(JSON.parse(w)))}}catch(w){m={error:w}}finally{try{!N&&!g&&(y=C.return)&&(yield Ee(y.call(C)))}finally{if(m)throw m.error}}S=!0}catch(w){if(ku(w))return yield Ee(void 0);throw w}finally{S||l.abort()}})}return new il(u,l,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],l=[],o=this.iterator(),r=d=>({next:()=>{if(d.length===0){const u=o.next();e.push(u),l.push(u)}return d.shift()}});return[new il(()=>r(e),this.controller,this.client),new il(()=>r(l),this.controller,this.client)]}toReadableStream(){const e=this;let l;return Lb({async start(){l=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:d}=await l.next();if(d)return o.close();const u=Wu(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=l.return)===null||o===void 0?void 0:o.call(l))}})}}function EA(i,e){return Ai(this,arguments,function*(){var o,r,d,u;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wi("Attempted to iterate over a response with no body");const h=new AA,g=new Dr,m=zb(i.body);try{for(var y=!0,v=Mi(jA(m)),S;S=yield Ee(v.next()),o=S.done,!o;y=!0){u=S.value,y=!1;const N=u;for(const C of g.decode(N)){const E=h.decode(C);E&&(yield yield Ee(E))}}}catch(N){r={error:N}}finally{try{!y&&!o&&(d=v.return)&&(yield Ee(d.call(v)))}finally{if(r)throw r.error}}for(const N of g.flush()){const C=h.decode(N);C&&(yield yield Ee(C))}})}function jA(i){return Ai(this,arguments,function*(){var l,o,r,d;let u=new Uint8Array;try{for(var h=!0,g=Mi(i),m;m=yield Ee(g.next()),l=m.done,!l;h=!0){d=m.value,h=!1;const y=d;if(y==null)continue;const v=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Wu(y):y;let S=new Uint8Array(u.length+v.length);S.set(u),S.set(v,u.length),u=S;let N;for(;(N=kA(u))!==-1;)yield yield Ee(u.slice(0,N)),u=u.slice(N)}}catch(y){o={error:y}}finally{try{!h&&!l&&(r=g.return)&&(yield Ee(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ee(u))})}class AA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(e),e.startsWith(":"))return null;let[l,o,r]=MA(e,":");return r.startsWith(" ")&&(r=r.substring(1)),l==="event"?this.event=r:l==="data"&&this.data.push(r),null}}function MA(i,e){const l=i.indexOf(e);return l!==-1?[i.substring(0,l),e,i.substring(l+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function RA(i,e){const{response:l,requestLogID:o,retryOfRequestLogID:r,startTime:d}=e,u=await(async()=>{var h;if(e.options.stream)return Pt(i).debug("response",l.status,l.url,l.headers,l.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(l,e.controller,i):il.fromSSEResponse(l,e.controller,i);if(l.status===204)return null;if(e.options.__binaryResponse)return l;const g=l.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?l.headers.get("content-length")==="0"?void 0:await l.json():await l.text()})();return Pt(i).debug(`[${o}] response parsed`,as({retryOfRequestLogID:r,url:l.url,status:l.status,body:u,durationMs:Date.now()-d})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zu extends Promise{constructor(e,l,o=RA){super(r=>{r(null)}),this.responsePromise=l,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Zu(this.client,this.responsePromise,async(l,o)=>e(await this.parseResponse(l,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,l]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:l}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,l){return this.parse().then(e,l)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qb=Symbol("brand.privateNullableHeaders");function*DA(i){if(!i)return;if(qb in i){const{values:o,nulls:r}=i;yield*o.entries();for(const d of r)yield[d,null];return}let e=!1,l;i instanceof Headers?l=i.entries():f0(i)?l=i:(e=!0,l=Object.entries(i??{}));for(let o of l){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const d=f0(o[1])?o[1]:[o[1]];let u=!1;for(const h of d)h!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,h])}}const po=i=>{const e=new Headers,l=new Set;for(const o of i){const r=new Set;for(const[d,u]of DA(o)){const h=d.toLowerCase();r.has(h)||(e.delete(d),r.add(h)),u===null?(e.delete(d),l.add(h)):(e.append(d,u),l.delete(h))}}return{[qb]:!0,values:e,nulls:l}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mu=i=>{var e,l,o,r,d,u;if(typeof globalThis.process<"u")return(o=(l=(e=WT)===null||e===void 0?void 0:e[i])===null||l===void 0?void 0:l.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(d=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||d===void 0?void 0:d.call(r,i))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bb;class Ir{constructor(e){var l,o,r,d,u,h,g,{baseURL:m=mu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(l=mu("GEMINI_API_KEY"))!==null&&l!==void 0?l:null,apiVersion:v="v1beta"}=e,S=gr(e,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:y,apiVersion:v},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(o=N.timeout)!==null&&o!==void 0?o:Ir.DEFAULT_TIMEOUT,this.logger=(r=N.logger)!==null&&r!==void 0?r:console;const C="warn";this.logLevel=C,this.logLevel=(u=(d=g0(N.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:g0(mu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:C,this.fetchOptions=N.fetchOptions,this.maxRetries=(h=N.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=N.fetch)!==null&&g!==void 0?g:pA(),this.encoder=xA,this._options=N,this.apiKey=y,this.apiVersion=v,this.clientAdapter=N.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:l}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!l.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const l=po([e.headers]);if(!(l.values.has("authorization")||l.values.has("x-goog-api-key"))){if(this.apiKey)return po([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return po([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([l,o])=>typeof o<"u").map(([l,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(l)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(l)}=`;throw new wi(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zs}`}defaultIdempotencyKey(){return`stainless-node-retry-${Zj()}`}makeStatusError(e,l,o,r){return Ut.generate(e,l,o,r)}buildURL(e,l,o){const r=!this.baseURLOverridden()&&o||this.baseURL,d=tA(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return sA(u)||(l=Object.assign(Object.assign({},u),l)),typeof l=="object"&&l&&!Array.isArray(l)&&(d.search=this.stringifyQuery(l)),d.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const l=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${l}`}}async prepareRequest(e,{url:l,options:o}){}get(e,l){return this.methodRequest("get",e,l)}post(e,l){return this.methodRequest("post",e,l)}patch(e,l){return this.methodRequest("patch",e,l)}put(e,l){return this.methodRequest("put",e,l)}delete(e,l){return this.methodRequest("delete",e,l)}methodRequest(e,l,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:l},r)))}request(e,l=null){return new Zu(this,this.makeRequest(e,l,void 0))}async makeRequest(e,l,o){var r,d,u;const h=await e,g=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;l==null&&(l=g),await this.prepareOptions(h);const{req:m,url:y,timeout:v}=await this.buildRequest(h,{retryCount:g-l});await this.prepareRequest(m,{url:y,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=o===void 0?"":`, retryOf: ${o}`,C=Date.now();if(Pt(this).debug(`[${S}] sending request`,as({retryOfRequestLogID:o,method:h.method,url:y,options:h,headers:m.headers})),!((d=h.signal)===null||d===void 0)&&d.aborted)throw new Eu;const E=new AbortController,w=await this.fetchWithTimeout(y,m,v,E).catch(_u),I=Date.now();if(w instanceof globalThis.Error){const _=`retrying, ${l} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new Eu;const P=ku(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(l)return Pt(this).info(`[${S}] connection ${P?"timed out":"failed"} - ${_}`),Pt(this).debug(`[${S}] connection ${P?"timed out":"failed"} (${_})`,as({retryOfRequestLogID:o,url:y,durationMs:I-C,message:w.message})),this.retryRequest(h,l,o??S);throw Pt(this).info(`[${S}] connection ${P?"timed out":"failed"} - error; no more retries left`),Pt(this).debug(`[${S}] connection ${P?"timed out":"failed"} (error; no more retries left)`,as({retryOfRequestLogID:o,url:y,durationMs:I-C,message:w.message})),P?new kb:new Rr({cause:w})}const H=`[${S}${N}] ${m.method} ${y} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${I-C}ms`;if(!w.ok){const _=await this.shouldRetry(w);if(l&&_){const q=`retrying, ${l} attempts remaining`;return await hA(w.body),Pt(this).info(`${H} - ${q}`),Pt(this).debug(`[${S}] response error (${q})`,as({retryOfRequestLogID:o,url:w.url,status:w.status,headers:w.headers,durationMs:I-C})),this.retryRequest(h,l,o??S,w.headers)}const P=_?"error; no more retries left":"error; not retryable";Pt(this).info(`${H} - ${P}`);const M=await w.text().catch(q=>_u(q).message),j=aA(M),z=j?void 0:M;throw Pt(this).debug(`[${S}] response error (${P})`,as({retryOfRequestLogID:o,url:w.url,status:w.status,headers:w.headers,message:z,durationMs:Date.now()-C})),this.makeStatusError(w.status,j,z,w.headers)}return Pt(this).info(H),Pt(this).debug(`[${S}] response start`,as({retryOfRequestLogID:o,url:w.url,status:w.status,headers:w.headers,durationMs:I-C})),{response:w,options:h,controller:E,requestLogID:S,retryOfRequestLogID:o,startTime:C}}async fetchWithTimeout(e,l,o,r){const d=l||{},{signal:u,method:h}=d,g=gr(d,["signal","method"]),m=this._makeAbort(r);u&&u.addEventListener("abort",m,{once:!0});const y=setTimeout(m,o),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(S.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(y)}}async shouldRetry(e){const l=e.headers.get("x-should-retry");return l==="true"?!0:l==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,l,o,r){var d;let u;const h=r==null?void 0:r.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(u=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const m=parseFloat(g);Number.isNaN(m)?u=Date.parse(g)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(d=e.maxRetries)!==null&&d!==void 0?d:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(l,m)}return await rA(u),this.makeRequest(e,l-1,o)}calculateDefaultRetryTimeoutMillis(e,l){const d=l-e,u=Math.min(.5*Math.pow(2,d),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:l=0}={}){var o,r,d;const u=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:y}=u,v=this.buildURL(g,m,y);"timeout"in u&&oA("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:N}=this.buildBody({options:u}),C=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:l});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:C},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(d=u.fetchOptions)!==null&&d!==void 0?d:{}),url:v,timeout:u.timeout}}async buildHeaders({options:e,method:l,bodyHeaders:o,retryCount:r}){let d={};this.idempotencyHeader&&l!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=po([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),fA()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(h),h.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:l}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=po([l]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:mA(e)}:typeof e=="object"&&o.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:o})}}Ir.DEFAULT_TIMEOUT=6e4;class kt extends Ir{constructor(){super(...arguments),this.interactions=new Vb(this)}}Bb=kt;kt.GeminiNextGenAPIClient=Bb;kt.GeminiNextGenAPIClientError=wi;kt.APIError=Ut;kt.APIConnectionError=Rr;kt.APIConnectionTimeoutError=kb;kt.APIUserAbortError=Eu;kt.NotFoundError=Ab;kt.ConflictError=Mb;kt.RateLimitError=Db;kt.BadRequestError=_b;kt.AuthenticationError=Eb;kt.InternalServerError=Ib;kt.PermissionDeniedError=jb;kt.UnprocessableEntityError=Rb;kt.toFile=SA;kt.Interactions=Vb;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IA(i,e){const l={},o=f(i,["name"]);return o!=null&&p(l,["_url","name"],o),l}function LA(i,e){const l={},o=f(i,["name"]);return o!=null&&p(l,["_url","name"],o),l}function zA(i,e){const l={},o=f(i,["sdkHttpResponse"]);return o!=null&&p(l,["sdkHttpResponse"],o),l}function PA(i,e){const l={},o=f(i,["sdkHttpResponse"]);return o!=null&&p(l,["sdkHttpResponse"],o),l}function UA(i,e,l){const o={};if(f(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(i,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),f(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=f(i,["epochCount"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","epochCount"],d);const u=f(i,["learningRateMultiplier"]);if(u!=null&&p(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(i,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(i,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const h=f(i,["batchSize"]);e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(i,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),f(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(i,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(i,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(i,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(i,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(i,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function OA(i,e,l){const o={};let r=f(l,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const j=f(i,["validationDataset"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec"],hu(j))}else if(r==="PREFERENCE_TUNING"){const j=f(i,["validationDataset"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec"],hu(j))}else if(r==="DISTILLATION"){const j=f(i,["validationDataset"]);e!==void 0&&j!=null&&p(e,["distillationSpec"],hu(j))}const d=f(i,["tunedModelDisplayName"]);e!==void 0&&d!=null&&p(e,["tunedModelDisplayName"],d);const u=f(i,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let h=f(l,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const j=f(i,["epochCount"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],j)}else if(h==="PREFERENCE_TUNING"){const j=f(i,["epochCount"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],j)}else if(h==="DISTILLATION"){const j=f(i,["epochCount"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],j)}let g=f(l,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const j=f(i,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],j)}else if(g==="PREFERENCE_TUNING"){const j=f(i,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],j)}else if(g==="DISTILLATION"){const j=f(i,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],j)}let m=f(l,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const j=f(i,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],j)}else if(m==="PREFERENCE_TUNING"){const j=f(i,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],j)}else if(m==="DISTILLATION"){const j=f(i,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],j)}let y=f(l,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const j=f(i,["adapterSize"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],j)}else if(y==="PREFERENCE_TUNING"){const j=f(i,["adapterSize"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],j)}else if(y==="DISTILLATION"){const j=f(i,["adapterSize"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],j)}let v=f(l,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const j=f(i,["tuningMode"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","tuningMode"],j)}const S=f(i,["customBaseModel"]);e!==void 0&&S!=null&&p(e,["customBaseModel"],S);let N=f(l,["config","method"]);if(N===void 0&&(N="SUPERVISED_FINE_TUNING"),N==="SUPERVISED_FINE_TUNING"){const j=f(i,["batchSize"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],j)}let C=f(l,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const j=f(i,["learningRate"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],j)}const E=f(i,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const w=f(i,["beta"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],w);const I=f(i,["baseTeacherModel"]);e!==void 0&&I!=null&&p(e,["distillationSpec","baseTeacherModel"],I);const H=f(i,["tunedTeacherModelSource"]);e!==void 0&&H!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],H);const _=f(i,["sftLossWeightMultiplier"]);e!==void 0&&_!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],_);const P=f(i,["outputUri"]);e!==void 0&&P!=null&&p(e,["outputUri"],P);const M=f(i,["encryptionSpec"]);return e!==void 0&&M!=null&&p(e,["encryptionSpec"],M),o}function HA(i,e){const l={},o=f(i,["baseModel"]);o!=null&&p(l,["baseModel"],o);const r=f(i,["preTunedModel"]);r!=null&&p(l,["preTunedModel"],r);const d=f(i,["trainingDataset"]);d!=null&&QA(d);const u=f(i,["config"]);return u!=null&&UA(u,l),l}function GA(i,e){const l={},o=f(i,["baseModel"]);o!=null&&p(l,["baseModel"],o);const r=f(i,["preTunedModel"]);r!=null&&p(l,["preTunedModel"],r);const d=f(i,["trainingDataset"]);d!=null&&WA(d,l,e);const u=f(i,["config"]);return u!=null&&OA(u,l,e),l}function VA(i,e){const l={},o=f(i,["name"]);return o!=null&&p(l,["_url","name"],o),l}function qA(i,e){const l={},o=f(i,["name"]);return o!=null&&p(l,["_url","name"],o),l}function BA(i,e,l){const o={},r=f(i,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const d=f(i,["pageToken"]);e!==void 0&&d!=null&&p(e,["_query","pageToken"],d);const u=f(i,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),o}function $A(i,e,l){const o={},r=f(i,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const d=f(i,["pageToken"]);e!==void 0&&d!=null&&p(e,["_query","pageToken"],d);const u=f(i,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),o}function FA(i,e){const l={},o=f(i,["config"]);return o!=null&&BA(o,l),l}function YA(i,e){const l={},o=f(i,["config"]);return o!=null&&$A(o,l),l}function JA(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&p(l,["nextPageToken"],r);const d=f(i,["tunedModels"]);if(d!=null){let u=d;Array.isArray(u)&&(u=u.map(h=>$b(h))),p(l,["tuningJobs"],u)}return l}function XA(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["nextPageToken"]);r!=null&&p(l,["nextPageToken"],r);const d=f(i,["tuningJobs"]);if(d!=null){let u=d;Array.isArray(u)&&(u=u.map(h=>Mu(h))),p(l,["tuningJobs"],u)}return l}function KA(i,e){const l={},o=f(i,["name"]);o!=null&&p(l,["model"],o);const r=f(i,["name"]);return r!=null&&p(l,["endpoint"],r),l}function QA(i,e){const l={};if(f(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(i,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>d)),p(l,["examples","examples"],r)}return l}function WA(i,e,l){const o={};let r=f(l,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(i,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(i,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(i,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let d=f(l,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const u=f(i,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(d==="PREFERENCE_TUNING"){const u=f(i,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(d==="DISTILLATION"){const u=f(i,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function $b(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["name"]);r!=null&&p(l,["name"],r);const d=f(i,["state"]);d!=null&&p(l,["state"],ab(d));const u=f(i,["createTime"]);u!=null&&p(l,["createTime"],u);const h=f(i,["tuningTask","startTime"]);h!=null&&p(l,["startTime"],h);const g=f(i,["tuningTask","completeTime"]);g!=null&&p(l,["endTime"],g);const m=f(i,["updateTime"]);m!=null&&p(l,["updateTime"],m);const y=f(i,["description"]);y!=null&&p(l,["description"],y);const v=f(i,["baseModel"]);v!=null&&p(l,["baseModel"],v);const S=f(i,["_self"]);return S!=null&&p(l,["tunedModel"],KA(S)),l}function Mu(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["name"]);r!=null&&p(l,["name"],r);const d=f(i,["state"]);d!=null&&p(l,["state"],ab(d));const u=f(i,["createTime"]);u!=null&&p(l,["createTime"],u);const h=f(i,["startTime"]);h!=null&&p(l,["startTime"],h);const g=f(i,["endTime"]);g!=null&&p(l,["endTime"],g);const m=f(i,["updateTime"]);m!=null&&p(l,["updateTime"],m);const y=f(i,["error"]);y!=null&&p(l,["error"],y);const v=f(i,["description"]);v!=null&&p(l,["description"],v);const S=f(i,["baseModel"]);S!=null&&p(l,["baseModel"],S);const N=f(i,["tunedModel"]);N!=null&&p(l,["tunedModel"],N);const C=f(i,["preTunedModel"]);C!=null&&p(l,["preTunedModel"],C);const E=f(i,["supervisedTuningSpec"]);E!=null&&p(l,["supervisedTuningSpec"],E);const w=f(i,["preferenceOptimizationSpec"]);w!=null&&p(l,["preferenceOptimizationSpec"],w);const I=f(i,["distillationSpec"]);I!=null&&p(l,["distillationSpec"],I);const H=f(i,["tuningDataStats"]);H!=null&&p(l,["tuningDataStats"],H);const _=f(i,["encryptionSpec"]);_!=null&&p(l,["encryptionSpec"],_);const P=f(i,["partnerModelTuningSpec"]);P!=null&&p(l,["partnerModelTuningSpec"],P);const M=f(i,["customBaseModel"]);M!=null&&p(l,["customBaseModel"],M);const j=f(i,["experiment"]);j!=null&&p(l,["experiment"],j);const z=f(i,["labels"]);z!=null&&p(l,["labels"],z);const B=f(i,["outputUri"]);B!=null&&p(l,["outputUri"],B);const q=f(i,["pipelineJob"]);q!=null&&p(l,["pipelineJob"],q);const G=f(i,["serviceAccount"]);G!=null&&p(l,["serviceAccount"],G);const Q=f(i,["tunedModelDisplayName"]);Q!=null&&p(l,["tunedModelDisplayName"],Q);const F=f(i,["veoTuningSpec"]);return F!=null&&p(l,["veoTuningSpec"],F),l}function ZA(i,e){const l={},o=f(i,["sdkHttpResponse"]);o!=null&&p(l,["sdkHttpResponse"],o);const r=f(i,["name"]);r!=null&&p(l,["name"],r);const d=f(i,["metadata"]);d!=null&&p(l,["metadata"],d);const u=f(i,["done"]);u!=null&&p(l,["done"],u);const h=f(i,["error"]);return h!=null&&p(l,["error"],h),l}function hu(i,e){const l={},o=f(i,["gcsUri"]);o!=null&&p(l,["validationDatasetUri"],o);const r=f(i,["vertexDatasetResource"]);return r!=null&&p(l,["validationDatasetUri"],r),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eM extends dn{constructor(e){super(),this.apiClient=e,this.list=async(l={})=>new fs(rn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(l),l),this.get=async l=>await this.getInternal(l),this.tune=async l=>{var o;if(this.apiClient.isVertexAI())if(l.baseModel.startsWith("projects/")){const r={tunedModelName:l.baseModel};!((o=l.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=l.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},l),{preTunedModel:r});return d.baseModel=void 0,await this.tuneInternal(d)}else{const r=Object.assign({},l);return await this.tuneInternal(r)}else{const r=Object.assign({},l),d=await this.tuneMldevInternal(r);let u="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?u=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(u=d.name.split("/operations/")[0]),{name:u,state:bu.JOB_STATE_QUEUED}}}}async getInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=qA(e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>Mu(y))}else{const m=VA(e);return h=ye("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>$b(y))}}async listInternal(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=YA(e);return h=ye("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=XA(y),S=new $g;return Object.assign(S,v),S})}else{const m=FA(e);return h=ye("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=JA(y),S=new $g;return Object.assign(S,v),S})}}async cancel(e){var l,o,r,d;let u,h="",g={};if(this.apiClient.isVertexAI()){const m=LA(e);return h=ye("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=PA(y),S=new Fg;return Object.assign(S,v),S})}else{const m=IA(e);return h=ye("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(y=>y.json().then(v=>{const S=v;return S.sdkHttpResponse={headers:y.headers},S})),u.then(y=>{const v=zA(y),S=new Fg;return Object.assign(S,v),S})}}async tuneInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI()){const h=GA(e,e);return d=ye("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>Mu(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var l,o;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HA(e);return d=ye("tunedModels",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>ZA(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tM{async download(e,l){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iM=1024*1024*8,nM=3,sM=1e3,lM=2,yr="x-goog-upload-status";async function oM(i,e,l){var o;const r=await Fb(i,e,l),d=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[yr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function aM(i,e,l){var o;const r=await Fb(i,e,l),d=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[yr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=tb(d),h=new Fu;return Object.assign(h,u),h}async function Fb(i,e,l){var o,r;let d=0,u=0,h=new vu(new Response),g="upload";for(d=i.size;u<d;){const m=Math.min(iM,d-u),y=i.slice(u,u+m);u+m>=d&&(g+=", finalize");let v=0,S=sM;for(;v<nM&&(h=await l.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[yr]));)v++,await cM(S),S=S*lM;if(u+=m,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[yr])!=="active")break;if(d<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function rM(i){return{size:i.size,type:i.type}}function cM(i){return new Promise(e=>setTimeout(e,i))}class dM{async upload(e,l,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oM(e,l,o)}async uploadToFileSearchStore(e,l,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aM(e,l,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM{create(e,l,o){return new fM(e,l,o)}}class fM{constructor(e,l,o){this.url=e,this.headers=l,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y0="x-goog-api-key";class pM{constructor(e){this.apiKey=e}async addAuthHeaders(e,l){if(e.get(y0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(y0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mM="gl-node/";class hM{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const l=this.httpOptions;l!=null&&l.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new kt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:l==null?void 0:l.timeout,maxRetries:(e=l==null?void 0:l.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=o.interactions,this._interactions}constructor(e){var l;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(l=e.vertexai)!==null&&l!==void 0?l:!1,this.apiKey=e.apiKey;const o=iC(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new pM(this.apiKey);this.apiClient=new rj({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:mM+"web",uploader:new dM,downloader:new tM}),this.models=new _j(this.apiClient),this.live=new Sj(this.apiClient,r,new uM),this.batches=new Dw(this.apiClient),this.chats=new mk(this.models,this.apiClient),this.caches=new uk(this.apiClient),this.files=new kk(this.apiClient),this.operations=new Ej(this.apiClient),this.authTokens=new Bj(this.apiClient),this.tunings=new eM(this.apiClient),this.fileSearchStores=new Wj(this.apiClient)}}const xM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.themes&&Array.isArray(e.themes)&&(e.themes.forEach(r=>l.lifeDispatch.addTheme(r)),o.push(`${e.themes.length} Themes`),e.themes.length>0&&setTimeout(()=>l.lifeDispatch.setTheme(e.themes[0].id),500))},gM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.skills&&Array.isArray(e.skills)&&(e.skills.forEach(r=>{l.skillDispatch.addSkill(r.title,r.relatedStats,r.description)}),o.push(`${e.skills.length} Skills`))},ef=i=>!i||!Array.isArray(i)?[]:i.map((e,l)=>{const o=typeof e=="string"?e:e.title,r=typeof e=="object"&&e.isCompleted?e.isCompleted:!1;return{id:`st_ai_${Date.now()}_${l}`,title:o||"Unknown Step",isCompleted:r}}),tf=i=>!i||!Array.isArray(i)?[]:i.map((e,l)=>({id:`rem_ai_${Date.now()}_${l}`,minutesBefore:e,isSent:!1})),bM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.habits&&Array.isArray(e.habits)&&(e.habits.forEach(r=>{let d=r.type||"daily",u=r.specificDays,h=r.intervalValue,g=r.pattern;r.frequency&&(d=r.frequency.type||d,u=r.frequency.specificDays||u,h=r.frequency.intervalValue||h,g=r.frequency.matrixPattern||g);const m=ef(r.subtasks),y=tf(r.reminders);r.id&&r.id.startsWith("h_")?l.habitDispatch.updateHabit(r.id,{title:r.title,description:r.description,difficulty:r.difficulty,stat:r.stat,skillId:r.skillId,type:d,specificDays:u,intervalValue:h,pattern:g,subtasks:m,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,scheduledTime:r.scheduledTime,reminders:y,dailyTarget:r.dailyTarget,history:r.history,streak:r.streak}):l.habitDispatch.addHabit({title:r.title,description:r.description,difficulty:r.difficulty||"normal",stat:r.stat||"DIS",skillId:r.skillId,type:d,specificDays:u,intervalValue:h,pattern:g,subtasks:m,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,scheduledTime:r.scheduledTime,reminders:y,dailyTarget:r.dailyTarget||1})}),o.push(`${e.habits.length} Habits processed`))},yM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.raids&&Array.isArray(e.raids)&&(e.raids.forEach(r=>{const d=(r.steps||[]).map((u,h)=>({id:u.id||`rs_ai_${Date.now()}_${h}`,title:typeof u=="string"?u:u.title,notes:u.notes||"",isCompleted:u.isCompleted||!1,isLocked:u.isLocked!==void 0?u.isLocked:h>0,scheduledTime:u.scheduledTime,deadline:u.deadline,reminders:tf(u.reminders),isTimed:!!u.durationMinutes,durationMinutes:u.durationMinutes,difficulty:u.difficulty,stat:u.stat,subtasks:ef(u.subtasks)}));r.id&&r.id.startsWith("rd_")?(l.raidDispatch.updateRaid(r.id,{title:r.title,description:r.description,difficulty:r.difficulty,stats:r.stats,deadline:r.deadline,isCampaign:r.isCampaign}),d.length>0&&l.raidDispatch.mergeRaidSteps(r.id,d)):l.raidDispatch.addRaid({title:r.title,description:r.description,difficulty:r.difficulty||"hard",stats:r.stats||["STR"],deadline:r.deadline,steps:d,isCampaign:r.isCampaign||void 0})}),o.push(`${e.raids.length} Ops`))},vM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.tasks&&Array.isArray(e.tasks)&&(e.tasks.forEach(r=>{const d=ef(r.subtasks),u=tf(r.reminders);r.id&&r.id.startsWith("t_")?l.taskDispatch.updateTask(r.id,{title:r.title,description:r.description,difficulty:r.difficulty,stat:r.stat,energyLevel:r.energyLevel,isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,deadline:r.deadline,scheduledTime:r.scheduledTime,subtasks:d,reminders:u,isCampaign:r.isCampaign}):l.taskDispatch.addTask({title:r.title,description:r.description,difficulty:r.difficulty||"normal",stat:r.stat||"STR",energyLevel:r.energyLevel||"medium",isTimed:!!r.durationMinutes,durationMinutes:r.durationMinutes,deadline:r.deadline,scheduledTime:r.scheduledTime,subtasks:d,reminders:u,isCampaign:r.isCampaign||!1})}),o.push(`${e.tasks.length} Missions`))},SM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.storeItems&&e.storeItems.length>0&&(l.shopDispatch.addStoreItems(e.storeItems),o.push(`${e.storeItems.length} Rewards`))},NM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.badges&&Array.isArray(e.badges)&&(e.badges.forEach(r=>{r.id||(r.id=`bdg_ai_${Date.now()}_${Math.random().toString(36).substr(2,5)}`),l.lifeDispatch.addBadge(r)}),o.push(`${e.badges.length} Badges`))},TM=i=>{const{payload:e,dispatchers:l,summary:o}=i;e.laws&&Array.isArray(e.laws)&&(e.laws.forEach(r=>{l.taskDispatch.addLaw(r.title||"Unknown Law",r.penaltyType||"gold",r.penaltyValue||50,r.statTarget||void 0)}),o.push(`${e.laws.length} Laws`))},nf={MAX_ITEMS_PER_TYPE:50,MAX_TEXT_LENGTH:500,MAX_NUMBER_VALUE:1e6},v0=i=>i?i.replace(/[<>]/g,"").trim().slice(0,nf.MAX_TEXT_LENGTH):"",CM=i=>typeof i!="number"||isNaN(i)?0:Math.min(Math.max(0,i),nf.MAX_NUMBER_VALUE),wM=i=>{const e={meta:i.meta||{}},l=(o,r)=>!o||!Array.isArray(o)?void 0:o.slice(0,nf.MAX_ITEMS_PER_TYPE).map(u=>{const h={};for(const g in u)typeof u[g]=="string"?h[g]=v0(u[g]):typeof u[g]=="number"?h[g]=CM(u[g]):typeof u[g]=="boolean"?h[g]=u[g]:Array.isArray(u[g])?h[g]=u[g].slice(0,20).map(m=>typeof m=="string"?v0(m):m):typeof u[g]=="object"&&u[g]!==null&&(h[g]=u[g]);return h});return i.tasks&&(e.tasks=l(i.tasks)),i.habits&&(e.habits=l(i.habits)),i.raids&&(e.raids=l(i.raids)),i.skills&&(e.skills=l(i.skills)),i.storeItems&&(e.storeItems=l(i.storeItems)),i.badges&&(e.badges=l(i.badges)),i.themes&&(e.themes=l(i.themes)),i.laws&&(e.laws=l(i.laws)),e},kM=(i,e)=>{var o;const{lifeDispatch:l}=e;try{const r=i.replace(/```json/g,"").replace(/```/g,"").trim(),d=JSON.parse(r),u=wM(d),h={payload:u,dispatchers:e,summary:[]};xM(h),gM(h),bM(h),yM(h),vM(h),SM(h),NM(h),TM(h);const g=((o=u.meta)==null?void 0:o.packName)||"Unknown Protocol";return h.summary.length===0?{success:!1,message:"Warning: Valid JSON but no recognizable data found."}:(l.addToast(`Injecting: ${g}...`,"level-up"),{success:!0,message:`SECURE INJECTION SUCCESS: ${g}.
Verified & Added: ${h.summary.join(", ")}.`})}catch(r){return console.error("Injection Failed:",r),{success:!1,message:`SECURITY BLOCK: Invalid Data Structure.
${r.message}`}}},Yb=({onClose:i})=>{var B;const{state:e,dispatch:l}=ke(),{taskDispatch:o}=Kt(),{habitState:r,habitDispatch:d}=Qt(),{raidState:u,raidDispatch:h}=Ii(),{skillDispatch:g}=vt(),{shopDispatch:m}=jr(),{campaignDispatch:y}=ul(),[v,S]=U.useState(""),[N,C]=U.useState("idle"),[E,w]=U.useState("System Ready. Paste JSON Code or Upload Backup File."),I=U.useRef(null),H=q=>{var F;const G=(F=q.target.files)==null?void 0:F[0];if(!G)return;const Q=new FileReader;Q.onload=ae=>{var L;const X=(L=ae.target)==null?void 0:L.result;S(X),w(`File Loaded: ${G.name}
Ready to Execute.`),C("idle")},Q.readAsText(G)},_=()=>{try{if(!v.trim())return;const q=JSON.parse(v);S(JSON.stringify(q,null,2)),w("JSON Formatted. Structure Valid."),C("idle")}catch{w("Format Error: Invalid JSON Syntax."),C("error")}},P=()=>{S(""),w("Buffer Cleared."),C("idle")},M=q=>{var X;const G=r.habits.map(L=>L.title).join(", "),Q=u.raids.map(L=>L.title).join(", "),F=e.badgesRegistry.map(L=>L.name).join(", "),ae=((X=taskState.laws)==null?void 0:X.map(L=>L.title).join(", "))||"";return`
        ROLE: You are the "Refiner Node" (QA & Compiler).
        TASK: Validate and Fix the INCOMING JSON Payload for the LifeOS System.
        
        CURRENT DATABASE SNAPSHOT:
        - Existing Habits: [${G}]
        - Existing Raids: [${Q}]
        - Existing Badges: [${F}]
        - Existing Laws: [${ae}]

        INCOMING JSON:
        ${q}

        RULES:
        1. BADGE LINKAGE: If the JSON adds a Badge with 'triggerType': 'habit' or 'raid', verify the 'metricKey' matches an EXACT title in 'Existing Habits/Raids' OR a new habit/raid being added in this same JSON.
           - If there's a mismatch (e.g. Badge says "Drink Water" but Habit is "Drinking Water"), UPDATE the Badge's 'metricKey' to match the Habit exactly.
           - If the metricKey refers to a generic term, try to match it to the closest existing item.
        
        2. LAWS & CONSEQUENCES:
           - If the input describes a rule, punishment, or consequence (e.g., "If I upset my girlfriend, deduct Emotion points"), convert it into a "laws" array.
           - Structure: { "title": "Short Title", "penaltyType": "gold" | "xp" | "stat" | "honor", "penaltyValue": number, "statTarget": "STR" | "INT" | "DIS" | "EMT" | "PCE" | "CAM" | "CRT" (only if type is stat) }
           - Example: "If I miss prayer, lose 50 Honor" -> { "laws": [{ "title": "Missed Prayer", "penaltyType": "honor", "penaltyValue": 50 }] }

        3. STRUCTURE: Ensure strict valid JSON. No trailing commas.
        4. OUTPUT:
           - Return ONLY the clean, fixed JSON string. No markdown code blocks. No explanations.
           - If the JSON is fundamentally broken and unfixable, return: "ERROR: [Reason]"
        `},j=async()=>{var q;if(!v.trim()){w("Error: Empty Payload.");return}try{const G=JSON.parse(v);if(G.user&&G.badgesRegistry){C("restoring"),w(` FULL SYSTEM BACKUP DETECTED.
Initiating Total Recall Protocol...`),setTimeout(()=>{l.importData(v),G.tasks&&o.restoreData(G.tasks,G.taskCategories||[],G.laws||[]),G.habits&&d.restoreData(G.habits,G.habitCategories||[]),G.raids&&h.restoreData(G.raids),G.skills&&g.restoreData(G.skills),G.storeItems&&m.restoreData(G.storeItems),G.campaign&&y.restoreData(G.campaign),C("success"),w(` SYSTEM RESTORED SUCCESSFULLY.
Rebooting UI...`),setTimeout(i,2e3)},1e3);return}let Q=v;const F=e.user.preferences.apiKeys,ae=e.user.preferences.enableRefiner;if(F!=null&&F.refiner&&ae)try{C("refining"),w(" Refiner Node Active: Validating Logic...");const L=new hM({apiKey:F.refiner}),k=M(v),V=(q=(await L.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:"Fix this payload."}]}],config:{systemInstruction:k}})).text)==null?void 0:q.trim();if(V&&V.startsWith("ERROR:")){C("error"),w(`Refiner Blocked Injection:
${V}`);return}else if(V){const te=V.match(/```json\n([\s\S]*?)\n```/)||V.match(/{[\s\S]*}/);Q=te?te[1]||te[0]:V,S(Q),w(" Payload Refined & Optimized.")}}catch(L){console.error("Refiner failed",L),w(" Refiner Offline. Attempting Raw Injection...")}const X=kM(Q,{lifeDispatch:l,taskDispatch:o,habitDispatch:d,raidDispatch:h,skillDispatch:g,shopDispatch:m});X.success?(C("success"),w(X.message),setTimeout(i,2500)):(C("error"),w(X.message))}catch(G){C("error"),w("JSON Parse Error: "+G.message)}},z=((B=e.user.preferences.apiKeys)==null?void 0:B.refiner)&&e.user.preferences.enableRefiner;return n.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right fade-in duration-300 h-full flex flex-col",children:[n.jsxs("div",{className:"bg-life-black border border-life-gold/20 p-3 rounded-lg flex items-start gap-3 shadow-[0_0_10px_rgba(251,191,36,0.1)]",children:[n.jsx("div",{className:"p-2 bg-life-gold/10 rounded-md text-life-gold animate-pulse-slow",children:n.jsx(Sr,{size:18})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"text-xs font-black uppercase text-life-gold tracking-widest mb-1",children:"Data Uplink"}),n.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-bold uppercase bg-life-easy/10 text-life-easy px-1.5 py-0.5 rounded border border-life-easy/20",children:[n.jsx(cr,{size:8})," Protected"]})]}),n.jsxs("div",{className:"text-[10px] text-life-muted leading-relaxed",children:["Paste ",n.jsx("b",{children:"Backup JSON"})," to restore, or ",n.jsx("b",{children:"AI Code"})," to inject items. The system will auto-detect the type.",z&&n.jsxs("span",{className:"block text-life-easy/80 mt-1 flex items-center gap-1",children:[n.jsx(dr,{size:8})," Refiner Node Active"]})]})]})]}),n.jsxs("div",{className:"flex-1 relative group flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-end mb-2",children:[n.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:["Input Stream (",v.length," chars)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"file",ref:I,onChange:H,accept:".json",className:"hidden"}),n.jsxs("button",{onClick:()=>{var q;return(q=I.current)==null?void 0:q.click()},className:"text-[9px] flex items-center gap-1 text-life-black bg-life-easy hover:bg-emerald-400 px-3 py-1 rounded font-bold transition-all shadow-[0_0_10px_rgba(16,185,129,0.2)]",children:[n.jsx(fr,{size:10})," Upload File"]}),n.jsxs("button",{onClick:_,className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-gold bg-life-black px-2 py-1 rounded border border-life-muted/20 hover:border-life-gold/30 transition-all",children:[n.jsx(wr,{size:10})," Format"]}),n.jsxs("button",{onClick:P,className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-hard bg-life-black px-2 py-1 rounded border border-life-muted/20 hover:border-life-hard/30 transition-all",children:[n.jsx(Hu,{size:10})," Clear"]})]})]}),n.jsx("div",{className:"relative flex-1",children:n.jsx("textarea",{value:v,onChange:q=>S(q.target.value),placeholder:`// PASTE HERE:
// 1. Full Backup JSON (to Restore)
// 2. AI Code (to Inject)`,className:"w-full h-full min-h-[180px] bg-[#050505] text-life-easy font-mono text-[10px] p-4 rounded-lg border border-life-muted/30 focus:border-life-gold focus:outline-none resize-none shadow-inner leading-relaxed",spellCheck:!1,maxLength:2e5})})]}),n.jsxs("div",{className:`p-2 rounded border font-mono text-[9px] whitespace-pre-wrap transition-colors duration-300 ${N==="error"?"bg-life-hard/10 border-life-hard text-life-hard":N==="success"?"bg-life-easy/10 border-life-easy text-life-easy":N==="refining"||N==="restoring"?"bg-life-gold/10 border-life-gold text-life-gold":"bg-life-black border-life-muted/20 text-life-muted"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-50 border-b border-white/10 pb-1",children:[n.jsx(Yt,{size:10}),n.jsx("span",{children:"SYSTEM LOG"})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"opacity-50 mr-2",children:[new Date().toLocaleTimeString(),":"]}),E]})]}),n.jsxs("button",{onClick:j,disabled:N==="refining"||N==="restoring",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all
                    ${N==="success"?"bg-life-easy text-black":"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]"}
                    ${N==="refining"||N==="restoring"?"opacity-70 cursor-wait":""}
                `,children:[N==="success"?n.jsx(Gi,{size:16}):N==="refining"||N==="restoring"?n.jsx(gN,{size:16,className:"animate-spin"}):n.jsx(fr,{size:16}),N==="success"?"Operation Complete":N==="refining"?"Refining Logic...":N==="restoring"?"Restoring System...":"Execute Data"]}),N==="error"&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-life-hard opacity-70",children:[n.jsx(rr,{size:10})," Operation Halted. Check Logs."]})]})},_M=()=>{const{state:i,dispatch:e}=ke(),{modalData:l}=i.ui,[o,r]=U.useState(()=>l&&l.defaultType?l.defaultType:"mission"),[d,u]=U.useState(!1),h=()=>{u(!0),setTimeout(()=>{e.setModal("none")},200)},g=()=>{e.setModal("none")};return n.jsx("div",{onClick:h,className:`fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 transition-all duration-200 ${d?"opacity-0 pointer-events-none":"animate-in fade-in bg-black/80 backdrop-blur-sm"}`,children:n.jsxs("div",{onClick:m=>m.stopPropagation(),className:`
            bg-life-paper w-full max-w-lg rounded-t-2xl sm:rounded-2xl border border-life-muted/20 shadow-2xl overflow-hidden flex flex-col max-h-[95vh]
            transition-transform duration-300 pb-[env(safe-area-inset-bottom)]
            ${d?"translate-y-full sm:scale-95":"animate-in slide-in-from-bottom-full sm:zoom-in-95"}
        `,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-black/50 shrink-0",children:[n.jsxs("h3",{className:"text-lg font-black tracking-tight text-life-text flex items-center gap-2",children:[n.jsx("span",{className:"text-life-gold",children:"///"})," COMMAND LINE"]}),n.jsx("button",{onClick:h,className:"w-8 h-8 rounded-full flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/20 transition-all",children:n.jsx(Ie,{size:20})})]}),n.jsx("div",{className:"px-4 py-3 bg-life-black/40 border-b border-life-muted/10 shrink-0",children:n.jsxs("div",{className:"flex p-1 bg-life-black rounded-xl border border-life-muted/20 overflow-x-auto no-scrollbar gap-1",children:[n.jsxs("button",{onClick:()=>r("mission"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${o==="mission"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[n.jsx(Ri,{size:14})," Mission"]}),n.jsxs("button",{onClick:()=>r("protocol"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${o==="protocol"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[n.jsx(Di,{size:14})," Protocol"]}),n.jsxs("button",{onClick:()=>r("operation"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${o==="operation"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[n.jsx(cs,{size:14})," Raid"]}),n.jsxs("button",{onClick:()=>r("injection"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${o==="injection"?"bg-life-easy/20 text-life-easy border border-life-easy/30 shadow-sm":"text-life-muted hover:text-life-easy"}`,children:[n.jsx(Yt,{size:14})," Inject"]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-[300px]",children:[o==="mission"&&n.jsx(GT,{onClose:g}),o==="protocol"&&n.jsx(BT,{onClose:g}),o==="operation"&&n.jsx(FT,{onClose:g}),o==="injection"&&n.jsx(Yb,{onClose:g})]})]})})},EM=()=>{const{state:i,dispatch:e}=ke(),{user:l}=i,o=()=>{e.setModal("none")};return n.jsx("div",{onClick:o,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-500",children:n.jsxs("div",{onClick:r=>r.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center animate-in zoom-in-50 slide-in-from-bottom-10 duration-700",children:[n.jsx("div",{className:"absolute inset-0 bg-life-gold/20 blur-[100px] rounded-full animate-pulse-slow pointer-events-none"}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx("div",{className:"w-24 h-24 rounded-full bg-life-gold border-4 border-life-black shadow-[0_0_50px_rgba(251,191,36,0.6)] flex items-center justify-center animate-bounce",children:n.jsx(al,{size:48,className:"text-life-black",strokeWidth:2.5})}),n.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center animate-spin",children:n.jsx(dr,{size:16,className:"text-life-gold"})}),n.jsx("div",{className:"absolute -bottom-2 -left-2 w-8 h-8 bg-life-crimson rounded-full flex items-center justify-center animate-pulse",children:n.jsx(kr,{size:16,className:"text-white"})})]}),n.jsx("h2",{className:"text-5xl font-black text-white tracking-tighter italic mb-2 drop-shadow-lg",children:"LEVEL UP!"}),n.jsxs("div",{className:"text-2xl font-mono font-bold text-life-gold mb-8 tracking-widest border px-4 py-1 rounded border-life-gold/50 bg-life-gold/10",children:["LEVEL ",l.level]}),n.jsxs("div",{className:"w-full bg-life-paper/80 border border-life-gold/30 rounded-xl p-6 mb-8 shadow-2xl backdrop-blur-md",children:[n.jsx("h3",{className:"text-xs text-life-muted uppercase font-bold tracking-widest mb-4 text-center",children:"Rewards Acquired"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[n.jsx("span",{className:"text-sm font-bold text-life-gold",children:"Gold Currency"}),n.jsx("span",{className:"text-sm font-mono text-white",children:"+100 G"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[n.jsx("span",{className:"text-sm font-bold text-life-diamond",children:"Shield Max Capacity"}),n.jsx("span",{className:"text-sm font-mono text-white",children:"REFILLED"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[n.jsx("span",{className:"text-sm font-bold text-life-easy",children:"XP Threshold"}),n.jsx("span",{className:"text-sm font-mono text-white",children:"INCREASED"})]})]})]}),n.jsxs("button",{onClick:o,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.4)] transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2",children:[n.jsx(Be,{size:20,strokeWidth:3}),"Evolve & Continue"]})]})})},jM=()=>{const{state:i,dispatch:e}=ke(),{user:l}=i,o=zu(l.streak),r=sr(l.streak),d=l.streak-r,u=100,h=10,g=u-h*2,m=g*2*Math.PI,y=Math.min(100,l.dailyXP/l.dailyTarget*100),v=m-y/100*m,S=y>=100,N=S?"#10b981":"#fbbf24",C={filter:S?"drop-shadow(0 0 10px rgba(16,185,129,0.6))":"drop-shadow(0 0 10px rgba(251,191,36,0.6))",transition:"stroke-dashoffset 1s ease-in-out, filter 0.5s ease"},E=new Date,w=E.getDay(),I=w===0?6:w-1,H=new Date(E);H.setDate(E.getDate()-I);const _=Array.from({length:7},(j,z)=>{var Q;const B=new Date(H);B.setDate(H.getDate()+z);const q=B.toISOString().split("T")[0];let G="future";if(z>I)G="future";else if(z===I)l.dailyXP>=l.dailyTarget?G="success":G="pending";else{const F=(Q=l.streakHistory)==null?void 0:Q[q];F?G=F:G="fail"}return{label:B.toLocaleDateString("en-US",{weekday:"narrow"}),date:B.getDate(),outcome:G}}),P=j=>{e.updateUser({pendingMode:j}),e.addToast(`Protocol Updated: ${j.toUpperCase()}`,"info")},M=()=>{e.setModal("none")};return n.jsx("div",{onClick:M,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:j=>j.stopPropagation(),className:"bg-life-black border border-life-gold/20 w-full max-w-sm rounded-[2rem] relative overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-8 duration-500 flex flex-col max-h-[90vh]",children:[n.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-full h-64 blur-[90px] rounded-full pointer-events-none transition-colors duration-1000 ${S?"bg-life-easy/5":"bg-life-gold/5"}`}),n.jsx("button",{onClick:M,className:"absolute top-5 right-5 text-life-muted hover:text-white transition-colors z-20 bg-black/40 rounded-full p-1.5 backdrop-blur-sm",children:n.jsx(Ie,{size:20})}),n.jsxs("div",{className:"p-6 flex flex-col items-center relative z-10 overflow-y-auto no-scrollbar",children:[n.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-life-muted mb-4 opacity-60",children:"System Integrity"}),n.jsxs("div",{className:"relative flex items-center justify-center mb-6",style:{width:u*2.2,height:u*2.2},children:[n.jsxs("svg",{height:u*2.2,width:u*2.2,className:"overflow-visible transform rotate-90",children:[n.jsx("circle",{stroke:"#1a1a1a",strokeWidth:h,fill:"transparent",r:g,cx:u*1.1,cy:u*1.1}),n.jsx("circle",{stroke:N,strokeWidth:h,strokeDasharray:m+" "+m,style:{strokeDashoffset:v,...C},strokeLinecap:"round",fill:"transparent",r:g,cx:u*1.1,cy:u*1.1})]}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:[n.jsx("div",{className:`text-6xl font-black drop-shadow-md flex items-center gap-1 leading-[0.8] tracking-tighter ${S?"text-life-easy":"text-life-gold"}`,children:l.streak}),n.jsxs("div",{className:"flex items-center gap-1.5 text-life-muted mt-2 mb-2",children:[n.jsx(Nr,{size:14,className:S?"fill-life-easy text-life-easy":"fill-life-gold text-life-gold"}),n.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"Days Active"})]}),n.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded border text-[9px] font-black uppercase tracking-widest ${o.phaseColor} bg-black/50 backdrop-blur-sm`,children:[l.dailyXP," / ",l.dailyTarget," XP"]})]})]}),n.jsxs("div",{className:"w-full mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[n.jsx(kr,{size:14}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Evolution Gate"})]}),n.jsxs("span",{className:"text-[9px] font-mono text-life-gold",children:[o.progress,"% to Next"]})]}),n.jsxs("div",{className:"relative py-4 bg-life-black/30 rounded-xl border border-life-muted/10",children:[n.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-life-muted/10 -translate-y-1/2 z-0"}),n.jsx("div",{className:"flex items-center gap-4 relative z-10 overflow-x-auto no-scrollbar pb-2 px-4 snap-x",children:Lt.map(j=>{const z=l.streak>=j,B=!z&&l.streak<j&&l.streak>=(Lt[Lt.indexOf(j)-1]||0),q=j===o.prevCheckpoint;return n.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[40px] snap-center shrink-0",children:[n.jsxs("div",{className:`
                                                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all relative
                                                    ${z?"bg-life-gold border-life-gold text-life-black shadow-[0_0_10px_rgba(251,191,36,0.3)]":B?"bg-life-black border-life-gold text-life-gold animate-pulse scale-110 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"bg-life-black border-life-muted/20 text-life-muted/30"}
                                                `,children:[z?n.jsx(Gi,{size:14}):B?n.jsx(cs,{size:14}):n.jsx(ds,{size:12}),q&&n.jsx("div",{className:"absolute -bottom-2 -right-2 bg-life-black border border-life-muted/50 rounded-full p-0.5",title:"Safety Net",children:n.jsx(ot,{size:8,className:"text-life-text"})})]}),n.jsx("span",{className:`text-[9px] font-mono font-bold ${z||B?"text-life-text":"text-life-muted/30"}`,children:j})]},j)})})]})]}),n.jsxs("div",{className:"w-full bg-life-black rounded-lg p-3 border border-life-muted/20 flex items-start gap-3 relative overflow-hidden group mb-6",children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-hard/50"}),n.jsx(cn,{size:16,className:"text-life-hard shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-[10px] font-bold uppercase text-life-muted",children:"Failure Consequence"}),n.jsxs("span",{className:"text-[10px] font-black text-life-hard uppercase",children:["Streak -",d]})]}),n.jsxs("div",{className:"text-xs text-life-text",children:["If daily target is missed, streak falls to ",n.jsx("span",{className:"font-mono font-bold text-life-gold",children:r})," (Safety Net)."]})]})]}),n.jsxs("div",{className:"w-full mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3 px-2",children:[n.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Weekly Survival Log"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-life-diamond/10 border border-life-diamond/20",children:[n.jsx(ot,{size:12,className:"text-life-diamond fill-life-diamond/20"}),n.jsxs("span",{className:"text-[10px] text-life-diamond font-bold font-mono",children:[l.shields," ",n.jsx("span",{className:"text-life-diamond/50 text-[8px] uppercase",children:"Stock"})]})]})})]}),n.jsx("div",{className:"flex justify-between bg-life-black/50 p-2.5 rounded-2xl border border-life-muted/10 backdrop-blur-sm",children:_.map((j,z)=>n.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[n.jsxs("div",{className:`
                                        w-7 h-7 rounded-full flex items-center justify-center border transition-all shadow-sm
                                        ${j.outcome==="success"?"bg-life-easy/10 border-life-easy text-life-easy shadow-[0_0_8px_rgba(16,185,129,0.15)]":j.outcome==="shield"?"bg-life-diamond/10 border-life-diamond text-life-diamond":j.outcome==="fail"?"bg-life-hard/10 border-life-hard text-life-hard":j.outcome==="pending"?"bg-life-gold/5 border-life-gold text-life-gold animate-pulse":"bg-transparent border-transparent text-life-muted/10"}
                                    `,children:[j.outcome==="success"&&n.jsx(Gi,{size:12}),j.outcome==="shield"&&n.jsx(ot,{size:12}),j.outcome==="fail"&&n.jsx(kS,{size:12}),j.outcome==="pending"&&n.jsx("div",{className:"w-1.5 h-1.5 bg-life-gold rounded-full shadow-[0_0_5px_currentColor]"}),j.outcome==="future"&&n.jsx("div",{className:"w-1 h-1 bg-life-muted/10 rounded-full"})]}),n.jsx("span",{className:`text-[7px] font-black uppercase tracking-wider ${j.outcome==="future"?"text-life-muted/20":"text-life-muted"}`,children:j.label[0]})]},z))})]}),n.jsxs("div",{className:"w-full pt-6 border-t border-life-muted/10",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-5 text-life-muted/60",children:[n.jsx(We,{size:12}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em]",children:"Next Cycle Protocol"})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.values(Ct).map(j=>{const z=l.pendingMode===j,q={[Ct.EASY]:{color:"text-life-easy",border:"border-life-easy",shadow:"shadow-life-easy/20"},[Ct.NORMAL]:{color:"text-life-normal",border:"border-life-normal",shadow:"shadow-life-normal/20"},[Ct.HARD]:{color:"text-life-hard",border:"border-life-hard",shadow:"shadow-life-hard/20"}}[j];let G="",Q=Lu[j],F=50;return j===Ct.EASY&&(G="Recover",F=50),j===Ct.NORMAL&&(G="Maintain",F=100),j===Ct.HARD&&(G="War",F=200),n.jsxs("button",{onClick:()=>P(j),className:`
                                            relative flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all duration-300
                                            ${z?`bg-transparent border-2 ${q.border} ${q.color} shadow-[0_0_20px_-5px] ${q.shadow} scale-105`:"bg-life-black border border-life-muted/10 text-life-muted/50 hover:border-life-muted/30 hover:text-life-muted"}
                                        `,children:[n.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1.5",children:G}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("span",{className:"text-sm font-black font-mono tracking-tight",children:[Q," XP"]}),n.jsxs("span",{className:"text-[9px] opacity-60 font-mono mt-0.5",children:["+",F," G"]})]}),z&&n.jsx("div",{className:`absolute top-2 right-2 w-1.5 h-1.5 rounded-full ${q.color.replace("text-","bg-")} shadow-[0_0_5px_currentColor] animate-pulse`})]},j)})})]})]})]})})},AM=({dateOverride:i,setDateOverride:e,handleDateChange:l})=>{const{state:o,dispatch:r}=ke(),[d,u]=U.useState(""),[h,g]=U.useState(""),m=(y,v)=>{const S=parseInt(d);if(!S||S<=0){r.addToast("Invalid Amount","error");return}if(!h.trim()){r.addToast("Reason Required","error");return}const C=S*(v==="add"?1:-1),E={},w=new Date().toISOString();y==="gold"?E.gold=o.user.gold+C:E.currentXP=o.user.currentXP+C;const I={id:`man_${Date.now()}`,itemId:"manual_override",title:`[${y.toUpperCase()}] ${h}`,cost:-C,timestamp:w};E.purchaseHistory=[I,...o.user.purchaseHistory||[]].slice(0,100),r.updateUser(E),r.addToast("Transaction Logged","success"),u(""),g("")};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h3",{className:"text-life-gold font-bold flex items-center gap-2",children:[n.jsx(rN,{size:14})," Manual Override"]}),n.jsxs("div",{className:"bg-life-black border border-life-muted/20 p-3 rounded-lg space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-[9px] text-life-muted uppercase font-bold block mb-1",children:"Reason"}),n.jsxs("div",{className:"flex items-center gap-2 bg-[#0a0a0a] border border-life-muted/30 rounded px-2",children:[n.jsx(dl,{size:10,className:"text-life-muted"}),n.jsx("input",{type:"text",value:h,onChange:y=>g(y.target.value),placeholder:"Reason...",className:"w-full bg-transparent p-2 text-xs outline-none"})]})]}),n.jsxs("div",{className:"w-1/3",children:[n.jsx("label",{className:"text-[9px] text-life-muted uppercase font-bold block mb-1",children:"Amount"}),n.jsx("input",{type:"number",value:d,onChange:y=>u(y.target.value),placeholder:"0",className:"w-full bg-[#0a0a0a] border border-life-muted/30 rounded p-2 text-xs outline-none text-center font-mono font-bold"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-[9px] text-center text-life-gold font-bold uppercase",children:"Gold"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("button",{onClick:()=>m("gold","add"),className:"flex-1 bg-life-gold/20 text-life-gold border border-life-gold/30 hover:bg-life-gold/30 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[n.jsx(gt,{size:12})," Add"]}),n.jsxs("button",{onClick:()=>m("gold","sub"),className:"flex-1 bg-life-black text-life-muted border border-life-muted/30 hover:text-red-400 hover:border-red-400 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[n.jsx(or,{size:12})," Sub"]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-[9px] text-center text-life-easy font-bold uppercase",children:"XP"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("button",{onClick:()=>m("xp","add"),className:"flex-1 bg-life-easy/20 text-life-easy border border-life-easy/30 hover:bg-life-easy/30 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[n.jsx(gt,{size:12})," Add"]}),n.jsxs("button",{onClick:()=>m("xp","sub"),className:"flex-1 bg-life-black text-life-muted border border-life-muted/30 hover:text-red-400 hover:border-red-400 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[n.jsx(or,{size:12})," Sub"]})]})]})]})]})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-life-muted/10",children:[n.jsxs("h3",{className:"text-life-muted font-bold flex items-center gap-2",children:[n.jsx(yt,{size:14})," Chronos"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"date",value:i,onChange:y=>e(y.target.value),className:"bg-life-black border border-life-muted/30 rounded p-2 text-white focus:border-life-gold outline-none flex-1"}),n.jsx("button",{onClick:l,className:"bg-life-muted/10 border border-life-muted/30 px-4 py-2 rounded hover:bg-life-muted/20 uppercase font-bold text-[10px]",children:"Shift Time"})]})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-life-muted/10",children:[n.jsxs("h3",{className:"text-red-500 font-bold flex items-center gap-2",children:[n.jsx(rr,{size:14})," Danger Zone"]}),n.jsxs("button",{onClick:()=>r.triggerDailyReset(),className:"w-full bg-red-900/20 border border-red-500/30 text-red-400 p-2 rounded hover:bg-red-900/30 flex items-center justify-center gap-2 uppercase font-bold",children:[n.jsx(Uu,{size:14})," Force Midnight Protocol"]}),n.jsxs("button",{onClick:()=>r.setModal("resetConfirm"),className:"w-full bg-red-900/20 border border-red-500/30 text-red-400 p-2 rounded hover:bg-red-900/30 flex items-center justify-center gap-2 uppercase font-bold",children:[n.jsx(rr,{size:14})," Wipe Save Data"]})]})]})},mo={commander:{title:"The Commander",role:"Strategic General & NLP Core",content:`/// CLASSIFIED: COMMANDER NODE MANUAL ///

1. OVERVIEW
The Commander is the central interface for the user. It is the only node that maintains conversational context (Memory). It acts as a router, deciding whether to handle a query itself or delegate it to a Specialist Node (Executor, Designer, etc.).

2. PERSONALITY PROFILE
- Tone: "The Godfather" / "Strategic General".
- Traits: Ruthless, Efficient, Protective, Authoritative.
- Language: Professional Arabic (Gulf/Saudi Dialect) or English (Based on toggle).

3. TRIGGERS & BEHAVIOR
- "Hello/Hi": Responds with status report.
- "Help/Guide": Explains the system.
- General Chat: Discusses productivity strategies.
- Complex Commands: If a user asks for multiple things ("Add a task AND change theme"), the Commander breaks this down or asks for clarification.

4. MEMORY PROTOCOL
- Storage: 'LIFE_OS_ORACLE_HISTORY' (Local Storage).
- Context Window: Sends last 20 messages to Gemini to maintain conversation flow.
- Reset: Can be purged via "Purge Context Memory" button.

5. DIRECTIVE
"If the user asks to create something, do NOT ask follow-up questions. Deploy defaults immediately."
`},executor:{title:"The Executor",role:"Tactical Injection Engine",content:`/// CLASSIFIED: EXECUTOR NODE MANUAL ///

1. OVERVIEW
The Executor is a "Silent Agent". It does not speak. It outputs raw JSON payloads to modify the application state directly. It handles Tasks, Habits, and Raids.

2. TRIGGER KEYWORDS
- Tasks: "Add task", "Mission", "Remind me to..."
- Habits: "New habit", "Protocol", "Routine..."
- Raids: "Start project", "Operation", "Plan a raid..."

3. JSON SCHEMA (TASKS)
{
  "tasks": [
    {
      "title": "String (Required)",
      "difficulty": "easy | normal | hard",
      "stat": "STR | INT | DIS | PCE | EMT | CAM | CRT",
      "energyLevel": "low | medium | high",
      "deadline": "YYYY-MM-DD",
      "subtasks": ["Step 1", "Step 2"]
    }
  ]
}

4. JSON SCHEMA (HABITS)
{
  "habits": [
    {
      "title": "String",
      "type": "daily | specific_days | interval",
      "stat": "DIS",
      "dailyTarget": 1
    }
  ]
}

5. ERROR HANDLING
If the Executor outputs invalid JSON, the "Refiner Node" (if active) attempts to repair syntax errors before injection.
`},designer:{title:"The Designer",role:"Visual Cortex & Theme Engine",content:`/// CLASSIFIED: DESIGNER NODE MANUAL ///

1. OVERVIEW
The Designer has full control over the CSS Variables and DOM styling of LifeOS. It can generate themes on the fly based on abstract descriptions (e.g., "Make it look like Cyberpunk 2077").

2. TRIGGER KEYWORDS
- "Change theme", "Colors", "Design", "Look like..."

3. INJECTION CAPABILITIES
- Colors: Modifies --color-life-black, --color-life-gold, etc.
- CSS: Can inject raw CSS blocks to change border-radius, fonts, or layout shapes.

4. JSON SCHEMA (THEMES)
{
  "themes": [
    {
      "id": "unique_id",
      "name": "Display Name",
      "colors": {
        "--color-life-black": "#000000",
        "--color-life-paper": "#111111",
        "--color-life-gold": "#FFD700",
        "--color-life-text": "#FFFFFF"
      },
      "customCss": "body { font-family: 'Courier New'; }"
    }
  ]
}

5. PERSISTENCE
Themes created by the Designer are saved to 'user.unlockedThemes' and persist across reloads.
`},observer:{title:"The Observer",role:"Data Analyst & Critic",content:`/// CLASSIFIED: OBSERVER NODE MANUAL ///

1. OVERVIEW
The Observer has read-only access to the entire User Profile (JSON). It analyzes Stats, Metrics, Streaks, and Badge History to provide tough love or strategic insights.

2. TRIGGER KEYWORDS
- "Analyze my stats", "How am I doing?", "Report", "Status"

3. DATA ACCESS LEVEL
- user.stats (STR, INT, DIS...)
- user.metrics (Total Tasks, Completion Rates)
- user.streakHistory (Calendar Heatmap)
- user.inventory (Items owned)

4. ANALYSIS MODES
- Roast Mode: Cruelly points out weaknesses (Low DIS stat).
- Coach Mode: Suggests which Skill Tree to focus on based on lowest stats.
- Prediction: Estimates time to next Level Up based on current XP velocity.

5. OUTPUT
Returns text-only analysis. Does not modify state.
`}},MM=()=>{var E;const{state:i,dispatch:e}=ke(),{campaignDispatch:l}=ul(),[o,r]=U.useState("system"),[d,u]=U.useState(""),[h,g]=U.useState(null);U.useEffect(()=>{i.ui.debugDate&&u(i.ui.debugDate.split("T")[0])},[i.ui.debugDate]);const m=()=>{if(!d)e.setDebugDate(null),e.addToast("Debug Time: Synced","info");else{const w=new Date(d);w.setHours(12,0,0,0),e.setDebugDate(w.toISOString()),l.updateStartDate(w.toISOString()),e.addToast(`Time Shift: ${d}`,"level-up")}},y=w=>{var H;const I=(H=w.target.files)==null?void 0:H[0];I&&e.setCustomAudio(I)},v=()=>{confirm(` PURGE NEURAL MEMORY?
This will erase the AI's conversation history. Context will be reset.`)&&(localStorage.removeItem("LIFE_OS_ORACLE_HISTORY"),window.dispatchEvent(new Event("oracle-memory-cleared")),e.addToast("Neural Memory Purged","success"))},S=()=>{if(!h)return;const w=mo[h],I=new Blob([w.content],{type:"text/plain"}),H=URL.createObjectURL(I),_=document.createElement("a");_.href=H,_.download=`Manual_${w.title.replace(/\s+/g,"_")}.txt`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(H),e.addToast("Manual Downloaded","success")},N=()=>{h&&(navigator.clipboard.writeText(mo[h].content),e.addToast("Manual Copied to Clipboard","success"))},C=(w,I,H)=>{const _=i.user.preferences[H];return n.jsxs("button",{onClick:()=>e.togglePreference(H),className:"w-full flex items-center justify-between p-3 rounded-lg bg-life-black border border-life-muted/20 hover:border-life-gold/50 transition-all group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:_?"text-life-gold":"text-life-muted",children:I}),n.jsx("span",{className:"text-[10px] font-bold text-life-text uppercase tracking-wider",children:w})]}),n.jsx("div",{className:`w-8 h-4 rounded-full relative transition-colors ${_?"bg-life-gold":"bg-life-muted/30"}`,children:n.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${_?"left-4.5":"left-0.5"}`})})]})};return n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-[#0a0a0a] border border-life-gold/30 w-full max-w-lg rounded-xl shadow-2xl flex flex-col h-[85vh] overflow-hidden font-mono text-xs",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-gold/20 bg-life-gold/5",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-gold",children:[n.jsx(Yt,{size:18}),n.jsx("span",{className:"font-black uppercase tracking-[0.2em] text-sm",children:"God Mode Shell"})]}),n.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-gold hover:text-white p-1",children:n.jsx(Ie,{size:20})})]}),n.jsx("div",{className:"flex border-b border-life-muted/10 overflow-x-auto no-scrollbar bg-black/40",children:[{id:"system",icon:n.jsx(JN,{size:12})},{id:"oracle",icon:n.jsx(xt,{size:12})},{id:"actions",icon:n.jsx(We,{size:12})},{id:"themes",icon:n.jsx(Dt,{size:12})},{id:"state",icon:n.jsx(er,{size:12})},{id:"log",icon:n.jsx(Yt,{size:12})},{id:"media",icon:n.jsx(ar,{size:12})}].map(w=>n.jsxs("button",{onClick:()=>{r(w.id),g(null)},className:`flex-1 min-w-[75px] py-4 flex flex-col items-center gap-1 uppercase font-black text-[9px] transition-all border-b-2 ${o===w.id?"bg-life-gold/10 text-life-gold border-life-gold":"text-life-muted border-transparent hover:text-life-silver"}`,children:[w.icon,w.id]},w.id))}),n.jsxs("div",{className:"flex-1 overflow-auto p-4 bg-[#050505] text-life-text/80",children:[o==="system"&&n.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-2",children:[n.jsx("div",{className:"p-3 bg-life-gold/5 border border-life-gold/10 rounded text-[9px] text-life-gold/70 uppercase font-bold tracking-widest",children:"Core System Toggles & Calibration"}),n.jsxs("div",{className:"w-full flex items-center justify-between p-3 rounded-lg bg-life-black border border-life-muted/20",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yt,{size:16,className:"text-life-gold"}),n.jsx("span",{className:"text-[10px] font-bold uppercase text-life-text",children:"Day Start (Reset Hour)"})]}),n.jsx("select",{value:i.user.preferences.dayStartHour??4,onChange:w=>e.setDayStartHour(parseInt(w.target.value)),className:"bg-black border border-life-gold/30 rounded px-2 py-1 text-xs font-mono font-bold text-life-gold outline-none",children:Array.from({length:24}).map((w,I)=>n.jsxs("option",{value:I,children:[I.toString().padStart(2,"0"),":00"]},I))})]}),n.jsxs("div",{className:"space-y-2",children:[C("Neural Feedback (Sound)",n.jsx(_2,{size:16}),"soundEnabled"),C("Google Calendar Sync",n.jsx(Jt,{size:16}),"showCalendarSync"),C("AI Context: History Logs",n.jsx(dl,{size:16}),"copyIncludesHistory"),C("System Alerts (Push)",n.jsx(an,{size:16}),"deviceNotificationsEnabled")]}),n.jsx("div",{className:"h-px bg-life-muted/10 my-2"}),n.jsxs("div",{className:"space-y-2",children:[C("Show Spear Tip (Highlights)",n.jsx(We,{size:16}),"showHighlights"),C("Campaign Module UI",n.jsx(RS,{size:16}),"showCampaignUI"),C("Horus Eye (Unlock Weeks)",n.jsx(er,{size:16}),"unlockAllWeeks")]})]}),o==="oracle"&&n.jsx("div",{className:"h-full flex flex-col animate-in fade-in slide-in-from-right-2",children:h?n.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right-4",children:[n.jsxs("button",{onClick:()=>g(null),className:"flex items-center gap-2 text-life-muted hover:text-life-gold mb-3 uppercase font-bold text-[10px]",children:[n.jsx(M0,{size:12})," Back to Gem List"]}),n.jsxs("div",{className:"flex-1 bg-life-black/50 border border-life-muted/20 rounded-xl overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-3 border-b border-life-muted/20 bg-life-black flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-life-text uppercase tracking-widest",children:mo[h].title}),n.jsx("p",{className:"text-[9px] text-life-gold font-mono",children:mo[h].role})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:N,className:"p-2 text-life-muted hover:text-life-easy hover:bg-life-easy/10 rounded transition-all",title:"Copy Text",children:n.jsx(ui,{size:16})}),n.jsx("button",{onClick:S,className:"p-2 text-life-muted hover:text-life-gold hover:bg-life-gold/10 rounded transition-all",title:"Download File",children:n.jsx(lr,{size:16})})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4",children:n.jsx("pre",{className:"whitespace-pre-wrap font-mono text-[10px] text-life-text/80 leading-relaxed",children:mo[h].content})})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h3",{className:"text-life-gold font-bold uppercase tracking-widest text-[10px] flex items-center gap-2",children:[n.jsx(Sr,{size:14})," Gem Architecture (Select for Manual)"]}),n.jsxs("button",{onClick:()=>g("commander"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-life-easy/50 hover:bg-life-easy/5 transition-all text-left group",children:[n.jsx("div",{className:"p-2 bg-life-easy/10 text-life-easy rounded-full",children:n.jsx(xt,{size:16})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-life-easy",children:"The Commander"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Strategic oversight & general conversation."})]}),n.jsx(ht,{size:14,className:"text-life-muted group-hover:text-life-easy"})]}),n.jsxs("button",{onClick:()=>g("executor"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-purple-400/50 hover:bg-purple-400/5 transition-all text-left group",children:[n.jsx("div",{className:"p-2 bg-purple-500/10 text-purple-400 rounded-full",children:n.jsx(Yt,{size:16})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-purple-400",children:"The Executor"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Tactical ops: Instantly Adds Tasks, Habits, Raids."})]}),n.jsx(ht,{size:14,className:"text-life-muted group-hover:text-purple-400"})]}),n.jsxs("button",{onClick:()=>g("designer"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-pink-400/50 hover:bg-pink-400/5 transition-all text-left group",children:[n.jsx("div",{className:"p-2 bg-pink-500/10 text-pink-400 rounded-full",children:n.jsx(Dt,{size:16})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-pink-400",children:"The Designer"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Visual cortex: Changes App Themes & Colors."})]}),n.jsx(ht,{size:14,className:"text-life-muted group-hover:text-pink-400"})]}),n.jsxs("button",{onClick:()=>g("observer"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-blue-400/50 hover:bg-blue-400/5 transition-all text-left group",children:[n.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-full",children:n.jsx(R0,{size:16})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-blue-400",children:"The Observer"}),n.jsx("div",{className:"text-[9px] text-life-muted",children:"Analyzes your Stats, Metrics & Performance."})]}),n.jsx(ht,{size:14,className:"text-life-muted group-hover:text-blue-400"})]})]}),n.jsxs("div",{className:"border-t border-life-muted/10 pt-4",children:[n.jsxs("h3",{className:"text-life-gold font-bold uppercase tracking-widest text-[10px] flex items-center gap-2 mb-3",children:[n.jsx(We,{size:14})," Maintenance"]}),n.jsxs("button",{onClick:v,className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-red-950/20 border border-red-900/30 text-red-400 hover:bg-red-900/30 transition-all uppercase font-bold text-[10px]",children:[n.jsx(Rt,{size:14})," Purge Context Memory"]})]})]})}),o==="actions"&&n.jsx("div",{className:"animate-in fade-in slide-in-from-right-2",children:n.jsx(AM,{dateOverride:d,setDateOverride:u,handleDateChange:m})}),o==="themes"&&n.jsx("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in slide-in-from-right-2",children:i.user.unlockedThemes.map(w=>{const I=i.user.preferences.theme===w.id;return n.jsxs("button",{onClick:()=>e.setTheme(w.id),className:`p-3 rounded-xl border flex flex-col gap-2 transition-all text-left relative overflow-hidden ${I?"border-life-gold bg-life-gold/10":"border-life-muted/20 bg-life-black hover:border-life-gold/30"}`,children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full border border-white/10",style:{backgroundColor:w.colors["--color-life-black"]}}),n.jsx("div",{className:"w-3 h-3 rounded-full border border-white/10",style:{backgroundColor:w.colors["--color-life-paper"]}}),n.jsx("div",{className:"w-3 h-3 rounded-full border border-white/10",style:{backgroundColor:w.colors["--color-life-gold"]}})]}),n.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${I?"text-life-gold":"text-life-muted"}`,children:w.name}),I&&n.jsx("div",{className:"absolute top-1 right-1",children:n.jsx(Be,{size:10,className:"text-life-gold"})})]},w.id)})}),o==="state"&&n.jsxs("div",{className:"p-3 bg-life-black border border-life-muted/20 rounded animate-in fade-in",children:[n.jsxs("h3",{className:"text-life-gold font-bold mb-2 flex items-center gap-2",children:[n.jsx(er,{size:12})," Data Snapshot"]}),n.jsx("pre",{className:"whitespace-pre-wrap opacity-70 text-[9px]",children:JSON.stringify(i.user,null,2)})]}),o==="log"&&n.jsx("div",{className:"space-y-2 animate-in fade-in",children:(E=i.ui.systemLogs)==null?void 0:E.map(w=>n.jsxs("div",{className:"flex gap-2 border-b border-life-muted/10 pb-1",children:[n.jsx("span",{className:"text-[9px] text-life-muted min-w-[50px]",children:w.timestamp?new Date(w.timestamp).toLocaleTimeString():"---"}),n.jsxs("span",{className:`font-bold text-[9px] uppercase ${w.type==="error"?"text-red-500":"text-life-gold"}`,children:["[",w.type,"]"]}),n.jsx("span",{className:"text-[9px]",children:w.message})]},w.id))}),o==="media"&&n.jsxs("div",{className:"p-4 bg-life-black border border-life-gold/20 rounded-lg text-center space-y-4 animate-in fade-in",children:[n.jsx("div",{className:"w-16 h-16 bg-life-gold/10 rounded-full flex items-center justify-center mx-auto border border-life-gold/30",children:n.jsx(ar,{size:32,className:"text-life-gold"})}),n.jsxs("label",{className:"block w-full cursor-pointer",children:[n.jsx("input",{type:"file",accept:"audio/*",onChange:y,className:"hidden"}),n.jsxs("div",{className:"w-full py-3 border border-dashed border-life-muted/50 rounded-lg hover:border-life-gold hover:bg-life-gold/5 transition-all flex items-center justify-center gap-2 text-life-text",children:[n.jsx(fr,{size:14})," Neural Audio Sync"]})]}),i.ui.customAudio&&n.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-2 rounded text-green-400 text-[10px]",children:["Active Uplink: ",n.jsx("span",{className:"font-bold text-white",children:i.ui.customAudio.name})]})]})]})]})})},RM=({editTime:i,setEditTime:e,editReminders:l,setEditReminders:o,editSubtasks:r,setEditSubtasks:d,newSubtaskTitle:u,setNewSubtaskTitle:h,hideSubtasks:g=!1})=>{const m=C=>{if(C===-1)return;l.some(w=>w.minutesBefore===C)||o([...l,{id:`rem_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,minutesBefore:C,isSent:!1}].sort((w,I)=>w.minutesBefore-I.minutesBefore))},y=C=>{o(l.filter(E=>E.id!==C))},v=()=>{if(!u.trim())return;const C={id:`st_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:u.trim(),isCompleted:!1};d([...r,C]),h("")},S=C=>{d(r.filter(E=>E.id!==C))},N=C=>C===0?"At time":C===60?"1h before":C===1440?"1d before":`${C}m before`;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4 space-y-3 bg-life-black/30 p-3 rounded-lg border border-life-muted/10",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[n.jsx(yt,{size:10})," Scheduled Time"]}),n.jsx("input",{type:"datetime-local",value:i,onChange:C=>e(C.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded p-2 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[n.jsx(an,{size:10})," Reminders"]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:l.map(C=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-life-gold/10 border border-life-gold/30 rounded text-[9px] text-life-gold",children:[n.jsx("span",{children:N(C.minutesBefore)}),n.jsx("button",{type:"button",onClick:()=>y(C.id),className:"hover:text-white",children:n.jsx(Ie,{size:10})})]},C.id))}),n.jsxs("select",{value:-1,onChange:C=>m(Number(C.target.value)),className:"w-full bg-life-black border border-life-muted/30 rounded p-1.5 text-xs text-life-muted focus:outline-none focus:border-life-gold/50",children:[n.jsx("option",{value:-1,children:"+ Add Alert"}),n.jsx("option",{value:0,children:"At scheduled time"}),n.jsx("option",{value:15,children:"15 mins before"}),n.jsx("option",{value:60,children:"1 hour before"})]})]})]}),!g&&n.jsxs("div",{className:"border-t border-life-muted/10 pt-4 mt-2",children:[n.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[n.jsx(Be,{size:10})," Subtasks"]}),n.jsx("div",{className:"space-y-2 mb-2",children:r.map(C=>n.jsxs("div",{className:"flex items-center justify-between bg-life-black px-2 py-1.5 rounded border border-life-muted/20",children:[n.jsx("span",{className:"text-xs text-life-text truncate",children:C.title}),n.jsx("button",{onClick:()=>S(C.id),className:"text-life-muted hover:text-life-hard p-1",children:n.jsx(Rt,{size:12})})]},C.id))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:u,onChange:C=>h(C.target.value),onKeyDown:C=>C.key==="Enter"&&(C.preventDefault(),v()),placeholder:"Add subtask...",className:"flex-1 bg-life-black border border-life-muted/30 rounded px-2 py-1.5 text-xs text-life-text focus:border-life-gold outline-none"}),n.jsx("button",{onClick:v,className:"bg-life-gold/10 hover:bg-life-gold/20 text-life-gold border border-life-gold/30 rounded px-2",children:n.jsx(gt,{size:14})})]})]})]})},Qa=({stat:i,size:e=14})=>{switch(i){case W.STR:return n.jsx(Xt,{size:e});case W.INT:return n.jsx(xt,{size:e});case W.DIS:return n.jsx(We,{size:e});case W.PCE:return n.jsx(ot,{size:e});case W.EMT:return n.jsx(fi,{size:e});case W.CAM:return n.jsx(Ue,{size:e});case W.CRT:return n.jsx(Dt,{size:e});default:return n.jsx(Ue,{size:e})}},DM=()=>{const{state:i,dispatch:e}=ke(),{taskState:l,taskDispatch:o}=Kt(),{habitState:r,habitDispatch:d}=Qt(),{raidState:u,raidDispatch:h}=Ii(),{skillState:g}=vt(),{modalData:m}=i.ui,y=U.useMemo(()=>{if(!m)return null;const{itemId:$,type:de,parentId:he}=m;if(de==="task"){const ie=l.tasks.find(be=>be.id===$);return ie?{item:ie,title:ie.title,desc:ie.description,difficulty:ie.difficulty,stat:ie.stat,skillId:ie.skillId,scheduledTime:ie.scheduledTime||ie.deadline,reminders:ie.reminders,subtasks:ie.subtasks,isEditable:!0,canArchive:!0,isFullControl:!0}:null}if(de==="habit"){const ie=r.habits.find(be=>be.id===$);return ie?{item:ie,title:ie.title,desc:ie.description,difficulty:ie.difficulty,stat:ie.stat,skillId:ie.skillId,scheduledTime:ie.scheduledTime,reminders:ie.reminders,subtasks:ie.subtasks,isEditable:!0,canArchive:!1,isFullControl:!0}:null}if(de==="raid"||de==="raid_step")if(de==="raid"){const ie=u.raids.find(Te=>Te.id===$);if(!ie)return null;const be=ie.stats&&ie.stats.length>0?ie.stats[0]:W.STR;return{item:ie,title:ie.title,desc:ie.description,difficulty:ie.difficulty,stat:be,skillId:ie.skillId,scheduledTime:ie.deadline,reminders:[],subtasks:[],isEditable:!0,canArchive:!0,isFullControl:!0}}else{const ie=u.raids.find(nt=>nt.id===he),be=ie==null?void 0:ie.steps.find(nt=>nt.id===$);if(!be||!ie)return null;const Te=be.stat||(ie.stats&&ie.stats.length>0?ie.stats[0]:W.STR),Oe=be.difficulty||ie.difficulty,ct=ie.skillId;return{item:be,parentRaid:ie,title:be.title,desc:be.notes,difficulty:Oe,stat:Te,skillId:ct,scheduledTime:be.scheduledTime,reminders:be.reminders,subtasks:be.subtasks,isTimed:be.isTimed,durationMinutes:be.durationMinutes,isEditable:!0,canArchive:!0,isFullControl:!0,isSkillLocked:!0}}return null},[m,l.tasks,r.habits,u.raids]),[v,S]=U.useState(!1),[N,C]=U.useState(""),[E,w]=U.useState(""),[I,H]=U.useState(""),[_,P]=U.useState([]),[M,j]=U.useState([]),[z,B]=U.useState(""),[q,G]=U.useState(void 0),[Q,F]=U.useState(void 0),[ae,X]=U.useState("");if(U.useEffect(()=>{if(y){C(y.title),w(y.desc||""),G(y.item.difficulty),F(y.item.stat),X(y.skillId||"");let $=y.scheduledTime||"";if((m==null?void 0:m.type)!=="habit"&&$){const de=new Date($);if(!isNaN(de.getTime())){const he=de.getTimezoneOffset()*6e4;$=new Date(de.getTime()-he).toISOString().slice(0,16)}}H($),P(y.reminders||[]),j(y.subtasks||[])}},[y]),!m||!y)return null;const L=()=>e.setModal("none"),k=()=>{const $={...y.item};(i.user.preferences.copyIncludesHistory??!0)||(delete $.history,delete $.streak,delete $.streakHistory,delete $.purchaseHistory);let he={};m.type==="habit"?he={habits:[$]}:m.type==="task"?he={tasks:[$]}:m.type==="raid"?he={raids:[$]}:he=$,navigator.clipboard.writeText(JSON.stringify(he,null,2)),e.addToast("Item Copied to Clipboard (JSON)","success")},R=()=>{if(!N.trim())return;const{itemId:$,type:de,parentId:he}=m;let ie=I||void 0;if(ie&&de!=="habit"){const Te=new Date(ie);isNaN(Te.getTime())||(ie=Te.toISOString())}const be={title:N,reminders:_.length>0?_:void 0,subtasks:M};de==="raid_step"?(be.notes=E,be.scheduledTime=ie,be.difficulty=q,be.stat=Q,be.isTimed=y.item.isTimed):(be.description=E,be.difficulty=q,be.stat=Q,be.skillId=ae||void 0,de==="raid"?(be.deadline=ie,be.stats=[Q]):(be.scheduledTime=ie,de==="task"&&(be.deadline=ie))),de==="task"?o.updateTask($,be):de==="habit"?d.updateHabit($,be):de==="raid"?h.updateRaid($,be):de==="raid_step"&&he&&h.updateRaidStep(he,$,be),S(!1),e.addToast("Changes applied successfully","success")},V=()=>{m.type==="task"?o.archiveTask(m.itemId):m.type==="raid"?h.archiveRaid(m.itemId):m.type==="raid_step"&&h.archiveRaidStep(m.parentId,m.itemId),L()},te=()=>{e.setModal("confirmation",{title:"Confirm Deletion",message:"Permanently delete this item?",confirmText:"Delete",isDangerous:!0,onConfirm:()=>{m.type==="task"?o.deleteTask(m.itemId):m.type==="habit"?d.deleteHabit(m.itemId):m.type==="raid"?h.deleteRaid(m.itemId):m.type==="raid_step"&&h.deleteRaidStep(m.parentId,m.itemId)}})},pe=()=>{y.scheduledTime&&Er(y.title,y.desc||"",y.scheduledTime)},D=ri[y.difficulty],J=tt[y.stat],se=y.skillId?g.skills.find($=>$.id===y.skillId):null;return n.jsx("div",{onClick:L,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{onClick:$=>$.stopPropagation(),className:"bg-life-paper w-full max-w-md rounded-xl border border-life-muted/20 shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95 duration-300 relative group",children:[n.jsxs("div",{className:"p-5 border-b border-life-muted/10 flex justify-between items-start bg-life-black/40",children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-life-gold bg-life-gold/10 px-2 py-0.5 rounded border border-life-gold/20",children:m.type.replace("_"," ")}),m.parentId&&n.jsx("span",{className:"text-[9px] text-life-muted border border-life-muted/20 px-1.5 py-0.5 rounded bg-life-black",children:"Linked"})]}),v?n.jsx("input",{type:"text",value:N,onChange:$=>C($.target.value),className:"w-full bg-black border border-life-gold/50 rounded px-2 py-1 text-lg font-bold text-life-text focus:outline-none",autoFocus:!0}):n.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight font-mono",children:y.title})]}),n.jsx("button",{onClick:L,className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:18})})]}),!v&&n.jsxs("div",{className:"px-5 py-3 bg-life-black border-b border-life-muted/10 flex flex-wrap gap-2 items-center",children:[n.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded border text-[10px] font-black uppercase ${D} bg-opacity-10`,children:[n.jsx(ds,{size:10}),y.difficulty]}),n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded border text-[10px] font-black uppercase bg-life-paper",style:{borderColor:`${J}40`,color:J},children:[n.jsx(Qa,{stat:y.stat,size:10}),y.stat]}),se&&n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded border border-life-gold/30 text-life-gold bg-life-gold/5 text-[10px] font-bold",children:[n.jsx(di,{size:10})," ",se.title]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-life-paper relative",children:v?n.jsxs("div",{className:"space-y-4",children:[y.isFullControl&&n.jsxs("div",{className:"bg-life-black/30 p-3 rounded-lg border border-life-muted/10 space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Difficulty"}),!q&&m.type==="raid_step"&&n.jsx("span",{className:"text-[8px] uppercase font-black text-life-gold/50 tracking-widest",children:"Inherited"})]}),n.jsx("div",{className:"grid grid-cols-3 gap-1",children:Object.values(_e).map($=>{const he=(q||y.difficulty)===$;return n.jsx("button",{onClick:()=>{G(q===$?void 0:$)},className:`py-2 rounded text-[9px] font-black uppercase border transition-all ${he?`${ri[$]} ${No[$]} shadow-sm`:"border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:$},$)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1",children:["Skill Link ",y.isSkillLocked&&n.jsx("span",{className:"text-life-gold/50",children:"(Inherited)"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:ae,onChange:$=>X($.target.value),disabled:y.isSkillLocked,className:`w-full bg-life-black border border-life-muted/30 rounded p-1.5 pl-2 text-[10px] text-life-text appearance-none outline-none ${y.isSkillLocked?"opacity-50 cursor-not-allowed":"focus:border-life-gold"}`,children:[n.jsx("option",{value:"",children:"None"}),g.skills.map($=>n.jsx("option",{value:$.id,children:$.title},$.id))]}),!y.isSkillLocked&&n.jsx(Ft,{size:10,className:"absolute right-2 top-1/2 -translate-x-1/2 text-life-muted pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Attribute"}),!Q&&m.type==="raid_step"&&n.jsx("span",{className:"text-[8px] uppercase font-black text-life-gold/50 tracking-widest",children:"Inherited"})]}),n.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-1",children:Object.values(W).map($=>{const he=(Q||y.stat)===$;return n.jsx("button",{onClick:()=>{F(Q===$?void 0:$)},className:`w-7 h-7 shrink-0 rounded flex items-center justify-center border transition-all ${he?"bg-life-muted/20 border-life-muted text-life-text":"border-life-muted/10 text-life-muted opacity-50"}`,style:{color:he?tt[$]:void 0},children:n.jsx(Qa,{stat:$,size:12})},$)})})]})]})]}),n.jsx(RM,{editTime:I,setEditTime:H,editReminders:_,setEditReminders:P,editSubtasks:M,setEditSubtasks:j,newSubtaskTitle:z,setNewSubtaskTitle:B,hideSubtasks:m.type==="raid"}),m.type==="raid"&&y.item.steps&&n.jsxs("div",{className:"mt-4 border-t border-life-muted/10 pt-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold flex items-center gap-1",children:[n.jsx(Ue,{size:12})," Operation Steps"]}),n.jsx("button",{onClick:()=>{const $={id:`rs_new_${Date.now()}`,title:"New Tactical Step",isCompleted:!1,isLocked:!1,difficulty:y.difficulty,stat:y.stat},de=[...y.item.steps,$];h.updateRaid(m.itemId,{steps:de}),e.addToast("Step Added","success")},className:"text-[9px] bg-life-gold/10 text-life-gold px-2 py-1 rounded border border-life-gold/20 hover:bg-life-gold/20 transition-colors",children:"+ Add Step"})]}),n.jsx("div",{className:"space-y-2",children:y.item.steps.map(($,de)=>{var he;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-life-black border border-life-muted/20 group hover:border-life-gold/30 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-[9px] font-mono text-life-muted opacity-50",children:(de+1).toString().padStart(2,"0")}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:`text-xs font-bold ${$.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:$.title}),n.jsxs("div",{className:"flex gap-1 mt-0.5",children:[$.difficulty&&$.difficulty!==y.item.difficulty&&n.jsx("span",{className:`text-[7px] font-black uppercase px-1 rounded border ${ri[$.difficulty]}`,children:$.difficulty}),$.stat&&$.stat!==((he=y.item.stats)==null?void 0:he[0])&&n.jsxs("span",{className:"text-[7px] font-black uppercase px-1 rounded border border-life-muted/20 flex items-center gap-0.5",style:{color:tt[$.stat],borderColor:`${tt[$.stat]}40`},children:[n.jsx(Qa,{stat:$.stat,size:6})," ",$.stat]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:ie=>{ie.stopPropagation(),e.setModal("details",{itemId:$.id,type:"raid_step",parentId:m.itemId})},className:"p-1.5 rounded bg-life-muted/10 hover:bg-life-gold/20 text-life-muted hover:text-life-gold",children:n.jsx(nu,{size:10})}),n.jsx("button",{onClick:ie=>{ie.stopPropagation(),h.deleteRaidStep(m.itemId,$.id)},className:"p-1.5 rounded bg-life-hard/10 hover:bg-life-hard/20 text-life-hard",children:n.jsx(Rt,{size:10})})]})]},$.id)})})]}),n.jsxs("div",{className:"relative flex flex-col mt-4",children:[n.jsx("label",{className:"block text-[9px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"Description / Intel"}),n.jsx("textarea",{value:E,onChange:$=>w($.target.value),className:"w-full h-24 bg-life-black border border-life-muted/30 rounded-lg p-3 text-sm text-life-text focus:border-life-gold outline-none resize-none font-mono"})]})]}):n.jsxs("div",{className:"space-y-4",children:[y.scheduledTime&&n.jsxs("div",{className:"flex gap-2 items-center text-xs text-life-gold bg-life-gold/10 px-3 py-2 rounded-lg border border-life-gold/20 inline-flex",children:[n.jsx(yt,{size:12}),n.jsx("span",{className:"font-mono font-bold",children:m.type==="habit"?`Daily at ${y.scheduledTime}`:new Date(y.scheduledTime).toLocaleString()}),n.jsx("button",{onClick:pe,className:"ml-2 border-l border-life-gold/30 pl-2 text-life-gold hover:text-white",children:n.jsx(vr,{size:14})})]}),n.jsx("p",{className:"text-sm text-life-text/90 leading-relaxed font-mono whitespace-pre-wrap",children:y.desc||n.jsx("span",{className:"text-life-muted italic",children:"No Description"})}),y.subtasks&&y.subtasks.length>0&&n.jsxs("div",{className:"mt-4 border-t border-life-muted/10 pt-4",children:[n.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold mb-2 flex items-center gap-1",children:[n.jsx(Be,{size:12})," Steps"]}),n.jsx("div",{className:"space-y-2",children:y.subtasks.map($=>n.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-life-black border border-life-muted/20",children:[n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${$.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted/50"}`,children:n.jsx(Be,{size:12,strokeWidth:3})}),n.jsx("span",{className:`text-xs ${$.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:$.title})]},$.id))})]}),m.type==="raid"&&y.item.steps&&n.jsxs("div",{className:"mt-6 border-t border-life-muted/10 pt-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold flex items-center gap-1",children:[n.jsx(Ue,{size:12})," Operation Steps"]}),n.jsx("button",{onClick:()=>{const $={id:`rs_new_${Date.now()}`,title:"New Tactical Step",isCompleted:!1,isLocked:!1,difficulty:y.difficulty,stat:y.stat},de=[...y.item.steps,$];h.updateRaid(m.itemId,{steps:de}),e.addToast("Step Added","success")},className:"text-[9px] bg-life-gold/10 text-life-gold px-2 py-1 rounded border border-life-gold/20 hover:bg-life-gold/20 transition-colors",children:"+ Add Step"})]}),n.jsx("div",{className:"space-y-2",children:y.item.steps.map(($,de)=>{var he;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-life-black border border-life-muted/20 group hover:border-life-gold/30 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-[9px] font-mono text-life-muted opacity-50",children:(de+1).toString().padStart(2,"0")}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:`text-xs font-bold ${$.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:$.title}),n.jsxs("div",{className:"flex gap-1 mt-0.5",children:[$.difficulty&&$.difficulty!==y.item.difficulty&&n.jsx("span",{className:`text-[7px] font-black uppercase px-1 rounded border ${ri[$.difficulty]}`,children:$.difficulty}),$.stat&&$.stat!==((he=y.item.stats)==null?void 0:he[0])&&n.jsxs("span",{className:"text-[7px] font-black uppercase px-1 rounded border border-life-muted/20 flex items-center gap-0.5",style:{color:tt[$.stat],borderColor:`${tt[$.stat]}40`},children:[n.jsx(Qa,{stat:$.stat,size:6})," ",$.stat]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:ie=>{ie.stopPropagation(),e.setModal("details",{itemId:$.id,type:"raid_step",parentId:m.itemId})},className:"p-1.5 rounded bg-life-muted/10 hover:bg-life-gold/20 text-life-muted hover:text-life-gold",children:n.jsx(nu,{size:10})}),n.jsx("button",{onClick:ie=>{ie.stopPropagation(),h.deleteRaidStep(m.itemId,$.id)},className:"p-1.5 rounded bg-life-hard/10 hover:bg-life-hard/20 text-life-hard",children:n.jsx(Rt,{size:10})})]})]},$.id)})})]})]})}),n.jsxs("div",{className:"p-4 bg-life-black border-t border-life-muted/20 flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:te,className:"p-2 rounded-lg text-life-hard hover:bg-life-hard/10",children:n.jsx(Rt,{size:16})}),y.canArchive&&n.jsx("button",{onClick:V,className:"p-2 rounded-lg text-life-muted hover:bg-life-muted/10",children:n.jsx(bo,{size:16})}),n.jsx("button",{onClick:k,className:"p-2 rounded-lg text-life-gold hover:bg-life-gold/10 border border-life-gold/20",title:"Copy JSON Code",children:n.jsx(ui,{size:16})})]}),v?n.jsxs("button",{onClick:R,className:"px-6 py-2 rounded-lg bg-life-gold text-life-black text-xs font-black uppercase hover:bg-yellow-400 flex items-center gap-2",children:[n.jsx(VN,{size:14})," Save"]}):n.jsxs("button",{onClick:()=>S(!0),className:"px-6 py-2 rounded-lg border border-life-muted/30 bg-life-paper text-life-text hover:text-life-gold text-xs font-black uppercase flex items-center gap-2",children:[n.jsx(nu,{size:14})," Edit"]})]})]})})},IM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(""),[o,r]=U.useState(!1),d=()=>{r(!0),setTimeout(()=>{i.resetSystem()},1500)},u=()=>{i.setModal("none")};return n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-xl animate-in fade-in duration-300",children:n.jsxs("div",{className:"w-full max-w-md bg-[#0f0505] border-2 border-red-600 rounded-2xl shadow-[0_0_50px_rgba(220,38,38,0.3)] overflow-hidden relative flex flex-col animate-in zoom-in-95 slide-in-from-bottom-8 duration-500",children:[n.jsx("div",{className:"h-2 w-full bg-[repeating-linear-gradient(45deg,#dc2626,#dc2626_10px,#000_10px,#000_20px)]"}),n.jsxs("div",{className:"p-6 text-center border-b border-red-900/30 relative",children:[n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("button",{onClick:u,className:"text-red-800 hover:text-red-500 transition-colors",children:n.jsx(Ie,{size:24})})}),n.jsx("div",{className:"w-20 h-20 bg-red-900/10 border border-red-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:n.jsx(q0,{size:40,className:"text-red-600"})}),n.jsx("h2",{className:"text-2xl font-black text-red-500 tracking-tighter uppercase mb-1",children:"System Rebirth"}),n.jsx("p",{className:"text-[10px] text-red-400/60 font-mono tracking-widest uppercase",children:"Protocol 99: New Game Plus"})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"text-center text-sm text-red-200/80 leading-relaxed font-medium",children:["Are you sure you want to wipe the current timeline? This action is ",n.jsx("span",{className:"text-red-500 font-bold underline decoration-red-500/50",children:"irreversible"}),"."]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 rounded-xl p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-2 border-b border-red-900/30 pb-2",children:[n.jsx(Rt,{size:14}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Deleted"})]}),n.jsxs("ul",{className:"space-y-1.5",children:[n.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[n.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Active Missions"]}),n.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[n.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Habit Streaks"]}),n.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[n.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Raid Progress"]}),n.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[n.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Gold & XP"]})]})]}),n.jsxs("div",{className:"bg-green-950/20 border border-green-900/30 rounded-xl p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2 border-b border-green-900/30 pb-2",children:[n.jsx(cr,{size:14}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Preserved"})]}),n.jsxs("ul",{className:"space-y-1.5",children:[n.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[n.jsx(Be,{size:10})," Earned Badges"]}),n.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[n.jsx(Be,{size:10})," Store Items"]}),n.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[n.jsx(Be,{size:10})," Unlocked Themes"]}),n.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[n.jsx(Be,{size:10})," Skill Trees (Lvl 1)"]})]})]})]})]}),n.jsxs("div",{className:"p-6 pt-0",children:[n.jsx("button",{onClick:d,disabled:o,className:`
                            w-full py-4 rounded-xl font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 transition-all
                            ${o?"bg-red-900 cursor-wait text-red-400":"bg-red-600 hover:bg-red-500 text-black shadow-[0_0_20px_rgba(220,38,38,0.5)] hover:scale-[1.02] active:scale-[0.98]"}
                        `,children:o?n.jsxs(n.Fragment,{children:[n.jsx(H0,{size:18,className:"animate-spin"}),"Wiping System..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cn,{size:18,fill:"currentColor",className:"text-red-900"}),"EXECUTE REBIRTH"]})}),!o&&n.jsx("button",{onClick:u,className:"w-full mt-3 py-2 text-[10px] font-bold text-red-500/50 uppercase tracking-widest hover:text-red-400",children:"Cancel Operation"})]})]})})},LM=()=>{const{state:i,dispatch:e}=ke(),{modalData:l}=i.ui;if(!l)return null;const{title:o,message:r,onConfirm:d,confirmText:u="Confirm",isDangerous:h=!1}=l,g=()=>{d&&d(),e.setModal("none")};return n.jsx("div",{onClick:()=>e.setModal("none"),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{onClick:m=>m.stopPropagation(),className:"bg-life-paper border border-life-muted/20 w-full max-w-sm rounded-xl shadow-2xl p-6 relative overflow-hidden",children:[h&&n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-life-hard"}),n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("h3",{className:"text-lg font-black text-life-text uppercase tracking-tight flex items-center gap-2",children:[h&&n.jsx(cn,{size:20,className:"text-life-hard"}),o||"Confirmation"]}),n.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:18})})]}),n.jsx("p",{className:"text-sm text-life-muted mb-6 leading-relaxed font-medium",children:r}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>e.setModal("none"),className:"flex-1 py-3 rounded-lg border border-life-muted/20 text-life-muted hover:text-life-text text-xs font-bold uppercase tracking-wider transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:g,className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 transition-all shadow-lg ${h?"bg-life-hard text-life-black hover:bg-red-500":"bg-life-gold text-life-black hover:bg-yellow-400"}`,children:[h?n.jsx(Rt,{size:14}):n.jsx(Be,{size:14}),u]})]})]})})},zM=()=>{const{state:i,dispatch:e}=ke(),{modalData:l}=i.ui;if(!l)return null;const{title:o,xp:r,gold:d,multiplier:u,message:h}=l,g=()=>{e.setModal("none")};return n.jsx("div",{onClick:g,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-200",children:n.jsxs("div",{onClick:m=>m.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-50 slide-in-from-bottom-12 duration-500",children:[n.jsx("div",{className:"absolute inset-0 bg-life-gold/30 blur-[80px] rounded-full animate-pulse-slow pointer-events-none"}),n.jsx("div",{className:"absolute inset-0 bg-life-diamond/20 blur-[120px] rounded-full animate-pulse pointer-events-none"}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx("div",{className:"w-28 h-28 rounded-full bg-life-gold border-4 border-life-black shadow-[0_0_50px_rgba(251,191,36,0.8)] flex items-center justify-center animate-[bounce_1s_infinite]",children:n.jsx(We,{size:56,className:"text-life-black fill-life-black"})}),n.jsx(dr,{className:"absolute -top-4 -right-4 text-life-diamond animate-spin-slow w-10 h-10"}),n.jsx(dr,{className:"absolute bottom-0 -left-4 text-life-easy animate-pulse w-8 h-8"})]}),n.jsxs("div",{className:"space-y-2 mb-8 relative z-10",children:[n.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] text-life-gold animate-pulse",children:"Critical Success"}),n.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter drop-shadow-2xl italic",children:o}),n.jsx("p",{className:"text-life-muted text-xs font-mono bg-black/50 px-3 py-1 rounded border border-life-muted/30 inline-block",children:h})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full mb-8 relative z-10",children:[n.jsxs("div",{className:"bg-life-paper/90 border border-life-gold/50 px-4 py-4 rounded-2xl shadow-[0_0_20px_rgba(251,191,36,0.2)] flex flex-col items-center",children:[n.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"XP Gain"}),n.jsxs("div",{className:"flex items-baseline gap-1",children:[n.jsx("span",{className:"text-2xl font-black text-life-text",children:r}),n.jsxs("span",{className:"text-xs font-bold text-life-gold bg-life-gold/10 px-1 rounded",children:["x",u]})]})]}),n.jsxs("div",{className:"bg-life-paper/90 border border-life-gold/50 px-4 py-4 rounded-2xl shadow-[0_0_20px_rgba(251,191,36,0.2)] flex flex-col items-center",children:[n.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"Gold Loot"}),n.jsxs("div",{className:"flex items-baseline gap-1",children:[n.jsx("span",{className:"text-2xl font-black text-life-gold",children:d}),n.jsxs("span",{className:"text-xs font-bold text-life-gold bg-life-gold/10 px-1 rounded",children:["x",u]})]})]})]}),n.jsx("button",{onClick:g,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest text-black bg-life-gold shadow-[0_0_30px_rgba(251,191,36,0.6)] hover:scale-105 active:scale-95 transition-all relative z-10",children:"Claim Rewards"})]})})},PM=()=>{const{state:i,dispatch:e}=ke(),{taskState:l,taskDispatch:o}=Kt(),{habitState:r,habitDispatch:d}=Qt(),{modalData:u}=i.ui,[h,g]=U.useState("");if(!u||!u.itemId)return null;const{itemId:m,type:y}=u;let v="Item";if(y==="task"){const N=l.tasks.find(C=>C.id===m);N&&(v=N.title)}else if(y==="habit"){const N=r.habits.find(C=>C.id===m);N&&(v=N.title)}const S=N=>{if(N.preventDefault(),!h.trim())return;const C={id:`st_quick_${Date.now()}`,title:h.trim(),isCompleted:!1};if(y==="task"){const E=l.tasks.find(w=>w.id===m);E&&o.updateTask(m,{subtasks:[...E.subtasks,C]})}else if(y==="habit"){const E=r.habits.find(w=>w.id===m);E&&d.updateHabit(m,{subtasks:[...E.subtasks,C]})}e.addToast("Side Mission Added","success"),e.setModal("none")};return n.jsx("div",{onClick:()=>e.setModal("none"),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{onClick:N=>N.stopPropagation(),className:"bg-life-paper border border-life-gold/30 w-full max-w-sm rounded-xl shadow-2xl p-6 relative",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-widest mb-1",children:"Add Side Mission"}),n.jsx("p",{className:"text-sm font-bold text-white truncate max-w-[200px]",children:v})]}),n.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:20})})]}),n.jsxs("form",{onSubmit:S,children:[n.jsx("input",{type:"text",value:h,onChange:N=>g(N.target.value),placeholder:"Type additional requirement...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none mb-4"}),n.jsxs("button",{type:"submit",className:"w-full py-3 bg-life-gold text-life-black font-black uppercase tracking-widest rounded-lg hover:bg-yellow-400 flex items-center justify-center gap-2",children:[n.jsx(Be,{size:16})," Confirm"]})]})]})})},UM=()=>{const{state:i,dispatch:e}=ke(),{modalData:l}=i.ui,o=(l==null?void 0:l.mode)||"export",r=(l==null?void 0:l.title)||(o==="export"?"System Backup":"Neural Injection Protocol"),d=(l==null?void 0:l.data)||"",[u,h]=U.useState(d),[g,m]=U.useState(!1),y=U.useRef(null),v=()=>{e.setModal("none")},S=()=>{y.current&&(y.current.select(),navigator.clipboard.writeText(u),m(!0),xe("success",!0),e.addToast("Copied to Clipboard","success"),setTimeout(()=>m(!1),2e3))},N=()=>{const C=new Blob([u],{type:"application/json"}),E=URL.createObjectURL(C),w=document.createElement("a");w.href=E,w.download=`lifeos-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(E),e.addToast("Backup Downloaded","success"),xe("success",!0)};return n.jsx("div",{onClick:v,className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:C=>C.stopPropagation(),className:"bg-life-black border border-life-gold/30 w-full max-w-lg rounded-xl shadow-2xl flex flex-col h-[85vh] relative overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-paper/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[o==="export"?n.jsx(lr,{size:18,className:"text-life-gold"}):n.jsx(Sr,{size:18,className:"text-life-easy"}),n.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-life-text",children:r})]}),n.jsx("button",{onClick:v,className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:20})})]}),n.jsx("div",{className:"flex-1 p-4 relative overflow-hidden flex flex-col",children:o==="import"?n.jsx("div",{className:"h-full overflow-y-auto pr-1",children:n.jsx(Yb,{onClose:v})}):n.jsxs(n.Fragment,{children:[n.jsx("textarea",{ref:y,value:u,onChange:C=>h(C.target.value),readOnly:!0,className:"w-full h-full bg-[#050505] rounded-lg border border-life-muted/20 p-4 font-mono text-[10px] leading-relaxed resize-none focus:outline-none text-life-gold focus:border-life-gold/50 cursor-text",spellCheck:!1,onClick:C=>C.target.select()}),n.jsx("div",{className:"absolute bottom-6 right-6 text-[9px] text-life-muted/50 pointer-events-none",children:"SYSTEM DUMP // READ ONLY"})]})}),o==="export"&&n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/50 shrink-0 flex gap-3",children:[n.jsxs("button",{onClick:N,className:"flex-1 py-3 rounded-lg font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-life-gold text-black hover:bg-yellow-400 shadow-[0_0_15px_rgba(251,191,36,0.3)]",children:[n.jsx(lr,{size:16}),"Download JSON"]}),n.jsx("button",{onClick:S,className:`px-6 py-3 rounded-lg font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all border border-life-muted/30 hover:bg-white/5 ${g?"text-life-easy border-life-easy":"text-life-muted"}`,children:g?n.jsx(Be,{size:16}):n.jsx(ui,{size:16})})]})]})})},OM=()=>{const{state:i,dispatch:e}=ke(),{user:l}=i,{taskState:o}=Kt(),{habitState:r}=Qt(),{raidState:d}=Ii(),[u,h]=U.useState("today"),{historyData:g,monthAverage:m,monthName:y,year:v,startOffset:S,daysInMonth:N}=U.useMemo(()=>{const M=l.honorDailyLog||{},j=i.ui.debugDate?new Date(i.ui.debugDate):new Date,z=j.getFullYear(),B=j.getMonth(),q=[],G=new Date(z,B+1,0).getDate();for(let ae=1;ae<=G;ae++){const X=`${z}-${String(B+1).padStart(2,"0")}-${String(ae).padStart(2,"0")}`,L=M[X];q.push({date:ae,score:L,fullDate:X})}const Q=q.filter(ae=>ae.score!==void 0).map(ae=>ae.score),F=Q.length>0?Math.round(Q.reduce((ae,X)=>ae+X,0)/Q.length):0;return{historyData:q,monthAverage:F,monthName:j.toLocaleString("default",{month:"long"}),year:z,startOffset:new Date(z,B,1).getDay(),daysInMonth:G}},[l.honorDailyLog,i.ui.debugDate]),{items:C,totalWeight:E}=U.useMemo(()=>_0(o.tasks,r.habits,d.raids,i.ui.debugDate),[o.tasks,r.habits,d.raids,i.ui.debugDate]),w=()=>{e.setModal("none")},I=M=>M==="task"?n.jsx(Di,{size:12}):M==="habit"?n.jsx(Xt,{size:12}):n.jsx(cs,{size:12}),H=C.filter(M=>M.isCompleted).reduce((M,j)=>M+j.weight,0),_=E>0?Math.round(H/E*100):100,P=M=>M===void 0?"bg-life-muted/5 border-life-muted/10 text-life-muted/30":M>=100?"bg-life-crimson/20 border-life-crimson text-life-crimson shadow-[0_0_10px_rgba(220,38,38,0.2)]":M>=90?"bg-cyan-500/20 border-cyan-500 text-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.2)]":M>=80?"bg-life-gold/20 border-life-gold text-life-gold":M>=60?"bg-indigo-500/20 border-indigo-500 text-indigo-400":"bg-red-500/20 border-red-500 text-red-500";return n.jsx("div",{onClick:w,className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:M=>M.stopPropagation(),className:"bg-life-black border border-indigo-500/30 w-full max-w-md rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-8 duration-500 flex flex-col max-h-[85vh]",children:[n.jsxs("div",{className:"p-5 border-b border-indigo-500/10 bg-indigo-950/20 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(On,{size:20})," Honor Protocol"]}),n.jsx("p",{className:"text-[10px] text-indigo-300/60 mt-1 uppercase tracking-wider",children:u==="today"?"Daily Integrity Breakdown":"Monthly Integrity Log"})]}),n.jsx("button",{onClick:w,className:"text-life-muted hover:text-white",children:n.jsx(Ie,{size:20})})]}),u==="today"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-6 flex flex-col items-center border-b border-life-muted/10 bg-life-black/50 animate-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"text-4xl font-black text-white font-mono mb-2",children:[_,"%"]}),n.jsx("div",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest mb-4",children:"Projected Daily Score"}),n.jsx("div",{className:"w-full max-w-[200px] h-1.5 bg-life-muted/20 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-700",style:{width:`${_}%`}})}),n.jsxs("button",{onClick:()=>h("history"),className:"mt-6 flex items-center gap-2 px-4 py-2 rounded-lg bg-life-paper border border-life-muted/20 hover:border-indigo-500/50 hover:text-indigo-400 transition-all text-[10px] font-bold uppercase tracking-wider",children:[n.jsx(Jt,{size:14}),"View Monthly History"]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 animate-in slide-in-from-bottom-4 duration-300",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-life-muted",children:"Today's Obligations"})}),C.length===0?n.jsx("div",{className:"text-center py-8 text-life-muted/50 italic text-xs",children:"No obligations scheduled for today."}):C.map(M=>n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${M.isCompleted?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/20"}`,children:[n.jsx("div",{className:"flex flex-col items-center justify-center w-10 h-10 rounded bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 font-bold font-mono",children:n.jsxs("span",{className:"text-xs",children:[M.percentage,"%"]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[n.jsx("div",{className:`text-[9px] uppercase font-black px-1.5 py-px rounded border ${ri[M.difficulty]}`,children:M.difficulty}),n.jsxs("div",{className:"text-life-muted/50 flex items-center gap-1 text-[9px] uppercase font-bold",children:[I(M.type)," ",M.type]})]}),n.jsx("div",{className:`text-xs font-bold truncate ${M.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:M.title})]}),n.jsx("div",{children:M.isCompleted?n.jsx(Gi,{size:16,className:"text-life-easy"}):n.jsx(SS,{size:16,className:"text-life-hard animate-pulse"})})]},`${M.type}-${M.id}`))]})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex-1 flex flex-col p-4 animate-in slide-in-from-right-4 duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("button",{onClick:()=>h("today"),className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-life-muted hover:text-white transition-colors",children:[n.jsx(M0,{size:14})," Back"]}),n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsx("span",{className:"text-[8px] font-bold uppercase tracking-widest text-life-muted",children:"Month Average"}),n.jsxs("span",{className:`text-lg font-black font-mono ${m>=90?"text-life-gold":"text-indigo-400"}`,children:[m,"%"]})]})]}),n.jsx("div",{className:"mb-4 text-center",children:n.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest text-white",children:[y," ",v]})}),n.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["S","M","T","W","T","F","S"].map((M,j)=>n.jsx("div",{className:"text-center text-[8px] font-bold text-life-muted/30",children:M},j)),Array.from({length:S}).map((M,j)=>n.jsx("div",{className:"aspect-square"},`empty-${j}`)),g.map(M=>n.jsxs("div",{className:`
                                            aspect-square rounded-lg border flex flex-col items-center justify-center relative group cursor-default
                                            ${P(M.score)}
                                        `,children:[n.jsx("span",{className:"text-[10px] font-bold",children:M.date}),M.score!==void 0&&n.jsxs("span",{className:"text-[8px] font-mono opacity-80",children:[M.score,"%"]}),M.score!==void 0&&n.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:flex flex-col items-center bg-life-black border border-life-muted/20 p-2 rounded-lg z-10 shadow-xl whitespace-nowrap pointer-events-none",children:[n.jsx("span",{className:"text-[10px] font-bold text-white",children:M.fullDate}),n.jsxs("span",{className:`text-xs font-black ${M.score>=100?"text-life-gold":"text-life-muted"}`,children:[M.score,"%"]})]})]},M.date))]}),n.jsx("div",{className:"mt-auto p-3 bg-indigo-950/20 border border-indigo-500/10 rounded-lg text-[10px] text-indigo-300/60 text-center",children:"Calendar reflects recorded daily integrity scores."})]})}),n.jsx("div",{className:"p-3 bg-indigo-950/20 border-t border-indigo-500/10 text-[9px] text-indigo-300/60 text-center",children:u==="today"?"Harder tasks carry more weight. Failure hurts more.":"Consistency builds the strongest alloy."})]})})},HM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are "The Quest Forge" ( ).
GOAL: Generate RPG-style quests (Tasks) for a high-performance individual.

WHEN I ASK FOR A MISSION, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a goal, or provide an existing Task JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "t_123..."), YOU MUST include it in the output to UPDATE that task instead of creating a new one.
2. **Title:** Action-oriented (e.g., "Operation: Deep Dive").
3. **Difficulty:** "easy" (Scout), "normal" (Infantry), "hard" (SpecOps).
4. **Stat:** [STR, INT, DIS, CAM, CRT, PCE, EMT].
5. **Reminders:** Array of minutes before due (e.g., [15, 60] = 15 mins & 1 hour before).
6. **Campaign:** Set "isCampaign": true if this is a strategic quarterly goal (G12).
7. **Time:**
   - "scheduledTime": ISO String (YYYY-MM-DDTHH:mm) for specific execution time.
   - "deadline": YYYY-MM-DD for due date.
   - "durationMinutes": Number (if timed session).

--- JSON TEMPLATE ---

\`\`\`json
{
  "tasks": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "QUEST_TITLE",
      "difficulty": "hard",
      "stat": "INT",
      "description": " Objective: ... \\n Skill: ...",
      "subtasks": [
        "Step 1 (5m)",
        "Step 2 (10m)"
      ],
      "reminders": [15, 30],
      "isTimed": true,
      "durationMinutes": 45,
      "scheduledTime": "2024-10-25T09:00:00",
      "deadline": "2024-10-25",
      "energyLevel": "high",
      "isCampaign": false
    }
  ],
  "habits": [
    {
      "title": "HABIT_TITLE",
      "difficulty": "normal",
      "stat": "DIS",
      "type": "daily",
      "dailyTarget": 5,
      "description": "e.g. Drink 5 glasses of water"
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Study Physics tomorrow at 10 AM, remind me 30 mins before."
**Output:**
\`\`\`json
{
  "tasks": [
    {
      "title": "Operation: Quantum Mechanics",
      "difficulty": "hard",
      "stat": "INT",
      "description": " Focus: Thermodynamics Chapter 4.",
      "subtasks": ["Review Notes", "Solve 3 Problems"],
      "scheduledTime": "2024-10-26T10:00:00",
      "reminders": [30],
      "isTimed": true,
      "durationMinutes": 60
    }
  ]
}
\`\`\`

**Input:** "Update task 't_999' to be harder and add a subtask."
**Output:**
\`\`\`json
{
  "tasks": [
    {
      "id": "t_999",
      "difficulty": "hard",
      "subtasks": ["Original Step 1", "New Step 2"]
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:n.jsx(xt,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["The Quest Forge ",n.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V5"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Protocol Configuration"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-blue-400 mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-blue-300 uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-blue-500",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Open ",n.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),n.jsxs("li",{children:["Paste the text into the ",n.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),n.jsx("li",{children:'Command the AI to generate tasks (e.g., "Study for exam").'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},GM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are "The Protocol Foundry" ( ).
GOAL: Design sustainable Habits (Protocols).

WHEN I ASK FOR A HABIT, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a routine, or provide an existing Habit JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "h_123..."), YOU MUST include it to UPDATE the habit.
2. **Algorithm (Type):** "daily", "specific_days" (requires "specificDays": [0-6]), "interval" (requires "intervalValue": number).
3. **Repetitions:** Use "dailyTarget" (number) for habits that repeat within a day (e.g., "Drink Water" with dailyTarget: 8).
4. **Subtasks:** Habits can have steps! (e.g., Routine -> [Drink Water, Stretch]).
5. **Difficulty:** "easy", "normal", "hard".
6. **Reminders:** Array of minutes before (e.g., [0, 10]).
7. **Time:** "scheduledTime" (24h format "HH:mm").

--- JSON TEMPLATE ---

\`\`\`json
{
  "habits": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "HABIT_TITLE",
      "stat": "DIS",
      "difficulty": "normal",
      "type": "daily", 
      "dailyTarget": 1,
      "scheduledTime": "07:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Step 1" },
        { "title": "Step 2" }
      ],
      "description": " Cue: ..."
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a Morning Routine (Water, Meditate, Plan) at 6 AM."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "title": "Protocol: Morning Prime",
      "stat": "PCE",
      "difficulty": "hard",
      "type": "daily",
      "dailyTarget": 1,
      "scheduledTime": "06:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Hydrate (500ml)" },
        { "title": "Meditate (10m)" },
        { "title": "Tactical Planning" }
      ]
    }
  ]
}
\`\`\`

**Input:** "Drink 8 glasses of water daily."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "title": "Protocol: Hydration",
      "stat": "CAM",
      "difficulty": "easy",
      "type": "daily",
      "dailyTarget": 8,
      "description": " Goal: 8 glasses (250ml each)."
    }
  ]
}
\`\`\`

**Input:** "Update habit 'h_555' to be every 2 days."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "id": "h_555",
      "type": "interval",
      "intervalValue": 2
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-life-easy/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-easy/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-life-easy/10 rounded-lg text-life-easy border border-life-easy/20",children:n.jsx(Ue,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-easy flex items-center gap-2",children:["The Protocol Foundry ",n.jsx("span",{className:"text-[9px] bg-life-easy text-black px-1.5 rounded font-mono",children:"V2"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Habit Engineering Protocol"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-life-easy/10 border border-life-easy/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-life-easy mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-life-easy uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-life-easy",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Open ",n.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),n.jsxs("li",{children:["Paste the text into the ",n.jsx("strong",{children:'"System Instructions"'}),"."]}),n.jsx("li",{children:'Command the AI to design habits (e.g., "Build a morning routine").'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-easy text-black hover:bg-emerald-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-easy/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},VM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are "The Treasury Archive" ( ).
GOAL: Understand the LifeOS Economy (XP, Gold, & Stats) to advise on growth strategies.

--- 1. CURRENCY & GROWTH ---
- **XP (Experience):** Levels up the User and Skills.
- **Gold (G):** Currency to buy Items, Themes, and Potions.
- **Stats (Attributes):** Core attributes (STR, INT, DIS, etc.) that level up based on actions.

--- 2. INCOME SOURCES (REVENUE STREAMS) ---

A. ACTIVE DUTY (Tasks & Habits)
   - **Easy:** 
     - XP: 20 | Gold: 10
     - Stat Points: +0.5 (to the linked Stat)
   - **Normal:** 
     - XP: 50 | Gold: 30
     - Stat Points: +1 (to the linked Stat)
   - **Hard:** 
     - XP: 100 | Gold: 100
     - Stat Points: +2 (to the linked Stat)
   
   * Note: Habits build "Streaks". High streaks increase "Daily Salary".
   * **Repetitions (Reps):** Habits can have a "Daily Target" (e.g., Drink Water 8x). 
     - Rewards and Streaks are ONLY awarded after ALL reps are completed.
     - Partial reps do not grant XP/Gold but prevent "Failure" penalties if at least 1 rep is done.

B. OPERATIONS (Raids)
   - **Raid Step (Sub-objective):** 
     - Treated as a Task based on difficulty (Easy/Normal/Hard).
     - Grants XP, Gold, and Stat Points immediately upon completion.
   - **Raid Completion (Victory):** 
     - **Bonus:** 5x the rewards of the final step.
     - **Loot:** Chance for rare items or badges.

C. DAILY SALARY (The Streak)
   - **Easy Mode:** Requires 300 XP.
   - **Normal Mode:** Requires 400 XP.
   - **Hard Mode:** Requires 500 XP.
   - Reward: 50-200 Gold (Scales with Streak length).

D. ACHIEVEMENTS (Badges)
   - **Bronze:** 500 XP | 100 G
   - **Silver:** 1000 XP | 250 G
   - **Gold:** 2000 XP | 500 G
   - **Diamond:** 5000 XP | 1000 G

--- 3. EXPENDITURES (GOLD USAGE) ---
- **Potions:** Restore Energy or Health (Cost: 50-150 G).
- **Artifacts:** Permanent buffs to XP/Gold gain (Cost: 500-5000 G).
- **Themes:** Visual skins for the OS (Cost: 1000+ G).
- **Penalties:** Failing tasks/habits deducts Gold.

--- 4. SKILL MASTERY ---
- Every Task/Habit linked to a Skill (e.g., "Coding") feeds 50% of its XP to that Skill.
- Leveling Skills unlocks specialized Badges.

--- HOW TO USE THIS DATA ---
When I ask "How do I get rich?" or "Plan my leveling", use these values to calculate the optimal path.`,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:n.jsx(yo,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["The Treasury Archive ",n.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V1"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Economy Logic Protocol"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-life-gold/10 border border-life-gold/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-life-gold mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-life-gold uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-life-gold",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Paste it into your AI's ",n.jsx("strong",{children:'"System Instructions"'}),"."]}),n.jsx("li",{children:"Now the AI understands how to reward you and plan your economy."})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},qM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are "The War Room" ( ).
GOAL: Plan complex Operations (Raids) for a high-performance individual.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a project, goal, or campaign.

--- OUTPUT RULES ---
1. **Structure:** A Raid is a container for multiple "Steps" (Missions).
2. **Title:** Military/Tactical naming (e.g., "Operation: Apollo").
3. **Difficulty:** "easy", "normal", "hard".
4. **Stat:** Primary attribute [STR, INT, DIS, CAM, CRT, PCE, EMT].
5. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
6. **Steps (The Missions):**
   - Each step acts like a Task.
   - **Inheritance:** Steps inherit Difficulty/Stat from the Raid unless specified.
   - **Anomalies:** You CAN override a step's difficulty/stat (e.g., a "Hard" step in a "Normal" raid).
   - **Skill Lock:** Steps ALWAYS inherit the Raid's Skill. You cannot change this per step.

--- JSON TEMPLATE ---

\`\`\`json
{
  "raids": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "Operation: PROJECT_NAME",
      "difficulty": "hard",
      "stat": "INT",
      "skillId": "OPTIONAL_SKILL_ID",
      "description": "Brief tactical overview.",
      "deadline": "YYYY-MM-DD",
      "steps": [
        {
          "title": "Phase 1: Recon",
          "difficulty": "easy", 
          "stat": "INT",
          "subtasks": ["Research", "Draft Plan"]
        },
        {
          "title": "Phase 2: Execution",
          "difficulty": "hard",
          "stat": "DIS", 
          "isTimed": true,
          "durationMinutes": 120
        }
      ]
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Plan a workout month. 3 days cardio, 3 days weights."
**Output:**
\`\`\`json
{
  "raids": [
    {
      "title": "Operation: Iron Body",
      "difficulty": "hard",
      "stat": "STR",
      "description": "Monthly physical conditioning cycle.",
      "steps": [
        { "title": "Week 1: Endurance", "difficulty": "normal", "stat": "STR" },
        { "title": "Week 2: Hypertrophy", "difficulty": "hard", "stat": "STR" }
      ]
    }
  ]
}
\`\`\`

**Input:** "Launch a blog. Needs design and coding."
**Output:**
\`\`\`json
{
  "raids": [
    {
      "title": "Operation: Digital Voice",
      "difficulty": "normal",
      "stat": "INT",
      "steps": [
        { "title": "UI Design", "stat": "CRT", "difficulty": "normal" },
        { "title": "Backend Setup", "stat": "INT", "difficulty": "hard" }
      ]
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-red-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-red-500/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg text-red-500 border border-red-500/20",children:n.jsx(ot,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-red-500 flex items-center gap-2",children:["The War Room ",n.jsx("span",{className:"text-[9px] bg-red-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Raid Operations Protocol"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-red-500 mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-red-500 uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-red-500",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Paste it into your AI's ",n.jsx("strong",{children:'"System Instructions"'}),"."]}),n.jsx("li",{children:'Command the AI to plan complex projects (e.g., "Plan a marketing campaign").'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-red-500 text-black hover:bg-red-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-red-500/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},BM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are the Skill Tree Architect.
GOAL: Define and track long-term proficiencies.

1. **Structure:** Skills are the "containers" for XP earned from Tasks/Habits.
2. **Linking:** Every Task/Habit/Raid SHOULD be linked to a \`skillId\` if possible.
   - When a task is completed, 50% of its XP goes to the linked Skill.
3. **Leveling:**
   - Skills level up independently from the User Level.
   - **Formula:** Next Level XP = 100 * (Level ^ 1.5).
   - **Ranks:**
     - Level 1-9: Novice
     - Level 10-24: Adept
     - Level 25-49: Expert
     - Level 50-99: Master
     - Level 100+: Grandmaster
4. **Rust:** Skills decay if not practiced for 30 days (Rust State).
   - To cure rust: Complete a task linked to that skill.

--- JSON TEMPLATE (SKILLS) ---

\`\`\`json
{
  "skills": [
    {
      "title": "Python Programming",
      "relatedStats": ["INT", "CRT"],
      "description": "Backend development and data science."
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "I want to learn Guitar."
**Output:**
\`\`\`json
{
  "skills": [
    {
      "title": "Guitar Mastery",
      "relatedStats": ["CRT", "DIS"],
      "description": "Acoustic and Electric guitar techniques."
    }
  ]
}
\`\`\`

**Input:** "Add a skill for Cooking."
**Output:**
\`\`\`json
{
  "skills": [
    {
      "title": "Culinary Arts",
      "relatedStats": ["CRT", "PCE"],
      "description": "Mastering flavors and techniques."
    }
  ]
}
\`\`\``,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-blue-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-blue-500/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-500 border border-blue-500/20",children:n.jsx(xt,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-blue-500 flex items-center gap-2",children:["Skill Tree Architect ",n.jsx("span",{className:"text-[9px] bg-blue-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Mastery Protocol"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-blue-500 mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-blue-500 uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-blue-500",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Paste it into your AI's ",n.jsx("strong",{children:'"System Instructions"'}),"."]}),n.jsx("li",{children:'Command the AI to define new skills (e.g., "Add a skill for Guitar").'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-blue-500 text-black hover:bg-blue-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-blue-500/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},$M=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are "The Bazaar Architect" ( ).
GOAL: Generate RPG-style Shop Items for a gamified productivity app.

WHEN I ASK FOR ITEMS, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a theme (e.g., "Cyberpunk Gear", "Magic Potions") or specific items.

--- OUTPUT RULES ---
1. **IDs:** Must be unique strings (e.g., "item_cyber_deck").
2. **Type:** 
   - "custom": Consumables (e.g., "Skip Gym", "Cheat Meal").
   - "artifact": Permanent passive bonuses (e.g., +10% INT XP).
   - "redemption": Real-world rewards (e.g., "1 Hour Gaming").
3. **Cost:** Balanced (100-500 for consumables, 1000+ for artifacts).
4. **Icons:** Use Lucide React icon names (e.g., "Zap", "Shield", "Coffee").
5. **Effects:** Only for "artifact" type.
   - "xp_boost": Multiplier for XP (0.1 = +10%).
   - "gold_boost": Multiplier for Gold.
   - "stat": Optional. If set (STR, INT, etc.), applies only to that stat.

--- JSON TEMPLATE ---

\`\`\`json
{
  "storeItems": [
    {
      "id": "item_unique_id",
      "title": "ITEM_NAME",
      "description": "Flavor text description.",
      "cost": 500,
      "icon": "Zap",
      "type": "artifact",
      "isInfinite": false,
      "effect": {
        "type": "xp_boost",
        "value": 0.1,
        "stat": "INT"
      }
    },
    {
      "id": "item_potion_01",
      "title": "Health Potion",
      "description": "Restores energy instantly.",
      "cost": 50,
      "icon": "Heart",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a set of productivity potions."
**Output:**
\`\`\`json
{
  "storeItems": [
    {
      "id": "pot_focus",
      "title": "Elixir of Focus",
      "description": "Grants deep work capability for 2 hours.",
      "cost": 150,
      "icon": "FlaskConical",
      "type": "custom",
      "isInfinite": true
    },
    {
      "id": "pot_rest",
      "title": "Draught of Sleep",
      "description": "Ensures a perfect night's rest.",
      "cost": 100,
      "icon": "Moon",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\`\`\`
`,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-pink-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-pink-500/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-pink-500/10 rounded-lg text-pink-500 border border-pink-500/20",children:n.jsx(V0,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-pink-500 flex items-center gap-2",children:["Shop Archives ",n.jsx("span",{className:"text-[9px] bg-pink-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Economy Protocol"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-pink-500/10 border border-pink-500/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-pink-400 mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-pink-300 uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-pink-500",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Open ",n.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),n.jsxs("li",{children:["Paste the text into the ",n.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),n.jsx("li",{children:'Command the AI to generate items (e.g., "Create legendary coding artifacts").'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-pink-500 text-black hover:bg-pink-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-pink-500/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},FM=()=>{const{state:i,dispatch:e}=ke(),{taskState:l}=Kt(),{habitState:o}=Qt(),{raidState:r}=Ii(),{shopState:d}=jr(),[u,h]=U.useState(!1),g={user:{level:i.user.level,title:i.user.title,stats:i.user.stats,gold:i.user.gold,xp:i.user.currentXP},activeTasks:l.tasks.filter(v=>!v.isCompleted).map(v=>({title:v.title,difficulty:v.difficulty,stat:v.stat})),habits:o.habits.map(v=>({title:v.title,type:v.type,frequency:v.frequency})),activeRaids:r.raids.filter(v=>v.status==="active").map(v=>({title:v.title,difficulty:v.difficulty,progress:v.progress})),shopItems:d.storeItems.map(v=>({title:v.title,cost:v.cost,type:v.type}))},m=`
ROLE: You are the Codex Arbiter (AI_CODEX_GEN).
GOAL: Analyze the user's LifeOS data and generate a strict "Codex of Laws" (Consequences) to enforce discipline.

USER DATA SNAPSHOT:
${JSON.stringify(g,null,2)}

INSTRUCTIONS:
1. Analyze their Tasks, Habits, and Raids to identify potential areas of failure or laziness.
2. Create 5-10 "Laws" (Consequences) that punish them for specific failures.
   - Example: "If I miss [Habit Name], I lose 50 Gold."
   - Example: "If I abandon a Raid Step, I lose 100 XP."
   - Example: "If I buy a useless item, I lose 5 Honor."
3. Use the existing Shop Items to suggest "Fines" (e.g., must buy a "Penalty Token").

PENALTY GUIDELINES (DO NOT EXAGGERATE PUNISHMENT):
- **Stat Points:** -1 to -5 (Use sparingly for severe neglect).
- **Gold:** 50 to 1000 G (Scale with severity).
- **XP:** 100 to 1000 XP (Scale with severity).
- **Honor:** 5% to 25% (Reserved for breaking core habits or oaths).

4. RETURN ONLY VALID JSON in the following format (compatible with the injection engine):

{
  "laws": [
    {
      "title": "Law Name (e.g. Neglect of [Habit])",
      "penaltyType": "gold" | "xp" | "stat" | "honor",
      "penaltyValue": 50,
      "statTarget": "DIS" (only if penaltyType is 'stat')
    }
  ]
}

CRITICAL: Return ONLY the JSON. No markdown.
`,y=()=>{navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-indigo-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-indigo-500/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400 border border-indigo-500/20",children:n.jsx(Cr,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-indigo-400 flex items-center gap-2",children:["Codex Arbiter ",n.jsx("span",{className:"text-[9px] bg-indigo-500 text-white px-1.5 rounded font-mono",children:"V1"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Law Generation Protocol"})]})]}),n.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-indigo-400 mt-1",children:n.jsx(U0,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-indigo-400 uppercase mb-1",children:"How to Legislate"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-indigo-400",children:[n.jsx("li",{children:"Copy the System Prompt below (it includes your data)."}),n.jsxs("li",{children:["Open ",n.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),n.jsx("li",{children:"Paste the text. The AI will analyze your habits/tasks."}),n.jsx("li",{children:'It will generate a list of "Laws" (Consequences).'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:y,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${u?"bg-green-500 text-black":"bg-indigo-500 text-white hover:bg-indigo-400"}`,children:[u?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),u?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-indigo-500/30 selection:text-white",children:m})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>e.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},YM=()=>{const{dispatch:i}=ke(),[e,l]=U.useState(!1),o=`ROLE: You are "The Badge Architect" ( ).
GOAL: Generate achievement badges for a gamified life operating system.

WHEN I ASK FOR BADGES, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a category (e.g., "Fitness", "Coding") or a specific achievement.

--- OUTPUT RULES ---
1. **ID:** Unique identifier (snake_case), e.g., "early_riser".
2. **Name:** Creative title (e.g., "Dawn Breaker").
3. **Description:** Clear criteria for unlocking.
4. **Icon:** A valid Lucide React icon name (e.g., "Sun", "Dumbbell", "Code").
5. **Category:** One of: "growth", "combat", "wealth", "social", "system".
6. **Tiers:** 
   - **Standard Badges:** Must have 4 tiers: "silver", "gold", "diamond", "crimson".
   - **Honor Badges:** Must have 7 tiers: "wood", "iron", "copper", "silver", "gold", "diamond", "crimson".
7. **System Badges:** If the badge is related to system stats (e.g., Streak), ensure the criteria matches the system logic (e.g., "7 Day Streak" requires checking the global streak counter).
8. **XP Reward:** Base XP for unlocking the badge.

--- JSON TEMPLATE ---

\`\`\`json
{
  "badges": [
    {
      "id": "badge_unique_id",
      "name": "Badge Name",
      "description": "Unlock criteria description.",
      "icon": "Award",
      "category": "growth",
      "tiers": {
        "silver": "Criteria for Silver",
        "gold": "Criteria for Gold",
        "diamond": "Criteria for Diamond",
        "crimson": "Criteria for Crimson"
      },
      "xpReward": 500
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a badge for reading books."
**Output:**
\`\`\`json
{
  "badges": [
    {
      "id": "badge_bookworm",
      "name": "Keeper of Knowledge",
      "description": "Awarded for consistent reading habits.",
      "icon": "BookOpen",
      "category": "growth",
      "tiers": {
        "silver": "Read 5 Books",
        "gold": "Read 20 Books",
        "diamond": "Read 50 Books",
        "crimson": "Read 100 Books"
      },
      "xpReward": 300
    }
  ]
}
\`\`\`

**Input:** "Create a system badge for daily streaks."
**Output:**
\`\`\`json
{
  "badges": [
    {
      "id": "badge_streak_master",
      "name": "Time Walker",
      "description": "Awarded for maintaining a daily streak.",
      "icon": "Flame",
      "category": "system",
      "tiers": {
        "silver": "7 Day Streak",
        "gold": "30 Day Streak",
        "diamond": "100 Day Streak",
        "crimson": "365 Day Streak"
      },
      "xpReward": 1000
    }
  ]
}
\`\`\`
`,r=()=>{navigator.clipboard.writeText(o),l(!0),setTimeout(()=>l(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[n.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:n.jsx(On,{size:20})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["Badge Architect ",n.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V1"})]}),n.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Protocol Configuration"})]})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:n.jsx(Ie,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[n.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4 flex gap-3",children:[n.jsx("div",{className:"text-purple-400 mt-1",children:n.jsx(us,{size:18})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-bold text-purple-300 uppercase mb-1",children:"How to Initialize"}),n.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-purple-500",children:[n.jsx("li",{children:"Copy the System Prompt below."}),n.jsxs("li",{children:["Open ",n.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),n.jsxs("li",{children:["Paste the text into the ",n.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),n.jsx("li",{children:'Command the AI to generate badges (e.g., "Create badges for fitness").'}),n.jsxs("li",{children:["Copy the JSON output and paste it into ",n.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?n.jsx(Be,{size:12}):n.jsx(ui,{size:12}),e?"Copied!":"Copy Protocol"]})}),n.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:o})]})]}),n.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[n.jsx(Yt,{size:12}),n.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),n.jsx("button",{onClick:()=>i.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},JM={silver:"text-gray-300 border-gray-300 bg-gray-300/10",gold:"text-yellow-400 border-yellow-400 bg-yellow-400/10",diamond:"text-cyan-400 border-cyan-400 bg-cyan-400/10",crimson:"text-red-600 border-red-600 bg-red-600/10 shadow-[0_0_20px_rgba(220,38,38,0.4)]"},XM=({data:i,onClose:e})=>{var z;const{badge:l,currentTier:o,history:r,currentValue:d}=i,{state:u,dispatch:h}=ke(),{user:g}=u,m=()=>{if(!o)return 0;const B=l.levels.findIndex(q=>q.tier===o);return B>=0?B:0},[y,v]=U.useState(m()),S=l.levels[y],N=S.tier,C=!!r[N],E=!C&&(y===0||!!r[l.levels[y-1].tier]),w=JM[N],I=w.split(" ")[0],H=(z=g.featuredBadges)==null?void 0:z.includes(l.id),_=()=>{let B=[...g.featuredBadges||[]];if(H)B=B.filter(q=>q!==l.id),h.addToast("Badge unpinned","info");else{if(B.length>=3){h.addToast("Max 3 pinned badges allowed","error");return}B.push(l.id),h.addToast("Badge pinned to Profile","success")}h.updateUser({featuredBadges:B})},P=B=>{B.stopPropagation(),y>0&&v(y-1)},M=B=>{B.stopPropagation(),y<l.levels.length-1&&v(y+1)};let j=0;if(C)j=100;else if(E){const B=y>0?l.levels[y-1].target:0;S.target-B,j=Math.min(100,d/S.target*100)}else j=0;return n.jsx("div",{onClick:e,className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:B=>B.stopPropagation(),className:"w-full max-w-sm bg-life-paper border border-life-muted/20 rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 flex flex-col",children:[n.jsxs("div",{className:`relative p-6 text-center border-b border-life-muted/10 overflow-hidden transition-colors duration-500 ${N==="crimson"?"bg-red-900/10":""}`,children:[n.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-48 h-48 bg-current opacity-10 blur-[60px] rounded-full pointer-events-none transition-colors duration-500 ${I}`}),n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-life-muted hover:text-white z-20",children:n.jsx(Ie,{size:20})}),o&&n.jsx("button",{onClick:_,className:`absolute top-4 left-4 p-2 rounded-full border transition-all z-20 ${H?"bg-life-gold text-life-black border-life-gold":"bg-transparent text-life-muted border-life-muted/20 hover:text-white"}`,title:H?"Unpin":"Pin to Profile",children:n.jsx(DN,{size:16,className:H?"fill-current":""})}),n.jsxs("div",{className:"flex items-center justify-between mt-2 mb-4 relative z-10",children:[n.jsx("button",{onClick:P,disabled:y===0,className:`p-2 rounded-full transition-all ${y===0?"opacity-0 pointer-events-none":"text-life-gold hover:bg-life-gold/10 hover:scale-110"}`,children:n.jsx(D0,{size:32,strokeWidth:3})}),n.jsx("div",{className:`w-28 h-28 rounded-full border-4 flex items-center justify-center text-5xl shadow-2xl transition-all duration-500 bg-life-black ${w} ${C?"scale-100":"scale-90 opacity-50 grayscale"}`,children:C?l.icon:n.jsx(ds,{size:40})}),n.jsx("button",{onClick:M,disabled:y===l.levels.length-1,className:`p-2 rounded-full transition-all ${y===l.levels.length-1?"opacity-0 pointer-events-none":"text-life-gold hover:bg-life-gold/10 hover:scale-110"}`,children:n.jsx(ht,{size:32,strokeWidth:3})})]}),n.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight text-white mb-1",children:l.name}),n.jsx("div",{className:`inline-block px-3 py-0.5 rounded text-[10px] font-black uppercase tracking-[0.2em] border transition-colors duration-500 ${w}`,children:N})]}),n.jsxs("div",{className:"p-6 space-y-6 flex-1 bg-life-paper relative",children:[n.jsx("div",{className:"text-center flex flex-col items-center justify-center min-h-[40px]",children:n.jsxs("p",{className:"text-sm italic font-serif text-life-muted/80 leading-relaxed animate-in fade-in duration-500",children:['"',S.quote,'"']},y)}),n.jsxs("div",{className:"bg-life-black/40 rounded-xl p-3 border border-life-muted/10 text-center relative overflow-hidden",children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-gold/50"}),n.jsxs("span",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest block mb-1 flex items-center justify-center gap-1",children:[n.jsx(Di,{size:10})," Requirement"]}),n.jsxs("p",{className:"text-xs text-life-text font-medium leading-relaxed",children:[l.description," ",n.jsx("br",{}),n.jsxs("span",{className:"text-life-gold font-bold bg-life-gold/10 px-2 py-0.5 rounded mt-1 inline-block",children:["Target: ",S.target]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-[10px] font-mono font-bold uppercase tracking-wider",children:[n.jsx("span",{className:"text-life-muted",children:"Progress"}),n.jsx("span",{className:C?"text-life-easy":"text-life-gold",children:C?"COMPLETE":`${d} / ${S.target}`})]}),n.jsx("div",{className:"h-2 bg-life-black rounded-full overflow-hidden border border-life-muted/20",children:n.jsx("div",{className:`h-full transition-all duration-500 ${C?"bg-life-easy":"bg-life-gold"}`,style:{width:`${j}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[n.jsxs("div",{className:`p-3 rounded-xl border flex flex-col items-center justify-center gap-1 transition-colors duration-500 ${C?"bg-life-easy/10 border-life-easy/30":"bg-life-black border-life-muted/20"}`,children:[n.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Status"}),n.jsx("span",{className:`text-xs font-black uppercase tracking-wider ${C?"text-life-easy":"text-life-muted"}`,children:C?"ACQUIRED":"LOCKED"})]}),C&&r[N]?n.jsxs("div",{className:"p-3 rounded-xl bg-life-black border border-life-muted/20 flex flex-col items-center justify-center gap-1",children:[n.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Unlocked"}),n.jsx("span",{className:"text-[10px] font-mono text-life-text",children:(()=>{const B=r[N]||"";return B.length>=6?`20${B.substring(0,2)}-${B.substring(2,4)}-${B.substring(4,6)}`:"Unknown"})()})]}):n.jsxs("div",{className:"p-3 rounded-xl bg-life-black border border-life-muted/20 flex flex-col items-center justify-center gap-1 opacity-60",children:[n.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Reward"}),n.jsxs("span",{className:"text-xs font-bold text-life-gold",children:[S.rewards.gold," G"]})]})]})]}),n.jsx("div",{className:"p-4 bg-life-black border-t border-life-muted/10 flex justify-center gap-2",children:l.levels.map((B,q)=>n.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${q===y?"bg-life-gold w-3":"bg-life-muted/30"}`},q))})]})})},KM=[{id:"all",label:"All"},{id:"honor",label:"Honor"},{id:"progression",label:"Progression"},{id:"combat",label:"Combat"},{id:"warfare",label:"Warfare"},{id:"consistency",label:"Consistency"},{id:"resilience",label:"Resilience"},{id:"economy",label:"Economy"},{id:"mastery",label:"Stats"}],QM=()=>{const{getAllBadges:i}=Z0(),e=i(),[l,o]=U.useState("all"),[r,d]=U.useState(null),[u,h]=U.useState(!1),g=l==="all"?e:l==="honor"?e.filter(N=>N.badge.id.startsWith("bdg_honor_")):e.filter(N=>N.badge.category===l),m=r?e.find(N=>N.badge.id===r):null,y=e.filter(N=>N.isUnlocked).length,v=Math.round(y/e.length*100),S={silver:e.filter(N=>N.currentTier==="silver").length,gold:e.filter(N=>N.currentTier==="gold").length,diamond:e.filter(N=>N.currentTier==="diamond").length,crimson:e.filter(N=>N.currentTier==="crimson").length};return n.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"HALL OF GLORY"}),n.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:["The Crimson Legacy  ",v,"% Complete"]})]}),n.jsx("div",{className:"text-life-crimson opacity-50 animate-pulse-slow",children:n.jsx(On,{size:28})})]}),n.jsxs("button",{onClick:()=>h(!u),className:"w-full mb-6 py-3 px-4 bg-life-black border border-life-muted/20 rounded-xl flex items-center justify-between hover:bg-life-muted/5 transition-all group shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-text",children:[n.jsx(R0,{size:16}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Protocol Analysis"})]}),u?n.jsx(ji,{size:16,className:"text-life-muted"}):n.jsx(Ft,{size:16,className:"text-life-muted"})]}),u&&n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6 animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"bg-life-black border border-life-muted/20 p-2 rounded-lg text-center",children:[n.jsx("span",{className:"block text-lg font-black text-gray-400",children:S.silver}),n.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Silver"})]}),n.jsxs("div",{className:"bg-life-black border border-yellow-500/20 p-2 rounded-lg text-center",children:[n.jsx("span",{className:"block text-lg font-black text-yellow-500",children:S.gold}),n.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Gold"})]}),n.jsxs("div",{className:"bg-life-black border border-cyan-500/20 p-2 rounded-lg text-center",children:[n.jsx("span",{className:"block text-lg font-black text-cyan-400",children:S.diamond}),n.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Diamond"})]}),n.jsxs("div",{className:"bg-life-black border border-red-600/20 p-2 rounded-lg text-center",children:[n.jsx("span",{className:"block text-lg font-black text-red-500",children:S.crimson}),n.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Crimson"})]})]}),n.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar mb-6 pb-2",children:KM.map(N=>n.jsx("button",{onClick:()=>o(N.id),className:`
                            px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap border transition-all
                            ${l===N.id?"bg-life-gold text-life-black border-life-gold":"bg-life-black text-life-muted border-life-muted/20 hover:border-life-gold/50"}
                        `,children:N.label},N.id))}),n.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:g.map(N=>{const{badge:C,currentTier:E,isUnlocked:w}=N;let I="border-life-muted/10",H="text-life-muted/20",_="";return E==="silver"&&(I="border-gray-400/50",H="text-gray-300"),E==="gold"&&(I="border-yellow-500/50",H="text-yellow-400",_="shadow-[0_0_15px_rgba(250,204,21,0.1)]"),E==="diamond"&&(I="border-cyan-500/50",H="text-cyan-400",_="shadow-[0_0_20px_rgba(34,211,238,0.2)]"),E==="crimson"&&(I="border-red-600",H="text-red-500",_="shadow-[0_0_25px_rgba(220,38,38,0.3)] bg-red-900/10"),n.jsxs("button",{onClick:()=>d(C.id),className:`
                                aspect-square rounded-xl border bg-life-paper relative flex flex-col items-center justify-center p-2 group transition-all
                                ${I} ${_}
                                ${w?"hover:scale-105 active:scale-95 cursor-pointer":"opacity-50 grayscale hover:opacity-70"}
                            `,children:[n.jsx("div",{className:`text-3xl mb-2 transition-transform group-hover:scale-110 ${H}`,children:w?C.icon:n.jsx(ds,{size:24})}),n.jsx("div",{className:"text-[8px] font-bold text-center uppercase leading-tight text-life-text/80 line-clamp-2",children:C.name}),E&&n.jsx("div",{className:`absolute top-1 right-1 w-2 h-2 rounded-full ${H.replace("text-","bg-")}`})]},C.id)})}),g.length===0&&n.jsx("div",{className:"py-12 text-center text-life-muted italic text-xs",children:"No badges found in this category."}),m&&n.jsx(XM,{data:m,onClose:()=>d(null)})]})},WM=()=>{const{state:i,dispatch:e}=ke(),{modalData:l}=i.ui;if(!l||!l.badge)return null;const{badge:o,tier:r,rewards:d}=l,u=()=>{e.setModal("none")};let h="text-gray-300 border-gray-300",g="bg-gray-500";return r==="gold"&&(h="text-yellow-400 border-yellow-400",g="bg-yellow-500"),r==="diamond"&&(h="text-cyan-400 border-cyan-400",g="bg-cyan-500"),r==="crimson"&&(h="text-red-600 border-red-600",g="bg-red-600"),n.jsx("div",{onClick:u,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs("div",{onClick:m=>m.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-50 slide-in-from-bottom-8 duration-700",children:[n.jsx("div",{className:`absolute inset-0 ${g} blur-[120px] opacity-20 rounded-full animate-pulse-slow pointer-events-none`}),n.jsxs("div",{className:"relative mb-6 group",children:[n.jsx("div",{className:`w-32 h-32 rounded-full border-4 flex items-center justify-center text-6xl bg-life-black shadow-[0_0_50px_currentColor] animate-bounce ${h}`,children:o.icon}),n.jsxs("div",{className:"absolute inset-0 animate-[spin_4s_linear_infinite] pointer-events-none",children:[n.jsx(ur,{size:24,className:`absolute -top-4 left-1/2 -translate-x-1/2 ${h.split(" ")[0]} fill-current`}),n.jsx(ur,{size:24,className:`absolute -bottom-4 left-1/2 -translate-x-1/2 ${h.split(" ")[0]} fill-current`})]})]}),n.jsxs("div",{className:"space-y-2 mb-8 relative z-10",children:[n.jsx("h3",{className:`text-sm font-black uppercase tracking-[0.3em] ${h.split(" ")[0]}`,children:"Protocol Achievement"}),n.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter drop-shadow-xl",children:o.name}),n.jsxs("div",{className:`inline-block px-3 py-1 rounded border text-xs font-black uppercase tracking-widest bg-black/50 ${h}`,children:[r," Rank"]})]}),n.jsxs("div",{className:"flex gap-4 mb-8",children:[n.jsxs("div",{className:"bg-life-paper/80 border border-life-muted/30 px-4 py-2 rounded-xl",children:[n.jsx("span",{className:"block text-[10px] text-life-muted uppercase font-bold",children:"XP Gain"}),n.jsxs("span",{className:"text-lg font-mono font-bold text-white",children:["+",d.xp]})]}),n.jsxs("div",{className:"bg-life-paper/80 border border-life-muted/30 px-4 py-2 rounded-xl",children:[n.jsx("span",{className:"block text-[10px] text-life-muted uppercase font-bold",children:"Gold"}),n.jsxs("span",{className:"text-lg font-mono font-bold text-life-gold",children:["+",d.gold]})]})]}),n.jsx("button",{onClick:u,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-black shadow-xl hover:scale-105 active:scale-95 transition-all ${g.replace("bg-","bg-")}`,children:"Claim Glory"})]})})},ZM=({toast:i,onDismiss:e})=>{const[l,o]=U.useState(null),[r,d]=U.useState(0),[u,h]=U.useState(!1),g=i.message.split("|"),m=g[0].trim(),y=g.length>1?g[1].trim():null,v=E=>{o(E.targetTouches[0].clientX)},S=E=>{if(l===null)return;const I=E.targetTouches[0].clientX-l;I>0&&d(I)},N=()=>{r>100?C():(d(0),o(null))},C=()=>{h(!0),d(500),setTimeout(()=>{e(i.id)},200)};return n.jsxs("div",{onTouchStart:v,onTouchMove:S,onTouchEnd:N,onClick:C,style:{transform:`translateX(${r}px)`,opacity:u?0:1-r/300,transition:l!==null?"none":"all 0.2s ease-out"},className:`
                pointer-events-auto cursor-pointer relative overflow-hidden touch-pan-y
                min-w-[280px] max-w-sm w-full backdrop-blur-xl border shadow-2xl rounded-xl p-3
                flex items-center gap-3 animate-in slide-in-from-top-4 fade-in duration-300
                ${i.type==="error"?"bg-red-950/90 border-red-500/50 shadow-red-900/20":i.type==="level-up"?"bg-life-gold/20 border-life-gold bg-black/90 shadow-life-gold/20":i.type==="success"?"bg-green-950/90 border-green-500/50 shadow-green-900/20":"bg-life-black/90 border-life-muted/30 shadow-black/50"}
            `,children:[n.jsxs("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center shrink-0 border
                ${i.type==="error"?"bg-red-500/20 border-red-500 text-red-500":i.type==="level-up"?"bg-life-gold text-black border-life-gold animate-bounce":i.type==="success"?"bg-green-500/20 border-green-500 text-green-500":"bg-life-muted/20 border-life-muted text-life-muted"}
            `,children:[i.type==="error"&&n.jsx(cn,{size:20}),i.type==="level-up"&&n.jsx(_r,{size:20,strokeWidth:2.5}),i.type==="success"&&n.jsx(Gi,{size:20}),i.type==="info"&&n.jsx(oN,{size:20}),i.type==="crit"&&n.jsx(We,{size:20})]}),n.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[n.jsx("span",{className:"text-xs font-bold text-white leading-tight",children:m}),y&&n.jsx("span",{className:`text-[10px] font-mono font-bold uppercase tracking-wider mt-1 truncate ${i.type==="error"?"text-red-300":"text-life-gold"}`,children:y})]}),n.jsx("div",{className:"text-life-muted/50 hover:text-white transition-colors",children:n.jsx(Ie,{size:14})})]})},e5=()=>{const{state:i,dispatch:e}=ke(),{toasts:l}=i.ui;return l.length===0?null:n.jsx("div",{className:"fixed top-20 left-0 right-0 z-[150] flex flex-col items-center gap-2 pointer-events-none px-4",children:l.map(o=>n.jsx(ZM,{toast:o,onDismiss:r=>e.removeToast(r)},o.id))})},t5=()=>{const{state:i}=ke(),{ui:e,user:l}=i,[o,r]=U.useState(!1);if(U.useEffect(()=>{const u=()=>{r(!0),setTimeout(()=>r(!1),500)};return window.addEventListener("trigger-shake",u),()=>window.removeEventListener("trigger-shake",u)},[]),!l.hasOnboarded)return n.jsx(K2,{});const d=()=>{switch(e.currentView){case"profile":return n.jsx(jT,{});case"shop":return n.jsx(pT,{});case"tasks":return n.jsx(sT,{});case"habits":return n.jsx(aT,{});case"raids":return n.jsx(cT,{});case"campaign":return n.jsx(RT,{});case"skills":return n.jsx(zT,{});case"hall_of_fame":return n.jsx(QM,{});default:return null}};return n.jsxs("div",{className:`flex flex-col h-[100dvh] bg-life-black text-life-text overflow-hidden select-none font-sans ${o?"animate-shake":""} pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]`,children:[n.jsx(W2,{}),n.jsx(e5,{}),n.jsx(U2,{}),n.jsxs("main",{className:"flex-1 overflow-y-auto relative p-4 scroll-smooth",children:[n.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px)",backgroundSize:"20px 20px"}}),n.jsx("div",{className:"max-w-md mx-auto h-full",children:d()})]}),e.activeModal==="addTask"&&n.jsx(_M,{}),e.activeModal==="levelUp"&&n.jsx(EM,{}),e.activeModal==="badgeUnlock"&&n.jsx(WM,{}),e.activeModal==="streak"&&n.jsx(jM,{}),e.activeModal==="devConsole"&&n.jsx(MM,{}),e.activeModal==="itemDetails"&&n.jsx(DM,{}),e.activeModal==="resetConfirm"&&n.jsx(IM,{}),e.activeModal==="confirmation"&&n.jsx(LM,{}),e.activeModal==="loot"&&n.jsx(zM,{}),e.activeModal==="quickSubtask"&&n.jsx(PM,{}),e.activeModal==="dataExchange"&&n.jsx(UM,{}),e.activeModal==="honorBreakdown"&&n.jsx(OM,{})," ",e.activeModal==="questForge"&&n.jsx(HM,{})," ",e.activeModal==="habitProtocol"&&n.jsx(GM,{})," ",e.activeModal==="economyProtocol"&&n.jsx(VM,{})," ",e.activeModal==="raidProtocol"&&n.jsx(qM,{})," ",e.activeModal==="skillProtocol"&&n.jsx(BM,{})," ",e.activeModal==="shopProtocol"&&n.jsx($M,{})," ",e.activeModal==="codexArbiter"&&n.jsx(FM,{})," ",e.activeModal==="badgeProtocol"&&n.jsx(YM,{})," ",n.jsx(X2,{}),n.jsx(UT,{}),n.jsx(HT,{}),n.jsx(I2,{})]})},i5=()=>n.jsx(t5,{}),S0=document.getElementById("root");S0&&k1.createRoot(S0).render(n.jsx(y1.StrictMode,{children:n.jsx(Q1,{children:n.jsx(P2,{children:n.jsx($2,{children:n.jsx(J2,{children:n.jsx(Q2,{children:n.jsx(uT,{children:n.jsx(Z2,{children:n.jsx(xT,{children:n.jsx(i5,{})})})})})})})})})}));export{el as I,xo as N,Du as W};
